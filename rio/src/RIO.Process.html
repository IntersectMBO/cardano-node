<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE NoImplicitPrelude #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE DeriveDataTypeable #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE ViewPatterns #-}</span><span>
</span><span id="line-9"></span><span>
</span><span id="line-10"></span><span class="hs-comment">-- | Interacting with external processes.</span><span>
</span><span id="line-11"></span><span class="hs-comment">--</span><span>
</span><span id="line-12"></span><span class="hs-comment">-- This module provides a layer on top of &quot;System.Process.Typed&quot;, with</span><span>
</span><span id="line-13"></span><span class="hs-comment">-- the following additions:</span><span>
</span><span id="line-14"></span><span class="hs-comment">--</span><span>
</span><span id="line-15"></span><span class="hs-comment">-- * For efficiency, it will cache @PATH@ lookups.</span><span>
</span><span id="line-16"></span><span class="hs-comment">--</span><span>
</span><span id="line-17"></span><span class="hs-comment">-- * For convenience, you can set the working directory and env vars</span><span>
</span><span id="line-18"></span><span class="hs-comment">--   overrides in a 'RIO' environment instead of on the individual</span><span>
</span><span id="line-19"></span><span class="hs-comment">--   calls to the process.</span><span>
</span><span id="line-20"></span><span class="hs-comment">--</span><span>
</span><span id="line-21"></span><span class="hs-comment">-- * Built-in support for logging at the debug level.</span><span>
</span><span id="line-22"></span><span class="hs-comment">--</span><span>
</span><span id="line-23"></span><span class="hs-comment">-- In order to switch over to this API, the main idea is:</span><span>
</span><span id="line-24"></span><span class="hs-comment">--</span><span>
</span><span id="line-25"></span><span class="hs-comment">-- * Like most of the rio library, you need to create an environment</span><span>
</span><span id="line-26"></span><span class="hs-comment">--   value (this time 'ProcessContext'), and include it in your 'RIO'</span><span>
</span><span id="line-27"></span><span class="hs-comment">--   environment. See 'mkProcessContext'.</span><span>
</span><span id="line-28"></span><span class="hs-comment">--</span><span>
</span><span id="line-29"></span><span class="hs-comment">-- * Instead of using the 'System.Process.Typed.proc' function from</span><span>
</span><span id="line-30"></span><span class="hs-comment">--   &quot;System.Process.Typed&quot; for creating a 'ProcessConfig', use the</span><span>
</span><span id="line-31"></span><span class="hs-comment">--   locally defined 'proc' function, which will handle overriding</span><span>
</span><span id="line-32"></span><span class="hs-comment">--   environment variables, looking up paths, performing logging, etc.</span><span>
</span><span id="line-33"></span><span class="hs-comment">--</span><span>
</span><span id="line-34"></span><span class="hs-comment">-- Once you have your 'ProcessConfig', use the standard functions from</span><span>
</span><span id="line-35"></span><span class="hs-comment">-- 'System.Process.Typed' (reexported here for convenient) for running</span><span>
</span><span id="line-36"></span><span class="hs-comment">-- the 'ProcessConfig'.</span><span>
</span><span id="line-37"></span><span class="hs-comment">--</span><span>
</span><span id="line-38"></span><span class="hs-comment">-- @since 0.0.3.0</span><span>
</span><span id="line-39"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">RIO.Process</span><span>
</span><span id="line-40"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * Process context</span></span><span>
</span><span id="line-41"></span><span>    </span><span class="annot"><a href="RIO.Process.html#ProcessContext"><span class="hs-identifier">ProcessContext</span></a></span><span>
</span><span id="line-42"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#HasProcessContext"><span class="hs-identifier">HasProcessContext</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#EnvVars"><span class="hs-identifier">EnvVars</span></a></span><span>
</span><span id="line-44"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#mkProcessContext"><span class="hs-identifier">mkProcessContext</span></a></span><span>
</span><span id="line-45"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#mkDefaultProcessContext"><span class="hs-identifier">mkDefaultProcessContext</span></a></span><span>
</span><span id="line-46"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#modifyEnvVars"><span class="hs-identifier">modifyEnvVars</span></a></span><span>
</span><span id="line-47"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#withModifyEnvVars"><span class="hs-identifier">withModifyEnvVars</span></a></span><span>
</span><span id="line-48"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#lookupEnvFromContext"><span class="hs-identifier">lookupEnvFromContext</span></a></span><span>
</span><span id="line-49"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#withWorkingDir"><span class="hs-identifier">withWorkingDir</span></a></span><span>
</span><span id="line-50"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Lenses</span></span><span>
</span><span id="line-51"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#workingDirL"><span class="hs-identifier">workingDirL</span></a></span><span>
</span><span id="line-52"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#envVarsL"><span class="hs-identifier">envVarsL</span></a></span><span>
</span><span id="line-53"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#envVarsStringsL"><span class="hs-identifier">envVarsStringsL</span></a></span><span>
</span><span id="line-54"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#exeSearchPathL"><span class="hs-identifier">exeSearchPathL</span></a></span><span>
</span><span id="line-55"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Actions</span></span><span>
</span><span id="line-56"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#resetExeCache"><span class="hs-identifier">resetExeCache</span></a></span><span>
</span><span id="line-57"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Configuring</span></span><span>
</span><span id="line-58"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#proc"><span class="hs-identifier">proc</span></a></span><span>
</span><span id="line-59"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Spawning (run child process)</span></span><span>
</span><span id="line-60"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#withProcess"><span class="hs-identifier">withProcess</span></a></span><span>
</span><span id="line-61"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#withProcess_"><span class="hs-identifier">withProcess_</span></a></span><span>
</span><span id="line-62"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#withProcessWait"><span class="hs-identifier">withProcessWait</span></a></span><span>
</span><span id="line-63"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#withProcessWait_"><span class="hs-identifier">withProcessWait_</span></a></span><span>
</span><span id="line-64"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#withProcessTerm"><span class="hs-identifier">withProcessTerm</span></a></span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#withProcessTerm_"><span class="hs-identifier">withProcessTerm_</span></a></span><span>
</span><span id="line-66"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Exec (replacing current process)</span></span><span>
</span><span id="line-67"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#exec"><span class="hs-identifier">exec</span></a></span><span>
</span><span id="line-68"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#execSpawn"><span class="hs-identifier">execSpawn</span></a></span><span>
</span><span id="line-69"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Environment helper</span></span><span>
</span><span id="line-70"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#LoggedProcessContext"><span class="hs-identifier">LoggedProcessContext</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#withProcessContextNoLogging"><span class="hs-identifier">withProcessContextNoLogging</span></a></span><span>
</span><span id="line-72"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Exceptions</span></span><span>
</span><span id="line-73"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#ProcessException"><span class="hs-identifier">ProcessException</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Utilities</span></span><span>
</span><span id="line-75"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#doesExecutableExist"><span class="hs-identifier">doesExecutableExist</span></a></span><span>
</span><span id="line-76"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#findExecutable"><span class="hs-identifier">findExecutable</span></a></span><span>
</span><span id="line-77"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#exeExtensions"><span class="hs-identifier">exeExtensions</span></a></span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#augmentPath"><span class="hs-identifier">augmentPath</span></a></span><span>
</span><span id="line-79"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#augmentPathMap"><span class="hs-identifier">augmentPathMap</span></a></span><span>
</span><span id="line-80"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#augmentPathMap%27"><span class="hs-identifier">augmentPathMap'</span></a></span><span>
</span><span id="line-81"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#showProcessArgDebug"><span class="hs-identifier">showProcessArgDebug</span></a></span><span>
</span><span id="line-82"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Reexports</span></span><span>
</span><span id="line-83"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.ProcessConfig</span></span><span>
</span><span id="line-84"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.StreamSpec</span></span><span>
</span><span id="line-85"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.StreamType</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.Process</span></span><span>
</span><span id="line-87"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.setStdin</span></span><span>
</span><span id="line-88"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.setStdout</span></span><span>
</span><span id="line-89"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.setStderr</span></span><span>
</span><span id="line-90"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.setCloseFds</span></span><span>
</span><span id="line-91"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.setCreateGroup</span></span><span>
</span><span id="line-92"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.setDelegateCtlc</span></span><span class="hs-cpp">
#if MIN_VERSION_process(1, 3, 0)
</span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.setDetachConsole</span></span><span>
</span><span id="line-95"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.setCreateNewConsole</span></span><span>
</span><span id="line-96"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.setNewSession</span></span><span class="hs-cpp">
#endif
</span><span class="hs-cpp">#if MIN_VERSION_process(1, 4, 0) &amp;&amp; !WINDOWS
</span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.setChildGroup</span></span><span>
</span><span id="line-100"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.setChildUser</span></span><span class="hs-cpp">
#endif
</span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.mkStreamSpec</span></span><span>
</span><span id="line-103"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.inherit</span></span><span>
</span><span id="line-104"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.closed</span></span><span>
</span><span id="line-105"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.byteStringInput</span></span><span>
</span><span id="line-106"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.byteStringOutput</span></span><span>
</span><span id="line-107"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.createPipe</span></span><span>
</span><span id="line-108"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.useHandleOpen</span></span><span>
</span><span id="line-109"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.useHandleClose</span></span><span>
</span><span id="line-110"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.startProcess</span></span><span>
</span><span id="line-111"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.stopProcess</span></span><span>
</span><span id="line-112"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.readProcess</span></span><span>
</span><span id="line-113"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.readProcess_</span></span><span>
</span><span id="line-114"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.runProcess</span></span><span>
</span><span id="line-115"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.runProcess_</span></span><span>
</span><span id="line-116"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.readProcessStdout</span></span><span>
</span><span id="line-117"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.readProcessStdout_</span></span><span>
</span><span id="line-118"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.readProcessStderr</span></span><span>
</span><span id="line-119"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.readProcessStderr_</span></span><span>
</span><span id="line-120"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.waitExitCode</span></span><span>
</span><span id="line-121"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.waitExitCodeSTM</span></span><span>
</span><span id="line-122"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.getExitCode</span></span><span>
</span><span id="line-123"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.getExitCodeSTM</span></span><span>
</span><span id="line-124"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.checkExitCode</span></span><span>
</span><span id="line-125"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.checkExitCodeSTM</span></span><span>
</span><span id="line-126"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.getStdin</span></span><span>
</span><span id="line-127"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.getStdout</span></span><span>
</span><span id="line-128"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.getStderr</span></span><span>
</span><span id="line-129"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.ExitCodeException</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.ByteStringOutputException</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-131"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">P.unsafeProcessHandle</span></span><span>
</span><span id="line-132"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-133"></span><span>
</span><span id="line-134"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="RIO.Prelude.Display.html"><span class="hs-identifier">RIO.Prelude.Display</span></a></span><span>
</span><span id="line-135"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="RIO.Prelude.Reexports.html"><span class="hs-identifier">RIO.Prelude.Reexports</span></a></span><span>
</span><span id="line-136"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="RIO.Prelude.Logger.html"><span class="hs-identifier">RIO.Prelude.Logger</span></a></span><span>
</span><span id="line-137"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="RIO.Prelude.RIO.html"><span class="hs-identifier">RIO.Prelude.RIO</span></a></span><span>
</span><span id="line-138"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="RIO.Prelude.Lens.html"><span class="hs-identifier">RIO.Prelude.Lens</span></a></span><span>
</span><span id="line-139"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.html"><span class="hs-identifier">Data.Map</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-140"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.html"><span class="hs-identifier">Data.Text</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-141"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/directory-1.3.8.5/src/System.Directory.html"><span class="hs-identifier">System.Directory</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">D</span></span><span>
</span><span id="line-142"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/System.Environment.html"><span class="hs-identifier">System.Environment</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/System.Environment.html#getEnvironment"><span class="hs-identifier">getEnvironment</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/System.Exit.html"><span class="hs-identifier">System.Exit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/System.Exit.html#exitWith"><span class="hs-identifier">exitWith</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/template-haskell-2.20.0.0/src/System.FilePath.html"><span class="hs-identifier">System.FilePath</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">FP</span></span><span>
</span><span id="line-145"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">System.Process.Typed</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P</span></span><span>
</span><span id="line-146"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">System.Process.Typed</span></span><span> </span><span class="hs-keyword">hiding</span><span>
</span><span id="line-147"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">withProcess</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">withProcess_</span></span><span class="hs-special">,</span><span>
</span><span id="line-148"></span><span>                     </span><span class="annot"><span class="hs-identifier">withProcessWait</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">withProcessWait_</span></span><span class="hs-special">,</span><span>
</span><span id="line-149"></span><span>                     </span><span class="annot"><span class="hs-identifier">withProcessTerm</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">withProcessTerm_</span></span><span class="hs-special">,</span><span>
</span><span id="line-150"></span><span>                     </span><span class="annot"><span class="hs-identifier">proc</span></span><span class="hs-special">)</span><span class="hs-cpp">

#ifndef WINDOWS
</span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/directory-1.3.8.5/src/System.Directory.html"><span class="hs-identifier">System.Directory</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/directory-1.3.8.5/src/System.Directory.html#setCurrentDirectory"><span class="hs-identifier">setCurrentDirectory</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-154"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/unix-2.8.4.0/src/System.Posix.Process.html"><span class="hs-identifier">System.Posix.Process</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/unix-2.8.4.0/src/System.Posix.Process.html#executeFile"><span class="hs-identifier">executeFile</span></a></span><span class="hs-special">)</span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-157"></span><span class="hs-comment">-- | The environment variable map</span><span>
</span><span id="line-158"></span><span class="hs-comment">--</span><span>
</span><span id="line-159"></span><span class="hs-comment">-- @since 0.0.3.0</span><span>
</span><span id="line-160"></span><span class="hs-keyword">type</span><span> </span><span id="EnvVars"><span class="annot"><a href="RIO.Process.html#EnvVars"><span class="hs-identifier hs-var">EnvVars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-161"></span><span>
</span><span id="line-162"></span><span class="hs-comment">-- | Context in which to run processes.</span><span>
</span><span id="line-163"></span><span class="hs-comment">--</span><span>
</span><span id="line-164"></span><span class="hs-comment">-- @since 0.0.3.0</span><span>
</span><span id="line-165"></span><span class="hs-keyword">data</span><span> </span><span id="ProcessContext"><span class="annot"><a href="RIO.Process.html#ProcessContext"><span class="hs-identifier hs-var">ProcessContext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ProcessContext"><span class="annot"><a href="RIO.Process.html#ProcessContext"><span class="hs-identifier hs-var">ProcessContext</span></a></span></span><span>
</span><span id="line-166"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="pcTextMap"><span class="annot"><span class="annottext">ProcessContext -&gt; EnvVars
</span><a href="RIO.Process.html#pcTextMap"><span class="hs-identifier hs-var hs-var">pcTextMap</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="RIO.Process.html#EnvVars"><span class="hs-identifier hs-type">EnvVars</span></a></span><span>
</span><span id="line-167"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Environment variables as map</span></span><span>
</span><span id="line-168"></span><span>
</span><span id="line-169"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="pcStringList"><span class="annot"><span class="annottext">ProcessContext -&gt; [(String, String)]
</span><a href="RIO.Process.html#pcStringList"><span class="hs-identifier hs-var hs-var">pcStringList</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-170"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Environment variables as association list</span></span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="pcPath"><span class="annot"><span class="annottext">ProcessContext -&gt; [String]
</span><a href="RIO.Process.html#pcPath"><span class="hs-identifier hs-var hs-var">pcPath</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-173"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ List of directories searched for executables (@PATH@)</span></span><span>
</span><span id="line-174"></span><span>
</span><span id="line-175"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="pcExeCache"><span class="annot"><span class="annottext">ProcessContext
-&gt; IORef (Map String (Either ProcessException String))
</span><a href="RIO.Process.html#pcExeCache"><span class="hs-identifier hs-var hs-var">pcExeCache</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IORef.html#IORef"><span class="hs-identifier hs-type">IORef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="RIO.Process.html#ProcessException"><span class="hs-identifier hs-type">ProcessException</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-176"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Cache of already looked up executable paths.</span></span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="pcExeExtensions"><span class="annot"><span class="annottext">ProcessContext -&gt; [String]
</span><a href="RIO.Process.html#pcExeExtensions"><span class="hs-identifier hs-var hs-var">pcExeExtensions</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-179"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ @[&quot;&quot;]@ on non-Windows systems, @[&quot;&quot;, &quot;.exe&quot;, &quot;.bat&quot;]@ on Windows</span></span><span>
</span><span id="line-180"></span><span>
</span><span id="line-181"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="pcWorkingDir"><span class="annot"><span class="annottext">ProcessContext -&gt; Maybe String
</span><a href="RIO.Process.html#pcWorkingDir"><span class="hs-identifier hs-var hs-var">pcWorkingDir</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-182"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Override the working directory.</span></span><span>
</span><span id="line-183"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span class="hs-comment">-- | Exception type which may be generated in this module.</span><span>
</span><span id="line-186"></span><span class="hs-comment">--</span><span>
</span><span id="line-187"></span><span class="hs-comment">-- /NOTE/ Other exceptions may be thrown by underlying libraries!</span><span>
</span><span id="line-188"></span><span class="hs-comment">--</span><span>
</span><span id="line-189"></span><span class="hs-comment">-- @since 0.0.3.0</span><span>
</span><span id="line-190"></span><span class="hs-keyword">data</span><span> </span><span id="ProcessException"><span class="annot"><a href="RIO.Process.html#ProcessException"><span class="hs-identifier hs-var">ProcessException</span></a></span></span><span>
</span><span id="line-191"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="NoPathFound"><span class="annot"><a href="RIO.Process.html#NoPathFound"><span class="hs-identifier hs-var">NoPathFound</span></a></span></span><span>
</span><span id="line-192"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="ExecutableNotFound"><span class="annot"><a href="RIO.Process.html#ExecutableNotFound"><span class="hs-identifier hs-var">ExecutableNotFound</span></a></span></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-193"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="ExecutableNotFoundAt"><span class="annot"><a href="RIO.Process.html#ExecutableNotFoundAt"><span class="hs-identifier hs-var">ExecutableNotFoundAt</span></a></span></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-194"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="PathsInvalidInPath"><span class="annot"><a href="RIO.Process.html#PathsInvalidInPath"><span class="hs-identifier hs-var">PathsInvalidInPath</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-195"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Typeable.Internal.html#Typeable"><span class="hs-identifier hs-type">Typeable</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679101359"><span id="local-6989586621679101366"><span class="annot"><span class="annottext">ProcessException -&gt; ProcessException -&gt; Bool
(ProcessException -&gt; ProcessException -&gt; Bool)
-&gt; (ProcessException -&gt; ProcessException -&gt; Bool)
-&gt; Eq ProcessException
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: ProcessException -&gt; ProcessException -&gt; Bool
== :: ProcessException -&gt; ProcessException -&gt; Bool
$c/= :: ProcessException -&gt; ProcessException -&gt; Bool
/= :: ProcessException -&gt; ProcessException -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-196"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679101371"><span id="local-6989586621679101376"><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#Show"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="RIO.Process.html#ProcessException"><span class="hs-identifier hs-type">ProcessException</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-197"></span><span>    </span><span id="local-6989586621679101390"><span class="annot"><span class="annottext">show :: ProcessException -&gt; String
</span><a href="#local-6989586621679101390"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="annot"><span class="annottext">ProcessException
</span><a href="RIO.Process.html#NoPathFound"><span class="hs-identifier hs-var">NoPathFound</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;PATH not found in ProcessContext&quot;</span></span><span>
</span><span id="line-198"></span><span>    </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="RIO.Process.html#ExecutableNotFound"><span class="hs-identifier hs-type">ExecutableNotFound</span></a></span><span> </span><span id="local-6989586621679101392"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101392"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679101393"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679101393"><span class="hs-identifier hs-var">path</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#concat"><span class="hs-identifier hs-var">concat</span></a></span><span>
</span><span id="line-199"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Executable named &quot;</span></span><span>
</span><span id="line-200"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101392"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-201"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; not found on path: &quot;</span></span><span>
</span><span id="line-202"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679101393"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-203"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-204"></span><span>    </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="RIO.Process.html#ExecutableNotFoundAt"><span class="hs-identifier hs-type">ExecutableNotFoundAt</span></a></span><span> </span><span id="local-6989586621679101395"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101395"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-205"></span><span>        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Did not find executable at specified path: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101395"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-206"></span><span>    </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="RIO.Process.html#PathsInvalidInPath"><span class="hs-identifier hs-type">PathsInvalidInPath</span></a></span><span> </span><span id="local-6989586621679101396"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679101396"><span class="hs-identifier hs-var">paths</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.OldList.html#unlines"><span class="hs-identifier hs-var">unlines</span></a></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; String) -&gt; [String] -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-207"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="hs-string">&quot;Would need to add some paths to the PATH environment variable \
          \to continue, but they would be invalid because they contain a &quot;</span><span>
</span><span id="line-209"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/filepath-1.4.300.1/src/System.FilePath.Posix.html#searchPathSeparator"><span class="hs-identifier hs-var">FP.searchPathSeparator</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.&quot;</span></span><span>
</span><span id="line-210"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Please fix the following paths and try again:&quot;</span></span><span>
</span><span id="line-211"></span><span>        </span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679101396"><span class="hs-identifier hs-var">paths</span></a></span><span>
</span><span id="line-212"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679101404"><span id="local-6989586621679101408"><span id="local-6989586621679101411"><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Exception.Type.html#Exception"><span class="hs-identifier hs-type">Exception</span></a></span><span> </span><span class="annot"><a href="RIO.Process.html#ProcessException"><span class="hs-identifier hs-type">ProcessException</span></a></span></span></span></span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span class="hs-comment">-- | Get the 'ProcessContext' from the environment.</span><span>
</span><span id="line-215"></span><span class="hs-comment">--</span><span>
</span><span id="line-216"></span><span class="hs-comment">-- @since 0.0.3.0</span><span>
</span><span id="line-217"></span><span class="hs-keyword">class</span><span> </span><span id="HasProcessContext"><span class="annot"><a href="RIO.Process.html#HasProcessContext"><span class="hs-identifier hs-var">HasProcessContext</span></a></span></span><span> </span><span id="local-6989586621679100952"><span class="annot"><a href="#local-6989586621679100952"><span class="hs-identifier hs-type">env</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-218"></span><span>  </span><span id="processContextL"><span class="annot"><a href="RIO.Process.html#processContextL"><span class="hs-identifier hs-type">processContextL</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="annot"><a href="#local-6989586621679100952"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="RIO.Process.html#ProcessContext"><span class="hs-identifier hs-type">ProcessContext</span></a></span><span>
</span><span id="line-219"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="RIO.Process.html#HasProcessContext"><span class="hs-identifier hs-type">HasProcessContext</span></a></span><span> </span><span class="annot"><a href="RIO.Process.html#ProcessContext"><span class="hs-identifier hs-type">ProcessContext</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-220"></span><span>  </span><span id="local-6989586621679101419"><span class="annot"><span class="annottext">processContextL :: Lens' ProcessContext ProcessContext
</span><a href="RIO.Process.html#processContextL"><span class="hs-identifier hs-var hs-var hs-var hs-var">processContextL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ProcessContext -&gt; f ProcessContext)
-&gt; ProcessContext -&gt; f ProcessContext
forall a. a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#id"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-221"></span><span>
</span><span id="line-222"></span><span class="hs-keyword">data</span><span> </span><span id="EnvVarFormat"><span class="annot"><a href="RIO.Process.html#EnvVarFormat"><span class="hs-identifier hs-var">EnvVarFormat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="EVFWindows"><span class="annot"><a href="RIO.Process.html#EVFWindows"><span class="hs-identifier hs-var">EVFWindows</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="EVFNotWindows"><span class="annot"><a href="RIO.Process.html#EVFNotWindows"><span class="hs-identifier hs-var">EVFNotWindows</span></a></span></span><span>
</span><span id="line-223"></span><span>
</span><span id="line-224"></span><span class="annot"><a href="RIO.Process.html#currentEnvVarFormat"><span class="hs-identifier hs-type">currentEnvVarFormat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="RIO.Process.html#EnvVarFormat"><span class="hs-identifier hs-type">EnvVarFormat</span></a></span><span>
</span><span id="line-225"></span><span id="currentEnvVarFormat"><span class="annot"><span class="annottext">currentEnvVarFormat :: EnvVarFormat
</span><a href="RIO.Process.html#currentEnvVarFormat"><span class="hs-identifier hs-var hs-var">currentEnvVarFormat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span class="hs-cpp">
#if WINDOWS
</span><span>  </span><span class="hs-identifier">EVFWindows</span><span class="hs-cpp">
#else
</span><span>  </span><span class="annot"><span class="annottext">EnvVarFormat
</span><a href="RIO.Process.html#EVFNotWindows"><span class="hs-identifier hs-var">EVFNotWindows</span></a></span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-232"></span><span class="hs-comment">-- Don't use CPP so that the Windows code path is at least type checked</span><span>
</span><span id="line-233"></span><span class="hs-comment">-- regularly</span><span>
</span><span id="line-234"></span><span class="annot"><a href="RIO.Process.html#isWindows"><span class="hs-identifier hs-type">isWindows</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Bool"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-235"></span><span id="isWindows"><span class="annot"><span class="annottext">isWindows :: Bool
</span><a href="RIO.Process.html#isWindows"><span class="hs-identifier hs-var hs-var">isWindows</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">EnvVarFormat
</span><a href="RIO.Process.html#currentEnvVarFormat"><span class="hs-identifier hs-var">currentEnvVarFormat</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-236"></span><span>              </span><span class="annot"><span class="annottext">EnvVarFormat
</span><a href="RIO.Process.html#EVFWindows"><span class="hs-identifier hs-var">EVFWindows</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#True"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-237"></span><span>              </span><span class="annot"><span class="annottext">EnvVarFormat
</span><a href="RIO.Process.html#EVFNotWindows"><span class="hs-identifier hs-var">EVFNotWindows</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#False"><span class="hs-identifier hs-var">False</span></a></span><span>
</span><span id="line-238"></span><span>
</span><span id="line-239"></span><span class="hs-comment">-- | Override the working directory processes run in. @Nothing@ means</span><span>
</span><span id="line-240"></span><span class="hs-comment">-- the current process's working directory.</span><span>
</span><span id="line-241"></span><span class="hs-comment">--</span><span>
</span><span id="line-242"></span><span class="hs-comment">-- @since 0.0.3.0</span><span>
</span><span id="line-243"></span><span id="local-6989586621679100956"><span class="annot"><a href="RIO.Process.html#workingDirL"><span class="hs-identifier hs-type">workingDirL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="RIO.Process.html#HasProcessContext"><span class="hs-identifier hs-type">HasProcessContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100956"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="annot"><a href="#local-6989586621679100956"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-244"></span><span id="workingDirL"><span class="annot"><span class="annottext">workingDirL :: forall env. HasProcessContext env =&gt; Lens' env (Maybe String)
</span><a href="RIO.Process.html#workingDirL"><span class="hs-identifier hs-var hs-var">workingDirL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ProcessContext -&gt; f ProcessContext) -&gt; env -&gt; f env
forall env. HasProcessContext env =&gt; Lens' env ProcessContext
Lens' env ProcessContext
</span><a href="RIO.Process.html#processContextL"><span class="hs-identifier hs-var">processContextL</span></a></span><span class="annot"><span class="annottext">((ProcessContext -&gt; f ProcessContext) -&gt; env -&gt; f env)
-&gt; ((Maybe String -&gt; f (Maybe String))
    -&gt; ProcessContext -&gt; f ProcessContext)
-&gt; (Maybe String -&gt; f (Maybe String))
-&gt; env
-&gt; f env
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span class="annot"><span class="annottext">(ProcessContext -&gt; Maybe String)
-&gt; (ProcessContext -&gt; Maybe String -&gt; ProcessContext)
-&gt; Lens ProcessContext ProcessContext (Maybe String) (Maybe String)
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="annot"><span class="annottext">ProcessContext -&gt; Maybe String
</span><a href="RIO.Process.html#pcWorkingDir"><span class="hs-identifier hs-var">pcWorkingDir</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679101432"><span class="annot"><span class="annottext">ProcessContext
</span><a href="#local-6989586621679101432"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679101433"><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621679101433"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessContext
</span><a href="#local-6989586621679101432"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="RIO.Process.html#pcWorkingDir"><span class="hs-identifier hs-var">pcWorkingDir</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679101433"><span class="hs-identifier hs-type">y</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-245"></span><span>
</span><span id="line-246"></span><span class="hs-comment">-- | Get the environment variables. We cannot provide a @Lens@ here,</span><span>
</span><span id="line-247"></span><span class="hs-comment">-- since updating the environment variables requires an @IO@ action to</span><span>
</span><span id="line-248"></span><span class="hs-comment">-- allocate a new @IORef@ for holding the executable path cache.</span><span>
</span><span id="line-249"></span><span class="hs-comment">--</span><span>
</span><span id="line-250"></span><span class="hs-comment">-- @since 0.0.3.0</span><span>
</span><span id="line-251"></span><span id="local-6989586621679100967"><span class="annot"><a href="RIO.Process.html#envVarsL"><span class="hs-identifier hs-type">envVarsL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="RIO.Process.html#HasProcessContext"><span class="hs-identifier hs-type">HasProcessContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100967"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SimpleGetter</span></span><span> </span><span class="annot"><a href="#local-6989586621679100967"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="RIO.Process.html#EnvVars"><span class="hs-identifier hs-type">EnvVars</span></a></span></span><span>
</span><span id="line-252"></span><span id="envVarsL"><span class="annot"><span class="annottext">envVarsL :: forall env. HasProcessContext env =&gt; SimpleGetter env EnvVars
</span><a href="RIO.Process.html#envVarsL"><span class="hs-identifier hs-var hs-var">envVarsL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ProcessContext -&gt; Const r ProcessContext) -&gt; env -&gt; Const r env
forall env. HasProcessContext env =&gt; Lens' env ProcessContext
Lens' env ProcessContext
</span><a href="RIO.Process.html#processContextL"><span class="hs-identifier hs-var">processContextL</span></a></span><span class="annot"><span class="annottext">((ProcessContext -&gt; Const r ProcessContext) -&gt; env -&gt; Const r env)
-&gt; ((EnvVars -&gt; Const r EnvVars)
    -&gt; ProcessContext -&gt; Const r ProcessContext)
-&gt; (EnvVars -&gt; Const r EnvVars)
-&gt; env
-&gt; Const r env
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span class="annot"><span class="annottext">(ProcessContext -&gt; EnvVars) -&gt; SimpleGetter ProcessContext EnvVars
forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><span class="hs-identifier hs-var">to</span></span><span> </span><span class="annot"><span class="annottext">ProcessContext -&gt; EnvVars
</span><a href="RIO.Process.html#pcTextMap"><span class="hs-identifier hs-var">pcTextMap</span></a></span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="hs-comment">-- | Get the 'EnvVars' as an associated list of 'String's.</span><span>
</span><span id="line-255"></span><span class="hs-comment">--</span><span>
</span><span id="line-256"></span><span class="hs-comment">-- Useful for interacting with other libraries.</span><span>
</span><span id="line-257"></span><span class="hs-comment">--</span><span>
</span><span id="line-258"></span><span class="hs-comment">-- @since 0.0.3.0</span><span>
</span><span id="line-259"></span><span id="local-6989586621679100975"><span class="annot"><a href="RIO.Process.html#envVarsStringsL"><span class="hs-identifier hs-type">envVarsStringsL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="RIO.Process.html#HasProcessContext"><span class="hs-identifier hs-type">HasProcessContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100975"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SimpleGetter</span></span><span> </span><span class="annot"><a href="#local-6989586621679100975"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span></span><span>
</span><span id="line-260"></span><span id="envVarsStringsL"><span class="annot"><span class="annottext">envVarsStringsL :: forall env.
HasProcessContext env =&gt;
SimpleGetter env [(String, String)]
</span><a href="RIO.Process.html#envVarsStringsL"><span class="hs-identifier hs-var hs-var">envVarsStringsL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ProcessContext -&gt; Const r ProcessContext) -&gt; env -&gt; Const r env
forall env. HasProcessContext env =&gt; Lens' env ProcessContext
Lens' env ProcessContext
</span><a href="RIO.Process.html#processContextL"><span class="hs-identifier hs-var">processContextL</span></a></span><span class="annot"><span class="annottext">((ProcessContext -&gt; Const r ProcessContext) -&gt; env -&gt; Const r env)
-&gt; (([(String, String)] -&gt; Const r [(String, String)])
    -&gt; ProcessContext -&gt; Const r ProcessContext)
-&gt; ([(String, String)] -&gt; Const r [(String, String)])
-&gt; env
-&gt; Const r env
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span class="annot"><span class="annottext">(ProcessContext -&gt; [(String, String)])
-&gt; SimpleGetter ProcessContext [(String, String)]
forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><span class="hs-identifier hs-var">to</span></span><span> </span><span class="annot"><span class="annottext">ProcessContext -&gt; [(String, String)]
</span><a href="RIO.Process.html#pcStringList"><span class="hs-identifier hs-var">pcStringList</span></a></span><span>
</span><span id="line-261"></span><span>
</span><span id="line-262"></span><span class="hs-comment">-- | Get the list of directories searched for executables (the @PATH@).</span><span>
</span><span id="line-263"></span><span class="hs-comment">--</span><span>
</span><span id="line-264"></span><span class="hs-comment">-- Similar to 'envVarMapL', this cannot be a full @Lens@.</span><span>
</span><span id="line-265"></span><span class="hs-comment">--</span><span>
</span><span id="line-266"></span><span class="hs-comment">-- @since 0.0.3.0</span><span>
</span><span id="line-267"></span><span id="local-6989586621679100978"><span class="annot"><a href="RIO.Process.html#exeSearchPathL"><span class="hs-identifier hs-type">exeSearchPathL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="RIO.Process.html#HasProcessContext"><span class="hs-identifier hs-type">HasProcessContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100978"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">SimpleGetter</span></span><span> </span><span class="annot"><a href="#local-6989586621679100978"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-268"></span><span id="exeSearchPathL"><span class="annot"><span class="annottext">exeSearchPathL :: forall env. HasProcessContext env =&gt; SimpleGetter env [String]
</span><a href="RIO.Process.html#exeSearchPathL"><span class="hs-identifier hs-var hs-var">exeSearchPathL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ProcessContext -&gt; Const r ProcessContext) -&gt; env -&gt; Const r env
forall env. HasProcessContext env =&gt; Lens' env ProcessContext
Lens' env ProcessContext
</span><a href="RIO.Process.html#processContextL"><span class="hs-identifier hs-var">processContextL</span></a></span><span class="annot"><span class="annottext">((ProcessContext -&gt; Const r ProcessContext) -&gt; env -&gt; Const r env)
-&gt; (([String] -&gt; Const r [String])
    -&gt; ProcessContext -&gt; Const r ProcessContext)
-&gt; ([String] -&gt; Const r [String])
-&gt; env
-&gt; Const r env
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span class="annot"><span class="annottext">(ProcessContext -&gt; [String])
-&gt; SimpleGetter ProcessContext [String]
forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><span class="hs-identifier hs-var">to</span></span><span> </span><span class="annot"><span class="annottext">ProcessContext -&gt; [String]
</span><a href="RIO.Process.html#pcPath"><span class="hs-identifier hs-var">pcPath</span></a></span><span>
</span><span id="line-269"></span><span>
</span><span id="line-270"></span><span class="hs-comment">-- | Create a new 'ProcessContext' from the given environment variable map.</span><span>
</span><span id="line-271"></span><span class="hs-comment">--</span><span>
</span><span id="line-272"></span><span class="hs-comment">-- @since 0.0.3.0</span><span>
</span><span id="line-273"></span><span id="local-6989586621679100981"><span class="annot"><a href="RIO.Process.html#mkProcessContext"><span class="hs-identifier hs-type">mkProcessContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679100981"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="RIO.Process.html#EnvVars"><span class="hs-identifier hs-type">EnvVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679100981"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="RIO.Process.html#ProcessContext"><span class="hs-identifier hs-type">ProcessContext</span></a></span></span><span>
</span><span id="line-274"></span><span id="mkProcessContext"><span class="annot"><span class="annottext">mkProcessContext :: forall (m :: * -&gt; *). MonadIO m =&gt; EnvVars -&gt; m ProcessContext
</span><a href="RIO.Process.html#mkProcessContext"><span class="hs-identifier hs-var hs-var">mkProcessContext</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EnvVars -&gt; EnvVars
</span><a href="RIO.Process.html#normalizePathEnv"><span class="hs-identifier hs-var">normalizePathEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679101461"><span class="annot"><span class="annottext">EnvVars
</span><a href="#local-6989586621679101461"><span class="hs-identifier hs-var">tm</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-275"></span><span>    </span><span id="local-6989586621679101462"><span class="annot"><span class="annottext">IORef (Map String (Either ProcessException String))
</span><a href="#local-6989586621679101462"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Map String (Either ProcessException String)
-&gt; m (IORef (Map String (Either ProcessException String)))
forall (m :: * -&gt; *) a. MonadIO m =&gt; a -&gt; m (IORef a)
</span><span class="hs-identifier hs-var">newIORef</span></span><span> </span><span class="annot"><span class="annottext">Map String (Either ProcessException String)
forall k a. Map k a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#empty"><span class="hs-identifier hs-var">Map.empty</span></a></span><span>
</span><span id="line-276"></span><span>    </span><span class="annot"><span class="annottext">ProcessContext -&gt; m ProcessContext
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><a href="RIO.Process.html#ProcessContext"><span class="hs-identifier hs-type">ProcessContext</span></a></span><span>
</span><span id="line-277"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pcTextMap :: EnvVars
</span><a href="RIO.Process.html#pcTextMap"><span class="hs-identifier hs-var">pcTextMap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EnvVars
</span><a href="#local-6989586621679101461"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-278"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pcStringList :: [(String, String)]
</span><a href="RIO.Process.html#pcStringList"><span class="hs-identifier hs-var">pcStringList</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Text, Text) -&gt; (String, String))
-&gt; [(Text, Text)] -&gt; [(String, String)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; String
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Show.html#unpack"><span class="hs-identifier hs-var">T.unpack</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; String)
-&gt; (Text -&gt; String) -&gt; (Text, Text) -&gt; (String, String)
forall b c b' c'. (b -&gt; c) -&gt; (b' -&gt; c') -&gt; (b, b') -&gt; (c, c')
forall (a :: * -&gt; * -&gt; *) b c b' c'.
Arrow a =&gt;
a b c -&gt; a b' c' -&gt; a (b, b') (c, c')
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Arrow.html#%2A%2A%2A"><span class="hs-operator hs-var">***</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Show.html#unpack"><span class="hs-identifier hs-var">T.unpack</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([(Text, Text)] -&gt; [(String, String)])
-&gt; [(Text, Text)] -&gt; [(String, String)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">EnvVars -&gt; [(Text, Text)]
forall k a. Map k a -&gt; [(k, a)]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#toList"><span class="hs-identifier hs-var">Map.toList</span></a></span><span> </span><span class="annot"><span class="annottext">EnvVars
</span><a href="#local-6989586621679101461"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-279"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pcPath :: [String]
</span><a href="RIO.Process.html#pcPath"><span class="hs-identifier hs-var">pcPath</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-280"></span><span>             </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="RIO.Process.html#isWindows"><span class="hs-identifier hs-var">isWindows</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.&quot;</span></span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; [String]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#%3A"><span class="hs-glyph hs-var">:</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String]
forall a. a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#id"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-281"></span><span>             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[String] -&gt; (Text -&gt; [String]) -&gt; Maybe Text -&gt; [String]
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Maybe.html#maybe"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; [String]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/filepath-1.4.300.1/src/System.FilePath.Posix.html#splitSearchPath"><span class="hs-identifier hs-var">FP.splitSearchPath</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; [String]) -&gt; (Text -&gt; String) -&gt; Text -&gt; [String]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Show.html#unpack"><span class="hs-identifier hs-var">T.unpack</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; EnvVars -&gt; Maybe Text
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#lookup"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;PATH&quot;</span></span><span> </span><span class="annot"><span class="annottext">EnvVars
</span><a href="#local-6989586621679101461"><span class="hs-identifier hs-var">tm</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-282"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pcExeCache :: IORef (Map String (Either ProcessException String))
</span><a href="RIO.Process.html#pcExeCache"><span class="hs-identifier hs-var">pcExeCache</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IORef (Map String (Either ProcessException String))
</span><a href="#local-6989586621679101462"><span class="hs-identifier hs-var">ref</span></a></span><span>
</span><span id="line-283"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pcExeExtensions :: [String]
</span><a href="RIO.Process.html#pcExeExtensions"><span class="hs-identifier hs-var">pcExeExtensions</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-284"></span><span>            </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="RIO.Process.html#isWindows"><span class="hs-identifier hs-var">isWindows</span></a></span><span>
</span><span id="line-285"></span><span>                </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679101473"><span class="annot"><span class="annottext">pathext :: Text
</span><a href="#local-6989586621679101473"><span class="hs-identifier hs-var hs-var">pathext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe Text -&gt; Text
forall a. a -&gt; Maybe a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Maybe.html#fromMaybe"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679101475"><span class="hs-identifier hs-var">defaultPATHEXT</span></a></span><span>
</span><span id="line-286"></span><span>                                             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; EnvVars -&gt; Maybe Text
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#lookup"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;PATHEXT&quot;</span></span><span> </span><span class="annot"><span class="annottext">EnvVars
</span><a href="#local-6989586621679101461"><span class="hs-identifier hs-var">tm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-287"></span><span>                      </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(Text -&gt; String) -&gt; [Text] -&gt; [String]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Show.html#unpack"><span class="hs-identifier hs-var">T.unpack</span></a></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; [String]) -&gt; [Text] -&gt; [String]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; Text -&gt; Text -&gt; [Text]
Text -&gt; Text -&gt; [Text]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.html#splitOn"><span class="hs-identifier hs-var">T.splitOn</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;;&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679101473"><span class="hs-identifier hs-var">pathext</span></a></span><span>
</span><span id="line-288"></span><span>                </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-289"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pcWorkingDir :: Maybe String
</span><a href="RIO.Process.html#pcWorkingDir"><span class="hs-identifier hs-var">pcWorkingDir</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe String
forall a. Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-290"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-291"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-292"></span><span>    </span><span class="hs-comment">-- Default value for PATHTEXT on Windows versions after Windows XP. (The</span><span>
</span><span id="line-293"></span><span>    </span><span class="hs-comment">-- documentation of the default at</span><span>
</span><span id="line-294"></span><span>    </span><span class="hs-comment">-- https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/start</span><span>
</span><span id="line-295"></span><span>    </span><span class="hs-comment">-- is incomplete.)</span><span>
</span><span id="line-296"></span><span>    </span><span id="local-6989586621679101475"><span class="annot"><span class="annottext">defaultPATHEXT :: Text
</span><a href="#local-6989586621679101475"><span class="hs-identifier hs-var hs-var">defaultPATHEXT</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC&quot;</span></span><span>
</span><span id="line-297"></span><span>
</span><span id="line-298"></span><span>
</span><span id="line-299"></span><span class="hs-comment">-- Fix case insensitivity of the PATH environment variable on Windows,</span><span>
</span><span id="line-300"></span><span class="hs-comment">-- by forcing all keys full uppercase.</span><span>
</span><span id="line-301"></span><span class="annot"><a href="RIO.Process.html#normalizePathEnv"><span class="hs-identifier hs-type">normalizePathEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="RIO.Process.html#EnvVars"><span class="hs-identifier hs-type">EnvVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="RIO.Process.html#EnvVars"><span class="hs-identifier hs-type">EnvVars</span></a></span><span>
</span><span id="line-302"></span><span id="normalizePathEnv"><span class="annot"><span class="annottext">normalizePathEnv :: EnvVars -&gt; EnvVars
</span><a href="RIO.Process.html#normalizePathEnv"><span class="hs-identifier hs-var hs-var">normalizePathEnv</span></a></span></span><span> </span><span id="local-6989586621679101478"><span class="annot"><span class="annottext">EnvVars
</span><a href="#local-6989586621679101478"><span class="hs-identifier hs-var">env</span></a></span></span><span>
</span><span id="line-303"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="RIO.Process.html#isWindows"><span class="hs-identifier hs-var">isWindows</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Text, Text)] -&gt; EnvVars
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#fromList"><span class="hs-identifier hs-var">Map.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">([(Text, Text)] -&gt; EnvVars) -&gt; [(Text, Text)] -&gt; EnvVars
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">((Text, Text) -&gt; (Text, Text)) -&gt; [(Text, Text)] -&gt; [(Text, Text)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Text -&gt; Text) -&gt; (Text, Text) -&gt; (Text, Text)
forall a b c. (a -&gt; b) -&gt; (a, c) -&gt; (b, c)
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Bifunctor.html#first"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.html#toUpper"><span class="hs-identifier hs-var">T.toUpper</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([(Text, Text)] -&gt; [(Text, Text)])
-&gt; [(Text, Text)] -&gt; [(Text, Text)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">EnvVars -&gt; [(Text, Text)]
forall k a. Map k a -&gt; [(k, a)]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#toList"><span class="hs-identifier hs-var">Map.toList</span></a></span><span> </span><span class="annot"><span class="annottext">EnvVars
</span><a href="#local-6989586621679101478"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-304"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EnvVars
</span><a href="#local-6989586621679101478"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-305"></span><span>
</span><span id="line-306"></span><span>
</span><span id="line-307"></span><span class="hs-comment">-- | Reset the executable cache.</span><span>
</span><span id="line-308"></span><span class="hs-comment">--</span><span>
</span><span id="line-309"></span><span class="hs-comment">-- @since 0.0.3.0</span><span>
</span><span id="line-310"></span><span id="local-6989586621679101013"><span id="local-6989586621679101014"><span class="annot"><a href="RIO.Process.html#resetExeCache"><span class="hs-identifier hs-type">resetExeCache</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101013"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/mtl-2.3.1/src/Control.Monad.Reader.Class.html#MonadReader"><span class="hs-identifier hs-type">MonadReader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101014"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101013"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#HasProcessContext"><span class="hs-identifier hs-type">HasProcessContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101014"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101013"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-311"></span><span id="resetExeCache"><span class="annot"><span class="annottext">resetExeCache :: forall (m :: * -&gt; *) env.
(MonadIO m, MonadReader env m, HasProcessContext env) =&gt;
m ()
</span><a href="RIO.Process.html#resetExeCache"><span class="hs-identifier hs-var hs-var">resetExeCache</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-312"></span><span>  </span><span id="local-6989586621679101501"><span class="annot"><span class="annottext">ProcessContext
</span><a href="#local-6989586621679101501"><span class="hs-identifier hs-var">pc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Getting ProcessContext env ProcessContext -&gt; m ProcessContext
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting ProcessContext env ProcessContext
forall env. HasProcessContext env =&gt; Lens' env ProcessContext
Lens' env ProcessContext
</span><a href="RIO.Process.html#processContextL"><span class="hs-identifier hs-var">processContextL</span></a></span><span>
</span><span id="line-313"></span><span>  </span><span class="annot"><span class="annottext">IORef (Map String (Either ProcessException String))
-&gt; (Map String (Either ProcessException String)
    -&gt; (Map String (Either ProcessException String), ()))
-&gt; m ()
forall (m :: * -&gt; *) a b.
MonadIO m =&gt;
IORef a -&gt; (a -&gt; (a, b)) -&gt; m b
</span><span class="hs-identifier hs-var">atomicModifyIORef</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProcessContext
-&gt; IORef (Map String (Either ProcessException String))
</span><a href="RIO.Process.html#pcExeCache"><span class="hs-identifier hs-var">pcExeCache</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessContext
</span><a href="#local-6989586621679101501"><span class="hs-identifier hs-var">pc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Map String (Either ProcessException String), ())
-&gt; Map String (Either ProcessException String)
-&gt; (Map String (Either ProcessException String), ())
forall a b. a -&gt; b -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">(Map String (Either ProcessException String), ())
forall a. Monoid a =&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-314"></span><span>
</span><span id="line-315"></span><span class="hs-comment">-- | Same as 'mkProcessContext' but uses the system environment (from</span><span>
</span><span id="line-316"></span><span class="hs-comment">-- 'System.Environment.getEnvironment').</span><span>
</span><span id="line-317"></span><span class="hs-comment">--</span><span>
</span><span id="line-318"></span><span class="hs-comment">-- @since 0.0.3.0</span><span>
</span><span id="line-319"></span><span id="local-6989586621679101033"><span class="annot"><a href="RIO.Process.html#mkDefaultProcessContext"><span class="hs-identifier hs-type">mkDefaultProcessContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101033"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101033"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="RIO.Process.html#ProcessContext"><span class="hs-identifier hs-type">ProcessContext</span></a></span></span><span>
</span><span id="line-320"></span><span id="mkDefaultProcessContext"><span class="annot"><span class="annottext">mkDefaultProcessContext :: forall (m :: * -&gt; *). MonadIO m =&gt; m ProcessContext
</span><a href="RIO.Process.html#mkDefaultProcessContext"><span class="hs-identifier hs-var hs-var">mkDefaultProcessContext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-321"></span><span>    </span><span class="annot"><span class="annottext">IO ProcessContext -&gt; m ProcessContext
forall a. IO a -&gt; m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO ProcessContext -&gt; m ProcessContext)
-&gt; IO ProcessContext -&gt; m ProcessContext
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-322"></span><span>    </span><span class="annot"><span class="annottext">IO [(String, String)]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/System.Environment.html#getEnvironment"><span class="hs-identifier hs-var">getEnvironment</span></a></span><span> </span><span class="annot"><span class="annottext">IO [(String, String)]
-&gt; ([(String, String)] -&gt; IO ProcessContext) -&gt; IO ProcessContext
forall a b. IO a -&gt; (a -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span>
</span><span id="line-323"></span><span>          </span><span class="annot"><span class="annottext">EnvVars -&gt; IO ProcessContext
forall (m :: * -&gt; *). MonadIO m =&gt; EnvVars -&gt; m ProcessContext
</span><a href="RIO.Process.html#mkProcessContext"><span class="hs-identifier hs-var">mkProcessContext</span></a></span><span>
</span><span id="line-324"></span><span>        </span><span class="annot"><span class="annottext">(EnvVars -&gt; IO ProcessContext)
-&gt; ([(String, String)] -&gt; EnvVars)
-&gt; [(String, String)]
-&gt; IO ProcessContext
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[(Text, Text)] -&gt; EnvVars
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#fromList"><span class="hs-identifier hs-var">Map.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">([(Text, Text)] -&gt; EnvVars)
-&gt; ([(String, String)] -&gt; [(Text, Text)])
-&gt; [(String, String)]
-&gt; EnvVars
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">((String, String) -&gt; (Text, Text))
-&gt; [(String, String)] -&gt; [(Text, Text)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Internal.html#pack"><span class="hs-identifier hs-var">T.pack</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text)
-&gt; (String -&gt; Text) -&gt; (String, String) -&gt; (Text, Text)
forall b c b' c'. (b -&gt; c) -&gt; (b' -&gt; c') -&gt; (b, b') -&gt; (c, c')
forall (a :: * -&gt; * -&gt; *) b c b' c'.
Arrow a =&gt;
a b c -&gt; a b' c' -&gt; a (b, b') (c, c')
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Arrow.html#%2A%2A%2A"><span class="hs-operator hs-var">***</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Internal.html#pack"><span class="hs-identifier hs-var">T.pack</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-325"></span><span>
</span><span id="line-326"></span><span class="hs-comment">-- | Modify the environment variables of a 'ProcessContext'. This will not</span><span>
</span><span id="line-327"></span><span class="hs-comment">-- change the working directory.</span><span>
</span><span id="line-328"></span><span class="hs-comment">--</span><span>
</span><span id="line-329"></span><span class="hs-comment">-- Note that this requires 'MonadIO', as it will create a new 'IORef'</span><span>
</span><span id="line-330"></span><span class="hs-comment">-- for the cache.</span><span>
</span><span id="line-331"></span><span class="hs-comment">--</span><span>
</span><span id="line-332"></span><span class="hs-comment">-- @since 0.0.3.0</span><span>
</span><span id="line-333"></span><span id="local-6989586621679101038"><span class="annot"><a href="RIO.Process.html#modifyEnvVars"><span class="hs-identifier hs-type">modifyEnvVars</span></a></span><span>
</span><span id="line-334"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101038"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-335"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="RIO.Process.html#ProcessContext"><span class="hs-identifier hs-type">ProcessContext</span></a></span><span>
</span><span id="line-336"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="RIO.Process.html#EnvVars"><span class="hs-identifier hs-type">EnvVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="RIO.Process.html#EnvVars"><span class="hs-identifier hs-type">EnvVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-337"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101038"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="RIO.Process.html#ProcessContext"><span class="hs-identifier hs-type">ProcessContext</span></a></span></span><span>
</span><span id="line-338"></span><span id="modifyEnvVars"><span class="annot"><span class="annottext">modifyEnvVars :: forall (m :: * -&gt; *).
MonadIO m =&gt;
ProcessContext -&gt; (EnvVars -&gt; EnvVars) -&gt; m ProcessContext
</span><a href="RIO.Process.html#modifyEnvVars"><span class="hs-identifier hs-var hs-var">modifyEnvVars</span></a></span></span><span> </span><span id="local-6989586621679101520"><span class="annot"><span class="annottext">ProcessContext
</span><a href="#local-6989586621679101520"><span class="hs-identifier hs-var">pc</span></a></span></span><span> </span><span id="local-6989586621679101521"><span class="annot"><span class="annottext">EnvVars -&gt; EnvVars
</span><a href="#local-6989586621679101521"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-339"></span><span>  </span><span id="local-6989586621679101522"><span class="annot"><span class="annottext">ProcessContext
</span><a href="#local-6989586621679101522"><span class="hs-identifier hs-var">pc'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">EnvVars -&gt; m ProcessContext
forall (m :: * -&gt; *). MonadIO m =&gt; EnvVars -&gt; m ProcessContext
</span><a href="RIO.Process.html#mkProcessContext"><span class="hs-identifier hs-var">mkProcessContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EnvVars -&gt; EnvVars
</span><a href="#local-6989586621679101521"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(EnvVars -&gt; EnvVars) -&gt; EnvVars -&gt; EnvVars
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessContext -&gt; EnvVars
</span><a href="RIO.Process.html#pcTextMap"><span class="hs-identifier hs-var">pcTextMap</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessContext
</span><a href="#local-6989586621679101520"><span class="hs-identifier hs-var">pc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-340"></span><span>  </span><span class="annot"><span class="annottext">ProcessContext -&gt; m ProcessContext
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessContext
</span><a href="#local-6989586621679101522"><span class="hs-identifier hs-var">pc'</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="RIO.Process.html#pcWorkingDir"><span class="hs-identifier hs-var">pcWorkingDir</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="RIO.Process.html#pcWorkingDir"><span class="hs-identifier hs-var">pcWorkingDir</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101520"><span class="hs-identifier hs-type">pc</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-341"></span><span>
</span><span id="line-342"></span><span class="hs-comment">-- | Use 'modifyEnvVars' to create a new 'ProcessContext', and then</span><span>
</span><span id="line-343"></span><span class="hs-comment">-- use it in the provided action.</span><span>
</span><span id="line-344"></span><span class="hs-comment">--</span><span>
</span><span id="line-345"></span><span class="hs-comment">-- @since 0.0.3.0</span><span>
</span><span id="line-346"></span><span id="local-6989586621679101040"><span id="local-6989586621679101041"><span id="local-6989586621679101042"><span class="annot"><a href="RIO.Process.html#withModifyEnvVars"><span class="hs-identifier hs-type">withModifyEnvVars</span></a></span><span>
</span><span id="line-347"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="RIO.Process.html#HasProcessContext"><span class="hs-identifier hs-type">HasProcessContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101040"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/mtl-2.3.1/src/Control.Monad.Reader.Class.html#MonadReader"><span class="hs-identifier hs-type">MonadReader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101040"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101041"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101041"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-348"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="RIO.Process.html#EnvVars"><span class="hs-identifier hs-type">EnvVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="RIO.Process.html#EnvVars"><span class="hs-identifier hs-type">EnvVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-349"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101041"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101042"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-350"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101041"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101042"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-351"></span><span id="withModifyEnvVars"><span class="annot"><span class="annottext">withModifyEnvVars :: forall env (m :: * -&gt; *) a.
(HasProcessContext env, MonadReader env m, MonadIO m) =&gt;
(EnvVars -&gt; EnvVars) -&gt; m a -&gt; m a
</span><a href="RIO.Process.html#withModifyEnvVars"><span class="hs-identifier hs-var hs-var">withModifyEnvVars</span></a></span></span><span> </span><span id="local-6989586621679101538"><span class="annot"><span class="annottext">EnvVars -&gt; EnvVars
</span><a href="#local-6989586621679101538"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679101539"><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621679101539"><span class="hs-identifier hs-var">inner</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-352"></span><span>  </span><span id="local-6989586621679101540"><span class="annot"><span class="annottext">ProcessContext
</span><a href="#local-6989586621679101540"><span class="hs-identifier hs-var">pc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Getting ProcessContext env ProcessContext -&gt; m ProcessContext
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting ProcessContext env ProcessContext
forall env. HasProcessContext env =&gt; Lens' env ProcessContext
Lens' env ProcessContext
</span><a href="RIO.Process.html#processContextL"><span class="hs-identifier hs-var">processContextL</span></a></span><span>
</span><span id="line-353"></span><span>  </span><span id="local-6989586621679101541"><span class="annot"><span class="annottext">ProcessContext
</span><a href="#local-6989586621679101541"><span class="hs-identifier hs-var">pc'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ProcessContext -&gt; (EnvVars -&gt; EnvVars) -&gt; m ProcessContext
forall (m :: * -&gt; *).
MonadIO m =&gt;
ProcessContext -&gt; (EnvVars -&gt; EnvVars) -&gt; m ProcessContext
</span><a href="RIO.Process.html#modifyEnvVars"><span class="hs-identifier hs-var">modifyEnvVars</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessContext
</span><a href="#local-6989586621679101540"><span class="hs-identifier hs-var">pc</span></a></span><span> </span><span class="annot"><span class="annottext">EnvVars -&gt; EnvVars
</span><a href="#local-6989586621679101538"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-354"></span><span>  </span><span class="annot"><span class="annottext">(env -&gt; env) -&gt; m a -&gt; m a
forall a. (env -&gt; env) -&gt; m a -&gt; m a
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; r) -&gt; m a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/mtl-2.3.1/src/Control.Monad.Reader.Class.html#local"><span class="hs-identifier hs-var">local</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ASetter env env ProcessContext ProcessContext
-&gt; ProcessContext -&gt; env -&gt; env
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-identifier hs-var">set</span></span><span> </span><span class="annot"><span class="annottext">ASetter env env ProcessContext ProcessContext
forall env. HasProcessContext env =&gt; Lens' env ProcessContext
Lens' env ProcessContext
</span><a href="RIO.Process.html#processContextL"><span class="hs-identifier hs-var">processContextL</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessContext
</span><a href="#local-6989586621679101541"><span class="hs-identifier hs-var">pc'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621679101539"><span class="hs-identifier hs-var">inner</span></a></span><span>
</span><span id="line-355"></span><span>
</span><span id="line-356"></span><span class="hs-comment">-- | Look into the `ProcessContext` and return the specified environmet variable if one is</span><span>
</span><span id="line-357"></span><span class="hs-comment">-- available.</span><span>
</span><span id="line-358"></span><span class="hs-comment">--</span><span>
</span><span id="line-359"></span><span class="hs-comment">-- @since 0.1.14.0</span><span>
</span><span id="line-360"></span><span id="local-6989586621679101055"><span id="local-6989586621679101056"><span class="annot"><a href="RIO.Process.html#lookupEnvFromContext"><span class="hs-identifier hs-type">lookupEnvFromContext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/mtl-2.3.1/src/Control.Monad.Reader.Class.html#MonadReader"><span class="hs-identifier hs-type">MonadReader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101055"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101056"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#HasProcessContext"><span class="hs-identifier hs-type">HasProcessContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101055"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101056"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-361"></span><span id="lookupEnvFromContext"><span class="annot"><span class="annottext">lookupEnvFromContext :: forall env (m :: * -&gt; *).
(MonadReader env m, HasProcessContext env) =&gt;
Text -&gt; m (Maybe Text)
</span><a href="RIO.Process.html#lookupEnvFromContext"><span class="hs-identifier hs-var hs-var">lookupEnvFromContext</span></a></span></span><span> </span><span id="local-6989586621679101555"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679101555"><span class="hs-identifier hs-var">envName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; EnvVars -&gt; Maybe Text
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#lookup"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679101555"><span class="hs-identifier hs-var">envName</span></a></span><span> </span><span class="annot"><span class="annottext">(EnvVars -&gt; Maybe Text) -&gt; m EnvVars -&gt; m (Maybe Text)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Getting EnvVars env EnvVars -&gt; m EnvVars
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting EnvVars env EnvVars
forall env. HasProcessContext env =&gt; SimpleGetter env EnvVars
SimpleGetter env EnvVars
</span><a href="RIO.Process.html#envVarsL"><span class="hs-identifier hs-var">envVarsL</span></a></span><span>
</span><span id="line-362"></span><span>
</span><span id="line-363"></span><span class="hs-comment">-- | Set the working directory to be used by child processes.</span><span>
</span><span id="line-364"></span><span class="hs-comment">--</span><span>
</span><span id="line-365"></span><span class="hs-comment">-- @since 0.0.3.0</span><span>
</span><span id="line-366"></span><span id="local-6989586621679101063"><span id="local-6989586621679101064"><span id="local-6989586621679101065"><span class="annot"><a href="RIO.Process.html#withWorkingDir"><span class="hs-identifier hs-type">withWorkingDir</span></a></span><span>
</span><span id="line-367"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="RIO.Process.html#HasProcessContext"><span class="hs-identifier hs-type">HasProcessContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101063"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/mtl-2.3.1/src/Control.Monad.Reader.Class.html#MonadReader"><span class="hs-identifier hs-type">MonadReader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101063"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101064"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101064"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-368"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-369"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101064"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101065"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-370"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101064"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101065"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-371"></span><span id="withWorkingDir"><span class="annot"><span class="annottext">withWorkingDir :: forall env (m :: * -&gt; *) a.
(HasProcessContext env, MonadReader env m, MonadIO m) =&gt;
String -&gt; m a -&gt; m a
</span><a href="RIO.Process.html#withWorkingDir"><span class="hs-identifier hs-var hs-var">withWorkingDir</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(env -&gt; env) -&gt; m a -&gt; m a
forall a. (env -&gt; env) -&gt; m a -&gt; m a
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; r) -&gt; m a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/mtl-2.3.1/src/Control.Monad.Reader.Class.html#local"><span class="hs-identifier hs-var">local</span></a></span><span> </span><span class="annot"><span class="annottext">((env -&gt; env) -&gt; m a -&gt; m a)
-&gt; (String -&gt; env -&gt; env) -&gt; String -&gt; m a -&gt; m a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ASetter env env (Maybe String) (Maybe String)
-&gt; Maybe String -&gt; env -&gt; env
forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-identifier hs-var">set</span></span><span> </span><span class="annot"><span class="annottext">ASetter env env (Maybe String) (Maybe String)
forall env. HasProcessContext env =&gt; Lens' env (Maybe String)
Lens' env (Maybe String)
</span><a href="RIO.Process.html#workingDirL"><span class="hs-identifier hs-var">workingDirL</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe String -&gt; env -&gt; env)
-&gt; (String -&gt; Maybe String) -&gt; String -&gt; env -&gt; env
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe String
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span>
</span><span id="line-372"></span><span>
</span><span id="line-373"></span><span class="hs-comment">-- | Perform pre-call-process tasks.  Ensure the working directory exists and find the</span><span>
</span><span id="line-374"></span><span class="hs-comment">-- executable path.</span><span>
</span><span id="line-375"></span><span class="hs-comment">--</span><span>
</span><span id="line-376"></span><span class="hs-comment">-- Throws a 'ProcessException' if unsuccessful.</span><span>
</span><span id="line-377"></span><span class="hs-comment">--</span><span>
</span><span id="line-378"></span><span class="hs-comment">-- NOT CURRENTLY EXPORTED</span><span>
</span><span id="line-379"></span><span id="local-6989586621679101069"><span id="local-6989586621679101070"><span class="annot"><a href="RIO.Process.html#preProcess"><span class="hs-identifier hs-type">preProcess</span></a></span><span>
</span><span id="line-380"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="RIO.Process.html#HasProcessContext"><span class="hs-identifier hs-type">HasProcessContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101069"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/mtl-2.3.1/src/Control.Monad.Reader.Class.html#MonadReader"><span class="hs-identifier hs-type">MonadReader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101069"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101070"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101070"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-381"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>            </span><span class="annot"><span class="hs-comment">-- ^ Command name</span></span><span>
</span><span id="line-382"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101070"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span></span></span><span>
</span><span id="line-383"></span><span id="preProcess"><span class="annot"><span class="annottext">preProcess :: forall env (m :: * -&gt; *).
(HasProcessContext env, MonadReader env m, MonadIO m) =&gt;
String -&gt; m String
</span><a href="RIO.Process.html#preProcess"><span class="hs-identifier hs-var hs-var">preProcess</span></a></span></span><span> </span><span id="local-6989586621679101584"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101584"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-384"></span><span>  </span><span id="local-6989586621679101585"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101585"><span class="hs-identifier hs-var">name'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; m (Either ProcessException String)
forall (m :: * -&gt; *) env.
(MonadIO m, MonadReader env m, HasProcessContext env) =&gt;
String -&gt; m (Either ProcessException String)
</span><a href="RIO.Process.html#findExecutable"><span class="hs-identifier hs-var">findExecutable</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101584"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">m (Either ProcessException String)
-&gt; (Either ProcessException String -&gt; m String) -&gt; m String
forall a b. m a -&gt; (a -&gt; m b) -&gt; m b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">(ProcessException -&gt; m String)
-&gt; (String -&gt; m String)
-&gt; Either ProcessException String
-&gt; m String
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#either"><span class="hs-identifier hs-var">either</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessException -&gt; m String
forall (m :: * -&gt; *) e a. (MonadIO m, Exception e) =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwIO</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; m String
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span>
</span><span id="line-385"></span><span>  </span><span id="local-6989586621679101588"><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621679101588"><span class="hs-identifier hs-var">wd</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Getting (Maybe String) env (Maybe String) -&gt; m (Maybe String)
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting (Maybe String) env (Maybe String)
forall env. HasProcessContext env =&gt; Lens' env (Maybe String)
Lens' env (Maybe String)
</span><a href="RIO.Process.html#workingDirL"><span class="hs-identifier hs-var">workingDirL</span></a></span><span>
</span><span id="line-386"></span><span>  </span><span class="annot"><span class="annottext">IO () -&gt; m ()
forall a. IO a -&gt; m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; m ()) -&gt; IO () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; (String -&gt; IO ()) -&gt; Maybe String -&gt; IO ()
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Maybe.html#maybe"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; IO ()
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; String -&gt; IO ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/directory-1.3.8.5/src/System.Directory.html#createDirectoryIfMissing"><span class="hs-identifier hs-var">D.createDirectoryIfMissing</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#True"><span class="hs-identifier hs-var">True</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621679101588"><span class="hs-identifier hs-var">wd</span></a></span><span>
</span><span id="line-387"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; m String
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101585"><span class="hs-identifier hs-var">name'</span></a></span><span>
</span><span id="line-388"></span><span>
</span><span id="line-389"></span><span class="hs-comment">-- | Log running a process with its arguments, for debugging (-v).</span><span>
</span><span id="line-390"></span><span class="hs-comment">--</span><span>
</span><span id="line-391"></span><span class="hs-comment">-- This logs one message before running the process and one message after.</span><span>
</span><span id="line-392"></span><span class="hs-comment">--</span><span>
</span><span id="line-393"></span><span class="hs-comment">-- NOT CURRENTLY EXPORTED</span><span>
</span><span id="line-394"></span><span id="local-6989586621679101081"><span id="local-6989586621679101082"><span id="local-6989586621679101084"><span class="annot"><a href="RIO.Process.html#withProcessTimeLog"><span class="hs-identifier hs-type">withProcessTimeLog</span></a></span><span>
</span><span id="line-395"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101081"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/mtl-2.3.1/src/Control.Monad.Reader.Class.html#MonadReader"><span class="hs-identifier hs-type">MonadReader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101082"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101081"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Prelude.Logger.html#HasLogFunc"><span class="hs-identifier hs-type">HasLogFunc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101082"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Stack.Types.html#HasCallStack"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-396"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ working dirj</span></span><span>
</span><span id="line-397"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ executable</span></span><span>
</span><span id="line-398"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="hs-comment">-- ^ arguments</span></span><span>
</span><span id="line-399"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101081"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101084"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-400"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101081"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101084"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-401"></span><span id="withProcessTimeLog"><span class="annot"><span class="annottext">withProcessTimeLog :: forall (m :: * -&gt; *) env a.
(MonadIO m, MonadReader env m, HasLogFunc env, HasCallStack) =&gt;
Maybe String -&gt; String -&gt; [String] -&gt; m a -&gt; m a
</span><a href="RIO.Process.html#withProcessTimeLog"><span class="hs-identifier hs-var hs-var">withProcessTimeLog</span></a></span></span><span> </span><span id="local-6989586621679101639"><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621679101639"><span class="hs-identifier hs-var">mdir</span></a></span></span><span> </span><span id="local-6989586621679101640"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101640"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679101641"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679101641"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span id="local-6989586621679101642"><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621679101642"><span class="hs-identifier hs-var">proc'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-402"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679101644"><span class="annot"><span class="annottext">cmdText :: Text
</span><a href="#local-6989586621679101644"><span class="hs-identifier hs-var hs-var">cmdText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-403"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; [Text] -&gt; Text
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.html#intercalate"><span class="hs-identifier hs-var">T.intercalate</span></a></span><span>
</span><span id="line-404"></span><span>              </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; &quot;</span></span><span>
</span><span id="line-405"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Internal.html#pack"><span class="hs-identifier hs-var">T.pack</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101640"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Text] -&gt; [Text]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#%3A"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; [String] -&gt; [Text]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="RIO.Process.html#showProcessArgDebug"><span class="hs-identifier hs-var">showProcessArgDebug</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679101641"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-406"></span><span>      </span><span id="local-6989586621679101650"><span class="annot"><span class="annottext">dirMsg :: Text
</span><a href="#local-6989586621679101650"><span class="hs-identifier hs-var hs-var">dirMsg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-407"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621679101639"><span class="hs-identifier hs-var">mdir</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-408"></span><span>          </span><span class="annot"><span class="annottext">Maybe String
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-409"></span><span>          </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679101651"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101651"><span class="hs-identifier hs-var">dir</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; within &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Internal.html#pack"><span class="hs-identifier hs-var">T.pack</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101651"><span class="hs-identifier hs-var">dir</span></a></span><span>
</span><span id="line-410"></span><span>  </span><span class="annot"><span class="annottext">Utf8Builder -&gt; m ()
forall (m :: * -&gt; *) env.
(MonadIO m, MonadReader env m, HasLogFunc env, HasCallStack) =&gt;
Utf8Builder -&gt; m ()
</span><a href="RIO.Prelude.Logger.html#logDebug"><span class="hs-identifier hs-var">logDebug</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Utf8Builder
</span><span class="hs-string">&quot;Run process&quot;</span></span><span> </span><span class="annot"><span class="annottext">Utf8Builder -&gt; Utf8Builder -&gt; Utf8Builder
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Utf8Builder
forall a. Display a =&gt; a -&gt; Utf8Builder
</span><a href="RIO.Prelude.Display.html#display"><span class="hs-identifier hs-var">display</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679101650"><span class="hs-identifier hs-var">dirMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Utf8Builder -&gt; Utf8Builder -&gt; Utf8Builder
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Utf8Builder
</span><span class="hs-string">&quot;: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Utf8Builder -&gt; Utf8Builder -&gt; Utf8Builder
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Utf8Builder
forall a. Display a =&gt; a -&gt; Utf8Builder
</span><a href="RIO.Prelude.Display.html#display"><span class="hs-identifier hs-var">display</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679101644"><span class="hs-identifier hs-var">cmdText</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-411"></span><span>  </span><span id="local-6989586621679101654"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679101654"><span class="hs-identifier hs-var">start</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m Double
forall (m :: * -&gt; *). MonadIO m =&gt; m Double
</span><span class="hs-identifier hs-var">getMonotonicTime</span></span><span>
</span><span id="line-412"></span><span>  </span><span id="local-6989586621679101656"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679101656"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621679101642"><span class="hs-identifier hs-var">proc'</span></a></span><span>
</span><span id="line-413"></span><span>  </span><span id="local-6989586621679101657"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679101657"><span class="hs-identifier hs-var">end</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m Double
forall (m :: * -&gt; *). MonadIO m =&gt; m Double
</span><span class="hs-identifier hs-var">getMonotonicTime</span></span><span>
</span><span id="line-414"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679101659"><span class="annot"><span class="annottext">diff :: Double
</span><a href="#local-6989586621679101659"><span class="hs-identifier hs-var hs-var">diff</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679101657"><span class="hs-identifier hs-var">end</span></a></span><span> </span><span class="annot"><span class="annottext">Double -&gt; Double -&gt; Double
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679101654"><span class="hs-identifier hs-var">start</span></a></span><span>
</span><span id="line-415"></span><span>  </span><span id="local-6989586621679101660"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679101660"><span class="hs-identifier hs-var">useColor</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Getting Bool env Bool -&gt; m Bool
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting Bool env Bool
forall env. HasLogFunc env =&gt; SimpleGetter env Bool
SimpleGetter env Bool
</span><a href="RIO.Prelude.Logger.html#logFuncUseColorL"><span class="hs-identifier hs-var">logFuncUseColorL</span></a></span><span>
</span><span id="line-416"></span><span>  </span><span id="local-6989586621679101662"><span class="annot"><span class="annottext">Int -&gt; Utf8Builder
</span><a href="#local-6989586621679101662"><span class="hs-identifier hs-var">accentColors</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Getting (Int -&gt; Utf8Builder) env (Int -&gt; Utf8Builder)
-&gt; m (Int -&gt; Utf8Builder)
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting (Int -&gt; Utf8Builder) env (Int -&gt; Utf8Builder)
forall env. HasLogFunc env =&gt; SimpleGetter env (Int -&gt; Utf8Builder)
SimpleGetter env (Int -&gt; Utf8Builder)
</span><a href="RIO.Prelude.Logger.html#logFuncAccentColorsL"><span class="hs-identifier hs-var">logFuncAccentColorsL</span></a></span><span>
</span><span id="line-417"></span><span>  </span><span class="annot"><span class="annottext">Utf8Builder -&gt; m ()
forall (m :: * -&gt; *) env.
(MonadIO m, MonadReader env m, HasLogFunc env, HasCallStack) =&gt;
Utf8Builder -&gt; m ()
</span><a href="RIO.Prelude.Logger.html#logDebug"><span class="hs-identifier hs-var">logDebug</span></a></span><span>
</span><span id="line-418"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Utf8Builder
</span><span class="hs-string">&quot;Process finished in &quot;</span></span><span> </span><span class="annot"><span class="annottext">Utf8Builder -&gt; Utf8Builder -&gt; Utf8Builder
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span>
</span><span id="line-419"></span><span>      </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679101660"><span class="hs-identifier hs-var">useColor</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Utf8Builder
</span><a href="#local-6989586621679101662"><span class="hs-identifier hs-var">accentColors</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Utf8Builder
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Utf8Builder -&gt; Utf8Builder -&gt; Utf8Builder
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="hs-comment">-- accent color 0</span><span>
</span><span id="line-420"></span><span>      </span><span class="annot"><span class="annottext">Double -&gt; Utf8Builder
</span><a href="RIO.Process.html#timeSpecMilliSecondText"><span class="hs-identifier hs-var">timeSpecMilliSecondText</span></a></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679101659"><span class="hs-identifier hs-var">diff</span></a></span><span> </span><span class="annot"><span class="annottext">Utf8Builder -&gt; Utf8Builder -&gt; Utf8Builder
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span>
</span><span id="line-421"></span><span>      </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679101660"><span class="hs-identifier hs-var">useColor</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Utf8Builder
</span><span class="hs-string">&quot;\ESC[0m&quot;</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Utf8Builder
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Utf8Builder -&gt; Utf8Builder -&gt; Utf8Builder
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="hs-comment">-- reset</span><span>
</span><span id="line-422"></span><span>       </span><span class="annot"><span class="annottext">Utf8Builder
</span><span class="hs-string">&quot;: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Utf8Builder -&gt; Utf8Builder -&gt; Utf8Builder
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Utf8Builder
forall a. Display a =&gt; a -&gt; Utf8Builder
</span><a href="RIO.Prelude.Display.html#display"><span class="hs-identifier hs-var">display</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679101644"><span class="hs-identifier hs-var">cmdText</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-423"></span><span>  </span><span class="annot"><span class="annottext">a -&gt; m a
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679101656"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-424"></span><span>
</span><span id="line-425"></span><span class="annot"><a href="RIO.Process.html#timeSpecMilliSecondText"><span class="hs-identifier hs-type">timeSpecMilliSecondText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Double"><span class="hs-identifier hs-type">Double</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="RIO.Prelude.Display.html#Utf8Builder"><span class="hs-identifier hs-type">Utf8Builder</span></a></span><span>
</span><span id="line-426"></span><span id="timeSpecMilliSecondText"><span class="annot"><span class="annottext">timeSpecMilliSecondText :: Double -&gt; Utf8Builder
</span><a href="RIO.Process.html#timeSpecMilliSecondText"><span class="hs-identifier hs-var hs-var">timeSpecMilliSecondText</span></a></span></span><span> </span><span id="local-6989586621679101665"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679101665"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Utf8Builder
forall a. Display a =&gt; a -&gt; Utf8Builder
</span><a href="RIO.Prelude.Display.html#display"><span class="hs-identifier hs-var">display</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double -&gt; Int
forall b. Integral b =&gt; Double -&gt; b
forall a b. (RealFrac a, Integral b) =&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Real.html#round"><span class="hs-identifier hs-var">round</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679101665"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Double -&gt; Double -&gt; Double
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Num.html#%2A"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">1000</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Utf8Builder -&gt; Utf8Builder -&gt; Utf8Builder
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Utf8Builder
</span><span class="hs-string">&quot;ms&quot;</span></span><span>
</span><span id="line-427"></span><span>
</span><span id="line-428"></span><span class="hs-comment">-- | Provide a 'ProcessConfig' based on the 'ProcessContext' in</span><span>
</span><span id="line-429"></span><span class="hs-comment">-- scope. Deals with resolving the full path, setting the child</span><span>
</span><span id="line-430"></span><span class="hs-comment">-- process's environment variables, setting the working directory, and</span><span>
</span><span id="line-431"></span><span class="hs-comment">-- wrapping the call with 'withProcessTimeLog' for debugging output.</span><span>
</span><span id="line-432"></span><span class="hs-comment">--</span><span>
</span><span id="line-433"></span><span class="hs-comment">-- This is intended to be analogous to the @proc@ function provided by</span><span>
</span><span id="line-434"></span><span class="hs-comment">-- the @System.Process.Typed@ module, but has a different type</span><span>
</span><span id="line-435"></span><span class="hs-comment">-- signature to (1) allow it to perform @IO@ actions for looking up</span><span>
</span><span id="line-436"></span><span class="hs-comment">-- paths, and (2) allow logging and timing of the running action.</span><span>
</span><span id="line-437"></span><span class="hs-comment">--</span><span>
</span><span id="line-438"></span><span class="hs-comment">-- @since 0.0.3.0</span><span>
</span><span id="line-439"></span><span id="local-6989586621679101098"><span id="local-6989586621679101099"><span id="local-6989586621679101101"><span class="annot"><a href="RIO.Process.html#proc"><span class="hs-identifier hs-type">proc</span></a></span><span>
</span><span id="line-440"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="RIO.Process.html#HasProcessContext"><span class="hs-identifier hs-type">HasProcessContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101098"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Prelude.Logger.html#HasLogFunc"><span class="hs-identifier hs-type">HasLogFunc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101098"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/mtl-2.3.1/src/Control.Monad.Reader.Class.html#MonadReader"><span class="hs-identifier hs-type">MonadReader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101098"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101099"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101099"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Stack.Types.html#HasCallStack"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-441"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ command to run</span></span><span>
</span><span id="line-442"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="hs-comment">-- ^ command line arguments</span></span><span>
</span><span id="line-443"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ProcessConfig</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101099"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101101"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-444"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101099"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101101"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-445"></span><span id="proc"><span class="annot"><span class="annottext">proc :: forall env (m :: * -&gt; *) a.
(HasProcessContext env, HasLogFunc env, MonadReader env m,
 MonadIO m, HasCallStack) =&gt;
String -&gt; [String] -&gt; (ProcessConfig () () () -&gt; m a) -&gt; m a
</span><a href="RIO.Process.html#proc"><span class="hs-identifier hs-var hs-var">proc</span></a></span></span><span> </span><span id="local-6989586621679101690"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101690"><span class="hs-identifier hs-var">name0</span></a></span></span><span> </span><span id="local-6989586621679101691"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679101691"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span id="local-6989586621679101692"><span class="annot"><span class="annottext">ProcessConfig () () () -&gt; m a
</span><a href="#local-6989586621679101692"><span class="hs-identifier hs-var">inner</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-446"></span><span>  </span><span id="local-6989586621679101693"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101693"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; m String
forall env (m :: * -&gt; *).
(HasProcessContext env, MonadReader env m, MonadIO m) =&gt;
String -&gt; m String
</span><a href="RIO.Process.html#preProcess"><span class="hs-identifier hs-var">preProcess</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101690"><span class="hs-identifier hs-var">name0</span></a></span><span>
</span><span id="line-447"></span><span>  </span><span id="local-6989586621679101694"><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621679101694"><span class="hs-identifier hs-var">wd</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Getting (Maybe String) env (Maybe String) -&gt; m (Maybe String)
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting (Maybe String) env (Maybe String)
forall env. HasProcessContext env =&gt; Lens' env (Maybe String)
Lens' env (Maybe String)
</span><a href="RIO.Process.html#workingDirL"><span class="hs-identifier hs-var">workingDirL</span></a></span><span>
</span><span id="line-448"></span><span>  </span><span id="local-6989586621679101695"><span class="annot"><span class="annottext">[(String, String)]
</span><a href="#local-6989586621679101695"><span class="hs-identifier hs-var">envStrings</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Getting [(String, String)] env [(String, String)]
-&gt; m [(String, String)]
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting [(String, String)] env [(String, String)]
forall env.
HasProcessContext env =&gt;
SimpleGetter env [(String, String)]
SimpleGetter env [(String, String)]
</span><a href="RIO.Process.html#envVarsStringsL"><span class="hs-identifier hs-var">envVarsStringsL</span></a></span><span>
</span><span id="line-449"></span><span>
</span><span id="line-450"></span><span>  </span><span class="annot"><span class="annottext">Maybe String -&gt; String -&gt; [String] -&gt; m a -&gt; m a
forall (m :: * -&gt; *) env a.
(MonadIO m, MonadReader env m, HasLogFunc env, HasCallStack) =&gt;
Maybe String -&gt; String -&gt; [String] -&gt; m a -&gt; m a
</span><a href="RIO.Process.html#withProcessTimeLog"><span class="hs-identifier hs-var">withProcessTimeLog</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621679101694"><span class="hs-identifier hs-var">wd</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101693"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679101691"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-451"></span><span>    </span><span class="annot"><span class="annottext">(m a -&gt; m a) -&gt; m a -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessConfig () () () -&gt; m a
</span><a href="#local-6989586621679101692"><span class="hs-identifier hs-var">inner</span></a></span><span>
</span><span id="line-452"></span><span>    </span><span class="annot"><span class="annottext">(ProcessConfig () () () -&gt; m a) -&gt; ProcessConfig () () () -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[(String, String)]
-&gt; ProcessConfig () () () -&gt; ProcessConfig () () ()
forall stdin stdout stderr.
[(String, String)]
-&gt; ProcessConfig stdin stdout stderr
-&gt; ProcessConfig stdin stdout stderr
</span><span class="hs-identifier hs-var">setEnv</span></span><span> </span><span class="annot"><span class="annottext">[(String, String)]
</span><a href="#local-6989586621679101695"><span class="hs-identifier hs-var">envStrings</span></a></span><span>
</span><span id="line-453"></span><span>    </span><span class="annot"><span class="annottext">(ProcessConfig () () () -&gt; ProcessConfig () () ())
-&gt; ProcessConfig () () () -&gt; ProcessConfig () () ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(ProcessConfig () () () -&gt; ProcessConfig () () ())
-&gt; (String -&gt; ProcessConfig () () () -&gt; ProcessConfig () () ())
-&gt; Maybe String
-&gt; ProcessConfig () () ()
-&gt; ProcessConfig () () ()
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Maybe.html#maybe"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessConfig () () () -&gt; ProcessConfig () () ()
forall a. a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#id"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ProcessConfig () () () -&gt; ProcessConfig () () ()
forall stdin stdout stderr.
String
-&gt; ProcessConfig stdin stdout stderr
-&gt; ProcessConfig stdin stdout stderr
</span><span class="hs-identifier hs-var">setWorkingDir</span></span><span> </span><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621679101694"><span class="hs-identifier hs-var">wd</span></a></span><span>
</span><span id="line-454"></span><span>    </span><span class="annot"><span class="annottext">(ProcessConfig () () () -&gt; ProcessConfig () () ())
-&gt; ProcessConfig () () () -&gt; ProcessConfig () () ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; ProcessConfig () () ()
</span><span class="hs-identifier hs-var">P.proc</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101693"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679101691"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-455"></span><span>
</span><span id="line-456"></span><span class="hs-comment">-- | Same as 'P.withProcess', but generalized to 'MonadUnliftIO'.</span><span>
</span><span id="line-457"></span><span class="hs-comment">--</span><span>
</span><span id="line-458"></span><span class="hs-comment">-- @since 0.0.3.0</span><span>
</span><span id="line-459"></span><span id="local-6989586621679101111"><span id="local-6989586621679101113"><span id="local-6989586621679101114"><span id="local-6989586621679101115"><span id="local-6989586621679101117"><span class="annot"><a href="RIO.Process.html#withProcess"><span class="hs-identifier hs-type">withProcess</span></a></span><span>
</span><span id="line-460"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadUnliftIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679101111"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-461"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ProcessConfig</span></span><span> </span><span class="annot"><a href="#local-6989586621679101113"><span class="hs-identifier hs-type">stdin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101114"><span class="hs-identifier hs-type">stdout</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101115"><span class="hs-identifier hs-type">stderr</span></a></span><span>
</span><span id="line-462"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Process</span></span><span> </span><span class="annot"><a href="#local-6989586621679101113"><span class="hs-identifier hs-type">stdin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101114"><span class="hs-identifier hs-type">stdout</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101115"><span class="hs-identifier hs-type">stderr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101111"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101117"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-463"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101111"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101117"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span></span><span>
</span><span id="line-464"></span><span id="withProcess"><span class="annot"><span class="annottext">withProcess :: forall (m :: * -&gt; *) stdin stdout stderr a.
MonadUnliftIO m =&gt;
ProcessConfig stdin stdout stderr
-&gt; (Process stdin stdout stderr -&gt; m a) -&gt; m a
</span><a href="RIO.Process.html#withProcess"><span class="hs-identifier hs-var hs-var">withProcess</span></a></span></span><span> </span><span id="local-6989586621679101702"><span class="annot"><span class="annottext">ProcessConfig stdin stdout stderr
</span><a href="#local-6989586621679101702"><span class="hs-identifier hs-var">pc</span></a></span></span><span> </span><span id="local-6989586621679101703"><span class="annot"><span class="annottext">Process stdin stdout stderr -&gt; m a
</span><a href="#local-6989586621679101703"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((forall a. m a -&gt; IO a) -&gt; IO a) -&gt; m a
forall b. ((forall a. m a -&gt; IO a) -&gt; IO b) -&gt; m b
forall (m :: * -&gt; *) b.
MonadUnliftIO m =&gt;
((forall a. m a -&gt; IO a) -&gt; IO b) -&gt; m b
</span><span class="hs-identifier hs-var">withRunInIO</span></span><span> </span><span class="annot"><span class="annottext">(((forall a. m a -&gt; IO a) -&gt; IO a) -&gt; m a)
-&gt; ((forall a. m a -&gt; IO a) -&gt; IO a) -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679101705"><span class="annot"><span class="annottext">forall a. m a -&gt; IO a
</span><a href="#local-6989586621679101705"><span class="hs-identifier hs-var">run</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessConfig stdin stdout stderr
-&gt; (Process stdin stdout stderr -&gt; IO a) -&gt; IO a
forall (m :: * -&gt; *) stdin stdout stderr a.
MonadUnliftIO m =&gt;
ProcessConfig stdin stdout stderr
-&gt; (Process stdin stdout stderr -&gt; m a) -&gt; m a
</span><span class="hs-identifier hs-var">P.withProcessTerm</span></span><span> </span><span class="annot"><span class="annottext">ProcessConfig stdin stdout stderr
</span><a href="#local-6989586621679101702"><span class="hs-identifier hs-var">pc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">m a -&gt; IO a
forall a. m a -&gt; IO a
</span><a href="#local-6989586621679101705"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">(m a -&gt; IO a)
-&gt; (Process stdin stdout stderr -&gt; m a)
-&gt; Process stdin stdout stderr
-&gt; IO a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Process stdin stdout stderr -&gt; m a
</span><a href="#local-6989586621679101703"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-465"></span><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">withProcess</span><span> </span><span class="hs-pragma">&quot;Please consider using withProcessWait, or instead use withProcessTerm&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-466"></span><span>
</span><span id="line-467"></span><span class="hs-comment">-- | Same as 'P.withProcess_', but generalized to 'MonadUnliftIO'.</span><span>
</span><span id="line-468"></span><span class="hs-comment">--</span><span>
</span><span id="line-469"></span><span class="hs-comment">-- @since 0.0.3.0</span><span>
</span><span id="line-470"></span><span id="local-6989586621679101706"><span id="local-6989586621679101707"><span id="local-6989586621679101708"><span id="local-6989586621679101709"><span id="local-6989586621679101710"><span class="annot"><a href="RIO.Process.html#withProcess_"><span class="hs-identifier hs-type">withProcess_</span></a></span><span>
</span><span id="line-471"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadUnliftIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679101706"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-472"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ProcessConfig</span></span><span> </span><span class="annot"><a href="#local-6989586621679101707"><span class="hs-identifier hs-type">stdin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101708"><span class="hs-identifier hs-type">stdout</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101709"><span class="hs-identifier hs-type">stderr</span></a></span><span>
</span><span id="line-473"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Process</span></span><span> </span><span class="annot"><a href="#local-6989586621679101707"><span class="hs-identifier hs-type">stdin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101708"><span class="hs-identifier hs-type">stdout</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101709"><span class="hs-identifier hs-type">stderr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101706"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101710"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-474"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101706"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101710"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span></span><span>
</span><span id="line-475"></span><span id="withProcess_"><span class="annot"><span class="annottext">withProcess_ :: forall (m :: * -&gt; *) stdin stdout stderr a.
MonadUnliftIO m =&gt;
ProcessConfig stdin stdout stderr
-&gt; (Process stdin stdout stderr -&gt; m a) -&gt; m a
</span><a href="RIO.Process.html#withProcess_"><span class="hs-identifier hs-var hs-var">withProcess_</span></a></span></span><span> </span><span id="local-6989586621679101714"><span class="annot"><span class="annottext">ProcessConfig stdin stdout stderr
</span><a href="#local-6989586621679101714"><span class="hs-identifier hs-var">pc</span></a></span></span><span> </span><span id="local-6989586621679101715"><span class="annot"><span class="annottext">Process stdin stdout stderr -&gt; m a
</span><a href="#local-6989586621679101715"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((forall a. m a -&gt; IO a) -&gt; IO a) -&gt; m a
forall b. ((forall a. m a -&gt; IO a) -&gt; IO b) -&gt; m b
forall (m :: * -&gt; *) b.
MonadUnliftIO m =&gt;
((forall a. m a -&gt; IO a) -&gt; IO b) -&gt; m b
</span><span class="hs-identifier hs-var">withRunInIO</span></span><span> </span><span class="annot"><span class="annottext">(((forall a. m a -&gt; IO a) -&gt; IO a) -&gt; m a)
-&gt; ((forall a. m a -&gt; IO a) -&gt; IO a) -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679101716"><span class="annot"><span class="annottext">forall a. m a -&gt; IO a
</span><a href="#local-6989586621679101716"><span class="hs-identifier hs-var">run</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessConfig stdin stdout stderr
-&gt; (Process stdin stdout stderr -&gt; IO a) -&gt; IO a
forall (m :: * -&gt; *) stdin stdout stderr a.
MonadUnliftIO m =&gt;
ProcessConfig stdin stdout stderr
-&gt; (Process stdin stdout stderr -&gt; m a) -&gt; m a
</span><span class="hs-identifier hs-var">P.withProcessTerm_</span></span><span> </span><span class="annot"><span class="annottext">ProcessConfig stdin stdout stderr
</span><a href="#local-6989586621679101714"><span class="hs-identifier hs-var">pc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">m a -&gt; IO a
forall a. m a -&gt; IO a
</span><a href="#local-6989586621679101716"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">(m a -&gt; IO a)
-&gt; (Process stdin stdout stderr -&gt; m a)
-&gt; Process stdin stdout stderr
-&gt; IO a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Process stdin stdout stderr -&gt; m a
</span><a href="#local-6989586621679101715"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-476"></span><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">withProcess_</span><span> </span><span class="hs-pragma">&quot;Please consider using withProcessWait, or instead use withProcessTerm&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-477"></span><span>
</span><span id="line-478"></span><span class="hs-comment">-- | Same as 'P.withProcessWait', but generalized to 'MonadUnliftIO'.</span><span>
</span><span id="line-479"></span><span class="hs-comment">--</span><span>
</span><span id="line-480"></span><span class="hs-comment">-- @since 0.1.10.0</span><span>
</span><span id="line-481"></span><span id="local-6989586621679101717"><span id="local-6989586621679101718"><span id="local-6989586621679101719"><span id="local-6989586621679101720"><span id="local-6989586621679101721"><span class="annot"><a href="RIO.Process.html#withProcessWait"><span class="hs-identifier hs-type">withProcessWait</span></a></span><span>
</span><span id="line-482"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadUnliftIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679101717"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-483"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ProcessConfig</span></span><span> </span><span class="annot"><a href="#local-6989586621679101718"><span class="hs-identifier hs-type">stdin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101719"><span class="hs-identifier hs-type">stdout</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101720"><span class="hs-identifier hs-type">stderr</span></a></span><span>
</span><span id="line-484"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Process</span></span><span> </span><span class="annot"><a href="#local-6989586621679101718"><span class="hs-identifier hs-type">stdin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101719"><span class="hs-identifier hs-type">stdout</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101720"><span class="hs-identifier hs-type">stderr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101717"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101721"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-485"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101717"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101721"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span></span><span>
</span><span id="line-486"></span><span id="withProcessWait"><span class="annot"><span class="annottext">withProcessWait :: forall (m :: * -&gt; *) stdin stdout stderr a.
MonadUnliftIO m =&gt;
ProcessConfig stdin stdout stderr
-&gt; (Process stdin stdout stderr -&gt; m a) -&gt; m a
</span><a href="RIO.Process.html#withProcessWait"><span class="hs-identifier hs-var hs-var">withProcessWait</span></a></span></span><span> </span><span id="local-6989586621679101725"><span class="annot"><span class="annottext">ProcessConfig stdin stdout stderr
</span><a href="#local-6989586621679101725"><span class="hs-identifier hs-var">pc</span></a></span></span><span> </span><span id="local-6989586621679101726"><span class="annot"><span class="annottext">Process stdin stdout stderr -&gt; m a
</span><a href="#local-6989586621679101726"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((forall a. m a -&gt; IO a) -&gt; IO a) -&gt; m a
forall b. ((forall a. m a -&gt; IO a) -&gt; IO b) -&gt; m b
forall (m :: * -&gt; *) b.
MonadUnliftIO m =&gt;
((forall a. m a -&gt; IO a) -&gt; IO b) -&gt; m b
</span><span class="hs-identifier hs-var">withRunInIO</span></span><span> </span><span class="annot"><span class="annottext">(((forall a. m a -&gt; IO a) -&gt; IO a) -&gt; m a)
-&gt; ((forall a. m a -&gt; IO a) -&gt; IO a) -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679101727"><span class="annot"><span class="annottext">forall a. m a -&gt; IO a
</span><a href="#local-6989586621679101727"><span class="hs-identifier hs-var">run</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessConfig stdin stdout stderr
-&gt; (Process stdin stdout stderr -&gt; IO a) -&gt; IO a
forall (m :: * -&gt; *) stdin stdout stderr a.
MonadUnliftIO m =&gt;
ProcessConfig stdin stdout stderr
-&gt; (Process stdin stdout stderr -&gt; m a) -&gt; m a
</span><span class="hs-identifier hs-var">P.withProcessWait</span></span><span> </span><span class="annot"><span class="annottext">ProcessConfig stdin stdout stderr
</span><a href="#local-6989586621679101725"><span class="hs-identifier hs-var">pc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">m a -&gt; IO a
forall a. m a -&gt; IO a
</span><a href="#local-6989586621679101727"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">(m a -&gt; IO a)
-&gt; (Process stdin stdout stderr -&gt; m a)
-&gt; Process stdin stdout stderr
-&gt; IO a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Process stdin stdout stderr -&gt; m a
</span><a href="#local-6989586621679101726"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-487"></span><span>
</span><span id="line-488"></span><span class="hs-comment">-- | Same as 'P.withProcessWait_', but generalized to 'MonadUnliftIO'.</span><span>
</span><span id="line-489"></span><span class="hs-comment">--</span><span>
</span><span id="line-490"></span><span class="hs-comment">-- @since 0.1.10.0</span><span>
</span><span id="line-491"></span><span id="local-6989586621679101728"><span id="local-6989586621679101729"><span id="local-6989586621679101730"><span id="local-6989586621679101731"><span id="local-6989586621679101732"><span class="annot"><a href="RIO.Process.html#withProcessWait_"><span class="hs-identifier hs-type">withProcessWait_</span></a></span><span>
</span><span id="line-492"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadUnliftIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679101728"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-493"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ProcessConfig</span></span><span> </span><span class="annot"><a href="#local-6989586621679101729"><span class="hs-identifier hs-type">stdin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101730"><span class="hs-identifier hs-type">stdout</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101731"><span class="hs-identifier hs-type">stderr</span></a></span><span>
</span><span id="line-494"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Process</span></span><span> </span><span class="annot"><a href="#local-6989586621679101729"><span class="hs-identifier hs-type">stdin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101730"><span class="hs-identifier hs-type">stdout</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101731"><span class="hs-identifier hs-type">stderr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101728"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101732"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-495"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101728"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101732"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span></span><span>
</span><span id="line-496"></span><span id="withProcessWait_"><span class="annot"><span class="annottext">withProcessWait_ :: forall (m :: * -&gt; *) stdin stdout stderr a.
MonadUnliftIO m =&gt;
ProcessConfig stdin stdout stderr
-&gt; (Process stdin stdout stderr -&gt; m a) -&gt; m a
</span><a href="RIO.Process.html#withProcessWait_"><span class="hs-identifier hs-var hs-var">withProcessWait_</span></a></span></span><span> </span><span id="local-6989586621679101736"><span class="annot"><span class="annottext">ProcessConfig stdin stdout stderr
</span><a href="#local-6989586621679101736"><span class="hs-identifier hs-var">pc</span></a></span></span><span> </span><span id="local-6989586621679101737"><span class="annot"><span class="annottext">Process stdin stdout stderr -&gt; m a
</span><a href="#local-6989586621679101737"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((forall a. m a -&gt; IO a) -&gt; IO a) -&gt; m a
forall b. ((forall a. m a -&gt; IO a) -&gt; IO b) -&gt; m b
forall (m :: * -&gt; *) b.
MonadUnliftIO m =&gt;
((forall a. m a -&gt; IO a) -&gt; IO b) -&gt; m b
</span><span class="hs-identifier hs-var">withRunInIO</span></span><span> </span><span class="annot"><span class="annottext">(((forall a. m a -&gt; IO a) -&gt; IO a) -&gt; m a)
-&gt; ((forall a. m a -&gt; IO a) -&gt; IO a) -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679101738"><span class="annot"><span class="annottext">forall a. m a -&gt; IO a
</span><a href="#local-6989586621679101738"><span class="hs-identifier hs-var">run</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessConfig stdin stdout stderr
-&gt; (Process stdin stdout stderr -&gt; IO a) -&gt; IO a
forall (m :: * -&gt; *) stdin stdout stderr a.
MonadUnliftIO m =&gt;
ProcessConfig stdin stdout stderr
-&gt; (Process stdin stdout stderr -&gt; m a) -&gt; m a
</span><span class="hs-identifier hs-var">P.withProcessWait_</span></span><span> </span><span class="annot"><span class="annottext">ProcessConfig stdin stdout stderr
</span><a href="#local-6989586621679101736"><span class="hs-identifier hs-var">pc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">m a -&gt; IO a
forall a. m a -&gt; IO a
</span><a href="#local-6989586621679101738"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">(m a -&gt; IO a)
-&gt; (Process stdin stdout stderr -&gt; m a)
-&gt; Process stdin stdout stderr
-&gt; IO a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Process stdin stdout stderr -&gt; m a
</span><a href="#local-6989586621679101737"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-497"></span><span>
</span><span id="line-498"></span><span class="hs-comment">-- | Same as 'P.withProcessTerm', but generalized to 'MonadUnliftIO'.</span><span>
</span><span id="line-499"></span><span class="hs-comment">--</span><span>
</span><span id="line-500"></span><span class="hs-comment">-- @since 0.1.10.0</span><span>
</span><span id="line-501"></span><span id="local-6989586621679101739"><span id="local-6989586621679101740"><span id="local-6989586621679101741"><span id="local-6989586621679101742"><span id="local-6989586621679101743"><span class="annot"><a href="RIO.Process.html#withProcessTerm"><span class="hs-identifier hs-type">withProcessTerm</span></a></span><span>
</span><span id="line-502"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadUnliftIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679101739"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-503"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ProcessConfig</span></span><span> </span><span class="annot"><a href="#local-6989586621679101740"><span class="hs-identifier hs-type">stdin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101741"><span class="hs-identifier hs-type">stdout</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101742"><span class="hs-identifier hs-type">stderr</span></a></span><span>
</span><span id="line-504"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Process</span></span><span> </span><span class="annot"><a href="#local-6989586621679101740"><span class="hs-identifier hs-type">stdin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101741"><span class="hs-identifier hs-type">stdout</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101742"><span class="hs-identifier hs-type">stderr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101739"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101743"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-505"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101739"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101743"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span></span><span>
</span><span id="line-506"></span><span id="withProcessTerm"><span class="annot"><span class="annottext">withProcessTerm :: forall (m :: * -&gt; *) stdin stdout stderr a.
MonadUnliftIO m =&gt;
ProcessConfig stdin stdout stderr
-&gt; (Process stdin stdout stderr -&gt; m a) -&gt; m a
</span><a href="RIO.Process.html#withProcessTerm"><span class="hs-identifier hs-var hs-var">withProcessTerm</span></a></span></span><span> </span><span id="local-6989586621679101747"><span class="annot"><span class="annottext">ProcessConfig stdin stdout stderr
</span><a href="#local-6989586621679101747"><span class="hs-identifier hs-var">pc</span></a></span></span><span> </span><span id="local-6989586621679101748"><span class="annot"><span class="annottext">Process stdin stdout stderr -&gt; m a
</span><a href="#local-6989586621679101748"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((forall a. m a -&gt; IO a) -&gt; IO a) -&gt; m a
forall b. ((forall a. m a -&gt; IO a) -&gt; IO b) -&gt; m b
forall (m :: * -&gt; *) b.
MonadUnliftIO m =&gt;
((forall a. m a -&gt; IO a) -&gt; IO b) -&gt; m b
</span><span class="hs-identifier hs-var">withRunInIO</span></span><span> </span><span class="annot"><span class="annottext">(((forall a. m a -&gt; IO a) -&gt; IO a) -&gt; m a)
-&gt; ((forall a. m a -&gt; IO a) -&gt; IO a) -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679101749"><span class="annot"><span class="annottext">forall a. m a -&gt; IO a
</span><a href="#local-6989586621679101749"><span class="hs-identifier hs-var">run</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessConfig stdin stdout stderr
-&gt; (Process stdin stdout stderr -&gt; IO a) -&gt; IO a
forall (m :: * -&gt; *) stdin stdout stderr a.
MonadUnliftIO m =&gt;
ProcessConfig stdin stdout stderr
-&gt; (Process stdin stdout stderr -&gt; m a) -&gt; m a
</span><span class="hs-identifier hs-var">P.withProcessTerm</span></span><span> </span><span class="annot"><span class="annottext">ProcessConfig stdin stdout stderr
</span><a href="#local-6989586621679101747"><span class="hs-identifier hs-var">pc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">m a -&gt; IO a
forall a. m a -&gt; IO a
</span><a href="#local-6989586621679101749"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">(m a -&gt; IO a)
-&gt; (Process stdin stdout stderr -&gt; m a)
-&gt; Process stdin stdout stderr
-&gt; IO a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Process stdin stdout stderr -&gt; m a
</span><a href="#local-6989586621679101748"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-507"></span><span>
</span><span id="line-508"></span><span class="hs-comment">-- | Same as 'P.withProcessTerm_', but generalized to 'MonadUnliftIO'.</span><span>
</span><span id="line-509"></span><span class="hs-comment">--</span><span>
</span><span id="line-510"></span><span class="hs-comment">-- @since 0.1.10.0</span><span>
</span><span id="line-511"></span><span id="local-6989586621679101750"><span id="local-6989586621679101751"><span id="local-6989586621679101752"><span id="local-6989586621679101753"><span id="local-6989586621679101754"><span class="annot"><a href="RIO.Process.html#withProcessTerm_"><span class="hs-identifier hs-type">withProcessTerm_</span></a></span><span>
</span><span id="line-512"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadUnliftIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679101750"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-513"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ProcessConfig</span></span><span> </span><span class="annot"><a href="#local-6989586621679101751"><span class="hs-identifier hs-type">stdin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101752"><span class="hs-identifier hs-type">stdout</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101753"><span class="hs-identifier hs-type">stderr</span></a></span><span>
</span><span id="line-514"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Process</span></span><span> </span><span class="annot"><a href="#local-6989586621679101751"><span class="hs-identifier hs-type">stdin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101752"><span class="hs-identifier hs-type">stdout</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101753"><span class="hs-identifier hs-type">stderr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101750"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101754"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-515"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101750"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101754"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span></span><span>
</span><span id="line-516"></span><span id="withProcessTerm_"><span class="annot"><span class="annottext">withProcessTerm_ :: forall (m :: * -&gt; *) stdin stdout stderr a.
MonadUnliftIO m =&gt;
ProcessConfig stdin stdout stderr
-&gt; (Process stdin stdout stderr -&gt; m a) -&gt; m a
</span><a href="RIO.Process.html#withProcessTerm_"><span class="hs-identifier hs-var hs-var">withProcessTerm_</span></a></span></span><span> </span><span id="local-6989586621679101758"><span class="annot"><span class="annottext">ProcessConfig stdin stdout stderr
</span><a href="#local-6989586621679101758"><span class="hs-identifier hs-var">pc</span></a></span></span><span> </span><span id="local-6989586621679101759"><span class="annot"><span class="annottext">Process stdin stdout stderr -&gt; m a
</span><a href="#local-6989586621679101759"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((forall a. m a -&gt; IO a) -&gt; IO a) -&gt; m a
forall b. ((forall a. m a -&gt; IO a) -&gt; IO b) -&gt; m b
forall (m :: * -&gt; *) b.
MonadUnliftIO m =&gt;
((forall a. m a -&gt; IO a) -&gt; IO b) -&gt; m b
</span><span class="hs-identifier hs-var">withRunInIO</span></span><span> </span><span class="annot"><span class="annottext">(((forall a. m a -&gt; IO a) -&gt; IO a) -&gt; m a)
-&gt; ((forall a. m a -&gt; IO a) -&gt; IO a) -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679101760"><span class="annot"><span class="annottext">forall a. m a -&gt; IO a
</span><a href="#local-6989586621679101760"><span class="hs-identifier hs-var">run</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessConfig stdin stdout stderr
-&gt; (Process stdin stdout stderr -&gt; IO a) -&gt; IO a
forall (m :: * -&gt; *) stdin stdout stderr a.
MonadUnliftIO m =&gt;
ProcessConfig stdin stdout stderr
-&gt; (Process stdin stdout stderr -&gt; m a) -&gt; m a
</span><span class="hs-identifier hs-var">P.withProcessTerm_</span></span><span> </span><span class="annot"><span class="annottext">ProcessConfig stdin stdout stderr
</span><a href="#local-6989586621679101758"><span class="hs-identifier hs-var">pc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">m a -&gt; IO a
forall a. m a -&gt; IO a
</span><a href="#local-6989586621679101760"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">(m a -&gt; IO a)
-&gt; (Process stdin stdout stderr -&gt; m a)
-&gt; Process stdin stdout stderr
-&gt; IO a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Process stdin stdout stderr -&gt; m a
</span><a href="#local-6989586621679101759"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-517"></span><span>
</span><span id="line-518"></span><span class="hs-comment">-- | A convenience environment combining a 'LogFunc' and a 'ProcessContext'</span><span>
</span><span id="line-519"></span><span class="hs-comment">--</span><span>
</span><span id="line-520"></span><span class="hs-comment">-- @since 0.0.3.0</span><span>
</span><span id="line-521"></span><span class="hs-keyword">data</span><span> </span><span id="LoggedProcessContext"><span class="annot"><a href="RIO.Process.html#LoggedProcessContext"><span class="hs-identifier hs-var">LoggedProcessContext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="LoggedProcessContext"><span class="annot"><a href="RIO.Process.html#LoggedProcessContext"><span class="hs-identifier hs-var">LoggedProcessContext</span></a></span></span><span> </span><span class="annot"><a href="RIO.Process.html#ProcessContext"><span class="hs-identifier hs-type">ProcessContext</span></a></span><span> </span><span class="annot"><a href="RIO.Prelude.Logger.html#LogFunc"><span class="hs-identifier hs-type">LogFunc</span></a></span><span>
</span><span id="line-522"></span><span>
</span><span id="line-523"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="RIO.Prelude.Logger.html#HasLogFunc"><span class="hs-identifier hs-type">HasLogFunc</span></a></span><span> </span><span class="annot"><a href="RIO.Process.html#LoggedProcessContext"><span class="hs-identifier hs-type">LoggedProcessContext</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-524"></span><span>  </span><span id="local-6989586621679101767"><span class="annot"><span class="annottext">logFuncL :: Lens' LoggedProcessContext LogFunc
</span><a href="#local-6989586621679101767"><span class="hs-identifier hs-var hs-var hs-var hs-var">logFuncL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LoggedProcessContext -&gt; LogFunc)
-&gt; (LoggedProcessContext -&gt; LogFunc -&gt; LoggedProcessContext)
-&gt; Lens' LoggedProcessContext LogFunc
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="RIO.Process.html#LoggedProcessContext"><span class="hs-identifier hs-type">LoggedProcessContext</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessContext
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679101769"><span class="annot"><span class="annottext">LogFunc
</span><a href="#local-6989586621679101769"><span class="hs-identifier hs-var">lf</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LogFunc
</span><a href="#local-6989586621679101769"><span class="hs-identifier hs-var">lf</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="RIO.Process.html#LoggedProcessContext"><span class="hs-identifier hs-type">LoggedProcessContext</span></a></span><span> </span><span id="local-6989586621679101770"><span class="annot"><span class="annottext">ProcessContext
</span><a href="#local-6989586621679101770"><span class="hs-identifier hs-var">pc</span></a></span></span><span> </span><span class="annot"><span class="annottext">LogFunc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679101771"><span class="annot"><span class="annottext">LogFunc
</span><a href="#local-6989586621679101771"><span class="hs-identifier hs-var">lf</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessContext -&gt; LogFunc -&gt; LoggedProcessContext
</span><a href="RIO.Process.html#LoggedProcessContext"><span class="hs-identifier hs-var">LoggedProcessContext</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessContext
</span><a href="#local-6989586621679101770"><span class="hs-identifier hs-var">pc</span></a></span><span> </span><span class="annot"><span class="annottext">LogFunc
</span><a href="#local-6989586621679101771"><span class="hs-identifier hs-var">lf</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-525"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="RIO.Process.html#HasProcessContext"><span class="hs-identifier hs-type">HasProcessContext</span></a></span><span> </span><span class="annot"><a href="RIO.Process.html#LoggedProcessContext"><span class="hs-identifier hs-type">LoggedProcessContext</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-526"></span><span>  </span><span id="local-6989586621679101776"><span class="annot"><span class="annottext">processContextL :: Lens' LoggedProcessContext ProcessContext
</span><a href="RIO.Process.html#processContextL"><span class="hs-identifier hs-var hs-var hs-var hs-var">processContextL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LoggedProcessContext -&gt; ProcessContext)
-&gt; (LoggedProcessContext -&gt; ProcessContext -&gt; LoggedProcessContext)
-&gt; Lens' LoggedProcessContext ProcessContext
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="RIO.Process.html#LoggedProcessContext"><span class="hs-identifier hs-type">LoggedProcessContext</span></a></span><span> </span><span id="local-6989586621679101777"><span class="annot"><span class="annottext">ProcessContext
</span><a href="#local-6989586621679101777"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">LogFunc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessContext
</span><a href="#local-6989586621679101777"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="RIO.Process.html#LoggedProcessContext"><span class="hs-identifier hs-type">LoggedProcessContext</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessContext
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679101778"><span class="annot"><span class="annottext">LogFunc
</span><a href="#local-6989586621679101778"><span class="hs-identifier hs-var">lf</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679101779"><span class="annot"><span class="annottext">ProcessContext
</span><a href="#local-6989586621679101779"><span class="hs-identifier hs-var">pc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessContext -&gt; LogFunc -&gt; LoggedProcessContext
</span><a href="RIO.Process.html#LoggedProcessContext"><span class="hs-identifier hs-var">LoggedProcessContext</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessContext
</span><a href="#local-6989586621679101779"><span class="hs-identifier hs-var">pc</span></a></span><span> </span><span class="annot"><span class="annottext">LogFunc
</span><a href="#local-6989586621679101778"><span class="hs-identifier hs-var">lf</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-527"></span><span>
</span><span id="line-528"></span><span class="hs-comment">-- | Run an action using a 'LoggedProcessContext' with default</span><span>
</span><span id="line-529"></span><span class="hs-comment">-- settings and no logging.</span><span>
</span><span id="line-530"></span><span class="hs-comment">--</span><span>
</span><span id="line-531"></span><span class="hs-comment">-- @since 0.0.3.0</span><span>
</span><span id="line-532"></span><span id="local-6989586621679101156"><span id="local-6989586621679101157"><span class="annot"><a href="RIO.Process.html#withProcessContextNoLogging"><span class="hs-identifier hs-type">withProcessContextNoLogging</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101156"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="RIO.Prelude.RIO.html#RIO"><span class="hs-identifier hs-type">RIO</span></a></span><span> </span><span class="annot"><a href="RIO.Process.html#LoggedProcessContext"><span class="hs-identifier hs-type">LoggedProcessContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101157"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101156"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101157"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-533"></span><span id="withProcessContextNoLogging"><span class="annot"><span class="annottext">withProcessContextNoLogging :: forall (m :: * -&gt; *) a.
MonadIO m =&gt;
RIO LoggedProcessContext a -&gt; m a
</span><a href="RIO.Process.html#withProcessContextNoLogging"><span class="hs-identifier hs-var hs-var">withProcessContextNoLogging</span></a></span></span><span> </span><span id="local-6989586621679101787"><span class="annot"><span class="annottext">RIO LoggedProcessContext a
</span><a href="#local-6989586621679101787"><span class="hs-identifier hs-var">inner</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-534"></span><span>  </span><span id="local-6989586621679101788"><span class="annot"><span class="annottext">ProcessContext
</span><a href="#local-6989586621679101788"><span class="hs-identifier hs-var">pc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m ProcessContext
forall (m :: * -&gt; *). MonadIO m =&gt; m ProcessContext
</span><a href="RIO.Process.html#mkDefaultProcessContext"><span class="hs-identifier hs-var">mkDefaultProcessContext</span></a></span><span>
</span><span id="line-535"></span><span>  </span><span class="annot"><span class="annottext">LoggedProcessContext -&gt; RIO LoggedProcessContext a -&gt; m a
forall (m :: * -&gt; *) env a. MonadIO m =&gt; env -&gt; RIO env a -&gt; m a
</span><a href="RIO.Prelude.RIO.html#runRIO"><span class="hs-identifier hs-var">runRIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProcessContext -&gt; LogFunc -&gt; LoggedProcessContext
</span><a href="RIO.Process.html#LoggedProcessContext"><span class="hs-identifier hs-var">LoggedProcessContext</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessContext
</span><a href="#local-6989586621679101788"><span class="hs-identifier hs-var">pc</span></a></span><span> </span><span class="annot"><span class="annottext">LogFunc
forall a. Monoid a =&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RIO LoggedProcessContext a
</span><a href="#local-6989586621679101787"><span class="hs-identifier hs-var">inner</span></a></span><span>
</span><span id="line-536"></span><span>
</span><span id="line-537"></span><span class="hs-comment">-- | Execute a process within the configured environment.</span><span>
</span><span id="line-538"></span><span class="hs-comment">--</span><span>
</span><span id="line-539"></span><span class="hs-comment">-- Execution will not return, because either:</span><span>
</span><span id="line-540"></span><span class="hs-comment">--</span><span>
</span><span id="line-541"></span><span class="hs-comment">-- 1) On non-windows, execution is taken over by execv of the</span><span>
</span><span id="line-542"></span><span class="hs-comment">-- sub-process. This allows signals to be propagated (#527)</span><span>
</span><span id="line-543"></span><span class="hs-comment">--</span><span>
</span><span id="line-544"></span><span class="hs-comment">-- 2) On windows, an 'ExitCode' exception will be thrown.</span><span>
</span><span id="line-545"></span><span class="hs-comment">--</span><span>
</span><span id="line-546"></span><span class="hs-comment">-- @since 0.0.3.0</span><span>
</span><span id="line-547"></span><span id="local-6989586621679101164"><span id="local-6989586621679101165"><span class="annot"><a href="RIO.Process.html#exec"><span class="hs-identifier hs-type">exec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="RIO.Process.html#HasProcessContext"><span class="hs-identifier hs-type">HasProcessContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101164"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Prelude.Logger.html#HasLogFunc"><span class="hs-identifier hs-type">HasLogFunc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101164"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="RIO.Prelude.RIO.html#RIO"><span class="hs-identifier hs-type">RIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101164"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101165"><span class="hs-identifier hs-type">b</span></a></span></span></span><span class="hs-cpp">
#ifdef WINDOWS
</span><span class="hs-identifier">exec</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">execSpawn</span><span class="hs-cpp">
#else
</span><span id="exec"><span class="annot"><span class="annottext">exec :: forall env b.
(HasProcessContext env, HasLogFunc env) =&gt;
String -&gt; [String] -&gt; RIO env b
</span><a href="RIO.Process.html#exec"><span class="hs-identifier hs-var hs-var">exec</span></a></span></span><span> </span><span id="local-6989586621679101817"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101817"><span class="hs-identifier hs-var">cmd0</span></a></span></span><span> </span><span id="local-6989586621679101818"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679101818"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-552"></span><span>    </span><span id="local-6989586621679101819"><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621679101819"><span class="hs-identifier hs-var">wd</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Getting (Maybe String) env (Maybe String) -&gt; RIO env (Maybe String)
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting (Maybe String) env (Maybe String)
forall env. HasProcessContext env =&gt; Lens' env (Maybe String)
Lens' env (Maybe String)
</span><a href="RIO.Process.html#workingDirL"><span class="hs-identifier hs-var">workingDirL</span></a></span><span>
</span><span id="line-553"></span><span>    </span><span id="local-6989586621679101820"><span class="annot"><span class="annottext">[(String, String)]
</span><a href="#local-6989586621679101820"><span class="hs-identifier hs-var">envStringsL</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Getting [(String, String)] env [(String, String)]
-&gt; RIO env [(String, String)]
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting [(String, String)] env [(String, String)]
forall env.
HasProcessContext env =&gt;
SimpleGetter env [(String, String)]
SimpleGetter env [(String, String)]
</span><a href="RIO.Process.html#envVarsStringsL"><span class="hs-identifier hs-var">envVarsStringsL</span></a></span><span>
</span><span id="line-554"></span><span>    </span><span id="local-6989586621679101821"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101821"><span class="hs-identifier hs-var">cmd</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; RIO env String
forall env (m :: * -&gt; *).
(HasProcessContext env, MonadReader env m, MonadIO m) =&gt;
String -&gt; m String
</span><a href="RIO.Process.html#preProcess"><span class="hs-identifier hs-var">preProcess</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101817"><span class="hs-identifier hs-var">cmd0</span></a></span><span>
</span><span id="line-555"></span><span>    </span><span class="annot"><span class="annottext">Maybe String -&gt; String -&gt; [String] -&gt; RIO env b -&gt; RIO env b
forall (m :: * -&gt; *) env a.
(MonadIO m, MonadReader env m, HasLogFunc env, HasCallStack) =&gt;
Maybe String -&gt; String -&gt; [String] -&gt; m a -&gt; m a
</span><a href="RIO.Process.html#withProcessTimeLog"><span class="hs-identifier hs-var">withProcessTimeLog</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621679101819"><span class="hs-identifier hs-var">wd</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101821"><span class="hs-identifier hs-var">cmd</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679101818"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">(RIO env b -&gt; RIO env b) -&gt; RIO env b -&gt; RIO env b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">IO b -&gt; RIO env b
forall a. IO a -&gt; RIO env a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO b -&gt; RIO env b) -&gt; IO b -&gt; RIO env b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-556"></span><span>      </span><span class="annot"><span class="annottext">Maybe String -&gt; (String -&gt; IO ()) -&gt; IO ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#for_"><span class="hs-identifier hs-var">for_</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621679101819"><span class="hs-identifier hs-var">wd</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/directory-1.3.8.5/src/System.Directory.html#setCurrentDirectory"><span class="hs-identifier hs-var">setCurrentDirectory</span></a></span><span>
</span><span id="line-557"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; Bool -&gt; [String] -&gt; Maybe [(String, String)] -&gt; IO b
forall a.
String -&gt; Bool -&gt; [String] -&gt; Maybe [(String, String)] -&gt; IO a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/unix-2.8.4.0/src/System.Posix.Process.html#executeFile"><span class="hs-identifier hs-var">executeFile</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101821"><span class="hs-identifier hs-var">cmd</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#True"><span class="hs-identifier hs-var">True</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679101818"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe [(String, String)] -&gt; IO b)
-&gt; Maybe [(String, String)] -&gt; IO b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[(String, String)] -&gt; Maybe [(String, String)]
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">[(String, String)]
</span><a href="#local-6989586621679101820"><span class="hs-identifier hs-var">envStringsL</span></a></span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-560"></span><span class="hs-comment">-- | Like 'exec', but does not use 'execv' on non-windows. This way,</span><span>
</span><span id="line-561"></span><span class="hs-comment">-- there is a sub-process, which is helpful in some cases</span><span>
</span><span id="line-562"></span><span class="hs-comment">-- (&lt;https://github.com/commercialhaskell/stack/issues/1306&gt;).</span><span>
</span><span id="line-563"></span><span class="hs-comment">--</span><span>
</span><span id="line-564"></span><span class="hs-comment">-- This function only exits by throwing 'ExitCode'.</span><span>
</span><span id="line-565"></span><span class="hs-comment">--</span><span>
</span><span id="line-566"></span><span class="hs-comment">-- @since 0.0.3.0</span><span>
</span><span id="line-567"></span><span id="local-6989586621679101823"><span id="local-6989586621679101824"><span class="annot"><a href="RIO.Process.html#execSpawn"><span class="hs-identifier hs-type">execSpawn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="RIO.Process.html#HasProcessContext"><span class="hs-identifier hs-type">HasProcessContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101823"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Prelude.Logger.html#HasLogFunc"><span class="hs-identifier hs-type">HasLogFunc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101823"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="RIO.Prelude.RIO.html#RIO"><span class="hs-identifier hs-type">RIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101823"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101824"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-568"></span><span id="execSpawn"><span class="annot"><span class="annottext">execSpawn :: forall env b.
(HasProcessContext env, HasLogFunc env) =&gt;
String -&gt; [String] -&gt; RIO env b
</span><a href="RIO.Process.html#execSpawn"><span class="hs-identifier hs-var hs-var">execSpawn</span></a></span></span><span> </span><span id="local-6989586621679101836"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101836"><span class="hs-identifier hs-var">cmd</span></a></span></span><span> </span><span id="local-6989586621679101837"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679101837"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; [String]
-&gt; (ProcessConfig () () () -&gt; RIO env ExitCode)
-&gt; RIO env ExitCode
forall env (m :: * -&gt; *) a.
(HasProcessContext env, HasLogFunc env, MonadReader env m,
 MonadIO m, HasCallStack) =&gt;
String -&gt; [String] -&gt; (ProcessConfig () () () -&gt; m a) -&gt; m a
</span><a href="RIO.Process.html#proc"><span class="hs-identifier hs-var">proc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101836"><span class="hs-identifier hs-var">cmd</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679101837"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProcessConfig () () () -&gt; RIO env ExitCode
forall (m :: * -&gt; *) stdin stdout stderr.
MonadIO m =&gt;
ProcessConfig stdin stdout stderr -&gt; m ExitCode
</span><span class="hs-identifier hs-var">runProcess</span></span><span> </span><span class="annot"><span class="annottext">(ProcessConfig () () () -&gt; RIO env ExitCode)
-&gt; (ProcessConfig () () () -&gt; ProcessConfig () () ())
-&gt; ProcessConfig () () ()
-&gt; RIO env ExitCode
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">StreamSpec 'STInput ()
-&gt; ProcessConfig () () () -&gt; ProcessConfig () () ()
forall stdin stdin0 stdout stderr.
StreamSpec 'STInput stdin
-&gt; ProcessConfig stdin0 stdout stderr
-&gt; ProcessConfig stdin stdout stderr
</span><span class="hs-identifier hs-var">setStdin</span></span><span> </span><span class="annot"><span class="annottext">StreamSpec 'STInput ()
forall (anyStreamType :: StreamType). StreamSpec anyStreamType ()
</span><span class="hs-identifier hs-var">inherit</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RIO env ExitCode -&gt; (ExitCode -&gt; RIO env a) -&gt; RIO env a
forall a b. RIO env a -&gt; (a -&gt; RIO env b) -&gt; RIO env b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">IO a -&gt; RIO env a
forall a. IO a -&gt; RIO env a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO a -&gt; RIO env a) -&gt; (ExitCode -&gt; IO a) -&gt; ExitCode -&gt; RIO env a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ExitCode -&gt; IO a
forall a. ExitCode -&gt; IO a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/System.Exit.html#exitWith"><span class="hs-identifier hs-var">exitWith</span></a></span><span>
</span><span id="line-569"></span><span>
</span><span id="line-570"></span><span class="hs-comment">-- | Check if the given executable exists on the given PATH.</span><span>
</span><span id="line-571"></span><span class="hs-comment">--</span><span>
</span><span id="line-572"></span><span class="hs-comment">-- @since 0.0.3.0</span><span>
</span><span id="line-573"></span><span id="local-6989586621679101192"><span id="local-6989586621679101193"><span class="annot"><a href="RIO.Process.html#doesExecutableExist"><span class="hs-identifier hs-type">doesExecutableExist</span></a></span><span>
</span><span id="line-574"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101192"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/mtl-2.3.1/src/Control.Monad.Reader.Class.html#MonadReader"><span class="hs-identifier hs-type">MonadReader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101193"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101192"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#HasProcessContext"><span class="hs-identifier hs-type">HasProcessContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101193"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-575"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>            </span><span class="annot"><span class="hs-comment">-- ^ Name of executable</span></span><span>
</span><span id="line-576"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101192"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Bool"><span class="hs-identifier hs-type">Bool</span></a></span></span></span><span>
</span><span id="line-577"></span><span id="doesExecutableExist"><span class="annot"><span class="annottext">doesExecutableExist :: forall (m :: * -&gt; *) env.
(MonadIO m, MonadReader env m, HasProcessContext env) =&gt;
String -&gt; m Bool
</span><a href="RIO.Process.html#doesExecutableExist"><span class="hs-identifier hs-var hs-var">doesExecutableExist</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Either ProcessException String -&gt; Bool)
-&gt; m (Either ProcessException String) -&gt; m Bool
forall (m :: * -&gt; *) a1 r. Monad m =&gt; (a1 -&gt; r) -&gt; m a1 -&gt; m r
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#liftM"><span class="hs-identifier hs-var">liftM</span></a></span><span> </span><span class="annot"><span class="annottext">Either ProcessException String -&gt; Bool
forall a b. Either a b -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#isRight"><span class="hs-identifier hs-var">isRight</span></a></span><span> </span><span class="annot"><span class="annottext">(m (Either ProcessException String) -&gt; m Bool)
-&gt; (String -&gt; m (Either ProcessException String))
-&gt; String
-&gt; m Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; m (Either ProcessException String)
forall (m :: * -&gt; *) env.
(MonadIO m, MonadReader env m, HasProcessContext env) =&gt;
String -&gt; m (Either ProcessException String)
</span><a href="RIO.Process.html#findExecutable"><span class="hs-identifier hs-var">findExecutable</span></a></span><span>
</span><span id="line-578"></span><span>
</span><span id="line-579"></span><span class="hs-comment">-- | Find the complete path for the given executable name.</span><span>
</span><span id="line-580"></span><span class="hs-comment">--</span><span>
</span><span id="line-581"></span><span class="hs-comment">-- On POSIX systems, filenames that match but are not exectuables are excluded.</span><span>
</span><span id="line-582"></span><span class="hs-comment">--</span><span>
</span><span id="line-583"></span><span class="hs-comment">-- On Windows systems, the executable names tried, in turn, are the supplied</span><span>
</span><span id="line-584"></span><span class="hs-comment">-- name (only if it has an extension) and that name extended by each of the</span><span>
</span><span id="line-585"></span><span class="hs-comment">-- 'exeExtensions'. Also, this function may behave differently from</span><span>
</span><span id="line-586"></span><span class="hs-comment">-- 'RIO.Directory.findExecutable'. The latter excludes as executables filenames</span><span>
</span><span id="line-587"></span><span class="hs-comment">-- without a @.bat@, @.cmd@, @.com@ or @.exe@ extension (case-insensitive).</span><span>
</span><span id="line-588"></span><span class="hs-comment">--</span><span>
</span><span id="line-589"></span><span class="hs-comment">-- @since 0.0.3.0</span><span>
</span><span id="line-590"></span><span id="local-6989586621679101073"><span id="local-6989586621679101074"><span class="annot"><a href="RIO.Process.html#findExecutable"><span class="hs-identifier hs-type">findExecutable</span></a></span><span>
</span><span id="line-591"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101073"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/mtl-2.3.1/src/Control.Monad.Reader.Class.html#MonadReader"><span class="hs-identifier hs-type">MonadReader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101074"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101073"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#HasProcessContext"><span class="hs-identifier hs-type">HasProcessContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101074"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-592"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-593"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Name of executable</span></span><span>
</span><span id="line-594"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101073"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="RIO.Process.html#ProcessException"><span class="hs-identifier hs-type">ProcessException</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-595"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Full path to that executable on success</span></span><span>
</span><span id="line-596"></span><span id="findExecutable"><span class="annot"><span class="annottext">findExecutable :: forall (m :: * -&gt; *) env.
(MonadIO m, MonadReader env m, HasProcessContext env) =&gt;
String -&gt; m (Either ProcessException String)
</span><a href="RIO.Process.html#findExecutable"><span class="hs-identifier hs-var hs-var">findExecutable</span></a></span></span><span> </span><span id="local-6989586621679101879"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101879"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; String -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#any"><span class="hs-identifier hs-var">any</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/filepath-1.4.300.1/src/System.FilePath.Posix.html#isPathSeparator"><span class="hs-identifier hs-var">FP.isPathSeparator</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101879"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-597"></span><span>  </span><span id="local-6989586621679101882"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679101882"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; m [String]
forall (m :: * -&gt; *) env.
(MonadIO m, MonadReader env m, HasProcessContext env) =&gt;
String -&gt; m [String]
</span><a href="RIO.Process.html#addPcExeExtensions"><span class="hs-identifier hs-var">addPcExeExtensions</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101879"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-598"></span><span>  </span><span class="annot"><span class="annottext">m (Either ProcessException String)
-&gt; (String -&gt; IO String)
-&gt; [String]
-&gt; m (Either ProcessException String)
forall (m :: * -&gt; *) env.
(MonadIO m, MonadReader env m, HasProcessContext env) =&gt;
m (Either ProcessException String)
-&gt; (String -&gt; IO String)
-&gt; [String]
-&gt; m (Either ProcessException String)
</span><a href="RIO.Process.html#testFPs"><span class="hs-identifier hs-var">testFPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either ProcessException String
-&gt; m (Either ProcessException String)
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Either ProcessException String
 -&gt; m (Either ProcessException String))
-&gt; Either ProcessException String
-&gt; m (Either ProcessException String)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessException -&gt; Either ProcessException String
forall a b. a -&gt; Either a b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">(ProcessException -&gt; Either ProcessException String)
-&gt; ProcessException -&gt; Either ProcessException String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ProcessException
</span><a href="RIO.Process.html#ExecutableNotFoundAt"><span class="hs-identifier hs-var">ExecutableNotFoundAt</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101879"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO String
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/directory-1.3.8.5/src/System.Directory.html#makeAbsolute"><span class="hs-identifier hs-var">D.makeAbsolute</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679101882"><span class="hs-identifier hs-var">names</span></a></span><span>
</span><span id="line-599"></span><span class="annot"><a href="RIO.Process.html#findExecutable"><span class="hs-identifier hs-var">findExecutable</span></a></span><span> </span><span id="local-6989586621679101886"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101886"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-600"></span><span>  </span><span id="local-6989586621679101887"><span class="annot"><span class="annottext">ProcessContext
</span><a href="#local-6989586621679101887"><span class="hs-identifier hs-var">pc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Getting ProcessContext env ProcessContext -&gt; m ProcessContext
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting ProcessContext env ProcessContext
forall env. HasProcessContext env =&gt; Lens' env ProcessContext
Lens' env ProcessContext
</span><a href="RIO.Process.html#processContextL"><span class="hs-identifier hs-var">processContextL</span></a></span><span>
</span><span id="line-601"></span><span>  </span><span id="local-6989586621679101888"><span class="annot"><span class="annottext">Map String (Either ProcessException String)
</span><a href="#local-6989586621679101888"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IORef (Map String (Either ProcessException String))
-&gt; m (Map String (Either ProcessException String))
forall (m :: * -&gt; *) a. MonadIO m =&gt; IORef a -&gt; m a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">(IORef (Map String (Either ProcessException String))
 -&gt; m (Map String (Either ProcessException String)))
-&gt; IORef (Map String (Either ProcessException String))
-&gt; m (Map String (Either ProcessException String))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessContext
-&gt; IORef (Map String (Either ProcessException String))
</span><a href="RIO.Process.html#pcExeCache"><span class="hs-identifier hs-var">pcExeCache</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessContext
</span><a href="#local-6989586621679101887"><span class="hs-identifier hs-var">pc</span></a></span><span>
</span><span id="line-602"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">String
-&gt; Map String (Either ProcessException String)
-&gt; Maybe (Either ProcessException String)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#lookup"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101886"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Map String (Either ProcessException String)
</span><a href="#local-6989586621679101888"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-603"></span><span>    </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679101890"><span class="annot"><span class="annottext">Either ProcessException String
</span><a href="#local-6989586621679101890"><span class="hs-identifier hs-var">epath</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either ProcessException String
-&gt; m (Either ProcessException String)
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Either ProcessException String
</span><a href="#local-6989586621679101890"><span class="hs-identifier hs-var">epath</span></a></span><span>
</span><span id="line-604"></span><span>    </span><span class="annot"><span class="annottext">Maybe (Either ProcessException String)
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-605"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679101914"><span class="annot"><span class="annottext">loop :: [String] -&gt; f (Either ProcessException String)
</span><a href="#local-6989586621679101914"><span class="hs-identifier hs-var hs-var">loop</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Either ProcessException String
-&gt; f (Either ProcessException String)
forall a. a -&gt; f a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Either ProcessException String
 -&gt; f (Either ProcessException String))
-&gt; Either ProcessException String
-&gt; f (Either ProcessException String)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessException -&gt; Either ProcessException String
forall a b. a -&gt; Either a b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">(ProcessException -&gt; Either ProcessException String)
-&gt; ProcessException -&gt; Either ProcessException String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; ProcessException
</span><a href="RIO.Process.html#ExecutableNotFound"><span class="hs-identifier hs-var">ExecutableNotFound</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101886"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProcessContext -&gt; [String]
</span><a href="RIO.Process.html#pcPath"><span class="hs-identifier hs-var">pcPath</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessContext
</span><a href="#local-6989586621679101887"><span class="hs-identifier hs-var">pc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-606"></span><span>          </span><span class="annot"><a href="#local-6989586621679101914"><span class="hs-identifier hs-var">loop</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679101915"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101915"><span class="hs-identifier hs-var">dir</span></a></span></span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#%3A"><span class="hs-glyph hs-type">:</span></a></span><span id="local-6989586621679101916"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679101916"><span class="hs-identifier hs-var">dirs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-607"></span><span>            </span><span id="local-6989586621679101917"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679101917"><span class="hs-identifier hs-var">fps</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; f [String]
forall (m :: * -&gt; *) env.
(MonadIO m, MonadReader env m, HasProcessContext env) =&gt;
String -&gt; m [String]
</span><a href="RIO.Process.html#addPcExeExtensions"><span class="hs-identifier hs-var">addPcExeExtensions</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; f [String]) -&gt; String -&gt; f [String]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101915"><span class="hs-identifier hs-var">dir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/filepath-1.4.300.1/src/System.FilePath.Posix.html#%3C%2F%3E"><span class="hs-operator hs-var">FP.&lt;/&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101886"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-608"></span><span>            </span><span class="annot"><span class="annottext">f (Either ProcessException String)
-&gt; (String -&gt; IO String)
-&gt; [String]
-&gt; f (Either ProcessException String)
forall (m :: * -&gt; *) env.
(MonadIO m, MonadReader env m, HasProcessContext env) =&gt;
m (Either ProcessException String)
-&gt; (String -&gt; IO String)
-&gt; [String]
-&gt; m (Either ProcessException String)
</span><a href="RIO.Process.html#testFPs"><span class="hs-identifier hs-var">testFPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[String] -&gt; f (Either ProcessException String)
</span><a href="#local-6989586621679101914"><span class="hs-identifier hs-var">loop</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679101916"><span class="hs-identifier hs-var">dirs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO String
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/directory-1.3.8.5/src/System.Directory.html#makeAbsolute"><span class="hs-identifier hs-var">D.makeAbsolute</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679101917"><span class="hs-identifier hs-var">fps</span></a></span><span>
</span><span id="line-609"></span><span>      </span><span id="local-6989586621679101919"><span class="annot"><span class="annottext">Either ProcessException String
</span><a href="#local-6989586621679101919"><span class="hs-identifier hs-var">epath</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; m (Either ProcessException String)
forall {f :: * -&gt; *} {env}.
(MonadIO f, HasProcessContext env, MonadReader env f) =&gt;
[String] -&gt; f (Either ProcessException String)
</span><a href="#local-6989586621679101914"><span class="hs-identifier hs-var">loop</span></a></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; m (Either ProcessException String))
-&gt; [String] -&gt; m (Either ProcessException String)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessContext -&gt; [String]
</span><a href="RIO.Process.html#pcPath"><span class="hs-identifier hs-var">pcPath</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessContext
</span><a href="#local-6989586621679101887"><span class="hs-identifier hs-var">pc</span></a></span><span>
</span><span id="line-610"></span><span>      </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IORef (Map String (Either ProcessException String))
-&gt; (Map String (Either ProcessException String)
    -&gt; (Map String (Either ProcessException String), ()))
-&gt; m ()
forall (m :: * -&gt; *) a b.
MonadIO m =&gt;
IORef a -&gt; (a -&gt; (a, b)) -&gt; m b
</span><span class="hs-identifier hs-var">atomicModifyIORef</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProcessContext
-&gt; IORef (Map String (Either ProcessException String))
</span><a href="RIO.Process.html#pcExeCache"><span class="hs-identifier hs-var">pcExeCache</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessContext
</span><a href="#local-6989586621679101887"><span class="hs-identifier hs-var">pc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Map String (Either ProcessException String)
  -&gt; (Map String (Either ProcessException String), ()))
 -&gt; m ())
-&gt; (Map String (Either ProcessException String)
    -&gt; (Map String (Either ProcessException String), ()))
-&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679101920"><span class="annot"><span class="annottext">Map String (Either ProcessException String)
</span><a href="#local-6989586621679101920"><span class="hs-identifier hs-var">m'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-611"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
-&gt; Either ProcessException String
-&gt; Map String (Either ProcessException String)
-&gt; Map String (Either ProcessException String)
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#insert"><span class="hs-identifier hs-var">Map.insert</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101886"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Either ProcessException String
</span><a href="#local-6989586621679101919"><span class="hs-identifier hs-var">epath</span></a></span><span> </span><span class="annot"><span class="annottext">Map String (Either ProcessException String)
</span><a href="#local-6989586621679101920"><span class="hs-identifier hs-var">m'</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-612"></span><span>      </span><span class="annot"><span class="annottext">Either ProcessException String
-&gt; m (Either ProcessException String)
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Either ProcessException String
</span><a href="#local-6989586621679101919"><span class="hs-identifier hs-var">epath</span></a></span><span>
</span><span id="line-613"></span><span>
</span><span id="line-614"></span><span class="hs-comment">-- | A helper function to add the executable extensions of the process context</span><span>
</span><span id="line-615"></span><span class="hs-comment">-- to a file path. On Windows, the original file path is included, if it has an</span><span>
</span><span id="line-616"></span><span class="hs-comment">-- existing extension.</span><span>
</span><span id="line-617"></span><span id="local-6989586621679101205"><span id="local-6989586621679101206"><span class="annot"><a href="RIO.Process.html#addPcExeExtensions"><span class="hs-identifier hs-type">addPcExeExtensions</span></a></span><span>
</span><span id="line-618"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101205"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/mtl-2.3.1/src/Control.Monad.Reader.Class.html#MonadReader"><span class="hs-identifier hs-type">MonadReader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101206"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101205"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#HasProcessContext"><span class="hs-identifier hs-type">HasProcessContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101206"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-619"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101205"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-620"></span><span id="addPcExeExtensions"><span class="annot"><span class="annottext">addPcExeExtensions :: forall (m :: * -&gt; *) env.
(MonadIO m, MonadReader env m, HasProcessContext env) =&gt;
String -&gt; m [String]
</span><a href="RIO.Process.html#addPcExeExtensions"><span class="hs-identifier hs-var hs-var">addPcExeExtensions</span></a></span></span><span> </span><span id="local-6989586621679101932"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101932"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-621"></span><span>  </span><span id="local-6989586621679101933"><span class="annot"><span class="annottext">ProcessContext
</span><a href="#local-6989586621679101933"><span class="hs-identifier hs-var">pc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Getting ProcessContext env ProcessContext -&gt; m ProcessContext
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting ProcessContext env ProcessContext
forall env. HasProcessContext env =&gt; Lens' env ProcessContext
Lens' env ProcessContext
</span><a href="RIO.Process.html#processContextL"><span class="hs-identifier hs-var">processContextL</span></a></span><span>
</span><span id="line-622"></span><span>  </span><span class="annot"><span class="annottext">[String] -&gt; m [String]
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; m [String]) -&gt; [String] -&gt; m [String]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="RIO.Process.html#isWindows"><span class="hs-identifier hs-var">isWindows</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#%26%26"><span class="hs-operator hs-var">&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/filepath-1.4.300.1/src/System.FilePath.Posix.html#hasExtension"><span class="hs-identifier hs-var">FP.hasExtension</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101932"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101932"><span class="hs-identifier hs-var">fp</span></a></span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; [String]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#%3A"><span class="hs-glyph hs-var">:</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String]
forall a. a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#id"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-623"></span><span>         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShowS -&gt; [String] -&gt; [String]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101932"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProcessContext -&gt; [String]
</span><a href="RIO.Process.html#pcExeExtensions"><span class="hs-identifier hs-var">pcExeExtensions</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessContext
</span><a href="#local-6989586621679101933"><span class="hs-identifier hs-var">pc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-624"></span><span>
</span><span id="line-625"></span><span class="annot"><span class="hs-comment">-- | A helper function to test whether file paths are to an executable</span></span><span>
</span><span id="line-626"></span><span id="local-6989586621679101207"><span id="local-6989586621679101208"><span class="annot"><a href="RIO.Process.html#testFPs"><span class="hs-identifier hs-type">testFPs</span></a></span><span>
</span><span id="line-627"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101207"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/mtl-2.3.1/src/Control.Monad.Reader.Class.html#MonadReader"><span class="hs-identifier hs-type">MonadReader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101208"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101207"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#HasProcessContext"><span class="hs-identifier hs-type">HasProcessContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101208"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-628"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101207"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="RIO.Process.html#ProcessException"><span class="hs-identifier hs-type">ProcessException</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-629"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Default if no executable exists at any file path</span></span><span>
</span><span id="line-630"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-631"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Modification to apply to a file path, if an executable exists there</span></span><span>
</span><span id="line-632"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-633"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ File paths to test, in turn</span></span><span>
</span><span id="line-634"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101207"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="RIO.Process.html#ProcessException"><span class="hs-identifier hs-type">ProcessException</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-635"></span><span id="testFPs"><span class="annot"><span class="annottext">testFPs :: forall (m :: * -&gt; *) env.
(MonadIO m, MonadReader env m, HasProcessContext env) =&gt;
m (Either ProcessException String)
-&gt; (String -&gt; IO String)
-&gt; [String]
-&gt; m (Either ProcessException String)
</span><a href="RIO.Process.html#testFPs"><span class="hs-identifier hs-var hs-var">testFPs</span></a></span></span><span> </span><span id="local-6989586621679101952"><span class="annot"><span class="annottext">m (Either ProcessException String)
</span><a href="#local-6989586621679101952"><span class="hs-identifier hs-var">ifNone</span></a></span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO String
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m (Either ProcessException String)
</span><a href="#local-6989586621679101952"><span class="hs-identifier hs-var">ifNone</span></a></span><span>
</span><span id="line-636"></span><span class="annot"><a href="RIO.Process.html#testFPs"><span class="hs-identifier hs-var">testFPs</span></a></span><span> </span><span id="local-6989586621679101953"><span class="annot"><span class="annottext">m (Either ProcessException String)
</span><a href="#local-6989586621679101953"><span class="hs-identifier hs-var">ifNone</span></a></span></span><span> </span><span id="local-6989586621679101954"><span class="annot"><span class="annottext">String -&gt; IO String
</span><a href="#local-6989586621679101954"><span class="hs-identifier hs-var">modify</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679101955"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101955"><span class="hs-identifier hs-var">fp</span></a></span></span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#%3A"><span class="hs-glyph hs-type">:</span></a></span><span id="local-6989586621679101956"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679101956"><span class="hs-identifier hs-var">fps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-637"></span><span>  </span><span id="local-6989586621679101957"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679101957"><span class="hs-identifier hs-var">exists</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO Bool -&gt; m Bool
forall a. IO a -&gt; m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO Bool -&gt; m Bool) -&gt; IO Bool -&gt; m Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/directory-1.3.8.5/src/System.Directory.html#doesFileExist"><span class="hs-identifier hs-var">D.doesFileExist</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101955"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-638"></span><span>  </span><span id="local-6989586621679101959"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679101959"><span class="hs-identifier hs-var">existsExec</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO Bool -&gt; m Bool
forall a. IO a -&gt; m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO Bool -&gt; m Bool) -&gt; IO Bool -&gt; m Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679101957"><span class="hs-identifier hs-var">exists</span></a></span><span>
</span><span id="line-639"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="RIO.Process.html#isWindows"><span class="hs-identifier hs-var">isWindows</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; IO Bool
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#True"><span class="hs-identifier hs-var">True</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">IO Bool
</span><a href="#local-6989586621679101960"><span class="hs-identifier hs-var">isExecutable</span></a></span><span>
</span><span id="line-640"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; IO Bool
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#False"><span class="hs-identifier hs-var">False</span></a></span><span>
</span><span id="line-641"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679101959"><span class="hs-identifier hs-var">existsExec</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">IO (Either ProcessException String)
-&gt; m (Either ProcessException String)
forall a. IO a -&gt; m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Either ProcessException String)
 -&gt; m (Either ProcessException String))
-&gt; IO (Either ProcessException String)
-&gt; m (Either ProcessException String)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Either ProcessException String
forall a b. b -&gt; Either a b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Either ProcessException String)
-&gt; IO String -&gt; IO (Either ProcessException String)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO String
</span><a href="#local-6989586621679101954"><span class="hs-identifier hs-var">modify</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101955"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">m (Either ProcessException String)
-&gt; (String -&gt; IO String)
-&gt; [String]
-&gt; m (Either ProcessException String)
forall (m :: * -&gt; *) env.
(MonadIO m, MonadReader env m, HasProcessContext env) =&gt;
m (Either ProcessException String)
-&gt; (String -&gt; IO String)
-&gt; [String]
-&gt; m (Either ProcessException String)
</span><a href="RIO.Process.html#testFPs"><span class="hs-identifier hs-var">testFPs</span></a></span><span> </span><span class="annot"><span class="annottext">m (Either ProcessException String)
</span><a href="#local-6989586621679101953"><span class="hs-identifier hs-var">ifNone</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO String
</span><a href="#local-6989586621679101954"><span class="hs-identifier hs-var">modify</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679101956"><span class="hs-identifier hs-var">fps</span></a></span><span>
</span><span id="line-642"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-643"></span><span>  </span><span id="local-6989586621679101960"><span class="annot"><span class="annottext">isExecutable :: IO Bool
</span><a href="#local-6989586621679101960"><span class="hs-identifier hs-var hs-var">isExecutable</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Permissions -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/directory-1.3.8.5/src/System.Directory.Internal.Common.html#executable"><span class="hs-identifier hs-var">D.executable</span></a></span><span> </span><span class="annot"><span class="annottext">(Permissions -&gt; Bool) -&gt; IO Permissions -&gt; IO Bool
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO Permissions
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/directory-1.3.8.5/src/System.Directory.html#getPermissions"><span class="hs-identifier hs-var">D.getPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101955"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-644"></span><span>
</span><span id="line-645"></span><span class="hs-comment">-- | Get the filename extensions for executable files, including the dot (if</span><span>
</span><span id="line-646"></span><span class="hs-comment">-- any).</span><span>
</span><span id="line-647"></span><span class="hs-comment">--</span><span>
</span><span id="line-648"></span><span class="hs-comment">-- On POSIX systems, this is @[&quot;&quot;]@.</span><span>
</span><span id="line-649"></span><span class="hs-comment">--</span><span>
</span><span id="line-650"></span><span class="hs-comment">-- On Windows systems, the list is determined by the value of the @PATHEXT@</span><span>
</span><span id="line-651"></span><span class="hs-comment">-- environment variable, if it present in the environment. If the variable is</span><span>
</span><span id="line-652"></span><span class="hs-comment">-- absent, this is its default value on a Windows system. This function may,</span><span>
</span><span id="line-653"></span><span class="hs-comment">-- therefore, behave differently from 'RIO.Directory.exeExtension',</span><span>
</span><span id="line-654"></span><span class="hs-comment">-- which returns only @&quot;.exe&quot;@.</span><span>
</span><span id="line-655"></span><span class="hs-comment">--</span><span>
</span><span id="line-656"></span><span class="hs-comment">-- @since 0.1.13.0</span><span>
</span><span id="line-657"></span><span id="local-6989586621679101223"><span id="local-6989586621679101224"><span class="annot"><a href="RIO.Process.html#exeExtensions"><span class="hs-identifier hs-type">exeExtensions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101223"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/mtl-2.3.1/src/Control.Monad.Reader.Class.html#MonadReader"><span class="hs-identifier hs-type">MonadReader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101224"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101223"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="RIO.Process.html#HasProcessContext"><span class="hs-identifier hs-type">HasProcessContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679101224"><span class="hs-identifier hs-type">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-658"></span><span>              </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679101223"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-659"></span><span id="exeExtensions"><span class="annot"><span class="annottext">exeExtensions :: forall (m :: * -&gt; *) env.
(MonadIO m, MonadReader env m, HasProcessContext env) =&gt;
m [String]
</span><a href="RIO.Process.html#exeExtensions"><span class="hs-identifier hs-var hs-var">exeExtensions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-660"></span><span>  </span><span id="local-6989586621679101973"><span class="annot"><span class="annottext">ProcessContext
</span><a href="#local-6989586621679101973"><span class="hs-identifier hs-var">pc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Getting ProcessContext env ProcessContext -&gt; m ProcessContext
forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Getting ProcessContext env ProcessContext
forall env. HasProcessContext env =&gt; Lens' env ProcessContext
Lens' env ProcessContext
</span><a href="RIO.Process.html#processContextL"><span class="hs-identifier hs-var">processContextL</span></a></span><span>
</span><span id="line-661"></span><span>  </span><span class="annot"><span class="annottext">[String] -&gt; m [String]
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; m [String]) -&gt; [String] -&gt; m [String]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessContext -&gt; [String]
</span><a href="RIO.Process.html#pcExeExtensions"><span class="hs-identifier hs-var">pcExeExtensions</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessContext
</span><a href="#local-6989586621679101973"><span class="hs-identifier hs-var">pc</span></a></span><span>
</span><span id="line-662"></span><span>
</span><span id="line-663"></span><span class="hs-comment">-- | Augment the given value (assumed to be that of an environment variable</span><span>
</span><span id="line-664"></span><span class="hs-comment">-- that lists paths, such as PATH; this is not checked) with the given extra</span><span>
</span><span id="line-665"></span><span class="hs-comment">-- paths. Those paths are prepended (as in: they take precedence).</span><span>
</span><span id="line-666"></span><span class="hs-comment">--</span><span>
</span><span id="line-667"></span><span class="hs-comment">-- @since 0.0.3.0</span><span>
</span><span id="line-668"></span><span class="annot"><a href="RIO.Process.html#augmentPath"><span class="hs-identifier hs-type">augmentPath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="RIO.Process.html#ProcessException"><span class="hs-identifier hs-type">ProcessException</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-669"></span><span id="augmentPath"><span class="annot"><span class="annottext">augmentPath :: [String] -&gt; Maybe Text -&gt; Either ProcessException Text
</span><a href="RIO.Process.html#augmentPath"><span class="hs-identifier hs-var hs-var">augmentPath</span></a></span></span><span> </span><span id="local-6989586621679101974"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679101974"><span class="hs-identifier hs-var">dirs</span></a></span></span><span> </span><span id="local-6989586621679101975"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679101975"><span class="hs-identifier hs-var">mpath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-670"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">(String -&gt; Bool) -&gt; [String] -&gt; [String]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/filepath-1.4.300.1/src/System.FilePath.Posix.html#searchPathSeparator"><span class="hs-identifier hs-var">FP.searchPathSeparator</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; String -&gt; Bool
forall a. Eq a =&gt; a -&gt; [a] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#elem"><span class="hs-operator hs-var">`elem`</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679101974"><span class="hs-identifier hs-var">dirs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-671"></span><span>    </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Either ProcessException Text
forall a b. b -&gt; Either a b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span>
</span><span id="line-672"></span><span>            </span><span class="annot"><span class="annottext">(Text -&gt; Either ProcessException Text)
-&gt; Text -&gt; Either ProcessException Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Text] -&gt; Text
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.html#intercalate"><span class="hs-identifier hs-var">T.intercalate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Text
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Show.html#singleton"><span class="hs-identifier hs-var">T.singleton</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/filepath-1.4.300.1/src/System.FilePath.Posix.html#searchPathSeparator"><span class="hs-identifier hs-var">FP.searchPathSeparator</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-673"></span><span>            </span><span class="annot"><span class="annottext">([Text] -&gt; Text) -&gt; [Text] -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; [String] -&gt; [Text]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Internal.html#pack"><span class="hs-identifier hs-var">T.pack</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; ShowS -&gt; String -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ShowS
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/filepath-1.4.300.1/src/System.FilePath.Posix.html#dropTrailingPathSeparator"><span class="hs-identifier hs-var">FP.dropTrailingPathSeparator</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679101974"><span class="hs-identifier hs-var">dirs</span></a></span><span>
</span><span id="line-674"></span><span>            </span><span class="annot"><span class="annottext">[Text] -&gt; [Text] -&gt; [Text]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text -&gt; [Text]
forall a. Maybe a -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Maybe.html#maybeToList"><span class="hs-identifier hs-var">maybeToList</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679101975"><span class="hs-identifier hs-var">mpath</span></a></span><span>
</span><span id="line-675"></span><span>    </span><span id="local-6989586621679101980"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679101980"><span class="hs-identifier hs-var">illegal</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProcessException -&gt; Either ProcessException Text
forall a b. a -&gt; Either a b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">(ProcessException -&gt; Either ProcessException Text)
-&gt; ProcessException -&gt; Either ProcessException Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; ProcessException
</span><a href="RIO.Process.html#PathsInvalidInPath"><span class="hs-identifier hs-var">PathsInvalidInPath</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679101980"><span class="hs-identifier hs-var">illegal</span></a></span><span>
</span><span id="line-676"></span><span>
</span><span id="line-677"></span><span class="hs-comment">-- | Apply 'augmentPath' on the value of the PATH environment variable in the</span><span>
</span><span id="line-678"></span><span class="hs-comment">-- given 'EnvVars'.</span><span>
</span><span id="line-679"></span><span class="hs-comment">--</span><span>
</span><span id="line-680"></span><span class="hs-comment">-- @since 0.0.3.0</span><span>
</span><span id="line-681"></span><span class="annot"><a href="RIO.Process.html#augmentPathMap"><span class="hs-identifier hs-type">augmentPathMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="RIO.Process.html#EnvVars"><span class="hs-identifier hs-type">EnvVars</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="RIO.Process.html#ProcessException"><span class="hs-identifier hs-type">ProcessException</span></a></span><span> </span><span class="annot"><a href="RIO.Process.html#EnvVars"><span class="hs-identifier hs-type">EnvVars</span></a></span><span>
</span><span id="line-682"></span><span id="augmentPathMap"><span class="annot"><span class="annottext">augmentPathMap :: [String] -&gt; EnvVars -&gt; Either ProcessException EnvVars
</span><a href="RIO.Process.html#augmentPathMap"><span class="hs-identifier hs-var hs-var">augmentPathMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; [String] -&gt; EnvVars -&gt; Either ProcessException EnvVars
</span><a href="RIO.Process.html#augmentPathMap%27"><span class="hs-identifier hs-var">augmentPathMap'</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;PATH&quot;</span></span><span>
</span><span id="line-683"></span><span>
</span><span id="line-684"></span><span class="hs-comment">-- | Apply 'augmentPath' on the value of the given environment variable in the</span><span>
</span><span id="line-685"></span><span class="hs-comment">-- given 'EnvVars'.</span><span>
</span><span id="line-686"></span><span class="hs-comment">--</span><span>
</span><span id="line-687"></span><span class="hs-comment">-- @since 0.1.22.0</span><span>
</span><span id="line-688"></span><span class="annot"><a href="RIO.Process.html#augmentPathMap%27"><span class="hs-identifier hs-type">augmentPathMap'</span></a></span><span>
</span><span id="line-689"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-690"></span><span>  </span><span class="hs-comment">-- ^ Environment variable. If it does not already exist in the given</span><span>
</span><span id="line-691"></span><span>  </span><span class="hs-comment">-- 'EnvVars', it will be created.</span><span>
</span><span id="line-692"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-693"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="RIO.Process.html#EnvVars"><span class="hs-identifier hs-type">EnvVars</span></a></span><span>
</span><span id="line-694"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="RIO.Process.html#ProcessException"><span class="hs-identifier hs-type">ProcessException</span></a></span><span> </span><span class="annot"><a href="RIO.Process.html#EnvVars"><span class="hs-identifier hs-type">EnvVars</span></a></span><span>
</span><span id="line-695"></span><span id="augmentPathMap%27"><span class="annot"><span class="annottext">augmentPathMap' :: Text -&gt; [String] -&gt; EnvVars -&gt; Either ProcessException EnvVars
</span><a href="RIO.Process.html#augmentPathMap%27"><span class="hs-identifier hs-var hs-var">augmentPathMap'</span></a></span></span><span> </span><span id="local-6989586621679101981"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679101981"><span class="hs-identifier hs-var">envVar</span></a></span></span><span> </span><span id="local-6989586621679101982"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679101982"><span class="hs-identifier hs-var">dirs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EnvVars -&gt; EnvVars
</span><a href="RIO.Process.html#normalizePathEnv"><span class="hs-identifier hs-var">normalizePathEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679101983"><span class="annot"><span class="annottext">EnvVars
</span><a href="#local-6989586621679101983"><span class="hs-identifier hs-var">origEnv</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-696"></span><span>  </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621679101984"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679101984"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; Maybe Text -&gt; Either ProcessException Text
</span><a href="RIO.Process.html#augmentPath"><span class="hs-identifier hs-var">augmentPath</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679101982"><span class="hs-identifier hs-var">dirs</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679101985"><span class="hs-identifier hs-var">mpath</span></a></span><span>
</span><span id="line-697"></span><span>     </span><span class="annot"><span class="annottext">EnvVars -&gt; Either ProcessException EnvVars
forall a. a -&gt; Either ProcessException a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(EnvVars -&gt; Either ProcessException EnvVars)
-&gt; EnvVars -&gt; Either ProcessException EnvVars
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; EnvVars -&gt; EnvVars
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#insert"><span class="hs-identifier hs-var">Map.insert</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679101981"><span class="hs-identifier hs-var">envVar</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679101984"><span class="hs-identifier hs-var">path</span></a></span><span> </span><span class="annot"><span class="annottext">EnvVars
</span><a href="#local-6989586621679101983"><span class="hs-identifier hs-var">origEnv</span></a></span><span>
</span><span id="line-698"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-699"></span><span>    </span><span id="local-6989586621679101985"><span class="annot"><span class="annottext">mpath :: Maybe Text
</span><a href="#local-6989586621679101985"><span class="hs-identifier hs-var hs-var">mpath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; EnvVars -&gt; Maybe Text
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#lookup"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679101981"><span class="hs-identifier hs-var">envVar</span></a></span><span> </span><span class="annot"><span class="annottext">EnvVars
</span><a href="#local-6989586621679101983"><span class="hs-identifier hs-var">origEnv</span></a></span><span>
</span><span id="line-700"></span><span>
</span><span id="line-701"></span><span class="hs-comment">-- | Show a process arg including speechmarks when necessary. Just for</span><span>
</span><span id="line-702"></span><span class="hs-comment">-- debugging purposes, not functionally important.</span><span>
</span><span id="line-703"></span><span class="hs-comment">--</span><span>
</span><span id="line-704"></span><span class="hs-comment">-- @since 0.0.3.0</span><span>
</span><span id="line-705"></span><span class="annot"><a href="RIO.Process.html#showProcessArgDebug"><span class="hs-identifier hs-type">showProcessArgDebug</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-706"></span><span id="showProcessArgDebug"><span class="annot"><span class="annottext">showProcessArgDebug :: String -&gt; Text
</span><a href="RIO.Process.html#showProcessArgDebug"><span class="hs-identifier hs-var hs-var">showProcessArgDebug</span></a></span></span><span> </span><span id="local-6989586621679101987"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101987"><span class="hs-identifier hs-var">x</span></a></span></span><span>
</span><span id="line-707"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; String -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#any"><span class="hs-identifier hs-var">any</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="#local-6989586621679101988"><span class="hs-identifier hs-var">special</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101987"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#%7C%7C"><span class="hs-operator hs-var">||</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101987"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Internal.html#pack"><span class="hs-identifier hs-var">T.pack</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShowS
forall a. Show a =&gt; a -&gt; String
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101987"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-708"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Internal.html#pack"><span class="hs-identifier hs-var">T.pack</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679101987"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-709"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679101988"><span class="annot"><span class="annottext">special :: Char -&gt; Bool
</span><a href="#local-6989586621679101988"><span class="hs-identifier hs-var hs-var">special</span></a></span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&quot;'</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#True"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-710"></span><span>        </span><span class="annot"><a href="#local-6989586621679101988"><span class="hs-identifier hs-var">special</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">' '</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#True"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-711"></span><span>        </span><span class="annot"><a href="#local-6989586621679101988"><span class="hs-identifier hs-var">special</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#False"><span class="hs-identifier hs-var">False</span></a></span><span>
</span><span id="line-712"></span></pre></body></html>