<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head id="head" data-base-url=".."><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Cardano.Logging.FrequencyLimiter</title><link href="../linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="../quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="../haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">trace-dispatcher-2.10.0: Tracers for Cardano</span><ul class="links" id="page-menu"><li><a href="src/Cardano.Logging.FrequencyLimiter.html">Source</a></li><li><a href="../index.html">Contents</a></li><li><a href="../doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Cardano.Logging.FrequencyLimiter</p></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:limitFrequency">limitFrequency</a> :: <span class="keyword">forall</span> a m. <a href="../resourcet/Control-Monad-Trans-Resource.html#t:MonadUnliftIO" title="Control.Monad.Trans.Resource">MonadUnliftIO</a> m =&gt; <a href="../base/Prelude.html#t:Double" title="Prelude">Double</a> -&gt; <a href="../text/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="Cardano-Logging-Types.html#t:Trace" title="Cardano.Logging.Types">Trace</a> m <a href="Cardano-Logging-TraceDispatcherMessage.html#t:TraceDispatcherMessage" title="Cardano.Logging.TraceDispatcherMessage">TraceDispatcherMessage</a> -&gt; <a href="Cardano-Logging-Types.html#t:Trace" title="Cardano.Logging.Types">Trace</a> m a -&gt; m (<a href="Cardano-Logging-Types.html#t:Trace" title="Cardano.Logging.Types">Trace</a> m a)</li><li class="src short"><span class="keyword">data</span> <a href="#t:LimiterSpec">LimiterSpec</a> = <a href="#v:LimiterSpec">LimiterSpec</a> {<ul class="subs"><li><a href="#v:lsNs">lsNs</a> :: [<a href="../text/Data-Text.html#t:Text" title="Data.Text">Text</a>]</li><li><a href="#v:lsName">lsName</a> :: <a href="../text/Data-Text.html#t:Text" title="Data.Text">Text</a></li><li><a href="#v:lsFrequency">lsFrequency</a> :: <a href="../base/Prelude.html#t:Double" title="Prelude">Double</a></li></ul>}</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:limitFrequency" class="def">limitFrequency</a> :: <span class="keyword">forall</span> a m. <a href="../resourcet/Control-Monad-Trans-Resource.html#t:MonadUnliftIO" title="Control.Monad.Trans.Resource">MonadUnliftIO</a> m =&gt; <a href="../base/Prelude.html#t:Double" title="Prelude">Double</a> -&gt; <a href="../text/Data-Text.html#t:Text" title="Data.Text">Text</a> -&gt; <a href="Cardano-Logging-Types.html#t:Trace" title="Cardano.Logging.Types">Trace</a> m <a href="Cardano-Logging-TraceDispatcherMessage.html#t:TraceDispatcherMessage" title="Cardano.Logging.TraceDispatcherMessage">TraceDispatcherMessage</a> -&gt; <a href="Cardano-Logging-Types.html#t:Trace" title="Cardano.Logging.Types">Trace</a> m a -&gt; m (<a href="Cardano-Logging-Types.html#t:Trace" title="Cardano.Logging.Types">Trace</a> m a) <a href="src/Cardano.Logging.FrequencyLimiter.html#limitFrequency" class="link">Source</a> <a href="#v:limitFrequency" class="selflink">#</a></p><div class="doc"><p>Limits the frequency of messages to nMsg which is given per minute.</p><p>If the limiter detects more messages, it traces randomly selected
 messages with the given frequency on the <code>vtracer</code> until the
 frequency falls under the threshold long enough.(see below)</p><p>Before this the <code>ltracer</code> gets a <code><a href="Cardano-Logging-TraceDispatcherMessage.html#v:StartLimiting" title="Cardano.Logging.TraceDispatcherMessage">StartLimiting</a></code> message.
 In-between you receive <code>ContinueLimiting</code> messages on the <code>ltracer</code>
 every <code>reminderPeriod</code> seconds, with the number of suppressed messages.
 Finally it sends a <code><a href="Cardano-Logging-TraceDispatcherMessage.html#v:StopLimiting" title="Cardano.Logging.TraceDispatcherMessage">StopLimiting</a></code> message on the <code>ltracer</code> and traces all
 messages on the <code>vtracer</code> again.</p><p>A budget is used to decide when to start limiting and stop limiting,
 so that the limiter does not get activated if few messages are send in
 high frequency, and doesn't get deactivated if their are only few messages
 which come with low frequency.  When messages arrive in shorter frequency then
 by the given <code>thresholdFrequency</code> budget is earned, and if they
 arrive in a longer period budget is spend. If budget is gets higher
 then <code>budgetLimit</code>, the limiter starts, and if it falls below minus <code>budgetLimit</code>
 the limiter stops.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:LimiterSpec" class="def">LimiterSpec</a> <a href="src/Cardano.Logging.FrequencyLimiter.html#LimiterSpec" class="link">Source</a> <a href="#t:LimiterSpec" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:LimiterSpec" class="def">LimiterSpec</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:lsNs" class="def">lsNs</a> :: [<a href="../text/Data-Text.html#t:Text" title="Data.Text">Text</a>]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:lsName" class="def">lsName</a> :: <a href="../text/Data-Text.html#t:Text" title="Data.Text">Text</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:lsFrequency" class="def">lsFrequency</a> :: <a href="../base/Prelude.html#t:Double" title="Prelude">Double</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>