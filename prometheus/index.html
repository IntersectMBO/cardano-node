<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>prometheus</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">prometheus</span><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="description"><h1>prometheus</h1><div class="doc"><dl><dt>Prometheus Haskell Client</dt><dd></dd></dl><p>A simple and modern, type safe, performance focused, idiomatic Haskell client
for <a href="http://prometheus.io">Prometheus</a> monitoring. Specifically there is no
use of unsafe IO or manual ByteString construction from lists of
bytes. Batteries-included web server.</p><p>A key design element of this library is that the RegistryT monad transformer
is only required for registering new time series. Once the time series is
registered, new data samples may just be added in the IO monad.</p><p>Note: Version 0.* supports Prometheus v1.0 and version 2.* supports Prometheus v2.0.</p><dl><dt>Usage Example</dt><dd></dd></dl><pre>module Example where

import           Control.Monad.IO.Class                         (liftIO)
import           System.Metrics.Prometheus.Http.Scrape          (serveMetricsT)
import           System.Metrics.Prometheus.Concurrent.RegistryT
import           System.Metrics.Prometheus.Metric.Counter       (inc)
import           System.Metrics.Prometheus.MetricId

main :: IO ()
main = runRegistryT $ do
    -- Labels can be defined as lists or added to an empty label set
    connectSuccessGauge &lt;- registerGauge &quot;example_connections&quot; (fromList [(&quot;login&quot;, &quot;success&quot;)])
    connectFailureGauge &lt;- registerGauge &quot;example_connections&quot; (addLabel &quot;login&quot; &quot;failure&quot; mempty)
    connectCounter &lt;- registerCounter &quot;example_connection_total&quot; mempty
    latencyHistogram &lt;- registerHistogram &quot;example_round_trip_latency_ms&quot; mempty [10, 20..100]

    liftIO $ inc connectCounter -- increment a counter

    -- [...] pass metric handles to the rest of the app

    serveMetricsT 8080 [&quot;metrics&quot;] -- http://localhost:8080/metric server
</pre><dl><dt>Advanced Usage</dt><dd></dd></dl><p>A <code>Registry</code> and <code>StateT</code>-based <code>RegistryT</code> are available for unit testing or generating lists
of `[IO a]` actions that can be <code>sequenced</code> and returned from pure code to be applied.</p></div></div><div id="module-list"><p class="caption">Modules</p><div id="module-list"><p class="caption">prometheus-2.3.0</p><ul><li><span class="module details-toggle-control details-toggle" data-details-id="n.1">System</span><details id="n.1" open="open"><summary class="hide-when-js-enabled">Submodules</summary><ul><li><span class="module details-toggle-control details-toggle" data-details-id="n.1.1">Metrics</span><details id="n.1.1" open="open"><summary class="hide-when-js-enabled">Submodules</summary><ul><li><span class="module details-toggle-control details-toggle" data-details-id="n.1.1.1">Prometheus</span><details id="n.1.1.1" open="open"><summary class="hide-when-js-enabled">Submodules</summary><ul><li><span class="module details-toggle-control details-toggle" data-details-id="n.1.1.1.1">Concurrent</span><details id="n.1.1.1.1" open="open"><summary class="hide-when-js-enabled">Submodules</summary><ul><li><span class="module"><span class="noexpander">&nbsp;</span><a href="System-Metrics-Prometheus-Concurrent-Registry.html">System.Metrics.Prometheus.Concurrent.Registry</a></span></li><li><span class="module"><span class="noexpander">&nbsp;</span><a href="System-Metrics-Prometheus-Concurrent-RegistryT.html">System.Metrics.Prometheus.Concurrent.RegistryT</a></span></li></ul></details></li><li><span class="module details-toggle-control details-toggle" data-details-id="n.1.1.1.2">Encode</span><details id="n.1.1.1.2" open="open"><summary class="hide-when-js-enabled">Submodules</summary><ul><li><span class="module"><span class="details-toggle-control details-toggle" data-details-id="n.1.1.1.2.1">&nbsp;</span><a href="System-Metrics-Prometheus-Encode-Text.html">System.Metrics.Prometheus.Encode.Text</a></span><details id="n.1.1.1.2.1" open="open"><summary class="hide-when-js-enabled">Submodules</summary><ul><li><span class="module"><span class="noexpander">&nbsp;</span><a href="System-Metrics-Prometheus-Encode-Text-Histogram.html">System.Metrics.Prometheus.Encode.Text.Histogram</a></span></li><li><span class="module"><span class="noexpander">&nbsp;</span><a href="System-Metrics-Prometheus-Encode-Text-MetricId.html">System.Metrics.Prometheus.Encode.Text.MetricId</a></span></li></ul></details></li></ul></details></li><li><span class="module details-toggle-control details-toggle" data-details-id="n.1.1.1.3">Http</span><details id="n.1.1.1.3" open="open"><summary class="hide-when-js-enabled">Submodules</summary><ul><li><span class="module"><span class="noexpander">&nbsp;</span><a href="System-Metrics-Prometheus-Http-Push.html">System.Metrics.Prometheus.Http.Push</a></span></li><li><span class="module"><span class="noexpander">&nbsp;</span><a href="System-Metrics-Prometheus-Http-Scrape.html">System.Metrics.Prometheus.Http.Scrape</a></span></li></ul></details></li><li><span class="module"><span class="details-toggle-control details-toggle" data-details-id="n.1.1.1.4">&nbsp;</span><a href="System-Metrics-Prometheus-Metric.html">System.Metrics.Prometheus.Metric</a></span><details id="n.1.1.1.4" open="open"><summary class="hide-when-js-enabled">Submodules</summary><ul><li><span class="module"><span class="noexpander">&nbsp;</span><a href="System-Metrics-Prometheus-Metric-Counter.html">System.Metrics.Prometheus.Metric.Counter</a></span></li><li><span class="module"><span class="noexpander">&nbsp;</span><a href="System-Metrics-Prometheus-Metric-Gauge.html">System.Metrics.Prometheus.Metric.Gauge</a></span></li><li><span class="module"><span class="noexpander">&nbsp;</span><a href="System-Metrics-Prometheus-Metric-Histogram.html">System.Metrics.Prometheus.Metric.Histogram</a></span></li><li><span class="module"><span class="noexpander">&nbsp;</span><a href="System-Metrics-Prometheus-Metric-Summary.html">System.Metrics.Prometheus.Metric.Summary</a></span></li></ul></details></li><li><span class="module"><span class="noexpander">&nbsp;</span><a href="System-Metrics-Prometheus-MetricId.html">System.Metrics.Prometheus.MetricId</a></span></li><li><span class="module"><span class="noexpander">&nbsp;</span><a href="System-Metrics-Prometheus-Registry.html">System.Metrics.Prometheus.Registry</a></span></li><li><span class="module"><span class="noexpander">&nbsp;</span><a href="System-Metrics-Prometheus-RegistryT.html">System.Metrics.Prometheus.RegistryT</a></span></li></ul></details></li></ul></details></li></ul></details></li></ul></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>