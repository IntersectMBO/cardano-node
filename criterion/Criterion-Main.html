<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Criterion.Main</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">criterion-1.6.4.0: Robust, reliable performance measurement and analysis</span><ul class="links" id="page-menu"><li><a href="src/Criterion.Main.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) 2009-2014 Bryan O'Sullivan</td></tr><tr><th>License</th><td>BSD-style</td></tr><tr><th>Maintainer</th><td>bos@serpentine.com</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>GHC</td></tr><tr><th>Safe Haskell</th><td>Trustworthy</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Criterion.Main</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">How to write benchmarks</a><ul><li><a href="#g:2">Benchmarking IO actions</a></li><li><a href="#g:3">Benchmarking pure code</a></li><li><a href="#g:4">Fully evaluating a result</a></li></ul></li><li><a href="#g:5">Types</a></li><li><a href="#g:6">Creating a benchmark suite</a><ul><li><a href="#g:7">Running a benchmark</a></li></ul></li><li><a href="#g:8">Turning a suite of benchmarks into a program</a></li><li><a href="#g:9">Other useful code</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Wrappers for compiling and running benchmarks quickly and easily.
 See <code><a href="Criterion-Main.html#v:defaultMain" title="Criterion.Main">defaultMain</a></code> below for an example.</p><p>All of the <code><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a></code>-returning functions in this module initialize the timer
 before measuring time (refer to the documentation for <code>initializeTime</code>
 for more details).</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Benchmarkable">Benchmarkable</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Benchmark">Benchmark</a></li><li class="src short"><a href="#v:env">env</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/deepseq-1.4.8.1/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> env =&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> env -&gt; (env -&gt; <a href="Criterion-Main.html#t:Benchmark" title="Criterion.Main">Benchmark</a>) -&gt; <a href="Criterion-Main.html#t:Benchmark" title="Criterion.Main">Benchmark</a></li><li class="src short"><a href="#v:envWithCleanup">envWithCleanup</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/deepseq-1.4.8.1/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> env =&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> env -&gt; (env -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> a) -&gt; (env -&gt; <a href="Criterion-Main.html#t:Benchmark" title="Criterion.Main">Benchmark</a>) -&gt; <a href="Criterion-Main.html#t:Benchmark" title="Criterion.Main">Benchmark</a></li><li class="src short"><a href="#v:perBatchEnv">perBatchEnv</a> :: (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/deepseq-1.4.8.1/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> env, <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/deepseq-1.4.8.1/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> b) =&gt; (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Int.html#t:Int64" title="Data.Int">Int64</a> -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> env) -&gt; (env -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> b) -&gt; <a href="Criterion-Main.html#t:Benchmarkable" title="Criterion.Main">Benchmarkable</a></li><li class="src short"><a href="#v:perBatchEnvWithCleanup">perBatchEnvWithCleanup</a> :: (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/deepseq-1.4.8.1/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> env, <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/deepseq-1.4.8.1/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> b) =&gt; (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Int.html#t:Int64" title="Data.Int">Int64</a> -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> env) -&gt; (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Int.html#t:Int64" title="Data.Int">Int64</a> -&gt; env -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> ()) -&gt; (env -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> b) -&gt; <a href="Criterion-Main.html#t:Benchmarkable" title="Criterion.Main">Benchmarkable</a></li><li class="src short"><a href="#v:perRunEnv">perRunEnv</a> :: (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/deepseq-1.4.8.1/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> env, <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/deepseq-1.4.8.1/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> b) =&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> env -&gt; (env -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> b) -&gt; <a href="Criterion-Main.html#t:Benchmarkable" title="Criterion.Main">Benchmarkable</a></li><li class="src short"><a href="#v:perRunEnvWithCleanup">perRunEnvWithCleanup</a> :: (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/deepseq-1.4.8.1/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> env, <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/deepseq-1.4.8.1/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> b) =&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> env -&gt; (env -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> ()) -&gt; (env -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> b) -&gt; <a href="Criterion-Main.html#t:Benchmarkable" title="Criterion.Main">Benchmarkable</a></li><li class="src short"><a href="#v:toBenchmarkable">toBenchmarkable</a> :: (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Int.html#t:Int64" title="Data.Int">Int64</a> -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> ()) -&gt; <a href="Criterion-Main.html#t:Benchmarkable" title="Criterion.Main">Benchmarkable</a></li><li class="src short"><a href="#v:bench">bench</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Criterion-Main.html#t:Benchmarkable" title="Criterion.Main">Benchmarkable</a> -&gt; <a href="Criterion-Main.html#t:Benchmark" title="Criterion.Main">Benchmark</a></li><li class="src short"><a href="#v:bgroup">bgroup</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> -&gt; [<a href="Criterion-Main.html#t:Benchmark" title="Criterion.Main">Benchmark</a>] -&gt; <a href="Criterion-Main.html#t:Benchmark" title="Criterion.Main">Benchmark</a></li><li class="src short"><a href="#v:nf">nf</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/deepseq-1.4.8.1/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> b =&gt; (a -&gt; b) -&gt; a -&gt; <a href="Criterion-Main.html#t:Benchmarkable" title="Criterion.Main">Benchmarkable</a></li><li class="src short"><a href="#v:whnf">whnf</a> :: (a -&gt; b) -&gt; a -&gt; <a href="Criterion-Main.html#t:Benchmarkable" title="Criterion.Main">Benchmarkable</a></li><li class="src short"><a href="#v:nfIO">nfIO</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/deepseq-1.4.8.1/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> a =&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> a -&gt; <a href="Criterion-Main.html#t:Benchmarkable" title="Criterion.Main">Benchmarkable</a></li><li class="src short"><a href="#v:whnfIO">whnfIO</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> a -&gt; <a href="Criterion-Main.html#t:Benchmarkable" title="Criterion.Main">Benchmarkable</a></li><li class="src short"><a href="#v:nfAppIO">nfAppIO</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/deepseq-1.4.8.1/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> b =&gt; (a -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> b) -&gt; a -&gt; <a href="Criterion-Main.html#t:Benchmarkable" title="Criterion.Main">Benchmarkable</a></li><li class="src short"><a href="#v:whnfAppIO">whnfAppIO</a> :: (a -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> b) -&gt; a -&gt; <a href="Criterion-Main.html#t:Benchmarkable" title="Criterion.Main">Benchmarkable</a></li><li class="src short"><a href="#v:defaultMain">defaultMain</a> :: [<a href="Criterion-Main.html#t:Benchmark" title="Criterion.Main">Benchmark</a>] -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> ()</li><li class="src short"><a href="#v:defaultMainWith">defaultMainWith</a> :: <a href="Criterion-Types.html#t:Config" title="Criterion.Types">Config</a> -&gt; [<a href="Criterion-Main.html#t:Benchmark" title="Criterion.Main">Benchmark</a>] -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> ()</li><li class="src short"><a href="#v:defaultConfig">defaultConfig</a> :: <a href="Criterion-Types.html#t:Config" title="Criterion.Types">Config</a></li><li class="src short"><a href="#v:makeMatcher">makeMatcher</a> :: <a href="Criterion-Main-Options.html#t:MatchType" title="Criterion.Main.Options">MatchType</a> -&gt; [<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a>] -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>)</li><li class="src short"><a href="#v:runMode">runMode</a> :: <a href="Criterion-Main-Options.html#t:Mode" title="Criterion.Main.Options">Mode</a> -&gt; [<a href="Criterion-Main.html#t:Benchmark" title="Criterion.Main">Benchmark</a>] -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> ()</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>How to write benchmarks</h1></a><div class="doc"><p>The <code><a href="Criterion-Main.html#t:Benchmarkable" title="Criterion.Main">Benchmarkable</a></code> type is a container for code that can be
 benchmarked.  The value inside must run a benchmark the given
 number of times.  We are most interested in benchmarking two
 things:</p><ul><li><code><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a></code> actions.  Most <code><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a></code> actions can be benchmarked directly.</li><li>Pure functions.  GHC optimises aggressively when compiling with
   <code>-O</code>, so it is easy to write innocent-looking benchmark code that
   doesn't measure the performance of a pure function at all.  We
   work around this by benchmarking both a function and its final
   argument together.</li></ul></div><a href="#g:2" id="g:2"><h2>Benchmarking IO actions</h2></a><div class="doc"><p>Most <code><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a></code> actions can be benchmarked easily using one of the following
 two functions:</p><pre><code><a href="Criterion-Main.html#v:nfIO" title="Criterion.Main">nfIO</a></code>   :: <code>NFData</code> a =&gt; <code><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a></code> a -&gt; <code><a href="Criterion-Main.html#t:Benchmarkable" title="Criterion.Main">Benchmarkable</a></code>
<code><a href="Criterion-Main.html#v:whnfIO" title="Criterion.Main">whnfIO</a></code> ::               <code><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a></code> a -&gt; <code><a href="Criterion-Main.html#t:Benchmarkable" title="Criterion.Main">Benchmarkable</a></code>
</pre><p>In certain corner cases, you may find it useful to use the following
 variants, which take the input as a separate argument:</p><pre><code><a href="Criterion-Main.html#v:nfAppIO" title="Criterion.Main">nfAppIO</a></code>   :: <code>NFData</code> b =&gt; (a -&gt; <code><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a></code> b) -&gt; a -&gt; <code><a href="Criterion-Main.html#t:Benchmarkable" title="Criterion.Main">Benchmarkable</a></code>
<code><a href="Criterion-Main.html#v:whnfAppIO" title="Criterion.Main">whnfAppIO</a></code> ::               (a -&gt; <code><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a></code> b) -&gt; a -&gt; <code><a href="Criterion-Main.html#t:Benchmarkable" title="Criterion.Main">Benchmarkable</a></code>
</pre><p>This is useful when the bulk of the work performed by the function is
 not bound by IO, but rather by pure computations that may optimize away if
 the argument is known statically, as in <code><a href="Criterion-Main.html#v:nfIO" title="Criterion.Main">nfIO</a></code>/<code><a href="Criterion-Main.html#v:whnfIO" title="Criterion.Main">whnfIO</a></code>.</p></div><a href="#g:3" id="g:3"><h2>Benchmarking pure code</h2></a><div class="doc"><p>Because GHC optimises aggressively when compiling with <code>-O</code>, it is
 potentially easy to write innocent-looking benchmark code that will
 only be evaluated once, for which all but the first iteration of
 the timing loop will be timing the cost of doing nothing.</p><p>To work around this, we provide two functions for benchmarking pure
 code.</p><p>The first will cause results to be fully evaluated to normal form
 (NF):</p><pre><code><a href="Criterion-Main.html#v:nf" title="Criterion.Main">nf</a></code> :: <code>NFData</code> b =&gt; (a -&gt; b) -&gt; a -&gt; <code><a href="Criterion-Main.html#t:Benchmarkable" title="Criterion.Main">Benchmarkable</a></code>
</pre><p>The second will cause results to be evaluated to weak head normal
 form (the Haskell default):</p><pre><code><a href="Criterion-Main.html#v:whnf" title="Criterion.Main">whnf</a></code> :: (a -&gt; b) -&gt; a -&gt; <code><a href="Criterion-Main.html#t:Benchmarkable" title="Criterion.Main">Benchmarkable</a></code>
</pre><p>As both of these types suggest, when you want to benchmark a
 function, you must supply two values:</p><ul><li>The first element is the function, saturated with all but its
   last argument.</li><li>The second element is the last argument to the function.</li></ul><p>Here is an example that makes the use of these functions clearer.
 Suppose we want to benchmark the following function:</p><pre>firstN :: Int -&gt; [Int]
firstN k = take k [(0::Int)..]
</pre><p>So in the easy case, we construct a benchmark as follows:</p><pre><code><a href="Criterion-Main.html#v:nf" title="Criterion.Main">nf</a></code> firstN 1000
</pre></div><a href="#g:4" id="g:4"><h2>Fully evaluating a result</h2></a><div class="doc"><p>The <code><a href="Criterion-Main.html#v:whnf" title="Criterion.Main">whnf</a></code> harness for evaluating a pure function only evaluates
 the result to weak head normal form (WHNF).  If you need the result
 evaluated all the way to normal form, use the <code><a href="Criterion-Main.html#v:nf" title="Criterion.Main">nf</a></code> function to
 force its complete evaluation.</p><p>Using the <code>firstN</code> example from earlier, to naive eyes it might
 <em>appear</em> that the following code ought to benchmark the production
 of the first 1000 list elements:</p><pre><code><a href="Criterion-Main.html#v:whnf" title="Criterion.Main">whnf</a></code> firstN 1000
</pre><p>Since we are using <code><a href="Criterion-Main.html#v:whnf" title="Criterion.Main">whnf</a></code>, in this case the result will only be
 forced until it reaches WHNF, so what this would <em>actually</em>
 benchmark is merely how long it takes to produce the first list
 element!</p></div><a href="#g:5" id="g:5"><h1>Types</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Benchmarkable" class="def">Benchmarkable</a> <a href="#t:Benchmarkable" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Benchmark" class="def">Benchmark</a> <a href="#t:Benchmark" class="selflink">#</a></p><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Benchmark">Instances</h4><details id="i:Benchmark" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Benchmark:Show:1"></span> <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Criterion-Main.html#t:Benchmark" title="Criterion.Main">Benchmark</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Benchmark:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Criterion-Measurement-Types.html">Criterion.Measurement.Types</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Criterion-Main.html#t:Benchmark" title="Criterion.Main">Benchmark</a> -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Criterion-Main.html#t:Benchmark" title="Criterion.Main">Benchmark</a> -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Criterion-Main.html#t:Benchmark" title="Criterion.Main">Benchmark</a>] -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:6" id="g:6"><h1>Creating a benchmark suite</h1></a><div class="top"><p class="src"><a id="v:env" class="def">env</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/deepseq-1.4.8.1/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> env =&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> env -&gt; (env -&gt; <a href="Criterion-Main.html#t:Benchmark" title="Criterion.Main">Benchmark</a>) -&gt; <a href="Criterion-Main.html#t:Benchmark" title="Criterion.Main">Benchmark</a> <a href="#v:env" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:envWithCleanup" class="def">envWithCleanup</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/deepseq-1.4.8.1/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> env =&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> env -&gt; (env -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> a) -&gt; (env -&gt; <a href="Criterion-Main.html#t:Benchmark" title="Criterion.Main">Benchmark</a>) -&gt; <a href="Criterion-Main.html#t:Benchmark" title="Criterion.Main">Benchmark</a> <a href="#v:envWithCleanup" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:perBatchEnv" class="def">perBatchEnv</a> :: (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/deepseq-1.4.8.1/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> env, <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/deepseq-1.4.8.1/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> b) =&gt; (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Int.html#t:Int64" title="Data.Int">Int64</a> -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> env) -&gt; (env -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> b) -&gt; <a href="Criterion-Main.html#t:Benchmarkable" title="Criterion.Main">Benchmarkable</a> <a href="#v:perBatchEnv" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:perBatchEnvWithCleanup" class="def">perBatchEnvWithCleanup</a> :: (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/deepseq-1.4.8.1/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> env, <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/deepseq-1.4.8.1/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> b) =&gt; (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Int.html#t:Int64" title="Data.Int">Int64</a> -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> env) -&gt; (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Int.html#t:Int64" title="Data.Int">Int64</a> -&gt; env -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> ()) -&gt; (env -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> b) -&gt; <a href="Criterion-Main.html#t:Benchmarkable" title="Criterion.Main">Benchmarkable</a> <a href="#v:perBatchEnvWithCleanup" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:perRunEnv" class="def">perRunEnv</a> :: (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/deepseq-1.4.8.1/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> env, <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/deepseq-1.4.8.1/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> b) =&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> env -&gt; (env -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> b) -&gt; <a href="Criterion-Main.html#t:Benchmarkable" title="Criterion.Main">Benchmarkable</a> <a href="#v:perRunEnv" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:perRunEnvWithCleanup" class="def">perRunEnvWithCleanup</a> :: (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/deepseq-1.4.8.1/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> env, <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/deepseq-1.4.8.1/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> b) =&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> env -&gt; (env -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> ()) -&gt; (env -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> b) -&gt; <a href="Criterion-Main.html#t:Benchmarkable" title="Criterion.Main">Benchmarkable</a> <a href="#v:perRunEnvWithCleanup" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:toBenchmarkable" class="def">toBenchmarkable</a> :: (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Int.html#t:Int64" title="Data.Int">Int64</a> -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> ()) -&gt; <a href="Criterion-Main.html#t:Benchmarkable" title="Criterion.Main">Benchmarkable</a> <a href="#v:toBenchmarkable" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:bench" class="def">bench</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="Criterion-Main.html#t:Benchmarkable" title="Criterion.Main">Benchmarkable</a> -&gt; <a href="Criterion-Main.html#t:Benchmark" title="Criterion.Main">Benchmark</a> <a href="#v:bench" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:bgroup" class="def">bgroup</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> -&gt; [<a href="Criterion-Main.html#t:Benchmark" title="Criterion.Main">Benchmark</a>] -&gt; <a href="Criterion-Main.html#t:Benchmark" title="Criterion.Main">Benchmark</a> <a href="#v:bgroup" class="selflink">#</a></p></div><a href="#g:7" id="g:7"><h2>Running a benchmark</h2></a><div class="top"><p class="src"><a id="v:nf" class="def">nf</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/deepseq-1.4.8.1/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> b =&gt; (a -&gt; b) -&gt; a -&gt; <a href="Criterion-Main.html#t:Benchmarkable" title="Criterion.Main">Benchmarkable</a> <a href="#v:nf" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:whnf" class="def">whnf</a> :: (a -&gt; b) -&gt; a -&gt; <a href="Criterion-Main.html#t:Benchmarkable" title="Criterion.Main">Benchmarkable</a> <a href="#v:whnf" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:nfIO" class="def">nfIO</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/deepseq-1.4.8.1/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> a =&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> a -&gt; <a href="Criterion-Main.html#t:Benchmarkable" title="Criterion.Main">Benchmarkable</a> <a href="#v:nfIO" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:whnfIO" class="def">whnfIO</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> a -&gt; <a href="Criterion-Main.html#t:Benchmarkable" title="Criterion.Main">Benchmarkable</a> <a href="#v:whnfIO" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:nfAppIO" class="def">nfAppIO</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/deepseq-1.4.8.1/Control-DeepSeq.html#t:NFData" title="Control.DeepSeq">NFData</a> b =&gt; (a -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> b) -&gt; a -&gt; <a href="Criterion-Main.html#t:Benchmarkable" title="Criterion.Main">Benchmarkable</a> <a href="#v:nfAppIO" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:whnfAppIO" class="def">whnfAppIO</a> :: (a -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> b) -&gt; a -&gt; <a href="Criterion-Main.html#t:Benchmarkable" title="Criterion.Main">Benchmarkable</a> <a href="#v:whnfAppIO" class="selflink">#</a></p></div><a href="#g:8" id="g:8"><h1>Turning a suite of benchmarks into a program</h1></a><div class="top"><p class="src"><a id="v:defaultMain" class="def">defaultMain</a> :: [<a href="Criterion-Main.html#t:Benchmark" title="Criterion.Main">Benchmark</a>] -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="src/Criterion.Main.html#defaultMain" class="link">Source</a> <a href="#v:defaultMain" class="selflink">#</a></p><div class="doc"><p>An entry point that can be used as a <code>main</code> function.</p><pre>import Criterion.Main

fib :: Int -&gt; Int
fib 0 = 0
fib 1 = 1
fib n = fib (n-1) + fib (n-2)

main = defaultMain [
       bgroup &quot;fib&quot; [ bench &quot;10&quot; $ whnf fib 10
                    , bench &quot;35&quot; $ whnf fib 35
                    , bench &quot;37&quot; $ whnf fib 37
                    ]
                   ]</pre></div></div><div class="top"><p class="src"><a id="v:defaultMainWith" class="def">defaultMainWith</a> :: <a href="Criterion-Types.html#t:Config" title="Criterion.Types">Config</a> -&gt; [<a href="Criterion-Main.html#t:Benchmark" title="Criterion.Main">Benchmark</a>] -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="src/Criterion.Main.html#defaultMainWith" class="link">Source</a> <a href="#v:defaultMainWith" class="selflink">#</a></p><div class="doc"><p>An entry point that can be used as a <code>main</code> function, with
 configurable defaults.</p><p>Example:</p><pre>import Criterion.Main.Options
import Criterion.Main

myConfig = defaultConfig {
              -- Resample 10 times for bootstrapping
              resamples = 10
           }

main = defaultMainWith myConfig [
         bench &quot;fib 30&quot; $ whnf fib 30
       ]</pre><p>If you save the above example as <code>&quot;Fib.hs&quot;</code>, you should be able
 to compile it as follows:</p><pre>ghc -O --make Fib</pre><p>Run <code>&quot;Fib --help&quot;</code> on the command line to get a list of command
 line options.</p></div></div><div class="top"><p class="src"><a id="v:defaultConfig" class="def">defaultConfig</a> :: <a href="Criterion-Types.html#t:Config" title="Criterion.Types">Config</a> <a href="src/Criterion.Main.Options.html#defaultConfig" class="link">Source</a> <a href="#v:defaultConfig" class="selflink">#</a></p><div class="doc"><p>Default benchmarking configuration.</p></div></div><a href="#g:9" id="g:9"><h1>Other useful code</h1></a><div class="top"><p class="src"><a id="v:makeMatcher" class="def">makeMatcher</a> <a href="src/Criterion.Main.html#makeMatcher" class="link">Source</a> <a href="#v:makeMatcher" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Criterion-Main-Options.html#t:MatchType" title="Criterion.Main.Options">MatchType</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; [<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a>]</td><td class="doc"><p>Command line arguments.</p></td></tr><tr><td class="src">-&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Either.html#t:Either" title="Data.Either">Either</a> <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Create a function that can tell if a name given on the command
 line matches a benchmark.</p></div></div><div class="top"><p class="src"><a id="v:runMode" class="def">runMode</a> :: <a href="Criterion-Main-Options.html#t:Mode" title="Criterion.Main.Options">Mode</a> -&gt; [<a href="Criterion-Main.html#t:Benchmark" title="Criterion.Main">Benchmark</a>] -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="src/Criterion.Main.html#runMode" class="link">Source</a> <a href="#v:runMode" class="selflink">#</a></p><div class="doc"><p>Run a set of <code><a href="Criterion-Main.html#t:Benchmark" title="Criterion.Main">Benchmark</a></code>s with the given <code><a href="Criterion-Main-Options.html#t:Mode" title="Criterion.Main.Options">Mode</a></code>.</p><p>This can be useful if you have a <code><a href="Criterion-Main-Options.html#t:Mode" title="Criterion.Main.Options">Mode</a></code> from some other source (e.g. from a
 one in your benchmark driver's command-line parser).</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>