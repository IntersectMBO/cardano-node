<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE BangPatterns #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE ExplicitNamespaces #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE PackageImports #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-unused-imports #-}</span><span class="hs-cpp">

#if !defined(mingw32_HOST_OS)
</span><span class="hs-cpp">#define UNIX
</span><span class="hs-cpp">#endif
</span><span>
</span><span id="line-20"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Cardano.Node.Run</span><span>
</span><span id="line-21"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Cardano.Node.Run.html#runNode"><span class="hs-identifier">runNode</span></a></span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Node.Run.html#checkVRFFilePermissions"><span class="hs-identifier">checkVRFFilePermissions</span></a></span><span>
</span><span id="line-23"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-24"></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-api-10.18.0.0-cf96680f7a5f126623afc107f46c4390ef848488275422e58a8da147b9415623/share/doc/html/src/Cardano.Api.html"><span class="hs-identifier">Cardano.Api</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-api-10.18.0.0-cf96680f7a5f126623afc107f46c4390ef848488275422e58a8da147b9415623/share/doc/html/src/Cardano.Api.IO.Internal.Base.html#File"><span class="hs-identifier">File</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-api-10.18.0.0-cf96680f7a5f126623afc107f46c4390ef848488275422e58a8da147b9415623/share/doc/html/src/Cardano.Api.IO.Internal.Base.html#FileDirection"><span class="hs-identifier">FileDirection</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-api-10.18.0.0-cf96680f7a5f126623afc107f46c4390ef848488275422e58a8da147b9415623/share/doc/html/src/Cardano.Api.Error.html"><span class="hs-identifier">Cardano.Api.Error</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-api-10.18.0.0-cf96680f7a5f126623afc107f46c4390ef848488275422e58a8da147b9415623/share/doc/html/src/Cardano.Api.Error.html#displayError"><span class="hs-identifier">displayError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-api-10.18.0.0-cf96680f7a5f126623afc107f46c4390ef848488275422e58a8da147b9415623/share/doc/html/src/Cardano.Api.html"><span class="hs-identifier">Cardano.Api</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Api</span></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/qz385r1jf1fz7y9jnki2qww7jwm1xlzd-random-lib-random-1.2.1.3-haddock-doc/share/doc/random/html/src/System.Random.html"><span class="hs-identifier">System.Random</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/qz385r1jf1fz7y9jnki2qww7jwm1xlzd-random-lib-random-1.2.1.3-haddock-doc/share/doc/random/html/src/System.Random.html#randomIO"><span class="hs-identifier">randomIO</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.BM.Data.LogItem</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">LogObject</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.BM.Data.Tracer</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ToLogObject</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">TracingVerbosity</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.BM.Data.Transformers</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">setHostname</span></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.BM.Trace</span></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-crypto-class-2.2.3.0-040fc8d725c5dba3203f5fdd10fab903feccfa7eadf608eb84b7e061f3cba2df/share/doc/html/src/Cardano.Crypto.Init.html"><span class="hs-identifier">Cardano.Crypto.Init</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Crypto</span></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.Configuration.LedgerDB.html"><span class="hs-identifier">Cardano.Node.Configuration.LedgerDB</span></a></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html"><span class="hs-identifier">Cardano.Node.Configuration.Logging</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#LoggingLayer"><span class="hs-identifier">LoggingLayer</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#createLoggingLayer"><span class="hs-identifier">createLoggingLayer</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>                   </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#nodeBasicInfo"><span class="hs-identifier">nodeBasicInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#shutdownLoggingLayer"><span class="hs-identifier">shutdownLoggingLayer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.Configuration.NodeAddress.html"><span class="hs-identifier">Cardano.Node.Configuration.NodeAddress</span></a></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.Configuration.POM.html"><span class="hs-identifier">Cardano.Node.Configuration.POM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Configuration.POM.html#NodeConfiguration"><span class="hs-identifier">NodeConfiguration</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>                   </span><span class="annot"><a href="Cardano.Node.Configuration.POM.html#PartialNodeConfiguration"><span class="hs-identifier">PartialNodeConfiguration</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.POM.html#SomeNetworkP2PMode"><span class="hs-identifier">SomeNetworkP2PMode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.POM.html#TimeoutOverride"><span class="hs-identifier">TimeoutOverride</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>                   </span><span class="annot"><a href="Cardano.Node.Configuration.POM.html#defaultPartialNodeConfiguration"><span class="hs-identifier">defaultPartialNodeConfiguration</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.POM.html#makeNodeConfiguration"><span class="hs-identifier">makeNodeConfiguration</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.POM.html#parseNodeConfigurationFP"><span class="hs-identifier">parseNodeConfigurationFP</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.POM.html#getForkPolicy"><span class="hs-identifier">getForkPolicy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.Configuration.Socket.html"><span class="hs-identifier">Cardano.Node.Configuration.Socket</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Configuration.Socket.html#SocketOrSocketInfo%27"><span class="hs-identifier">SocketOrSocketInfo'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>                   </span><span class="annot"><a href="Cardano.Node.Configuration.Socket.html#gatherConfiguredSockets"><span class="hs-identifier">gatherConfiguredSockets</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Socket.html#getSocketOrSocketInfoAddr"><span class="hs-identifier">getSocketOrSocketInfoAddr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Topology.html"><span class="hs-identifier">Cardano.Node.Configuration.Topology</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TopologyNonP2P</span></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.Configuration.TopologyP2P.html"><span class="hs-identifier">Cardano.Node.Configuration.TopologyP2P</span></a></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.TopologyP2P.html"><span class="hs-identifier">Cardano.Node.Configuration.TopologyP2P</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TopologyP2P</span></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.Handlers.Shutdown.html"><span class="hs-identifier">Cardano.Node.Handlers.Shutdown</span></a></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.Protocol.html"><span class="hs-identifier">Cardano.Node.Protocol</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Protocol.html#ProtocolInstantiationError"><span class="hs-identifier">ProtocolInstantiationError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Node.Protocol.html#mkConsensusProtocol"><span class="hs-identifier">mkConsensusProtocol</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.Protocol.Byron.html"><span class="hs-identifier">Cardano.Node.Protocol.Byron</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Protocol.Byron.html#ByronProtocolInstantiationError"><span class="hs-identifier">ByronProtocolInstantiationError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Protocol.Byron.html#CredentialsError"><span class="hs-identifier">CredentialsError</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.Protocol.Cardano.html"><span class="hs-identifier">Cardano.Node.Protocol.Cardano</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Protocol.Cardano.html#CardanoProtocolInstantiationError"><span class="hs-identifier">CardanoProtocolInstantiationError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.Protocol.Shelley.html"><span class="hs-identifier">Cardano.Node.Protocol.Shelley</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Protocol.Shelley.html#PraosLeaderCredentialsError"><span class="hs-identifier">PraosLeaderCredentialsError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>                   </span><span class="annot"><a href="Cardano.Node.Protocol.Shelley.html#ShelleyProtocolInstantiationError"><span class="hs-identifier">ShelleyProtocolInstantiationError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Protocol.Shelley.html#PraosLeaderCredentialsError"><span class="hs-identifier">PraosLeaderCredentialsError</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.Protocol.Types.html"><span class="hs-identifier">Cardano.Node.Protocol.Types</span></a></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.Queries.html"><span class="hs-identifier">Cardano.Node.Queries</span></a></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.Startup.html"><span class="hs-identifier">Cardano.Node.Startup</span></a></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.TraceConstraints.html"><span class="hs-identifier">Cardano.Node.TraceConstraints</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.TraceConstraints.html#TraceConstraints"><span class="hs-identifier">TraceConstraints</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.Tracing.API.html"><span class="hs-identifier">Cardano.Node.Tracing.API</span></a></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.Tracing.StateRep.html"><span class="hs-identifier">Cardano.Node.Tracing.StateRep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Tracing.StateRep.html#NodeState"><span class="hs-identifier">NodeState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Tracing.StateRep.html#NodeKernelOnline"><span class="hs-identifier">NodeKernelOnline</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.Tracing.Tracers.NodeVersion.html"><span class="hs-identifier">Cardano.Node.Tracing.Tracers.NodeVersion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Tracing.Tracers.NodeVersion.html#getNodeVersion"><span class="hs-identifier">getNodeVersion</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.Tracing.Tracers.Startup.html"><span class="hs-identifier">Cardano.Node.Tracing.Tracers.Startup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Tracing.Tracers.Startup.html#getStartupInfo"><span class="hs-identifier">getStartupInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.Types.html"><span class="hs-identifier">Cardano.Node.Types</span></a></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/s7ry4nagcnlx8zrav5v8zl4d0vdiymxn-cardano-prelude-lib-cardano-prelude-0.2.1.0-haddock-doc/share/doc/cardano-prelude/html/src/Cardano.Prelude.html"><span class="hs-identifier">Cardano.Prelude</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.Exception.html#ExitCode"><span class="hs-identifier">ExitCode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/s7ry4nagcnlx8zrav5v8zl4d0vdiymxn-cardano-prelude-lib-cardano-prelude-0.2.1.0-haddock-doc/share/doc/cardano-prelude/html/src/Cardano.Prelude.Panic.html#FatalError"><span class="hs-identifier">FatalError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/s7ry4nagcnlx8zrav5v8zl4d0vdiymxn-cardano-prelude-lib-cardano-prelude-0.2.1.0-haddock-doc/share/doc/cardano-prelude/html/src/Cardano.Prelude.Bool.html#bool"><span class="hs-identifier">bool</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Type.Equality.html#%3A~%3A"><span class="hs-operator">(:~:)</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-slotting-0.2.0.1-3f1a1be6195f7ae2c0e8ab1d39d95c9a3b1f33b5d873e142b6db55ba4dba848b/share/doc/html/src/Cardano.Slotting.Slot.html"><span class="hs-identifier">Cardano.Slotting.Slot</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-slotting-0.2.0.1-3f1a1be6195f7ae2c0e8ab1d39d95c9a3b1f33b5d873e142b6db55ba4dba848b/share/doc/html/src/Cardano.Slotting.Slot.html#WithOrigin"><span class="hs-identifier">WithOrigin</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Tracing.Config.html"><span class="hs-identifier">Cardano.Tracing.Config</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Config.html#TraceOptions"><span class="hs-identifier">TraceOptions</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#TraceSelection"><span class="hs-identifier">TraceSelection</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Tracing.Tracers.html"><span class="hs-identifier">Cardano.Tracing.Tracers</span></a></span><span>
</span><span id="line-66"></span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-0.27.0.0-004c8b8862bcdf99608d21368eda63ae7ec76430a4bb20826e436605913605d0/share/doc/html/src/Ouroboros.Consensus.Config.html"><span class="hs-identifier">Ouroboros.Consensus.Config</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Consensus</span></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-0.27.0.0-004c8b8862bcdf99608d21368eda63ae7ec76430a4bb20826e436605913605d0/share/doc/html/src/Ouroboros.Consensus.Config.SupportsNode.html"><span class="hs-identifier">Ouroboros.Consensus.Config.SupportsNode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-0.27.0.0-004c8b8862bcdf99608d21368eda63ae7ec76430a4bb20826e436605913605d0/share/doc/html/src/Ouroboros.Consensus.Config.SupportsNode.html#ConfigSupportsNode"><span class="hs-identifier">ConfigSupportsNode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html"><span class="hs-identifier">Ouroboros.Consensus.Node</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-0.27.0.0-004c8b8862bcdf99608d21368eda63ae7ec76430a4bb20826e436605913605d0/share/doc/html/src/Ouroboros.Consensus.Storage.LedgerDB.Snapshots.html#SnapshotPolicyArgs"><span class="hs-identifier">SnapshotPolicyArgs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#NetworkP2PMode"><span class="hs-identifier">NetworkP2PMode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-70"></span><span>                   </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#NodeDatabasePaths"><span class="hs-identifier">NodeDatabasePaths</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#RunNodeArgs"><span class="hs-identifier">RunNodeArgs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#StdRunNodeArgs"><span class="hs-identifier">StdRunNodeArgs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-0.27.0.0-004c8b8862bcdf99608d21368eda63ae7ec76430a4bb20826e436605913605d0/share/doc/html/src/Ouroboros.Consensus.Ledger.SupportsMempool.html"><span class="hs-identifier">Ouroboros.Consensus.Ledger.SupportsMempool</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-0.27.0.0-004c8b8862bcdf99608d21368eda63ae7ec76430a4bb20826e436605913605d0/share/doc/html/src/Ouroboros.Consensus.Ledger.SupportsMempool.html#GenTxId"><span class="hs-identifier">GenTxId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html"><span class="hs-identifier">Ouroboros.Consensus.Node</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#NetworkP2PMode"><span class="hs-identifier">NetworkP2PMode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#RunNodeArgs"><span class="hs-identifier">RunNodeArgs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-73"></span><span>                   </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-0.27.0.0-004c8b8862bcdf99608d21368eda63ae7ec76430a4bb20826e436605913605d0/share/doc/html/src/Ouroboros.Consensus.Storage.LedgerDB.Snapshots.html#SnapshotPolicyArgs"><span class="hs-identifier">SnapshotPolicyArgs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#StdRunNodeArgs"><span class="hs-identifier">StdRunNodeArgs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html"><span class="hs-identifier">Ouroboros.Consensus.Node</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Node</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#NodeDatabasePaths"><span class="hs-identifier">NodeDatabasePaths</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.NodeKernel.html#%24sel%3AgetChainDB%3ANodeKernel"><span class="hs-identifier">getChainDB</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#run"><span class="hs-identifier">run</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.Genesis.html"><span class="hs-identifier">Ouroboros.Consensus.Node.Genesis</span></a></span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-0.27.0.0-004c8b8862bcdf99608d21368eda63ae7ec76430a4bb20826e436605913605d0/share/doc/html/src/Ouroboros.Consensus.Node.NetworkProtocolVersion.html"><span class="hs-identifier">Ouroboros.Consensus.Node.NetworkProtocolVersion</span></a></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-0.27.0.0-004c8b8862bcdf99608d21368eda63ae7ec76430a4bb20826e436605913605d0/share/doc/html/src/Ouroboros.Consensus.Node.ProtocolInfo.html"><span class="hs-identifier">Ouroboros.Consensus.Node.ProtocolInfo</span></a></span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.Tracers.html"><span class="hs-identifier">Ouroboros.Consensus.Node.Tracers</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Consensus</span></span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-0.27.0.0-004c8b8862bcdf99608d21368eda63ae7ec76430a4bb20826e436605913605d0/share/doc/html/src/Ouroboros.Consensus.Storage.LedgerDB.Args.html"><span class="hs-identifier">Ouroboros.Consensus.Storage.LedgerDB.Args</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LDBArgs</span></span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-0.27.0.0-004c8b8862bcdf99608d21368eda63ae7ec76430a4bb20826e436605913605d0/share/doc/html/src/Ouroboros.Consensus.Storage.LedgerDB.V2.Args.html"><span class="hs-identifier">Ouroboros.Consensus.Storage.LedgerDB.V2.Args</span></a></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-0.27.0.0-004c8b8862bcdf99608d21368eda63ae7ec76430a4bb20826e436605913605d0/share/doc/html/src/Ouroboros.Consensus.Util.Args.html"><span class="hs-identifier">Ouroboros.Consensus.Util.Args</span></a></span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-0.27.0.0-004c8b8862bcdf99608d21368eda63ae7ec76430a4bb20826e436605913605d0/share/doc/html/src/Ouroboros.Consensus.Util.Orphans.html"><span class="hs-identifier">Ouroboros.Consensus.Util.Orphans</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Cardano.Network.PeerSelection.Bootstrap.html"><span class="hs-identifier">Cardano.Network.PeerSelection.Bootstrap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Cardano.Network.PeerSelection.Bootstrap.html#UseBootstrapPeers"><span class="hs-identifier">UseBootstrapPeers</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Cardano.Network.PeerSelection.PeerTrustable.html"><span class="hs-identifier">Cardano.Network.PeerSelection.PeerTrustable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Cardano.Network.PeerSelection.PeerTrustable.html#PeerTrustable"><span class="hs-identifier">PeerTrustable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Cardano.Network.Types.html"><span class="hs-identifier">Cardano.Network.Types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Cardano.Network.Types.html#NumberOfBigLedgerPeers"><span class="hs-identifier">NumberOfBigLedgerPeers</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Cardano.Network.ConsensusMode.html"><span class="hs-identifier">Cardano.Network.ConsensusMode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Cardano.Network.ConsensusMode.html#ConsensusMode"><span class="hs-identifier">ConsensusMode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.PeerSelection.PeerSelectionActions.html"><span class="hs-identifier">Ouroboros.Cardano.PeerSelection.PeerSelectionActions</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Cardano</span></span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.PeerSelection.Churn.html"><span class="hs-identifier">Ouroboros.Cardano.PeerSelection.Churn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.PeerSelection.Churn.html#peerChurnGovernor"><span class="hs-identifier">peerChurnGovernor</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.Types.html"><span class="hs-identifier">Ouroboros.Cardano.Network.Types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.Types.html#ChurnMode"><span class="hs-identifier">ChurnMode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.Diffusion.Handlers.html"><span class="hs-identifier">Ouroboros.Cardano.Network.Diffusion.Handlers</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.Diffusion.Handlers.html#sigUSR1Handler"><span class="hs-identifier">sigUSR1Handler</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.ArgumentsExtra.html"><span class="hs-identifier">Ouroboros.Cardano.Network.ArgumentsExtra</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Cardano</span></span><span>
</span><span id="line-93"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PeerSelection.Governor.PeerSelectionActions.html"><span class="hs-identifier">Ouroboros.Cardano.Network.PeerSelection.Governor.PeerSelectionActions</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.PeerSelection</span></span><span>
</span><span id="line-94"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PeerSelection.Governor.PeerSelectionState.html"><span class="hs-identifier">Ouroboros.Cardano.Network.PeerSelection.Governor.PeerSelectionState</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.PeerSelection</span></span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PeerSelection.Governor.PeerSelectionState.html"><span class="hs-identifier">Ouroboros.Cardano.Network.PeerSelection.Governor.PeerSelectionState</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CPST</span></span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PeerSelection.Governor.Types.html"><span class="hs-identifier">Ouroboros.Cardano.Network.PeerSelection.Governor.Types</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Cardano</span></span><span>
</span><span id="line-97"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PeerSelection.Governor.Types.html"><span class="hs-identifier">Ouroboros.Cardano.Network.PeerSelection.Governor.Types</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CPSV</span></span><span>
</span><span id="line-98"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PublicRootPeers.html"><span class="hs-identifier">Ouroboros.Cardano.Network.PublicRootPeers</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.PublicRoots</span></span><span>
</span><span id="line-99"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PeerSelection.Governor.PeerSelectionActions.html"><span class="hs-identifier">Ouroboros.Cardano.Network.PeerSelection.Governor.PeerSelectionActions</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.PeerSelection</span></span><span>
</span><span id="line-100"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.LedgerPeerConsensusInterface.html"><span class="hs-identifier">Ouroboros.Cardano.Network.LedgerPeerConsensusInterface</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Cardano</span></span><span>
</span><span id="line-101"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.PeerSelection.PeerSelectionActions.html"><span class="hs-identifier">Ouroboros.Cardano.PeerSelection.PeerSelectionActions</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Cardano</span></span><span>
</span><span id="line-102"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PeerSelection.Churn.ExtraArguments.html"><span class="hs-identifier">Ouroboros.Cardano.Network.PeerSelection.Churn.ExtraArguments</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Churn</span></span><span>
</span><span id="line-103"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.Diffusion.Configuration.html"><span class="hs-identifier">Ouroboros.Cardano.Network.Diffusion.Configuration</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Configuration</span></span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.BlockFetch.html"><span class="hs-identifier">Ouroboros.Network.BlockFetch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.BlockFetch.ConsensusInterface.html#FetchMode"><span class="hs-identifier">FetchMode</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-106"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.html"><span class="hs-identifier">Ouroboros.Network.Diffusion</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Diffusion</span></span><span>
</span><span id="line-107"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.Common.html"><span class="hs-identifier">Ouroboros.Network.Diffusion.Common</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Diffusion</span></span><span>
</span><span id="line-108"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.Configuration.html"><span class="hs-identifier">Ouroboros.Network.Diffusion.Configuration</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Configuration</span></span><span>
</span><span id="line-109"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.NonP2P.html"><span class="hs-identifier">Ouroboros.Network.Diffusion.NonP2P</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NonP2P</span></span><span>
</span><span id="line-110"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.P2P.html"><span class="hs-identifier">Ouroboros.Network.Diffusion.P2P</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P2P</span></span><span>
</span><span id="line-111"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-framework-0.18.0.2-e5e675f5f8bd9f2a1e99040ff85ace8bb30006cb1118a4f0531fde62ebeff5fc/share/doc/html/src/Ouroboros.Network.Mux.html"><span class="hs-identifier">Ouroboros.Network.Mux</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-framework-0.18.0.2-e5e675f5f8bd9f2a1e99040ff85ace8bb30006cb1118a4f0531fde62ebeff5fc/share/doc/html/src/Ouroboros.Network.Mux.html#noBindForkPolicy"><span class="hs-identifier">noBindForkPolicy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-framework-0.18.0.2-e5e675f5f8bd9f2a1e99040ff85ace8bb30006cb1118a4f0531fde62ebeff5fc/share/doc/html/src/Ouroboros.Network.Mux.html#responderForkPolicy"><span class="hs-identifier">responderForkPolicy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-framework-0.18.0.2-e5e675f5f8bd9f2a1e99040ff85ace8bb30006cb1118a4f0531fde62ebeff5fc/share/doc/html/src/Ouroboros.Network.Mux.html#ForkPolicy"><span class="hs-identifier">ForkPolicy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-112"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.NodeToClient.html"><span class="hs-identifier">Ouroboros.Network.NodeToClient</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-framework-0.18.0.2-e5e675f5f8bd9f2a1e99040ff85ace8bb30006cb1118a4f0531fde62ebeff5fc/share/doc/html/src/Ouroboros.Network.Snocket.html#LocalAddress"><span class="hs-identifier">LocalAddress</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-framework-0.18.0.2-e5e675f5f8bd9f2a1e99040ff85ace8bb30006cb1118a4f0531fde62ebeff5fc/share/doc/html/src/Ouroboros.Network.Snocket.html#LocalSocket"><span class="hs-identifier">LocalSocket</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-113"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.NodeToNode.html"><span class="hs-identifier">Ouroboros.Network.NodeToNode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-framework-0.18.0.2-e5e675f5f8bd9f2a1e99040ff85ace8bb30006cb1118a4f0531fde62ebeff5fc/share/doc/html/src/Ouroboros.Network.Server.RateLimiting.html#AcceptedConnectionsLimit"><span class="hs-identifier">AcceptedConnectionsLimit</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-framework-0.18.0.2-e5e675f5f8bd9f2a1e99040ff85ace8bb30006cb1118a4f0531fde62ebeff5fc/share/doc/html/src/Ouroboros.Network.ConnectionId.html#ConnectionId"><span class="hs-identifier">ConnectionId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-114"></span><span>                   </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.Governor.Types.html#PeerSelectionTargets"><span class="hs-identifier">PeerSelectionTargets</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.NodeToNode.html#RemoteAddress"><span class="hs-identifier">RemoteAddress</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-115"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.Governor.Types.html"><span class="hs-identifier">Ouroboros.Network.PeerSelection.Governor.Types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.Governor.Types.html#BootstrapPeersCriticalTimeoutError"><span class="hs-identifier">BootstrapPeersCriticalTimeoutError</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-116"></span><span>                   </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.Governor.Types.html#PeerSelectionState"><span class="hs-identifier">PeerSelectionState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.Governor.Types.html#PeerSelectionTargets"><span class="hs-identifier">PeerSelectionTargets</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.Governor.Types.html#PublicPeerSelectionState"><span class="hs-identifier">PublicPeerSelectionState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-117"></span><span>                   </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.Governor.Types.html#makePublicPeerSelectionStateVar"><span class="hs-identifier">makePublicPeerSelectionStateVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-118"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.LedgerPeers.Type.html"><span class="hs-identifier">Ouroboros.Network.PeerSelection.LedgerPeers.Type</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.LedgerPeers.Type.html#AfterSlot"><span class="hs-identifier">AfterSlot</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-119"></span><span>                   </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.LedgerPeers.Type.html#LedgerPeerSnapshot"><span class="hs-identifier">LedgerPeerSnapshot</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.LedgerPeers.Type.html#UseLedgerPeers"><span class="hs-identifier">UseLedgerPeers</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-120"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.PeerSharing.html"><span class="hs-identifier">Ouroboros.Network.PeerSelection.PeerSharing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.PeerSharing.html#PeerSharing"><span class="hs-identifier">PeerSharing</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-121"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.RelayAccessPoint.html"><span class="hs-identifier">Ouroboros.Network.PeerSelection.RelayAccessPoint</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.RelayAccessPoint.html#RelayAccessPoint"><span class="hs-identifier">RelayAccessPoint</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-122"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.RootPeersDNS.PublicRootPeers.html"><span class="hs-identifier">Ouroboros.Network.PeerSelection.RootPeersDNS.PublicRootPeers</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.RootPeersDNS.PublicRootPeers.html#TracePublicRootPeers"><span class="hs-identifier">TracePublicRootPeers</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-123"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.State.LocalRootPeers.html"><span class="hs-identifier">Ouroboros.Network.PeerSelection.State.LocalRootPeers</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.State.LocalRootPeers.html#HotValency"><span class="hs-identifier">HotValency</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.State.LocalRootPeers.html#LocalRootConfig"><span class="hs-identifier">LocalRootConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.State.LocalRootPeers.html#WarmValency"><span class="hs-identifier">WarmValency</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-124"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-protocols-0.14.0.2-1a26fdf733a5961ac0970a492a7cf0333c9ab1fde6617e1a008d914f163716a6/share/doc/html/src/Ouroboros.Network.Protocol.ChainSync.Codec.html"><span class="hs-identifier">Ouroboros.Network.Protocol.ChainSync.Codec</span></a></span><span>
</span><span id="line-125"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-framework-0.18.0.2-e5e675f5f8bd9f2a1e99040ff85ace8bb30006cb1118a4f0531fde62ebeff5fc/share/doc/html/src/Ouroboros.Network.Subscription.html"><span class="hs-identifier">Ouroboros.Network.Subscription</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-framework-0.18.0.2-e5e675f5f8bd9f2a1e99040ff85ace8bb30006cb1118a4f0531fde62ebeff5fc/share/doc/html/src/Ouroboros.Network.Subscription.Dns.html#DnsSubscriptionTarget"><span class="hs-identifier">DnsSubscriptionTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-126"></span><span>                   </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-framework-0.18.0.2-e5e675f5f8bd9f2a1e99040ff85ace8bb30006cb1118a4f0531fde62ebeff5fc/share/doc/html/src/Ouroboros.Network.Subscription.Ip.html#IPSubscriptionTarget"><span class="hs-identifier">IPSubscriptionTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-127"></span><span>
</span><span id="line-128"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Applicative.html"><span class="hs-identifier">Control.Applicative</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#empty"><span class="hs-identifier">empty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-129"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Concurrent.html"><span class="hs-identifier">Control.Concurrent</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Conc.Sync.html#killThread"><span class="hs-identifier">killThread</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Conc.Sync.html#mkWeakThreadId"><span class="hs-identifier">mkWeakThreadId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Conc.Sync.html#myThreadId"><span class="hs-identifier">myThreadId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Conc.Sync.html#getNumCapabilities"><span class="hs-identifier">getNumCapabilities</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.html"><span class="hs-identifier">Control.Concurrent.Class.MonadSTM.Strict</span></a></span><span>
</span><span id="line-131"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Exception.html"><span class="hs-identifier">Control.Exception</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Exception.Base.html#try"><span class="hs-identifier">try</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Exception.Type.html#Exception"><span class="hs-identifier">Exception</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.Exception.html#IOException"><span class="hs-identifier">IOException</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Exception.html"><span class="hs-identifier">Control.Exception</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Exception</span></span><span>
</span><span id="line-133"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.html"><span class="hs-identifier">Control.Monad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Traversable.html#forM"><span class="hs-identifier">forM</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#forM_"><span class="hs-identifier">forM_</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.html#unless"><span class="hs-identifier">unless</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Functor.html#void"><span class="hs-identifier">void</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#when"><span class="hs-identifier">when</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#join"><span class="hs-identifier">join</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/39y1cwp74gv435x8ywpmq90n9jlfm1ml-io-classes-lib-io-classes-1.5.0.0-haddock-doc/share/doc/io-classes/html/src/Control.Monad.Class.MonadThrow.html"><span class="hs-identifier">Control.Monad.Class.MonadThrow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/39y1cwp74gv435x8ywpmq90n9jlfm1ml-io-classes-lib-io-classes-1.5.0.0-haddock-doc/share/doc/io-classes/html/src/Control.Monad.Class.MonadThrow.html#MonadThrow"><span class="hs-identifier">MonadThrow</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html"><span class="hs-identifier">Control.Monad.IO.Class</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier">MonadIO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-136"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Except.html"><span class="hs-identifier">Control.Monad.Trans.Except</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier">ExceptT</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Except.html#runExceptT"><span class="hs-identifier">runExceptT</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-137"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/1b4my2m47g921s9na6vjrjsbp0aa7pkc-transformers-except-lib-transformers-except-0.1.4-haddock-doc/share/doc/transformers-except/html/src/Control.Monad.Trans.Except.Extra.html"><span class="hs-identifier">Control.Monad.Trans.Except.Extra</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/1b4my2m47g921s9na6vjrjsbp0aa7pkc-transformers-except-lib-transformers-except-0.1.4-haddock-doc/share/doc/transformers-except/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier">left</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/1b4my2m47g921s9na6vjrjsbp0aa7pkc-transformers-except-lib-transformers-except-0.1.4-haddock-doc/share/doc/transformers-except/html/src/Control.Monad.Trans.Except.Extra.html#hushM"><span class="hs-identifier">hushM</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Maybe.html"><span class="hs-identifier">Control.Monad.Trans.Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Maybe.html#MaybeT"><span class="hs-identifier">MaybeT</span></a></span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Maybe.html#runMaybeT"><span class="hs-identifier">runMaybeT</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Maybe.html#MaybeT"><span class="hs-identifier">MaybeT</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Maybe.html#hoistMaybe"><span class="hs-identifier">hoistMaybe</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-139"></span><span class="hs-keyword">import</span><span>           </span><span class="hs-string">&quot;contra-tracer&quot;</span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-node/cardano-node/dist-newstyle/build/x86_64-linux/ghc-9.6.6/trace-dispatcher-2.10.0/doc/html/trace-dispatcher/src/Control.Tracer.html"><span class="hs-identifier">Control.Tracer</span></a></span><span>
</span><span id="line-140"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Bits.html"><span class="hs-identifier">Data.Bits</span></a></span><span>
</span><span id="line-141"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html"><span class="hs-identifier">Data.Either</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#partitionEithers"><span class="hs-identifier">partitionEithers</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-142"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/la27cjpkzj2bscz5id9ls70fyxww0z5n-iproute-lib-iproute-1.7.15-haddock-doc/share/doc/iproute/html/src/Data.IP.html"><span class="hs-identifier">Data.IP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/la27cjpkzj2bscz5id9ls70fyxww0z5n-iproute-lib-iproute-1.7.15-haddock-doc/share/doc/iproute/html/src/Data.IP.Addr.html#toSockAddr"><span class="hs-identifier">toSockAddr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Strict.html"><span class="hs-identifier">Data.Map.Strict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier">Map</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Strict.html"><span class="hs-identifier">Data.Map.Strict</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-145"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Maybe.html"><span class="hs-identifier">Data.Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Maybe.html#catMaybes"><span class="hs-identifier">catMaybes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Maybe.html#fromMaybe"><span class="hs-identifier">fromMaybe</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Maybe.html#mapMaybe"><span class="hs-identifier">mapMaybe</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Monoid.html"><span class="hs-identifier">Data.Monoid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Monoid.html#Last"><span class="hs-identifier">Last</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Proxy.html"><span class="hs-identifier">Data.Proxy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Proxy.html#Proxy"><span class="hs-identifier">Proxy</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-148"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Set.html"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-149"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/jwkimmqn2p7jxcipc4ckhwywkbsjvvab-sop-core-lib-sop-core-0.5.0.2-haddock-doc/share/doc/sop-core/html/src/Data.SOP.Dict.html"><span class="hs-identifier">Data.SOP.Dict</span></a></span><span>
</span><span id="line-150"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.html"><span class="hs-identifier">Data.Text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Internal.html#Text"><span class="hs-identifier">Text</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.html#breakOn"><span class="hs-identifier">breakOn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Internal.html#pack"><span class="hs-identifier">pack</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-151"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.html"><span class="hs-identifier">Data.Text</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Text</span></span><span>
</span><span id="line-152"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Encoding.html"><span class="hs-identifier">Data.Text.Encoding</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Text</span></span><span>
</span><span id="line-153"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.IO.html"><span class="hs-identifier">Data.Text.IO</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Text</span></span><span>
</span><span id="line-154"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/time-1.12.2/src/Data.Time.Clock.html"><span class="hs-identifier">Data.Time.Clock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/time-1.12.2/src/Data.Time.Clock.POSIX.html#getCurrentTime"><span class="hs-identifier">getCurrentTime</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/time-1.12.2/src/Data.Time.Clock.POSIX.html"><span class="hs-identifier">Data.Time.Clock.POSIX</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/time-1.12.2/src/Data.Time.Clock.POSIX.html#utcTimeToPOSIXSeconds"><span class="hs-identifier">utcTimeToPOSIXSeconds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-156"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Version.html"><span class="hs-identifier">Data.Version</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Version.html#showVersion"><span class="hs-identifier">showVersion</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-157"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/izgaibwy2l9di17384q198h55057lg63-dns-lib-dns-4.2.0-haddock-doc/share/doc/dns/html/src/Network.DNS.html"><span class="hs-identifier">Network.DNS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Resolver</span></span><span class="hs-special">)</span><span>
</span><span id="line-158"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Network.HostName</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">getHostName</span></span><span class="hs-special">)</span><span>
</span><span id="line-159"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/f0p0xzsqxbckmc8cbp9giz9ys6pi14wq-network-lib-network-3.2.7.0-haddock-doc/share/doc/network/html/src/Network.Socket.html"><span class="hs-identifier">Network.Socket</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/f0p0xzsqxbckmc8cbp9giz9ys6pi14wq-network-lib-network-3.2.7.0-haddock-doc/share/doc/network/html/src/Network.Socket.Types.html#Socket"><span class="hs-identifier">Socket</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-160"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/directory-1.3.8.5/src/System.Directory.html"><span class="hs-identifier">System.Directory</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/directory-1.3.8.5/src/System.Directory.html#canonicalizePath"><span class="hs-identifier">canonicalizePath</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/directory-1.3.8.5/src/System.Directory.html#createDirectoryIfMissing"><span class="hs-identifier">createDirectoryIfMissing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/directory-1.3.8.5/src/System.Directory.html#makeAbsolute"><span class="hs-identifier">makeAbsolute</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/System.Environment.html"><span class="hs-identifier">System.Environment</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/System.Environment.html#lookupEnv"><span class="hs-identifier">lookupEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-162"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/System.IO.html"><span class="hs-identifier">System.IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.Handle.Text.html#hPutStrLn"><span class="hs-identifier">hPutStrLn</span></a></span><span class="hs-special">)</span><span class="hs-cpp">
#ifdef UNIX
</span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Weak.html"><span class="hs-identifier">GHC.Weak</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Weak.html#deRefWeak"><span class="hs-identifier">deRefWeak</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-165"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/unix-2.8.4.0/src/System.Posix.Files.html"><span class="hs-identifier">System.Posix.Files</span></a></span><span>
</span><span id="line-166"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/unix-2.8.4.0/src/System.Posix.Signals.html"><span class="hs-identifier">System.Posix.Signals</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Signals</span></span><span>
</span><span id="line-167"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/System.Posix.Types.html"><span class="hs-identifier">System.Posix.Types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/System.Posix.Types.html#FileMode"><span class="hs-identifier">FileMode</span></a></span><span class="hs-special">)</span><span class="hs-cpp">
#else
</span><span class="hs-keyword">import</span><span>           </span><span class="hs-identifier">System.Win32.File</span><span class="hs-cpp">
#endif
</span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Paths_cardano_node.html"><span class="hs-identifier">Paths_cardano_node</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Paths_cardano_node.html#version"><span class="hs-identifier">version</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-172"></span><span>
</span><span id="line-173"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Paths_cardano_node.html"><span class="hs-identifier">Paths_cardano_node</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Paths_cardano_node.html#version"><span class="hs-identifier">version</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-174"></span><span>
</span><span id="line-175"></span><span class="hs-comment">{- HLINT ignore &quot;Fuse concatMap/map&quot; -}</span><span>
</span><span id="line-176"></span><span class="hs-comment">{- HLINT ignore &quot;Redundant &lt;$&gt;&quot; -}</span><span>
</span><span id="line-177"></span><span class="hs-comment">{- HLINT ignore &quot;Use fewer imports&quot; -}</span><span>
</span><span id="line-178"></span><span>
</span><span id="line-179"></span><span class="annot"><a href="Cardano.Node.Run.html#runNode"><span class="hs-identifier hs-type">runNode</span></a></span><span>
</span><span id="line-180"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.POM.html#PartialNodeConfiguration"><span class="hs-identifier hs-type">PartialNodeConfiguration</span></a></span><span>
</span><span id="line-181"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-182"></span><span id="runNode"><span class="annot"><span class="annottext">runNode :: PartialNodeConfiguration -&gt; IO ()
</span><a href="Cardano.Node.Run.html#runNode"><span class="hs-identifier hs-var hs-var">runNode</span></a></span></span><span> </span><span id="local-6989586621681944974"><span class="annot"><span class="annottext">PartialNodeConfiguration
</span><a href="#local-6989586621681944974"><span class="hs-identifier hs-var">cmdPc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-183"></span><span>    </span><span class="annot"><span class="annottext">IO ()
</span><a href="Cardano.Node.Run.html#installSigTermHandler"><span class="hs-identifier hs-var">installSigTermHandler</span></a></span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span>    </span><span class="annot"><span class="annottext">IO ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-crypto-class-2.2.3.0-040fc8d725c5dba3203f5fdd10fab903feccfa7eadf608eb84b7e061f3cba2df/share/doc/html/src/Cardano.Crypto.Init.html#cryptoInit"><span class="hs-identifier hs-var">Crypto.cryptoInit</span></a></span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span>    </span><span id="local-6989586621681944977"><span class="annot"><span class="annottext">PartialNodeConfiguration
</span><a href="#local-6989586621681944977"><span class="hs-identifier hs-var">configYamlPc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe ConfigYamlFilePath -&gt; IO PartialNodeConfiguration
</span><a href="Cardano.Node.Configuration.POM.html#parseNodeConfigurationFP"><span class="hs-identifier hs-var">parseNodeConfigurationFP</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe ConfigYamlFilePath -&gt; IO PartialNodeConfiguration)
-&gt; (Last ConfigYamlFilePath -&gt; Maybe ConfigYamlFilePath)
-&gt; Last ConfigYamlFilePath
-&gt; IO PartialNodeConfiguration
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Last ConfigYamlFilePath -&gt; Maybe ConfigYamlFilePath
forall a. Last a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Monoid.html#getLast"><span class="hs-identifier hs-var">getLast</span></a></span><span> </span><span class="annot"><span class="annottext">(Last ConfigYamlFilePath -&gt; IO PartialNodeConfiguration)
-&gt; Last ConfigYamlFilePath -&gt; IO PartialNodeConfiguration
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PartialNodeConfiguration -&gt; Last ConfigYamlFilePath
</span><a href="Cardano.Node.Configuration.POM.html#pncConfigFile"><span class="hs-identifier hs-var">pncConfigFile</span></a></span><span> </span><span class="annot"><span class="annottext">PartialNodeConfiguration
</span><a href="#local-6989586621681944974"><span class="hs-identifier hs-var">cmdPc</span></a></span><span>
</span><span id="line-188"></span><span>
</span><span id="line-189"></span><span>    </span><span id="local-6989586621681944981"><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681944981"><span class="hs-identifier hs-var">nc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">PartialNodeConfiguration -&gt; Either String NodeConfiguration
</span><a href="Cardano.Node.Configuration.POM.html#makeNodeConfiguration"><span class="hs-identifier hs-var">makeNodeConfiguration</span></a></span><span> </span><span class="annot"><span class="annottext">(PartialNodeConfiguration -&gt; Either String NodeConfiguration)
-&gt; PartialNodeConfiguration -&gt; Either String NodeConfiguration
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PartialNodeConfiguration
</span><a href="Cardano.Node.Configuration.POM.html#defaultPartialNodeConfiguration"><span class="hs-identifier hs-var">defaultPartialNodeConfiguration</span></a></span><span> </span><span class="annot"><span class="annottext">PartialNodeConfiguration
-&gt; PartialNodeConfiguration -&gt; PartialNodeConfiguration
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">PartialNodeConfiguration
</span><a href="#local-6989586621681944977"><span class="hs-identifier hs-var">configYamlPc</span></a></span><span> </span><span class="annot"><span class="annottext">PartialNodeConfiguration
-&gt; PartialNodeConfiguration -&gt; PartialNodeConfiguration
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">PartialNodeConfiguration
</span><a href="#local-6989586621681944974"><span class="hs-identifier hs-var">cmdPc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-190"></span><span>            </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621681944982"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681944982"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO NodeConfiguration
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO NodeConfiguration) -&gt; String -&gt; IO NodeConfiguration
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Error in creating the NodeConfiguration: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681944982"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-191"></span><span>            </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621681944984"><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681944984"><span class="hs-identifier hs-var">nc'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; IO NodeConfiguration
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681944984"><span class="hs-identifier hs-var">nc'</span></a></span><span>
</span><span id="line-192"></span><span>
</span><span id="line-193"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/System.IO.html#putStrLn"><span class="hs-identifier hs-var">putStrLn</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO ()) -&gt; String -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Node configuration: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681944981"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-194"></span><span>
</span><span id="line-195"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; ProtocolFilepaths
</span><a href="Cardano.Node.Configuration.POM.html#ncProtocolFiles"><span class="hs-identifier hs-var">ncProtocolFiles</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681944981"><span class="hs-identifier hs-var">nc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-196"></span><span>      </span><span class="annot"><a href="Cardano.Node.Types.html#ProtocolFilepaths"><span class="hs-identifier hs-type">ProtocolFilepaths</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">shelleyVRFFile :: ProtocolFilepaths -&gt; Maybe String
</span><a href="Cardano.Node.Types.html#shelleyVRFFile"><span class="hs-identifier hs-var">shelleyVRFFile</span></a></span><span class="hs-glyph">=</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681944990"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681944990"><span class="hs-identifier hs-var">vrfFp</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-197"></span><span>        </span><span class="annot"><span class="annottext">ExceptT VRFPrivateKeyFilePermissionError IO () -&gt; IO ()
forall e a. Exception e =&gt; ExceptT e IO a -&gt; IO a
</span><a href="Cardano.Node.Run.html#runThrowExceptT"><span class="hs-identifier hs-var">runThrowExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT VRFPrivateKeyFilePermissionError IO () -&gt; IO ())
-&gt; ExceptT VRFPrivateKeyFilePermissionError IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-198"></span><span>          </span><span class="annot"><span class="annottext">Tracer IO String
-&gt; File Any Any -&gt; ExceptT VRFPrivateKeyFilePermissionError IO ()
forall content (direction :: FileDirection).
Tracer IO String
-&gt; File content direction
-&gt; ExceptT VRFPrivateKeyFilePermissionError IO ()
</span><a href="Cardano.Node.Run.html#checkVRFFilePermissions"><span class="hs-identifier hs-var">checkVRFFilePermissions</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO String
forall (m :: * -&gt; *). MonadIO m =&gt; Tracer m String
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#stdoutTracer"><span class="hs-identifier hs-var">stdoutTracer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; File Any Any
forall content (direction :: FileDirection).
String -&gt; File content direction
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-api-10.18.0.0-cf96680f7a5f126623afc107f46c4390ef848488275422e58a8da147b9415623/share/doc/html/src/Cardano.Api.IO.Internal.Base.html#File"><span class="hs-identifier hs-var">File</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681944990"><span class="hs-identifier hs-var">vrfFp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-199"></span><span>      </span><span class="annot"><span class="annottext">ProtocolFilepaths
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-200"></span><span>
</span><span id="line-201"></span><span>    </span><span id="local-6989586621681944994"><span class="annot"><span class="annottext">SomeConsensusProtocol
</span><a href="#local-6989586621681944994"><span class="hs-identifier hs-var">consensusProtocol</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-202"></span><span>      </span><span class="annot"><span class="annottext">ExceptT ProtocolInstantiationError IO SomeConsensusProtocol
-&gt; IO SomeConsensusProtocol
forall e a. Exception e =&gt; ExceptT e IO a -&gt; IO a
</span><a href="Cardano.Node.Run.html#runThrowExceptT"><span class="hs-identifier hs-var">runThrowExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT ProtocolInstantiationError IO SomeConsensusProtocol
 -&gt; IO SomeConsensusProtocol)
-&gt; ExceptT ProtocolInstantiationError IO SomeConsensusProtocol
-&gt; IO SomeConsensusProtocol
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-203"></span><span>        </span><span class="annot"><span class="annottext">NodeProtocolConfiguration
-&gt; Maybe ProtocolFilepaths
-&gt; ExceptT ProtocolInstantiationError IO SomeConsensusProtocol
</span><a href="Cardano.Node.Protocol.html#mkConsensusProtocol"><span class="hs-identifier hs-var">mkConsensusProtocol</span></a></span><span>
</span><span id="line-204"></span><span>         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NodeConfiguration -&gt; NodeProtocolConfiguration
</span><a href="Cardano.Node.Configuration.POM.html#ncProtocolConfig"><span class="hs-identifier hs-var">ncProtocolConfig</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681944981"><span class="hs-identifier hs-var">nc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-205"></span><span>         </span><span class="hs-comment">-- TODO: Convert ncProtocolFiles to Maybe as relay nodes</span><span>
</span><span id="line-206"></span><span>         </span><span class="hs-comment">-- don't need these.</span><span>
</span><span id="line-207"></span><span>         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtocolFilepaths -&gt; Maybe ProtocolFilepaths
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(ProtocolFilepaths -&gt; Maybe ProtocolFilepaths)
-&gt; ProtocolFilepaths -&gt; Maybe ProtocolFilepaths
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; ProtocolFilepaths
</span><a href="Cardano.Node.Configuration.POM.html#ncProtocolFiles"><span class="hs-identifier hs-var">ncProtocolFiles</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681944981"><span class="hs-identifier hs-var">nc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span>    </span><span class="annot"><span class="annottext">PartialNodeConfiguration
-&gt; NodeConfiguration -&gt; SomeConsensusProtocol -&gt; IO ()
</span><a href="Cardano.Node.Run.html#handleNodeWithTracers"><span class="hs-identifier hs-var">handleNodeWithTracers</span></a></span><span> </span><span class="annot"><span class="annottext">PartialNodeConfiguration
</span><a href="#local-6989586621681944974"><span class="hs-identifier hs-var">cmdPc</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681944981"><span class="hs-identifier hs-var">nc</span></a></span><span> </span><span class="annot"><span class="annottext">SomeConsensusProtocol
</span><a href="#local-6989586621681944994"><span class="hs-identifier hs-var">consensusProtocol</span></a></span><span>
</span><span id="line-210"></span><span>
</span><span id="line-211"></span><span id="local-6989586621681944098"><span id="local-6989586621681944099"><span class="annot"><a href="Cardano.Node.Run.html#runThrowExceptT"><span class="hs-identifier hs-type">runThrowExceptT</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Exception.Type.html#Exception"><span class="hs-identifier hs-type">Exception</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944098"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944098"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944099"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944099"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-212"></span><span id="runThrowExceptT"><span class="annot"><span class="annottext">runThrowExceptT :: forall e a. Exception e =&gt; ExceptT e IO a -&gt; IO a
</span><a href="Cardano.Node.Run.html#runThrowExceptT"><span class="hs-identifier hs-var hs-var">runThrowExceptT</span></a></span></span><span> </span><span id="local-6989586621681945001"><span class="annot"><span class="annottext">ExceptT e IO a
</span><a href="#local-6989586621681945001"><span class="hs-identifier hs-var">act</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExceptT e IO a -&gt; IO (Either e a)
forall e (m :: * -&gt; *) a. ExceptT e m a -&gt; m (Either e a)
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Except.html#runExceptT"><span class="hs-identifier hs-var">runExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">ExceptT e IO a
</span><a href="#local-6989586621681945001"><span class="hs-identifier hs-var">act</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Either e a) -&gt; (Either e a -&gt; IO a) -&gt; IO a
forall a b. IO a -&gt; (a -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">(e -&gt; IO a) -&gt; (a -&gt; IO a) -&gt; Either e a -&gt; IO a
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#either"><span class="hs-identifier hs-var">either</span></a></span><span> </span><span class="annot"><span class="annottext">e -&gt; IO a
forall e a. Exception e =&gt; e -&gt; IO a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#throwIO"><span class="hs-identifier hs-var">Exception.throwIO</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; IO a
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span class="hs-comment">-- | Workaround to ensure that the main thread throws an async exception on</span><span>
</span><span id="line-215"></span><span class="hs-comment">-- receiving a SIGTERM signal.</span><span>
</span><span id="line-216"></span><span class="annot"><a href="Cardano.Node.Run.html#installSigTermHandler"><span class="hs-identifier hs-type">installSigTermHandler</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-217"></span><span id="installSigTermHandler"><span class="annot"><span class="annottext">installSigTermHandler :: IO ()
</span><a href="Cardano.Node.Run.html#installSigTermHandler"><span class="hs-identifier hs-var hs-var">installSigTermHandler</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span class="hs-cpp">
#ifdef UNIX
</span><span>  </span><span class="hs-comment">-- Similar implementation to the RTS's handling of SIGINT (see GHC's</span><span>
</span><span id="line-220"></span><span>  </span><span class="hs-comment">-- https://gitlab.haskell.org/ghc/ghc/-/blob/master/libraries/base/GHC/TopHandler.hs).</span><span>
</span><span id="line-221"></span><span>  </span><span id="local-6989586621681945004"><span class="annot"><span class="annottext">Weak ThreadId
</span><a href="#local-6989586621681945004"><span class="hs-identifier hs-var">runThreadIdWk</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ThreadId -&gt; IO (Weak ThreadId)
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Conc.Sync.html#mkWeakThreadId"><span class="hs-identifier hs-var">mkWeakThreadId</span></a></span><span> </span><span class="annot"><span class="annottext">(ThreadId -&gt; IO (Weak ThreadId))
-&gt; IO ThreadId -&gt; IO (Weak ThreadId)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3D%3C%3C"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">IO ThreadId
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Conc.Sync.html#myThreadId"><span class="hs-identifier hs-var">myThreadId</span></a></span><span>
</span><span id="line-222"></span><span>  </span><span class="annot"><span class="annottext">Handler
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Signal -&gt; Handler -&gt; Maybe SignalSet -&gt; IO Handler
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/unix-2.8.4.0/src/System.Posix.Signals.html#installHandler"><span class="hs-identifier hs-var">Signals.installHandler</span></a></span><span>
</span><span id="line-223"></span><span>    </span><span class="annot"><span class="annottext">Signal
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/unix-2.8.4.0/src/System.Posix.Signals.html#sigTERM"><span class="hs-identifier hs-var">Signals.sigTERM</span></a></span><span>
</span><span id="line-224"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IO () -&gt; Handler
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/unix-2.8.4.0/src/System.Posix.Signals.html#CatchOnce"><span class="hs-identifier hs-var">Signals.CatchOnce</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; Handler) -&gt; IO () -&gt; Handler
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-225"></span><span>      </span><span id="local-6989586621681945009"><span class="annot"><span class="annottext">Maybe ThreadId
</span><a href="#local-6989586621681945009"><span class="hs-identifier hs-var">runThreadIdMay</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Weak ThreadId -&gt; IO (Maybe ThreadId)
forall v. Weak v -&gt; IO (Maybe v)
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Weak.html#deRefWeak"><span class="hs-identifier hs-var">deRefWeak</span></a></span><span> </span><span class="annot"><span class="annottext">Weak ThreadId
</span><a href="#local-6989586621681945004"><span class="hs-identifier hs-var">runThreadIdWk</span></a></span><span>
</span><span id="line-226"></span><span>      </span><span class="annot"><span class="annottext">Maybe ThreadId -&gt; (ThreadId -&gt; IO ()) -&gt; IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#forM_"><span class="hs-identifier hs-var">forM_</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ThreadId
</span><a href="#local-6989586621681945009"><span class="hs-identifier hs-var">runThreadIdMay</span></a></span><span> </span><span class="annot"><span class="annottext">((ThreadId -&gt; IO ()) -&gt; IO ()) -&gt; (ThreadId -&gt; IO ()) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681945010"><span class="annot"><span class="annottext">ThreadId
</span><a href="#local-6989586621681945010"><span class="hs-identifier hs-var">runThreadId</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ThreadId -&gt; ExitCode -&gt; IO ()
forall e. Exception e =&gt; ThreadId -&gt; e -&gt; IO ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Conc.Sync.html#throwTo"><span class="hs-identifier hs-var">Exception.throwTo</span></a></span><span> </span><span class="annot"><span class="annottext">ThreadId
</span><a href="#local-6989586621681945010"><span class="hs-identifier hs-var">runThreadId</span></a></span><span> </span><span class="annot"><span class="annottext">ExitCode
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.Exception.html#ExitSuccess"><span class="hs-identifier hs-var">ExitSuccess</span></a></span><span>
</span><span id="line-227"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-228"></span><span>    </span><span class="annot"><span class="annottext">Maybe SignalSet
forall a. Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-cpp">
#endif
</span><span>  </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-231"></span><span>
</span><span id="line-232"></span><span class="annot"><a href="Cardano.Node.Run.html#handleNodeWithTracers"><span class="hs-identifier hs-type">handleNodeWithTracers</span></a></span><span>
</span><span id="line-233"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.POM.html#PartialNodeConfiguration"><span class="hs-identifier hs-type">PartialNodeConfiguration</span></a></span><span>
</span><span id="line-234"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.POM.html#NodeConfiguration"><span class="hs-identifier hs-type">NodeConfiguration</span></a></span><span>
</span><span id="line-235"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Node.Protocol.Types.html#SomeConsensusProtocol"><span class="hs-identifier hs-type">SomeConsensusProtocol</span></a></span><span>
</span><span id="line-236"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-237"></span><span id="handleNodeWithTracers"><span class="annot"><span class="annottext">handleNodeWithTracers :: PartialNodeConfiguration
-&gt; NodeConfiguration -&gt; SomeConsensusProtocol -&gt; IO ()
</span><a href="Cardano.Node.Run.html#handleNodeWithTracers"><span class="hs-identifier hs-var hs-var">handleNodeWithTracers</span></a></span></span><span> </span><span id="local-6989586621681945013"><span class="annot"><span class="annottext">PartialNodeConfiguration
</span><a href="#local-6989586621681945013"><span class="hs-identifier hs-var">cmdPc</span></a></span></span><span> </span><span id="local-6989586621681945014"><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945014"><span class="hs-identifier hs-var">nc0</span></a></span></span><span> </span><span id="local-6989586621681945015"><span class="annot"><span class="annottext">p :: SomeConsensusProtocol
</span><a href="#local-6989586621681945015"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Protocol.Types.html#SomeConsensusProtocol"><span class="hs-identifier hs-type">SomeConsensusProtocol</span></a></span><span> </span><span id="local-6989586621681945050"><span class="annot"><span class="annottext">BlockType blk
</span><a href="#local-6989586621681945050"><span class="hs-identifier hs-var">blockType</span></a></span></span><span> </span><span id="local-6989586621681945051"><span class="annot"><span class="annottext">ProtocolInfoArgs blk
</span><a href="#local-6989586621681945051"><span class="hs-identifier hs-var">runP</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-238"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-0.27.0.0-004c8b8862bcdf99608d21368eda63ae7ec76430a4bb20826e436605913605d0/share/doc/html/src/Ouroboros.Consensus.Node.ProtocolInfo.html#ProtocolInfo"><span class="hs-identifier hs-type">ProtocolInfo</span></a></span><span class="hs-special">{</span><span id="local-6989586621681945053"><span class="annot"><span class="annottext">TopLevelConfig blk
pInfoConfig :: TopLevelConfig blk
pInfoConfig :: forall b. ProtocolInfo b -&gt; TopLevelConfig b
</span><a href="#local-6989586621681945053"><span class="hs-identifier hs-var hs-var">pInfoConfig</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ProtocolInfo blk, IO [BlockForging IO blk]) -&gt; ProtocolInfo blk
forall a b. (a, b) -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">((ProtocolInfo blk, IO [BlockForging IO blk]) -&gt; ProtocolInfo blk)
-&gt; (ProtocolInfo blk, IO [BlockForging IO blk]) -&gt; ProtocolInfo blk
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) blk.
Protocol m blk =&gt;
ProtocolInfoArgs blk -&gt; (ProtocolInfo blk, m [BlockForging m blk])
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-api-10.18.0.0-cf96680f7a5f126623afc107f46c4390ef848488275422e58a8da147b9415623/share/doc/html/src/Cardano.Api.Consensus.Internal.Protocol.html#protocolInfo"><span class="hs-identifier hs-var">Api.protocolInfo</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolInfoArgs blk
</span><a href="#local-6989586621681945051"><span class="hs-identifier hs-var">runP</span></a></span><span>
</span><span id="line-239"></span><span>      </span><span id="local-6989586621681945057"><span class="annot"><span class="annottext">NetworkMagic
</span><a href="#local-6989586621681945057"><span class="hs-identifier hs-var">networkMagic</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.Magic.html#NetworkMagic"><span class="hs-identifier hs-type">Api.NetworkMagic</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockConfig blk -&gt; NetworkMagic
forall blk.
ConfigSupportsNode blk =&gt;
BlockConfig blk -&gt; NetworkMagic
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-0.27.0.0-004c8b8862bcdf99608d21368eda63ae7ec76430a4bb20826e436605913605d0/share/doc/html/src/Ouroboros.Consensus.Config.SupportsNode.html#getNetworkMagic"><span class="hs-identifier hs-var">getNetworkMagic</span></a></span><span> </span><span class="annot"><span class="annottext">(BlockConfig blk -&gt; NetworkMagic)
-&gt; BlockConfig blk -&gt; NetworkMagic
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TopLevelConfig blk -&gt; BlockConfig blk
forall blk. TopLevelConfig blk -&gt; BlockConfig blk
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-0.27.0.0-004c8b8862bcdf99608d21368eda63ae7ec76430a4bb20826e436605913605d0/share/doc/html/src/Ouroboros.Consensus.Config.html#configBlock"><span class="hs-identifier hs-var">Consensus.configBlock</span></a></span><span> </span><span class="annot"><span class="annottext">TopLevelConfig blk
</span><a href="#local-6989586621681945053"><span class="hs-identifier hs-var">pInfoConfig</span></a></span><span>
</span><span id="line-240"></span><span>  </span><span class="hs-comment">-- This IORef contains node kernel structure which holds node kernel.</span><span>
</span><span id="line-241"></span><span>  </span><span class="hs-comment">-- Used for ledger queries and peer connection status.</span><span>
</span><span id="line-242"></span><span>  </span><span id="local-6989586621681945060"><span class="annot"><span class="annottext">NodeKernelData blk
</span><a href="#local-6989586621681945060"><span class="hs-identifier hs-var">nodeKernelData</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (NodeKernelData blk)
forall blk. IO (NodeKernelData blk)
</span><a href="Cardano.Node.Queries.html#mkNodeKernelData"><span class="hs-identifier hs-var">mkNodeKernelData</span></a></span><span>
</span><span id="line-243"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-0.27.0.0-004c8b8862bcdf99608d21368eda63ae7ec76430a4bb20826e436605913605d0/share/doc/html/src/Ouroboros.Consensus.Node.ProtocolInfo.html#ProtocolInfo"><span class="hs-identifier hs-type">ProtocolInfo</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pInfoConfig :: forall b. ProtocolInfo b -&gt; TopLevelConfig b
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-0.27.0.0-004c8b8862bcdf99608d21368eda63ae7ec76430a4bb20826e436605913605d0/share/doc/html/src/Ouroboros.Consensus.Node.ProtocolInfo.html#pInfoConfig"><span class="hs-identifier hs-var">pInfoConfig</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681945062"><span class="annot"><span class="annottext">TopLevelConfig blk
</span><a href="#local-6989586621681945062"><span class="hs-identifier hs-var">cfg</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ProtocolInfo blk, IO [BlockForging IO blk]) -&gt; ProtocolInfo blk
forall a b. (a, b) -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">((ProtocolInfo blk, IO [BlockForging IO blk]) -&gt; ProtocolInfo blk)
-&gt; (ProtocolInfo blk, IO [BlockForging IO blk]) -&gt; ProtocolInfo blk
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) blk.
Protocol m blk =&gt;
ProtocolInfoArgs blk -&gt; (ProtocolInfo blk, m [BlockForging m blk])
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-api-10.18.0.0-cf96680f7a5f126623afc107f46c4390ef848488275422e58a8da147b9415623/share/doc/html/src/Cardano.Api.Consensus.Internal.Protocol.html#protocolInfo"><span class="hs-identifier hs-var">Api.protocolInfo</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolInfoArgs blk
</span><a href="#local-6989586621681945051"><span class="hs-identifier hs-var">runP</span></a></span><span>
</span><span id="line-244"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; SomeNetworkP2PMode
</span><a href="Cardano.Node.Configuration.POM.html#ncEnableP2P"><span class="hs-identifier hs-var">ncEnableP2P</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945014"><span class="hs-identifier hs-var">nc0</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-245"></span><span>    </span><span class="annot"><a href="Cardano.Node.Configuration.POM.html#SomeNetworkP2PMode"><span class="hs-identifier hs-type">SomeNetworkP2PMode</span></a></span><span> </span><span id="local-6989586621681945145"><span class="annot"><span class="annottext">NetworkP2PMode p2p
</span><a href="#local-6989586621681945145"><span class="hs-identifier hs-var">p2pMode</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-246"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681945146"><span class="annot"><span class="annottext">fp :: String
</span><a href="#local-6989586621681945146"><span class="hs-identifier hs-var hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
-&gt; (ConfigYamlFilePath -&gt; String)
-&gt; Maybe ConfigYamlFilePath
-&gt; String
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Maybe.html#maybe"><span class="hs-identifier hs-var">maybe</span></a></span><span>  </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;No file path found!&quot;</span></span><span>
</span><span id="line-247"></span><span>                      </span><span class="annot"><span class="annottext">ConfigYamlFilePath -&gt; String
</span><a href="Cardano.Node.Types.html#unConfigPath"><span class="hs-identifier hs-var">unConfigPath</span></a></span><span>
</span><span id="line-248"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Last ConfigYamlFilePath -&gt; Maybe ConfigYamlFilePath
forall a. Last a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Monoid.html#getLast"><span class="hs-identifier hs-var">getLast</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PartialNodeConfiguration -&gt; Last ConfigYamlFilePath
</span><a href="Cardano.Node.Configuration.POM.html#pncConfigFile"><span class="hs-identifier hs-var">pncConfigFile</span></a></span><span> </span><span class="annot"><span class="annottext">PartialNodeConfiguration
</span><a href="#local-6989586621681945013"><span class="hs-identifier hs-var">cmdPc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-249"></span><span>          </span><span class="hs-comment">-- Overwrite configured peer sharing mode if p2p is not enabled</span><span>
</span><span id="line-250"></span><span>          </span><span id="local-6989586621681945149"><span class="annot"><span class="annottext">nc :: NodeConfiguration
</span><a href="#local-6989586621681945149"><span class="hs-identifier hs-var hs-var">nc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NetworkP2PMode p2p
</span><a href="#local-6989586621681945145"><span class="hs-identifier hs-var">p2pMode</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-251"></span><span>            </span><span class="annot"><span class="annottext">NetworkP2PMode p2p
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#DisabledP2PMode"><span class="hs-identifier hs-var">DisabledP2PMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945014"><span class="hs-identifier hs-var">nc0</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.POM.html#ncPeerSharing"><span class="hs-identifier hs-var">ncPeerSharing</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.PeerSharing.html#PeerSharingDisabled"><span class="hs-identifier hs-type">PeerSharingDisabled</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-252"></span><span>            </span><span class="annot"><span class="annottext">NetworkP2PMode p2p
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#EnabledP2PMode"><span class="hs-identifier hs-var">EnabledP2PMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945014"><span class="hs-identifier hs-var">nc0</span></a></span><span>
</span><span id="line-253"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; TraceOptions
</span><a href="Cardano.Node.Configuration.POM.html#ncTraceConfig"><span class="hs-identifier hs-var">ncTraceConfig</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945149"><span class="hs-identifier hs-var">nc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-254"></span><span>        </span><span class="annot"><a href="Cardano.Tracing.Config.html#TraceDispatcher"><span class="hs-identifier hs-type">TraceDispatcher</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-255"></span><span>          </span><span id="local-6989586621681945158"><span class="annot"><span class="annottext">[BlockForging IO blk]
</span><a href="#local-6989586621681945158"><span class="hs-identifier hs-var">blockForging</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(ProtocolInfo blk, IO [BlockForging IO blk])
-&gt; IO [BlockForging IO blk]
forall a b. (a, b) -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtocolInfoArgs blk
-&gt; (ProtocolInfo blk, IO [BlockForging IO blk])
forall (m :: * -&gt; *) blk.
Protocol m blk =&gt;
ProtocolInfoArgs blk -&gt; (ProtocolInfo blk, m [BlockForging m blk])
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-api-10.18.0.0-cf96680f7a5f126623afc107f46c4390ef848488275422e58a8da147b9415623/share/doc/html/src/Cardano.Api.Consensus.Internal.Protocol.html#protocolInfo"><span class="hs-identifier hs-var">Api.protocolInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolInfoArgs blk
</span><a href="#local-6989586621681945051"><span class="hs-identifier hs-var">runP</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-256"></span><span>          </span><span id="local-6989586621681945160"><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945160"><span class="hs-identifier hs-var">tracers</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-257"></span><span>            </span><span class="annot"><span class="annottext">NodeConfiguration
-&gt; SomeConsensusProtocol
-&gt; NetworkMagic
-&gt; NodeKernelData blk
-&gt; NetworkP2PMode p2p
-&gt; Bool
-&gt; IO
     (Tracers
        RemoteAddress
        LocalAddress
        blk
        p2p
        ExtraState
        DebugPeerSelectionState
        PeerTrustable
        (ExtraPeers RemoteAddress)
        (ExtraPeerSelectionSetsWithSizes RemoteAddress)
        IO)
forall blk (p2p :: P2P).
(TraceConstraints blk, LogFormatting (LedgerEvent blk),
 LogFormatting
   (TraceLabelPeer
      (ConnectionId RemoteAddress) (TraceChainSyncClientEvent blk)),
 LogFormatting (TraceGsmEvent (Tip blk))) =&gt;
NodeConfiguration
-&gt; SomeConsensusProtocol
-&gt; NetworkMagic
-&gt; NodeKernelData blk
-&gt; NetworkP2PMode p2p
-&gt; Bool
-&gt; IO
     (Tracers
        RemoteAddress
        LocalAddress
        blk
        p2p
        ExtraState
        DebugPeerSelectionState
        PeerTrustable
        (ExtraPeers RemoteAddress)
        (ExtraPeerSelectionSetsWithSizes RemoteAddress)
        IO)
</span><a href="Cardano.Node.Tracing.API.html#initTraceDispatcher"><span class="hs-identifier hs-var">initTraceDispatcher</span></a></span><span>
</span><span id="line-258"></span><span>              </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945149"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-259"></span><span>              </span><span class="annot"><span class="annottext">SomeConsensusProtocol
</span><a href="#local-6989586621681945015"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-260"></span><span>              </span><span class="annot"><span class="annottext">NetworkMagic
</span><a href="#local-6989586621681945057"><span class="hs-identifier hs-var">networkMagic</span></a></span><span>
</span><span id="line-261"></span><span>              </span><span class="annot"><span class="annottext">NodeKernelData blk
</span><a href="#local-6989586621681945060"><span class="hs-identifier hs-var">nodeKernelData</span></a></span><span>
</span><span id="line-262"></span><span>              </span><span class="annot"><span class="annottext">NetworkP2PMode p2p
</span><a href="#local-6989586621681945145"><span class="hs-identifier hs-var">p2pMode</span></a></span><span>
</span><span id="line-263"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[BlockForging IO blk] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[BlockForging IO blk]
</span><a href="#local-6989586621681945158"><span class="hs-identifier hs-var">blockForging</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-264"></span><span>
</span><span id="line-265"></span><span>          </span><span id="local-6989586621681945163"><span class="annot"><span class="annottext">[StartupTrace blk]
</span><a href="#local-6989586621681945163"><span class="hs-identifier hs-var">startupInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
-&gt; SomeConsensusProtocol -&gt; String -&gt; IO [StartupTrace blk]
forall blk.
NodeConfiguration
-&gt; SomeConsensusProtocol -&gt; String -&gt; IO [StartupTrace blk]
</span><a href="Cardano.Node.Tracing.Tracers.Startup.html#getStartupInfo"><span class="hs-identifier hs-var">getStartupInfo</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945149"><span class="hs-identifier hs-var">nc</span></a></span><span> </span><span class="annot"><span class="annottext">SomeConsensusProtocol
</span><a href="#local-6989586621681945015"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681945146"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-266"></span><span>          </span><span class="annot"><span class="annottext">(StartupTrace blk -&gt; IO ()) -&gt; [StartupTrace blk] -&gt; IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk) -&gt; StartupTrace blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="annot"><span class="annottext">(Tracer IO (StartupTrace blk) -&gt; StartupTrace blk -&gt; IO ())
-&gt; Tracer IO (StartupTrace blk) -&gt; StartupTrace blk -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO (StartupTrace blk)
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO (StartupTrace blk)
</span><a href="Cardano.Node.Tracing.html#startupTracer"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945160"><span class="hs-identifier hs-var">tracers</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[StartupTrace blk]
</span><a href="#local-6989586621681945163"><span class="hs-identifier hs-var">startupInfo</span></a></span><span>
</span><span id="line-267"></span><span>          </span><span class="annot"><span class="annottext">Tracer IO NodeStartupInfo -&gt; [StartupTrace blk] -&gt; IO ()
forall blk.
Tracer IO NodeStartupInfo -&gt; [StartupTrace blk] -&gt; IO ()
</span><a href="Cardano.Node.Run.html#traceNodeStartupInfo"><span class="hs-identifier hs-var">traceNodeStartupInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO NodeStartupInfo
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO NodeStartupInfo
</span><a href="Cardano.Node.Tracing.html#nodeStartupInfoTracer"><span class="hs-identifier hs-var">nodeStartupInfoTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945160"><span class="hs-identifier hs-var">tracers</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[StartupTrace blk]
</span><a href="#local-6989586621681945163"><span class="hs-identifier hs-var">startupInfo</span></a></span><span>
</span><span id="line-268"></span><span>          </span><span class="hs-comment">-- sends initial BlockForgingUpdate</span><span>
</span><span id="line-269"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681945169"><span class="annot"><span class="annottext">isNonProducing :: Bool
</span><a href="#local-6989586621681945169"><span class="hs-identifier hs-var hs-var">isNonProducing</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; Bool
</span><a href="Cardano.Node.Configuration.POM.html#ncStartAsNonProducingNode"><span class="hs-identifier hs-var">ncStartAsNonProducingNode</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945149"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-270"></span><span>          </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk) -&gt; StartupTrace blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO (StartupTrace blk)
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO (StartupTrace blk)
</span><a href="Cardano.Node.Tracing.html#startupTracer"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945160"><span class="hs-identifier hs-var">tracers</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-271"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EnabledBlockForging -&gt; StartupTrace blk
forall blk. EnabledBlockForging -&gt; StartupTrace blk
</span><a href="Cardano.Node.Startup.html#BlockForgingUpdate"><span class="hs-identifier hs-var">BlockForgingUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681945169"><span class="hs-identifier hs-var">isNonProducing</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#%7C%7C"><span class="hs-operator hs-var">||</span></a></span><span> </span><span class="annot"><span class="annottext">[BlockForging IO blk] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[BlockForging IO blk]
</span><a href="#local-6989586621681945158"><span class="hs-identifier hs-var">blockForging</span></a></span><span>
</span><span id="line-272"></span><span>                                          </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">EnabledBlockForging
</span><a href="Cardano.Node.Startup.html#DisabledBlockForging"><span class="hs-identifier hs-var">DisabledBlockForging</span></a></span><span>
</span><span id="line-273"></span><span>                                          </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">EnabledBlockForging
</span><a href="Cardano.Node.Startup.html#EnabledBlockForging"><span class="hs-identifier hs-var">EnabledBlockForging</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-274"></span><span>
</span><span id="line-275"></span><span>          </span><span class="annot"><span class="annottext">BlockType blk
-&gt; ProtocolInfoArgs blk
-&gt; NetworkP2PMode p2p
-&gt; Tracers
     RemoteAddress
     LocalAddress
     blk
     p2p
     ExtraState
     DebugPeerSelectionState
     PeerTrustable
     (ExtraPeers RemoteAddress)
     (ExtraPeerSelectionSetsWithSizes RemoteAddress)
     IO
-&gt; NodeConfiguration
-&gt; (NodeKernel IO RemoteAddress LocalConnectionId blk -&gt; IO ())
-&gt; IO ()
forall blk (p2p :: P2P).
Protocol IO blk =&gt;
BlockType blk
-&gt; ProtocolInfoArgs blk
-&gt; NetworkP2PMode p2p
-&gt; Tracers
     RemoteAddress
     LocalAddress
     blk
     p2p
     ExtraState
     DebugPeerSelectionState
     PeerTrustable
     (ExtraPeers RemoteAddress)
     (ExtraPeerSelectionSetsWithSizes RemoteAddress)
     IO
-&gt; NodeConfiguration
-&gt; (NodeKernel IO RemoteAddress LocalConnectionId blk -&gt; IO ())
-&gt; IO ()
</span><a href="Cardano.Node.Run.html#handleSimpleNode"><span class="hs-identifier hs-var">handleSimpleNode</span></a></span><span> </span><span class="annot"><span class="annottext">BlockType blk
</span><a href="#local-6989586621681945050"><span class="hs-identifier hs-var">blockType</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolInfoArgs blk
</span><a href="#local-6989586621681945051"><span class="hs-identifier hs-var">runP</span></a></span><span> </span><span class="annot"><span class="annottext">NetworkP2PMode p2p
</span><a href="#local-6989586621681945145"><span class="hs-identifier hs-var">p2pMode</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945160"><span class="hs-identifier hs-var">tracers</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945149"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-276"></span><span>            </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681945176"><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk
</span><a href="#local-6989586621681945176"><span class="hs-identifier hs-var">nk</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-277"></span><span>                </span><span class="annot"><span class="annottext">NodeKernelData blk
-&gt; NodeKernel IO RemoteAddress LocalConnectionId blk -&gt; IO ()
forall blk.
NodeKernelData blk
-&gt; NodeKernel IO RemoteAddress LocalConnectionId blk -&gt; IO ()
</span><a href="Cardano.Node.Queries.html#setNodeKernel"><span class="hs-identifier hs-var">setNodeKernel</span></a></span><span> </span><span class="annot"><span class="annottext">NodeKernelData blk
</span><a href="#local-6989586621681945060"><span class="hs-identifier hs-var">nodeKernelData</span></a></span><span> </span><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk
</span><a href="#local-6989586621681945176"><span class="hs-identifier hs-var">nk</span></a></span><span>
</span><span id="line-278"></span><span>                </span><span class="annot"><span class="annottext">Tracer IO NodeState -&gt; NodeState -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO NodeState
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO NodeState
</span><a href="Cardano.Node.Tracing.html#nodeStateTracer"><span class="hs-identifier hs-var">nodeStateTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945160"><span class="hs-identifier hs-var">tracers</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NodeState
</span><a href="Cardano.Node.Tracing.StateRep.html#NodeKernelOnline"><span class="hs-identifier hs-var">NodeKernelOnline</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-279"></span><span>
</span><span id="line-280"></span><span>        </span><span class="annot"><span class="annottext">TraceOptions
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-281"></span><span>          </span><span id="local-6989586621681945179"><span class="annot"><span class="annottext">Either ConfigError LoggingLayer
</span><a href="#local-6989586621681945179"><span class="hs-identifier hs-var">eLoggingLayer</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExceptT ConfigError IO LoggingLayer
-&gt; IO (Either ConfigError LoggingLayer)
forall e (m :: * -&gt; *) a. ExceptT e m a -&gt; m (Either e a)
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Except.html#runExceptT"><span class="hs-identifier hs-var">runExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT ConfigError IO LoggingLayer
 -&gt; IO (Either ConfigError LoggingLayer))
-&gt; ExceptT ConfigError IO LoggingLayer
-&gt; IO (Either ConfigError LoggingLayer)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text
-&gt; NodeConfiguration
-&gt; SomeConsensusProtocol
-&gt; ExceptT ConfigError IO LoggingLayer
</span><a href="Cardano.Node.Configuration.Logging.html#createLoggingLayer"><span class="hs-identifier hs-var">createLoggingLayer</span></a></span><span>
</span><span id="line-282"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Internal.html#pack"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Version -&gt; String
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Version.html#showVersion"><span class="hs-identifier hs-var">showVersion</span></a></span><span> </span><span class="annot"><span class="annottext">Version
</span><a href="Paths_cardano_node.html#version"><span class="hs-identifier hs-var">version</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-283"></span><span>            </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945149"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-284"></span><span>            </span><span class="annot"><span class="annottext">SomeConsensusProtocol
</span><a href="#local-6989586621681945015"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-285"></span><span>
</span><span id="line-286"></span><span>          </span><span id="local-6989586621681945180"><span class="annot"><span class="annottext">LoggingLayer
</span><a href="#local-6989586621681945180"><span class="hs-identifier hs-var">loggingLayer</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either ConfigError LoggingLayer
</span><a href="#local-6989586621681945179"><span class="hs-identifier hs-var">eLoggingLayer</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-287"></span><span>            </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621681945181"><span class="annot"><span class="annottext">ConfigError
</span><a href="#local-6989586621681945181"><span class="hs-identifier hs-var">err</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ConfigError -&gt; IO LoggingLayer
forall e a. Exception e =&gt; e -&gt; IO a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#throwIO"><span class="hs-identifier hs-var">Exception.throwIO</span></a></span><span> </span><span class="annot"><span class="annottext">ConfigError
</span><a href="#local-6989586621681945181"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-288"></span><span>            </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621681945182"><span class="annot"><span class="annottext">LoggingLayer
</span><a href="#local-6989586621681945182"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LoggingLayer -&gt; IO LoggingLayer
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">LoggingLayer
</span><a href="#local-6989586621681945182"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-289"></span><span>          </span><span class="hs-glyph">!</span><span id="local-6989586621681945183"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621681945183"><span class="hs-identifier hs-var">trace</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LoggingLayer -&gt; IO (Trace IO Text)
</span><a href="Cardano.Node.Run.html#setupTrace"><span class="hs-identifier hs-var">setupTrace</span></a></span><span> </span><span class="annot"><span class="annottext">LoggingLayer
</span><a href="#local-6989586621681945180"><span class="hs-identifier hs-var">loggingLayer</span></a></span><span>
</span><span id="line-290"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681945185"><span class="annot"><span class="annottext">tracer :: Tracer IO String
</span><a href="#local-6989586621681945185"><span class="hs-identifier hs-var hs-var">tracer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; Tracer IO Text -&gt; Tracer IO String
forall a' a. (a' -&gt; a) -&gt; Tracer IO a -&gt; Tracer IO a'
forall (f :: * -&gt; *) a' a.
Contravariant f =&gt;
(a' -&gt; a) -&gt; f a -&gt; f a'
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Functor.Contravariant.html#contramap"><span class="hs-identifier hs-var">contramap</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Internal.html#pack"><span class="hs-identifier hs-var">pack</span></a></span><span> </span><span class="annot"><span class="annottext">(Tracer IO Text -&gt; Tracer IO String)
-&gt; Tracer IO Text -&gt; Tracer IO String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO Text
forall a b.
(ToObject a, Transformable a IO b) =&gt;
Trace IO a -&gt; Tracer IO b
forall (m :: * -&gt; *) a b.
(ToLogObject m, ToObject a, Transformable a m b) =&gt;
Trace m a -&gt; Tracer m b
</span><span class="hs-identifier hs-var">toLogObject</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621681945183"><span class="hs-identifier hs-var">trace</span></a></span><span>
</span><span id="line-291"></span><span>          </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; Tracer IO String -&gt; IO ()
</span><a href="Cardano.Node.Run.html#logTracingVerbosity"><span class="hs-identifier hs-var">logTracingVerbosity</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945149"><span class="hs-identifier hs-var">nc</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO String
</span><a href="#local-6989586621681945185"><span class="hs-identifier hs-var">tracer</span></a></span><span>
</span><span id="line-292"></span><span>
</span><span id="line-293"></span><span>          </span><span class="hs-comment">-- Legacy logging infrastructure must trace 'nodeStartTime' and 'nodeBasicInfo'.</span><span>
</span><span id="line-294"></span><span>          </span><span id="local-6989586621681945189"><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621681945189"><span class="hs-identifier hs-var">startTime</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO UTCTime
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/time-1.12.2/src/Data.Time.Clock.POSIX.html#getCurrentTime"><span class="hs-identifier hs-var">getCurrentTime</span></a></span><span>
</span><span id="line-295"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Int -&gt; IO ()
</span><a href="Cardano.Node.Configuration.Logging.html#traceCounter"><span class="hs-identifier hs-var">traceCounter</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;nodeStartTime&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621681945183"><span class="hs-identifier hs-var">trace</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">POSIXTime -&gt; Int
forall b. Integral b =&gt; POSIXTime -&gt; b
forall a b. (RealFrac a, Integral b) =&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Real.html#ceiling"><span class="hs-identifier hs-var">ceiling</span></a></span><span> </span><span class="annot"><span class="annottext">(POSIXTime -&gt; Int) -&gt; POSIXTime -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">UTCTime -&gt; POSIXTime
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/time-1.12.2/src/Data.Time.Clock.POSIX.html#utcTimeToPOSIXSeconds"><span class="hs-identifier hs-var">utcTimeToPOSIXSeconds</span></a></span><span> </span><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621681945189"><span class="hs-identifier hs-var">startTime</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-296"></span><span>          </span><span id="local-6989586621681945192"><span class="annot"><span class="annottext">[LogObject Text]
</span><a href="#local-6989586621681945192"><span class="hs-identifier hs-var">nbi</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
-&gt; SomeConsensusProtocol -&gt; UTCTime -&gt; IO [LogObject Text]
</span><a href="Cardano.Node.Configuration.Logging.html#nodeBasicInfo"><span class="hs-identifier hs-var">nodeBasicInfo</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945149"><span class="hs-identifier hs-var">nc</span></a></span><span> </span><span class="annot"><span class="annottext">SomeConsensusProtocol
</span><a href="#local-6989586621681945015"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621681945189"><span class="hs-identifier hs-var">startTime</span></a></span><span>
</span><span id="line-297"></span><span>          </span><span class="annot"><span class="annottext">[LogObject Text] -&gt; (LogObject Text -&gt; IO ()) -&gt; IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#forM_"><span class="hs-identifier hs-var">forM_</span></a></span><span> </span><span class="annot"><span class="annottext">[LogObject Text]
</span><a href="#local-6989586621681945192"><span class="hs-identifier hs-var">nbi</span></a></span><span> </span><span class="annot"><span class="annottext">((LogObject Text -&gt; IO ()) -&gt; IO ())
-&gt; (LogObject Text -&gt; IO ()) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LogObject</span></span><span> </span><span id="local-6989586621681945194"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681945194"><span class="hs-identifier hs-var">nm</span></a></span></span><span> </span><span id="local-6989586621681945195"><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621681945195"><span class="hs-identifier hs-var">mt</span></a></span></span><span> </span><span id="local-6989586621681945196"><span class="annot"><span class="annottext">LOContent Text
</span><a href="#local-6989586621681945196"><span class="hs-identifier hs-var">content</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-298"></span><span>            </span><span class="annot"><span class="annottext">Trace IO Text -&gt; (LOMeta, LOContent Text) -&gt; IO ()
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Trace m a -&gt; (LOMeta, LOContent a) -&gt; m ()
</span><span class="hs-identifier hs-var">traceNamedObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681945194"><span class="hs-identifier hs-var">nm</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621681945183"><span class="hs-identifier hs-var">trace</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621681945195"><span class="hs-identifier hs-var">mt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LOContent Text
</span><a href="#local-6989586621681945196"><span class="hs-identifier hs-var">content</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-299"></span><span>
</span><span id="line-300"></span><span>          </span><span id="local-6989586621681945199"><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945199"><span class="hs-identifier hs-var">tracers</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-301"></span><span>            </span><span class="annot"><span class="annottext">BlockConfig blk
-&gt; TraceOptions
-&gt; Trace IO Text
-&gt; NodeKernelData blk
-&gt; Maybe EKGDirect
-&gt; NetworkP2PMode p2p
-&gt; IO
     (Tracers
        RemoteAddress
        LocalAddress
        blk
        p2p
        ExtraState
        DebugPeerSelectionState
        PeerTrustable
        (ExtraPeers RemoteAddress)
        (ExtraPeerSelectionSetsWithSizes RemoteAddress)
        IO)
forall blk (p2p :: P2P).
(RunNode blk, TraceConstraints blk) =&gt;
BlockConfig blk
-&gt; TraceOptions
-&gt; Trace IO Text
-&gt; NodeKernelData blk
-&gt; Maybe EKGDirect
-&gt; NetworkP2PMode p2p
-&gt; IO
     (Tracers
        RemoteAddress
        LocalAddress
        blk
        p2p
        ExtraState
        DebugPeerSelectionState
        PeerTrustable
        (ExtraPeers RemoteAddress)
        (ExtraPeerSelectionSetsWithSizes RemoteAddress)
        IO)
</span><a href="Cardano.Tracing.Tracers.html#mkTracers"><span class="hs-identifier hs-var">mkTracers</span></a></span><span>
</span><span id="line-302"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TopLevelConfig blk -&gt; BlockConfig blk
forall blk. TopLevelConfig blk -&gt; BlockConfig blk
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-0.27.0.0-004c8b8862bcdf99608d21368eda63ae7ec76430a4bb20826e436605913605d0/share/doc/html/src/Ouroboros.Consensus.Config.html#configBlock"><span class="hs-identifier hs-var">Consensus.configBlock</span></a></span><span> </span><span class="annot"><span class="annottext">TopLevelConfig blk
</span><a href="#local-6989586621681945062"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-303"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NodeConfiguration -&gt; TraceOptions
</span><a href="Cardano.Node.Configuration.POM.html#ncTraceConfig"><span class="hs-identifier hs-var">ncTraceConfig</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945149"><span class="hs-identifier hs-var">nc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-304"></span><span>              </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621681945183"><span class="hs-identifier hs-var">trace</span></a></span><span>
</span><span id="line-305"></span><span>              </span><span class="annot"><span class="annottext">NodeKernelData blk
</span><a href="#local-6989586621681945060"><span class="hs-identifier hs-var">nodeKernelData</span></a></span><span>
</span><span id="line-306"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LoggingLayer -&gt; Maybe EKGDirect
</span><a href="Cardano.Node.Configuration.Logging.html#llEKGDirect"><span class="hs-identifier hs-var">llEKGDirect</span></a></span><span> </span><span class="annot"><span class="annottext">LoggingLayer
</span><a href="#local-6989586621681945180"><span class="hs-identifier hs-var">loggingLayer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-307"></span><span>              </span><span class="annot"><span class="annottext">NetworkP2PMode p2p
</span><a href="#local-6989586621681945145"><span class="hs-identifier hs-var">p2pMode</span></a></span><span>
</span><span id="line-308"></span><span>
</span><span id="line-309"></span><span>          </span><span class="annot"><span class="annottext">NodeConfiguration
-&gt; SomeConsensusProtocol -&gt; String -&gt; IO [StartupTrace blk]
forall blk.
NodeConfiguration
-&gt; SomeConsensusProtocol -&gt; String -&gt; IO [StartupTrace blk]
</span><a href="Cardano.Node.Tracing.Tracers.Startup.html#getStartupInfo"><span class="hs-identifier hs-var">getStartupInfo</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945149"><span class="hs-identifier hs-var">nc</span></a></span><span> </span><span class="annot"><span class="annottext">SomeConsensusProtocol
</span><a href="#local-6989586621681945015"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681945146"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-310"></span><span>            </span><span class="annot"><span class="annottext">IO [StartupTrace blk] -&gt; ([StartupTrace blk] -&gt; IO ()) -&gt; IO ()
forall a b. IO a -&gt; (a -&gt; IO b) -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">(StartupTrace blk -&gt; IO ()) -&gt; [StartupTrace blk] -&gt; IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk) -&gt; StartupTrace blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="annot"><span class="annottext">(Tracer IO (StartupTrace blk) -&gt; StartupTrace blk -&gt; IO ())
-&gt; Tracer IO (StartupTrace blk) -&gt; StartupTrace blk -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO (StartupTrace blk)
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO (StartupTrace blk)
</span><a href="Cardano.Node.Tracing.html#startupTracer"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945199"><span class="hs-identifier hs-var">tracers</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-311"></span><span>
</span><span id="line-312"></span><span>          </span><span class="annot"><span class="annottext">Tracer IO NodeVersionTrace -&gt; NodeVersionTrace -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO NodeVersionTrace
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO NodeVersionTrace
</span><a href="Cardano.Node.Tracing.html#nodeVersionTracer"><span class="hs-identifier hs-var">nodeVersionTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945199"><span class="hs-identifier hs-var">tracers</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NodeVersionTrace
</span><a href="Cardano.Node.Tracing.Tracers.NodeVersion.html#getNodeVersion"><span class="hs-identifier hs-var">getNodeVersion</span></a></span><span>
</span><span id="line-313"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681945203"><span class="annot"><span class="annottext">isNonProducing :: Bool
</span><a href="#local-6989586621681945203"><span class="hs-identifier hs-var hs-var">isNonProducing</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; Bool
</span><a href="Cardano.Node.Configuration.POM.html#ncStartAsNonProducingNode"><span class="hs-identifier hs-var">ncStartAsNonProducingNode</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945149"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-314"></span><span>          </span><span id="local-6989586621681945204"><span class="annot"><span class="annottext">[BlockForging IO blk]
</span><a href="#local-6989586621681945204"><span class="hs-identifier hs-var">blockForging</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(ProtocolInfo blk, IO [BlockForging IO blk])
-&gt; IO [BlockForging IO blk]
forall a b. (a, b) -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtocolInfoArgs blk
-&gt; (ProtocolInfo blk, IO [BlockForging IO blk])
forall (m :: * -&gt; *) blk.
Protocol m blk =&gt;
ProtocolInfoArgs blk -&gt; (ProtocolInfo blk, m [BlockForging m blk])
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-api-10.18.0.0-cf96680f7a5f126623afc107f46c4390ef848488275422e58a8da147b9415623/share/doc/html/src/Cardano.Api.Consensus.Internal.Protocol.html#protocolInfo"><span class="hs-identifier hs-var">Api.protocolInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolInfoArgs blk
</span><a href="#local-6989586621681945051"><span class="hs-identifier hs-var">runP</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-315"></span><span>          </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk) -&gt; StartupTrace blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO (StartupTrace blk)
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO (StartupTrace blk)
</span><a href="Cardano.Node.Tracing.html#startupTracer"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945199"><span class="hs-identifier hs-var">tracers</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-316"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EnabledBlockForging -&gt; StartupTrace blk
forall blk. EnabledBlockForging -&gt; StartupTrace blk
</span><a href="Cardano.Node.Startup.html#BlockForgingUpdate"><span class="hs-identifier hs-var">BlockForgingUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681945203"><span class="hs-identifier hs-var">isNonProducing</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#%7C%7C"><span class="hs-operator hs-var">||</span></a></span><span> </span><span class="annot"><span class="annottext">[BlockForging IO blk] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[BlockForging IO blk]
</span><a href="#local-6989586621681945204"><span class="hs-identifier hs-var">blockForging</span></a></span><span>
</span><span id="line-317"></span><span>                                          </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">EnabledBlockForging
</span><a href="Cardano.Node.Startup.html#DisabledBlockForging"><span class="hs-identifier hs-var">DisabledBlockForging</span></a></span><span>
</span><span id="line-318"></span><span>                                          </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">EnabledBlockForging
</span><a href="Cardano.Node.Startup.html#EnabledBlockForging"><span class="hs-identifier hs-var">EnabledBlockForging</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-319"></span><span>
</span><span id="line-320"></span><span>          </span><span class="hs-comment">-- We ignore peer logging thread if it dies, but it will be killed</span><span>
</span><span id="line-321"></span><span>          </span><span class="hs-comment">-- when 'handleSimpleNode' terminates.</span><span>
</span><span id="line-322"></span><span>          </span><span class="annot"><span class="annottext">BlockType blk
-&gt; ProtocolInfoArgs blk
-&gt; NetworkP2PMode p2p
-&gt; Tracers
     RemoteAddress
     LocalAddress
     blk
     p2p
     ExtraState
     DebugPeerSelectionState
     PeerTrustable
     (ExtraPeers RemoteAddress)
     (ExtraPeerSelectionSetsWithSizes RemoteAddress)
     IO
-&gt; NodeConfiguration
-&gt; (NodeKernel IO RemoteAddress LocalConnectionId blk -&gt; IO ())
-&gt; IO ()
forall blk (p2p :: P2P).
Protocol IO blk =&gt;
BlockType blk
-&gt; ProtocolInfoArgs blk
-&gt; NetworkP2PMode p2p
-&gt; Tracers
     RemoteAddress
     LocalAddress
     blk
     p2p
     ExtraState
     DebugPeerSelectionState
     PeerTrustable
     (ExtraPeers RemoteAddress)
     (ExtraPeerSelectionSetsWithSizes RemoteAddress)
     IO
-&gt; NodeConfiguration
-&gt; (NodeKernel IO RemoteAddress LocalConnectionId blk -&gt; IO ())
-&gt; IO ()
</span><a href="Cardano.Node.Run.html#handleSimpleNode"><span class="hs-identifier hs-var">handleSimpleNode</span></a></span><span> </span><span class="annot"><span class="annottext">BlockType blk
</span><a href="#local-6989586621681945050"><span class="hs-identifier hs-var">blockType</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolInfoArgs blk
</span><a href="#local-6989586621681945051"><span class="hs-identifier hs-var">runP</span></a></span><span> </span><span class="annot"><span class="annottext">NetworkP2PMode p2p
</span><a href="#local-6989586621681945145"><span class="hs-identifier hs-var">p2pMode</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945199"><span class="hs-identifier hs-var">tracers</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945149"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-323"></span><span>            </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681945205"><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk
</span><a href="#local-6989586621681945205"><span class="hs-identifier hs-var">nk</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-324"></span><span>                </span><span class="annot"><span class="annottext">NodeKernelData blk
-&gt; NodeKernel IO RemoteAddress LocalConnectionId blk -&gt; IO ()
forall blk.
NodeKernelData blk
-&gt; NodeKernel IO RemoteAddress LocalConnectionId blk -&gt; IO ()
</span><a href="Cardano.Node.Queries.html#setNodeKernel"><span class="hs-identifier hs-var">setNodeKernel</span></a></span><span> </span><span class="annot"><span class="annottext">NodeKernelData blk
</span><a href="#local-6989586621681945060"><span class="hs-identifier hs-var">nodeKernelData</span></a></span><span> </span><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk
</span><a href="#local-6989586621681945205"><span class="hs-identifier hs-var">nk</span></a></span><span>
</span><span id="line-325"></span><span>                </span><span class="annot"><span class="annottext">Tracer IO NodeState -&gt; NodeState -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO NodeState
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO NodeState
</span><a href="Cardano.Node.Tracing.html#nodeStateTracer"><span class="hs-identifier hs-var">nodeStateTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945199"><span class="hs-identifier hs-var">tracers</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NodeState
</span><a href="Cardano.Node.Tracing.StateRep.html#NodeKernelOnline"><span class="hs-identifier hs-var">NodeKernelOnline</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-326"></span><span>            </span><span class="annot"><span class="annottext">IO () -&gt; IO () -&gt; IO ()
forall a b. IO a -&gt; IO b -&gt; IO a
forall (m :: * -&gt; *) a b. MonadThrow m =&gt; m a -&gt; m b -&gt; m a
</span><a href="file:///nix/store/39y1cwp74gv435x8ywpmq90n9jlfm1ml-io-classes-lib-io-classes-1.5.0.0-haddock-doc/share/doc/io-classes/html/src/Control.Monad.Class.MonadThrow.html#finally"><span class="hs-operator hs-var">`finally`</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-327"></span><span>              </span><span class="annot"><span class="annottext">Either ConfigError LoggingLayer -&gt; (LoggingLayer -&gt; IO ()) -&gt; IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#forM_"><span class="hs-identifier hs-var">forM_</span></a></span><span> </span><span class="annot"><span class="annottext">Either ConfigError LoggingLayer
</span><a href="#local-6989586621681945179"><span class="hs-identifier hs-var">eLoggingLayer</span></a></span><span>
</span><span id="line-328"></span><span>                </span><span class="annot"><span class="annottext">LoggingLayer -&gt; IO ()
</span><a href="Cardano.Node.Configuration.Logging.html#shutdownLoggingLayer"><span class="hs-identifier hs-var">shutdownLoggingLayer</span></a></span><span>
</span><span id="line-329"></span><span>
</span><span id="line-330"></span><span class="hs-comment">-- | Currently, we trace only 'ShelleyBased'-info which will be asked</span><span>
</span><span id="line-331"></span><span class="hs-comment">--   by 'cardano-tracer' service as a datapoint. It can be extended in the future.</span><span>
</span><span id="line-332"></span><span id="local-6989586621681944281"><span class="annot"><a href="Cardano.Node.Run.html#traceNodeStartupInfo"><span class="hs-identifier hs-type">traceNodeStartupInfo</span></a></span><span>
</span><span id="line-333"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#Tracer"><span class="hs-identifier hs-type">Tracer</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/work/cardano-node/cardano-node/dist-newstyle/build/x86_64-linux/ghc-9.6.6/trace-dispatcher-2.10.0/doc/html/trace-dispatcher/src/Cardano.Logging.Types.NodeStartupInfo.html#NodeStartupInfo"><span class="hs-identifier hs-type">NodeStartupInfo</span></a></span><span>
</span><span id="line-334"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Cardano.Node.Startup.html#StartupTrace"><span class="hs-identifier hs-type">StartupTrace</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944281"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-335"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-336"></span><span id="traceNodeStartupInfo"><span class="annot"><span class="annottext">traceNodeStartupInfo :: forall blk.
Tracer IO NodeStartupInfo -&gt; [StartupTrace blk] -&gt; IO ()
</span><a href="Cardano.Node.Run.html#traceNodeStartupInfo"><span class="hs-identifier hs-var hs-var">traceNodeStartupInfo</span></a></span></span><span> </span><span id="local-6989586621681945210"><span class="annot"><span class="annottext">Tracer IO NodeStartupInfo
</span><a href="#local-6989586621681945210"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621681945211"><span class="annot"><span class="annottext">[StartupTrace blk]
</span><a href="#local-6989586621681945211"><span class="hs-identifier hs-var">startupTrace</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-337"></span><span>  </span><span class="annot"><span class="annottext">[StartupTrace blk] -&gt; (StartupTrace blk -&gt; IO ()) -&gt; IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#forM_"><span class="hs-identifier hs-var">forM_</span></a></span><span> </span><span class="annot"><span class="annottext">[StartupTrace blk]
</span><a href="#local-6989586621681945211"><span class="hs-identifier hs-var">startupTrace</span></a></span><span> </span><span class="annot"><span class="annottext">((StartupTrace blk -&gt; IO ()) -&gt; IO ())
-&gt; (StartupTrace blk -&gt; IO ()) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-338"></span><span>    </span><span class="annot"><a href="Cardano.Node.Startup.html#BIShelley"><span class="hs-identifier hs-type">BIShelley</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Startup.html#BasicInfoShelleyBased"><span class="hs-identifier hs-type">BasicInfoShelleyBased</span></a></span><span> </span><span id="local-6989586621681945214"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681945214"><span class="hs-identifier hs-var">era</span></a></span></span><span> </span><span class="annot"><span class="annottext">UTCTime
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681945215"><span class="annot"><span class="annottext">POSIXTime
</span><a href="#local-6989586621681945215"><span class="hs-identifier hs-var">sl</span></a></span></span><span> </span><span id="local-6989586621681945216"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621681945216"><span class="hs-identifier hs-var">el</span></a></span></span><span> </span><span id="local-6989586621681945217"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621681945217"><span class="hs-identifier hs-var">spkp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-339"></span><span>      </span><span class="annot"><span class="annottext">Tracer IO NodeStartupInfo -&gt; NodeStartupInfo -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO NodeStartupInfo
</span><a href="#local-6989586621681945210"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">(NodeStartupInfo -&gt; IO ()) -&gt; NodeStartupInfo -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; POSIXTime -&gt; Word64 -&gt; Word64 -&gt; NodeStartupInfo
</span><a href="file:///home/runner/work/cardano-node/cardano-node/dist-newstyle/build/x86_64-linux/ghc-9.6.6/trace-dispatcher-2.10.0/doc/html/trace-dispatcher/src/Cardano.Logging.Types.NodeStartupInfo.html#NodeStartupInfo"><span class="hs-identifier hs-var">NodeStartupInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681945214"><span class="hs-identifier hs-var">era</span></a></span><span> </span><span class="annot"><span class="annottext">POSIXTime
</span><a href="#local-6989586621681945215"><span class="hs-identifier hs-var">sl</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621681945216"><span class="hs-identifier hs-var">el</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621681945217"><span class="hs-identifier hs-var">spkp</span></a></span><span>
</span><span id="line-340"></span><span>    </span><span class="annot"><span class="annottext">StartupTrace blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-341"></span><span>
</span><span id="line-342"></span><span class="annot"><a href="Cardano.Node.Run.html#logTracingVerbosity"><span class="hs-identifier hs-type">logTracingVerbosity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.POM.html#NodeConfiguration"><span class="hs-identifier hs-type">NodeConfiguration</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#Tracer"><span class="hs-identifier hs-type">Tracer</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-343"></span><span id="logTracingVerbosity"><span class="annot"><span class="annottext">logTracingVerbosity :: NodeConfiguration -&gt; Tracer IO String -&gt; IO ()
</span><a href="Cardano.Node.Run.html#logTracingVerbosity"><span class="hs-identifier hs-var hs-var">logTracingVerbosity</span></a></span></span><span> </span><span id="local-6989586621681945219"><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945219"><span class="hs-identifier hs-var">nc</span></a></span></span><span> </span><span id="local-6989586621681945220"><span class="annot"><span class="annottext">Tracer IO String
</span><a href="#local-6989586621681945220"><span class="hs-identifier hs-var">tracer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-344"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; TraceOptions
</span><a href="Cardano.Node.Configuration.POM.html#ncTraceConfig"><span class="hs-identifier hs-var">ncTraceConfig</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945219"><span class="hs-identifier hs-var">nc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-345"></span><span>    </span><span class="annot"><span class="annottext">TraceOptions
</span><a href="Cardano.Tracing.Config.html#TracingOff"><span class="hs-identifier hs-var">TracingOff</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-346"></span><span>    </span><span class="annot"><a href="Cardano.Tracing.Config.html#TracingOnLegacy"><span class="hs-identifier hs-type">TracingOnLegacy</span></a></span><span> </span><span id="local-6989586621681945223"><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621681945223"><span class="hs-identifier hs-var">traceConf</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-347"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TraceSelection -&gt; TracingVerbosity
</span><a href="Cardano.Tracing.Config.html#traceVerbosity"><span class="hs-identifier hs-var">traceVerbosity</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621681945223"><span class="hs-identifier hs-var">traceConf</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-348"></span><span>        </span><span class="annot"><span class="annottext">TracingVerbosity
</span><span class="hs-identifier hs-var">NormalVerbosity</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tracer IO String -&gt; String -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO String
</span><a href="#local-6989586621681945220"><span class="hs-identifier hs-var">tracer</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tracing verbosity = normal verbosity &quot;</span></span><span>
</span><span id="line-349"></span><span>        </span><span class="annot"><span class="annottext">TracingVerbosity
</span><span class="hs-identifier hs-var">MinimalVerbosity</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tracer IO String -&gt; String -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO String
</span><a href="#local-6989586621681945220"><span class="hs-identifier hs-var">tracer</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tracing verbosity = minimal verbosity &quot;</span></span><span>
</span><span id="line-350"></span><span>        </span><span class="annot"><span class="annottext">TracingVerbosity
</span><span class="hs-identifier hs-var">MaximalVerbosity</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tracer IO String -&gt; String -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO String
</span><a href="#local-6989586621681945220"><span class="hs-identifier hs-var">tracer</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tracing verbosity = maximal verbosity &quot;</span></span><span>
</span><span id="line-351"></span><span>    </span><span class="annot"><a href="Cardano.Tracing.Config.html#TraceDispatcher"><span class="hs-identifier hs-type">TraceDispatcher</span></a></span><span> </span><span id="local-6989586621681945228"><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621681945228"><span class="hs-identifier hs-var">_traceConf</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-352"></span><span>      </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-353"></span><span class="hs-comment">-- | Add the application name and unqualified hostname to the logging</span><span>
</span><span id="line-354"></span><span class="hs-comment">-- layer basic trace.</span><span>
</span><span id="line-355"></span><span class="hs-comment">--</span><span>
</span><span id="line-356"></span><span class="hs-comment">-- If the @CARDANO_NODE_LOGGING_HOSTNAME@ environment variable is set,</span><span>
</span><span id="line-357"></span><span class="hs-comment">-- it overrides the system hostname. This is useful when running a</span><span>
</span><span id="line-358"></span><span class="hs-comment">-- local test cluster with all nodes on the same host.</span><span>
</span><span id="line-359"></span><span class="annot"><a href="Cardano.Node.Run.html#setupTrace"><span class="hs-identifier hs-type">setupTrace</span></a></span><span>
</span><span id="line-360"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#LoggingLayer"><span class="hs-identifier hs-type">LoggingLayer</span></a></span><span>
</span><span id="line-361"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-362"></span><span id="setupTrace"><span class="annot"><span class="annottext">setupTrace :: LoggingLayer -&gt; IO (Trace IO Text)
</span><a href="Cardano.Node.Run.html#setupTrace"><span class="hs-identifier hs-var hs-var">setupTrace</span></a></span></span><span> </span><span id="local-6989586621681945229"><span class="annot"><span class="annottext">LoggingLayer
</span><a href="#local-6989586621681945229"><span class="hs-identifier hs-var">loggingLayer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-363"></span><span>    </span><span id="local-6989586621681945230"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681945230"><span class="hs-identifier hs-var">hn</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO Text -&gt; (String -&gt; IO Text) -&gt; Maybe String -&gt; IO Text
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Maybe.html#maybe"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="annot"><span class="annottext">IO Text
</span><a href="#local-6989586621681945231"><span class="hs-identifier hs-var">hostname</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; IO Text
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; IO Text) -&gt; (String -&gt; Text) -&gt; String -&gt; IO Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Internal.html#pack"><span class="hs-identifier hs-var">pack</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe String -&gt; IO Text) -&gt; IO (Maybe String) -&gt; IO Text
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3D%3C%3C"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO (Maybe String)
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/System.Environment.html#lookupEnv"><span class="hs-identifier hs-var">lookupEnv</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;CARDANO_NODE_LOGGING_HOSTNAME&quot;</span></span><span>
</span><span id="line-364"></span><span>    </span><span class="annot"><span class="annottext">Trace IO Text -&gt; IO (Trace IO Text)
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Trace IO Text -&gt; IO (Trace IO Text))
-&gt; Trace IO Text -&gt; IO (Trace IO Text)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-365"></span><span>        </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">setHostname</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681945230"><span class="hs-identifier hs-var">hn</span></a></span><span> </span><span class="annot"><span class="annottext">(Trace IO Text -&gt; Trace IO Text) -&gt; Trace IO Text -&gt; Trace IO Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-366"></span><span>        </span><span class="annot"><span class="annottext">LoggingLayer
-&gt; forall (m :: * -&gt; *) a. Show a =&gt; Text -&gt; Trace m a -&gt; Trace m a
</span><a href="Cardano.Node.Configuration.Logging.html#llAppendName"><span class="hs-identifier hs-var">llAppendName</span></a></span><span> </span><span class="annot"><span class="annottext">LoggingLayer
</span><a href="#local-6989586621681945229"><span class="hs-identifier hs-var">loggingLayer</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;node&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LoggingLayer -&gt; forall (m :: * -&gt; *). MonadIO m =&gt; Trace m Text
</span><a href="Cardano.Node.Configuration.Logging.html#llBasicTrace"><span class="hs-identifier hs-var">llBasicTrace</span></a></span><span> </span><span class="annot"><span class="annottext">LoggingLayer
</span><a href="#local-6989586621681945229"><span class="hs-identifier hs-var">loggingLayer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-367"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-368"></span><span>    </span><span id="local-6989586621681945231"><span class="annot"><span class="annottext">hostname :: IO Text
</span><a href="#local-6989586621681945231"><span class="hs-identifier hs-var hs-var">hostname</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-369"></span><span>      </span><span id="local-6989586621681945241"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681945241"><span class="hs-identifier hs-var">hn0</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Internal.html#pack"><span class="hs-identifier hs-var">pack</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; IO String -&gt; IO Text
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IO String
</span><span class="hs-identifier hs-var">getHostName</span></span><span>
</span><span id="line-370"></span><span>      </span><span class="annot"><span class="annottext">Text -&gt; IO Text
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; IO Text) -&gt; Text -&gt; IO Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; Text
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.html#take"><span class="hs-identifier hs-var">Text.take</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Text) -&gt; Text -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Text, Text) -&gt; Text
forall a b. (a, b) -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">((Text, Text) -&gt; Text) -&gt; (Text, Text) -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; Text -&gt; Text -&gt; (Text, Text)
Text -&gt; Text -&gt; (Text, Text)
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.html#breakOn"><span class="hs-identifier hs-var">breakOn</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681945241"><span class="hs-identifier hs-var">hn0</span></a></span><span>
</span><span id="line-371"></span><span>
</span><span id="line-372"></span><span class="hs-comment">{-
-- TODO: needs to be finished (issue #4362)
handlePeersListSimple
  :: Trace IO Text
  -&gt; NodeKernelData blk
  -&gt; IO ()
handlePeersListSimple tr nodeKern = forever $ do
  getCurrentPeers nodeKern &gt;&gt;= tracePeers tr
  threadDelay 2000000 -- 2 seconds.
-}</span><span>
</span><span id="line-382"></span><span>
</span><span id="line-383"></span><span class="hs-comment">-- | Sets up a simple node, which will run the chain sync protocol and block</span><span>
</span><span id="line-384"></span><span class="hs-comment">-- fetch protocol, and, if core, will also look at the mempool when trying to</span><span>
</span><span id="line-385"></span><span class="hs-comment">-- create a new block.</span><span>
</span><span id="line-386"></span><span>
</span><span id="line-387"></span><span class="annot"><a href="Cardano.Node.Run.html#handleSimpleNode"><span class="hs-identifier hs-type">handleSimpleNode</span></a></span><span>
</span><span id="line-388"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621681944296"><span class="annot"><a href="#local-6989586621681944296"><span class="hs-identifier hs-type">blk</span></a></span></span><span> </span><span id="local-6989586621681944297"><span class="annot"><a href="#local-6989586621681944297"><span class="hs-identifier hs-type">p2p</span></a></span></span><span> </span><span class="hs-operator">.</span><span>
</span><span id="line-389"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-api-10.18.0.0-cf96680f7a5f126623afc107f46c4390ef848488275422e58a8da147b9415623/share/doc/html/src/Cardano.Api.Consensus.Internal.Protocol.html#Protocol"><span class="hs-identifier hs-type">Api.Protocol</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944296"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-390"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-391"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-api-10.18.0.0-cf96680f7a5f126623afc107f46c4390ef848488275422e58a8da147b9415623/share/doc/html/src/Cardano.Api.Consensus.Internal.Protocol.html#BlockType"><span class="hs-identifier hs-type">Api.BlockType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944296"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-392"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-api-10.18.0.0-cf96680f7a5f126623afc107f46c4390ef848488275422e58a8da147b9415623/share/doc/html/src/Cardano.Api.Consensus.Internal.Protocol.html#ProtocolInfoArgs"><span class="hs-identifier hs-type">Api.ProtocolInfoArgs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944296"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-393"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#NetworkP2PMode"><span class="hs-identifier hs-type">NetworkP2PMode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944297"><span class="hs-identifier hs-type">p2p</span></a></span><span>
</span><span id="line-394"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Node.Tracing.html#Tracers"><span class="hs-identifier hs-type">Tracers</span></a></span><span>
</span><span id="line-395"></span><span>       </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.NodeToNode.html#RemoteAddress"><span class="hs-identifier hs-type">RemoteAddress</span></a></span><span>
</span><span id="line-396"></span><span>       </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-framework-0.18.0.2-e5e675f5f8bd9f2a1e99040ff85ace8bb30006cb1118a4f0531fde62ebeff5fc/share/doc/html/src/Ouroboros.Network.Snocket.html#LocalAddress"><span class="hs-identifier hs-type">LocalAddress</span></a></span><span>
</span><span id="line-397"></span><span>       </span><span class="annot"><a href="#local-6989586621681944296"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944297"><span class="hs-identifier hs-type">p2p</span></a></span><span>
</span><span id="line-398"></span><span>       </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PeerSelection.Governor.PeerSelectionState.html#ExtraState"><span class="hs-identifier hs-type">Cardano.PeerSelection.ExtraState</span></a></span><span>
</span><span id="line-399"></span><span>       </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PeerSelection.Governor.PeerSelectionState.html#DebugPeerSelectionState"><span class="hs-identifier hs-type">Cardano.PeerSelection.DebugPeerSelectionState</span></a></span><span>
</span><span id="line-400"></span><span>       </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Cardano.Network.PeerSelection.PeerTrustable.html#PeerTrustable"><span class="hs-identifier hs-type">PeerTrustable</span></a></span><span>
</span><span id="line-401"></span><span>       </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PublicRootPeers.html#ExtraPeers"><span class="hs-identifier hs-type">Cardano.PublicRoots.ExtraPeers</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.NodeToNode.html#RemoteAddress"><span class="hs-identifier hs-type">RemoteAddress</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-402"></span><span>       </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PeerSelection.Governor.Types.html#ExtraPeerSelectionSetsWithSizes"><span class="hs-identifier hs-type">Cardano.ExtraPeerSelectionSetsWithSizes</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.NodeToNode.html#RemoteAddress"><span class="hs-identifier hs-type">RemoteAddress</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-403"></span><span>       </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span>
</span><span id="line-404"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.POM.html#NodeConfiguration"><span class="hs-identifier hs-type">NodeConfiguration</span></a></span><span>
</span><span id="line-405"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.NodeKernel.html#NodeKernel"><span class="hs-identifier hs-type">NodeKernel</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.NodeToNode.html#RemoteAddress"><span class="hs-identifier hs-type">RemoteAddress</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.NodeToClient.html#LocalConnectionId"><span class="hs-identifier hs-type">LocalConnectionId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944296"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-406"></span><span>  </span><span class="hs-comment">-- ^ Called on the 'NodeKernel' after creating it, but before the network</span><span>
</span><span id="line-407"></span><span>  </span><span class="hs-comment">-- layer is initialised.  This implies this function must not block,</span><span>
</span><span id="line-408"></span><span>  </span><span class="hs-comment">-- otherwise the node won't actually start.</span><span>
</span><span id="line-409"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-410"></span><span id="handleSimpleNode"><span class="annot"><span class="annottext">handleSimpleNode :: forall blk (p2p :: P2P).
Protocol IO blk =&gt;
BlockType blk
-&gt; ProtocolInfoArgs blk
-&gt; NetworkP2PMode p2p
-&gt; Tracers
     RemoteAddress
     LocalAddress
     blk
     p2p
     ExtraState
     DebugPeerSelectionState
     PeerTrustable
     (ExtraPeers RemoteAddress)
     (ExtraPeerSelectionSetsWithSizes RemoteAddress)
     IO
-&gt; NodeConfiguration
-&gt; (NodeKernel IO RemoteAddress LocalConnectionId blk -&gt; IO ())
-&gt; IO ()
</span><a href="Cardano.Node.Run.html#handleSimpleNode"><span class="hs-identifier hs-var hs-var">handleSimpleNode</span></a></span></span><span> </span><span id="local-6989586621681945330"><span class="annot"><span class="annottext">BlockType blk
</span><a href="#local-6989586621681945330"><span class="hs-identifier hs-var">blockType</span></a></span></span><span> </span><span id="local-6989586621681945331"><span class="annot"><span class="annottext">ProtocolInfoArgs blk
</span><a href="#local-6989586621681945331"><span class="hs-identifier hs-var">runP</span></a></span></span><span> </span><span id="local-6989586621681945332"><span class="annot"><span class="annottext">NetworkP2PMode p2p
</span><a href="#local-6989586621681945332"><span class="hs-identifier hs-var">p2pMode</span></a></span></span><span> </span><span id="local-6989586621681945333"><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span></span><span> </span><span id="local-6989586621681945334"><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span></span><span> </span><span id="local-6989586621681945335"><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk -&gt; IO ()
</span><a href="#local-6989586621681945335"><span class="hs-identifier hs-var">onKernel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-411"></span><span>  </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621681945336"><span class="hs-identifier hs-var">logStartupWarnings</span></a></span><span>
</span><span id="line-412"></span><span>
</span><span id="line-413"></span><span>  </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621681945337"><span class="hs-identifier hs-var">logDeprecatedLedgerDBOptions</span></a></span><span>
</span><span id="line-414"></span><span>
</span><span id="line-415"></span><span>  </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk) -&gt; StartupTrace blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO (StartupTrace blk)
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO (StartupTrace blk)
</span><a href="Cardano.Node.Tracing.html#startupTracer"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-416"></span><span>    </span><span class="annot"><span class="annottext">(StartupTrace blk -&gt; IO ()) -&gt; IO (StartupTrace blk) -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3D%3C%3C"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">UTCTime -&gt; StartupTrace blk
forall blk. UTCTime -&gt; StartupTrace blk
</span><a href="Cardano.Node.Startup.html#StartupTime"><span class="hs-identifier hs-var">StartupTime</span></a></span><span> </span><span class="annot"><span class="annottext">(UTCTime -&gt; StartupTrace blk)
-&gt; IO UTCTime -&gt; IO (StartupTrace blk)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IO UTCTime
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/time-1.12.2/src/Data.Time.Clock.POSIX.html#getCurrentTime"><span class="hs-identifier hs-var">getCurrentTime</span></a></span><span>
</span><span id="line-417"></span><span>
</span><span id="line-418"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NodeConfiguration -&gt; Bool
</span><a href="Cardano.Node.Configuration.POM.html#ncValidateDB"><span class="hs-identifier hs-var">ncValidateDB</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-419"></span><span>    </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk) -&gt; StartupTrace blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO (StartupTrace blk)
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO (StartupTrace blk)
</span><a href="Cardano.Node.Tracing.html#startupTracer"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-420"></span><span>      </span><span class="annot"><span class="annottext">StartupTrace blk
forall blk. StartupTrace blk
</span><a href="Cardano.Node.Startup.html#StartupDBValidation"><span class="hs-identifier hs-var">StartupDBValidation</span></a></span><span>
</span><span id="line-421"></span><span>
</span><span id="line-422"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681945341"><span class="annot"><span class="annottext">pInfo :: ProtocolInfo blk
</span><a href="#local-6989586621681945341"><span class="hs-identifier hs-var hs-var">pInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ProtocolInfo blk, IO [BlockForging IO blk]) -&gt; ProtocolInfo blk
forall a b. (a, b) -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">((ProtocolInfo blk, IO [BlockForging IO blk]) -&gt; ProtocolInfo blk)
-&gt; (ProtocolInfo blk, IO [BlockForging IO blk]) -&gt; ProtocolInfo blk
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) blk.
Protocol m blk =&gt;
ProtocolInfoArgs blk -&gt; (ProtocolInfo blk, m [BlockForging m blk])
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-api-10.18.0.0-cf96680f7a5f126623afc107f46c4390ef848488275422e58a8da147b9415623/share/doc/html/src/Cardano.Api.Consensus.Internal.Protocol.html#protocolInfo"><span class="hs-identifier hs-var">Api.protocolInfo</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolInfoArgs blk
</span><a href="#local-6989586621681945331"><span class="hs-identifier hs-var">runP</span></a></span><span>
</span><span id="line-423"></span><span>
</span><span id="line-424"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621681945342"><span class="annot"><span class="annottext">Maybe SocketOrSocketInfo
</span><a href="#local-6989586621681945342"><span class="hs-identifier hs-var">publicIPv4SocketOrAddr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681945343"><span class="annot"><span class="annottext">Maybe SocketOrSocketInfo
</span><a href="#local-6989586621681945343"><span class="hs-identifier hs-var">publicIPv6SocketOrAddr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681945344"><span class="annot"><span class="annottext">Maybe LocalSocketOrSocketInfo
</span><a href="#local-6989586621681945344"><span class="hs-identifier hs-var">localSocketOrPath</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-425"></span><span>    </span><span id="local-6989586621681945345"><span class="annot"><span class="annottext">Either
  SocketConfigError
  (Maybe SocketOrSocketInfo, Maybe SocketOrSocketInfo,
   Maybe LocalSocketOrSocketInfo)
</span><a href="#local-6989586621681945345"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExceptT
  SocketConfigError
  IO
  (Maybe SocketOrSocketInfo, Maybe SocketOrSocketInfo,
   Maybe LocalSocketOrSocketInfo)
-&gt; IO
     (Either
        SocketConfigError
        (Maybe SocketOrSocketInfo, Maybe SocketOrSocketInfo,
         Maybe LocalSocketOrSocketInfo))
forall e (m :: * -&gt; *) a. ExceptT e m a -&gt; m (Either e a)
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Except.html#runExceptT"><span class="hs-identifier hs-var">runExceptT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SocketConfig
-&gt; ExceptT
     SocketConfigError
     IO
     (Maybe SocketOrSocketInfo, Maybe SocketOrSocketInfo,
      Maybe LocalSocketOrSocketInfo)
</span><a href="Cardano.Node.Configuration.Socket.html#gatherConfiguredSockets"><span class="hs-identifier hs-var">gatherConfiguredSockets</span></a></span><span> </span><span class="annot"><span class="annottext">(SocketConfig
 -&gt; ExceptT
      SocketConfigError
      IO
      (Maybe SocketOrSocketInfo, Maybe SocketOrSocketInfo,
       Maybe LocalSocketOrSocketInfo))
-&gt; SocketConfig
-&gt; ExceptT
     SocketConfigError
     IO
     (Maybe SocketOrSocketInfo, Maybe SocketOrSocketInfo,
      Maybe LocalSocketOrSocketInfo)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; SocketConfig
</span><a href="Cardano.Node.Configuration.POM.html#ncSocketConfig"><span class="hs-identifier hs-var">ncSocketConfig</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-426"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either
  SocketConfigError
  (Maybe SocketOrSocketInfo, Maybe SocketOrSocketInfo,
   Maybe LocalSocketOrSocketInfo)
</span><a href="#local-6989586621681945345"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-427"></span><span>      </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621681945347"><span class="annot"><span class="annottext">(Maybe SocketOrSocketInfo, Maybe SocketOrSocketInfo,
 Maybe LocalSocketOrSocketInfo)
</span><a href="#local-6989586621681945347"><span class="hs-identifier hs-var">triplet</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Maybe SocketOrSocketInfo, Maybe SocketOrSocketInfo,
 Maybe LocalSocketOrSocketInfo)
-&gt; IO
     (Maybe SocketOrSocketInfo, Maybe SocketOrSocketInfo,
      Maybe LocalSocketOrSocketInfo)
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe SocketOrSocketInfo, Maybe SocketOrSocketInfo,
 Maybe LocalSocketOrSocketInfo)
</span><a href="#local-6989586621681945347"><span class="hs-identifier hs-var">triplet</span></a></span><span>
</span><span id="line-428"></span><span>      </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621681945348"><span class="annot"><span class="annottext">SocketConfigError
</span><a href="#local-6989586621681945348"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-429"></span><span>        </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk) -&gt; StartupTrace blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO (StartupTrace blk)
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO (StartupTrace blk)
</span><a href="Cardano.Node.Tracing.html#startupTracer"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-430"></span><span>                </span><span class="annot"><span class="annottext">(StartupTrace blk -&gt; IO ()) -&gt; StartupTrace blk -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SocketConfigError -&gt; StartupTrace blk
forall blk. SocketConfigError -&gt; StartupTrace blk
</span><a href="Cardano.Node.Startup.html#StartupSocketConfigError"><span class="hs-identifier hs-var">StartupSocketConfigError</span></a></span><span> </span><span class="annot"><span class="annottext">SocketConfigError
</span><a href="#local-6989586621681945348"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-431"></span><span>        </span><span class="annot"><span class="annottext">SocketConfigError
-&gt; IO
     (Maybe SocketOrSocketInfo, Maybe SocketOrSocketInfo,
      Maybe LocalSocketOrSocketInfo)
forall e a. Exception e =&gt; e -&gt; IO a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#throwIO"><span class="hs-identifier hs-var">Exception.throwIO</span></a></span><span> </span><span class="annot"><span class="annottext">SocketConfigError
</span><a href="#local-6989586621681945348"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-432"></span><span>
</span><span id="line-433"></span><span>  </span><span id="local-6989586621681945350"><span class="annot"><span class="annottext">NodeDatabasePaths
</span><a href="#local-6989586621681945350"><span class="hs-identifier hs-var">dbPath</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; IO NodeDatabasePaths
</span><a href="Cardano.Node.Run.html#canonDbPath"><span class="hs-identifier hs-var">canonDbPath</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-434"></span><span>
</span><span id="line-435"></span><span>  </span><span id="local-6989586621681945352"><span class="annot"><span class="annottext">StrictTVar IO (PublicPeerSelectionState RemoteAddress)
</span><a href="#local-6989586621681945352"><span class="hs-identifier hs-var">publicPeerSelectionVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (StrictTVar IO (PublicPeerSelectionState RemoteAddress))
forall (m :: * -&gt; *) peeraddr.
(MonadSTM m, Ord peeraddr) =&gt;
m (StrictTVar m (PublicPeerSelectionState peeraddr))
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.Governor.Types.html#makePublicPeerSelectionStateVar"><span class="hs-identifier hs-var">makePublicPeerSelectionStateVar</span></a></span><span>
</span><span id="line-436"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621681945353"><span class="hs-identifier hs-type">diffusionArguments</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.Common.html#Arguments"><span class="hs-identifier hs-type">Diffusion.Arguments</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/f0p0xzsqxbckmc8cbp9giz9ys6pi14wq-network-lib-network-3.2.7.0-haddock-doc/share/doc/network/html/src/Network.Socket.Types.html#Socket"><span class="hs-identifier hs-type">Socket</span></a></span><span>   </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.NodeToNode.html#RemoteAddress"><span class="hs-identifier hs-type">RemoteAddress</span></a></span><span>
</span><span id="line-437"></span><span>                                                </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-framework-0.18.0.2-e5e675f5f8bd9f2a1e99040ff85ace8bb30006cb1118a4f0531fde62ebeff5fc/share/doc/html/src/Ouroboros.Network.Snocket.html#LocalSocket"><span class="hs-identifier hs-type">LocalSocket</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-framework-0.18.0.2-e5e675f5f8bd9f2a1e99040ff85ace8bb30006cb1118a4f0531fde62ebeff5fc/share/doc/html/src/Ouroboros.Network.Snocket.html#LocalAddress"><span class="hs-identifier hs-type">LocalAddress</span></a></span><span>
</span><span id="line-438"></span><span>      </span><span id="local-6989586621681945353"><span class="annot"><span class="annottext">diffusionArguments :: Arguments IO Socket RemoteAddress LocalSocket LocalAddress
</span><a href="#local-6989586621681945353"><span class="hs-identifier hs-var hs-var">diffusionArguments</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-439"></span><span>        </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.Common.html#Arguments"><span class="hs-identifier hs-type">Diffusion.Arguments</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-440"></span><span>            </span><span class="annot"><span class="annottext">daIPv4Address :: Maybe (Either Socket RemoteAddress)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.Common.html#daIPv4Address"><span class="hs-identifier hs-var">Diffusion.daIPv4Address</span></a></span><span>  </span><span class="hs-glyph">=</span><span>
</span><span id="line-441"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe SocketOrSocketInfo
</span><a href="#local-6989586621681945342"><span class="hs-identifier hs-var">publicIPv4SocketOrAddr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-442"></span><span>                </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Configuration.Socket.html#ActualSocket"><span class="hs-identifier hs-type">ActualSocket</span></a></span><span> </span><span id="local-6989586621681945357"><span class="annot"><span class="annottext">Socket
</span><a href="#local-6989586621681945357"><span class="hs-identifier hs-var">socket</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either Socket RemoteAddress -&gt; Maybe (Either Socket RemoteAddress)
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Socket -&gt; Either Socket RemoteAddress
forall a b. a -&gt; Either a b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">Socket
</span><a href="#local-6989586621681945357"><span class="hs-identifier hs-var">socket</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-443"></span><span>                </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Configuration.Socket.html#SocketInfo"><span class="hs-identifier hs-type">SocketInfo</span></a></span><span> </span><span id="local-6989586621681945359"><span class="annot"><span class="annottext">RemoteAddress
</span><a href="#local-6989586621681945359"><span class="hs-identifier hs-var">addr</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either Socket RemoteAddress -&gt; Maybe (Either Socket RemoteAddress)
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RemoteAddress -&gt; Either Socket RemoteAddress
forall a b. b -&gt; Either a b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteAddress
</span><a href="#local-6989586621681945359"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-444"></span><span>                </span><span class="annot"><span class="annottext">Maybe SocketOrSocketInfo
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Either Socket RemoteAddress)
forall a. Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-445"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">daIPv6Address :: Maybe (Either Socket RemoteAddress)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.Common.html#daIPv6Address"><span class="hs-identifier hs-var">Diffusion.daIPv6Address</span></a></span><span>  </span><span class="hs-glyph">=</span><span>
</span><span id="line-446"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe SocketOrSocketInfo
</span><a href="#local-6989586621681945343"><span class="hs-identifier hs-var">publicIPv6SocketOrAddr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-447"></span><span>                </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Configuration.Socket.html#ActualSocket"><span class="hs-identifier hs-type">ActualSocket</span></a></span><span> </span><span id="local-6989586621681945361"><span class="annot"><span class="annottext">Socket
</span><a href="#local-6989586621681945361"><span class="hs-identifier hs-var">socket</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either Socket RemoteAddress -&gt; Maybe (Either Socket RemoteAddress)
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Socket -&gt; Either Socket RemoteAddress
forall a b. a -&gt; Either a b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">Socket
</span><a href="#local-6989586621681945361"><span class="hs-identifier hs-var">socket</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-448"></span><span>                </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Configuration.Socket.html#SocketInfo"><span class="hs-identifier hs-type">SocketInfo</span></a></span><span> </span><span id="local-6989586621681945362"><span class="annot"><span class="annottext">RemoteAddress
</span><a href="#local-6989586621681945362"><span class="hs-identifier hs-var">addr</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either Socket RemoteAddress -&gt; Maybe (Either Socket RemoteAddress)
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RemoteAddress -&gt; Either Socket RemoteAddress
forall a b. b -&gt; Either a b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteAddress
</span><a href="#local-6989586621681945362"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-449"></span><span>                </span><span class="annot"><span class="annottext">Maybe SocketOrSocketInfo
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Either Socket RemoteAddress)
forall a. Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-450"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">daLocalAddress :: Maybe (Either LocalSocket LocalAddress)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.Common.html#daLocalAddress"><span class="hs-identifier hs-var">Diffusion.daLocalAddress</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-451"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe LocalSocketOrSocketInfo
</span><a href="#local-6989586621681945344"><span class="hs-identifier hs-var">localSocketOrPath</span></a></span><span> </span><span class="hs-keyword">of</span><span>  </span><span class="hs-comment">-- TODO allow expressing the Nothing case in the config</span><span>
</span><span id="line-452"></span><span>                </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Configuration.Socket.html#ActualSocket"><span class="hs-identifier hs-type">ActualSocket</span></a></span><span> </span><span id="local-6989586621681945364"><span class="annot"><span class="annottext">LocalSocket
</span><a href="#local-6989586621681945364"><span class="hs-identifier hs-var">localSocket</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either LocalSocket LocalAddress
-&gt; Maybe (Either LocalSocket LocalAddress)
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalSocket -&gt; Either LocalSocket LocalAddress
forall a b. a -&gt; Either a b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span>  </span><span class="annot"><span class="annottext">LocalSocket
</span><a href="#local-6989586621681945364"><span class="hs-identifier hs-var">localSocket</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-453"></span><span>                </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Configuration.Socket.html#SocketInfo"><span class="hs-identifier hs-type">SocketInfo</span></a></span><span> </span><span id="local-6989586621681945365"><span class="annot"><span class="annottext">LocalAddress
</span><a href="#local-6989586621681945365"><span class="hs-identifier hs-var">localAddr</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either LocalSocket LocalAddress
-&gt; Maybe (Either LocalSocket LocalAddress)
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalAddress -&gt; Either LocalSocket LocalAddress
forall a b. b -&gt; Either a b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">LocalAddress
</span><a href="#local-6989586621681945365"><span class="hs-identifier hs-var">localAddr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-454"></span><span>                </span><span class="annot"><span class="annottext">Maybe LocalSocketOrSocketInfo
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>                         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Either LocalSocket LocalAddress)
forall a. Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-455"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">daAcceptedConnectionsLimit :: AcceptedConnectionsLimit
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.Common.html#daAcceptedConnectionsLimit"><span class="hs-identifier hs-var">Diffusion.daAcceptedConnectionsLimit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; AcceptedConnectionsLimit
</span><a href="Cardano.Node.Configuration.POM.html#ncAcceptedConnectionsLimit"><span class="hs-identifier hs-var">ncAcceptedConnectionsLimit</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-456"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">daMode :: DiffusionMode
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.Common.html#daMode"><span class="hs-identifier hs-var">Diffusion.daMode</span></a></span><span>                     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; DiffusionMode
</span><a href="Cardano.Node.Configuration.POM.html#ncDiffusionMode"><span class="hs-identifier hs-var">ncDiffusionMode</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-457"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">daPublicPeerSelectionVar :: StrictTVar IO (PublicPeerSelectionState RemoteAddress)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.Common.html#daPublicPeerSelectionVar"><span class="hs-identifier hs-var">Diffusion.daPublicPeerSelectionVar</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictTVar IO (PublicPeerSelectionState RemoteAddress)
</span><a href="#local-6989586621681945352"><span class="hs-identifier hs-var">publicPeerSelectionVar</span></a></span><span>
</span><span id="line-458"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">daEgressPollInterval :: DiffTime
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.Common.html#daEgressPollInterval"><span class="hs-identifier hs-var">Diffusion.daEgressPollInterval</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; DiffTime
</span><a href="Cardano.Node.Configuration.POM.html#ncEgressPollInterval"><span class="hs-identifier hs-var">ncEgressPollInterval</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-459"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-460"></span><span>
</span><span id="line-461"></span><span>  </span><span id="local-6989586621681945373"><span class="annot"><span class="annottext">Maybe RemoteAddress
</span><a href="#local-6989586621681945373"><span class="hs-identifier hs-var">ipv4</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(SocketOrSocketInfo -&gt; IO RemoteAddress)
-&gt; Maybe SocketOrSocketInfo -&gt; IO (Maybe RemoteAddress)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; Maybe a -&gt; f (Maybe b)
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="annot"><span class="annottext">SocketOrSocketInfo -&gt; IO RemoteAddress
</span><a href="Cardano.Node.Configuration.Socket.html#getSocketOrSocketInfoAddr"><span class="hs-identifier hs-var">getSocketOrSocketInfoAddr</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SocketOrSocketInfo
</span><a href="#local-6989586621681945342"><span class="hs-identifier hs-var">publicIPv4SocketOrAddr</span></a></span><span>
</span><span id="line-462"></span><span>  </span><span id="local-6989586621681945375"><span class="annot"><span class="annottext">Maybe RemoteAddress
</span><a href="#local-6989586621681945375"><span class="hs-identifier hs-var">ipv6</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(SocketOrSocketInfo -&gt; IO RemoteAddress)
-&gt; Maybe SocketOrSocketInfo -&gt; IO (Maybe RemoteAddress)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; Maybe a -&gt; f (Maybe b)
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="annot"><span class="annottext">SocketOrSocketInfo -&gt; IO RemoteAddress
</span><a href="Cardano.Node.Configuration.Socket.html#getSocketOrSocketInfoAddr"><span class="hs-identifier hs-var">getSocketOrSocketInfoAddr</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SocketOrSocketInfo
</span><a href="#local-6989586621681945343"><span class="hs-identifier hs-var">publicIPv6SocketOrAddr</span></a></span><span>
</span><span id="line-463"></span><span>
</span><span id="line-464"></span><span>  </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk) -&gt; StartupTrace blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO (StartupTrace blk)
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO (StartupTrace blk)
</span><a href="Cardano.Node.Tracing.html#startupTracer"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-465"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[RemoteAddress]
-&gt; Maybe LocalSocketOrSocketInfo
-&gt; Map NodeToNodeVersion (BlockNodeToNodeVersion blk)
-&gt; Map NodeToClientVersion (BlockNodeToClientVersion blk)
-&gt; StartupTrace blk
forall blk.
[RemoteAddress]
-&gt; Maybe LocalSocketOrSocketInfo
-&gt; Map NodeToNodeVersion (BlockNodeToNodeVersion blk)
-&gt; Map NodeToClientVersion (BlockNodeToClientVersion blk)
-&gt; StartupTrace blk
</span><a href="Cardano.Node.Startup.html#StartupInfo"><span class="hs-identifier hs-var">StartupInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Maybe RemoteAddress] -&gt; [RemoteAddress]
forall a. [Maybe a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Maybe.html#catMaybes"><span class="hs-identifier hs-var">catMaybes</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Maybe RemoteAddress
</span><a href="#local-6989586621681945373"><span class="hs-identifier hs-var">ipv4</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe RemoteAddress
</span><a href="#local-6989586621681945375"><span class="hs-identifier hs-var">ipv6</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-466"></span><span>                         </span><span class="annot"><span class="annottext">Maybe LocalSocketOrSocketInfo
</span><a href="#local-6989586621681945344"><span class="hs-identifier hs-var">localSocketOrPath</span></a></span><span>
</span><span id="line-467"></span><span>                         </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">((Maybe NodeToNodeVersion, Maybe NodeToClientVersion)
 -&gt; Maybe NodeToNodeVersion)
-&gt; Map NodeToNodeVersion (BlockNodeToNodeVersion blk)
-&gt; Map NodeToNodeVersion (BlockNodeToNodeVersion blk)
forall k v.
Ord k =&gt;
((Maybe NodeToNodeVersion, Maybe NodeToClientVersion) -&gt; Maybe k)
-&gt; Map k v -&gt; Map k v
</span><a href="#local-6989586621681945377"><span class="hs-identifier hs-var">limitToLatestReleasedVersion</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe NodeToNodeVersion, Maybe NodeToClientVersion)
-&gt; Maybe NodeToNodeVersion
forall a b. (a, b) -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span>
</span><span id="line-468"></span><span>                         </span><span class="annot"><span class="annottext">(Map NodeToNodeVersion (BlockNodeToNodeVersion blk)
 -&gt; Map NodeToNodeVersion (BlockNodeToNodeVersion blk))
-&gt; (Proxy blk
    -&gt; Map NodeToNodeVersion (BlockNodeToNodeVersion blk))
-&gt; Proxy blk
-&gt; Map NodeToNodeVersion (BlockNodeToNodeVersion blk)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy blk -&gt; Map NodeToNodeVersion (BlockNodeToNodeVersion blk)
forall blk.
SupportedNetworkProtocolVersion blk =&gt;
Proxy blk -&gt; Map NodeToNodeVersion (BlockNodeToNodeVersion blk)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-0.27.0.0-004c8b8862bcdf99608d21368eda63ae7ec76430a4bb20826e436605913605d0/share/doc/html/src/Ouroboros.Consensus.Node.NetworkProtocolVersion.html#supportedNodeToNodeVersions"><span class="hs-identifier hs-var">supportedNodeToNodeVersions</span></a></span><span>
</span><span id="line-469"></span><span>                         </span><span class="annot"><span class="annottext">(Proxy blk -&gt; Map NodeToNodeVersion (BlockNodeToNodeVersion blk))
-&gt; Proxy blk -&gt; Map NodeToNodeVersion (BlockNodeToNodeVersion blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. Proxy t
forall {k} (t :: k). Proxy t
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Proxy.html#Proxy"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621681944296"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-470"></span><span>                         </span><span class="hs-special">)</span><span>
</span><span id="line-471"></span><span>                         </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">((Maybe NodeToNodeVersion, Maybe NodeToClientVersion)
 -&gt; Maybe NodeToClientVersion)
-&gt; Map NodeToClientVersion (BlockNodeToClientVersion blk)
-&gt; Map NodeToClientVersion (BlockNodeToClientVersion blk)
forall k v.
Ord k =&gt;
((Maybe NodeToNodeVersion, Maybe NodeToClientVersion) -&gt; Maybe k)
-&gt; Map k v -&gt; Map k v
</span><a href="#local-6989586621681945377"><span class="hs-identifier hs-var">limitToLatestReleasedVersion</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe NodeToNodeVersion, Maybe NodeToClientVersion)
-&gt; Maybe NodeToClientVersion
forall a b. (a, b) -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span>
</span><span id="line-472"></span><span>                         </span><span class="annot"><span class="annottext">(Map NodeToClientVersion (BlockNodeToClientVersion blk)
 -&gt; Map NodeToClientVersion (BlockNodeToClientVersion blk))
-&gt; (Proxy blk
    -&gt; Map NodeToClientVersion (BlockNodeToClientVersion blk))
-&gt; Proxy blk
-&gt; Map NodeToClientVersion (BlockNodeToClientVersion blk)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy blk -&gt; Map NodeToClientVersion (BlockNodeToClientVersion blk)
forall blk.
SupportedNetworkProtocolVersion blk =&gt;
Proxy blk -&gt; Map NodeToClientVersion (BlockNodeToClientVersion blk)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-0.27.0.0-004c8b8862bcdf99608d21368eda63ae7ec76430a4bb20826e436605913605d0/share/doc/html/src/Ouroboros.Consensus.Node.NetworkProtocolVersion.html#supportedNodeToClientVersions"><span class="hs-identifier hs-var">supportedNodeToClientVersions</span></a></span><span>
</span><span id="line-473"></span><span>                         </span><span class="annot"><span class="annottext">(Proxy blk
 -&gt; Map NodeToClientVersion (BlockNodeToClientVersion blk))
-&gt; Proxy blk
-&gt; Map NodeToClientVersion (BlockNodeToClientVersion blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. Proxy t
forall {k} (t :: k). Proxy t
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Proxy.html#Proxy"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621681944296"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-474"></span><span>                         </span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-475"></span><span>
</span><span id="line-476"></span><span>  </span><span class="annot"><span class="annottext">ShutdownConfig -&gt; Tracer IO ShutdownTrace -&gt; IO () -&gt; IO ()
</span><a href="Cardano.Node.Handlers.Shutdown.html#withShutdownHandling"><span class="hs-identifier hs-var">withShutdownHandling</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NodeConfiguration -&gt; ShutdownConfig
</span><a href="Cardano.Node.Configuration.POM.html#ncShutdownConfig"><span class="hs-identifier hs-var">ncShutdownConfig</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO ShutdownTrace
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO ShutdownTrace
</span><a href="Cardano.Node.Tracing.html#shutdownTracer"><span class="hs-identifier hs-var">shutdownTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-477"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NetworkP2PMode p2p
</span><a href="#local-6989586621681945332"><span class="hs-identifier hs-var">p2pMode</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-478"></span><span>      </span><span class="annot"><span class="annottext">NetworkP2PMode p2p
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#EnabledP2PMode"><span class="hs-identifier hs-var">EnabledP2PMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-479"></span><span>        </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk) -&gt; StartupTrace blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO (StartupTrace blk)
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO (StartupTrace blk)
</span><a href="Cardano.Node.Tracing.html#startupTracer"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-480"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DiffusionMode -&gt; StartupTrace blk
forall blk. DiffusionMode -&gt; StartupTrace blk
</span><a href="Cardano.Node.Startup.html#StartupP2PInfo"><span class="hs-identifier hs-var">StartupP2PInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NodeConfiguration -&gt; DiffusionMode
</span><a href="Cardano.Node.Configuration.POM.html#ncDiffusionMode"><span class="hs-identifier hs-var">ncDiffusionMode</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-481"></span><span>        </span><span id="local-6989586621681945456"><span class="annot"><span class="annottext">nt :: NetworkTopology RelayAccessPoint
</span><a href="#local-6989586621681945456"><span class="hs-identifier hs-var">nt</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Cardano.Node.Configuration.TopologyP2P.html#RealNodeTopology"><span class="hs-identifier hs-type">TopologyP2P.RealNodeTopology</span></a></span><span>
</span><span id="line-482"></span><span>          </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681945458"><span class="annot"><span class="annottext">UseLedgerPeers
ntUseLedgerPeers :: UseLedgerPeers
ntUseLedgerPeers :: forall adr. NetworkTopology adr -&gt; UseLedgerPeers
</span><a href="#local-6989586621681945458"><span class="hs-identifier hs-var hs-var">ntUseLedgerPeers</span></a></span></span><span>
</span><span id="line-483"></span><span>          </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681945460"><span class="annot"><span class="annottext">UseBootstrapPeers
ntUseBootstrapPeers :: UseBootstrapPeers
ntUseBootstrapPeers :: forall adr. NetworkTopology adr -&gt; UseBootstrapPeers
</span><a href="#local-6989586621681945460"><span class="hs-identifier hs-var hs-var">ntUseBootstrapPeers</span></a></span></span><span>
</span><span id="line-484"></span><span>          </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681945462"><span class="annot"><span class="annottext">Maybe PeerSnapshotFile
ntPeerSnapshotPath :: Maybe PeerSnapshotFile
ntPeerSnapshotPath :: forall adr. NetworkTopology adr -&gt; Maybe PeerSnapshotFile
</span><a href="#local-6989586621681945462"><span class="hs-identifier hs-var hs-var">ntPeerSnapshotPath</span></a></span></span><span>
</span><span id="line-485"></span><span>          </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
-&gt; Tracer IO (StartupTrace blk)
-&gt; IO (NetworkTopology RelayAccessPoint)
forall blk adr.
FromJSON adr =&gt;
NodeConfiguration
-&gt; Tracer IO (StartupTrace blk) -&gt; IO (NetworkTopology adr)
</span><a href="Cardano.Node.Configuration.TopologyP2P.html#readTopologyFileOrError"><span class="hs-identifier hs-var">TopologyP2P.readTopologyFileOrError</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO (StartupTrace blk)
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO (StartupTrace blk)
</span><a href="Cardano.Node.Tracing.html#startupTracer"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-486"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681945465"><span class="annot"><span class="annottext">[(HotValency, WarmValency,
  Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
</span><a href="#local-6989586621681945465"><span class="hs-identifier hs-var">localRoots</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681945466"><span class="annot"><span class="annottext">Map RelayAccessPoint PeerAdvertise
</span><a href="#local-6989586621681945466"><span class="hs-identifier hs-var">publicRoots</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NetworkTopology RelayAccessPoint
-&gt; ([(HotValency, WarmValency,
      Map RelayAccessPoint (LocalRootConfig PeerTrustable))],
    Map RelayAccessPoint PeerAdvertise)
</span><a href="Cardano.Node.Run.html#producerAddresses"><span class="hs-identifier hs-var">producerAddresses</span></a></span><span> </span><span class="annot"><span class="annottext">NetworkTopology RelayAccessPoint
</span><a href="#local-6989586621681945456"><span class="hs-identifier hs-var">nt</span></a></span><span>
</span><span id="line-487"></span><span>        </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk) -&gt; StartupTrace blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO (StartupTrace blk)
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO (StartupTrace blk)
</span><a href="Cardano.Node.Tracing.html#startupTracer"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-488"></span><span>                </span><span class="annot"><span class="annottext">(StartupTrace blk -&gt; IO ()) -&gt; StartupTrace blk -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[(HotValency, WarmValency,
  Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
-&gt; Map RelayAccessPoint PeerAdvertise
-&gt; UseLedgerPeers
-&gt; Maybe PeerSnapshotFile
-&gt; StartupTrace blk
forall blk.
[(HotValency, WarmValency,
  Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
-&gt; Map RelayAccessPoint PeerAdvertise
-&gt; UseLedgerPeers
-&gt; Maybe PeerSnapshotFile
-&gt; StartupTrace blk
</span><a href="Cardano.Node.Startup.html#NetworkConfig"><span class="hs-identifier hs-var">NetworkConfig</span></a></span><span> </span><span class="annot"><span class="annottext">[(HotValency, WarmValency,
  Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
</span><a href="#local-6989586621681945465"><span class="hs-identifier hs-var">localRoots</span></a></span><span>
</span><span id="line-489"></span><span>                                </span><span class="annot"><span class="annottext">Map RelayAccessPoint PeerAdvertise
</span><a href="#local-6989586621681945466"><span class="hs-identifier hs-var">publicRoots</span></a></span><span>
</span><span id="line-490"></span><span>                                </span><span class="annot"><span class="annottext">UseLedgerPeers
</span><a href="#local-6989586621681945458"><span class="hs-identifier hs-var">ntUseLedgerPeers</span></a></span><span>
</span><span id="line-491"></span><span>                                </span><span class="annot"><span class="annottext">Maybe PeerSnapshotFile
</span><a href="#local-6989586621681945462"><span class="hs-identifier hs-var">ntPeerSnapshotPath</span></a></span><span>
</span><span id="line-492"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; PeerSharing
</span><a href="Cardano.Node.Configuration.POM.html#ncPeerSharing"><span class="hs-identifier hs-var">ncPeerSharing</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-493"></span><span>          </span><span class="annot"><span class="annottext">PeerSharing
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.PeerSharing.html#PeerSharingEnabled"><span class="hs-identifier hs-var">PeerSharingEnabled</span></a></span><span>
</span><span id="line-494"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ProtocolFilepaths -&gt; Bool
</span><a href="Cardano.Node.Types.html#hasProtocolFile"><span class="hs-identifier hs-var">hasProtocolFile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NodeConfiguration -&gt; ProtocolFilepaths
</span><a href="Cardano.Node.Configuration.POM.html#ncProtocolFiles"><span class="hs-identifier hs-var">ncProtocolFiles</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-495"></span><span>                </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk) -&gt; StartupTrace blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO (StartupTrace blk)
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO (StartupTrace blk)
</span><a href="Cardano.Node.Tracing.html#startupTracer"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(StartupTrace blk -&gt; IO ())
-&gt; (String -&gt; StartupTrace blk) -&gt; String -&gt; IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; StartupTrace blk
forall blk. Text -&gt; StartupTrace blk
</span><a href="Cardano.Node.Startup.html#NetworkConfigUpdateWarning"><span class="hs-identifier hs-var">NetworkConfigUpdateWarning</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; StartupTrace blk)
-&gt; (String -&gt; Text) -&gt; String -&gt; StartupTrace blk
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Internal.html#pack"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO ()) -&gt; String -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-496"></span><span>                     </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Mainnet block producers may not meet the Praos performance guarantees &quot;</span></span><span>
</span><span id="line-497"></span><span>                  </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;and host IP address will be leaked since peer sharing is enabled.&quot;</span></span><span>
</span><span id="line-498"></span><span>          </span><span id="local-6989586621681945472"><span class="annot"><span class="annottext">PeerSharing
</span><a href="#local-6989586621681945472"><span class="hs-identifier hs-var">_otherwise</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-499"></span><span>        </span><span id="local-6989586621681945473"><span class="annot"><span class="annottext">StrictTVar
  IO
  [(HotValency, WarmValency,
    Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
</span><a href="#local-6989586621681945473"><span class="hs-identifier hs-var">localRootsVar</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(HotValency, WarmValency,
  Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
-&gt; IO
     (StrictTVar
        IO
        [(HotValency, WarmValency,
          Map RelayAccessPoint (LocalRootConfig PeerTrustable))])
forall (m :: * -&gt; *) a. MonadSTM m =&gt; a -&gt; m (StrictTVar m a)
</span><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#newTVarIO"><span class="hs-identifier hs-var">newTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">[(HotValency, WarmValency,
  Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
</span><a href="#local-6989586621681945465"><span class="hs-identifier hs-var">localRoots</span></a></span><span>
</span><span id="line-500"></span><span>        </span><span id="local-6989586621681945475"><span class="annot"><span class="annottext">StrictTVar IO (Map RelayAccessPoint PeerAdvertise)
</span><a href="#local-6989586621681945475"><span class="hs-identifier hs-var">publicRootsVar</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Map RelayAccessPoint PeerAdvertise
-&gt; IO (StrictTVar IO (Map RelayAccessPoint PeerAdvertise))
forall (m :: * -&gt; *) a. MonadSTM m =&gt; a -&gt; m (StrictTVar m a)
</span><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#newTVarIO"><span class="hs-identifier hs-var">newTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">Map RelayAccessPoint PeerAdvertise
</span><a href="#local-6989586621681945466"><span class="hs-identifier hs-var">publicRoots</span></a></span><span>
</span><span id="line-501"></span><span>        </span><span id="local-6989586621681945476"><span class="annot"><span class="annottext">StrictTVar IO UseLedgerPeers
</span><a href="#local-6989586621681945476"><span class="hs-identifier hs-var">useLedgerVar</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">UseLedgerPeers -&gt; IO (StrictTVar IO UseLedgerPeers)
forall (m :: * -&gt; *) a. MonadSTM m =&gt; a -&gt; m (StrictTVar m a)
</span><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#newTVarIO"><span class="hs-identifier hs-var">newTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">UseLedgerPeers
</span><a href="#local-6989586621681945458"><span class="hs-identifier hs-var">ntUseLedgerPeers</span></a></span><span>
</span><span id="line-502"></span><span>        </span><span id="local-6989586621681945477"><span class="annot"><span class="annottext">StrictTVar IO UseBootstrapPeers
</span><a href="#local-6989586621681945477"><span class="hs-identifier hs-var">useBootstrapVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">UseBootstrapPeers -&gt; IO (StrictTVar IO UseBootstrapPeers)
forall (m :: * -&gt; *) a. MonadSTM m =&gt; a -&gt; m (StrictTVar m a)
</span><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#newTVarIO"><span class="hs-identifier hs-var">newTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">UseBootstrapPeers
</span><a href="#local-6989586621681945460"><span class="hs-identifier hs-var">ntUseBootstrapPeers</span></a></span><span>
</span><span id="line-503"></span><span>        </span><span id="local-6989586621681945478"><span class="annot"><span class="annottext">StrictTVar IO (Maybe PeerSnapshotFile)
</span><a href="#local-6989586621681945478"><span class="hs-identifier hs-var">ledgerPeerSnapshotPathVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe PeerSnapshotFile
-&gt; IO (StrictTVar IO (Maybe PeerSnapshotFile))
forall (m :: * -&gt; *) a. MonadSTM m =&gt; a -&gt; m (StrictTVar m a)
</span><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#newTVarIO"><span class="hs-identifier hs-var">newTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe PeerSnapshotFile
</span><a href="#local-6989586621681945462"><span class="hs-identifier hs-var">ntPeerSnapshotPath</span></a></span><span>
</span><span id="line-504"></span><span>        </span><span id="local-6989586621681945479"><span class="annot"><span class="annottext">StrictTVar IO (Maybe LedgerPeerSnapshot)
</span><a href="#local-6989586621681945479"><span class="hs-identifier hs-var">ledgerPeerSnapshotVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe LedgerPeerSnapshot
-&gt; IO (StrictTVar IO (Maybe LedgerPeerSnapshot))
forall (m :: * -&gt; *) a. MonadSTM m =&gt; a -&gt; m (StrictTVar m a)
</span><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#newTVarIO"><span class="hs-identifier hs-var">newTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe LedgerPeerSnapshot
 -&gt; IO (StrictTVar IO (Maybe LedgerPeerSnapshot)))
-&gt; IO (Maybe LedgerPeerSnapshot)
-&gt; IO (StrictTVar IO (Maybe LedgerPeerSnapshot))
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3D%3C%3C"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk)
-&gt; NodeConfiguration
-&gt; STM IO (Maybe PeerSnapshotFile)
-&gt; STM IO UseLedgerPeers
-&gt; (Maybe LedgerPeerSnapshot -&gt; STM IO ())
-&gt; IO (Maybe LedgerPeerSnapshot)
forall blk.
Tracer IO (StartupTrace blk)
-&gt; NodeConfiguration
-&gt; STM IO (Maybe PeerSnapshotFile)
-&gt; STM IO UseLedgerPeers
-&gt; (Maybe LedgerPeerSnapshot -&gt; STM IO ())
-&gt; IO (Maybe LedgerPeerSnapshot)
</span><a href="Cardano.Node.Run.html#updateLedgerPeerSnapshot"><span class="hs-identifier hs-var">updateLedgerPeerSnapshot</span></a></span><span>
</span><span id="line-505"></span><span>                                                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO (StartupTrace blk)
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO (StartupTrace blk)
</span><a href="Cardano.Node.Tracing.html#startupTracer"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-506"></span><span>                                                </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-507"></span><span>                                                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StrictTVar IO (Maybe PeerSnapshotFile)
-&gt; STM IO (Maybe PeerSnapshotFile)
forall (m :: * -&gt; *) a. MonadSTM m =&gt; StrictTVar m a -&gt; STM m a
</span><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#readTVar"><span class="hs-identifier hs-var">readTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar IO (Maybe PeerSnapshotFile)
</span><a href="#local-6989586621681945478"><span class="hs-identifier hs-var">ledgerPeerSnapshotPathVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-508"></span><span>                                                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StrictTVar IO UseLedgerPeers -&gt; STM IO UseLedgerPeers
forall (m :: * -&gt; *) a. MonadSTM m =&gt; StrictTVar m a -&gt; STM m a
</span><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#readTVar"><span class="hs-identifier hs-var">readTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar IO UseLedgerPeers
</span><a href="#local-6989586621681945476"><span class="hs-identifier hs-var">useLedgerVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-509"></span><span>                                                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">STM () -&gt; Maybe LedgerPeerSnapshot -&gt; STM ()
STM () -&gt; Maybe LedgerPeerSnapshot -&gt; STM IO ()
forall a b. a -&gt; b -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">(STM () -&gt; Maybe LedgerPeerSnapshot -&gt; STM IO ())
-&gt; (() -&gt; STM ()) -&gt; () -&gt; Maybe LedgerPeerSnapshot -&gt; STM IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; STM ()
forall a. a -&gt; STM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(() -&gt; Maybe LedgerPeerSnapshot -&gt; STM IO ())
-&gt; () -&gt; Maybe LedgerPeerSnapshot -&gt; STM IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-510"></span><span>
</span><span id="line-511"></span><span>        </span><span id="local-6989586621681945483"><span class="annot"><span class="annottext">StrictTVar IO ChurnMode
</span><a href="#local-6989586621681945483"><span class="hs-identifier hs-var">churnModeVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ChurnMode -&gt; IO (StrictTVar IO ChurnMode)
forall (m :: * -&gt; *) a. MonadSTM m =&gt; a -&gt; m (StrictTVar m a)
</span><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#newTVarIO"><span class="hs-identifier hs-var">newTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">ChurnMode
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.Types.html#ChurnModeNormal"><span class="hs-identifier hs-var">ChurnModeNormal</span></a></span><span>
</span><span id="line-512"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681945485"><span class="annot"><span class="annottext">nodeArgs :: RunNodeArgs IO RemoteAddress LocalAddress blk p2p
</span><a href="#local-6989586621681945485"><span class="hs-identifier hs-var hs-var">nodeArgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#RunNodeArgs"><span class="hs-identifier hs-type">RunNodeArgs</span></a></span><span>
</span><span id="line-513"></span><span>              </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">$sel:rnGenesisConfig:RunNodeArgs :: GenesisConfig
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3ArnGenesisConfig%3ARunNodeArgs"><span class="hs-identifier hs-var">rnGenesisConfig</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; GenesisConfig
</span><a href="Cardano.Node.Configuration.POM.html#ncGenesisConfig"><span class="hs-identifier hs-var">ncGenesisConfig</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-514"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:rnTraceConsensus:RunNodeArgs :: Tracers IO (ConnectionId RemoteAddress) LocalConnectionId blk
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3ArnTraceConsensus%3ARunNodeArgs"><span class="hs-identifier hs-var">rnTraceConsensus</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracers IO (ConnectionId RemoteAddress) LocalConnectionId blk
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracers IO (ConnectionId peer) (ConnectionId localPeer) blk
</span><a href="Cardano.Node.Tracing.html#consensusTracers"><span class="hs-identifier hs-var">consensusTracers</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span>
</span><span id="line-515"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:rnTraceNTN:RunNodeArgs :: Tracers IO RemoteAddress blk DeserialiseFailure
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3ArnTraceNTN%3ARunNodeArgs"><span class="hs-identifier hs-var">rnTraceNTN</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracers IO RemoteAddress blk DeserialiseFailure
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracers IO peer blk DeserialiseFailure
</span><a href="Cardano.Node.Tracing.html#nodeToNodeTracers"><span class="hs-identifier hs-var">nodeToNodeTracers</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span>
</span><span id="line-516"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:rnTraceNTC:RunNodeArgs :: Tracers IO LocalConnectionId blk DeserialiseFailure
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3ArnTraceNTC%3ARunNodeArgs"><span class="hs-identifier hs-var">rnTraceNTC</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracers IO LocalConnectionId blk DeserialiseFailure
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracers IO (ConnectionId localPeer) blk DeserialiseFailure
</span><a href="Cardano.Node.Tracing.html#nodeToClientTracers"><span class="hs-identifier hs-var">nodeToClientTracers</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span>
</span><span id="line-517"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:rnProtocolInfo:RunNodeArgs :: ProtocolInfo blk
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3ArnProtocolInfo%3ARunNodeArgs"><span class="hs-identifier hs-var">rnProtocolInfo</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProtocolInfo blk
</span><a href="#local-6989586621681945341"><span class="hs-identifier hs-var">pInfo</span></a></span><span>
</span><span id="line-518"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:rnNodeKernelHook:RunNodeArgs :: ResourceRegistry IO
-&gt; NodeKernel IO RemoteAddress LocalConnectionId blk -&gt; IO ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3ArnNodeKernelHook%3ARunNodeArgs"><span class="hs-identifier hs-var">rnNodeKernelHook</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681945497"><span class="annot"><span class="annottext">ResourceRegistry IO
</span><a href="#local-6989586621681945497"><span class="hs-identifier hs-var">registry</span></a></span></span><span> </span><span id="local-6989586621681945498"><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk
</span><a href="#local-6989586621681945498"><span class="hs-identifier hs-var">nodeKernel</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-519"></span><span>                  </span><span class="hs-comment">-- set the initial block forging</span><span>
</span><span id="line-520"></span><span>                  </span><span id="local-6989586621681945499"><span class="annot"><span class="annottext">[BlockForging IO blk]
</span><a href="#local-6989586621681945499"><span class="hs-identifier hs-var">blockForging</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(ProtocolInfo blk, IO [BlockForging IO blk])
-&gt; IO [BlockForging IO blk]
forall a b. (a, b) -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtocolInfoArgs blk
-&gt; (ProtocolInfo blk, IO [BlockForging IO blk])
forall (m :: * -&gt; *) blk.
Protocol m blk =&gt;
ProtocolInfoArgs blk -&gt; (ProtocolInfo blk, m [BlockForging m blk])
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-api-10.18.0.0-cf96680f7a5f126623afc107f46c4390ef848488275422e58a8da147b9415623/share/doc/html/src/Cardano.Api.Consensus.Internal.Protocol.html#protocolInfo"><span class="hs-identifier hs-var">Api.protocolInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolInfoArgs blk
</span><a href="#local-6989586621681945331"><span class="hs-identifier hs-var">runP</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-521"></span><span>
</span><span id="line-522"></span><span>                  </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NodeConfiguration -&gt; Bool
</span><a href="Cardano.Node.Configuration.POM.html#ncStartAsNonProducingNode"><span class="hs-identifier hs-var">ncStartAsNonProducingNode</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-523"></span><span>                    </span><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk
-&gt; [BlockForging IO blk] -&gt; IO ()
forall (m :: * -&gt; *) addrNTN addrNTC blk.
NodeKernel m addrNTN addrNTC blk -&gt; [BlockForging m blk] -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.NodeKernel.html#%24sel%3AsetBlockForging%3ANodeKernel"><span class="hs-identifier hs-var">setBlockForging</span></a></span><span> </span><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk
</span><a href="#local-6989586621681945498"><span class="hs-identifier hs-var">nodeKernel</span></a></span><span> </span><span class="annot"><span class="annottext">[BlockForging IO blk]
</span><a href="#local-6989586621681945499"><span class="hs-identifier hs-var">blockForging</span></a></span><span>
</span><span id="line-524"></span><span>
</span><span id="line-525"></span><span>                  </span><span class="annot"><span class="annottext">ShutdownConfig
-&gt; Tracer IO ShutdownTrace
-&gt; ResourceRegistry IO
-&gt; ChainDB IO blk
-&gt; IO ()
forall blk.
HasHeader (Header blk) =&gt;
ShutdownConfig
-&gt; Tracer IO ShutdownTrace
-&gt; ResourceRegistry IO
-&gt; ChainDB IO blk
-&gt; IO ()
</span><a href="Cardano.Node.Handlers.Shutdown.html#maybeSpawnOnSlotSyncedShutdownHandler"><span class="hs-identifier hs-var">maybeSpawnOnSlotSyncedShutdownHandler</span></a></span><span>
</span><span id="line-526"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NodeConfiguration -&gt; ShutdownConfig
</span><a href="Cardano.Node.Configuration.POM.html#ncShutdownConfig"><span class="hs-identifier hs-var">ncShutdownConfig</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-527"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO ShutdownTrace
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO ShutdownTrace
</span><a href="Cardano.Node.Tracing.html#shutdownTracer"><span class="hs-identifier hs-var">shutdownTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-528"></span><span>                    </span><span class="annot"><span class="annottext">ResourceRegistry IO
</span><a href="#local-6989586621681945497"><span class="hs-identifier hs-var">registry</span></a></span><span>
</span><span id="line-529"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk -&gt; ChainDB IO blk
forall (m :: * -&gt; *) addrNTN addrNTC blk.
NodeKernel m addrNTN addrNTC blk -&gt; ChainDB m blk
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.NodeKernel.html#%24sel%3AgetChainDB%3ANodeKernel"><span class="hs-identifier hs-var">Node.getChainDB</span></a></span><span> </span><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk
</span><a href="#local-6989586621681945498"><span class="hs-identifier hs-var">nodeKernel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-530"></span><span>                  </span><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk -&gt; IO ()
</span><a href="#local-6989586621681945335"><span class="hs-identifier hs-var">onKernel</span></a></span><span> </span><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk
</span><a href="#local-6989586621681945498"><span class="hs-identifier hs-var">nodeKernel</span></a></span><span>
</span><span id="line-531"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:rnEnableP2P:RunNodeArgs :: NetworkP2PMode p2p
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3ArnEnableP2P%3ARunNodeArgs"><span class="hs-identifier hs-var">rnEnableP2P</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NetworkP2PMode p2p
</span><a href="#local-6989586621681945332"><span class="hs-identifier hs-var">p2pMode</span></a></span><span>
</span><span id="line-532"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:rnPeerSharing:RunNodeArgs :: PeerSharing
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3ArnPeerSharing%3ARunNodeArgs"><span class="hs-identifier hs-var">rnPeerSharing</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; PeerSharing
</span><a href="Cardano.Node.Configuration.POM.html#ncPeerSharing"><span class="hs-identifier hs-var">ncPeerSharing</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-533"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:rnGetUseBootstrapPeers:RunNodeArgs :: STM IO UseBootstrapPeers
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3ArnGetUseBootstrapPeers%3ARunNodeArgs"><span class="hs-identifier hs-var">rnGetUseBootstrapPeers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictTVar IO UseBootstrapPeers -&gt; STM IO UseBootstrapPeers
forall (m :: * -&gt; *) a. MonadSTM m =&gt; StrictTVar m a -&gt; STM m a
</span><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#readTVar"><span class="hs-identifier hs-var">readTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar IO UseBootstrapPeers
</span><a href="#local-6989586621681945477"><span class="hs-identifier hs-var">useBootstrapVar</span></a></span><span>
</span><span id="line-534"></span><span>              </span><span class="hs-special">}</span><span class="hs-cpp">
#ifdef UNIX
</span><span>        </span><span class="hs-comment">-- initial `SIGHUP` handler, which only rereads the topology file but</span><span>
</span><span id="line-537"></span><span>        </span><span class="hs-comment">-- doesn't update block forging.  The latter is only possible once</span><span>
</span><span id="line-538"></span><span>        </span><span class="hs-comment">-- consensus initialised (e.g. reapplied all blocks).</span><span>
</span><span id="line-539"></span><span>        </span><span class="annot"><span class="annottext">Handler
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Signal -&gt; Handler -&gt; Maybe SignalSet -&gt; IO Handler
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/unix-2.8.4.0/src/System.Posix.Signals.html#installHandler"><span class="hs-identifier hs-var">Signals.installHandler</span></a></span><span>
</span><span id="line-540"></span><span>              </span><span class="annot"><span class="annottext">Signal
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/unix-2.8.4.0/src/System.Posix.Signals.html#sigHUP"><span class="hs-identifier hs-var">Signals.sigHUP</span></a></span><span>
</span><span id="line-541"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IO () -&gt; Handler
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/unix-2.8.4.0/src/System.Posix.Signals.html#Catch"><span class="hs-identifier hs-var">Signals.Catch</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; Handler) -&gt; IO () -&gt; Handler
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-542"></span><span>                </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk)
-&gt; NodeConfiguration
-&gt; StrictTVar
     IO
     [(HotValency, WarmValency,
       Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
-&gt; StrictTVar IO (Map RelayAccessPoint PeerAdvertise)
-&gt; StrictTVar IO UseLedgerPeers
-&gt; StrictTVar IO UseBootstrapPeers
-&gt; StrictTVar IO (Maybe PeerSnapshotFile)
-&gt; IO ()
forall blk.
Tracer IO (StartupTrace blk)
-&gt; NodeConfiguration
-&gt; StrictTVar
     IO
     [(HotValency, WarmValency,
       Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
-&gt; StrictTVar IO (Map RelayAccessPoint PeerAdvertise)
-&gt; StrictTVar IO UseLedgerPeers
-&gt; StrictTVar IO UseBootstrapPeers
-&gt; StrictTVar IO (Maybe PeerSnapshotFile)
-&gt; IO ()
</span><a href="Cardano.Node.Run.html#updateTopologyConfiguration"><span class="hs-identifier hs-var">updateTopologyConfiguration</span></a></span><span>
</span><span id="line-543"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO (StartupTrace blk)
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO (StartupTrace blk)
</span><a href="Cardano.Node.Tracing.html#startupTracer"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-544"></span><span>                  </span><span class="annot"><span class="annottext">StrictTVar
  IO
  [(HotValency, WarmValency,
    Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
</span><a href="#local-6989586621681945473"><span class="hs-identifier hs-var">localRootsVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar IO (Map RelayAccessPoint PeerAdvertise)
</span><a href="#local-6989586621681945475"><span class="hs-identifier hs-var">publicRootsVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar IO UseLedgerPeers
</span><a href="#local-6989586621681945476"><span class="hs-identifier hs-var">useLedgerVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar IO UseBootstrapPeers
</span><a href="#local-6989586621681945477"><span class="hs-identifier hs-var">useBootstrapVar</span></a></span><span>
</span><span id="line-545"></span><span>                  </span><span class="annot"><span class="annottext">StrictTVar IO (Maybe PeerSnapshotFile)
</span><a href="#local-6989586621681945478"><span class="hs-identifier hs-var">ledgerPeerSnapshotPathVar</span></a></span><span>
</span><span id="line-546"></span><span>                </span><span class="annot"><span class="annottext">IO (Maybe LedgerPeerSnapshot) -&gt; IO ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Functor.html#void"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Maybe LedgerPeerSnapshot) -&gt; IO ())
-&gt; IO (Maybe LedgerPeerSnapshot) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk)
-&gt; NodeConfiguration
-&gt; STM IO (Maybe PeerSnapshotFile)
-&gt; STM IO UseLedgerPeers
-&gt; (Maybe LedgerPeerSnapshot -&gt; STM IO ())
-&gt; IO (Maybe LedgerPeerSnapshot)
forall blk.
Tracer IO (StartupTrace blk)
-&gt; NodeConfiguration
-&gt; STM IO (Maybe PeerSnapshotFile)
-&gt; STM IO UseLedgerPeers
-&gt; (Maybe LedgerPeerSnapshot -&gt; STM IO ())
-&gt; IO (Maybe LedgerPeerSnapshot)
</span><a href="Cardano.Node.Run.html#updateLedgerPeerSnapshot"><span class="hs-identifier hs-var">updateLedgerPeerSnapshot</span></a></span><span>
</span><span id="line-547"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO (StartupTrace blk)
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO (StartupTrace blk)
</span><a href="Cardano.Node.Tracing.html#startupTracer"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-548"></span><span>                  </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-549"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StrictTVar IO (Maybe PeerSnapshotFile)
-&gt; STM IO (Maybe PeerSnapshotFile)
forall (m :: * -&gt; *) a. MonadSTM m =&gt; StrictTVar m a -&gt; STM m a
</span><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#readTVar"><span class="hs-identifier hs-var">readTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar IO (Maybe PeerSnapshotFile)
</span><a href="#local-6989586621681945478"><span class="hs-identifier hs-var">ledgerPeerSnapshotPathVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-550"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StrictTVar IO UseLedgerPeers -&gt; STM IO UseLedgerPeers
forall (m :: * -&gt; *) a. MonadSTM m =&gt; StrictTVar m a -&gt; STM m a
</span><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#readTVar"><span class="hs-identifier hs-var">readTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar IO UseLedgerPeers
</span><a href="#local-6989586621681945476"><span class="hs-identifier hs-var">useLedgerVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-551"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StrictTVar IO (Maybe LedgerPeerSnapshot)
-&gt; Maybe LedgerPeerSnapshot -&gt; STM IO ()
forall (m :: * -&gt; *) a.
MonadSTM m =&gt;
StrictTVar m a -&gt; a -&gt; STM m ()
</span><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#writeTVar"><span class="hs-identifier hs-var">writeTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar IO (Maybe LedgerPeerSnapshot)
</span><a href="#local-6989586621681945479"><span class="hs-identifier hs-var">ledgerPeerSnapshotVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-552"></span><span>                </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk) -&gt; StartupTrace blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO (StartupTrace blk)
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO (StartupTrace blk)
</span><a href="Cardano.Node.Tracing.html#startupTracer"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EnabledBlockForging -&gt; StartupTrace blk
forall blk. EnabledBlockForging -&gt; StartupTrace blk
</span><a href="Cardano.Node.Startup.html#BlockForgingUpdate"><span class="hs-identifier hs-var">BlockForgingUpdate</span></a></span><span> </span><span class="annot"><span class="annottext">EnabledBlockForging
</span><a href="Cardano.Node.Startup.html#NotEffective"><span class="hs-identifier hs-var">NotEffective</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-553"></span><span>              </span><span class="hs-special">)</span><span>
</span><span id="line-554"></span><span>              </span><span class="annot"><span class="annottext">Maybe SignalSet
forall a. Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-cpp">
#endif
</span><span>        </span><span id="local-6989586621681945510"><span class="annot"><span class="annottext">ForkPolicy RemoteAddress
</span><a href="#local-6989586621681945510"><span class="hs-identifier hs-var">nForkPolicy</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ResponderCoreAffinityPolicy -&gt; IO (ForkPolicy RemoteAddress)
forall peerAddr.
Hashable peerAddr =&gt;
ResponderCoreAffinityPolicy -&gt; IO (ForkPolicy peerAddr)
</span><a href="Cardano.Node.Configuration.POM.html#getForkPolicy"><span class="hs-identifier hs-var">getForkPolicy</span></a></span><span> </span><span class="annot"><span class="annottext">(ResponderCoreAffinityPolicy -&gt; IO (ForkPolicy RemoteAddress))
-&gt; ResponderCoreAffinityPolicy -&gt; IO (ForkPolicy RemoteAddress)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; ResponderCoreAffinityPolicy
</span><a href="Cardano.Node.Configuration.POM.html#ncResponderCoreAffinityPolicy"><span class="hs-identifier hs-var">ncResponderCoreAffinityPolicy</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-557"></span><span>        </span><span id="local-6989586621681945512"><span class="annot"><span class="annottext">ForkPolicy LocalAddress
</span><a href="#local-6989586621681945512"><span class="hs-identifier hs-var">cForkPolicy</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ResponderCoreAffinityPolicy -&gt; IO (ForkPolicy LocalAddress)
forall peerAddr.
Hashable peerAddr =&gt;
ResponderCoreAffinityPolicy -&gt; IO (ForkPolicy peerAddr)
</span><a href="Cardano.Node.Configuration.POM.html#getForkPolicy"><span class="hs-identifier hs-var">getForkPolicy</span></a></span><span> </span><span class="annot"><span class="annottext">(ResponderCoreAffinityPolicy -&gt; IO (ForkPolicy LocalAddress))
-&gt; ResponderCoreAffinityPolicy -&gt; IO (ForkPolicy LocalAddress)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; ResponderCoreAffinityPolicy
</span><a href="Cardano.Node.Configuration.POM.html#ncResponderCoreAffinityPolicy"><span class="hs-identifier hs-var">ncResponderCoreAffinityPolicy</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-558"></span><span>        </span><span class="annot"><span class="annottext">IO () -&gt; IO ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Functor.html#void"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-559"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681945513"><span class="annot"><span class="annottext">diffusionArgumentsExtra :: P2PDecision 'P2P (Tracer IO TracePublicRootPeers) ()
-&gt; P2PDecision 'P2P (STM IO FetchMode) ()
-&gt; P2PDecision 'P2P (LedgerPeersConsensusInterface IO) ()
-&gt; ArgumentsExtra
     'P2P
     (ExtraArguments IO)
     ExtraState
     DebugPeerSelectionState
     PeerTrustable
     (ExtraPeers RemoteAddress)
     (LedgerPeersConsensusInterface IO)
     (ExtraArguments IO)
     (ExtraPeerSelectionSetsWithSizes RemoteAddress)
     BootstrapPeersCriticalTimeoutError
     RemoteAddress
     LocalAddress
     Resolver
     IOException
     IO
</span><a href="#local-6989586621681945513"><span class="hs-identifier hs-var hs-var">diffusionArgumentsExtra</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-560"></span><span>                </span><span class="annot"><span class="annottext">ForkPolicy RemoteAddress
-&gt; ForkPolicy LocalAddress
-&gt; NodeConfiguration
-&gt; STM
     IO
     [(HotValency, WarmValency,
       Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
-&gt; STM IO (Map RelayAccessPoint PeerAdvertise)
-&gt; STM IO UseLedgerPeers
-&gt; STM IO UseBootstrapPeers
-&gt; STM IO (Maybe LedgerPeerSnapshot)
-&gt; StrictTVar IO ChurnMode
-&gt; P2PDecision 'P2P (Tracer IO TracePublicRootPeers) ()
-&gt; P2PDecision 'P2P (STM IO FetchMode) ()
-&gt; P2PDecision 'P2P (LedgerPeersConsensusInterface IO) ()
-&gt; ArgumentsExtra
     'P2P
     (ExtraArguments IO)
     ExtraState
     DebugPeerSelectionState
     PeerTrustable
     (ExtraPeers RemoteAddress)
     (LedgerPeersConsensusInterface IO)
     (ExtraArguments IO)
     (ExtraPeerSelectionSetsWithSizes RemoteAddress)
     BootstrapPeersCriticalTimeoutError
     RemoteAddress
     LocalAddress
     Resolver
     IOException
     IO
forall ntnAddr ntcAddr extraDebugState.
Ord ntnAddr =&gt;
ForkPolicy ntnAddr
-&gt; ForkPolicy ntcAddr
-&gt; NodeConfiguration
-&gt; STM
     IO
     [(HotValency, WarmValency,
       Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
-&gt; STM IO (Map RelayAccessPoint PeerAdvertise)
-&gt; STM IO UseLedgerPeers
-&gt; STM IO UseBootstrapPeers
-&gt; STM IO (Maybe LedgerPeerSnapshot)
-&gt; StrictTVar IO ChurnMode
-&gt; P2PDecision 'P2P (Tracer IO TracePublicRootPeers) ()
-&gt; P2PDecision 'P2P (STM IO FetchMode) ()
-&gt; P2PDecision 'P2P (LedgerPeersConsensusInterface IO) ()
-&gt; ArgumentsExtra
     'P2P
     (ExtraArguments IO)
     ExtraState
     extraDebugState
     PeerTrustable
     (ExtraPeers ntnAddr)
     (LedgerPeersConsensusInterface IO)
     (ExtraArguments IO)
     (ExtraPeerSelectionSetsWithSizes ntnAddr)
     BootstrapPeersCriticalTimeoutError
     ntnAddr
     ntcAddr
     Resolver
     IOException
     IO
</span><a href="Cardano.Node.Run.html#mkP2PArguments"><span class="hs-identifier hs-var">mkP2PArguments</span></a></span><span> </span><span class="annot"><span class="annottext">ForkPolicy RemoteAddress
</span><a href="#local-6989586621681945510"><span class="hs-identifier hs-var">nForkPolicy</span></a></span><span> </span><span class="annot"><span class="annottext">ForkPolicy LocalAddress
</span><a href="#local-6989586621681945512"><span class="hs-identifier hs-var">cForkPolicy</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-561"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StrictTVar
  IO
  [(HotValency, WarmValency,
    Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
-&gt; STM
     IO
     [(HotValency, WarmValency,
       Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
forall (m :: * -&gt; *) a. MonadSTM m =&gt; StrictTVar m a -&gt; STM m a
</span><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#readTVar"><span class="hs-identifier hs-var">readTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar
  IO
  [(HotValency, WarmValency,
    Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
</span><a href="#local-6989586621681945473"><span class="hs-identifier hs-var">localRootsVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-562"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StrictTVar IO (Map RelayAccessPoint PeerAdvertise)
-&gt; STM IO (Map RelayAccessPoint PeerAdvertise)
forall (m :: * -&gt; *) a. MonadSTM m =&gt; StrictTVar m a -&gt; STM m a
</span><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#readTVar"><span class="hs-identifier hs-var">readTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar IO (Map RelayAccessPoint PeerAdvertise)
</span><a href="#local-6989586621681945475"><span class="hs-identifier hs-var">publicRootsVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-563"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StrictTVar IO UseLedgerPeers -&gt; STM IO UseLedgerPeers
forall (m :: * -&gt; *) a. MonadSTM m =&gt; StrictTVar m a -&gt; STM m a
</span><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#readTVar"><span class="hs-identifier hs-var">readTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar IO UseLedgerPeers
</span><a href="#local-6989586621681945476"><span class="hs-identifier hs-var">useLedgerVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-564"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StrictTVar IO UseBootstrapPeers -&gt; STM IO UseBootstrapPeers
forall (m :: * -&gt; *) a. MonadSTM m =&gt; StrictTVar m a -&gt; STM m a
</span><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#readTVar"><span class="hs-identifier hs-var">readTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar IO UseBootstrapPeers
</span><a href="#local-6989586621681945477"><span class="hs-identifier hs-var">useBootstrapVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-565"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StrictTVar IO (Maybe LedgerPeerSnapshot)
-&gt; STM IO (Maybe LedgerPeerSnapshot)
forall (m :: * -&gt; *) a. MonadSTM m =&gt; StrictTVar m a -&gt; STM m a
</span><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#readTVar"><span class="hs-identifier hs-var">readTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar IO (Maybe LedgerPeerSnapshot)
</span><a href="#local-6989586621681945479"><span class="hs-identifier hs-var">ledgerPeerSnapshotVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-566"></span><span>                  </span><span class="annot"><span class="annottext">StrictTVar IO ChurnMode
</span><a href="#local-6989586621681945483"><span class="hs-identifier hs-var">churnModeVar</span></a></span><span>
</span><span id="line-567"></span><span>          </span><span class="hs-keyword">in</span><span>
</span><span id="line-568"></span><span>          </span><span class="annot"><span class="annottext">RunNodeArgs IO RemoteAddress LocalAddress blk p2p
-&gt; StdRunNodeArgs
     IO
     blk
     p2p
     (ExtraArguments IO)
     ExtraState
     DebugPeerSelectionState
     Any
     (LedgerPeersConsensusInterface IO)
     (ExtraPeers RemoteAddress)
     PeerTrustable
     (ExtraArguments IO)
     (ExtraPeerSelectionSetsWithSizes RemoteAddress)
     BootstrapPeersCriticalTimeoutError
-&gt; IO ()
forall blk (p2p :: P2P) extraState extraActions extraPeers
       extraFlags extraChurnArgs extraCounters exception.
(RunNode blk, Monoid extraPeers, Eq extraCounters, Eq extraFlags,
 Exception exception) =&gt;
RunNodeArgs IO RemoteAddress LocalAddress blk p2p
-&gt; StdRunNodeArgs
     IO
     blk
     p2p
     (ExtraArguments IO)
     extraState
     DebugPeerSelectionState
     extraActions
     (LedgerPeersConsensusInterface IO)
     extraPeers
     extraFlags
     extraChurnArgs
     extraCounters
     exception
-&gt; IO ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#run"><span class="hs-identifier hs-var">Node.run</span></a></span><span>
</span><span id="line-569"></span><span>            </span><span class="annot"><span class="annottext">RunNodeArgs IO RemoteAddress LocalAddress blk p2p
</span><a href="#local-6989586621681945485"><span class="hs-identifier hs-var">nodeArgs</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-570"></span><span>                </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3ArnNodeKernelHook%3ARunNodeArgs"><span class="hs-identifier hs-var">rnNodeKernelHook</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681945515"><span class="annot"><span class="annottext">ResourceRegistry IO
</span><a href="#local-6989586621681945515"><span class="hs-identifier hs-var">registry</span></a></span></span><span> </span><span id="local-6989586621681945516"><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk
</span><a href="#local-6989586621681945516"><span class="hs-identifier hs-var">nodeKernel</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-571"></span><span>                  </span><span class="hs-comment">-- reinstall `SIGHUP` handler</span><span>
</span><span id="line-572"></span><span>                  </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk)
-&gt; BlockType blk
-&gt; NodeConfiguration
-&gt; NodeKernel IO RemoteAddress LocalConnectionId blk
-&gt; StrictTVar
     IO
     [(HotValency, WarmValency,
       Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
-&gt; StrictTVar IO (Map RelayAccessPoint PeerAdvertise)
-&gt; StrictTVar IO UseLedgerPeers
-&gt; StrictTVar IO UseBootstrapPeers
-&gt; StrictTVar IO (Maybe PeerSnapshotFile)
-&gt; StrictTVar IO (Maybe LedgerPeerSnapshot)
-&gt; IO ()
forall blk.
Tracer IO (StartupTrace blk)
-&gt; BlockType blk
-&gt; NodeConfiguration
-&gt; NodeKernel IO RemoteAddress LocalConnectionId blk
-&gt; StrictTVar
     IO
     [(HotValency, WarmValency,
       Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
-&gt; StrictTVar IO (Map RelayAccessPoint PeerAdvertise)
-&gt; StrictTVar IO UseLedgerPeers
-&gt; StrictTVar IO UseBootstrapPeers
-&gt; StrictTVar IO (Maybe PeerSnapshotFile)
-&gt; StrictTVar IO (Maybe LedgerPeerSnapshot)
-&gt; IO ()
</span><a href="Cardano.Node.Run.html#installP2PSigHUPHandler"><span class="hs-identifier hs-var">installP2PSigHUPHandler</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO (StartupTrace blk)
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO (StartupTrace blk)
</span><a href="Cardano.Node.Tracing.html#startupTracer"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BlockType blk
</span><a href="#local-6989586621681945330"><span class="hs-identifier hs-var">blockType</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span> </span><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk
</span><a href="#local-6989586621681945516"><span class="hs-identifier hs-var">nodeKernel</span></a></span><span>
</span><span id="line-573"></span><span>                                          </span><span class="annot"><span class="annottext">StrictTVar
  IO
  [(HotValency, WarmValency,
    Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
</span><a href="#local-6989586621681945473"><span class="hs-identifier hs-var">localRootsVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar IO (Map RelayAccessPoint PeerAdvertise)
</span><a href="#local-6989586621681945475"><span class="hs-identifier hs-var">publicRootsVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar IO UseLedgerPeers
</span><a href="#local-6989586621681945476"><span class="hs-identifier hs-var">useLedgerVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar IO UseBootstrapPeers
</span><a href="#local-6989586621681945477"><span class="hs-identifier hs-var">useBootstrapVar</span></a></span><span>
</span><span id="line-574"></span><span>                                          </span><span class="annot"><span class="annottext">StrictTVar IO (Maybe PeerSnapshotFile)
</span><a href="#local-6989586621681945478"><span class="hs-identifier hs-var">ledgerPeerSnapshotPathVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar IO (Maybe LedgerPeerSnapshot)
</span><a href="#local-6989586621681945479"><span class="hs-identifier hs-var">ledgerPeerSnapshotVar</span></a></span><span>
</span><span id="line-575"></span><span>                  </span><span class="annot"><span class="annottext">RunNodeArgs IO RemoteAddress LocalAddress blk p2p
-&gt; ResourceRegistry IO
-&gt; NodeKernel IO RemoteAddress LocalConnectionId blk
-&gt; IO ()
forall (m :: * -&gt; *) addrNTN addrNTC blk (p2p :: P2P).
RunNodeArgs m addrNTN addrNTC blk p2p
-&gt; ResourceRegistry m
-&gt; NodeKernel m addrNTN (ConnectionId addrNTC) blk
-&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3ArnNodeKernelHook%3ARunNodeArgs"><span class="hs-identifier hs-var">rnNodeKernelHook</span></a></span><span> </span><span class="annot"><span class="annottext">RunNodeArgs IO RemoteAddress LocalAddress blk p2p
</span><a href="#local-6989586621681945485"><span class="hs-identifier hs-var">nodeArgs</span></a></span><span> </span><span class="annot"><span class="annottext">ResourceRegistry IO
</span><a href="#local-6989586621681945515"><span class="hs-identifier hs-var">registry</span></a></span><span> </span><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk
</span><a href="#local-6989586621681945516"><span class="hs-identifier hs-var">nodeKernel</span></a></span><span>
</span><span id="line-576"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-577"></span><span>            </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#StdRunNodeArgs"><span class="hs-identifier hs-type">StdRunNodeArgs</span></a></span><span>
</span><span id="line-578"></span><span>              </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">$sel:srnBfcMaxConcurrencyBulkSync:StdRunNodeArgs :: Maybe Word
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnBfcMaxConcurrencyBulkSync%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnBfcMaxConcurrencyBulkSync</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MaxConcurrencyBulkSync -&gt; Word
</span><a href="Cardano.Node.Types.html#unMaxConcurrencyBulkSync"><span class="hs-identifier hs-var">unMaxConcurrencyBulkSync</span></a></span><span> </span><span class="annot"><span class="annottext">(MaxConcurrencyBulkSync -&gt; Word)
-&gt; Maybe MaxConcurrencyBulkSync -&gt; Maybe Word
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; Maybe MaxConcurrencyBulkSync
</span><a href="Cardano.Node.Configuration.POM.html#ncMaxConcurrencyBulkSync"><span class="hs-identifier hs-var">ncMaxConcurrencyBulkSync</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-579"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:srnBfcMaxConcurrencyDeadline:StdRunNodeArgs :: Maybe Word
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnBfcMaxConcurrencyDeadline%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnBfcMaxConcurrencyDeadline</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MaxConcurrencyDeadline -&gt; Word
</span><a href="Cardano.Node.Types.html#unMaxConcurrencyDeadline"><span class="hs-identifier hs-var">unMaxConcurrencyDeadline</span></a></span><span> </span><span class="annot"><span class="annottext">(MaxConcurrencyDeadline -&gt; Word)
-&gt; Maybe MaxConcurrencyDeadline -&gt; Maybe Word
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; Maybe MaxConcurrencyDeadline
</span><a href="Cardano.Node.Configuration.POM.html#ncMaxConcurrencyDeadline"><span class="hs-identifier hs-var">ncMaxConcurrencyDeadline</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-580"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:srnChainDbValidateOverride:StdRunNodeArgs :: Bool
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnChainDbValidateOverride%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnChainDbValidateOverride</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; Bool
</span><a href="Cardano.Node.Configuration.POM.html#ncValidateDB"><span class="hs-identifier hs-var">ncValidateDB</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-581"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:srnDatabasePath:StdRunNodeArgs :: NodeDatabasePaths
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnDatabasePath%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnDatabasePath</span></a></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NodeDatabasePaths
</span><a href="#local-6989586621681945350"><span class="hs-identifier hs-var">dbPath</span></a></span><span>
</span><span id="line-582"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:srnDiffusionArguments:StdRunNodeArgs :: Arguments IO Socket RemoteAddress LocalSocket LocalAddress
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnDiffusionArguments%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnDiffusionArguments</span></a></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arguments IO Socket RemoteAddress LocalSocket LocalAddress
</span><a href="#local-6989586621681945353"><span class="hs-identifier hs-var">diffusionArguments</span></a></span><span>
</span><span id="line-583"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:srnDiffusionArgumentsExtra:StdRunNodeArgs :: P2PDecision 'P2P (Tracer IO TracePublicRootPeers) ()
-&gt; P2PDecision 'P2P (STM IO FetchMode) ()
-&gt; P2PDecision 'P2P (LedgerPeersConsensusInterface IO) ()
-&gt; ArgumentsExtra
     'P2P
     (ExtraArguments IO)
     ExtraState
     DebugPeerSelectionState
     PeerTrustable
     (ExtraPeers RemoteAddress)
     (LedgerPeersConsensusInterface IO)
     (ExtraArguments IO)
     (ExtraPeerSelectionSetsWithSizes RemoteAddress)
     BootstrapPeersCriticalTimeoutError
     RemoteAddress
     LocalAddress
     Resolver
     IOException
     IO
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnDiffusionArgumentsExtra%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnDiffusionArgumentsExtra</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">P2PDecision 'P2P (Tracer IO TracePublicRootPeers) ()
-&gt; P2PDecision 'P2P (STM IO FetchMode) ()
-&gt; P2PDecision 'P2P (LedgerPeersConsensusInterface IO) ()
-&gt; ArgumentsExtra
     'P2P
     (ExtraArguments IO)
     ExtraState
     DebugPeerSelectionState
     PeerTrustable
     (ExtraPeers RemoteAddress)
     (LedgerPeersConsensusInterface IO)
     (ExtraArguments IO)
     (ExtraPeerSelectionSetsWithSizes RemoteAddress)
     BootstrapPeersCriticalTimeoutError
     RemoteAddress
     LocalAddress
     Resolver
     IOException
     IO
</span><a href="#local-6989586621681945513"><span class="hs-identifier hs-var">diffusionArgumentsExtra</span></a></span><span>
</span><span id="line-584"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:srnDiffusionTracers:StdRunNodeArgs :: Tracers
  RemoteAddress NodeToNodeVersion LocalAddress NodeToClientVersion IO
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnDiffusionTracers%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnDiffusionTracers</span></a></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracers
     RemoteAddress NodeToNodeVersion LocalAddress NodeToClientVersion IO
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracers
     RemoteAddress NodeToNodeVersion LocalAddress NodeToClientVersion IO
</span><a href="Cardano.Node.Tracing.html#diffusionTracers"><span class="hs-identifier hs-var">diffusionTracers</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span>
</span><span id="line-585"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:srnDiffusionTracersExtra:StdRunNodeArgs :: ExtraTracers
  'P2P
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnDiffusionTracersExtra%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnDiffusionTracersExtra</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  'P2P
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; ExtraTracers
     'P2P
     ExtraState
     DebugPeerSelectionState
     PeerTrustable
     (ExtraPeers RemoteAddress)
     (ExtraPeerSelectionSetsWithSizes RemoteAddress)
     IO
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; ExtraTracers
     p2p
     extraState
     extraDebugState
     extraFlags
     extraPeers
     extraCounters
     m
</span><a href="Cardano.Node.Tracing.html#diffusionTracersExtra"><span class="hs-identifier hs-var">diffusionTracersExtra</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
Tracers
  RemoteAddress
  LocalAddress
  blk
  'P2P
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span>
</span><span id="line-586"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:srnEnableInDevelopmentVersions:StdRunNodeArgs :: Bool
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnEnableInDevelopmentVersions%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnEnableInDevelopmentVersions</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; Bool
</span><a href="Cardano.Node.Configuration.POM.html#ncExperimentalProtocolsEnabled"><span class="hs-identifier hs-var">ncExperimentalProtocolsEnabled</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-587"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:srnTraceChainDB:StdRunNodeArgs :: Tracer IO (TraceEvent blk)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnTraceChainDB%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnTraceChainDB</span></a></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO (TraceEvent blk)
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO (TraceEvent blk)
</span><a href="Cardano.Node.Tracing.html#chainDBTracer"><span class="hs-identifier hs-var">chainDBTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span>
</span><span id="line-588"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:srnMaybeMempoolCapacityOverride:StdRunNodeArgs :: Maybe MempoolCapacityBytesOverride
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnMaybeMempoolCapacityOverride%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnMaybeMempoolCapacityOverride</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; Maybe MempoolCapacityBytesOverride
</span><a href="Cardano.Node.Configuration.POM.html#ncMaybeMempoolCapacityOverride"><span class="hs-identifier hs-var">ncMaybeMempoolCapacityOverride</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-589"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:srnChainSyncTimeout:StdRunNodeArgs :: Maybe (IO ChainSyncTimeout)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnChainSyncTimeout%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnChainSyncTimeout</span></a></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (IO ChainSyncTimeout)
</span><a href="#local-6989586621681945540"><span class="hs-identifier hs-var">customizeChainSyncTimeout</span></a></span><span>
</span><span id="line-590"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:srnSigUSR1SignalHandler:StdRunNodeArgs :: forall (mode :: Mode) x y.
ExtraTracers
  'P2P
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; STM IO UseLedgerPeers
-&gt; PeerSharing
-&gt; STM IO UseBootstrapPeers
-&gt; STM IO LedgerStateJudgement
-&gt; NodeToNodeConnectionManager
     mode
     Socket
     RemoteAddress
     NodeToNodeVersionData
     NodeToNodeVersion
     IO
     x
     y
-&gt; StrictTVar
     IO
     (PeerSelectionState
        ExtraState
        PeerTrustable
        (ExtraPeers RemoteAddress)
        RemoteAddress
        (NodeToNodePeerConnectionHandle
           mode RemoteAddress NodeToNodeVersionData IO x y))
-&gt; PeerMetrics IO RemoteAddress
-&gt; IO ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnSigUSR1SignalHandler%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnSigUSR1SignalHandler</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.html#P2PTracers"><span class="hs-identifier hs-type">Diffusion.P2PTracers</span></a></span><span> </span><span id="local-6989586621681945545"><span class="annot"><span class="annottext">TracersExtra
  RemoteAddress
  NodeToNodeVersion
  NodeToNodeVersionData
  LocalAddress
  NodeToClientVersion
  NodeToClientVersionData
  IOException
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945545"><span class="hs-identifier hs-var">p2ptracers</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TracersExtra
  RemoteAddress
  NodeToNodeVersion
  NodeToNodeVersionData
  LocalAddress
  NodeToClientVersion
  NodeToClientVersionData
  IOException
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; STM IO UseLedgerPeers
-&gt; PeerSharing
-&gt; STM IO UseBootstrapPeers
-&gt; STM IO LedgerStateJudgement
-&gt; NodeToNodeConnectionManager
     mode
     Socket
     RemoteAddress
     NodeToNodeVersionData
     NodeToNodeVersion
     IO
     x
     y
-&gt; StrictTVar
     IO
     (PeerSelectionState
        ExtraState
        PeerTrustable
        (ExtraPeers RemoteAddress)
        RemoteAddress
        (NodeToNodePeerConnectionHandle
           mode RemoteAddress NodeToNodeVersionData IO x y))
-&gt; PeerMetrics IO RemoteAddress
-&gt; IO ()
forall ntnAddr ntnVersion ntnVersionData ntcAddr ntcVersion
       ntcVersionData resolverError extraState extraFlags extraPeers
       extraCounters (muxMode :: Mode) socket handle handleError peerconn.
Ord ntnAddr =&gt;
TracersExtra
  ntnAddr
  ntnVersion
  ntnVersionData
  ntcAddr
  ntcVersion
  ntcVersionData
  resolverError
  extraState
  DebugPeerSelectionState
  extraFlags
  extraPeers
  extraCounters
  IO
-&gt; STM IO UseLedgerPeers
-&gt; PeerSharing
-&gt; STM IO UseBootstrapPeers
-&gt; STM IO LedgerStateJudgement
-&gt; ConnectionManager muxMode socket ntnAddr handle handleError IO
-&gt; StrictTVar
     IO
     (PeerSelectionState
        ExtraState extraFlags extraPeers ntnAddr peerconn)
-&gt; PeerMetrics IO ntnAddr
-&gt; IO ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.Diffusion.Handlers.html#sigUSR1Handler"><span class="hs-identifier hs-var">sigUSR1Handler</span></a></span><span> </span><span class="annot"><span class="annottext">TracersExtra
  RemoteAddress
  NodeToNodeVersion
  NodeToNodeVersionData
  LocalAddress
  NodeToClientVersion
  NodeToClientVersionData
  IOException
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945545"><span class="hs-identifier hs-var">p2ptracers</span></a></span><span>
</span><span id="line-591"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:srnSnapshotPolicyArgs:StdRunNodeArgs :: SnapshotPolicyArgs
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnSnapshotPolicyArgs%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnSnapshotPolicyArgs</span></a></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SnapshotPolicyArgs
</span><a href="#local-6989586621681945547"><span class="hs-identifier hs-var">snapshotPolicyArgs</span></a></span><span>
</span><span id="line-592"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:srnQueryBatchSize:StdRunNodeArgs :: QueryBatchSize
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnQueryBatchSize%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnQueryBatchSize</span></a></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QueryBatchSize
</span><a href="#local-6989586621681945549"><span class="hs-identifier hs-var">queryBatchSize</span></a></span><span>
</span><span id="line-593"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:srnLdbFlavorArgs:StdRunNodeArgs :: Complete LedgerDbFlavorArgs IO
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnLdbFlavorArgs%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnLdbFlavorArgs</span></a></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LedgerDbSelectorFlag -&gt; Complete LedgerDbFlavorArgs IO
</span><a href="Cardano.Node.Configuration.LedgerDB.html#selectorToArgs"><span class="hs-identifier hs-var">selectorToArgs</span></a></span><span> </span><span class="annot"><span class="annottext">LedgerDbSelectorFlag
</span><a href="#local-6989586621681945552"><span class="hs-identifier hs-var">ldbBackend</span></a></span><span>
</span><span id="line-594"></span><span>              </span><span class="hs-special">}</span><span>
</span><span id="line-595"></span><span>      </span><span class="annot"><span class="annottext">NetworkP2PMode p2p
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#DisabledP2PMode"><span class="hs-identifier hs-var">DisabledP2PMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-596"></span><span>        </span><span id="local-6989586621681945577"><span class="annot"><span class="annottext">NetworkTopology RemoteAddress
</span><a href="#local-6989586621681945577"><span class="hs-identifier hs-var">nt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; IO (NetworkTopology RemoteAddress)
forall adr.
FromJSON adr =&gt;
NodeConfiguration -&gt; IO (NetworkTopology adr)
</span><a href="Cardano.Node.Configuration.Topology.html#readTopologyFileOrError"><span class="hs-identifier hs-var">TopologyNonP2P.readTopologyFileOrError</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-597"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681945579"><span class="annot"><span class="annottext">[NodeIPAddress]
</span><a href="#local-6989586621681945579"><span class="hs-identifier hs-var">ipProducerAddrs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681945580"><span class="annot"><span class="annottext">[(NodeDnsAddress, Int)]
</span><a href="#local-6989586621681945580"><span class="hs-identifier hs-var">dnsProducerAddrs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NetworkTopology RemoteAddress
-&gt; ([NodeIPAddress], [(NodeDnsAddress, Int)])
</span><a href="Cardano.Node.Run.html#producerAddressesNonP2P"><span class="hs-identifier hs-var">producerAddressesNonP2P</span></a></span><span> </span><span class="annot"><span class="annottext">NetworkTopology RemoteAddress
</span><a href="#local-6989586621681945577"><span class="hs-identifier hs-var">nt</span></a></span><span>
</span><span id="line-598"></span><span>
</span><span id="line-599"></span><span>            </span><span class="annot"><a href="#local-6989586621681945582"><span class="hs-identifier hs-type">dnsProducers</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-framework-0.18.0.2-e5e675f5f8bd9f2a1e99040ff85ace8bb30006cb1118a4f0531fde62ebeff5fc/share/doc/html/src/Ouroboros.Network.Subscription.Dns.html#DnsSubscriptionTarget"><span class="hs-identifier hs-type">DnsSubscriptionTarget</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-600"></span><span>            </span><span id="local-6989586621681945582"><span class="annot"><span class="annottext">dnsProducers :: [DnsSubscriptionTarget]
</span><a href="#local-6989586621681945582"><span class="hs-identifier hs-var hs-var">dnsProducers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Domain -&gt; PortNumber -&gt; Int -&gt; DnsSubscriptionTarget
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-framework-0.18.0.2-e5e675f5f8bd9f2a1e99040ff85ace8bb30006cb1118a4f0531fde62ebeff5fc/share/doc/html/src/Ouroboros.Network.Subscription.Dns.html#DnsSubscriptionTarget"><span class="hs-identifier hs-var">DnsSubscriptionTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Domain
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Encoding.html#encodeUtf8"><span class="hs-identifier hs-var">Text.encodeUtf8</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681945585"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PortNumber
</span><a href="#local-6989586621681945586"><span class="hs-identifier hs-var">port</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681945587"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-601"></span><span>                           </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Configuration.NodeAddress.html#NodeAddress"><span class="hs-identifier hs-type">NodeAddress</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Configuration.NodeAddress.html#NodeHostDnsAddress"><span class="hs-identifier hs-type">NodeHostDnsAddress</span></a></span><span> </span><span id="local-6989586621681945585"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681945585"><span class="hs-identifier hs-var">addr</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681945586"><span class="annot"><span class="annottext">PortNumber
</span><a href="#local-6989586621681945586"><span class="hs-identifier hs-var">port</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681945587"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681945587"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(NodeDnsAddress, Int)]
</span><a href="#local-6989586621681945580"><span class="hs-identifier hs-var">dnsProducerAddrs</span></a></span><span>
</span><span id="line-602"></span><span>                           </span><span class="hs-special">]</span><span>
</span><span id="line-603"></span><span>
</span><span id="line-604"></span><span>            </span><span class="annot"><a href="#local-6989586621681945590"><span class="hs-identifier hs-type">ipProducers</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-framework-0.18.0.2-e5e675f5f8bd9f2a1e99040ff85ace8bb30006cb1118a4f0531fde62ebeff5fc/share/doc/html/src/Ouroboros.Network.Subscription.Ip.html#IPSubscriptionTarget"><span class="hs-identifier hs-type">IPSubscriptionTarget</span></a></span><span>
</span><span id="line-605"></span><span>            </span><span id="local-6989586621681945590"><span class="annot"><span class="annottext">ipProducers :: IPSubscriptionTarget
</span><a href="#local-6989586621681945590"><span class="hs-identifier hs-var hs-var">ipProducers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[RemoteAddress] -&gt; Int -&gt; IPSubscriptionTarget
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-framework-0.18.0.2-e5e675f5f8bd9f2a1e99040ff85ace8bb30006cb1118a4f0531fde62ebeff5fc/share/doc/html/src/Ouroboros.Network.Subscription.Ip.html#IPSubscriptionTarget"><span class="hs-identifier hs-var">IPSubscriptionTarget</span></a></span><span>
</span><span id="line-606"></span><span>                           </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">(IP, PortNumber) -&gt; RemoteAddress
</span><a href="file:///nix/store/la27cjpkzj2bscz5id9ls70fyxww0z5n-iproute-lib-iproute-1.7.15-haddock-doc/share/doc/iproute/html/src/Data.IP.Addr.html#toSockAddr"><span class="hs-identifier hs-var">toSockAddr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IP
</span><a href="#local-6989586621681945592"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PortNumber
</span><a href="#local-6989586621681945593"><span class="hs-identifier hs-var">port</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-607"></span><span>                           </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Configuration.NodeAddress.html#NodeAddress"><span class="hs-identifier hs-type">NodeAddress</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Configuration.NodeAddress.html#NodeHostIPAddress"><span class="hs-identifier hs-type">NodeHostIPAddress</span></a></span><span> </span><span id="local-6989586621681945592"><span class="annot"><span class="annottext">IP
</span><a href="#local-6989586621681945592"><span class="hs-identifier hs-var">addr</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681945593"><span class="annot"><span class="annottext">PortNumber
</span><a href="#local-6989586621681945593"><span class="hs-identifier hs-var">port</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[NodeIPAddress]
</span><a href="#local-6989586621681945579"><span class="hs-identifier hs-var">ipProducerAddrs</span></a></span><span>
</span><span id="line-608"></span><span>                           </span><span class="hs-special">]</span><span>
</span><span id="line-609"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[NodeIPAddress] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[NodeIPAddress]
</span><a href="#local-6989586621681945579"><span class="hs-identifier hs-var">ipProducerAddrs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-610"></span><span>
</span><span id="line-611"></span><span>            </span><span id="local-6989586621681945596"><span class="annot"><span class="annottext">nodeArgs :: RunNodeArgs IO RemoteAddress LocalAddress blk p2p
</span><a href="#local-6989586621681945596"><span class="hs-identifier hs-var hs-var">nodeArgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#RunNodeArgs"><span class="hs-identifier hs-type">RunNodeArgs</span></a></span><span>
</span><span id="line-612"></span><span>                </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">$sel:rnGenesisConfig:RunNodeArgs :: GenesisConfig
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3ArnGenesisConfig%3ARunNodeArgs"><span class="hs-identifier hs-var">rnGenesisConfig</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; GenesisConfig
</span><a href="Cardano.Node.Configuration.POM.html#ncGenesisConfig"><span class="hs-identifier hs-var">ncGenesisConfig</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-613"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:rnTraceConsensus:RunNodeArgs :: Tracers IO (ConnectionId RemoteAddress) LocalConnectionId blk
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3ArnTraceConsensus%3ARunNodeArgs"><span class="hs-identifier hs-var">rnTraceConsensus</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracers IO (ConnectionId RemoteAddress) LocalConnectionId blk
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracers IO (ConnectionId peer) (ConnectionId localPeer) blk
</span><a href="Cardano.Node.Tracing.html#consensusTracers"><span class="hs-identifier hs-var">consensusTracers</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span>
</span><span id="line-614"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:rnTraceNTN:RunNodeArgs :: Tracers IO RemoteAddress blk DeserialiseFailure
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3ArnTraceNTN%3ARunNodeArgs"><span class="hs-identifier hs-var">rnTraceNTN</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracers IO RemoteAddress blk DeserialiseFailure
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracers IO peer blk DeserialiseFailure
</span><a href="Cardano.Node.Tracing.html#nodeToNodeTracers"><span class="hs-identifier hs-var">nodeToNodeTracers</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span>
</span><span id="line-615"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:rnTraceNTC:RunNodeArgs :: Tracers IO LocalConnectionId blk DeserialiseFailure
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3ArnTraceNTC%3ARunNodeArgs"><span class="hs-identifier hs-var">rnTraceNTC</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracers IO LocalConnectionId blk DeserialiseFailure
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracers IO (ConnectionId localPeer) blk DeserialiseFailure
</span><a href="Cardano.Node.Tracing.html#nodeToClientTracers"><span class="hs-identifier hs-var">nodeToClientTracers</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span>
</span><span id="line-616"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:rnProtocolInfo:RunNodeArgs :: ProtocolInfo blk
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3ArnProtocolInfo%3ARunNodeArgs"><span class="hs-identifier hs-var">rnProtocolInfo</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProtocolInfo blk
</span><a href="#local-6989586621681945341"><span class="hs-identifier hs-var">pInfo</span></a></span><span>
</span><span id="line-617"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:rnNodeKernelHook:RunNodeArgs :: ResourceRegistry IO
-&gt; NodeKernel IO RemoteAddress LocalConnectionId blk -&gt; IO ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3ArnNodeKernelHook%3ARunNodeArgs"><span class="hs-identifier hs-var">rnNodeKernelHook</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681945597"><span class="annot"><span class="annottext">ResourceRegistry IO
</span><a href="#local-6989586621681945597"><span class="hs-identifier hs-var">registry</span></a></span></span><span> </span><span id="local-6989586621681945598"><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk
</span><a href="#local-6989586621681945598"><span class="hs-identifier hs-var">nodeKernel</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-618"></span><span>                    </span><span class="hs-comment">-- set the initial block forging</span><span>
</span><span id="line-619"></span><span>                    </span><span id="local-6989586621681945599"><span class="annot"><span class="annottext">[BlockForging IO blk]
</span><a href="#local-6989586621681945599"><span class="hs-identifier hs-var">blockForging</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(ProtocolInfo blk, IO [BlockForging IO blk])
-&gt; IO [BlockForging IO blk]
forall a b. (a, b) -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtocolInfoArgs blk
-&gt; (ProtocolInfo blk, IO [BlockForging IO blk])
forall (m :: * -&gt; *) blk.
Protocol m blk =&gt;
ProtocolInfoArgs blk -&gt; (ProtocolInfo blk, m [BlockForging m blk])
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-api-10.18.0.0-cf96680f7a5f126623afc107f46c4390ef848488275422e58a8da147b9415623/share/doc/html/src/Cardano.Api.Consensus.Internal.Protocol.html#protocolInfo"><span class="hs-identifier hs-var">Api.protocolInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolInfoArgs blk
</span><a href="#local-6989586621681945331"><span class="hs-identifier hs-var">runP</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-620"></span><span>
</span><span id="line-621"></span><span>                    </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.html#unless"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NodeConfiguration -&gt; Bool
</span><a href="Cardano.Node.Configuration.POM.html#ncStartAsNonProducingNode"><span class="hs-identifier hs-var">ncStartAsNonProducingNode</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-622"></span><span>                      </span><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk
-&gt; [BlockForging IO blk] -&gt; IO ()
forall (m :: * -&gt; *) addrNTN addrNTC blk.
NodeKernel m addrNTN addrNTC blk -&gt; [BlockForging m blk] -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.NodeKernel.html#%24sel%3AsetBlockForging%3ANodeKernel"><span class="hs-identifier hs-var">setBlockForging</span></a></span><span> </span><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk
</span><a href="#local-6989586621681945598"><span class="hs-identifier hs-var">nodeKernel</span></a></span><span> </span><span class="annot"><span class="annottext">[BlockForging IO blk]
</span><a href="#local-6989586621681945599"><span class="hs-identifier hs-var">blockForging</span></a></span><span>
</span><span id="line-623"></span><span>
</span><span id="line-624"></span><span>                    </span><span class="annot"><span class="annottext">ShutdownConfig
-&gt; Tracer IO ShutdownTrace
-&gt; ResourceRegistry IO
-&gt; ChainDB IO blk
-&gt; IO ()
forall blk.
HasHeader (Header blk) =&gt;
ShutdownConfig
-&gt; Tracer IO ShutdownTrace
-&gt; ResourceRegistry IO
-&gt; ChainDB IO blk
-&gt; IO ()
</span><a href="Cardano.Node.Handlers.Shutdown.html#maybeSpawnOnSlotSyncedShutdownHandler"><span class="hs-identifier hs-var">maybeSpawnOnSlotSyncedShutdownHandler</span></a></span><span>
</span><span id="line-625"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NodeConfiguration -&gt; ShutdownConfig
</span><a href="Cardano.Node.Configuration.POM.html#ncShutdownConfig"><span class="hs-identifier hs-var">ncShutdownConfig</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-626"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO ShutdownTrace
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO ShutdownTrace
</span><a href="Cardano.Node.Tracing.html#shutdownTracer"><span class="hs-identifier hs-var">shutdownTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-627"></span><span>                      </span><span class="annot"><span class="annottext">ResourceRegistry IO
</span><a href="#local-6989586621681945597"><span class="hs-identifier hs-var">registry</span></a></span><span>
</span><span id="line-628"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk -&gt; ChainDB IO blk
forall (m :: * -&gt; *) addrNTN addrNTC blk.
NodeKernel m addrNTN addrNTC blk -&gt; ChainDB m blk
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.NodeKernel.html#%24sel%3AgetChainDB%3ANodeKernel"><span class="hs-identifier hs-var">Node.getChainDB</span></a></span><span> </span><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk
</span><a href="#local-6989586621681945598"><span class="hs-identifier hs-var">nodeKernel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-629"></span><span>                    </span><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk -&gt; IO ()
</span><a href="#local-6989586621681945335"><span class="hs-identifier hs-var">onKernel</span></a></span><span> </span><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk
</span><a href="#local-6989586621681945598"><span class="hs-identifier hs-var">nodeKernel</span></a></span><span>
</span><span id="line-630"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:rnEnableP2P:RunNodeArgs :: NetworkP2PMode p2p
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3ArnEnableP2P%3ARunNodeArgs"><span class="hs-identifier hs-var">rnEnableP2P</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NetworkP2PMode p2p
</span><a href="#local-6989586621681945332"><span class="hs-identifier hs-var">p2pMode</span></a></span><span>
</span><span id="line-631"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:rnPeerSharing:RunNodeArgs :: PeerSharing
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3ArnPeerSharing%3ARunNodeArgs"><span class="hs-identifier hs-var">rnPeerSharing</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; PeerSharing
</span><a href="Cardano.Node.Configuration.POM.html#ncPeerSharing"><span class="hs-identifier hs-var">ncPeerSharing</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-632"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:rnGetUseBootstrapPeers:RunNodeArgs :: STM IO UseBootstrapPeers
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3ArnGetUseBootstrapPeers%3ARunNodeArgs"><span class="hs-identifier hs-var">rnGetUseBootstrapPeers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UseBootstrapPeers -&gt; STM UseBootstrapPeers
forall a. a -&gt; STM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">UseBootstrapPeers
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Cardano.Network.PeerSelection.Bootstrap.html#DontUseBootstrapPeers"><span class="hs-identifier hs-var">DontUseBootstrapPeers</span></a></span><span>
</span><span id="line-633"></span><span>                </span><span class="hs-special">}</span><span class="hs-cpp">
#ifdef UNIX
</span><span>        </span><span class="hs-comment">-- initial `SIGHUP` handler; it only warns that neither updating of</span><span>
</span><span id="line-636"></span><span>        </span><span class="hs-comment">-- topology is supported nor updating block forging is yet possible.</span><span>
</span><span id="line-637"></span><span>        </span><span class="hs-comment">-- It is still useful, without it the node would terminate when</span><span>
</span><span id="line-638"></span><span>        </span><span class="hs-comment">-- receiving `SIGHUP`.</span><span>
</span><span id="line-639"></span><span>        </span><span class="annot"><span class="annottext">Handler
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Signal -&gt; Handler -&gt; Maybe SignalSet -&gt; IO Handler
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/unix-2.8.4.0/src/System.Posix.Signals.html#installHandler"><span class="hs-identifier hs-var">Signals.installHandler</span></a></span><span>
</span><span id="line-640"></span><span>              </span><span class="annot"><span class="annottext">Signal
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/unix-2.8.4.0/src/System.Posix.Signals.html#sigHUP"><span class="hs-identifier hs-var">Signals.sigHUP</span></a></span><span>
</span><span id="line-641"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IO () -&gt; Handler
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/unix-2.8.4.0/src/System.Posix.Signals.html#Catch"><span class="hs-identifier hs-var">Signals.Catch</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; Handler) -&gt; IO () -&gt; Handler
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-642"></span><span>                </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk) -&gt; StartupTrace blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO (StartupTrace blk)
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO (StartupTrace blk)
</span><a href="Cardano.Node.Tracing.html#startupTracer"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">StartupTrace blk
forall blk. StartupTrace blk
</span><a href="Cardano.Node.Startup.html#NetworkConfigUpdateUnsupported"><span class="hs-identifier hs-var">NetworkConfigUpdateUnsupported</span></a></span><span>
</span><span id="line-643"></span><span>                </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk) -&gt; StartupTrace blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO (StartupTrace blk)
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO (StartupTrace blk)
</span><a href="Cardano.Node.Tracing.html#startupTracer"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EnabledBlockForging -&gt; StartupTrace blk
forall blk. EnabledBlockForging -&gt; StartupTrace blk
</span><a href="Cardano.Node.Startup.html#BlockForgingUpdate"><span class="hs-identifier hs-var">BlockForgingUpdate</span></a></span><span> </span><span class="annot"><span class="annottext">EnabledBlockForging
</span><a href="Cardano.Node.Startup.html#NotEffective"><span class="hs-identifier hs-var">NotEffective</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-644"></span><span>              </span><span class="annot"><span class="annottext">Maybe SignalSet
forall a. Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-cpp">
#endif
</span><span>        </span><span class="annot"><span class="annottext">IO () -&gt; IO ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Functor.html#void"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-647"></span><span>          </span><span class="annot"><span class="annottext">RunNodeArgs IO RemoteAddress LocalAddress blk p2p
-&gt; StdRunNodeArgs
     IO
     blk
     p2p
     (ExtraArguments IO)
     ExtraState
     DebugPeerSelectionState
     Any
     (LedgerPeersConsensusInterface IO)
     (ExtraPeers RemoteAddress)
     PeerTrustable
     Any
     (ExtraPeerSelectionSetsWithSizes RemoteAddress)
     BootstrapPeersCriticalTimeoutError
-&gt; IO ()
forall blk (p2p :: P2P) extraState extraActions extraPeers
       extraFlags extraChurnArgs extraCounters exception.
(RunNode blk, Monoid extraPeers, Eq extraCounters, Eq extraFlags,
 Exception exception) =&gt;
RunNodeArgs IO RemoteAddress LocalAddress blk p2p
-&gt; StdRunNodeArgs
     IO
     blk
     p2p
     (ExtraArguments IO)
     extraState
     DebugPeerSelectionState
     extraActions
     (LedgerPeersConsensusInterface IO)
     extraPeers
     extraFlags
     extraChurnArgs
     extraCounters
     exception
-&gt; IO ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#run"><span class="hs-identifier hs-var">Node.run</span></a></span><span>
</span><span id="line-648"></span><span>            </span><span class="annot"><span class="annottext">RunNodeArgs IO RemoteAddress LocalAddress blk p2p
</span><a href="#local-6989586621681945596"><span class="hs-identifier hs-var">nodeArgs</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-649"></span><span>                </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3ArnNodeKernelHook%3ARunNodeArgs"><span class="hs-identifier hs-var">rnNodeKernelHook</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681945602"><span class="annot"><span class="annottext">ResourceRegistry IO
</span><a href="#local-6989586621681945602"><span class="hs-identifier hs-var">registry</span></a></span></span><span> </span><span id="local-6989586621681945603"><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk
</span><a href="#local-6989586621681945603"><span class="hs-identifier hs-var">nodeKernel</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-650"></span><span>                  </span><span class="hs-comment">-- reinstall `SIGHUP` handler</span><span>
</span><span id="line-651"></span><span>                  </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk)
-&gt; BlockType blk
-&gt; NodeConfiguration
-&gt; NodeKernel IO RemoteAddress LocalConnectionId blk
-&gt; IO ()
forall blk.
Tracer IO (StartupTrace blk)
-&gt; BlockType blk
-&gt; NodeConfiguration
-&gt; NodeKernel IO RemoteAddress LocalConnectionId blk
-&gt; IO ()
</span><a href="Cardano.Node.Run.html#installNonP2PSigHUPHandler"><span class="hs-identifier hs-var">installNonP2PSigHUPHandler</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO (StartupTrace blk)
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO (StartupTrace blk)
</span><a href="Cardano.Node.Tracing.html#startupTracer"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BlockType blk
</span><a href="#local-6989586621681945330"><span class="hs-identifier hs-var">blockType</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span> </span><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk
</span><a href="#local-6989586621681945603"><span class="hs-identifier hs-var">nodeKernel</span></a></span><span>
</span><span id="line-652"></span><span>                  </span><span class="annot"><span class="annottext">RunNodeArgs IO RemoteAddress LocalAddress blk p2p
-&gt; ResourceRegistry IO
-&gt; NodeKernel IO RemoteAddress LocalConnectionId blk
-&gt; IO ()
forall (m :: * -&gt; *) addrNTN addrNTC blk (p2p :: P2P).
RunNodeArgs m addrNTN addrNTC blk p2p
-&gt; ResourceRegistry m
-&gt; NodeKernel m addrNTN (ConnectionId addrNTC) blk
-&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3ArnNodeKernelHook%3ARunNodeArgs"><span class="hs-identifier hs-var">rnNodeKernelHook</span></a></span><span> </span><span class="annot"><span class="annottext">RunNodeArgs IO RemoteAddress LocalAddress blk p2p
</span><a href="#local-6989586621681945596"><span class="hs-identifier hs-var">nodeArgs</span></a></span><span> </span><span class="annot"><span class="annottext">ResourceRegistry IO
</span><a href="#local-6989586621681945602"><span class="hs-identifier hs-var">registry</span></a></span><span> </span><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk
</span><a href="#local-6989586621681945603"><span class="hs-identifier hs-var">nodeKernel</span></a></span><span>
</span><span id="line-653"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-654"></span><span>            </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#StdRunNodeArgs"><span class="hs-identifier hs-type">StdRunNodeArgs</span></a></span><span>
</span><span id="line-655"></span><span>              </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">$sel:srnBfcMaxConcurrencyBulkSync:StdRunNodeArgs :: Maybe Word
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnBfcMaxConcurrencyBulkSync%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnBfcMaxConcurrencyBulkSync</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MaxConcurrencyBulkSync -&gt; Word
</span><a href="Cardano.Node.Types.html#unMaxConcurrencyBulkSync"><span class="hs-identifier hs-var">unMaxConcurrencyBulkSync</span></a></span><span> </span><span class="annot"><span class="annottext">(MaxConcurrencyBulkSync -&gt; Word)
-&gt; Maybe MaxConcurrencyBulkSync -&gt; Maybe Word
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; Maybe MaxConcurrencyBulkSync
</span><a href="Cardano.Node.Configuration.POM.html#ncMaxConcurrencyBulkSync"><span class="hs-identifier hs-var">ncMaxConcurrencyBulkSync</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-656"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:srnBfcMaxConcurrencyDeadline:StdRunNodeArgs :: Maybe Word
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnBfcMaxConcurrencyDeadline%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnBfcMaxConcurrencyDeadline</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MaxConcurrencyDeadline -&gt; Word
</span><a href="Cardano.Node.Types.html#unMaxConcurrencyDeadline"><span class="hs-identifier hs-var">unMaxConcurrencyDeadline</span></a></span><span> </span><span class="annot"><span class="annottext">(MaxConcurrencyDeadline -&gt; Word)
-&gt; Maybe MaxConcurrencyDeadline -&gt; Maybe Word
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; Maybe MaxConcurrencyDeadline
</span><a href="Cardano.Node.Configuration.POM.html#ncMaxConcurrencyDeadline"><span class="hs-identifier hs-var">ncMaxConcurrencyDeadline</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-657"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:srnChainDbValidateOverride:StdRunNodeArgs :: Bool
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnChainDbValidateOverride%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnChainDbValidateOverride</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; Bool
</span><a href="Cardano.Node.Configuration.POM.html#ncValidateDB"><span class="hs-identifier hs-var">ncValidateDB</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-658"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:srnDatabasePath:StdRunNodeArgs :: NodeDatabasePaths
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnDatabasePath%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnDatabasePath</span></a></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NodeDatabasePaths
</span><a href="#local-6989586621681945350"><span class="hs-identifier hs-var">dbPath</span></a></span><span>
</span><span id="line-659"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:srnDiffusionArguments:StdRunNodeArgs :: Arguments IO Socket RemoteAddress LocalSocket LocalAddress
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnDiffusionArguments%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnDiffusionArguments</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arguments IO Socket RemoteAddress LocalSocket LocalAddress
</span><a href="#local-6989586621681945353"><span class="hs-identifier hs-var">diffusionArguments</span></a></span><span>
</span><span id="line-660"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:srnDiffusionArgumentsExtra:StdRunNodeArgs :: P2PDecision 'NonP2P (Tracer IO TracePublicRootPeers) ()
-&gt; P2PDecision 'NonP2P (STM IO FetchMode) ()
-&gt; P2PDecision 'NonP2P (LedgerPeersConsensusInterface IO) ()
-&gt; ArgumentsExtra
     'NonP2P
     (ExtraArguments IO)
     ExtraState
     DebugPeerSelectionState
     PeerTrustable
     (ExtraPeers RemoteAddress)
     (LedgerPeersConsensusInterface IO)
     Any
     (ExtraPeerSelectionSetsWithSizes RemoteAddress)
     BootstrapPeersCriticalTimeoutError
     RemoteAddress
     LocalAddress
     Resolver
     IOException
     IO
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnDiffusionArgumentsExtra%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnDiffusionArgumentsExtra</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">P2PDecision 'NonP2P (Tracer IO TracePublicRootPeers) ()
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">P2PDecision 'NonP2P (STM IO FetchMode) ()
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">P2PDecision 'NonP2P (LedgerPeersConsensusInterface IO) ()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IPSubscriptionTarget
-&gt; [DnsSubscriptionTarget]
-&gt; ArgumentsExtra
     'NonP2P
     (ExtraArguments IO)
     ExtraState
     DebugPeerSelectionState
     PeerTrustable
     (ExtraPeers RemoteAddress)
     (LedgerPeersConsensusInterface IO)
     Any
     (ExtraPeerSelectionSetsWithSizes RemoteAddress)
     BootstrapPeersCriticalTimeoutError
     RemoteAddress
     LocalAddress
     Resolver
     IOException
     IO
forall extraArgs extraState extraDebugState extraAPI extraPeers
       extraFlags extraChurnArgs extraCounters ntnAddr ntcAddr.
IPSubscriptionTarget
-&gt; [DnsSubscriptionTarget]
-&gt; ArgumentsExtra
     'NonP2P
     extraArgs
     extraState
     extraDebugState
     extraAPI
     extraPeers
     extraFlags
     extraChurnArgs
     extraCounters
     BootstrapPeersCriticalTimeoutError
     ntnAddr
     ntcAddr
     Resolver
     IOException
     IO
</span><a href="Cardano.Node.Run.html#mkNonP2PArguments"><span class="hs-identifier hs-var">mkNonP2PArguments</span></a></span><span> </span><span class="annot"><span class="annottext">IPSubscriptionTarget
</span><a href="#local-6989586621681945590"><span class="hs-identifier hs-var">ipProducers</span></a></span><span> </span><span class="annot"><span class="annottext">[DnsSubscriptionTarget]
</span><a href="#local-6989586621681945582"><span class="hs-identifier hs-var">dnsProducers</span></a></span><span>
</span><span id="line-661"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:srnDiffusionTracers:StdRunNodeArgs :: Tracers
  RemoteAddress NodeToNodeVersion LocalAddress NodeToClientVersion IO
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnDiffusionTracers%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnDiffusionTracers</span></a></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracers
     RemoteAddress NodeToNodeVersion LocalAddress NodeToClientVersion IO
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracers
     RemoteAddress NodeToNodeVersion LocalAddress NodeToClientVersion IO
</span><a href="Cardano.Node.Tracing.html#diffusionTracers"><span class="hs-identifier hs-var">diffusionTracers</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span>
</span><span id="line-662"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:srnDiffusionTracersExtra:StdRunNodeArgs :: ExtraTracers
  'NonP2P
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnDiffusionTracersExtra%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnDiffusionTracersExtra</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  'NonP2P
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; ExtraTracers
     'NonP2P
     ExtraState
     DebugPeerSelectionState
     PeerTrustable
     (ExtraPeers RemoteAddress)
     (ExtraPeerSelectionSetsWithSizes RemoteAddress)
     IO
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; ExtraTracers
     p2p
     extraState
     extraDebugState
     extraFlags
     extraPeers
     extraCounters
     m
</span><a href="Cardano.Node.Tracing.html#diffusionTracersExtra"><span class="hs-identifier hs-var">diffusionTracersExtra</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
Tracers
  RemoteAddress
  LocalAddress
  blk
  'NonP2P
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span>
</span><span id="line-663"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:srnEnableInDevelopmentVersions:StdRunNodeArgs :: Bool
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnEnableInDevelopmentVersions%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnEnableInDevelopmentVersions</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; Bool
</span><a href="Cardano.Node.Configuration.POM.html#ncExperimentalProtocolsEnabled"><span class="hs-identifier hs-var">ncExperimentalProtocolsEnabled</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-664"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:srnTraceChainDB:StdRunNodeArgs :: Tracer IO (TraceEvent blk)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnTraceChainDB%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnTraceChainDB</span></a></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO (TraceEvent blk)
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO (TraceEvent blk)
</span><a href="Cardano.Node.Tracing.html#chainDBTracer"><span class="hs-identifier hs-var">chainDBTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span>
</span><span id="line-665"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:srnChainSyncTimeout:StdRunNodeArgs :: Maybe (IO ChainSyncTimeout)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnChainSyncTimeout%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnChainSyncTimeout</span></a></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (IO ChainSyncTimeout)
</span><a href="#local-6989586621681945540"><span class="hs-identifier hs-var">customizeChainSyncTimeout</span></a></span><span>
</span><span id="line-666"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:srnMaybeMempoolCapacityOverride:StdRunNodeArgs :: Maybe MempoolCapacityBytesOverride
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnMaybeMempoolCapacityOverride%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnMaybeMempoolCapacityOverride</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; Maybe MempoolCapacityBytesOverride
</span><a href="Cardano.Node.Configuration.POM.html#ncMaybeMempoolCapacityOverride"><span class="hs-identifier hs-var">ncMaybeMempoolCapacityOverride</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-667"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:srnSigUSR1SignalHandler:StdRunNodeArgs :: forall (mode :: Mode) x y.
ExtraTracers
  'NonP2P
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; STM IO UseLedgerPeers
-&gt; PeerSharing
-&gt; STM IO UseBootstrapPeers
-&gt; STM IO LedgerStateJudgement
-&gt; NodeToNodeConnectionManager
     mode
     Socket
     RemoteAddress
     NodeToNodeVersionData
     NodeToNodeVersion
     IO
     x
     y
-&gt; StrictTVar
     IO
     (PeerSelectionState
        ExtraState
        PeerTrustable
        (ExtraPeers RemoteAddress)
        RemoteAddress
        (NodeToNodePeerConnectionHandle
           mode RemoteAddress NodeToNodeVersionData IO x y))
-&gt; PeerMetrics IO RemoteAddress
-&gt; IO ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnSigUSR1SignalHandler%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnSigUSR1SignalHandler</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExtraTracers
  'NonP2P
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; STM UseLedgerPeers
-&gt; PeerSharing
-&gt; STM UseBootstrapPeers
-&gt; STM LedgerStateJudgement
-&gt; NodeToNodeConnectionManager
     mode
     Socket
     RemoteAddress
     NodeToNodeVersionData
     NodeToNodeVersion
     IO
     x
     y
-&gt; StrictTVar
     IO
     (PeerSelectionState
        ExtraState
        PeerTrustable
        (ExtraPeers RemoteAddress)
        RemoteAddress
        (NodeToNodePeerConnectionHandle
           mode RemoteAddress NodeToNodeVersionData IO x y))
-&gt; PeerMetrics IO RemoteAddress
-&gt; IO ()
ExtraTracers
  'NonP2P
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; STM IO UseLedgerPeers
-&gt; PeerSharing
-&gt; STM IO UseBootstrapPeers
-&gt; STM IO LedgerStateJudgement
-&gt; NodeToNodeConnectionManager
     mode
     Socket
     RemoteAddress
     NodeToNodeVersionData
     NodeToNodeVersion
     IO
     x
     y
-&gt; StrictTVar
     IO
     (PeerSelectionState
        ExtraState
        PeerTrustable
        (ExtraPeers RemoteAddress)
        RemoteAddress
        (NodeToNodePeerConnectionHandle
           mode RemoteAddress NodeToNodeVersionData IO x y))
-&gt; PeerMetrics IO RemoteAddress
-&gt; IO ()
forall a. Monoid a =&gt; a
forall (mode :: Mode) x y.
ExtraTracers
  'NonP2P
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; STM IO UseLedgerPeers
-&gt; PeerSharing
-&gt; STM IO UseBootstrapPeers
-&gt; STM IO LedgerStateJudgement
-&gt; NodeToNodeConnectionManager
     mode
     Socket
     RemoteAddress
     NodeToNodeVersionData
     NodeToNodeVersion
     IO
     x
     y
-&gt; StrictTVar
     IO
     (PeerSelectionState
        ExtraState
        PeerTrustable
        (ExtraPeers RemoteAddress)
        RemoteAddress
        (NodeToNodePeerConnectionHandle
           mode RemoteAddress NodeToNodeVersionData IO x y))
-&gt; PeerMetrics IO RemoteAddress
-&gt; IO ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-668"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:srnSnapshotPolicyArgs:StdRunNodeArgs :: SnapshotPolicyArgs
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnSnapshotPolicyArgs%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnSnapshotPolicyArgs</span></a></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SnapshotPolicyArgs
</span><a href="#local-6989586621681945547"><span class="hs-identifier hs-var">snapshotPolicyArgs</span></a></span><span>
</span><span id="line-669"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:srnQueryBatchSize:StdRunNodeArgs :: QueryBatchSize
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnQueryBatchSize%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnQueryBatchSize</span></a></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QueryBatchSize
</span><a href="#local-6989586621681945549"><span class="hs-identifier hs-var">queryBatchSize</span></a></span><span>
</span><span id="line-670"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">$sel:srnLdbFlavorArgs:StdRunNodeArgs :: Complete LedgerDbFlavorArgs IO
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#%24sel%3AsrnLdbFlavorArgs%3AStdRunNodeArgs"><span class="hs-identifier hs-var">srnLdbFlavorArgs</span></a></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LedgerDbSelectorFlag -&gt; Complete LedgerDbFlavorArgs IO
</span><a href="Cardano.Node.Configuration.LedgerDB.html#selectorToArgs"><span class="hs-identifier hs-var">selectorToArgs</span></a></span><span> </span><span class="annot"><span class="annottext">LedgerDbSelectorFlag
</span><a href="#local-6989586621681945552"><span class="hs-identifier hs-var">ldbBackend</span></a></span><span>
</span><span id="line-671"></span><span>              </span><span class="hs-special">}</span><span>
</span><span id="line-672"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-673"></span><span>
</span><span id="line-674"></span><span>  </span><span class="annot"><a href="#local-6989586621681945540"><span class="hs-identifier hs-type">customizeChainSyncTimeout</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-protocols-0.14.0.2-1a26fdf733a5961ac0970a492a7cf0333c9ab1fde6617e1a008d914f163716a6/share/doc/html/src/Ouroboros.Network.Protocol.ChainSync.Codec.html#ChainSyncTimeout"><span class="hs-identifier hs-type">ChainSyncTimeout</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-675"></span><span>  </span><span id="local-6989586621681945540"><span class="annot"><span class="annottext">customizeChainSyncTimeout :: Maybe (IO ChainSyncTimeout)
</span><a href="#local-6989586621681945540"><span class="hs-identifier hs-var hs-var">customizeChainSyncTimeout</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; TimeoutOverride
</span><a href="Cardano.Node.Configuration.POM.html#ncChainSyncIdleTimeout"><span class="hs-identifier hs-var">ncChainSyncIdleTimeout</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-676"></span><span>    </span><span class="annot"><span class="annottext">TimeoutOverride
</span><a href="Cardano.Node.Configuration.POM.html#NoTimeoutOverride"><span class="hs-identifier hs-var">NoTimeoutOverride</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (IO ChainSyncTimeout)
forall a. Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-677"></span><span>    </span><span class="annot"><a href="Cardano.Node.Configuration.POM.html#TimeoutOverride"><span class="hs-identifier hs-type">TimeoutOverride</span></a></span><span> </span><span id="local-6989586621681945622"><span class="annot"><span class="annottext">DiffTime
</span><a href="#local-6989586621681945622"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO ChainSyncTimeout -&gt; Maybe (IO ChainSyncTimeout)
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(IO ChainSyncTimeout -&gt; Maybe (IO ChainSyncTimeout))
-&gt; IO ChainSyncTimeout -&gt; Maybe (IO ChainSyncTimeout)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-678"></span><span>      </span><span id="local-6989586621681945623"><span class="annot"><span class="annottext">ChainSyncTimeout
</span><a href="#local-6989586621681945623"><span class="hs-identifier hs-var">cst</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO ChainSyncTimeout
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.Configuration.html#defaultChainSyncTimeout"><span class="hs-identifier hs-var">Configuration.defaultChainSyncTimeout</span></a></span><span>
</span><span id="line-679"></span><span>      </span><span class="annot"><span class="annottext">ChainSyncTimeout -&gt; IO ChainSyncTimeout
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(ChainSyncTimeout -&gt; IO ChainSyncTimeout)
-&gt; ChainSyncTimeout -&gt; IO ChainSyncTimeout
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DiffTime
</span><a href="#local-6989586621681945622"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-680"></span><span>        </span><span class="annot"><span class="annottext">DiffTime
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-681"></span><span>          </span><span class="annot"><span class="annottext">ChainSyncTimeout
</span><a href="#local-6989586621681945623"><span class="hs-identifier hs-var">cst</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-protocols-0.14.0.2-1a26fdf733a5961ac0970a492a7cf0333c9ab1fde6617e1a008d914f163716a6/share/doc/html/src/Ouroboros.Network.Protocol.ChainSync.Codec.html#idleTimeout"><span class="hs-identifier hs-var">idleTimeout</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-type">Nothing</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-682"></span><span>        </span><span class="annot"><span class="annottext">DiffTime
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-683"></span><span>          </span><span class="annot"><span class="annottext">ChainSyncTimeout
</span><a href="#local-6989586621681945623"><span class="hs-identifier hs-var">cst</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-protocols-0.14.0.2-1a26fdf733a5961ac0970a492a7cf0333c9ab1fde6617e1a008d914f163716a6/share/doc/html/src/Ouroboros.Network.Protocol.ChainSync.Codec.html#idleTimeout"><span class="hs-identifier hs-var">idleTimeout</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681945622"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-684"></span><span>
</span><span id="line-685"></span><span>  </span><span class="annot"><a href="#local-6989586621681945336"><span class="hs-identifier hs-type">logStartupWarnings</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-686"></span><span>  </span><span id="local-6989586621681945336"><span class="annot"><span class="annottext">logStartupWarnings :: IO ()
</span><a href="#local-6989586621681945336"><span class="hs-identifier hs-var hs-var">logStartupWarnings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-687"></span><span>    </span><span class="hs-special">(</span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NetworkP2PMode p2p
</span><a href="#local-6989586621681945332"><span class="hs-identifier hs-var">p2pMode</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-688"></span><span>      </span><span class="annot"><span class="annottext">NetworkP2PMode p2p
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#EnabledP2PMode"><span class="hs-identifier hs-var">EnabledP2PMode</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-689"></span><span>      </span><span class="annot"><span class="annottext">NetworkP2PMode p2p
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#DisabledP2PMode"><span class="hs-identifier hs-var">DisabledP2PMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk) -&gt; StartupTrace blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO (StartupTrace blk)
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO (StartupTrace blk)
</span><a href="Cardano.Node.Tracing.html#startupTracer"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">StartupTrace blk
forall blk. StartupTrace blk
</span><a href="Cardano.Node.Startup.html#NonP2PWarning"><span class="hs-identifier hs-var">NonP2PWarning</span></a></span><span>
</span><span id="line-690"></span><span>      </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- annoying, but unavoidable for GADT type inference</span><span>
</span><span id="line-691"></span><span>
</span><span id="line-692"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681945630"><span class="annot"><span class="annottext">developmentNtnVersions :: [NodeToNodeVersion]
</span><a href="#local-6989586621681945630"><span class="hs-identifier hs-var hs-var">developmentNtnVersions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-693"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Proxy blk -&gt; (Maybe NodeToNodeVersion, Maybe NodeToClientVersion)
forall blk.
SupportedNetworkProtocolVersion blk =&gt;
Proxy blk -&gt; (Maybe NodeToNodeVersion, Maybe NodeToClientVersion)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-0.27.0.0-004c8b8862bcdf99608d21368eda63ae7ec76430a4bb20826e436605913605d0/share/doc/html/src/Ouroboros.Consensus.Node.NetworkProtocolVersion.html#latestReleasedNodeVersion"><span class="hs-identifier hs-var">latestReleasedNodeVersion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t. Proxy t
forall {k} (t :: k). Proxy t
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Proxy.html#Proxy"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621681944296"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-694"></span><span>            </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681945632"><span class="annot"><span class="annottext">NodeToNodeVersion
</span><a href="#local-6989586621681945632"><span class="hs-identifier hs-var">ntnVersion</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe NodeToClientVersion
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(NodeToNodeVersion -&gt; Bool)
-&gt; [NodeToNodeVersion] -&gt; [NodeToNodeVersion]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NodeToNodeVersion -&gt; NodeToNodeVersion -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#%3E"><span class="hs-operator hs-var">&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NodeToNodeVersion
</span><a href="#local-6989586621681945632"><span class="hs-identifier hs-var">ntnVersion</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-695"></span><span>                                  </span><span class="annot"><span class="annottext">([NodeToNodeVersion] -&gt; [NodeToNodeVersion])
-&gt; (Map NodeToNodeVersion (BlockNodeToNodeVersion blk)
    -&gt; [NodeToNodeVersion])
-&gt; Map NodeToNodeVersion (BlockNodeToNodeVersion blk)
-&gt; [NodeToNodeVersion]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Map NodeToNodeVersion (BlockNodeToNodeVersion blk)
-&gt; [NodeToNodeVersion]
forall k a. Map k a -&gt; [k]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#keys"><span class="hs-identifier hs-var">Map.keys</span></a></span><span>
</span><span id="line-696"></span><span>                                  </span><span class="annot"><span class="annottext">(Map NodeToNodeVersion (BlockNodeToNodeVersion blk)
 -&gt; [NodeToNodeVersion])
-&gt; Map NodeToNodeVersion (BlockNodeToNodeVersion blk)
-&gt; [NodeToNodeVersion]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy blk -&gt; Map NodeToNodeVersion (BlockNodeToNodeVersion blk)
forall blk.
SupportedNetworkProtocolVersion blk =&gt;
Proxy blk -&gt; Map NodeToNodeVersion (BlockNodeToNodeVersion blk)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-0.27.0.0-004c8b8862bcdf99608d21368eda63ae7ec76430a4bb20826e436605913605d0/share/doc/html/src/Ouroboros.Consensus.Node.NetworkProtocolVersion.html#supportedNodeToNodeVersions"><span class="hs-identifier hs-var">supportedNodeToNodeVersions</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t. Proxy t
forall {k} (t :: k). Proxy t
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Proxy.html#Proxy"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621681944296"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-697"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe NodeToNodeVersion
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe NodeToClientVersion
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map NodeToNodeVersion (BlockNodeToNodeVersion blk)
-&gt; [NodeToNodeVersion]
forall k a. Map k a -&gt; [k]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#keys"><span class="hs-identifier hs-var">Map.keys</span></a></span><span>
</span><span id="line-698"></span><span>                                  </span><span class="annot"><span class="annottext">(Map NodeToNodeVersion (BlockNodeToNodeVersion blk)
 -&gt; [NodeToNodeVersion])
-&gt; Map NodeToNodeVersion (BlockNodeToNodeVersion blk)
-&gt; [NodeToNodeVersion]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy blk -&gt; Map NodeToNodeVersion (BlockNodeToNodeVersion blk)
forall blk.
SupportedNetworkProtocolVersion blk =&gt;
Proxy blk -&gt; Map NodeToNodeVersion (BlockNodeToNodeVersion blk)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-0.27.0.0-004c8b8862bcdf99608d21368eda63ae7ec76430a4bb20826e436605913605d0/share/doc/html/src/Ouroboros.Consensus.Node.NetworkProtocolVersion.html#supportedNodeToNodeVersions"><span class="hs-identifier hs-var">supportedNodeToNodeVersions</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t. Proxy t
forall {k} (t :: k). Proxy t
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Proxy.html#Proxy"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621681944296"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-699"></span><span>        </span><span id="local-6989586621681945635"><span class="annot"><span class="annottext">developmentNtcVersions :: [NodeToClientVersion]
</span><a href="#local-6989586621681945635"><span class="hs-identifier hs-var hs-var">developmentNtcVersions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-700"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Proxy blk -&gt; (Maybe NodeToNodeVersion, Maybe NodeToClientVersion)
forall blk.
SupportedNetworkProtocolVersion blk =&gt;
Proxy blk -&gt; (Maybe NodeToNodeVersion, Maybe NodeToClientVersion)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-0.27.0.0-004c8b8862bcdf99608d21368eda63ae7ec76430a4bb20826e436605913605d0/share/doc/html/src/Ouroboros.Consensus.Node.NetworkProtocolVersion.html#latestReleasedNodeVersion"><span class="hs-identifier hs-var">latestReleasedNodeVersion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t. Proxy t
forall {k} (t :: k). Proxy t
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Proxy.html#Proxy"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621681944296"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-701"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe NodeToNodeVersion
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681945636"><span class="annot"><span class="annottext">NodeToClientVersion
</span><a href="#local-6989586621681945636"><span class="hs-identifier hs-var">ntcVersion</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(NodeToClientVersion -&gt; Bool)
-&gt; [NodeToClientVersion] -&gt; [NodeToClientVersion]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NodeToClientVersion -&gt; NodeToClientVersion -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#%3E"><span class="hs-operator hs-var">&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NodeToClientVersion
</span><a href="#local-6989586621681945636"><span class="hs-identifier hs-var">ntcVersion</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-702"></span><span>                                  </span><span class="annot"><span class="annottext">([NodeToClientVersion] -&gt; [NodeToClientVersion])
-&gt; (Map NodeToClientVersion (BlockNodeToClientVersion blk)
    -&gt; [NodeToClientVersion])
-&gt; Map NodeToClientVersion (BlockNodeToClientVersion blk)
-&gt; [NodeToClientVersion]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Map NodeToClientVersion (BlockNodeToClientVersion blk)
-&gt; [NodeToClientVersion]
forall k a. Map k a -&gt; [k]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#keys"><span class="hs-identifier hs-var">Map.keys</span></a></span><span>
</span><span id="line-703"></span><span>                                  </span><span class="annot"><span class="annottext">(Map NodeToClientVersion (BlockNodeToClientVersion blk)
 -&gt; [NodeToClientVersion])
-&gt; Map NodeToClientVersion (BlockNodeToClientVersion blk)
-&gt; [NodeToClientVersion]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy blk -&gt; Map NodeToClientVersion (BlockNodeToClientVersion blk)
forall blk.
SupportedNetworkProtocolVersion blk =&gt;
Proxy blk -&gt; Map NodeToClientVersion (BlockNodeToClientVersion blk)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-0.27.0.0-004c8b8862bcdf99608d21368eda63ae7ec76430a4bb20826e436605913605d0/share/doc/html/src/Ouroboros.Consensus.Node.NetworkProtocolVersion.html#supportedNodeToClientVersions"><span class="hs-identifier hs-var">supportedNodeToClientVersions</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t. Proxy t
forall {k} (t :: k). Proxy t
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Proxy.html#Proxy"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621681944296"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-704"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe NodeToNodeVersion
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe NodeToClientVersion
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map NodeToClientVersion (BlockNodeToClientVersion blk)
-&gt; [NodeToClientVersion]
forall k a. Map k a -&gt; [k]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#keys"><span class="hs-identifier hs-var">Map.keys</span></a></span><span>
</span><span id="line-705"></span><span>                                  </span><span class="annot"><span class="annottext">(Map NodeToClientVersion (BlockNodeToClientVersion blk)
 -&gt; [NodeToClientVersion])
-&gt; Map NodeToClientVersion (BlockNodeToClientVersion blk)
-&gt; [NodeToClientVersion]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy blk -&gt; Map NodeToClientVersion (BlockNodeToClientVersion blk)
forall blk.
SupportedNetworkProtocolVersion blk =&gt;
Proxy blk -&gt; Map NodeToClientVersion (BlockNodeToClientVersion blk)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-0.27.0.0-004c8b8862bcdf99608d21368eda63ae7ec76430a4bb20826e436605913605d0/share/doc/html/src/Ouroboros.Consensus.Node.NetworkProtocolVersion.html#supportedNodeToClientVersions"><span class="hs-identifier hs-var">supportedNodeToClientVersions</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t. Proxy t
forall {k} (t :: k). Proxy t
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Proxy.html#Proxy"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621681944296"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-706"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span>  </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; Bool
</span><a href="Cardano.Node.Configuration.POM.html#ncExperimentalProtocolsEnabled"><span class="hs-identifier hs-var">ncExperimentalProtocolsEnabled</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-707"></span><span>         </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#%26%26"><span class="hs-operator hs-var">&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#not"><span class="hs-identifier hs-var">not</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[NodeToNodeVersion] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[NodeToNodeVersion]
</span><a href="#local-6989586621681945630"><span class="hs-identifier hs-var">developmentNtnVersions</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-708"></span><span>       </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk) -&gt; StartupTrace blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO (StartupTrace blk)
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO (StartupTrace blk)
</span><a href="Cardano.Node.Tracing.html#startupTracer"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-709"></span><span>                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[NodeToNodeVersion] -&gt; StartupTrace blk
forall blk. [NodeToNodeVersion] -&gt; StartupTrace blk
</span><a href="Cardano.Node.Startup.html#WarningDevelopmentNodeToNodeVersions"><span class="hs-identifier hs-var">WarningDevelopmentNodeToNodeVersions</span></a></span><span>
</span><span id="line-710"></span><span>                     </span><span class="annot"><span class="annottext">[NodeToNodeVersion]
</span><a href="#local-6989586621681945630"><span class="hs-identifier hs-var">developmentNtnVersions</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-711"></span><span>
</span><span id="line-712"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span>  </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; Bool
</span><a href="Cardano.Node.Configuration.POM.html#ncExperimentalProtocolsEnabled"><span class="hs-identifier hs-var">ncExperimentalProtocolsEnabled</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-713"></span><span>         </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#%26%26"><span class="hs-operator hs-var">&amp;&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#not"><span class="hs-identifier hs-var">not</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[NodeToClientVersion] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[NodeToClientVersion]
</span><a href="#local-6989586621681945635"><span class="hs-identifier hs-var">developmentNtcVersions</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-714"></span><span>       </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk) -&gt; StartupTrace blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO (StartupTrace blk)
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO (StartupTrace blk)
</span><a href="Cardano.Node.Tracing.html#startupTracer"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-715"></span><span>                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[NodeToClientVersion] -&gt; StartupTrace blk
forall blk. [NodeToClientVersion] -&gt; StartupTrace blk
</span><a href="Cardano.Node.Startup.html#WarningDevelopmentNodeToClientVersions"><span class="hs-identifier hs-var">WarningDevelopmentNodeToClientVersions</span></a></span><span>
</span><span id="line-716"></span><span>                     </span><span class="annot"><span class="annottext">[NodeToClientVersion]
</span><a href="#local-6989586621681945635"><span class="hs-identifier hs-var">developmentNtcVersions</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-717"></span><span>
</span><span id="line-718"></span><span>
</span><span id="line-719"></span><span>  </span><span class="annot"><a href="#local-6989586621681945337"><span class="hs-identifier hs-type">logDeprecatedLedgerDBOptions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-720"></span><span>  </span><span id="local-6989586621681945337"><span class="annot"><span class="annottext">logDeprecatedLedgerDBOptions :: IO ()
</span><a href="#local-6989586621681945337"><span class="hs-identifier hs-var hs-var">logDeprecatedLedgerDBOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-721"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DeprecatedOptions
</span><a href="#local-6989586621681945641"><span class="hs-identifier hs-var">deprecatedOpts</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-722"></span><span>      </span><span class="annot"><a href="Cardano.Node.Configuration.LedgerDB.html#DeprecatedOptions"><span class="hs-identifier hs-type">DeprecatedOptions</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-723"></span><span>      </span><span class="annot"><a href="Cardano.Node.Configuration.LedgerDB.html#DeprecatedOptions"><span class="hs-identifier hs-type">DeprecatedOptions</span></a></span><span> </span><span id="local-6989586621681945643"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681945643"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-724"></span><span>        </span><span class="annot"><span class="annottext">(String -&gt; IO ()) -&gt; [String] -&gt; IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk) -&gt; StartupTrace blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
-&gt; Tracer IO (StartupTrace blk)
forall peer localPeer blk (p2p :: P2P) extraState extraDebugState
       extraFlags extraPeers extraCounters (m :: * -&gt; *).
Tracers
  peer
  localPeer
  blk
  p2p
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraCounters
  m
-&gt; Tracer IO (StartupTrace blk)
</span><a href="Cardano.Node.Tracing.html#startupTracer"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Tracers
  RemoteAddress
  LocalAddress
  blk
  p2p
  ExtraState
  DebugPeerSelectionState
  PeerTrustable
  (ExtraPeers RemoteAddress)
  (ExtraPeerSelectionSetsWithSizes RemoteAddress)
  IO
</span><a href="#local-6989586621681945333"><span class="hs-identifier hs-var">tracers</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(StartupTrace blk -&gt; IO ())
-&gt; (String -&gt; StartupTrace blk) -&gt; String -&gt; IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; StartupTrace blk
forall blk. String -&gt; StartupTrace blk
</span><a href="Cardano.Node.Startup.html#MovedTopLevelOption"><span class="hs-identifier hs-var">MovedTopLevelOption</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681945643"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-725"></span><span>
</span><span id="line-726"></span><span>  </span><span class="annot"><a href="#local-6989586621681945377"><span class="hs-identifier hs-type">limitToLatestReleasedVersion</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621681944399"><span class="annot"><a href="#local-6989586621681944399"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span id="local-6989586621681944400"><span class="annot"><a href="#local-6989586621681944400"><span class="hs-identifier hs-type">v</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-727"></span><span>       </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Ord"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944399"><span class="hs-identifier hs-type">k</span></a></span><span>
</span><span id="line-728"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.NodeToNode.Version.html#NodeToNodeVersion"><span class="hs-identifier hs-type">NodeToNodeVersion</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.NodeToClient.Version.html#NodeToClientVersion"><span class="hs-identifier hs-type">NodeToClientVersion</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944399"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-729"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944399"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944400"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-730"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944399"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944400"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-731"></span><span>  </span><span id="local-6989586621681945377"><span class="annot"><span class="annottext">limitToLatestReleasedVersion :: forall k v.
Ord k =&gt;
((Maybe NodeToNodeVersion, Maybe NodeToClientVersion) -&gt; Maybe k)
-&gt; Map k v -&gt; Map k v
</span><a href="#local-6989586621681945377"><span class="hs-identifier hs-var hs-var">limitToLatestReleasedVersion</span></a></span></span><span> </span><span id="local-6989586621681945648"><span class="annot"><span class="annottext">(Maybe NodeToNodeVersion, Maybe NodeToClientVersion) -&gt; Maybe k
</span><a href="#local-6989586621681945648"><span class="hs-identifier hs-var">prj</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-732"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; Bool
</span><a href="Cardano.Node.Configuration.POM.html#ncExperimentalProtocolsEnabled"><span class="hs-identifier hs-var">ncExperimentalProtocolsEnabled</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Map k v -&gt; Map k v
forall a. a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#id"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-733"></span><span>      </span><span class="hs-keyword">else</span><span>
</span><span id="line-734"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">(Maybe NodeToNodeVersion, Maybe NodeToClientVersion) -&gt; Maybe k
</span><a href="#local-6989586621681945648"><span class="hs-identifier hs-var">prj</span></a></span><span> </span><span class="annot"><span class="annottext">((Maybe NodeToNodeVersion, Maybe NodeToClientVersion) -&gt; Maybe k)
-&gt; (Maybe NodeToNodeVersion, Maybe NodeToClientVersion) -&gt; Maybe k
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy blk -&gt; (Maybe NodeToNodeVersion, Maybe NodeToClientVersion)
forall blk.
SupportedNetworkProtocolVersion blk =&gt;
Proxy blk -&gt; (Maybe NodeToNodeVersion, Maybe NodeToClientVersion)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-0.27.0.0-004c8b8862bcdf99608d21368eda63ae7ec76430a4bb20826e436605913605d0/share/doc/html/src/Ouroboros.Consensus.Node.NetworkProtocolVersion.html#latestReleasedNodeVersion"><span class="hs-identifier hs-var">latestReleasedNodeVersion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t. Proxy t
forall {k} (t :: k). Proxy t
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Proxy.html#Proxy"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621681944296"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-735"></span><span>        </span><span class="annot"><span class="annottext">Maybe k
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map k v -&gt; Map k v
forall a. a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#id"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-736"></span><span>        </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681945650"><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621681945650"><span class="hs-identifier hs-var">version_</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(k -&gt; Bool) -&gt; Map k v -&gt; Map k v
forall k a. (k -&gt; Bool) -&gt; Map k a -&gt; Map k a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#takeWhileAntitone"><span class="hs-identifier hs-var">Map.takeWhileAntitone</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">k -&gt; k -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#%3C%3D"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621681945650"><span class="hs-identifier hs-var">version_</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-737"></span><span>
</span><span id="line-738"></span><span>  </span><span class="annot"><a href="Cardano.Node.Configuration.LedgerDB.html#LedgerDbConfiguration"><span class="hs-identifier hs-type">LedgerDbConfiguration</span></a></span><span>
</span><span id="line-739"></span><span>    </span><span id="local-6989586621681945654"><span class="annot"><span class="annottext">NumOfDiskSnapshots
</span><a href="#local-6989586621681945654"><span class="hs-identifier hs-var">snapInterval</span></a></span></span><span>
</span><span id="line-740"></span><span>    </span><span id="local-6989586621681945655"><span class="annot"><span class="annottext">SnapshotInterval
</span><a href="#local-6989586621681945655"><span class="hs-identifier hs-var">numSnaps</span></a></span></span><span>
</span><span id="line-741"></span><span>    </span><span id="local-6989586621681945549"><span class="annot"><span class="annottext">QueryBatchSize
</span><a href="#local-6989586621681945549"><span class="hs-identifier hs-var">queryBatchSize</span></a></span></span><span>
</span><span id="line-742"></span><span>    </span><span id="local-6989586621681945552"><span class="annot"><span class="annottext">LedgerDbSelectorFlag
</span><a href="#local-6989586621681945552"><span class="hs-identifier hs-var">ldbBackend</span></a></span></span><span>
</span><span id="line-743"></span><span>    </span><span id="local-6989586621681945641"><span class="annot"><span class="annottext">DeprecatedOptions
</span><a href="#local-6989586621681945641"><span class="hs-identifier hs-var">deprecatedOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NodeConfiguration -&gt; LedgerDbConfiguration
</span><a href="Cardano.Node.Configuration.POM.html#ncLedgerDbConfig"><span class="hs-identifier hs-var">ncLedgerDbConfig</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945334"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-744"></span><span>
</span><span id="line-745"></span><span>  </span><span class="annot"><a href="#local-6989586621681945547"><span class="hs-identifier hs-type">snapshotPolicyArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-0.27.0.0-004c8b8862bcdf99608d21368eda63ae7ec76430a4bb20826e436605913605d0/share/doc/html/src/Ouroboros.Consensus.Storage.LedgerDB.Snapshots.html#SnapshotPolicyArgs"><span class="hs-identifier hs-type">SnapshotPolicyArgs</span></a></span><span>
</span><span id="line-746"></span><span>  </span><span id="local-6989586621681945547"><span class="annot"><span class="annottext">snapshotPolicyArgs :: SnapshotPolicyArgs
</span><a href="#local-6989586621681945547"><span class="hs-identifier hs-var hs-var">snapshotPolicyArgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SnapshotInterval -&gt; NumOfDiskSnapshots -&gt; SnapshotPolicyArgs
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-0.27.0.0-004c8b8862bcdf99608d21368eda63ae7ec76430a4bb20826e436605913605d0/share/doc/html/src/Ouroboros.Consensus.Storage.LedgerDB.Snapshots.html#SnapshotPolicyArgs"><span class="hs-identifier hs-var">SnapshotPolicyArgs</span></a></span><span> </span><span class="annot"><span class="annottext">SnapshotInterval
</span><a href="#local-6989586621681945655"><span class="hs-identifier hs-var">numSnaps</span></a></span><span> </span><span class="annot"><span class="annottext">NumOfDiskSnapshots
</span><a href="#local-6989586621681945654"><span class="hs-identifier hs-var">snapInterval</span></a></span><span>
</span><span id="line-747"></span><span>
</span><span id="line-748"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-749"></span><span class="hs-comment">-- SIGHUP Handlers</span><span>
</span><span id="line-750"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-751"></span><span>
</span><span id="line-752"></span><span class="hs-comment">-- | The P2P SIGHUP handler can update block forging &amp; reconfigure network topology.</span><span>
</span><span id="line-753"></span><span class="hs-comment">--</span><span>
</span><span id="line-754"></span><span id="local-6989586621681944520"><span class="annot"><a href="Cardano.Node.Run.html#installP2PSigHUPHandler"><span class="hs-identifier hs-type">installP2PSigHUPHandler</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#Tracer"><span class="hs-identifier hs-type">Tracer</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Startup.html#StartupTrace"><span class="hs-identifier hs-type">StartupTrace</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944520"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-755"></span><span>                        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-api-10.18.0.0-cf96680f7a5f126623afc107f46c4390ef848488275422e58a8da147b9415623/share/doc/html/src/Cardano.Api.Consensus.Internal.Protocol.html#BlockType"><span class="hs-identifier hs-type">Api.BlockType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944520"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-756"></span><span>                        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.POM.html#NodeConfiguration"><span class="hs-identifier hs-type">NodeConfiguration</span></a></span><span>
</span><span id="line-757"></span><span>                        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.NodeKernel.html#NodeKernel"><span class="hs-identifier hs-type">NodeKernel</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.NodeToNode.html#RemoteAddress"><span class="hs-identifier hs-type">RemoteAddress</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-framework-0.18.0.2-e5e675f5f8bd9f2a1e99040ff85ace8bb30006cb1118a4f0531fde62ebeff5fc/share/doc/html/src/Ouroboros.Network.ConnectionId.html#ConnectionId"><span class="hs-identifier hs-type">ConnectionId</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-framework-0.18.0.2-e5e675f5f8bd9f2a1e99040ff85ace8bb30006cb1118a4f0531fde62ebeff5fc/share/doc/html/src/Ouroboros.Network.Snocket.html#LocalAddress"><span class="hs-identifier hs-type">LocalAddress</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681944520"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-758"></span><span>                        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.State.LocalRootPeers.html#HotValency"><span class="hs-identifier hs-type">HotValency</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.State.LocalRootPeers.html#WarmValency"><span class="hs-identifier hs-type">WarmValency</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.RelayAccessPoint.html#RelayAccessPoint"><span class="hs-identifier hs-type">RelayAccessPoint</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.State.LocalRootPeers.html#LocalRootConfig"><span class="hs-identifier hs-type">LocalRootConfig</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Cardano.Network.PeerSelection.PeerTrustable.html#PeerTrustable"><span class="hs-identifier hs-type">PeerTrustable</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-759"></span><span>                        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.RelayAccessPoint.html#RelayAccessPoint"><span class="hs-identifier hs-type">RelayAccessPoint</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.PeerAdvertise.html#PeerAdvertise"><span class="hs-identifier hs-type">PeerAdvertise</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-760"></span><span>                        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.LedgerPeers.Type.html#UseLedgerPeers"><span class="hs-identifier hs-type">UseLedgerPeers</span></a></span><span>
</span><span id="line-761"></span><span>                        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Cardano.Network.PeerSelection.Bootstrap.html#UseBootstrapPeers"><span class="hs-identifier hs-type">UseBootstrapPeers</span></a></span><span>
</span><span id="line-762"></span><span>                        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Cardano.Node.Types.html#PeerSnapshotFile"><span class="hs-identifier hs-type">PeerSnapshotFile</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-763"></span><span>                        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.LedgerPeers.Type.html#LedgerPeerSnapshot"><span class="hs-identifier hs-type">LedgerPeerSnapshot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-764"></span><span>                        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span class="hs-cpp">
#ifndef UNIX
</span><span class="hs-identifier">installP2PSigHUPHandler</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-cpp">
#else
</span><span id="installP2PSigHUPHandler"><span class="annot"><span class="annottext">installP2PSigHUPHandler :: forall blk.
Tracer IO (StartupTrace blk)
-&gt; BlockType blk
-&gt; NodeConfiguration
-&gt; NodeKernel IO RemoteAddress LocalConnectionId blk
-&gt; StrictTVar
     IO
     [(HotValency, WarmValency,
       Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
-&gt; StrictTVar IO (Map RelayAccessPoint PeerAdvertise)
-&gt; StrictTVar IO UseLedgerPeers
-&gt; StrictTVar IO UseBootstrapPeers
-&gt; StrictTVar IO (Maybe PeerSnapshotFile)
-&gt; StrictTVar IO (Maybe LedgerPeerSnapshot)
-&gt; IO ()
</span><a href="Cardano.Node.Run.html#installP2PSigHUPHandler"><span class="hs-identifier hs-var hs-var">installP2PSigHUPHandler</span></a></span></span><span> </span><span id="local-6989586621681945666"><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk)
</span><a href="#local-6989586621681945666"><span class="hs-identifier hs-var">startupTracer</span></a></span></span><span> </span><span id="local-6989586621681945667"><span class="annot"><span class="annottext">BlockType blk
</span><a href="#local-6989586621681945667"><span class="hs-identifier hs-var">blockType</span></a></span></span><span> </span><span id="local-6989586621681945668"><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945668"><span class="hs-identifier hs-var">nc</span></a></span></span><span> </span><span id="local-6989586621681945669"><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk
</span><a href="#local-6989586621681945669"><span class="hs-identifier hs-var">nodeKernel</span></a></span></span><span> </span><span id="local-6989586621681945670"><span class="annot"><span class="annottext">StrictTVar
  IO
  [(HotValency, WarmValency,
    Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
</span><a href="#local-6989586621681945670"><span class="hs-identifier hs-var">localRootsVar</span></a></span></span><span> </span><span id="local-6989586621681945671"><span class="annot"><span class="annottext">StrictTVar IO (Map RelayAccessPoint PeerAdvertise)
</span><a href="#local-6989586621681945671"><span class="hs-identifier hs-var">publicRootsVar</span></a></span></span><span> </span><span id="local-6989586621681945672"><span class="annot"><span class="annottext">StrictTVar IO UseLedgerPeers
</span><a href="#local-6989586621681945672"><span class="hs-identifier hs-var">useLedgerVar</span></a></span></span><span>
</span><span id="line-769"></span><span>                        </span><span id="local-6989586621681945673"><span class="annot"><span class="annottext">StrictTVar IO UseBootstrapPeers
</span><a href="#local-6989586621681945673"><span class="hs-identifier hs-var">useBootstrapPeersVar</span></a></span></span><span> </span><span id="local-6989586621681945674"><span class="annot"><span class="annottext">StrictTVar IO (Maybe PeerSnapshotFile)
</span><a href="#local-6989586621681945674"><span class="hs-identifier hs-var">ledgerPeerSnapshotPathVar</span></a></span></span><span> </span><span id="local-6989586621681945675"><span class="annot"><span class="annottext">StrictTVar IO (Maybe LedgerPeerSnapshot)
</span><a href="#local-6989586621681945675"><span class="hs-identifier hs-var">ledgerPeerSnapshotVar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-770"></span><span>  </span><span class="annot"><span class="annottext">IO Handler -&gt; IO ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Functor.html#void"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">(IO Handler -&gt; IO ()) -&gt; IO Handler -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Signal -&gt; Handler -&gt; Maybe SignalSet -&gt; IO Handler
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/unix-2.8.4.0/src/System.Posix.Signals.html#installHandler"><span class="hs-identifier hs-var">Signals.installHandler</span></a></span><span>
</span><span id="line-771"></span><span>    </span><span class="annot"><span class="annottext">Signal
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/unix-2.8.4.0/src/System.Posix.Signals.html#sigHUP"><span class="hs-identifier hs-var">Signals.sigHUP</span></a></span><span>
</span><span id="line-772"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IO () -&gt; Handler
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/unix-2.8.4.0/src/System.Posix.Signals.html#Catch"><span class="hs-identifier hs-var">Signals.Catch</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; Handler) -&gt; IO () -&gt; Handler
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-773"></span><span>      </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk)
-&gt; BlockType blk
-&gt; NodeKernel IO RemoteAddress LocalConnectionId blk
-&gt; NodeConfiguration
-&gt; IO ()
forall blk.
Tracer IO (StartupTrace blk)
-&gt; BlockType blk
-&gt; NodeKernel IO RemoteAddress LocalConnectionId blk
-&gt; NodeConfiguration
-&gt; IO ()
</span><a href="Cardano.Node.Run.html#updateBlockForging"><span class="hs-identifier hs-var">updateBlockForging</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk)
</span><a href="#local-6989586621681945666"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="annot"><span class="annottext">BlockType blk
</span><a href="#local-6989586621681945667"><span class="hs-identifier hs-var">blockType</span></a></span><span> </span><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk
</span><a href="#local-6989586621681945669"><span class="hs-identifier hs-var">nodeKernel</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945668"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-774"></span><span>      </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk)
-&gt; NodeConfiguration
-&gt; StrictTVar
     IO
     [(HotValency, WarmValency,
       Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
-&gt; StrictTVar IO (Map RelayAccessPoint PeerAdvertise)
-&gt; StrictTVar IO UseLedgerPeers
-&gt; StrictTVar IO UseBootstrapPeers
-&gt; StrictTVar IO (Maybe PeerSnapshotFile)
-&gt; IO ()
forall blk.
Tracer IO (StartupTrace blk)
-&gt; NodeConfiguration
-&gt; StrictTVar
     IO
     [(HotValency, WarmValency,
       Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
-&gt; StrictTVar IO (Map RelayAccessPoint PeerAdvertise)
-&gt; StrictTVar IO UseLedgerPeers
-&gt; StrictTVar IO UseBootstrapPeers
-&gt; StrictTVar IO (Maybe PeerSnapshotFile)
-&gt; IO ()
</span><a href="Cardano.Node.Run.html#updateTopologyConfiguration"><span class="hs-identifier hs-var">updateTopologyConfiguration</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk)
</span><a href="#local-6989586621681945666"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945668"><span class="hs-identifier hs-var">nc</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar
  IO
  [(HotValency, WarmValency,
    Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
</span><a href="#local-6989586621681945670"><span class="hs-identifier hs-var">localRootsVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar IO (Map RelayAccessPoint PeerAdvertise)
</span><a href="#local-6989586621681945671"><span class="hs-identifier hs-var">publicRootsVar</span></a></span><span>
</span><span id="line-775"></span><span>                                  </span><span class="annot"><span class="annottext">StrictTVar IO UseLedgerPeers
</span><a href="#local-6989586621681945672"><span class="hs-identifier hs-var">useLedgerVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar IO UseBootstrapPeers
</span><a href="#local-6989586621681945673"><span class="hs-identifier hs-var">useBootstrapPeersVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar IO (Maybe PeerSnapshotFile)
</span><a href="#local-6989586621681945674"><span class="hs-identifier hs-var">ledgerPeerSnapshotPathVar</span></a></span><span>
</span><span id="line-776"></span><span>      </span><span class="annot"><span class="annottext">IO (Maybe LedgerPeerSnapshot) -&gt; IO ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Functor.html#void"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Maybe LedgerPeerSnapshot) -&gt; IO ())
-&gt; IO (Maybe LedgerPeerSnapshot) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk)
-&gt; NodeConfiguration
-&gt; STM IO (Maybe PeerSnapshotFile)
-&gt; STM IO UseLedgerPeers
-&gt; (Maybe LedgerPeerSnapshot -&gt; STM IO ())
-&gt; IO (Maybe LedgerPeerSnapshot)
forall blk.
Tracer IO (StartupTrace blk)
-&gt; NodeConfiguration
-&gt; STM IO (Maybe PeerSnapshotFile)
-&gt; STM IO UseLedgerPeers
-&gt; (Maybe LedgerPeerSnapshot -&gt; STM IO ())
-&gt; IO (Maybe LedgerPeerSnapshot)
</span><a href="Cardano.Node.Run.html#updateLedgerPeerSnapshot"><span class="hs-identifier hs-var">updateLedgerPeerSnapshot</span></a></span><span>
</span><span id="line-777"></span><span>               </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk)
</span><a href="#local-6989586621681945666"><span class="hs-identifier hs-var">startupTracer</span></a></span><span>
</span><span id="line-778"></span><span>               </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945668"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-779"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StrictTVar IO (Maybe PeerSnapshotFile)
-&gt; STM IO (Maybe PeerSnapshotFile)
forall (m :: * -&gt; *) a. MonadSTM m =&gt; StrictTVar m a -&gt; STM m a
</span><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#readTVar"><span class="hs-identifier hs-var">readTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar IO (Maybe PeerSnapshotFile)
</span><a href="#local-6989586621681945674"><span class="hs-identifier hs-var">ledgerPeerSnapshotPathVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-780"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StrictTVar IO UseLedgerPeers -&gt; STM IO UseLedgerPeers
forall (m :: * -&gt; *) a. MonadSTM m =&gt; StrictTVar m a -&gt; STM m a
</span><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#readTVar"><span class="hs-identifier hs-var">readTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar IO UseLedgerPeers
</span><a href="#local-6989586621681945672"><span class="hs-identifier hs-var">useLedgerVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-781"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StrictTVar IO (Maybe LedgerPeerSnapshot)
-&gt; Maybe LedgerPeerSnapshot -&gt; STM IO ()
forall (m :: * -&gt; *) a.
MonadSTM m =&gt;
StrictTVar m a -&gt; a -&gt; STM m ()
</span><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#writeTVar"><span class="hs-identifier hs-var">writeTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar IO (Maybe LedgerPeerSnapshot)
</span><a href="#local-6989586621681945675"><span class="hs-identifier hs-var">ledgerPeerSnapshotVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-782"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-783"></span><span>    </span><span class="annot"><span class="annottext">Maybe SignalSet
forall a. Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-786"></span><span class="hs-comment">-- | The NonP2P SIGHUP handler can only update block forging.</span><span>
</span><span id="line-787"></span><span class="hs-comment">--</span><span>
</span><span id="line-788"></span><span id="local-6989586621681944613"><span class="annot"><a href="Cardano.Node.Run.html#installNonP2PSigHUPHandler"><span class="hs-identifier hs-type">installNonP2PSigHUPHandler</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#Tracer"><span class="hs-identifier hs-type">Tracer</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Startup.html#StartupTrace"><span class="hs-identifier hs-type">StartupTrace</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944613"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-789"></span><span>                           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-api-10.18.0.0-cf96680f7a5f126623afc107f46c4390ef848488275422e58a8da147b9415623/share/doc/html/src/Cardano.Api.Consensus.Internal.Protocol.html#BlockType"><span class="hs-identifier hs-type">Api.BlockType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944613"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-790"></span><span>                           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.POM.html#NodeConfiguration"><span class="hs-identifier hs-type">NodeConfiguration</span></a></span><span>
</span><span id="line-791"></span><span>                           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.NodeKernel.html#NodeKernel"><span class="hs-identifier hs-type">NodeKernel</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.NodeToNode.html#RemoteAddress"><span class="hs-identifier hs-type">RemoteAddress</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-framework-0.18.0.2-e5e675f5f8bd9f2a1e99040ff85ace8bb30006cb1118a4f0531fde62ebeff5fc/share/doc/html/src/Ouroboros.Network.ConnectionId.html#ConnectionId"><span class="hs-identifier hs-type">ConnectionId</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-framework-0.18.0.2-e5e675f5f8bd9f2a1e99040ff85ace8bb30006cb1118a4f0531fde62ebeff5fc/share/doc/html/src/Ouroboros.Network.Snocket.html#LocalAddress"><span class="hs-identifier hs-type">LocalAddress</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681944613"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-792"></span><span>                           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span class="hs-cpp">
#ifndef UNIX
</span><span class="hs-identifier">installNonP2PSigHUPHandler</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-cpp">
#else
</span><span id="installNonP2PSigHUPHandler"><span class="annot"><span class="annottext">installNonP2PSigHUPHandler :: forall blk.
Tracer IO (StartupTrace blk)
-&gt; BlockType blk
-&gt; NodeConfiguration
-&gt; NodeKernel IO RemoteAddress LocalConnectionId blk
-&gt; IO ()
</span><a href="Cardano.Node.Run.html#installNonP2PSigHUPHandler"><span class="hs-identifier hs-var hs-var">installNonP2PSigHUPHandler</span></a></span></span><span> </span><span id="local-6989586621681945679"><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk)
</span><a href="#local-6989586621681945679"><span class="hs-identifier hs-var">startupTracer</span></a></span></span><span> </span><span id="local-6989586621681945680"><span class="annot"><span class="annottext">BlockType blk
</span><a href="#local-6989586621681945680"><span class="hs-identifier hs-var">blockType</span></a></span></span><span> </span><span id="local-6989586621681945681"><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945681"><span class="hs-identifier hs-var">nc</span></a></span></span><span> </span><span id="local-6989586621681945682"><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk
</span><a href="#local-6989586621681945682"><span class="hs-identifier hs-var">nodeKernel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-797"></span><span>  </span><span class="annot"><span class="annottext">IO Handler -&gt; IO ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Functor.html#void"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">(IO Handler -&gt; IO ()) -&gt; IO Handler -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Signal -&gt; Handler -&gt; Maybe SignalSet -&gt; IO Handler
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/unix-2.8.4.0/src/System.Posix.Signals.html#installHandler"><span class="hs-identifier hs-var">Signals.installHandler</span></a></span><span>
</span><span id="line-798"></span><span>    </span><span class="annot"><span class="annottext">Signal
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/unix-2.8.4.0/src/System.Posix.Signals.html#sigHUP"><span class="hs-identifier hs-var">Signals.sigHUP</span></a></span><span>
</span><span id="line-799"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IO () -&gt; Handler
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/unix-2.8.4.0/src/System.Posix.Signals.html#Catch"><span class="hs-identifier hs-var">Signals.Catch</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; Handler) -&gt; IO () -&gt; Handler
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-800"></span><span>      </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk)
-&gt; BlockType blk
-&gt; NodeKernel IO RemoteAddress LocalConnectionId blk
-&gt; NodeConfiguration
-&gt; IO ()
forall blk.
Tracer IO (StartupTrace blk)
-&gt; BlockType blk
-&gt; NodeKernel IO RemoteAddress LocalConnectionId blk
-&gt; NodeConfiguration
-&gt; IO ()
</span><a href="Cardano.Node.Run.html#updateBlockForging"><span class="hs-identifier hs-var">updateBlockForging</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk)
</span><a href="#local-6989586621681945679"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="annot"><span class="annottext">BlockType blk
</span><a href="#local-6989586621681945680"><span class="hs-identifier hs-var">blockType</span></a></span><span> </span><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk
</span><a href="#local-6989586621681945682"><span class="hs-identifier hs-var">nodeKernel</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945681"><span class="hs-identifier hs-var">nc</span></a></span><span>
</span><span id="line-801"></span><span>      </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk) -&gt; StartupTrace blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk)
</span><a href="#local-6989586621681945679"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="annot"><span class="annottext">StartupTrace blk
forall blk. StartupTrace blk
</span><a href="Cardano.Node.Startup.html#NetworkConfigUpdateUnsupported"><span class="hs-identifier hs-var">NetworkConfigUpdateUnsupported</span></a></span><span>
</span><span id="line-802"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-803"></span><span>    </span><span class="annot"><span class="annottext">Maybe SignalSet
forall a. Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-cpp">
#endif
</span><span class="hs-cpp">

#ifdef UNIX
</span><span id="local-6989586621681944646"><span class="annot"><a href="Cardano.Node.Run.html#updateBlockForging"><span class="hs-identifier hs-type">updateBlockForging</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#Tracer"><span class="hs-identifier hs-type">Tracer</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Startup.html#StartupTrace"><span class="hs-identifier hs-type">StartupTrace</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944646"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-809"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-api-10.18.0.0-cf96680f7a5f126623afc107f46c4390ef848488275422e58a8da147b9415623/share/doc/html/src/Cardano.Api.Consensus.Internal.Protocol.html#BlockType"><span class="hs-identifier hs-type">Api.BlockType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944646"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-810"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.NodeKernel.html#NodeKernel"><span class="hs-identifier hs-type">NodeKernel</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.NodeToNode.html#RemoteAddress"><span class="hs-identifier hs-type">RemoteAddress</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-framework-0.18.0.2-e5e675f5f8bd9f2a1e99040ff85ace8bb30006cb1118a4f0531fde62ebeff5fc/share/doc/html/src/Ouroboros.Network.ConnectionId.html#ConnectionId"><span class="hs-identifier hs-type">ConnectionId</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-framework-0.18.0.2-e5e675f5f8bd9f2a1e99040ff85ace8bb30006cb1118a4f0531fde62ebeff5fc/share/doc/html/src/Ouroboros.Network.Snocket.html#LocalAddress"><span class="hs-identifier hs-type">LocalAddress</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681944646"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-811"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.POM.html#NodeConfiguration"><span class="hs-identifier hs-type">NodeConfiguration</span></a></span><span>
</span><span id="line-812"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-813"></span><span id="updateBlockForging"><span class="annot"><span class="annottext">updateBlockForging :: forall blk.
Tracer IO (StartupTrace blk)
-&gt; BlockType blk
-&gt; NodeKernel IO RemoteAddress LocalConnectionId blk
-&gt; NodeConfiguration
-&gt; IO ()
</span><a href="Cardano.Node.Run.html#updateBlockForging"><span class="hs-identifier hs-var hs-var">updateBlockForging</span></a></span></span><span> </span><span id="local-6989586621681945687"><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk)
</span><a href="#local-6989586621681945687"><span class="hs-identifier hs-var">startupTracer</span></a></span></span><span> </span><span id="local-6989586621681945688"><span class="annot"><span class="annottext">BlockType blk
</span><a href="#local-6989586621681945688"><span class="hs-identifier hs-var">blockType</span></a></span></span><span> </span><span id="local-6989586621681945689"><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk
</span><a href="#local-6989586621681945689"><span class="hs-identifier hs-var">nodeKernel</span></a></span></span><span> </span><span id="local-6989586621681945690"><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945690"><span class="hs-identifier hs-var">nc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-814"></span><span>  </span><span id="local-6989586621681945691"><span class="annot"><span class="annottext">Either ProtocolInstantiationError SomeConsensusProtocol
</span><a href="#local-6989586621681945691"><span class="hs-identifier hs-var">eitherSomeProtocol</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExceptT ProtocolInstantiationError IO SomeConsensusProtocol
-&gt; IO (Either ProtocolInstantiationError SomeConsensusProtocol)
forall e (m :: * -&gt; *) a. ExceptT e m a -&gt; m (Either e a)
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Except.html#runExceptT"><span class="hs-identifier hs-var">runExceptT</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT ProtocolInstantiationError IO SomeConsensusProtocol
 -&gt; IO (Either ProtocolInstantiationError SomeConsensusProtocol))
-&gt; ExceptT ProtocolInstantiationError IO SomeConsensusProtocol
-&gt; IO (Either ProtocolInstantiationError SomeConsensusProtocol)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NodeProtocolConfiguration
-&gt; Maybe ProtocolFilepaths
-&gt; ExceptT ProtocolInstantiationError IO SomeConsensusProtocol
</span><a href="Cardano.Node.Protocol.html#mkConsensusProtocol"><span class="hs-identifier hs-var">mkConsensusProtocol</span></a></span><span>
</span><span id="line-815"></span><span>                                       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NodeConfiguration -&gt; NodeProtocolConfiguration
</span><a href="Cardano.Node.Configuration.POM.html#ncProtocolConfig"><span class="hs-identifier hs-var">ncProtocolConfig</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945690"><span class="hs-identifier hs-var">nc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-816"></span><span>                                       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtocolFilepaths -&gt; Maybe ProtocolFilepaths
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NodeConfiguration -&gt; ProtocolFilepaths
</span><a href="Cardano.Node.Configuration.POM.html#ncProtocolFiles"><span class="hs-identifier hs-var">ncProtocolFiles</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945690"><span class="hs-identifier hs-var">nc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-817"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either ProtocolInstantiationError SomeConsensusProtocol
</span><a href="#local-6989586621681945691"><span class="hs-identifier hs-var">eitherSomeProtocol</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-818"></span><span>    </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621681945692"><span class="annot"><span class="annottext">ProtocolInstantiationError
</span><a href="#local-6989586621681945692"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-819"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ProtocolInstantiationError -&gt; Maybe (FileError TextEnvelopeError)
</span><a href="#local-6989586621681945693"><span class="hs-identifier hs-var">wasFileRemovedFromScope</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolInstantiationError
</span><a href="#local-6989586621681945692"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-820"></span><span>        </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-api-10.18.0.0-cf96680f7a5f126623afc107f46c4390ef848488275422e58a8da147b9415623/share/doc/html/src/Cardano.Api.Error.html#FileDoesNotExistError"><span class="hs-identifier hs-type">Api.FileDoesNotExistError</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-821"></span><span>          </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk) -&gt; StartupTrace blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk)
</span><a href="#local-6989586621681945687"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EnabledBlockForging -&gt; StartupTrace blk
forall blk. EnabledBlockForging -&gt; StartupTrace blk
</span><a href="Cardano.Node.Startup.html#BlockForgingUpdate"><span class="hs-identifier hs-var">BlockForgingUpdate</span></a></span><span> </span><span class="annot"><span class="annottext">EnabledBlockForging
</span><a href="Cardano.Node.Startup.html#DisabledBlockForging"><span class="hs-identifier hs-var">DisabledBlockForging</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-822"></span><span>          </span><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk
-&gt; [BlockForging IO blk] -&gt; IO ()
forall (m :: * -&gt; *) addrNTN addrNTC blk.
NodeKernel m addrNTN addrNTC blk -&gt; [BlockForging m blk] -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.NodeKernel.html#%24sel%3AsetBlockForging%3ANodeKernel"><span class="hs-identifier hs-var">setBlockForging</span></a></span><span> </span><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk
</span><a href="#local-6989586621681945689"><span class="hs-identifier hs-var">nodeKernel</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-823"></span><span>        </span><span id="local-6989586621681945695"><span class="annot"><span class="annottext">Maybe (FileError TextEnvelopeError)
</span><a href="#local-6989586621681945695"><span class="hs-identifier hs-var">_NothingOrOtherFileError</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-824"></span><span>          </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk) -&gt; StartupTrace blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk)
</span><a href="#local-6989586621681945687"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtocolInstantiationError -&gt; StartupTrace blk
forall blk. ProtocolInstantiationError -&gt; StartupTrace blk
</span><a href="Cardano.Node.Startup.html#BlockForgingUpdateError"><span class="hs-identifier hs-var">BlockForgingUpdateError</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolInstantiationError
</span><a href="#local-6989586621681945692"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-825"></span><span>    </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Protocol.Types.html#SomeConsensusProtocol"><span class="hs-identifier hs-type">SomeConsensusProtocol</span></a></span><span> </span><span id="local-6989586621681945704"><span class="annot"><span class="annottext">BlockType blk
</span><a href="#local-6989586621681945704"><span class="hs-identifier hs-var">blockType'</span></a></span></span><span> </span><span id="local-6989586621681945705"><span class="annot"><span class="annottext">ProtocolInfoArgs blk
</span><a href="#local-6989586621681945705"><span class="hs-identifier hs-var">runP'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-826"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">BlockType blk -&gt; BlockType blk -&gt; Maybe (blk :~: blk)
forall blk blk'.
BlockType blk -&gt; BlockType blk' -&gt; Maybe (blk :~: blk')
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-api-10.18.0.0-cf96680f7a5f126623afc107f46c4390ef848488275422e58a8da147b9415623/share/doc/html/src/Cardano.Api.Consensus.Internal.Protocol.html#reflBlockType"><span class="hs-identifier hs-var">Api.reflBlockType</span></a></span><span> </span><span class="annot"><span class="annottext">BlockType blk
</span><a href="#local-6989586621681945688"><span class="hs-identifier hs-var">blockType</span></a></span><span> </span><span class="annot"><span class="annottext">BlockType blk
</span><a href="#local-6989586621681945704"><span class="hs-identifier hs-var">blockType'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-827"></span><span>        </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">blk :~: blk
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Type.Equality.html#Refl"><span class="hs-identifier hs-var">Refl</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-828"></span><span>          </span><span class="hs-comment">-- TODO: check if runP' has changed</span><span>
</span><span id="line-829"></span><span>          </span><span id="local-6989586621681945714"><span class="annot"><span class="annottext">[BlockForging IO blk]
</span><a href="#local-6989586621681945714"><span class="hs-identifier hs-var">blockForging</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(ProtocolInfo blk, IO [BlockForging IO blk])
-&gt; IO [BlockForging IO blk]
forall a b. (a, b) -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProtocolInfoArgs blk
-&gt; (ProtocolInfo blk, IO [BlockForging IO blk])
forall (m :: * -&gt; *) blk.
Protocol m blk =&gt;
ProtocolInfoArgs blk -&gt; (ProtocolInfo blk, m [BlockForging m blk])
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-api-10.18.0.0-cf96680f7a5f126623afc107f46c4390ef848488275422e58a8da147b9415623/share/doc/html/src/Cardano.Api.Consensus.Internal.Protocol.html#protocolInfo"><span class="hs-identifier hs-var">Api.protocolInfo</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolInfoArgs blk
</span><a href="#local-6989586621681945705"><span class="hs-identifier hs-var">runP'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-830"></span><span>          </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk) -&gt; StartupTrace blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk)
</span><a href="#local-6989586621681945687"><span class="hs-identifier hs-var">startupTracer</span></a></span><span>
</span><span id="line-831"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EnabledBlockForging -&gt; StartupTrace blk
forall blk. EnabledBlockForging -&gt; StartupTrace blk
</span><a href="Cardano.Node.Startup.html#BlockForgingUpdate"><span class="hs-identifier hs-var">BlockForgingUpdate</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[BlockForging IO blk] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[BlockForging IO blk]
</span><a href="#local-6989586621681945714"><span class="hs-identifier hs-var">blockForging</span></a></span><span>
</span><span id="line-832"></span><span>                                          </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">EnabledBlockForging
</span><a href="Cardano.Node.Startup.html#DisabledBlockForging"><span class="hs-identifier hs-var">DisabledBlockForging</span></a></span><span>
</span><span id="line-833"></span><span>                                          </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">EnabledBlockForging
</span><a href="Cardano.Node.Startup.html#EnabledBlockForging"><span class="hs-identifier hs-var">EnabledBlockForging</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-834"></span><span>          </span><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk
-&gt; [BlockForging IO blk] -&gt; IO ()
forall (m :: * -&gt; *) addrNTN addrNTC blk.
NodeKernel m addrNTN addrNTC blk -&gt; [BlockForging m blk] -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.NodeKernel.html#%24sel%3AsetBlockForging%3ANodeKernel"><span class="hs-identifier hs-var">setBlockForging</span></a></span><span> </span><span class="annot"><span class="annottext">NodeKernel IO RemoteAddress LocalConnectionId blk
</span><a href="#local-6989586621681945689"><span class="hs-identifier hs-var">nodeKernel</span></a></span><span> </span><span class="annot"><span class="annottext">[BlockForging IO blk]
[BlockForging IO blk]
</span><a href="#local-6989586621681945714"><span class="hs-identifier hs-var">blockForging</span></a></span><span>
</span><span id="line-835"></span><span>        </span><span class="annot"><span class="annottext">Maybe (blk :~: blk)
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-836"></span><span>          </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk) -&gt; StartupTrace blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk)
</span><a href="#local-6989586621681945687"><span class="hs-identifier hs-var">startupTracer</span></a></span><span>
</span><span id="line-837"></span><span>            </span><span class="annot"><span class="annottext">(StartupTrace blk -&gt; IO ()) -&gt; StartupTrace blk -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SomeBlockType -&gt; SomeBlockType -&gt; StartupTrace blk
forall blk. SomeBlockType -&gt; SomeBlockType -&gt; StartupTrace blk
</span><a href="Cardano.Node.Startup.html#BlockForgingBlockTypeMismatch"><span class="hs-identifier hs-var">BlockForgingBlockTypeMismatch</span></a></span><span>
</span><span id="line-838"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BlockType blk -&gt; SomeBlockType
forall blk. BlockType blk -&gt; SomeBlockType
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-api-10.18.0.0-cf96680f7a5f126623afc107f46c4390ef848488275422e58a8da147b9415623/share/doc/html/src/Cardano.Api.Consensus.Internal.Protocol.html#SomeBlockType"><span class="hs-identifier hs-var">Api.SomeBlockType</span></a></span><span> </span><span class="annot"><span class="annottext">BlockType blk
</span><a href="#local-6989586621681945688"><span class="hs-identifier hs-var">blockType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-839"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BlockType blk -&gt; SomeBlockType
forall blk. BlockType blk -&gt; SomeBlockType
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-api-10.18.0.0-cf96680f7a5f126623afc107f46c4390ef848488275422e58a8da147b9415623/share/doc/html/src/Cardano.Api.Consensus.Internal.Protocol.html#SomeBlockType"><span class="hs-identifier hs-var">Api.SomeBlockType</span></a></span><span> </span><span class="annot"><span class="annottext">BlockType blk
</span><a href="#local-6989586621681945704"><span class="hs-identifier hs-var">blockType'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-840"></span><span>  </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-841"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-842"></span><span>    </span><span class="annot"><a href="#local-6989586621681945693"><span class="hs-identifier hs-type">wasFileRemovedFromScope</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Node.Protocol.html#ProtocolInstantiationError"><span class="hs-identifier hs-type">ProtocolInstantiationError</span></a></span><span>
</span><span id="line-843"></span><span>                            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-api-10.18.0.0-cf96680f7a5f126623afc107f46c4390ef848488275422e58a8da147b9415623/share/doc/html/src/Cardano.Api.Error.html#FileError"><span class="hs-identifier hs-type">Api.FileError</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-api-10.18.0.0-cf96680f7a5f126623afc107f46c4390ef848488275422e58a8da147b9415623/share/doc/html/src/Cardano.Api.Serialise.TextEnvelope.Internal.html#TextEnvelopeError"><span class="hs-identifier hs-type">Api.TextEnvelopeError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-844"></span><span>    </span><span id="local-6989586621681945693"><span class="annot"><span class="annottext">wasFileRemovedFromScope :: ProtocolInstantiationError -&gt; Maybe (FileError TextEnvelopeError)
</span><a href="#local-6989586621681945693"><span class="hs-identifier hs-var hs-var">wasFileRemovedFromScope</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Protocol.html#ShelleyProtocolInstantiationError"><span class="hs-identifier hs-type">ShelleyProtocolInstantiationError</span></a></span><span>
</span><span id="line-845"></span><span>                              </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Protocol.Shelley.html#PraosLeaderCredentialsError"><span class="hs-identifier hs-type">PraosLeaderCredentialsError</span></a></span><span>
</span><span id="line-846"></span><span>                                </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Protocol.Shelley.html#FileError"><span class="hs-identifier hs-type">FileError</span></a></span><span> </span><span id="local-6989586621681945719"><span class="annot"><span class="annottext">FileError TextEnvelopeError
</span><a href="#local-6989586621681945719"><span class="hs-identifier hs-var">fe</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FileError TextEnvelopeError -&gt; Maybe (FileError TextEnvelopeError)
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">FileError TextEnvelopeError
</span><a href="#local-6989586621681945719"><span class="hs-identifier hs-var">fe</span></a></span><span>
</span><span id="line-847"></span><span>    </span><span class="annot"><a href="#local-6989586621681945693"><span class="hs-identifier hs-var">wasFileRemovedFromScope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Protocol.html#CardanoProtocolInstantiationError"><span class="hs-identifier hs-type">CardanoProtocolInstantiationError</span></a></span><span>
</span><span id="line-848"></span><span>                              </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Protocol.Cardano.html#CardanoProtocolInstantiationPraosLeaderCredentialsError"><span class="hs-identifier hs-type">CardanoProtocolInstantiationPraosLeaderCredentialsError</span></a></span><span>
</span><span id="line-849"></span><span>                                </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Protocol.Shelley.html#FileError"><span class="hs-identifier hs-type">FileError</span></a></span><span> </span><span id="local-6989586621681945722"><span class="annot"><span class="annottext">FileError TextEnvelopeError
</span><a href="#local-6989586621681945722"><span class="hs-identifier hs-var">fe</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FileError TextEnvelopeError -&gt; Maybe (FileError TextEnvelopeError)
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">FileError TextEnvelopeError
</span><a href="#local-6989586621681945722"><span class="hs-identifier hs-var">fe</span></a></span><span>
</span><span id="line-850"></span><span>    </span><span class="annot"><a href="#local-6989586621681945693"><span class="hs-identifier hs-var">wasFileRemovedFromScope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Protocol.html#CardanoProtocolInstantiationError"><span class="hs-identifier hs-type">CardanoProtocolInstantiationError</span></a></span><span>
</span><span id="line-851"></span><span>                              </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Protocol.Cardano.html#CardanoProtocolInstantiationPraosLeaderCredentialsError"><span class="hs-identifier hs-type">CardanoProtocolInstantiationPraosLeaderCredentialsError</span></a></span><span>
</span><span id="line-852"></span><span>                                </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Protocol.Shelley.html#CredentialsReadError"><span class="hs-identifier hs-type">CredentialsReadError</span></a></span><span> </span><span id="local-6989586621681945724"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681945724"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="annot"><span class="annottext">IOException
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-853"></span><span>                                  </span><span class="annot"><span class="annottext">FileError TextEnvelopeError -&gt; Maybe (FileError TextEnvelopeError)
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FileError TextEnvelopeError
forall e. String -&gt; FileError e
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-api-10.18.0.0-cf96680f7a5f126623afc107f46c4390ef848488275422e58a8da147b9415623/share/doc/html/src/Cardano.Api.Error.html#FileDoesNotExistError"><span class="hs-identifier hs-var">Api.FileDoesNotExistError</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681945724"><span class="hs-identifier hs-var">fp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-854"></span><span>    </span><span class="annot"><a href="#local-6989586621681945693"><span class="hs-identifier hs-var">wasFileRemovedFromScope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Protocol.html#ByronProtocolInstantiationError"><span class="hs-identifier hs-type">ByronProtocolInstantiationError</span></a></span><span> </span><span class="annot"><span class="annottext">ByronProtocolInstantiationError
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (FileError TextEnvelopeError)
forall a. Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-855"></span><span>    </span><span class="annot"><a href="#local-6989586621681945693"><span class="hs-identifier hs-var">wasFileRemovedFromScope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Protocol.html#ShelleyProtocolInstantiationError"><span class="hs-identifier hs-type">ShelleyProtocolInstantiationError</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyProtocolInstantiationError
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (FileError TextEnvelopeError)
forall a. Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-856"></span><span>    </span><span class="annot"><a href="#local-6989586621681945693"><span class="hs-identifier hs-var">wasFileRemovedFromScope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Protocol.html#CardanoProtocolInstantiationError"><span class="hs-identifier hs-type">CardanoProtocolInstantiationError</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoProtocolInstantiationError
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (FileError TextEnvelopeError)
forall a. Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-857"></span><span>
</span><span id="line-858"></span><span>
</span><span id="line-859"></span><span id="local-6989586621681944490"><span class="annot"><a href="Cardano.Node.Run.html#updateTopologyConfiguration"><span class="hs-identifier hs-type">updateTopologyConfiguration</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#Tracer"><span class="hs-identifier hs-type">Tracer</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Startup.html#StartupTrace"><span class="hs-identifier hs-type">StartupTrace</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944490"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-860"></span><span>                            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.POM.html#NodeConfiguration"><span class="hs-identifier hs-type">NodeConfiguration</span></a></span><span>
</span><span id="line-861"></span><span>                            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.State.LocalRootPeers.html#HotValency"><span class="hs-identifier hs-type">HotValency</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.State.LocalRootPeers.html#WarmValency"><span class="hs-identifier hs-type">WarmValency</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.RelayAccessPoint.html#RelayAccessPoint"><span class="hs-identifier hs-type">RelayAccessPoint</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.State.LocalRootPeers.html#LocalRootConfig"><span class="hs-identifier hs-type">LocalRootConfig</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Cardano.Network.PeerSelection.PeerTrustable.html#PeerTrustable"><span class="hs-identifier hs-type">PeerTrustable</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-862"></span><span>                            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.RelayAccessPoint.html#RelayAccessPoint"><span class="hs-identifier hs-type">RelayAccessPoint</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.PeerAdvertise.html#PeerAdvertise"><span class="hs-identifier hs-type">PeerAdvertise</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-863"></span><span>                            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.LedgerPeers.Type.html#UseLedgerPeers"><span class="hs-identifier hs-type">UseLedgerPeers</span></a></span><span>
</span><span id="line-864"></span><span>                            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Cardano.Network.PeerSelection.Bootstrap.html#UseBootstrapPeers"><span class="hs-identifier hs-type">UseBootstrapPeers</span></a></span><span>
</span><span id="line-865"></span><span>                            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Cardano.Node.Types.html#PeerSnapshotFile"><span class="hs-identifier hs-type">PeerSnapshotFile</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-866"></span><span>                            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-867"></span><span id="updateTopologyConfiguration"><span class="annot"><span class="annottext">updateTopologyConfiguration :: forall blk.
Tracer IO (StartupTrace blk)
-&gt; NodeConfiguration
-&gt; StrictTVar
     IO
     [(HotValency, WarmValency,
       Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
-&gt; StrictTVar IO (Map RelayAccessPoint PeerAdvertise)
-&gt; StrictTVar IO UseLedgerPeers
-&gt; StrictTVar IO UseBootstrapPeers
-&gt; StrictTVar IO (Maybe PeerSnapshotFile)
-&gt; IO ()
</span><a href="Cardano.Node.Run.html#updateTopologyConfiguration"><span class="hs-identifier hs-var hs-var">updateTopologyConfiguration</span></a></span></span><span> </span><span id="local-6989586621681945747"><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk)
</span><a href="#local-6989586621681945747"><span class="hs-identifier hs-var">startupTracer</span></a></span></span><span> </span><span id="local-6989586621681945748"><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945748"><span class="hs-identifier hs-var">nc</span></a></span></span><span> </span><span id="local-6989586621681945749"><span class="annot"><span class="annottext">StrictTVar
  IO
  [(HotValency, WarmValency,
    Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
</span><a href="#local-6989586621681945749"><span class="hs-identifier hs-var">localRootsVar</span></a></span></span><span> </span><span id="local-6989586621681945750"><span class="annot"><span class="annottext">StrictTVar IO (Map RelayAccessPoint PeerAdvertise)
</span><a href="#local-6989586621681945750"><span class="hs-identifier hs-var">publicRootsVar</span></a></span></span><span> </span><span id="local-6989586621681945751"><span class="annot"><span class="annottext">StrictTVar IO UseLedgerPeers
</span><a href="#local-6989586621681945751"><span class="hs-identifier hs-var">useLedgerVar</span></a></span></span><span>
</span><span id="line-868"></span><span>                            </span><span id="local-6989586621681945752"><span class="annot"><span class="annottext">StrictTVar IO UseBootstrapPeers
</span><a href="#local-6989586621681945752"><span class="hs-identifier hs-var">useBootsrapPeersVar</span></a></span></span><span> </span><span id="local-6989586621681945753"><span class="annot"><span class="annottext">StrictTVar IO (Maybe PeerSnapshotFile)
</span><a href="#local-6989586621681945753"><span class="hs-identifier hs-var">ledgerPeerSnapshotPathVar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-869"></span><span>    </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk) -&gt; StartupTrace blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk)
</span><a href="#local-6989586621681945747"><span class="hs-identifier hs-var">startupTracer</span></a></span><span> </span><span class="annot"><span class="annottext">StartupTrace blk
forall blk. StartupTrace blk
</span><a href="Cardano.Node.Startup.html#NetworkConfigUpdate"><span class="hs-identifier hs-var">NetworkConfigUpdate</span></a></span><span>
</span><span id="line-870"></span><span>    </span><span id="local-6989586621681945755"><span class="annot"><span class="annottext">Either FatalError (NetworkTopology RelayAccessPoint)
</span><a href="#local-6989586621681945755"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (NetworkTopology RelayAccessPoint)
-&gt; IO (Either FatalError (NetworkTopology RelayAccessPoint))
forall e a. Exception e =&gt; IO a -&gt; IO (Either e a)
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Exception.Base.html#try"><span class="hs-identifier hs-var">try</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (NetworkTopology RelayAccessPoint)
 -&gt; IO (Either FatalError (NetworkTopology RelayAccessPoint)))
-&gt; IO (NetworkTopology RelayAccessPoint)
-&gt; IO (Either FatalError (NetworkTopology RelayAccessPoint))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
-&gt; Tracer IO (StartupTrace blk)
-&gt; IO (NetworkTopology RelayAccessPoint)
forall blk adr.
FromJSON adr =&gt;
NodeConfiguration
-&gt; Tracer IO (StartupTrace blk) -&gt; IO (NetworkTopology adr)
</span><a href="Cardano.Node.Configuration.TopologyP2P.html#readTopologyFileOrError"><span class="hs-identifier hs-var">TopologyP2P.readTopologyFileOrError</span></a></span><span> </span><span class="annot"><span class="annottext">NodeConfiguration
</span><a href="#local-6989586621681945748"><span class="hs-identifier hs-var">nc</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk)
</span><a href="#local-6989586621681945747"><span class="hs-identifier hs-var">startupTracer</span></a></span><span>
</span><span id="line-871"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either FatalError (NetworkTopology RelayAccessPoint)
</span><a href="#local-6989586621681945755"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-872"></span><span>      </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/s7ry4nagcnlx8zrav5v8zl4d0vdiymxn-cardano-prelude-lib-cardano-prelude-0.2.1.0-haddock-doc/share/doc/cardano-prelude/html/src/Cardano.Prelude.Panic.html#FatalError"><span class="hs-identifier hs-type">FatalError</span></a></span><span> </span><span id="local-6989586621681945757"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681945757"><span class="hs-identifier hs-var">err</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-873"></span><span>        </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk) -&gt; StartupTrace blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk)
</span><a href="#local-6989586621681945747"><span class="hs-identifier hs-var">startupTracer</span></a></span><span>
</span><span id="line-874"></span><span>                </span><span class="annot"><span class="annottext">(StartupTrace blk -&gt; IO ()) -&gt; StartupTrace blk -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; StartupTrace blk
forall blk. Text -&gt; StartupTrace blk
</span><a href="Cardano.Node.Startup.html#NetworkConfigUpdateError"><span class="hs-identifier hs-var">NetworkConfigUpdateError</span></a></span><span>
</span><span id="line-875"></span><span>                </span><span class="annot"><span class="annottext">(Text -&gt; StartupTrace blk) -&gt; Text -&gt; StartupTrace blk
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Internal.html#pack"><span class="hs-identifier hs-var">pack</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Error reading topology configuration file:&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681945757"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-876"></span><span>      </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621681945759"><span class="annot"><span class="annottext">nt :: NetworkTopology RelayAccessPoint
</span><a href="#local-6989586621681945759"><span class="hs-identifier hs-var">nt</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Cardano.Node.Configuration.TopologyP2P.html#RealNodeTopology"><span class="hs-identifier hs-type">RealNodeTopology</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681945760"><span class="annot"><span class="annottext">UseLedgerPeers
ntUseLedgerPeers :: forall adr. NetworkTopology adr -&gt; UseLedgerPeers
ntUseLedgerPeers :: UseLedgerPeers
</span><a href="Cardano.Node.Configuration.TopologyP2P.html#ntUseLedgerPeers"><span class="hs-identifier hs-var hs-var">ntUseLedgerPeers</span></a></span></span><span>
</span><span id="line-877"></span><span>                                </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681945761"><span class="annot"><span class="annottext">UseBootstrapPeers
ntUseBootstrapPeers :: forall adr. NetworkTopology adr -&gt; UseBootstrapPeers
ntUseBootstrapPeers :: UseBootstrapPeers
</span><a href="Cardano.Node.Configuration.TopologyP2P.html#ntUseBootstrapPeers"><span class="hs-identifier hs-var hs-var">ntUseBootstrapPeers</span></a></span></span><span>
</span><span id="line-878"></span><span>                                </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681945762"><span class="annot"><span class="annottext">Maybe PeerSnapshotFile
ntPeerSnapshotPath :: forall adr. NetworkTopology adr -&gt; Maybe PeerSnapshotFile
ntPeerSnapshotPath :: Maybe PeerSnapshotFile
</span><a href="Cardano.Node.Configuration.TopologyP2P.html#ntPeerSnapshotPath"><span class="hs-identifier hs-var hs-var">ntPeerSnapshotPath</span></a></span></span><span>
</span><span id="line-879"></span><span>                                </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-880"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681945763"><span class="annot"><span class="annottext">[(HotValency, WarmValency,
  Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
</span><a href="#local-6989586621681945763"><span class="hs-identifier hs-var">localRoots</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681945764"><span class="annot"><span class="annottext">Map RelayAccessPoint PeerAdvertise
</span><a href="#local-6989586621681945764"><span class="hs-identifier hs-var">publicRoots</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NetworkTopology RelayAccessPoint
-&gt; ([(HotValency, WarmValency,
      Map RelayAccessPoint (LocalRootConfig PeerTrustable))],
    Map RelayAccessPoint PeerAdvertise)
</span><a href="Cardano.Node.Run.html#producerAddresses"><span class="hs-identifier hs-var">producerAddresses</span></a></span><span> </span><span class="annot"><span class="annottext">NetworkTopology RelayAccessPoint
</span><a href="#local-6989586621681945759"><span class="hs-identifier hs-var">nt</span></a></span><span>
</span><span id="line-881"></span><span>        </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk) -&gt; StartupTrace blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk)
</span><a href="#local-6989586621681945747"><span class="hs-identifier hs-var">startupTracer</span></a></span><span>
</span><span id="line-882"></span><span>                </span><span class="annot"><span class="annottext">(StartupTrace blk -&gt; IO ()) -&gt; StartupTrace blk -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[(HotValency, WarmValency,
  Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
-&gt; Map RelayAccessPoint PeerAdvertise
-&gt; UseLedgerPeers
-&gt; Maybe PeerSnapshotFile
-&gt; StartupTrace blk
forall blk.
[(HotValency, WarmValency,
  Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
-&gt; Map RelayAccessPoint PeerAdvertise
-&gt; UseLedgerPeers
-&gt; Maybe PeerSnapshotFile
-&gt; StartupTrace blk
</span><a href="Cardano.Node.Startup.html#NetworkConfig"><span class="hs-identifier hs-var">NetworkConfig</span></a></span><span> </span><span class="annot"><span class="annottext">[(HotValency, WarmValency,
  Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
</span><a href="#local-6989586621681945763"><span class="hs-identifier hs-var">localRoots</span></a></span><span> </span><span class="annot"><span class="annottext">Map RelayAccessPoint PeerAdvertise
</span><a href="#local-6989586621681945764"><span class="hs-identifier hs-var">publicRoots</span></a></span><span> </span><span class="annot"><span class="annottext">UseLedgerPeers
</span><a href="#local-6989586621681945760"><span class="hs-identifier hs-var">ntUseLedgerPeers</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe PeerSnapshotFile
</span><a href="#local-6989586621681945762"><span class="hs-identifier hs-var">ntPeerSnapshotPath</span></a></span><span>
</span><span id="line-883"></span><span>        </span><span class="annot"><span class="annottext">STM IO () -&gt; IO ()
forall a. HasCallStack =&gt; STM IO a -&gt; IO a
forall (m :: * -&gt; *) a.
(MonadSTM m, HasCallStack) =&gt;
STM m a -&gt; m a
</span><a href="file:///nix/store/39y1cwp74gv435x8ywpmq90n9jlfm1ml-io-classes-lib-io-classes-1.5.0.0-haddock-doc/share/doc/io-classes/html/src/Control.Monad.Class.MonadSTM.Internal.html#atomically"><span class="hs-identifier hs-var">atomically</span></a></span><span> </span><span class="annot"><span class="annottext">(STM IO () -&gt; IO ()) -&gt; STM IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-884"></span><span>          </span><span class="annot"><span class="annottext">StrictTVar
  IO
  [(HotValency, WarmValency,
    Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
-&gt; [(HotValency, WarmValency,
     Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
-&gt; STM IO ()
forall (m :: * -&gt; *) a.
MonadSTM m =&gt;
StrictTVar m a -&gt; a -&gt; STM m ()
</span><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#writeTVar"><span class="hs-identifier hs-var">writeTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar
  IO
  [(HotValency, WarmValency,
    Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
</span><a href="#local-6989586621681945749"><span class="hs-identifier hs-var">localRootsVar</span></a></span><span> </span><span class="annot"><span class="annottext">[(HotValency, WarmValency,
  Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
</span><a href="#local-6989586621681945763"><span class="hs-identifier hs-var">localRoots</span></a></span><span>
</span><span id="line-885"></span><span>          </span><span class="annot"><span class="annottext">StrictTVar IO (Map RelayAccessPoint PeerAdvertise)
-&gt; Map RelayAccessPoint PeerAdvertise -&gt; STM IO ()
forall (m :: * -&gt; *) a.
MonadSTM m =&gt;
StrictTVar m a -&gt; a -&gt; STM m ()
</span><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#writeTVar"><span class="hs-identifier hs-var">writeTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar IO (Map RelayAccessPoint PeerAdvertise)
</span><a href="#local-6989586621681945750"><span class="hs-identifier hs-var">publicRootsVar</span></a></span><span> </span><span class="annot"><span class="annottext">Map RelayAccessPoint PeerAdvertise
</span><a href="#local-6989586621681945764"><span class="hs-identifier hs-var">publicRoots</span></a></span><span>
</span><span id="line-886"></span><span>          </span><span class="annot"><span class="annottext">StrictTVar IO UseLedgerPeers -&gt; UseLedgerPeers -&gt; STM IO ()
forall (m :: * -&gt; *) a.
MonadSTM m =&gt;
StrictTVar m a -&gt; a -&gt; STM m ()
</span><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#writeTVar"><span class="hs-identifier hs-var">writeTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar IO UseLedgerPeers
</span><a href="#local-6989586621681945751"><span class="hs-identifier hs-var">useLedgerVar</span></a></span><span> </span><span class="annot"><span class="annottext">UseLedgerPeers
</span><a href="#local-6989586621681945760"><span class="hs-identifier hs-var">ntUseLedgerPeers</span></a></span><span>
</span><span id="line-887"></span><span>          </span><span class="annot"><span class="annottext">StrictTVar IO UseBootstrapPeers -&gt; UseBootstrapPeers -&gt; STM IO ()
forall (m :: * -&gt; *) a.
MonadSTM m =&gt;
StrictTVar m a -&gt; a -&gt; STM m ()
</span><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#writeTVar"><span class="hs-identifier hs-var">writeTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar IO UseBootstrapPeers
</span><a href="#local-6989586621681945752"><span class="hs-identifier hs-var">useBootsrapPeersVar</span></a></span><span> </span><span class="annot"><span class="annottext">UseBootstrapPeers
</span><a href="#local-6989586621681945761"><span class="hs-identifier hs-var">ntUseBootstrapPeers</span></a></span><span>
</span><span id="line-888"></span><span>          </span><span class="annot"><span class="annottext">StrictTVar IO (Maybe PeerSnapshotFile)
-&gt; Maybe PeerSnapshotFile -&gt; STM IO ()
forall (m :: * -&gt; *) a.
MonadSTM m =&gt;
StrictTVar m a -&gt; a -&gt; STM m ()
</span><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#writeTVar"><span class="hs-identifier hs-var">writeTVar</span></a></span><span> </span><span class="annot"><span class="annottext">StrictTVar IO (Maybe PeerSnapshotFile)
</span><a href="#local-6989586621681945753"><span class="hs-identifier hs-var">ledgerPeerSnapshotPathVar</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe PeerSnapshotFile
</span><a href="#local-6989586621681945762"><span class="hs-identifier hs-var">ntPeerSnapshotPath</span></a></span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-891"></span><span id="local-6989586621681944437"><span class="annot"><a href="Cardano.Node.Run.html#updateLedgerPeerSnapshot"><span class="hs-identifier hs-type">updateLedgerPeerSnapshot</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#Tracer"><span class="hs-identifier hs-type">Tracer</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Startup.html#StartupTrace"><span class="hs-identifier hs-type">StartupTrace</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944437"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-892"></span><span>                         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.POM.html#NodeConfiguration"><span class="hs-identifier hs-type">NodeConfiguration</span></a></span><span>
</span><span id="line-893"></span><span>                         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/39y1cwp74gv435x8ywpmq90n9jlfm1ml-io-classes-lib-io-classes-1.5.0.0-haddock-doc/share/doc/io-classes/html/src/Control.Monad.Class.MonadSTM.Internal.html#STM"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="Cardano.Node.Types.html#PeerSnapshotFile"><span class="hs-identifier hs-type">PeerSnapshotFile</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-894"></span><span>                         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/39y1cwp74gv435x8ywpmq90n9jlfm1ml-io-classes-lib-io-classes-1.5.0.0-haddock-doc/share/doc/io-classes/html/src/Control.Monad.Class.MonadSTM.Internal.html#STM"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.LedgerPeers.Type.html#UseLedgerPeers"><span class="hs-identifier hs-type">UseLedgerPeers</span></a></span><span>
</span><span id="line-895"></span><span>                         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.LedgerPeers.Type.html#LedgerPeerSnapshot"><span class="hs-identifier hs-type">LedgerPeerSnapshot</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/39y1cwp74gv435x8ywpmq90n9jlfm1ml-io-classes-lib-io-classes-1.5.0.0-haddock-doc/share/doc/io-classes/html/src/Control.Monad.Class.MonadSTM.Internal.html#STM"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-896"></span><span>                         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.LedgerPeers.Type.html#LedgerPeerSnapshot"><span class="hs-identifier hs-type">LedgerPeerSnapshot</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-897"></span><span id="updateLedgerPeerSnapshot"><span class="annot"><span class="annottext">updateLedgerPeerSnapshot :: forall blk.
Tracer IO (StartupTrace blk)
-&gt; NodeConfiguration
-&gt; STM IO (Maybe PeerSnapshotFile)
-&gt; STM IO UseLedgerPeers
-&gt; (Maybe LedgerPeerSnapshot -&gt; STM IO ())
-&gt; IO (Maybe LedgerPeerSnapshot)
</span><a href="Cardano.Node.Run.html#updateLedgerPeerSnapshot"><span class="hs-identifier hs-var hs-var">updateLedgerPeerSnapshot</span></a></span></span><span> </span><span id="local-6989586621681945805"><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk)
</span><a href="#local-6989586621681945805"><span class="hs-identifier hs-var">startupTracer</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Configuration.POM.html#NodeConfiguration"><span class="hs-identifier hs-type">NodeConfiguration</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621681945807"><span class="annot"><span class="annottext">ConsensusMode
ncConsensusMode :: ConsensusMode
ncConsensusMode :: NodeConfiguration -&gt; ConsensusMode
</span><a href="#local-6989586621681945807"><span class="hs-identifier hs-var hs-var">ncConsensusMode</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681945809"><span class="annot"><span class="annottext">STM IO (Maybe PeerSnapshotFile)
</span><a href="#local-6989586621681945809"><span class="hs-identifier hs-var">readLedgerPeerPath</span></a></span></span><span> </span><span id="local-6989586621681945810"><span class="annot"><span class="annottext">STM IO UseLedgerPeers
</span><a href="#local-6989586621681945810"><span class="hs-identifier hs-var">readUseLedgerVar</span></a></span></span><span> </span><span id="local-6989586621681945811"><span class="annot"><span class="annottext">Maybe LedgerPeerSnapshot -&gt; STM IO ()
</span><a href="#local-6989586621681945811"><span class="hs-identifier hs-var">writeVar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-898"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621681945812"><span class="annot"><span class="annottext">Maybe PeerSnapshotFile
</span><a href="#local-6989586621681945812"><span class="hs-identifier hs-var">mPeerSnapshotFile</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681945813"><span class="annot"><span class="annottext">UseLedgerPeers
</span><a href="#local-6989586621681945813"><span class="hs-identifier hs-var">useLedgerPeers</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-899"></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">STM IO (Maybe PeerSnapshotFile, UseLedgerPeers)
-&gt; IO (Maybe PeerSnapshotFile, UseLedgerPeers)
forall a. HasCallStack =&gt; STM IO a -&gt; IO a
forall (m :: * -&gt; *) a.
(MonadSTM m, HasCallStack) =&gt;
STM m a -&gt; m a
</span><a href="file:///nix/store/39y1cwp74gv435x8ywpmq90n9jlfm1ml-io-classes-lib-io-classes-1.5.0.0-haddock-doc/share/doc/io-classes/html/src/Control.Monad.Class.MonadSTM.Internal.html#atomically"><span class="hs-identifier hs-var">atomically</span></a></span><span> </span><span class="annot"><span class="annottext">(STM IO (Maybe PeerSnapshotFile, UseLedgerPeers)
 -&gt; IO (Maybe PeerSnapshotFile, UseLedgerPeers))
-&gt; STM IO (Maybe PeerSnapshotFile, UseLedgerPeers)
-&gt; IO (Maybe PeerSnapshotFile, UseLedgerPeers)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe PeerSnapshotFile
 -&gt; UseLedgerPeers -&gt; (Maybe PeerSnapshotFile, UseLedgerPeers))
-&gt; STM (Maybe PeerSnapshotFile)
-&gt; STM (UseLedgerPeers -&gt; (Maybe PeerSnapshotFile, UseLedgerPeers))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">STM (Maybe PeerSnapshotFile)
STM IO (Maybe PeerSnapshotFile)
</span><a href="#local-6989586621681945809"><span class="hs-identifier hs-var">readLedgerPeerPath</span></a></span><span> </span><span class="annot"><span class="annottext">STM (UseLedgerPeers -&gt; (Maybe PeerSnapshotFile, UseLedgerPeers))
-&gt; STM UseLedgerPeers
-&gt; STM (Maybe PeerSnapshotFile, UseLedgerPeers)
forall a b. STM (a -&gt; b) -&gt; STM a -&gt; STM b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">STM UseLedgerPeers
STM IO UseLedgerPeers
</span><a href="#local-6989586621681945810"><span class="hs-identifier hs-var">readUseLedgerVar</span></a></span><span>
</span><span id="line-900"></span><span>
</span><span id="line-901"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681945814"><span class="annot"><span class="annottext">trace :: StartupTrace blk -&gt; IO ()
</span><a href="#local-6989586621681945814"><span class="hs-identifier hs-var hs-var">trace</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk) -&gt; StartupTrace blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO (StartupTrace blk)
</span><a href="#local-6989586621681945805"><span class="hs-identifier hs-var">startupTracer</span></a></span><span>
</span><span id="line-902"></span><span>      </span><span id="local-6989586621681945815"><span class="annot"><span class="annottext">traceL :: StartupTrace blk -&gt; MaybeT IO ()
</span><a href="#local-6989586621681945815"><span class="hs-identifier hs-var hs-var">traceL</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; MaybeT IO ()
forall a. IO a -&gt; MaybeT IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; MaybeT IO ())
-&gt; (StartupTrace blk -&gt; IO ()) -&gt; StartupTrace blk -&gt; MaybeT IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">StartupTrace blk -&gt; IO ()
</span><a href="#local-6989586621681945814"><span class="hs-identifier hs-var">trace</span></a></span><span>
</span><span id="line-903"></span><span>
</span><span id="line-904"></span><span>  </span><span id="local-6989586621681945817"><span class="annot"><span class="annottext">Maybe LedgerPeerSnapshot
</span><a href="#local-6989586621681945817"><span class="hs-identifier hs-var">mLedgerPeerSnapshot</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MaybeT IO LedgerPeerSnapshot -&gt; IO (Maybe LedgerPeerSnapshot)
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Maybe.html#runMaybeT"><span class="hs-identifier hs-var">runMaybeT</span></a></span><span> </span><span class="annot"><span class="annottext">(MaybeT IO LedgerPeerSnapshot -&gt; IO (Maybe LedgerPeerSnapshot))
-&gt; MaybeT IO LedgerPeerSnapshot -&gt; IO (Maybe LedgerPeerSnapshot)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-905"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">UseLedgerPeers
</span><a href="#local-6989586621681945813"><span class="hs-identifier hs-var">useLedgerPeers</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-906"></span><span>      </span><span class="annot"><span class="annottext">UseLedgerPeers
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.LedgerPeers.Type.html#DontUseLedgerPeers"><span class="hs-identifier hs-var">DontUseLedgerPeers</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MaybeT IO LedgerPeerSnapshot
forall a. MaybeT IO a
forall (f :: * -&gt; *) a. Alternative f =&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-907"></span><span>      </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.LedgerPeers.Type.html#UseLedgerPeers"><span class="hs-identifier hs-type">UseLedgerPeers</span></a></span><span> </span><span id="local-6989586621681945820"><span class="annot"><span class="annottext">AfterSlot
</span><a href="#local-6989586621681945820"><span class="hs-identifier hs-var">afterSlot</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-908"></span><span>        </span><span id="local-6989586621681945821"><span class="annot"><span class="annottext">Either Text LedgerPeerSnapshot
</span><a href="#local-6989586621681945821"><span class="hs-identifier hs-var">eSnapshot</span></a></span></span><span>
</span><span id="line-909"></span><span>          </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (Either Text LedgerPeerSnapshot)
-&gt; MaybeT IO (Either Text LedgerPeerSnapshot)
forall a. IO a -&gt; MaybeT IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Either Text LedgerPeerSnapshot)
 -&gt; MaybeT IO (Either Text LedgerPeerSnapshot))
-&gt; (PeerSnapshotFile -&gt; IO (Either Text LedgerPeerSnapshot))
-&gt; PeerSnapshotFile
-&gt; MaybeT IO (Either Text LedgerPeerSnapshot)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">PeerSnapshotFile -&gt; IO (Either Text LedgerPeerSnapshot)
</span><a href="Cardano.Node.Configuration.TopologyP2P.html#readPeerSnapshotFile"><span class="hs-identifier hs-var">readPeerSnapshotFile</span></a></span><span> </span><span class="annot"><span class="annottext">(PeerSnapshotFile -&gt; MaybeT IO (Either Text LedgerPeerSnapshot))
-&gt; MaybeT IO PeerSnapshotFile
-&gt; MaybeT IO (Either Text LedgerPeerSnapshot)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3D%3C%3C"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe PeerSnapshotFile -&gt; MaybeT IO PeerSnapshotFile
forall (m :: * -&gt; *) b. Applicative m =&gt; Maybe b -&gt; MaybeT m b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Maybe.html#hoistMaybe"><span class="hs-identifier hs-var">hoistMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe PeerSnapshotFile
</span><a href="#local-6989586621681945812"><span class="hs-identifier hs-var">mPeerSnapshotFile</span></a></span><span>
</span><span id="line-910"></span><span>        </span><span id="local-6989586621681945823"><span class="annot"><span class="annottext">lps :: LedgerPeerSnapshot
</span><a href="#local-6989586621681945823"><span class="hs-identifier hs-var">lps</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.LedgerPeers.Type.html#LedgerPeerSnapshot"><span class="hs-identifier hs-type">LedgerPeerSnapshot</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681945825"><span class="annot"><span class="annottext">WithOrigin SlotNo
</span><a href="#local-6989586621681945825"><span class="hs-identifier hs-var">wOrigin</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(AccPoolStake, (PoolStake, NonEmpty RelayAccessPoint))]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-911"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ConsensusMode
</span><a href="#local-6989586621681945807"><span class="hs-identifier hs-var">ncConsensusMode</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-912"></span><span>            </span><span class="annot"><span class="annottext">ConsensusMode
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Cardano.Network.ConsensusMode.html#GenesisMode"><span class="hs-identifier hs-var">GenesisMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-913"></span><span>              </span><span class="annot"><span class="annottext">IO (Maybe LedgerPeerSnapshot) -&gt; MaybeT IO LedgerPeerSnapshot
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Maybe.html#MaybeT"><span class="hs-identifier hs-var">MaybeT</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Maybe LedgerPeerSnapshot) -&gt; MaybeT IO LedgerPeerSnapshot)
-&gt; IO (Maybe LedgerPeerSnapshot) -&gt; MaybeT IO LedgerPeerSnapshot
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Either Text LedgerPeerSnapshot
-&gt; (Text -&gt; IO ()) -&gt; IO (Maybe LedgerPeerSnapshot)
forall (m :: * -&gt; *) e a.
Monad m =&gt;
Either e a -&gt; (e -&gt; m ()) -&gt; m (Maybe a)
</span><a href="file:///nix/store/1b4my2m47g921s9na6vjrjsbp0aa7pkc-transformers-except-lib-transformers-except-0.1.4-haddock-doc/share/doc/transformers-except/html/src/Control.Monad.Trans.Except.Extra.html#hushM"><span class="hs-identifier hs-var">hushM</span></a></span><span> </span><span class="annot"><span class="annottext">Either Text LedgerPeerSnapshot
</span><a href="#local-6989586621681945821"><span class="hs-identifier hs-var">eSnapshot</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StartupTrace blk -&gt; IO ()
</span><a href="#local-6989586621681945814"><span class="hs-identifier hs-var">trace</span></a></span><span> </span><span class="annot"><span class="annottext">(StartupTrace blk -&gt; IO ())
-&gt; (Text -&gt; StartupTrace blk) -&gt; Text -&gt; IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; StartupTrace blk
forall blk. Text -&gt; StartupTrace blk
</span><a href="Cardano.Node.Startup.html#NetworkConfigUpdateError"><span class="hs-identifier hs-var">NetworkConfigUpdateError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-914"></span><span>            </span><span class="annot"><span class="annottext">ConsensusMode
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Cardano.Network.ConsensusMode.html#PraosMode"><span class="hs-identifier hs-var">PraosMode</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-915"></span><span>              </span><span class="annot"><span class="annottext">IO (Maybe LedgerPeerSnapshot) -&gt; MaybeT IO LedgerPeerSnapshot
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Maybe.html#MaybeT"><span class="hs-identifier hs-var">MaybeT</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Maybe LedgerPeerSnapshot) -&gt; MaybeT IO LedgerPeerSnapshot)
-&gt; IO (Maybe LedgerPeerSnapshot) -&gt; MaybeT IO LedgerPeerSnapshot
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Either Text LedgerPeerSnapshot
-&gt; (Text -&gt; IO ()) -&gt; IO (Maybe LedgerPeerSnapshot)
forall (m :: * -&gt; *) e a.
Monad m =&gt;
Either e a -&gt; (e -&gt; m ()) -&gt; m (Maybe a)
</span><a href="file:///nix/store/1b4my2m47g921s9na6vjrjsbp0aa7pkc-transformers-except-lib-transformers-except-0.1.4-haddock-doc/share/doc/transformers-except/html/src/Control.Monad.Trans.Except.Extra.html#hushM"><span class="hs-identifier hs-var">hushM</span></a></span><span> </span><span class="annot"><span class="annottext">Either Text LedgerPeerSnapshot
</span><a href="#local-6989586621681945821"><span class="hs-identifier hs-var">eSnapshot</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StartupTrace blk -&gt; IO ()
</span><a href="#local-6989586621681945814"><span class="hs-identifier hs-var">trace</span></a></span><span> </span><span class="annot"><span class="annottext">(StartupTrace blk -&gt; IO ())
-&gt; (Text -&gt; StartupTrace blk) -&gt; Text -&gt; IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; StartupTrace blk
forall blk. Text -&gt; StartupTrace blk
</span><a href="Cardano.Node.Startup.html#NetworkConfigUpdateWarning"><span class="hs-identifier hs-var">NetworkConfigUpdateWarning</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-916"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">AfterSlot
</span><a href="#local-6989586621681945820"><span class="hs-identifier hs-var">afterSlot</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-917"></span><span>          </span><span class="annot"><span class="annottext">AfterSlot
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.LedgerPeers.Type.html#Always"><span class="hs-identifier hs-var">Always</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-918"></span><span>            </span><span class="annot"><span class="annottext">StartupTrace blk -&gt; MaybeT IO ()
</span><a href="#local-6989586621681945815"><span class="hs-identifier hs-var">traceL</span></a></span><span> </span><span class="annot"><span class="annottext">(StartupTrace blk -&gt; MaybeT IO ())
-&gt; StartupTrace blk -&gt; MaybeT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Either (UseLedgerPeers, WithOrigin SlotNo) (WithOrigin SlotNo)
-&gt; StartupTrace blk
forall blk.
Either (UseLedgerPeers, WithOrigin SlotNo) (WithOrigin SlotNo)
-&gt; StartupTrace blk
</span><a href="Cardano.Node.Startup.html#LedgerPeerSnapshotLoaded"><span class="hs-identifier hs-var">LedgerPeerSnapshotLoaded</span></a></span><span> </span><span class="annot"><span class="annottext">(Either (UseLedgerPeers, WithOrigin SlotNo) (WithOrigin SlotNo)
 -&gt; StartupTrace blk)
-&gt; (WithOrigin SlotNo
    -&gt; Either (UseLedgerPeers, WithOrigin SlotNo) (WithOrigin SlotNo))
-&gt; WithOrigin SlotNo
-&gt; StartupTrace blk
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">WithOrigin SlotNo
-&gt; Either (UseLedgerPeers, WithOrigin SlotNo) (WithOrigin SlotNo)
forall a b. b -&gt; Either a b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">(WithOrigin SlotNo -&gt; StartupTrace blk)
-&gt; WithOrigin SlotNo -&gt; StartupTrace blk
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">WithOrigin SlotNo
</span><a href="#local-6989586621681945825"><span class="hs-identifier hs-var">wOrigin</span></a></span><span>
</span><span id="line-919"></span><span>            </span><span class="annot"><span class="annottext">LedgerPeerSnapshot -&gt; MaybeT IO LedgerPeerSnapshot
forall a. a -&gt; MaybeT IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">LedgerPeerSnapshot
</span><a href="#local-6989586621681945823"><span class="hs-identifier hs-var">lps</span></a></span><span>
</span><span id="line-920"></span><span>          </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.LedgerPeers.Type.html#After"><span class="hs-identifier hs-type">After</span></a></span><span> </span><span id="local-6989586621681945831"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621681945831"><span class="hs-identifier hs-var">ledgerSlotNo</span></a></span></span><span>
</span><span id="line-921"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621681945832"><span class="hs-identifier hs-var">fileSlot</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; SlotNo -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#%3E%3D"><span class="hs-operator hs-var">&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621681945831"><span class="hs-identifier hs-var">ledgerSlotNo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-922"></span><span>                </span><span class="annot"><span class="annottext">StartupTrace blk -&gt; MaybeT IO ()
</span><a href="#local-6989586621681945815"><span class="hs-identifier hs-var">traceL</span></a></span><span> </span><span class="annot"><span class="annottext">(StartupTrace blk -&gt; MaybeT IO ())
-&gt; StartupTrace blk -&gt; MaybeT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Either (UseLedgerPeers, WithOrigin SlotNo) (WithOrigin SlotNo)
-&gt; StartupTrace blk
forall blk.
Either (UseLedgerPeers, WithOrigin SlotNo) (WithOrigin SlotNo)
-&gt; StartupTrace blk
</span><a href="Cardano.Node.Startup.html#LedgerPeerSnapshotLoaded"><span class="hs-identifier hs-var">LedgerPeerSnapshotLoaded</span></a></span><span> </span><span class="annot"><span class="annottext">(Either (UseLedgerPeers, WithOrigin SlotNo) (WithOrigin SlotNo)
 -&gt; StartupTrace blk)
-&gt; (WithOrigin SlotNo
    -&gt; Either (UseLedgerPeers, WithOrigin SlotNo) (WithOrigin SlotNo))
-&gt; WithOrigin SlotNo
-&gt; StartupTrace blk
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">WithOrigin SlotNo
-&gt; Either (UseLedgerPeers, WithOrigin SlotNo) (WithOrigin SlotNo)
forall a b. b -&gt; Either a b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">(WithOrigin SlotNo -&gt; StartupTrace blk)
-&gt; WithOrigin SlotNo -&gt; StartupTrace blk
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">WithOrigin SlotNo
</span><a href="#local-6989586621681945825"><span class="hs-identifier hs-var">wOrigin</span></a></span><span>
</span><span id="line-923"></span><span>                </span><span class="annot"><span class="annottext">LedgerPeerSnapshot -&gt; MaybeT IO LedgerPeerSnapshot
forall a. a -&gt; MaybeT IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">LedgerPeerSnapshot
</span><a href="#local-6989586621681945823"><span class="hs-identifier hs-var">lps</span></a></span><span>
</span><span id="line-924"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-925"></span><span>                </span><span class="annot"><span class="annottext">StartupTrace blk -&gt; MaybeT IO ()
</span><a href="#local-6989586621681945815"><span class="hs-identifier hs-var">traceL</span></a></span><span> </span><span class="annot"><span class="annottext">(StartupTrace blk -&gt; MaybeT IO ())
-&gt; StartupTrace blk -&gt; MaybeT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Either (UseLedgerPeers, WithOrigin SlotNo) (WithOrigin SlotNo)
-&gt; StartupTrace blk
forall blk.
Either (UseLedgerPeers, WithOrigin SlotNo) (WithOrigin SlotNo)
-&gt; StartupTrace blk
</span><a href="Cardano.Node.Startup.html#LedgerPeerSnapshotLoaded"><span class="hs-identifier hs-var">LedgerPeerSnapshotLoaded</span></a></span><span> </span><span class="annot"><span class="annottext">(Either (UseLedgerPeers, WithOrigin SlotNo) (WithOrigin SlotNo)
 -&gt; StartupTrace blk)
-&gt; ((UseLedgerPeers, WithOrigin SlotNo)
    -&gt; Either (UseLedgerPeers, WithOrigin SlotNo) (WithOrigin SlotNo))
-&gt; (UseLedgerPeers, WithOrigin SlotNo)
-&gt; StartupTrace blk
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(UseLedgerPeers, WithOrigin SlotNo)
-&gt; Either (UseLedgerPeers, WithOrigin SlotNo) (WithOrigin SlotNo)
forall a b. a -&gt; Either a b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">((UseLedgerPeers, WithOrigin SlotNo) -&gt; StartupTrace blk)
-&gt; (UseLedgerPeers, WithOrigin SlotNo) -&gt; StartupTrace blk
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UseLedgerPeers
</span><a href="#local-6989586621681945813"><span class="hs-identifier hs-var">useLedgerPeers</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">WithOrigin SlotNo
</span><a href="#local-6989586621681945825"><span class="hs-identifier hs-var">wOrigin</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-926"></span><span>                </span><span class="annot"><span class="annottext">MaybeT IO LedgerPeerSnapshot
forall a. MaybeT IO a
forall (f :: * -&gt; *) a. Alternative f =&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-927"></span><span>            </span><span class="hs-keyword">where</span><span>
</span><span id="line-928"></span><span>              </span><span id="local-6989586621681945832"><span class="annot"><span class="annottext">fileSlot :: SlotNo
</span><a href="#local-6989586621681945832"><span class="hs-identifier hs-var hs-var">fileSlot</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">WithOrigin SlotNo
</span><a href="#local-6989586621681945825"><span class="hs-identifier hs-var">wOrigin</span></a></span><span> </span><span class="hs-keyword">of</span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">WithOrigin SlotNo
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-slotting-0.2.0.1-3f1a1be6195f7ae2c0e8ab1d39d95c9a3b1f33b5d873e142b6db55ba4dba848b/share/doc/html/src/Cardano.Slotting.Slot.html#Origin"><span class="hs-identifier hs-var">Origin</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><span class="hs-number">0</span></span><span class="hs-special">;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-slotting-0.2.0.1-3f1a1be6195f7ae2c0e8ab1d39d95c9a3b1f33b5d873e142b6db55ba4dba848b/share/doc/html/src/Cardano.Slotting.Slot.html#At"><span class="hs-identifier hs-type">At</span></a></span><span> </span><span id="local-6989586621681945835"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621681945835"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621681945835"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-929"></span><span>
</span><span id="line-930"></span><span>  </span><span class="annot"><span class="annottext">Maybe LedgerPeerSnapshot
</span><a href="#local-6989586621681945817"><span class="hs-identifier hs-var">mLedgerPeerSnapshot</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe LedgerPeerSnapshot -&gt; IO () -&gt; IO (Maybe LedgerPeerSnapshot)
forall a b. a -&gt; IO b -&gt; IO a
forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; f b -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%24"><span class="hs-operator hs-var">&lt;$</span></a></span><span> </span><span class="annot"><span class="annottext">STM IO () -&gt; IO ()
forall a. HasCallStack =&gt; STM IO a -&gt; IO a
forall (m :: * -&gt; *) a.
(MonadSTM m, HasCallStack) =&gt;
STM m a -&gt; m a
</span><a href="file:///nix/store/39y1cwp74gv435x8ywpmq90n9jlfm1ml-io-classes-lib-io-classes-1.5.0.0-haddock-doc/share/doc/io-classes/html/src/Control.Monad.Class.MonadSTM.Internal.html#atomically"><span class="hs-identifier hs-var">atomically</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe LedgerPeerSnapshot -&gt; STM IO ()
</span><a href="#local-6989586621681945811"><span class="hs-identifier hs-var">writeVar</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe LedgerPeerSnapshot
</span><a href="#local-6989586621681945817"><span class="hs-identifier hs-var">mLedgerPeerSnapshot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-931"></span><span>
</span><span id="line-932"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-933"></span><span class="hs-comment">-- Helper functions</span><span>
</span><span id="line-934"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-935"></span><span>
</span><span id="line-936"></span><span class="annot"><a href="Cardano.Node.Run.html#canonDbPath"><span class="hs-identifier hs-type">canonDbPath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.POM.html#NodeConfiguration"><span class="hs-identifier hs-type">NodeConfiguration</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#NodeDatabasePaths"><span class="hs-identifier hs-type">Node.NodeDatabasePaths</span></a></span><span>
</span><span id="line-937"></span><span id="canonDbPath"><span class="annot"><span class="annottext">canonDbPath :: NodeConfiguration -&gt; IO NodeDatabasePaths
</span><a href="Cardano.Node.Run.html#canonDbPath"><span class="hs-identifier hs-var hs-var">canonDbPath</span></a></span></span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.POM.html#NodeConfiguration"><span class="hs-identifier hs-type">NodeConfiguration</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">ncDatabaseFile :: NodeConfiguration -&gt; NodeDatabasePaths
</span><a href="Cardano.Node.Configuration.POM.html#ncDatabaseFile"><span class="hs-identifier hs-var">ncDatabaseFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681945838"><span class="annot"><span class="annottext">NodeDatabasePaths
</span><a href="#local-6989586621681945838"><span class="hs-identifier hs-var">nodeDatabaseFps</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-938"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NodeDatabasePaths
</span><a href="#local-6989586621681945838"><span class="hs-identifier hs-var">nodeDatabaseFps</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-939"></span><span>    </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#OnePathForAllDbs"><span class="hs-identifier hs-type">Node.OnePathForAllDbs</span></a></span><span> </span><span id="local-6989586621681945840"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681945840"><span class="hs-identifier hs-var">dbFp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-940"></span><span>      </span><span id="local-6989586621681945841"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681945841"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO String
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/directory-1.3.8.5/src/System.Directory.html#canonicalizePath"><span class="hs-identifier hs-var">canonicalizePath</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO String) -&gt; IO String -&gt; IO String
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3D%3C%3C"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO String
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/directory-1.3.8.5/src/System.Directory.html#makeAbsolute"><span class="hs-identifier hs-var">makeAbsolute</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681945840"><span class="hs-identifier hs-var">dbFp</span></a></span><span>
</span><span id="line-941"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; String -&gt; IO ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/directory-1.3.8.5/src/System.Directory.html#createDirectoryIfMissing"><span class="hs-identifier hs-var">createDirectoryIfMissing</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#True"><span class="hs-identifier hs-var">True</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681945841"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-942"></span><span>      </span><span class="annot"><span class="annottext">NodeDatabasePaths -&gt; IO NodeDatabasePaths
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(NodeDatabasePaths -&gt; IO NodeDatabasePaths)
-&gt; NodeDatabasePaths -&gt; IO NodeDatabasePaths
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; NodeDatabasePaths
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#OnePathForAllDbs"><span class="hs-identifier hs-var">Node.OnePathForAllDbs</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681945841"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-943"></span><span>
</span><span id="line-944"></span><span>    </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#MultipleDbPaths"><span class="hs-identifier hs-type">Node.MultipleDbPaths</span></a></span><span> </span><span id="local-6989586621681945843"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681945843"><span class="hs-identifier hs-var">immutable</span></a></span></span><span> </span><span id="local-6989586621681945844"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681945844"><span class="hs-identifier hs-var">volatile</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-945"></span><span>      </span><span id="local-6989586621681945845"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681945845"><span class="hs-identifier hs-var">canonImmutable</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO String
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/directory-1.3.8.5/src/System.Directory.html#canonicalizePath"><span class="hs-identifier hs-var">canonicalizePath</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO String) -&gt; IO String -&gt; IO String
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3D%3C%3C"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO String
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/directory-1.3.8.5/src/System.Directory.html#makeAbsolute"><span class="hs-identifier hs-var">makeAbsolute</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681945843"><span class="hs-identifier hs-var">immutable</span></a></span><span>
</span><span id="line-946"></span><span>      </span><span id="local-6989586621681945846"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681945846"><span class="hs-identifier hs-var">canonVolatile</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO String
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/directory-1.3.8.5/src/System.Directory.html#canonicalizePath"><span class="hs-identifier hs-var">canonicalizePath</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO String) -&gt; IO String -&gt; IO String
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3D%3C%3C"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO String
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/directory-1.3.8.5/src/System.Directory.html#makeAbsolute"><span class="hs-identifier hs-var">makeAbsolute</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681945844"><span class="hs-identifier hs-var">volatile</span></a></span><span>
</span><span id="line-947"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; String -&gt; IO ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/directory-1.3.8.5/src/System.Directory.html#createDirectoryIfMissing"><span class="hs-identifier hs-var">createDirectoryIfMissing</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#True"><span class="hs-identifier hs-var">True</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681945845"><span class="hs-identifier hs-var">canonImmutable</span></a></span><span>
</span><span id="line-948"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; String -&gt; IO ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/directory-1.3.8.5/src/System.Directory.html#createDirectoryIfMissing"><span class="hs-identifier hs-var">createDirectoryIfMissing</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#True"><span class="hs-identifier hs-var">True</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681945846"><span class="hs-identifier hs-var">canonVolatile</span></a></span><span>
</span><span id="line-949"></span><span>      </span><span class="annot"><span class="annottext">NodeDatabasePaths -&gt; IO NodeDatabasePaths
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(NodeDatabasePaths -&gt; IO NodeDatabasePaths)
-&gt; NodeDatabasePaths -&gt; IO NodeDatabasePaths
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; NodeDatabasePaths
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-consensus-diffusion-0.23.0.0-8be768db5b8368d5d5a8673d2649e524374f9285fdde41716b4325cf33cfcfef/share/doc/html/src/Ouroboros.Consensus.Node.html#MultipleDbPaths"><span class="hs-identifier hs-var">Node.MultipleDbPaths</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681945845"><span class="hs-identifier hs-var">canonImmutable</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681945846"><span class="hs-identifier hs-var">canonVolatile</span></a></span><span>
</span><span id="line-950"></span><span>
</span><span id="line-951"></span><span class="hs-comment">-- | Make sure the VRF private key file is readable only</span><span>
</span><span id="line-952"></span><span class="hs-comment">-- by the current process owner the node is running under.</span><span>
</span><span id="line-953"></span><span id="local-6989586621681944103"><span id="local-6989586621681944104"><span class="annot"><a href="Cardano.Node.Run.html#checkVRFFilePermissions"><span class="hs-identifier hs-type">checkVRFFilePermissions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#Tracer"><span class="hs-identifier hs-type">Tracer</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-api-10.18.0.0-cf96680f7a5f126623afc107f46c4390ef848488275422e58a8da147b9415623/share/doc/html/src/Cardano.Api.IO.Internal.Base.html#File"><span class="hs-identifier hs-type">File</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944103"><span class="hs-identifier hs-type">content</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944104"><span class="hs-identifier hs-type">direction</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Cardano.Node.Types.html#VRFPrivateKeyFilePermissionError"><span class="hs-identifier hs-type">VRFPrivateKeyFilePermissionError</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span class="hs-cpp">
#ifdef UNIX
</span><span id="checkVRFFilePermissions"><span class="annot"><span class="annottext">checkVRFFilePermissions :: forall content (direction :: FileDirection).
Tracer IO String
-&gt; File content direction
-&gt; ExceptT VRFPrivateKeyFilePermissionError IO ()
</span><a href="Cardano.Node.Run.html#checkVRFFilePermissions"><span class="hs-identifier hs-var hs-var">checkVRFFilePermissions</span></a></span></span><span> </span><span id="local-6989586621681945863"><span class="annot"><span class="annottext">Tracer IO String
</span><a href="#local-6989586621681945863"><span class="hs-identifier hs-var">tracer</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-api-10.18.0.0-cf96680f7a5f126623afc107f46c4390ef848488275422e58a8da147b9415623/share/doc/html/src/Cardano.Api.IO.Internal.Base.html#File"><span class="hs-identifier hs-type">File</span></a></span><span> </span><span id="local-6989586621681945864"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681945864"><span class="hs-identifier hs-var">vrfPrivKey</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-956"></span><span>  </span><span id="local-6989586621681945865"><span class="annot"><span class="annottext">FileStatus
</span><a href="#local-6989586621681945865"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO FileStatus
-&gt; ExceptT VRFPrivateKeyFilePermissionError IO FileStatus
forall a. IO a -&gt; ExceptT VRFPrivateKeyFilePermissionError IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO FileStatus
 -&gt; ExceptT VRFPrivateKeyFilePermissionError IO FileStatus)
-&gt; IO FileStatus
-&gt; ExceptT VRFPrivateKeyFilePermissionError IO FileStatus
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO FileStatus
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/unix-2.8.4.0/src/System.Posix.Files.html#getFileStatus"><span class="hs-identifier hs-var">getFileStatus</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681945864"><span class="hs-identifier hs-var">vrfPrivKey</span></a></span><span>
</span><span id="line-957"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681945867"><span class="annot"><span class="annottext">fm :: FileMode
</span><a href="#local-6989586621681945867"><span class="hs-identifier hs-var hs-var">fm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FileStatus -&gt; FileMode
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/unix-2.8.4.0/src/System.Posix.Files.Common.html#fileMode"><span class="hs-identifier hs-var">fileMode</span></a></span><span> </span><span class="annot"><span class="annottext">FileStatus
</span><a href="#local-6989586621681945865"><span class="hs-identifier hs-var">fs</span></a></span><span>
</span><span id="line-958"></span><span>  </span><span class="hs-comment">-- Check the the VRF private key file does not give read/write/exec permissions to others.</span><span>
</span><span id="line-959"></span><span>  </span><span class="annot"><span class="annottext">Bool
-&gt; ExceptT VRFPrivateKeyFilePermissionError IO ()
-&gt; ExceptT VRFPrivateKeyFilePermissionError IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FileMode -&gt; Bool
</span><a href="#local-6989586621681945869"><span class="hs-identifier hs-var">hasOtherPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">FileMode
</span><a href="#local-6989586621681945867"><span class="hs-identifier hs-var">fm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ExceptT VRFPrivateKeyFilePermissionError IO ()
 -&gt; ExceptT VRFPrivateKeyFilePermissionError IO ())
-&gt; ExceptT VRFPrivateKeyFilePermissionError IO ()
-&gt; ExceptT VRFPrivateKeyFilePermissionError IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-960"></span><span>     </span><span class="annot"><span class="annottext">VRFPrivateKeyFilePermissionError
-&gt; ExceptT VRFPrivateKeyFilePermissionError IO ()
forall (m :: * -&gt; *) x a. Monad m =&gt; x -&gt; ExceptT x m a
</span><a href="file:///nix/store/1b4my2m47g921s9na6vjrjsbp0aa7pkc-transformers-except-lib-transformers-except-0.1.4-haddock-doc/share/doc/transformers-except/html/src/Control.Monad.Trans.Except.Extra.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="annot"><span class="annottext">(VRFPrivateKeyFilePermissionError
 -&gt; ExceptT VRFPrivateKeyFilePermissionError IO ())
-&gt; VRFPrivateKeyFilePermissionError
-&gt; ExceptT VRFPrivateKeyFilePermissionError IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; VRFPrivateKeyFilePermissionError
</span><a href="Cardano.Node.Types.html#OtherPermissionsExist"><span class="hs-identifier hs-var">OtherPermissionsExist</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681945864"><span class="hs-identifier hs-var">vrfPrivKey</span></a></span><span>
</span><span id="line-961"></span><span>  </span><span class="hs-comment">-- Check the the VRF private key file does not give read/write/exec permissions to any group.</span><span>
</span><span id="line-962"></span><span>  </span><span class="annot"><span class="annottext">Bool
-&gt; ExceptT VRFPrivateKeyFilePermissionError IO ()
-&gt; ExceptT VRFPrivateKeyFilePermissionError IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FileMode -&gt; Bool
</span><a href="#local-6989586621681945871"><span class="hs-identifier hs-var">hasGroupPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">FileMode
</span><a href="#local-6989586621681945867"><span class="hs-identifier hs-var">fm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ExceptT VRFPrivateKeyFilePermissionError IO ()
 -&gt; ExceptT VRFPrivateKeyFilePermissionError IO ())
-&gt; ExceptT VRFPrivateKeyFilePermissionError IO ()
-&gt; ExceptT VRFPrivateKeyFilePermissionError IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-963"></span><span>     </span><span class="annot"><span class="annottext">IO () -&gt; ExceptT VRFPrivateKeyFilePermissionError IO ()
forall a. IO a -&gt; ExceptT VRFPrivateKeyFilePermissionError IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; ExceptT VRFPrivateKeyFilePermissionError IO ())
-&gt; IO () -&gt; ExceptT VRFPrivateKeyFilePermissionError IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO String -&gt; String -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#traceWith"><span class="hs-identifier hs-var">traceWith</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO String
</span><a href="#local-6989586621681945863"><span class="hs-identifier hs-var">tracer</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO ()) -&gt; String -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;WARNING: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(String -&gt; String)
-&gt; (VRFPrivateKeyFilePermissionError -&gt; String)
-&gt; VRFPrivateKeyFilePermissionError
-&gt; String
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span>  </span><span class="annot"><span class="annottext">VRFPrivateKeyFilePermissionError -&gt; String
forall a. Error a =&gt; a -&gt; String
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/cardano-api-10.18.0.0-cf96680f7a5f126623afc107f46c4390ef848488275422e58a8da147b9415623/share/doc/html/src/Cardano.Api.Error.html#displayError"><span class="hs-identifier hs-var">displayError</span></a></span><span> </span><span class="annot"><span class="annottext">(VRFPrivateKeyFilePermissionError -&gt; String)
-&gt; VRFPrivateKeyFilePermissionError -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; VRFPrivateKeyFilePermissionError
</span><a href="Cardano.Node.Types.html#GroupPermissionsExist"><span class="hs-identifier hs-var">GroupPermissionsExist</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681945864"><span class="hs-identifier hs-var">vrfPrivKey</span></a></span><span>
</span><span id="line-964"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-965"></span><span>  </span><span class="annot"><a href="#local-6989586621681945873"><span class="hs-identifier hs-type">hasPermission</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/System.Posix.Types.html#FileMode"><span class="hs-identifier hs-type">FileMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/System.Posix.Types.html#FileMode"><span class="hs-identifier hs-type">FileMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Bool"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-966"></span><span>  </span><span id="local-6989586621681945873"><span class="annot"><span class="annottext">hasPermission :: FileMode -&gt; FileMode -&gt; Bool
</span><a href="#local-6989586621681945873"><span class="hs-identifier hs-var hs-var">hasPermission</span></a></span></span><span> </span><span id="local-6989586621681945874"><span class="annot"><span class="annottext">FileMode
</span><a href="#local-6989586621681945874"><span class="hs-identifier hs-var">fModeA</span></a></span></span><span> </span><span id="local-6989586621681945875"><span class="annot"><span class="annottext">FileMode
</span><a href="#local-6989586621681945875"><span class="hs-identifier hs-var">fModeB</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FileMode
</span><a href="#local-6989586621681945874"><span class="hs-identifier hs-var">fModeA</span></a></span><span> </span><span class="annot"><span class="annottext">FileMode -&gt; FileMode -&gt; FileMode
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/unix-2.8.4.0/src/System.Posix.Files.Common.html#intersectFileModes"><span class="hs-operator hs-var">`intersectFileModes`</span></a></span><span> </span><span class="annot"><span class="annottext">FileMode
</span><a href="#local-6989586621681945875"><span class="hs-identifier hs-var">fModeB</span></a></span><span> </span><span class="annot"><span class="annottext">FileMode -&gt; FileMode -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#%2F%3D"><span class="hs-operator hs-var">/=</span></a></span><span> </span><span class="annot"><span class="annottext">FileMode
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/unix-2.8.4.0/src/System.Posix.Files.Common.html#nullFileMode"><span class="hs-identifier hs-var">nullFileMode</span></a></span><span>
</span><span id="line-967"></span><span>
</span><span id="line-968"></span><span>  </span><span class="annot"><a href="#local-6989586621681945869"><span class="hs-identifier hs-type">hasOtherPermissions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/System.Posix.Types.html#FileMode"><span class="hs-identifier hs-type">FileMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Bool"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-969"></span><span>  </span><span id="local-6989586621681945869"><span class="annot"><span class="annottext">hasOtherPermissions :: FileMode -&gt; Bool
</span><a href="#local-6989586621681945869"><span class="hs-identifier hs-var hs-var">hasOtherPermissions</span></a></span></span><span> </span><span id="local-6989586621681945879"><span class="annot"><span class="annottext">FileMode
</span><a href="#local-6989586621681945879"><span class="hs-identifier hs-var">fm'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FileMode
</span><a href="#local-6989586621681945879"><span class="hs-identifier hs-var">fm'</span></a></span><span> </span><span class="annot"><span class="annottext">FileMode -&gt; FileMode -&gt; Bool
</span><a href="#local-6989586621681945873"><span class="hs-operator hs-var">`hasPermission`</span></a></span><span> </span><span class="annot"><span class="annottext">FileMode
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/unix-2.8.4.0/src/System.Posix.Files.Common.html#otherModes"><span class="hs-identifier hs-var">otherModes</span></a></span><span>
</span><span id="line-970"></span><span>
</span><span id="line-971"></span><span>  </span><span class="annot"><a href="#local-6989586621681945871"><span class="hs-identifier hs-type">hasGroupPermissions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/System.Posix.Types.html#FileMode"><span class="hs-identifier hs-type">FileMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Bool"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-972"></span><span>  </span><span id="local-6989586621681945871"><span class="annot"><span class="annottext">hasGroupPermissions :: FileMode -&gt; Bool
</span><a href="#local-6989586621681945871"><span class="hs-identifier hs-var hs-var">hasGroupPermissions</span></a></span></span><span> </span><span id="local-6989586621681945881"><span class="annot"><span class="annottext">FileMode
</span><a href="#local-6989586621681945881"><span class="hs-identifier hs-var">fm'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FileMode
</span><a href="#local-6989586621681945881"><span class="hs-identifier hs-var">fm'</span></a></span><span> </span><span class="annot"><span class="annottext">FileMode -&gt; FileMode -&gt; Bool
</span><a href="#local-6989586621681945873"><span class="hs-operator hs-var">`hasPermission`</span></a></span><span> </span><span class="annot"><span class="annottext">FileMode
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/unix-2.8.4.0/src/System.Posix.Files.Common.html#groupModes"><span class="hs-identifier hs-var">groupModes</span></a></span><span class="hs-cpp">
#else
</span><span class="hs-identifier">checkVRFFilePermissions</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">File</span><span> </span><span class="hs-identifier">vrfPrivKey</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-975"></span><span>  </span><span class="hs-identifier">attribs</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">liftIO</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-identifier">getFileAttributes</span><span> </span><span class="hs-identifier">vrfPrivKey</span><span>
</span><span id="line-976"></span><span>  </span><span class="hs-comment">-- https://docs.microsoft.com/en-us/windows/win32/api/fileapi/nf-fileapi-createfilea</span><span>
</span><span id="line-977"></span><span>  </span><span class="hs-comment">-- https://docs.microsoft.com/en-us/windows/win32/fileio/file-access-rights-constants</span><span>
</span><span id="line-978"></span><span>  </span><span class="hs-comment">-- https://docs.microsoft.com/en-us/windows/win32/secauthz/standard-access-rights</span><span>
</span><span id="line-979"></span><span>  </span><span class="hs-comment">-- https://docs.microsoft.com/en-us/windows/win32/secauthz/generic-access-rights</span><span>
</span><span id="line-980"></span><span>  </span><span class="hs-comment">-- https://docs.microsoft.com/en-us/windows/win32/secauthz/access-mask</span><span>
</span><span id="line-981"></span><span>  </span><span class="hs-identifier">when</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">attribs</span><span> </span><span class="hs-special">`</span><span class="hs-identifier">hasPermission</span><span class="hs-special">`</span><span> </span><span class="hs-identifier">genericPermissions</span><span class="hs-special">)</span><span>
</span><span id="line-982"></span><span>       </span><span class="hs-special">(</span><span class="hs-identifier">left</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-identifier">GenericPermissionsExist</span><span> </span><span class="hs-identifier">vrfPrivKey</span><span class="hs-special">)</span><span>
</span><span id="line-983"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-984"></span><span>  </span><span class="hs-identifier">genericPermissions</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">gENERIC_ALL</span><span> </span><span class="hs-operator">.|.</span><span> </span><span class="hs-identifier">gENERIC_READ</span><span> </span><span class="hs-operator">.|.</span><span> </span><span class="hs-identifier">gENERIC_WRITE</span><span> </span><span class="hs-operator">.|.</span><span> </span><span class="hs-identifier">gENERIC_EXECUTE</span><span>
</span><span id="line-985"></span><span>  </span><span class="hs-identifier">hasPermission</span><span> </span><span class="hs-identifier">fModeA</span><span> </span><span class="hs-identifier">fModeB</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">fModeA</span><span> </span><span class="hs-operator">.&amp;.</span><span> </span><span class="hs-identifier">fModeB</span><span> </span><span class="hs-operator">/=</span><span> </span><span class="hs-identifier">gENERIC_NONE</span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-988"></span><span>
</span><span id="line-989"></span><span id="local-6989586621681944507"><span id="local-6989586621681944508"><span id="local-6989586621681944509"><span class="annot"><a href="Cardano.Node.Run.html#mkP2PArguments"><span class="hs-identifier hs-type">mkP2PArguments</span></a></span><span>
</span><span id="line-990"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Ord"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944507"><span class="hs-identifier hs-type">ntnAddr</span></a></span><span>
</span><span id="line-991"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-framework-0.18.0.2-e5e675f5f8bd9f2a1e99040ff85ace8bb30006cb1118a4f0531fde62ebeff5fc/share/doc/html/src/Ouroboros.Network.Mux.html#ForkPolicy"><span class="hs-identifier hs-type">ForkPolicy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944507"><span class="hs-identifier hs-type">ntnAddr</span></a></span><span>
</span><span id="line-992"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-framework-0.18.0.2-e5e675f5f8bd9f2a1e99040ff85ace8bb30006cb1118a4f0531fde62ebeff5fc/share/doc/html/src/Ouroboros.Network.Mux.html#ForkPolicy"><span class="hs-identifier hs-type">ForkPolicy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944508"><span class="hs-identifier hs-type">ntcAddr</span></a></span><span>
</span><span id="line-993"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.POM.html#NodeConfiguration"><span class="hs-identifier hs-type">NodeConfiguration</span></a></span><span>
</span><span id="line-994"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/39y1cwp74gv435x8ywpmq90n9jlfm1ml-io-classes-lib-io-classes-1.5.0.0-haddock-doc/share/doc/io-classes/html/src/Control.Monad.Class.MonadSTM.Internal.html#STM"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.State.LocalRootPeers.html#HotValency"><span class="hs-identifier hs-type">HotValency</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.State.LocalRootPeers.html#WarmValency"><span class="hs-identifier hs-type">WarmValency</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.RelayAccessPoint.html#RelayAccessPoint"><span class="hs-identifier hs-type">RelayAccessPoint</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.State.LocalRootPeers.html#LocalRootConfig"><span class="hs-identifier hs-type">LocalRootConfig</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Cardano.Network.PeerSelection.PeerTrustable.html#PeerTrustable"><span class="hs-identifier hs-type">PeerTrustable</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-995"></span><span>     </span><span class="hs-comment">-- ^ non-overlapping local root peers groups; the 'Int' denotes the</span><span>
</span><span id="line-996"></span><span>     </span><span class="hs-comment">-- valency of its group.</span><span>
</span><span id="line-997"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/39y1cwp74gv435x8ywpmq90n9jlfm1ml-io-classes-lib-io-classes-1.5.0.0-haddock-doc/share/doc/io-classes/html/src/Control.Monad.Class.MonadSTM.Internal.html#STM"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.RelayAccessPoint.html#RelayAccessPoint"><span class="hs-identifier hs-type">RelayAccessPoint</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.PeerAdvertise.html#PeerAdvertise"><span class="hs-identifier hs-type">PeerAdvertise</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-998"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/39y1cwp74gv435x8ywpmq90n9jlfm1ml-io-classes-lib-io-classes-1.5.0.0-haddock-doc/share/doc/io-classes/html/src/Control.Monad.Class.MonadSTM.Internal.html#STM"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.LedgerPeers.Type.html#UseLedgerPeers"><span class="hs-identifier hs-type">UseLedgerPeers</span></a></span><span>
</span><span id="line-999"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/39y1cwp74gv435x8ywpmq90n9jlfm1ml-io-classes-lib-io-classes-1.5.0.0-haddock-doc/share/doc/io-classes/html/src/Control.Monad.Class.MonadSTM.Internal.html#STM"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Cardano.Network.PeerSelection.Bootstrap.html#UseBootstrapPeers"><span class="hs-identifier hs-type">UseBootstrapPeers</span></a></span><span>
</span><span id="line-1000"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/39y1cwp74gv435x8ywpmq90n9jlfm1ml-io-classes-lib-io-classes-1.5.0.0-haddock-doc/share/doc/io-classes/html/src/Control.Monad.Class.MonadSTM.Internal.html#STM"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.LedgerPeers.Type.html#LedgerPeerSnapshot"><span class="hs-identifier hs-type">LedgerPeerSnapshot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1001"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/skb3z360cb0ic2x6mhzf52ixx23bcnjj-strict-stm-lib-strict-stm-1.5.0.0-haddock-doc/share/doc/strict-stm/html/src/Control.Concurrent.Class.MonadSTM.Strict.TVar.html#StrictTVar"><span class="hs-identifier hs-type">StrictTVar</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.Types.html#ChurnMode"><span class="hs-identifier hs-type">ChurnMode</span></a></span><span>
</span><span id="line-1002"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.html#P2PDecision"><span class="hs-identifier hs-type">Diffusion.P2PDecision</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.html#P2P"><span class="hs-identifier hs-type">Diffusion.P2P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/na2s8yspw84mcsl8qrdxgvscb3q6b5pv-contra-tracer-lib-contra-tracer-0.1.0.2-haddock-doc/share/doc/contra-tracer/html/src/Control.Tracer.html#Tracer"><span class="hs-identifier hs-type">Tracer</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.RootPeersDNS.PublicRootPeers.html#TracePublicRootPeers"><span class="hs-identifier hs-type">TracePublicRootPeers</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1003"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.html#P2PDecision"><span class="hs-identifier hs-type">Diffusion.P2PDecision</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.html#P2P"><span class="hs-identifier hs-type">Diffusion.P2P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/39y1cwp74gv435x8ywpmq90n9jlfm1ml-io-classes-lib-io-classes-1.5.0.0-haddock-doc/share/doc/io-classes/html/src/Control.Monad.Class.MonadSTM.Internal.html#STM"><span class="hs-identifier hs-type">STM</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.BlockFetch.ConsensusInterface.html#FetchMode"><span class="hs-identifier hs-type">FetchMode</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1004"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.html#P2PDecision"><span class="hs-identifier hs-type">Diffusion.P2PDecision</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.html#P2P"><span class="hs-identifier hs-type">Diffusion.P2P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.LedgerPeerConsensusInterface.html#LedgerPeersConsensusInterface"><span class="hs-identifier hs-type">Cardano.LedgerPeersConsensusInterface</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1005"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.html#ArgumentsExtra"><span class="hs-identifier hs-type">Diffusion.ArgumentsExtra</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.html#P2P"><span class="hs-identifier hs-type">Diffusion.P2P</span></a></span><span>
</span><span id="line-1006"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.ArgumentsExtra.html#ExtraArguments"><span class="hs-identifier hs-type">Cardano.ExtraArguments</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1007"></span><span>      </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PeerSelection.Governor.PeerSelectionState.html#ExtraState"><span class="hs-identifier hs-type">Cardano.PeerSelection.ExtraState</span></a></span><span>
</span><span id="line-1008"></span><span>      </span><span class="annot"><a href="#local-6989586621681944509"><span class="hs-identifier hs-type">extraDebugState</span></a></span><span>
</span><span id="line-1009"></span><span>      </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Cardano.Network.PeerSelection.PeerTrustable.html#PeerTrustable"><span class="hs-identifier hs-type">PeerTrustable</span></a></span><span>
</span><span id="line-1010"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PublicRootPeers.html#ExtraPeers"><span class="hs-identifier hs-type">Cardano.PublicRoots.ExtraPeers</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944507"><span class="hs-identifier hs-type">ntnAddr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1011"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.LedgerPeerConsensusInterface.html#LedgerPeersConsensusInterface"><span class="hs-identifier hs-type">Cardano.LedgerPeersConsensusInterface</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1012"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PeerSelection.Churn.ExtraArguments.html#ExtraArguments"><span class="hs-identifier hs-type">Cardano.Churn.ExtraArguments</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1013"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PeerSelection.Governor.Types.html#ExtraPeerSelectionSetsWithSizes"><span class="hs-identifier hs-type">Cardano.ExtraPeerSelectionSetsWithSizes</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681944507"><span class="hs-identifier hs-type">ntnAddr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1014"></span><span>      </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.Governor.Types.html#BootstrapPeersCriticalTimeoutError"><span class="hs-identifier hs-type">BootstrapPeersCriticalTimeoutError</span></a></span><span>
</span><span id="line-1015"></span><span>      </span><span class="annot"><a href="#local-6989586621681944507"><span class="hs-identifier hs-type">ntnAddr</span></a></span><span>
</span><span id="line-1016"></span><span>      </span><span class="annot"><a href="#local-6989586621681944508"><span class="hs-identifier hs-type">ntcAddr</span></a></span><span>
</span><span id="line-1017"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Resolver</span></span><span>
</span><span id="line-1018"></span><span>      </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.Exception.html#IOException"><span class="hs-identifier hs-type">IOException</span></a></span><span>
</span><span id="line-1019"></span><span>      </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span></span></span></span><span>
</span><span id="line-1020"></span><span id="mkP2PArguments"><span class="annot"><span class="annottext">mkP2PArguments :: forall ntnAddr ntcAddr extraDebugState.
Ord ntnAddr =&gt;
ForkPolicy ntnAddr
-&gt; ForkPolicy ntcAddr
-&gt; NodeConfiguration
-&gt; STM
     IO
     [(HotValency, WarmValency,
       Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
-&gt; STM IO (Map RelayAccessPoint PeerAdvertise)
-&gt; STM IO UseLedgerPeers
-&gt; STM IO UseBootstrapPeers
-&gt; STM IO (Maybe LedgerPeerSnapshot)
-&gt; StrictTVar IO ChurnMode
-&gt; P2PDecision 'P2P (Tracer IO TracePublicRootPeers) ()
-&gt; P2PDecision 'P2P (STM IO FetchMode) ()
-&gt; P2PDecision 'P2P (LedgerPeersConsensusInterface IO) ()
-&gt; ArgumentsExtra
     'P2P
     (ExtraArguments IO)
     ExtraState
     extraDebugState
     PeerTrustable
     (ExtraPeers ntnAddr)
     (LedgerPeersConsensusInterface IO)
     (ExtraArguments IO)
     (ExtraPeerSelectionSetsWithSizes ntnAddr)
     BootstrapPeersCriticalTimeoutError
     ntnAddr
     ntcAddr
     Resolver
     IOException
     IO
</span><a href="Cardano.Node.Run.html#mkP2PArguments"><span class="hs-identifier hs-var hs-var">mkP2PArguments</span></a></span></span><span> </span><span id="local-6989586621681945884"><span class="annot"><span class="annottext">ForkPolicy ntnAddr
</span><a href="#local-6989586621681945884"><span class="hs-identifier hs-var">nForkPolicy</span></a></span></span><span> </span><span id="local-6989586621681945885"><span class="annot"><span class="annottext">ForkPolicy ntcAddr
</span><a href="#local-6989586621681945885"><span class="hs-identifier hs-var">cForkPolicy</span></a></span></span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.POM.html#NodeConfiguration"><span class="hs-identifier hs-type">NodeConfiguration</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1021"></span><span>                 </span><span id="local-6989586621681945886"><span class="annot"><span class="annottext">Int
ncDeadlineTargetOfRootPeers :: Int
ncDeadlineTargetOfRootPeers :: NodeConfiguration -&gt; Int
</span><a href="#local-6989586621681945886"><span class="hs-identifier hs-var hs-var">ncDeadlineTargetOfRootPeers</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1022"></span><span>                 </span><span id="local-6989586621681945888"><span class="annot"><span class="annottext">Int
ncDeadlineTargetOfKnownPeers :: Int
ncDeadlineTargetOfKnownPeers :: NodeConfiguration -&gt; Int
</span><a href="#local-6989586621681945888"><span class="hs-identifier hs-var hs-var">ncDeadlineTargetOfKnownPeers</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1023"></span><span>                 </span><span id="local-6989586621681945890"><span class="annot"><span class="annottext">Int
ncDeadlineTargetOfEstablishedPeers :: Int
ncDeadlineTargetOfEstablishedPeers :: NodeConfiguration -&gt; Int
</span><a href="#local-6989586621681945890"><span class="hs-identifier hs-var hs-var">ncDeadlineTargetOfEstablishedPeers</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1024"></span><span>                 </span><span id="local-6989586621681945892"><span class="annot"><span class="annottext">Int
ncDeadlineTargetOfActivePeers :: Int
ncDeadlineTargetOfActivePeers :: NodeConfiguration -&gt; Int
</span><a href="#local-6989586621681945892"><span class="hs-identifier hs-var hs-var">ncDeadlineTargetOfActivePeers</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1025"></span><span>                 </span><span id="local-6989586621681945894"><span class="annot"><span class="annottext">Int
ncDeadlineTargetOfKnownBigLedgerPeers :: Int
ncDeadlineTargetOfKnownBigLedgerPeers :: NodeConfiguration -&gt; Int
</span><a href="#local-6989586621681945894"><span class="hs-identifier hs-var hs-var">ncDeadlineTargetOfKnownBigLedgerPeers</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1026"></span><span>                 </span><span id="local-6989586621681945896"><span class="annot"><span class="annottext">Int
ncDeadlineTargetOfEstablishedBigLedgerPeers :: Int
ncDeadlineTargetOfEstablishedBigLedgerPeers :: NodeConfiguration -&gt; Int
</span><a href="#local-6989586621681945896"><span class="hs-identifier hs-var hs-var">ncDeadlineTargetOfEstablishedBigLedgerPeers</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1027"></span><span>                 </span><span id="local-6989586621681945898"><span class="annot"><span class="annottext">Int
ncDeadlineTargetOfActiveBigLedgerPeers :: Int
ncDeadlineTargetOfActiveBigLedgerPeers :: NodeConfiguration -&gt; Int
</span><a href="#local-6989586621681945898"><span class="hs-identifier hs-var hs-var">ncDeadlineTargetOfActiveBigLedgerPeers</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1028"></span><span>                 </span><span id="local-6989586621681945900"><span class="annot"><span class="annottext">Int
ncSyncTargetOfRootPeers :: Int
ncSyncTargetOfRootPeers :: NodeConfiguration -&gt; Int
</span><a href="#local-6989586621681945900"><span class="hs-identifier hs-var hs-var">ncSyncTargetOfRootPeers</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1029"></span><span>                 </span><span id="local-6989586621681945902"><span class="annot"><span class="annottext">Int
ncSyncTargetOfKnownPeers :: Int
ncSyncTargetOfKnownPeers :: NodeConfiguration -&gt; Int
</span><a href="#local-6989586621681945902"><span class="hs-identifier hs-var hs-var">ncSyncTargetOfKnownPeers</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1030"></span><span>                 </span><span id="local-6989586621681945904"><span class="annot"><span class="annottext">Int
ncSyncTargetOfEstablishedPeers :: Int
ncSyncTargetOfEstablishedPeers :: NodeConfiguration -&gt; Int
</span><a href="#local-6989586621681945904"><span class="hs-identifier hs-var hs-var">ncSyncTargetOfEstablishedPeers</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1031"></span><span>                 </span><span id="local-6989586621681945906"><span class="annot"><span class="annottext">Int
ncSyncTargetOfActivePeers :: Int
ncSyncTargetOfActivePeers :: NodeConfiguration -&gt; Int
</span><a href="#local-6989586621681945906"><span class="hs-identifier hs-var hs-var">ncSyncTargetOfActivePeers</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1032"></span><span>                 </span><span id="local-6989586621681945908"><span class="annot"><span class="annottext">Int
ncSyncTargetOfKnownBigLedgerPeers :: Int
ncSyncTargetOfKnownBigLedgerPeers :: NodeConfiguration -&gt; Int
</span><a href="#local-6989586621681945908"><span class="hs-identifier hs-var hs-var">ncSyncTargetOfKnownBigLedgerPeers</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1033"></span><span>                 </span><span id="local-6989586621681945910"><span class="annot"><span class="annottext">Int
ncSyncTargetOfEstablishedBigLedgerPeers :: Int
ncSyncTargetOfEstablishedBigLedgerPeers :: NodeConfiguration -&gt; Int
</span><a href="#local-6989586621681945910"><span class="hs-identifier hs-var hs-var">ncSyncTargetOfEstablishedBigLedgerPeers</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1034"></span><span>                 </span><span id="local-6989586621681945912"><span class="annot"><span class="annottext">Int
ncSyncTargetOfActiveBigLedgerPeers :: Int
ncSyncTargetOfActiveBigLedgerPeers :: NodeConfiguration -&gt; Int
</span><a href="#local-6989586621681945912"><span class="hs-identifier hs-var hs-var">ncSyncTargetOfActiveBigLedgerPeers</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1035"></span><span>                 </span><span id="local-6989586621681945914"><span class="annot"><span class="annottext">NumberOfBigLedgerPeers
ncMinBigLedgerPeersForTrustedState :: NumberOfBigLedgerPeers
ncMinBigLedgerPeersForTrustedState :: NodeConfiguration -&gt; NumberOfBigLedgerPeers
</span><a href="#local-6989586621681945914"><span class="hs-identifier hs-var hs-var">ncMinBigLedgerPeersForTrustedState</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1036"></span><span>                 </span><span id="local-6989586621681945916"><span class="annot"><span class="annottext">DiffTime
ncProtocolIdleTimeout :: DiffTime
ncProtocolIdleTimeout :: NodeConfiguration -&gt; DiffTime
</span><a href="#local-6989586621681945916"><span class="hs-identifier hs-var hs-var">ncProtocolIdleTimeout</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1037"></span><span>                 </span><span id="local-6989586621681945918"><span class="annot"><span class="annottext">DiffTime
ncTimeWaitTimeout :: DiffTime
ncTimeWaitTimeout :: NodeConfiguration -&gt; DiffTime
</span><a href="#local-6989586621681945918"><span class="hs-identifier hs-var hs-var">ncTimeWaitTimeout</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1038"></span><span>                 </span><span id="local-6989586621681945920"><span class="annot"><span class="annottext">PeerSharing
ncPeerSharing :: NodeConfiguration -&gt; PeerSharing
ncPeerSharing :: PeerSharing
</span><a href="Cardano.Node.Configuration.POM.html#ncPeerSharing"><span class="hs-identifier hs-var hs-var">ncPeerSharing</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1039"></span><span>                 </span><span id="local-6989586621681945921"><span class="annot"><span class="annottext">ConsensusMode
ncConsensusMode :: NodeConfiguration -&gt; ConsensusMode
ncConsensusMode :: ConsensusMode
</span><a href="Cardano.Node.Configuration.POM.html#ncConsensusMode"><span class="hs-identifier hs-var hs-var">ncConsensusMode</span></a></span></span><span>
</span><span id="line-1040"></span><span>               </span><span class="hs-special">}</span><span>
</span><span id="line-1041"></span><span>               </span><span id="local-6989586621681945922"><span class="annot"><span class="annottext">STM
  IO
  [(HotValency, WarmValency,
    Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
</span><a href="#local-6989586621681945922"><span class="hs-identifier hs-var">daReadLocalRootPeers</span></a></span></span><span>
</span><span id="line-1042"></span><span>               </span><span id="local-6989586621681945923"><span class="annot"><span class="annottext">STM IO (Map RelayAccessPoint PeerAdvertise)
</span><a href="#local-6989586621681945923"><span class="hs-identifier hs-var">daReadPublicRootPeers</span></a></span></span><span>
</span><span id="line-1043"></span><span>               </span><span id="local-6989586621681945924"><span class="annot"><span class="annottext">STM IO UseLedgerPeers
</span><a href="#local-6989586621681945924"><span class="hs-identifier hs-var">daReadUseLedgerPeers</span></a></span></span><span>
</span><span id="line-1044"></span><span>               </span><span id="local-6989586621681945925"><span class="annot"><span class="annottext">STM IO UseBootstrapPeers
</span><a href="#local-6989586621681945925"><span class="hs-identifier hs-var">daReadUseBootstrapPeers</span></a></span></span><span>
</span><span id="line-1045"></span><span>               </span><span id="local-6989586621681945926"><span class="annot"><span class="annottext">STM IO (Maybe LedgerPeerSnapshot)
</span><a href="#local-6989586621681945926"><span class="hs-identifier hs-var">daReadLedgerPeerSnapshot</span></a></span></span><span>
</span><span id="line-1046"></span><span>               </span><span id="local-6989586621681945927"><span class="annot"><span class="annottext">StrictTVar IO ChurnMode
</span><a href="#local-6989586621681945927"><span class="hs-identifier hs-var">churnModeVar</span></a></span></span><span>
</span><span id="line-1047"></span><span>               </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.html#P2PDecision"><span class="hs-identifier hs-type">Diffusion.P2PDecision</span></a></span><span> </span><span id="local-6989586621681945930"><span class="annot"><span class="annottext">Tracer IO TracePublicRootPeers
</span><a href="#local-6989586621681945930"><span class="hs-identifier hs-var">tracer</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1048"></span><span>               </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.html#P2PDecision"><span class="hs-identifier hs-type">Diffusion.P2PDecision</span></a></span><span> </span><span id="local-6989586621681945932"><span class="annot"><span class="annottext">STM IO FetchMode
</span><a href="#local-6989586621681945932"><span class="hs-identifier hs-var">getFetchMode</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1049"></span><span>               </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.html#P2PDecision"><span class="hs-identifier hs-type">Diffusion.P2PDecision</span></a></span><span> </span><span id="local-6989586621681945951"><span class="annot"><span class="annottext">LedgerPeersConsensusInterface IO
</span><a href="#local-6989586621681945951"><span class="hs-identifier hs-var">ledgerPeersConsensusInterface</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1050"></span><span>    </span><span class="annot"><span class="annottext">ArgumentsExtra
  ExtraState
  extraDebugState
  PeerTrustable
  (ExtraPeers ntnAddr)
  (LedgerPeersConsensusInterface IO)
  (ExtraArguments IO)
  (ExtraPeerSelectionSetsWithSizes ntnAddr)
  BootstrapPeersCriticalTimeoutError
  ntnAddr
  ntcAddr
  Resolver
  IOException
  IO
-&gt; ArgumentsExtra
     'P2P
     (ExtraArguments IO)
     ExtraState
     extraDebugState
     PeerTrustable
     (ExtraPeers ntnAddr)
     (LedgerPeersConsensusInterface IO)
     (ExtraArguments IO)
     (ExtraPeerSelectionSetsWithSizes ntnAddr)
     BootstrapPeersCriticalTimeoutError
     ntnAddr
     ntcAddr
     Resolver
     IOException
     IO
forall extraState extraDebugState extraFlags extraPeers extraAPI
       extraChurnArgs extraCounters exception ntnAddr ntcAddr resolver
       resolverError (m :: * -&gt; *) extraArgs.
ArgumentsExtra
  extraState
  extraDebugState
  extraFlags
  extraPeers
  extraAPI
  extraChurnArgs
  extraCounters
  exception
  ntnAddr
  ntcAddr
  resolver
  resolverError
  m
-&gt; ArgumentsExtra
     'P2P
     extraArgs
     extraState
     extraDebugState
     extraFlags
     extraPeers
     extraAPI
     extraChurnArgs
     extraCounters
     exception
     ntnAddr
     ntcAddr
     resolver
     resolverError
     m
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.html#P2PArguments"><span class="hs-identifier hs-var">Diffusion.P2PArguments</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.P2P.html#ArgumentsExtra"><span class="hs-identifier hs-type">P2P.ArgumentsExtra</span></a></span><span>
</span><span id="line-1051"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">STM
  IO
  [(HotValency, WarmValency,
    Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
daReadLocalRootPeers :: STM
  IO
  [(HotValency, WarmValency,
    Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
daReadLocalRootPeers :: STM
  IO
  [(HotValency, WarmValency,
    Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
</span><a href="#local-6989586621681945922"><span class="hs-identifier hs-var hs-var">P2P.daReadLocalRootPeers</span></a></span><span>
</span><span id="line-1052"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">STM IO (Map RelayAccessPoint PeerAdvertise)
daReadPublicRootPeers :: STM IO (Map RelayAccessPoint PeerAdvertise)
daReadPublicRootPeers :: STM IO (Map RelayAccessPoint PeerAdvertise)
</span><a href="#local-6989586621681945923"><span class="hs-identifier hs-var hs-var">P2P.daReadPublicRootPeers</span></a></span><span>
</span><span id="line-1053"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">STM IO UseLedgerPeers
daReadUseLedgerPeers :: STM IO UseLedgerPeers
daReadUseLedgerPeers :: STM IO UseLedgerPeers
</span><a href="#local-6989586621681945924"><span class="hs-identifier hs-var hs-var">P2P.daReadUseLedgerPeers</span></a></span><span>
</span><span id="line-1054"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">STM IO (Maybe LedgerPeerSnapshot)
daReadLedgerPeerSnapshot :: STM IO (Maybe LedgerPeerSnapshot)
daReadLedgerPeerSnapshot :: STM IO (Maybe LedgerPeerSnapshot)
</span><a href="#local-6989586621681945926"><span class="hs-identifier hs-var hs-var">P2P.daReadLedgerPeerSnapshot</span></a></span><span>
</span><span id="line-1055"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">daPeerSelectionTargets :: PeerSelectionTargets
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.P2P.html#daPeerSelectionTargets"><span class="hs-identifier hs-var">P2P.daPeerSelectionTargets</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PeerSelectionTargets
</span><a href="#local-6989586621681945959"><span class="hs-identifier hs-var">peerSelectionTargets</span></a></span><span>
</span><span id="line-1056"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">daProtocolIdleTimeout :: DiffTime
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.P2P.html#daProtocolIdleTimeout"><span class="hs-identifier hs-var">P2P.daProtocolIdleTimeout</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DiffTime
</span><a href="#local-6989586621681945916"><span class="hs-identifier hs-var">ncProtocolIdleTimeout</span></a></span><span>
</span><span id="line-1057"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">daTimeWaitTimeout :: DiffTime
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.P2P.html#daTimeWaitTimeout"><span class="hs-identifier hs-var">P2P.daTimeWaitTimeout</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DiffTime
</span><a href="#local-6989586621681945918"><span class="hs-identifier hs-var">ncTimeWaitTimeout</span></a></span><span>
</span><span id="line-1058"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">daDeadlineChurnInterval :: DiffTime
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.P2P.html#daDeadlineChurnInterval"><span class="hs-identifier hs-var">P2P.daDeadlineChurnInterval</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DiffTime
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.Configuration.html#defaultDeadlineChurnInterval"><span class="hs-identifier hs-var">Configuration.defaultDeadlineChurnInterval</span></a></span><span>
</span><span id="line-1059"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">daBulkChurnInterval :: DiffTime
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.P2P.html#daBulkChurnInterval"><span class="hs-identifier hs-var">P2P.daBulkChurnInterval</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DiffTime
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.Configuration.html#defaultBulkChurnInterval"><span class="hs-identifier hs-var">Configuration.defaultBulkChurnInterval</span></a></span><span>
</span><span id="line-1060"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">daEmptyExtraState :: ExtraState
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.P2P.html#daEmptyExtraState"><span class="hs-identifier hs-var">P2P.daEmptyExtraState</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConsensusMode -&gt; NumberOfBigLedgerPeers -&gt; ExtraState
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PeerSelection.Governor.PeerSelectionState.html#empty"><span class="hs-identifier hs-var">CPST.empty</span></a></span><span> </span><span class="annot"><span class="annottext">ConsensusMode
</span><a href="#local-6989586621681945921"><span class="hs-identifier hs-var">ncConsensusMode</span></a></span><span> </span><span class="annot"><span class="annottext">NumberOfBigLedgerPeers
</span><a href="#local-6989586621681945914"><span class="hs-identifier hs-var">ncMinBigLedgerPeersForTrustedState</span></a></span><span>
</span><span id="line-1061"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">daEmptyExtraCounters :: ExtraPeerSelectionSetsWithSizes ntnAddr
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.P2P.html#daEmptyExtraCounters"><span class="hs-identifier hs-var">P2P.daEmptyExtraCounters</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExtraPeerSelectionSetsWithSizes ntnAddr
forall peeraddr. ExtraPeerSelectionSetsWithSizes peeraddr
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PeerSelection.Governor.Types.html#empty"><span class="hs-identifier hs-var">CPSV.empty</span></a></span><span>
</span><span id="line-1062"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">daExtraPeersAPI :: PublicExtraPeersAPI (ExtraPeers ntnAddr) ntnAddr
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.P2P.html#daExtraPeersAPI"><span class="hs-identifier hs-var">P2P.daExtraPeersAPI</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PublicExtraPeersAPI (ExtraPeers ntnAddr) ntnAddr
forall peeraddr.
Ord peeraddr =&gt;
PublicExtraPeersAPI (ExtraPeers peeraddr) peeraddr
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PublicRootPeers.html#cardanoPublicRootPeersAPI"><span class="hs-identifier hs-var">Cardano.PublicRoots.cardanoPublicRootPeersAPI</span></a></span><span>
</span><span id="line-1063"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">daPeerChurnGovernor :: PeerChurnArgs
  IO
  (ExtraArguments IO)
  extraDebugState
  PeerTrustable
  (ExtraPeers ntnAddr)
  (LedgerPeersConsensusInterface IO)
  (ExtraPeerSelectionSetsWithSizes ntnAddr)
  ntnAddr
-&gt; IO Void
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.P2P.html#daPeerChurnGovernor"><span class="hs-identifier hs-var">P2P.daPeerChurnGovernor</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PeerChurnArgs
  IO
  (ExtraArguments IO)
  extraDebugState
  PeerTrustable
  (ExtraPeers ntnAddr)
  (LedgerPeersConsensusInterface IO)
  (ExtraPeerSelectionSetsWithSizes ntnAddr)
  ntnAddr
-&gt; IO Void
forall (m :: * -&gt; *) extraState extraFlags extraCounters extraPeers
       peeraddr.
(MonadDelay m, Alternative (STM m), MonadTimer m, MonadCatch m) =&gt;
PeerChurnArgs
  m
  (ExtraArguments m)
  extraState
  extraFlags
  extraPeers
  (LedgerPeersConsensusInterface m)
  extraCounters
  peeraddr
-&gt; m Void
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.PeerSelection.Churn.html#peerChurnGovernor"><span class="hs-identifier hs-var">peerChurnGovernor</span></a></span><span>
</span><span id="line-1064"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">daExtraChurnArgs :: ExtraArguments IO
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.P2P.html#daExtraChurnArgs"><span class="hs-identifier hs-var">P2P.daExtraChurnArgs</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExtraArguments IO
</span><a href="#local-6989586621681945974"><span class="hs-identifier hs-var">cardanoPeerChurnArgs</span></a></span><span>
</span><span id="line-1065"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">daOwnPeerSharing :: PeerSharing
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.P2P.html#daOwnPeerSharing"><span class="hs-identifier hs-var">P2P.daOwnPeerSharing</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PeerSharing
</span><a href="#local-6989586621681945920"><span class="hs-identifier hs-var">ncPeerSharing</span></a></span><span>
</span><span id="line-1066"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">daPeerSelectionStateToExtraCounters :: forall (muxMode :: Mode) responderCtx ntnVersionData bytes a b.
PeerSelectionState
  ExtraState
  PeerTrustable
  (ExtraPeers ntnAddr)
  ntnAddr
  (PeerConnectionHandle
     muxMode responderCtx ntnAddr ntnVersionData bytes IO a b)
-&gt; ExtraPeerSelectionSetsWithSizes ntnAddr
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.P2P.html#daPeerSelectionStateToExtraCounters"><span class="hs-identifier hs-var">P2P.daPeerSelectionStateToExtraCounters</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PeerSelectionState
  ExtraState
  PeerTrustable
  (ExtraPeers ntnAddr)
  ntnAddr
  (PeerConnectionHandle
     muxMode responderCtx ntnAddr ntnVersionData bytes IO a b)
-&gt; ExtraPeerSelectionSetsWithSizes ntnAddr
forall peeraddr extraState extraFlags peerconn.
Ord peeraddr =&gt;
PeerSelectionState
  extraState extraFlags (ExtraPeers peeraddr) peeraddr peerconn
-&gt; ExtraPeerSelectionSetsWithSizes peeraddr
forall (muxMode :: Mode) responderCtx ntnVersionData bytes a b.
PeerSelectionState
  ExtraState
  PeerTrustable
  (ExtraPeers ntnAddr)
  ntnAddr
  (PeerConnectionHandle
     muxMode responderCtx ntnAddr ntnVersionData bytes IO a b)
-&gt; ExtraPeerSelectionSetsWithSizes ntnAddr
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PeerSelection.Governor.Types.html#cardanoPeerSelectionStatetoCounters"><span class="hs-identifier hs-var">CPSV.cardanoPeerSelectionStatetoCounters</span></a></span><span>
</span><span id="line-1067"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">daPeerSelectionGovernorArgs :: forall (muxMode :: Mode) responderCtx ntnVersionData bytes a b.
PeerSelectionGovernorArgs
  ExtraState
  extraDebugState
  PeerTrustable
  (ExtraPeers ntnAddr)
  (LedgerPeersConsensusInterface IO)
  (ExtraPeerSelectionSetsWithSizes ntnAddr)
  ntnAddr
  (PeerConnectionHandle
     muxMode responderCtx ntnAddr ntnVersionData bytes IO a b)
  BootstrapPeersCriticalTimeoutError
  IO
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.P2P.html#daPeerSelectionGovernorArgs"><span class="hs-identifier hs-var">P2P.daPeerSelectionGovernorArgs</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExtraPeerSelectionActions IO
-&gt; PeerSelectionGovernorArgs
     ExtraState
     extraDebugState
     PeerTrustable
     (ExtraPeers ntnAddr)
     (LedgerPeersConsensusInterface IO)
     (ExtraPeerSelectionSetsWithSizes ntnAddr)
     ntnAddr
     (PeerConnectionHandle
        muxMode responderCtx ntnAddr ntnVersionData bytes IO a b)
     BootstrapPeersCriticalTimeoutError
     IO
forall (m :: * -&gt; *) peeraddr extraDebugState peerconn.
(MonadTimer m, Alternative (STM m), Ord peeraddr) =&gt;
ExtraPeerSelectionActions m
-&gt; PeerSelectionGovernorArgs
     ExtraState
     extraDebugState
     PeerTrustable
     (ExtraPeers peeraddr)
     (LedgerPeersConsensusInterface m)
     (ExtraPeerSelectionSetsWithSizes peeraddr)
     peeraddr
     peerconn
     BootstrapPeersCriticalTimeoutError
     m
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PeerSelection.Governor.Types.html#cardanoPeerSelectionGovernorArgs"><span class="hs-identifier hs-var">Cardano.cardanoPeerSelectionGovernorArgs</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraPeerSelectionActions IO
</span><a href="#local-6989586621681945984"><span class="hs-identifier hs-var">extraActions</span></a></span><span>
</span><span id="line-1068"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">daRequestPublicRootPeers :: Maybe
  (PeerActionsDNS ntnAddr Resolver IOException IO
   -&gt; DNSSemaphore IO
   -&gt; (Map ntnAddr PeerAdvertise -&gt; ExtraPeers ntnAddr)
   -&gt; (NumberOfPeers
       -&gt; LedgerPeersKind -&gt; IO (Maybe (Set ntnAddr, DiffTime)))
   -&gt; LedgerPeersKind
   -&gt; Int
   -&gt; IO (PublicRootPeers (ExtraPeers ntnAddr) ntnAddr, DiffTime))
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.P2P.html#daRequestPublicRootPeers"><span class="hs-identifier hs-var">P2P.daRequestPublicRootPeers</span></a></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PeerActionsDNS ntnAddr Resolver IOException IO
 -&gt; DNSSemaphore IO
 -&gt; (Map ntnAddr PeerAdvertise -&gt; ExtraPeers ntnAddr)
 -&gt; (NumberOfPeers
     -&gt; LedgerPeersKind -&gt; IO (Maybe (Set ntnAddr, DiffTime)))
 -&gt; LedgerPeersKind
 -&gt; Int
 -&gt; IO (PublicRootPeers (ExtraPeers ntnAddr) ntnAddr, DiffTime))
-&gt; Maybe
     (PeerActionsDNS ntnAddr Resolver IOException IO
      -&gt; DNSSemaphore IO
      -&gt; (Map ntnAddr PeerAdvertise -&gt; ExtraPeers ntnAddr)
      -&gt; (NumberOfPeers
          -&gt; LedgerPeersKind -&gt; IO (Maybe (Set ntnAddr, DiffTime)))
      -&gt; LedgerPeersKind
      -&gt; Int
      -&gt; IO (PublicRootPeers (ExtraPeers ntnAddr) ntnAddr, DiffTime))
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">((PeerActionsDNS ntnAddr Resolver IOException IO
  -&gt; DNSSemaphore IO
  -&gt; (Map ntnAddr PeerAdvertise -&gt; ExtraPeers ntnAddr)
  -&gt; (NumberOfPeers
      -&gt; LedgerPeersKind -&gt; IO (Maybe (Set ntnAddr, DiffTime)))
  -&gt; LedgerPeersKind
  -&gt; Int
  -&gt; IO (PublicRootPeers (ExtraPeers ntnAddr) ntnAddr, DiffTime))
 -&gt; Maybe
      (PeerActionsDNS ntnAddr Resolver IOException IO
       -&gt; DNSSemaphore IO
       -&gt; (Map ntnAddr PeerAdvertise -&gt; ExtraPeers ntnAddr)
       -&gt; (NumberOfPeers
           -&gt; LedgerPeersKind -&gt; IO (Maybe (Set ntnAddr, DiffTime)))
       -&gt; LedgerPeersKind
       -&gt; Int
       -&gt; IO (PublicRootPeers (ExtraPeers ntnAddr) ntnAddr, DiffTime)))
-&gt; (PeerActionsDNS ntnAddr Resolver IOException IO
    -&gt; DNSSemaphore IO
    -&gt; (Map ntnAddr PeerAdvertise -&gt; ExtraPeers ntnAddr)
    -&gt; (NumberOfPeers
        -&gt; LedgerPeersKind -&gt; IO (Maybe (Set ntnAddr, DiffTime)))
    -&gt; LedgerPeersKind
    -&gt; Int
    -&gt; IO (PublicRootPeers (ExtraPeers ntnAddr) ntnAddr, DiffTime))
-&gt; Maybe
     (PeerActionsDNS ntnAddr Resolver IOException IO
      -&gt; DNSSemaphore IO
      -&gt; (Map ntnAddr PeerAdvertise -&gt; ExtraPeers ntnAddr)
      -&gt; (NumberOfPeers
          -&gt; LedgerPeersKind -&gt; IO (Maybe (Set ntnAddr, DiffTime)))
      -&gt; LedgerPeersKind
      -&gt; Int
      -&gt; IO (PublicRootPeers (ExtraPeers ntnAddr) ntnAddr, DiffTime))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Tracer IO TracePublicRootPeers
-&gt; STM IO UseBootstrapPeers
-&gt; STM IO LedgerStateJudgement
-&gt; STM IO (Map RelayAccessPoint PeerAdvertise)
-&gt; PeerActionsDNS ntnAddr Resolver IOException IO
-&gt; DNSSemaphore IO
-&gt; (Map ntnAddr PeerAdvertise -&gt; ExtraPeers ntnAddr)
-&gt; (NumberOfPeers
    -&gt; LedgerPeersKind -&gt; IO (Maybe (Set ntnAddr, DiffTime)))
-&gt; LedgerPeersKind
-&gt; Int
-&gt; IO (PublicRootPeers (ExtraPeers ntnAddr) ntnAddr, DiffTime)
forall (m :: * -&gt; *) peeraddr resolver exception.
(MonadThrow m, MonadAsync m, Exception exception, Ord peeraddr) =&gt;
Tracer m TracePublicRootPeers
-&gt; STM m UseBootstrapPeers
-&gt; STM m LedgerStateJudgement
-&gt; STM m (Map RelayAccessPoint PeerAdvertise)
-&gt; PeerActionsDNS peeraddr resolver exception m
-&gt; DNSSemaphore m
-&gt; (Map peeraddr PeerAdvertise -&gt; ExtraPeers peeraddr)
-&gt; (NumberOfPeers
    -&gt; LedgerPeersKind -&gt; m (Maybe (Set peeraddr, DiffTime)))
-&gt; LedgerPeersKind
-&gt; Int
-&gt; m (CardanoPublicRootPeers peeraddr, DiffTime)
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.PeerSelection.PeerSelectionActions.html#requestPublicRootPeers"><span class="hs-identifier hs-var">Cardano.requestPublicRootPeers</span></a></span><span>
</span><span id="line-1069"></span><span>                                                       </span><span class="annot"><span class="annottext">Tracer IO TracePublicRootPeers
</span><a href="#local-6989586621681945930"><span class="hs-identifier hs-var">tracer</span></a></span><span>
</span><span id="line-1070"></span><span>                                                       </span><span class="annot"><span class="annottext">STM IO UseBootstrapPeers
</span><a href="#local-6989586621681945925"><span class="hs-identifier hs-var">daReadUseBootstrapPeers</span></a></span><span>
</span><span id="line-1071"></span><span>                                                       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LedgerPeersConsensusInterface IO -&gt; STM IO LedgerStateJudgement
forall (m :: * -&gt; *).
LedgerPeersConsensusInterface m -&gt; STM m LedgerStateJudgement
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.LedgerPeerConsensusInterface.html#getLedgerStateJudgement"><span class="hs-identifier hs-var">Cardano.getLedgerStateJudgement</span></a></span><span>
</span><span id="line-1072"></span><span>                                                         </span><span class="annot"><span class="annottext">LedgerPeersConsensusInterface IO
</span><a href="#local-6989586621681945951"><span class="hs-identifier hs-var">ledgerPeersConsensusInterface</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1073"></span><span>                                                       </span><span class="annot"><span class="annottext">STM IO (Map RelayAccessPoint PeerAdvertise)
</span><a href="#local-6989586621681945923"><span class="hs-identifier hs-var">daReadPublicRootPeers</span></a></span><span>
</span><span id="line-1074"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">daToExtraPeers :: Map ntnAddr PeerAdvertise -&gt; ExtraPeers ntnAddr
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.P2P.html#daToExtraPeers"><span class="hs-identifier hs-var">P2P.daToExtraPeers</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1075"></span><span>          </span><span class="hs-glyph">\</span><span id="local-6989586621681945989"><span class="annot"><span class="annottext">Map ntnAddr PeerAdvertise
</span><a href="#local-6989586621681945989"><span class="hs-identifier hs-var">publicRoots</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PublicRootPeers.html#ExtraPeers"><span class="hs-identifier hs-type">Cardano.PublicRoots.ExtraPeers</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1076"></span><span>              </span><span class="annot"><span class="annottext">getPublicConfigPeers :: Map ntnAddr PeerAdvertise
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PublicRootPeers.html#getPublicConfigPeers"><span class="hs-identifier hs-var">Cardano.PublicRoots.getPublicConfigPeers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map ntnAddr PeerAdvertise
</span><a href="#local-6989586621681945989"><span class="hs-identifier hs-var">publicRoots</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1077"></span><span>              </span><span class="annot"><span class="annottext">getBootstrapPeers :: Set ntnAddr
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PublicRootPeers.html#getBootstrapPeers"><span class="hs-identifier hs-var">Cardano.PublicRoots.getBootstrapPeers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set ntnAddr
forall a. Set a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#empty"><span class="hs-identifier hs-var">Set.empty</span></a></span><span>
</span><span id="line-1078"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-1079"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">daMuxForkPolicy :: ForkPolicy ntnAddr
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.P2P.html#daMuxForkPolicy"><span class="hs-identifier hs-var">P2P.daMuxForkPolicy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForkPolicy ntnAddr
</span><a href="#local-6989586621681945884"><span class="hs-identifier hs-var">nForkPolicy</span></a></span><span>
</span><span id="line-1080"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">daLocalMuxForkPolicy :: ForkPolicy ntcAddr
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.P2P.html#daLocalMuxForkPolicy"><span class="hs-identifier hs-var">P2P.daLocalMuxForkPolicy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForkPolicy ntcAddr
</span><a href="#local-6989586621681945885"><span class="hs-identifier hs-var">cForkPolicy</span></a></span><span>
</span><span id="line-1081"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-1082"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1083"></span><span>    </span><span id="local-6989586621681945959"><span class="annot"><span class="annottext">peerSelectionTargets :: PeerSelectionTargets
</span><a href="#local-6989586621681945959"><span class="hs-identifier hs-var hs-var">peerSelectionTargets</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.Governor.Types.html#PeerSelectionTargets"><span class="hs-identifier hs-type">PeerSelectionTargets</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1084"></span><span>      </span><span class="annot"><span class="annottext">targetNumberOfRootPeers :: Int
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.Governor.Types.html#targetNumberOfRootPeers"><span class="hs-identifier hs-var">targetNumberOfRootPeers</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681945886"><span class="hs-identifier hs-var">ncDeadlineTargetOfRootPeers</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1085"></span><span>      </span><span class="annot"><span class="annottext">targetNumberOfKnownPeers :: Int
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.Governor.Types.html#targetNumberOfKnownPeers"><span class="hs-identifier hs-var">targetNumberOfKnownPeers</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681945888"><span class="hs-identifier hs-var">ncDeadlineTargetOfKnownPeers</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1086"></span><span>      </span><span class="annot"><span class="annottext">targetNumberOfEstablishedPeers :: Int
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.Governor.Types.html#targetNumberOfEstablishedPeers"><span class="hs-identifier hs-var">targetNumberOfEstablishedPeers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681945890"><span class="hs-identifier hs-var">ncDeadlineTargetOfEstablishedPeers</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1087"></span><span>      </span><span class="annot"><span class="annottext">targetNumberOfActivePeers :: Int
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.Governor.Types.html#targetNumberOfActivePeers"><span class="hs-identifier hs-var">targetNumberOfActivePeers</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681945892"><span class="hs-identifier hs-var">ncDeadlineTargetOfActivePeers</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1088"></span><span>      </span><span class="annot"><span class="annottext">targetNumberOfKnownBigLedgerPeers :: Int
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.Governor.Types.html#targetNumberOfKnownBigLedgerPeers"><span class="hs-identifier hs-var">targetNumberOfKnownBigLedgerPeers</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681945894"><span class="hs-identifier hs-var">ncDeadlineTargetOfKnownBigLedgerPeers</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1089"></span><span>      </span><span class="annot"><span class="annottext">targetNumberOfEstablishedBigLedgerPeers :: Int
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.Governor.Types.html#targetNumberOfEstablishedBigLedgerPeers"><span class="hs-identifier hs-var">targetNumberOfEstablishedBigLedgerPeers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681945896"><span class="hs-identifier hs-var">ncDeadlineTargetOfEstablishedBigLedgerPeers</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1090"></span><span>      </span><span class="annot"><span class="annottext">targetNumberOfActiveBigLedgerPeers :: Int
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.Governor.Types.html#targetNumberOfActiveBigLedgerPeers"><span class="hs-identifier hs-var">targetNumberOfActiveBigLedgerPeers</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681945898"><span class="hs-identifier hs-var">ncDeadlineTargetOfActiveBigLedgerPeers</span></a></span><span>
</span><span id="line-1091"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1092"></span><span>
</span><span id="line-1093"></span><span>    </span><span id="local-6989586621681946004"><span class="annot"><span class="annottext">genesisSelectionTargets :: PeerSelectionTargets
</span><a href="#local-6989586621681946004"><span class="hs-identifier hs-var hs-var">genesisSelectionTargets</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.Governor.Types.html#PeerSelectionTargets"><span class="hs-identifier hs-type">PeerSelectionTargets</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1094"></span><span>      </span><span class="annot"><span class="annottext">targetNumberOfRootPeers :: Int
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.Governor.Types.html#targetNumberOfRootPeers"><span class="hs-identifier hs-var">targetNumberOfRootPeers</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681945900"><span class="hs-identifier hs-var">ncSyncTargetOfRootPeers</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1095"></span><span>      </span><span class="annot"><span class="annottext">targetNumberOfKnownPeers :: Int
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.Governor.Types.html#targetNumberOfKnownPeers"><span class="hs-identifier hs-var">targetNumberOfKnownPeers</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681945902"><span class="hs-identifier hs-var">ncSyncTargetOfKnownPeers</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1096"></span><span>      </span><span class="annot"><span class="annottext">targetNumberOfEstablishedPeers :: Int
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.Governor.Types.html#targetNumberOfEstablishedPeers"><span class="hs-identifier hs-var">targetNumberOfEstablishedPeers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681945904"><span class="hs-identifier hs-var">ncSyncTargetOfEstablishedPeers</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1097"></span><span>      </span><span class="annot"><span class="annottext">targetNumberOfActivePeers :: Int
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.Governor.Types.html#targetNumberOfActivePeers"><span class="hs-identifier hs-var">targetNumberOfActivePeers</span></a></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681945906"><span class="hs-identifier hs-var">ncSyncTargetOfActivePeers</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1098"></span><span>      </span><span class="annot"><span class="annottext">targetNumberOfKnownBigLedgerPeers :: Int
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.Governor.Types.html#targetNumberOfKnownBigLedgerPeers"><span class="hs-identifier hs-var">targetNumberOfKnownBigLedgerPeers</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681945908"><span class="hs-identifier hs-var">ncSyncTargetOfKnownBigLedgerPeers</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1099"></span><span>      </span><span class="annot"><span class="annottext">targetNumberOfEstablishedBigLedgerPeers :: Int
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.Governor.Types.html#targetNumberOfEstablishedBigLedgerPeers"><span class="hs-identifier hs-var">targetNumberOfEstablishedBigLedgerPeers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681945910"><span class="hs-identifier hs-var">ncSyncTargetOfEstablishedBigLedgerPeers</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1100"></span><span>      </span><span class="annot"><span class="annottext">targetNumberOfActiveBigLedgerPeers :: Int
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.Governor.Types.html#targetNumberOfActiveBigLedgerPeers"><span class="hs-identifier hs-var">targetNumberOfActiveBigLedgerPeers</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681945912"><span class="hs-identifier hs-var">ncSyncTargetOfActiveBigLedgerPeers</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1101"></span><span>
</span><span id="line-1102"></span><span>    </span><span id="local-6989586621681945974"><span class="annot"><span class="annottext">cardanoPeerChurnArgs :: ExtraArguments IO
</span><a href="#local-6989586621681945974"><span class="hs-identifier hs-var hs-var">cardanoPeerChurnArgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1103"></span><span>      </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PeerSelection.Churn.ExtraArguments.html#ExtraArguments"><span class="hs-identifier hs-type">Cardano.Churn.ExtraArguments</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1104"></span><span>        </span><span class="annot"><span class="annottext">modeVar :: StrictTVar IO ChurnMode
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PeerSelection.Churn.ExtraArguments.html#modeVar"><span class="hs-identifier hs-var">Cardano.Churn.modeVar</span></a></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictTVar IO ChurnMode
</span><a href="#local-6989586621681945927"><span class="hs-identifier hs-var">churnModeVar</span></a></span><span>
</span><span id="line-1105"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">readFetchMode :: STM IO FetchMode
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PeerSelection.Churn.ExtraArguments.html#readFetchMode"><span class="hs-identifier hs-var">Cardano.Churn.readFetchMode</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">STM IO FetchMode
</span><a href="#local-6989586621681945932"><span class="hs-identifier hs-var">getFetchMode</span></a></span><span>
</span><span id="line-1106"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">genesisPeerTargets :: PeerSelectionTargets
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PeerSelection.Churn.ExtraArguments.html#genesisPeerTargets"><span class="hs-identifier hs-var">Cardano.Churn.genesisPeerTargets</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PeerSelectionTargets
</span><a href="#local-6989586621681946004"><span class="hs-identifier hs-var">genesisSelectionTargets</span></a></span><span>
</span><span id="line-1107"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">readUseBootstrap :: STM IO UseBootstrapPeers
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PeerSelection.Churn.ExtraArguments.html#readUseBootstrap"><span class="hs-identifier hs-var">Cardano.Churn.readUseBootstrap</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">STM IO UseBootstrapPeers
</span><a href="#local-6989586621681945925"><span class="hs-identifier hs-var">daReadUseBootstrapPeers</span></a></span><span>
</span><span id="line-1108"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">consensusMode :: ConsensusMode
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PeerSelection.Churn.ExtraArguments.html#consensusMode"><span class="hs-identifier hs-var">Cardano.Churn.consensusMode</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConsensusMode
</span><a href="#local-6989586621681945921"><span class="hs-identifier hs-var">ncConsensusMode</span></a></span><span>
</span><span id="line-1109"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-1110"></span><span>
</span><span id="line-1111"></span><span>    </span><span class="annot"><a href="#local-6989586621681945984"><span class="hs-identifier hs-type">extraActions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PeerSelection.Governor.PeerSelectionActions.html#ExtraPeerSelectionActions"><span class="hs-identifier hs-type">Cardano.PeerSelection.ExtraPeerSelectionActions</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span>
</span><span id="line-1112"></span><span>    </span><span id="local-6989586621681945984"><span class="annot"><span class="annottext">extraActions :: ExtraPeerSelectionActions IO
</span><a href="#local-6989586621681945984"><span class="hs-identifier hs-var hs-var">extraActions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PeerSelection.Governor.PeerSelectionActions.html#ExtraPeerSelectionActions"><span class="hs-identifier hs-type">Cardano.PeerSelection.ExtraPeerSelectionActions</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1113"></span><span>        </span><span class="annot"><span class="annottext">genesisPeerTargets :: PeerSelectionTargets
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PeerSelection.Governor.PeerSelectionActions.html#genesisPeerTargets"><span class="hs-identifier hs-var">Cardano.PeerSelection.genesisPeerTargets</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PeerSelectionTargets
</span><a href="#local-6989586621681946004"><span class="hs-identifier hs-var">genesisSelectionTargets</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1114"></span><span>        </span><span class="annot"><span class="annottext">readUseBootstrapPeers :: STM IO UseBootstrapPeers
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Cardano.Network.PeerSelection.Governor.PeerSelectionActions.html#readUseBootstrapPeers"><span class="hs-identifier hs-var">Cardano.PeerSelection.readUseBootstrapPeers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">STM IO UseBootstrapPeers
</span><a href="#local-6989586621681945925"><span class="hs-identifier hs-var">daReadUseBootstrapPeers</span></a></span><span>
</span><span id="line-1115"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-1116"></span><span>
</span><span id="line-1117"></span><span id="local-6989586621681944614"><span id="local-6989586621681944615"><span id="local-6989586621681944616"><span id="local-6989586621681944617"><span id="local-6989586621681944618"><span id="local-6989586621681944619"><span id="local-6989586621681944620"><span id="local-6989586621681944621"><span id="local-6989586621681944622"><span id="local-6989586621681944623"><span class="annot"><a href="Cardano.Node.Run.html#mkNonP2PArguments"><span class="hs-identifier hs-type">mkNonP2PArguments</span></a></span><span>
</span><span id="line-1118"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-framework-0.18.0.2-e5e675f5f8bd9f2a1e99040ff85ace8bb30006cb1118a4f0531fde62ebeff5fc/share/doc/html/src/Ouroboros.Network.Subscription.Ip.html#IPSubscriptionTarget"><span class="hs-identifier hs-type">IPSubscriptionTarget</span></a></span><span>
</span><span id="line-1119"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-framework-0.18.0.2-e5e675f5f8bd9f2a1e99040ff85ace8bb30006cb1118a4f0531fde62ebeff5fc/share/doc/html/src/Ouroboros.Network.Subscription.Dns.html#DnsSubscriptionTarget"><span class="hs-identifier hs-type">DnsSubscriptionTarget</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1120"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.html#ArgumentsExtra"><span class="hs-identifier hs-type">Diffusion.ArgumentsExtra</span></a></span><span>
</span><span id="line-1121"></span><span>      </span><span class="hs-special">'</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.html#NonP2P"><span class="hs-identifier hs-type">Diffusion.NonP2P</span></a></span><span>
</span><span id="line-1122"></span><span>      </span><span class="annot"><a href="#local-6989586621681944614"><span class="hs-identifier hs-type">extraArgs</span></a></span><span>
</span><span id="line-1123"></span><span>      </span><span class="annot"><a href="#local-6989586621681944615"><span class="hs-identifier hs-type">extraState</span></a></span><span>
</span><span id="line-1124"></span><span>      </span><span class="annot"><a href="#local-6989586621681944616"><span class="hs-identifier hs-type">extraDebugState</span></a></span><span>
</span><span id="line-1125"></span><span>      </span><span class="annot"><a href="#local-6989586621681944617"><span class="hs-identifier hs-type">extraAPI</span></a></span><span>
</span><span id="line-1126"></span><span>      </span><span class="annot"><a href="#local-6989586621681944618"><span class="hs-identifier hs-type">extraPeers</span></a></span><span>
</span><span id="line-1127"></span><span>      </span><span class="annot"><a href="#local-6989586621681944619"><span class="hs-identifier hs-type">extraFlags</span></a></span><span>
</span><span id="line-1128"></span><span>      </span><span class="annot"><a href="#local-6989586621681944620"><span class="hs-identifier hs-type">extraChurnArgs</span></a></span><span>
</span><span id="line-1129"></span><span>      </span><span class="annot"><a href="#local-6989586621681944621"><span class="hs-identifier hs-type">extraCounters</span></a></span><span>
</span><span id="line-1130"></span><span>      </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.Governor.Types.html#BootstrapPeersCriticalTimeoutError"><span class="hs-identifier hs-type">BootstrapPeersCriticalTimeoutError</span></a></span><span>
</span><span id="line-1131"></span><span>      </span><span class="annot"><a href="#local-6989586621681944622"><span class="hs-identifier hs-type">ntnAddr</span></a></span><span>
</span><span id="line-1132"></span><span>      </span><span class="annot"><a href="#local-6989586621681944623"><span class="hs-identifier hs-type">ntcAddr</span></a></span><span>
</span><span id="line-1133"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Resolver</span></span><span>
</span><span id="line-1134"></span><span>      </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.Exception.html#IOException"><span class="hs-identifier hs-type">IOException</span></a></span><span>
</span><span id="line-1135"></span><span>      </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-1136"></span><span id="mkNonP2PArguments"><span class="annot"><span class="annottext">mkNonP2PArguments :: forall extraArgs extraState extraDebugState extraAPI extraPeers
       extraFlags extraChurnArgs extraCounters ntnAddr ntcAddr.
IPSubscriptionTarget
-&gt; [DnsSubscriptionTarget]
-&gt; ArgumentsExtra
     'NonP2P
     extraArgs
     extraState
     extraDebugState
     extraAPI
     extraPeers
     extraFlags
     extraChurnArgs
     extraCounters
     BootstrapPeersCriticalTimeoutError
     ntnAddr
     ntcAddr
     Resolver
     IOException
     IO
</span><a href="Cardano.Node.Run.html#mkNonP2PArguments"><span class="hs-identifier hs-var hs-var">mkNonP2PArguments</span></a></span></span><span> </span><span id="local-6989586621681946014"><span class="annot"><span class="annottext">IPSubscriptionTarget
</span><a href="#local-6989586621681946014"><span class="hs-identifier hs-var">daIpProducers</span></a></span></span><span> </span><span id="local-6989586621681946015"><span class="annot"><span class="annottext">[DnsSubscriptionTarget]
</span><a href="#local-6989586621681946015"><span class="hs-identifier hs-var">daDnsProducers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1137"></span><span>    </span><span class="annot"><span class="annottext">ArgumentsExtra
-&gt; ArgumentsExtra
     'NonP2P
     extraArgs
     extraState
     extraDebugState
     extraAPI
     extraPeers
     extraFlags
     extraChurnArgs
     extraCounters
     BootstrapPeersCriticalTimeoutError
     ntnAddr
     ntcAddr
     Resolver
     IOException
     IO
forall extraArgs extraState extraDebugState extraFlags extraPeers
       extraAPI extraChurnArgs extraCounters exception ntnAddr ntcAddr
       resolver resolverError (m :: * -&gt; *).
ArgumentsExtra
-&gt; ArgumentsExtra
     'NonP2P
     extraArgs
     extraState
     extraDebugState
     extraFlags
     extraPeers
     extraAPI
     extraChurnArgs
     extraCounters
     exception
     ntnAddr
     ntcAddr
     resolver
     resolverError
     m
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.html#NonP2PArguments"><span class="hs-identifier hs-var">Diffusion.NonP2PArguments</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.Diffusion.NonP2P.html#ArgumentsExtra"><span class="hs-identifier hs-type">NonP2P.ArgumentsExtra</span></a></span><span>
</span><span id="line-1138"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">IPSubscriptionTarget
daIpProducers :: IPSubscriptionTarget
daIpProducers :: IPSubscriptionTarget
</span><a href="#local-6989586621681946014"><span class="hs-identifier hs-var hs-var">NonP2P.daIpProducers</span></a></span><span>
</span><span id="line-1139"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[DnsSubscriptionTarget]
daDnsProducers :: [DnsSubscriptionTarget]
daDnsProducers :: [DnsSubscriptionTarget]
</span><a href="#local-6989586621681946015"><span class="hs-identifier hs-var hs-var">NonP2P.daDnsProducers</span></a></span><span>
</span><span id="line-1140"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-1141"></span><span>
</span><span id="line-1142"></span><span class="hs-comment">-- | TODO: Only needed for enabling P2P switch</span><span>
</span><span id="line-1143"></span><span class="hs-comment">--</span><span>
</span><span id="line-1144"></span><span class="annot"><a href="Cardano.Node.Run.html#producerAddressesNonP2P"><span class="hs-identifier hs-type">producerAddressesNonP2P</span></a></span><span>
</span><span id="line-1145"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Topology.html#NetworkTopology"><span class="hs-identifier hs-type">TopologyNonP2P.NetworkTopology</span></a></span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Topology.html#RemoteAddress"><span class="hs-identifier hs-type">TopologyNonP2P.RemoteAddress</span></a></span><span>
</span><span id="line-1146"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Cardano.Node.Configuration.NodeAddress.html#NodeIPAddress"><span class="hs-identifier hs-type">NodeIPAddress</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1147"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Node.Configuration.NodeAddress.html#NodeDnsAddress"><span class="hs-identifier hs-type">NodeDnsAddress</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1148"></span><span id="producerAddressesNonP2P"><span class="annot"><span class="annottext">producerAddressesNonP2P :: NetworkTopology RemoteAddress
-&gt; ([NodeIPAddress], [(NodeDnsAddress, Int)])
</span><a href="Cardano.Node.Run.html#producerAddressesNonP2P"><span class="hs-identifier hs-var hs-var">producerAddressesNonP2P</span></a></span></span><span> </span><span id="local-6989586621681946020"><span class="annot"><span class="annottext">NetworkTopology RemoteAddress
</span><a href="#local-6989586621681946020"><span class="hs-identifier hs-var">nt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1149"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NetworkTopology RemoteAddress
</span><a href="#local-6989586621681946020"><span class="hs-identifier hs-var">nt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1150"></span><span>    </span><span class="annot"><a href="Cardano.Node.Configuration.Topology.html#RealNodeTopology"><span class="hs-identifier hs-type">TopologyNonP2P.RealNodeTopology</span></a></span><span> </span><span id="local-6989586621681946022"><span class="annot"><span class="annottext">[RemoteAddress]
</span><a href="#local-6989586621681946022"><span class="hs-identifier hs-var">producers'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1151"></span><span>        </span><span class="annot"><span class="annottext">[Either NodeIPAddress (NodeDnsAddress, Int)]
-&gt; ([NodeIPAddress], [(NodeDnsAddress, Int)])
forall a b. [Either a b] -&gt; ([a], [b])
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#partitionEithers"><span class="hs-identifier hs-var">partitionEithers</span></a></span><span>
</span><span id="line-1152"></span><span>      </span><span class="annot"><span class="annottext">([Either NodeIPAddress (NodeDnsAddress, Int)]
 -&gt; ([NodeIPAddress], [(NodeDnsAddress, Int)]))
-&gt; ([RemoteAddress]
    -&gt; [Either NodeIPAddress (NodeDnsAddress, Int)])
-&gt; [RemoteAddress]
-&gt; ([NodeIPAddress], [(NodeDnsAddress, Int)])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(RemoteAddress
 -&gt; Maybe (Either NodeIPAddress (NodeDnsAddress, Int)))
-&gt; [RemoteAddress] -&gt; [Either NodeIPAddress (NodeDnsAddress, Int)]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Maybe.html#mapMaybe"><span class="hs-identifier hs-var">mapMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteAddress -&gt; Maybe (Either NodeIPAddress (NodeDnsAddress, Int))
</span><a href="Cardano.Node.Configuration.Topology.html#remoteAddressToNodeAddress"><span class="hs-identifier hs-var">TopologyNonP2P.remoteAddressToNodeAddress</span></a></span><span>
</span><span id="line-1153"></span><span>      </span><span class="annot"><span class="annottext">([RemoteAddress] -&gt; ([NodeIPAddress], [(NodeDnsAddress, Int)]))
-&gt; [RemoteAddress] -&gt; ([NodeIPAddress], [(NodeDnsAddress, Int)])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[RemoteAddress]
</span><a href="#local-6989586621681946022"><span class="hs-identifier hs-var">producers'</span></a></span><span>
</span><span id="line-1154"></span><span>    </span><span class="annot"><a href="Cardano.Node.Configuration.Topology.html#MockNodeTopology"><span class="hs-identifier hs-type">TopologyNonP2P.MockNodeTopology</span></a></span><span> </span><span id="local-6989586621681946025"><span class="annot"><span class="annottext">[NodeSetup RemoteAddress]
</span><a href="#local-6989586621681946025"><span class="hs-identifier hs-var">nodeSetup</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1155"></span><span>        </span><span class="annot"><span class="annottext">[Either NodeIPAddress (NodeDnsAddress, Int)]
-&gt; ([NodeIPAddress], [(NodeDnsAddress, Int)])
forall a b. [Either a b] -&gt; ([a], [b])
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#partitionEithers"><span class="hs-identifier hs-var">partitionEithers</span></a></span><span>
</span><span id="line-1156"></span><span>      </span><span class="annot"><span class="annottext">([Either NodeIPAddress (NodeDnsAddress, Int)]
 -&gt; ([NodeIPAddress], [(NodeDnsAddress, Int)]))
-&gt; ([NodeSetup RemoteAddress]
    -&gt; [Either NodeIPAddress (NodeDnsAddress, Int)])
-&gt; [NodeSetup RemoteAddress]
-&gt; ([NodeIPAddress], [(NodeDnsAddress, Int)])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(NodeSetup RemoteAddress
 -&gt; [Either NodeIPAddress (NodeDnsAddress, Int)])
-&gt; [NodeSetup RemoteAddress]
-&gt; [Either NodeIPAddress (NodeDnsAddress, Int)]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#concatMap"><span class="hs-identifier hs-var">concatMap</span></a></span><span>
</span><span id="line-1157"></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">(RemoteAddress
 -&gt; Maybe (Either NodeIPAddress (NodeDnsAddress, Int)))
-&gt; [RemoteAddress] -&gt; [Either NodeIPAddress (NodeDnsAddress, Int)]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Maybe.html#mapMaybe"><span class="hs-identifier hs-var">mapMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteAddress -&gt; Maybe (Either NodeIPAddress (NodeDnsAddress, Int))
</span><a href="Cardano.Node.Configuration.Topology.html#remoteAddressToNodeAddress"><span class="hs-identifier hs-var">TopologyNonP2P.remoteAddressToNodeAddress</span></a></span><span>
</span><span id="line-1158"></span><span>          </span><span class="annot"><span class="annottext">([RemoteAddress] -&gt; [Either NodeIPAddress (NodeDnsAddress, Int)])
-&gt; (NodeSetup RemoteAddress -&gt; [RemoteAddress])
-&gt; NodeSetup RemoteAddress
-&gt; [Either NodeIPAddress (NodeDnsAddress, Int)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">NodeSetup RemoteAddress -&gt; [RemoteAddress]
forall adr. NodeSetup adr -&gt; [adr]
</span><a href="Cardano.Node.Configuration.Topology.html#producers"><span class="hs-identifier hs-var">TopologyNonP2P.producers</span></a></span><span>
</span><span id="line-1159"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-1160"></span><span>      </span><span class="annot"><span class="annottext">([NodeSetup RemoteAddress]
 -&gt; ([NodeIPAddress], [(NodeDnsAddress, Int)]))
-&gt; [NodeSetup RemoteAddress]
-&gt; ([NodeIPAddress], [(NodeDnsAddress, Int)])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[NodeSetup RemoteAddress]
</span><a href="#local-6989586621681946025"><span class="hs-identifier hs-var">nodeSetup</span></a></span><span>
</span><span id="line-1161"></span><span>
</span><span id="line-1162"></span><span class="annot"><a href="Cardano.Node.Run.html#producerAddresses"><span class="hs-identifier hs-type">producerAddresses</span></a></span><span>
</span><span id="line-1163"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.TopologyP2P.html#NetworkTopology"><span class="hs-identifier hs-type">NetworkTopology</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.RelayAccessPoint.html#RelayAccessPoint"><span class="hs-identifier hs-type">RelayAccessPoint</span></a></span><span>
</span><span id="line-1164"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.State.LocalRootPeers.html#HotValency"><span class="hs-identifier hs-type">HotValency</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.State.LocalRootPeers.html#WarmValency"><span class="hs-identifier hs-type">WarmValency</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.RelayAccessPoint.html#RelayAccessPoint"><span class="hs-identifier hs-type">RelayAccessPoint</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.State.LocalRootPeers.html#LocalRootConfig"><span class="hs-identifier hs-type">LocalRootConfig</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Cardano.Network.PeerSelection.PeerTrustable.html#PeerTrustable"><span class="hs-identifier hs-type">PeerTrustable</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1165"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.RelayAccessPoint.html#RelayAccessPoint"><span class="hs-identifier hs-type">RelayAccessPoint</span></a></span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-api-0.14.1.0-98fc447eaa24d3d377fce758ddb0dfe3609f8a76f7d53da5a68e8f95b6312dc5/share/doc/html/src/Ouroboros.Network.PeerSelection.PeerAdvertise.html#PeerAdvertise"><span class="hs-identifier hs-type">PeerAdvertise</span></a></span><span>
</span><span id="line-1166"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-1167"></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ local roots &amp; public roots</span></span><span>
</span><span id="line-1168"></span><span id="producerAddresses"><span class="annot"><span class="annottext">producerAddresses :: NetworkTopology RelayAccessPoint
-&gt; ([(HotValency, WarmValency,
      Map RelayAccessPoint (LocalRootConfig PeerTrustable))],
    Map RelayAccessPoint PeerAdvertise)
</span><a href="Cardano.Node.Run.html#producerAddresses"><span class="hs-identifier hs-var hs-var">producerAddresses</span></a></span></span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.TopologyP2P.html#RealNodeTopology"><span class="hs-identifier hs-type">RealNodeTopology</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681946028"><span class="annot"><span class="annottext">LocalRootPeersGroups RelayAccessPoint
ntLocalRootPeersGroups :: LocalRootPeersGroups RelayAccessPoint
ntLocalRootPeersGroups :: forall adr. NetworkTopology adr -&gt; LocalRootPeersGroups adr
</span><a href="#local-6989586621681946028"><span class="hs-identifier hs-var hs-var">ntLocalRootPeersGroups</span></a></span></span><span>
</span><span id="line-1169"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681946030"><span class="annot"><span class="annottext">[PublicRootPeers RelayAccessPoint]
ntPublicRootPeers :: [PublicRootPeers RelayAccessPoint]
ntPublicRootPeers :: forall adr. NetworkTopology adr -&gt; [PublicRootPeers adr]
</span><a href="#local-6989586621681946030"><span class="hs-identifier hs-var hs-var">ntPublicRootPeers</span></a></span></span><span>
</span><span id="line-1170"></span><span>                                   </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1171"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">(LocalRootPeersGroup RelayAccessPoint
 -&gt; (HotValency, WarmValency,
     Map RelayAccessPoint (LocalRootConfig PeerTrustable)))
-&gt; [LocalRootPeersGroup RelayAccessPoint]
-&gt; [(HotValency, WarmValency,
     Map RelayAccessPoint (LocalRootConfig PeerTrustable))]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681946032"><span class="annot"><span class="annottext">LocalRootPeersGroup RelayAccessPoint
</span><a href="#local-6989586621681946032"><span class="hs-identifier hs-var">lrp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">LocalRootPeersGroup RelayAccessPoint -&gt; HotValency
forall adr. LocalRootPeersGroup adr -&gt; HotValency
</span><a href="Cardano.Node.Configuration.TopologyP2P.html#hotValency"><span class="hs-identifier hs-var">hotValency</span></a></span><span> </span><span class="annot"><span class="annottext">LocalRootPeersGroup RelayAccessPoint
</span><a href="#local-6989586621681946032"><span class="hs-identifier hs-var">lrp</span></a></span><span>
</span><span id="line-1172"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LocalRootPeersGroup RelayAccessPoint -&gt; WarmValency
forall adr. LocalRootPeersGroup adr -&gt; WarmValency
</span><a href="Cardano.Node.Configuration.TopologyP2P.html#warmValency"><span class="hs-identifier hs-var">warmValency</span></a></span><span> </span><span class="annot"><span class="annottext">LocalRootPeersGroup RelayAccessPoint
</span><a href="#local-6989586621681946032"><span class="hs-identifier hs-var">lrp</span></a></span><span>
</span><span id="line-1173"></span><span>                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(RelayAccessPoint, LocalRootConfig PeerTrustable)]
-&gt; Map RelayAccessPoint (LocalRootConfig PeerTrustable)
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Strict.Internal.html#fromList"><span class="hs-identifier hs-var">Map.fromList</span></a></span><span>
</span><span id="line-1174"></span><span>                 </span><span class="annot"><span class="annottext">([(RelayAccessPoint, LocalRootConfig PeerTrustable)]
 -&gt; Map RelayAccessPoint (LocalRootConfig PeerTrustable))
-&gt; (RootConfig RelayAccessPoint
    -&gt; [(RelayAccessPoint, LocalRootConfig PeerTrustable)])
-&gt; RootConfig RelayAccessPoint
-&gt; Map RelayAccessPoint (LocalRootConfig PeerTrustable)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">((RelayAccessPoint, PeerAdvertise)
 -&gt; (RelayAccessPoint, LocalRootConfig PeerTrustable))
-&gt; [(RelayAccessPoint, PeerAdvertise)]
-&gt; [(RelayAccessPoint, LocalRootConfig PeerTrustable)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621681946036"><span class="annot"><span class="annottext">RelayAccessPoint
</span><a href="#local-6989586621681946036"><span class="hs-identifier hs-var">addr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681946037"><span class="annot"><span class="annottext">PeerAdvertise
</span><a href="#local-6989586621681946037"><span class="hs-identifier hs-var">peerAdvertise</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1175"></span><span>                         </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">RelayAccessPoint
</span><a href="#local-6989586621681946036"><span class="hs-identifier hs-var">addr</span></a></span><span>
</span><span id="line-1176"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.State.LocalRootPeers.html#LocalRootConfig"><span class="hs-identifier hs-type">LocalRootConfig</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-1177"></span><span>                             </span><span class="annot"><span class="annottext">diffusionMode :: DiffusionMode
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.State.LocalRootPeers.html#diffusionMode"><span class="hs-identifier hs-var">diffusionMode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalRootPeersGroup RelayAccessPoint -&gt; DiffusionMode
forall adr. LocalRootPeersGroup adr -&gt; DiffusionMode
</span><a href="Cardano.Node.Configuration.TopologyP2P.html#rootDiffusionMode"><span class="hs-identifier hs-var">rootDiffusionMode</span></a></span><span> </span><span class="annot"><span class="annottext">LocalRootPeersGroup RelayAccessPoint
</span><a href="#local-6989586621681946032"><span class="hs-identifier hs-var">lrp</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1178"></span><span>                             </span><span class="annot"><span class="annottext">PeerAdvertise
peerAdvertise :: PeerAdvertise
peerAdvertise :: PeerAdvertise
</span><a href="#local-6989586621681946037"><span class="hs-identifier hs-var hs-var">peerAdvertise</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1179"></span><span>                             </span><span class="annot"><span class="annottext">extraFlags :: PeerTrustable
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.6/ouroboros-network-0.21.3.0-c50c2a0f376d3aecb17f22ea21be408de38af3ca770363a762c82275eb44d59a/share/doc/html/src/Ouroboros.Network.PeerSelection.State.LocalRootPeers.html#extraFlags"><span class="hs-identifier hs-var">extraFlags</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocalRootPeersGroup RelayAccessPoint -&gt; PeerTrustable
forall adr. LocalRootPeersGroup adr -&gt; PeerTrustable
</span><a href="Cardano.Node.Configuration.TopologyP2P.html#trustable"><span class="hs-identifier hs-var">trustable</span></a></span><span> </span><span class="annot"><span class="annottext">LocalRootPeersGroup RelayAccessPoint
</span><a href="#local-6989586621681946032"><span class="hs-identifier hs-var">lrp</span></a></span><span>
</span><span id="line-1180"></span><span>                           </span><span class="hs-special">}</span><span>
</span><span id="line-1181"></span><span>                         </span><span class="hs-special">)</span><span>
</span><span id="line-1182"></span><span>                       </span><span class="hs-special">)</span><span>
</span><span id="line-1183"></span><span>                 </span><span class="annot"><span class="annottext">([(RelayAccessPoint, PeerAdvertise)]
 -&gt; [(RelayAccessPoint, LocalRootConfig PeerTrustable)])
-&gt; (RootConfig RelayAccessPoint
    -&gt; [(RelayAccessPoint, PeerAdvertise)])
-&gt; RootConfig RelayAccessPoint
-&gt; [(RelayAccessPoint, LocalRootConfig PeerTrustable)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">RootConfig RelayAccessPoint -&gt; [(RelayAccessPoint, PeerAdvertise)]
forall adr. RootConfig adr -&gt; [(adr, PeerAdvertise)]
</span><a href="Cardano.Node.Configuration.TopologyP2P.html#rootConfigToRelayAccessPoint"><span class="hs-identifier hs-var">rootConfigToRelayAccessPoint</span></a></span><span>
</span><span id="line-1184"></span><span>                 </span><span class="annot"><span class="annottext">(RootConfig RelayAccessPoint
 -&gt; Map RelayAccessPoint (LocalRootConfig PeerTrustable))
-&gt; RootConfig RelayAccessPoint
-&gt; Map RelayAccessPoint (LocalRootConfig PeerTrustable)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LocalRootPeersGroup RelayAccessPoint -&gt; RootConfig RelayAccessPoint
forall adr. LocalRootPeersGroup adr -&gt; RootConfig adr
</span><a href="Cardano.Node.Configuration.TopologyP2P.html#localRoots"><span class="hs-identifier hs-var">localRoots</span></a></span><span> </span><span class="annot"><span class="annottext">LocalRootPeersGroup RelayAccessPoint
</span><a href="#local-6989586621681946032"><span class="hs-identifier hs-var">lrp</span></a></span><span>
</span><span id="line-1185"></span><span>                 </span><span class="hs-special">)</span><span>
</span><span id="line-1186"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-1187"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocalRootPeersGroups RelayAccessPoint
-&gt; [LocalRootPeersGroup RelayAccessPoint]
forall adr. LocalRootPeersGroups adr -&gt; [LocalRootPeersGroup adr]
</span><a href="Cardano.Node.Configuration.TopologyP2P.html#groups"><span class="hs-identifier hs-var">groups</span></a></span><span> </span><span class="annot"><span class="annottext">LocalRootPeersGroups RelayAccessPoint
</span><a href="#local-6989586621681946028"><span class="hs-identifier hs-var">ntLocalRootPeersGroups</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1188"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(PublicRootPeers RelayAccessPoint
 -&gt; Map RelayAccessPoint PeerAdvertise)
-&gt; [PublicRootPeers RelayAccessPoint]
-&gt; Map RelayAccessPoint PeerAdvertise
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; [a] -&gt; m
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#foldMap"><span class="hs-identifier hs-var">foldMap</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">[(RelayAccessPoint, PeerAdvertise)]
-&gt; Map RelayAccessPoint PeerAdvertise
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Strict.Internal.html#fromList"><span class="hs-identifier hs-var">Map.fromList</span></a></span><span>
</span><span id="line-1189"></span><span>            </span><span class="annot"><span class="annottext">([(RelayAccessPoint, PeerAdvertise)]
 -&gt; Map RelayAccessPoint PeerAdvertise)
-&gt; (PublicRootPeers RelayAccessPoint
    -&gt; [(RelayAccessPoint, PeerAdvertise)])
-&gt; PublicRootPeers RelayAccessPoint
-&gt; Map RelayAccessPoint PeerAdvertise
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">RootConfig RelayAccessPoint -&gt; [(RelayAccessPoint, PeerAdvertise)]
forall adr. RootConfig adr -&gt; [(adr, PeerAdvertise)]
</span><a href="Cardano.Node.Configuration.TopologyP2P.html#rootConfigToRelayAccessPoint"><span class="hs-identifier hs-var">rootConfigToRelayAccessPoint</span></a></span><span>
</span><span id="line-1190"></span><span>            </span><span class="annot"><span class="annottext">(RootConfig RelayAccessPoint
 -&gt; [(RelayAccessPoint, PeerAdvertise)])
-&gt; (PublicRootPeers RelayAccessPoint
    -&gt; RootConfig RelayAccessPoint)
-&gt; PublicRootPeers RelayAccessPoint
-&gt; [(RelayAccessPoint, PeerAdvertise)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">PublicRootPeers RelayAccessPoint -&gt; RootConfig RelayAccessPoint
forall adr. PublicRootPeers adr -&gt; RootConfig adr
</span><a href="Cardano.Node.Configuration.TopologyP2P.html#publicRoots"><span class="hs-identifier hs-var">publicRoots</span></a></span><span>
</span><span id="line-1191"></span><span>            </span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[PublicRootPeers RelayAccessPoint]
</span><a href="#local-6989586621681946030"><span class="hs-identifier hs-var">ntPublicRootPeers</span></a></span><span>
</span><span id="line-1192"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-1193"></span></pre></body></html>