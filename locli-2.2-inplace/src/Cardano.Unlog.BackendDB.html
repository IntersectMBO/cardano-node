<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span>
</span><span id="line-2"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Cardano.Unlog.BackendDB</span><span>
</span><span id="line-3"></span><span>       </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#prepareDB"><span class="hs-identifier">prepareDB</span></a></span><span>
</span><span id="line-4"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#runLiftLogObjectsDB"><span class="hs-identifier">runLiftLogObjectsDB</span></a></span><span>
</span><span id="line-5"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#LoadFromDB"><span class="hs-identifier">LoadFromDB</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-6"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#LoadLogObjects"><span class="hs-identifier">LoadLogObjects</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-7"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#LoadSummaryOnly"><span class="hs-identifier">LoadSummaryOnly</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span>       </span><span class="hs-comment">-- specific SQLite queries or statements</span><span>
</span><span id="line-10"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#getSummary"><span class="hs-identifier">getSummary</span></a></span><span>
</span><span id="line-11"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#getTraceFreqs"><span class="hs-identifier">getTraceFreqs</span></a></span><span>
</span><span id="line-12"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#sqlGetEvent"><span class="hs-identifier">sqlGetEvent</span></a></span><span>
</span><span id="line-13"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#sqlGetTxns"><span class="hs-identifier">sqlGetTxns</span></a></span><span>
</span><span id="line-14"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#sqlGetResource"><span class="hs-identifier">sqlGetResource</span></a></span><span>
</span><span id="line-15"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#sqlGetSlot"><span class="hs-identifier">sqlGetSlot</span></a></span><span>
</span><span id="line-16"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Unlog.LogObjectDB.html#sqlOrdered"><span class="hs-identifier">sqlOrdered</span></a></span><span>
</span><span id="line-17"></span><span>       </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Analysis.API.Ground.html"><span class="hs-identifier">Cardano.Analysis.API.Ground</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Analysis.API.Ground.html#Host"><span class="hs-identifier">Host</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Analysis.API.Ground.html#LogObjectSource"><span class="hs-identifier">LogObjectSource</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/s7ry4nagcnlx8zrav5v8zl4d0vdiymxn-cardano-prelude-lib-cardano-prelude-0.2.1.0-haddock-doc/share/doc/cardano-prelude/html/src/Cardano.Prelude.html"><span class="hs-identifier">Cardano.Prelude</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier">ExceptT</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Unlog.LogObject.html"><span class="hs-identifier">Cardano.Unlog.LogObject</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Unlog.LogObject.html#HostLogs"><span class="hs-identifier">HostLogs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Unlog.LogObject.html#LogObject"><span class="hs-identifier">LogObject</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Unlog.LogObject.html#RunLogs"><span class="hs-identifier">RunLogs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Unlog.LogObject.html#fromTextRef"><span class="hs-identifier">fromTextRef</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Unlog.LogObjectDB.html"><span class="hs-identifier">Cardano.Unlog.LogObjectDB</span></a></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Util.html"><span class="hs-identifier">Cardano.Util</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Util.html#sequenceConcurrentlyChunksOf"><span class="hs-identifier">sequenceConcurrentlyChunksOf</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Util.html#withTimingInfo"><span class="hs-identifier">withTimingInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Prelude.html"><span class="hs-identifier">Prelude</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Float.html#log"><span class="hs-identifier">log</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Exception.html"><span class="hs-identifier">Control.Exception</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Exception.Type.html#SomeException"><span class="hs-identifier">SomeException</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#catch"><span class="hs-identifier">catch</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.html"><span class="hs-identifier">Control.Monad</span></a></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Aeson</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">decode</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">eitherDecode</span></span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/bytestring-0.11.5.3/src/Data.ByteString.Lazy.Char8.html"><span class="hs-identifier">Data.ByteString.Lazy.Char8</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BSL</span></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Kind.html"><span class="hs-identifier">Data.Kind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier">Type</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.List.html"><span class="hs-identifier">Data.List</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.OldList.html#sort"><span class="hs-identifier">sort</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Lazy.html"><span class="hs-identifier">Data.Map.Lazy</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">ML</span></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Strict.html"><span class="hs-identifier">Data.Map.Strict</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Maybe.html"><span class="hs-identifier">Data.Maybe</span></a></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/hhylj20y6j97fsd08pyn3sqxa5j6pm9l-text-short-lib-text-short-0.1.6-haddock-doc/share/doc/text-short/html/src/Data.Text.Short.html"><span class="hs-identifier">Data.Text.Short</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">ShortText</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/hhylj20y6j97fsd08pyn3sqxa5j6pm9l-text-short-lib-text-short-0.1.6-haddock-doc/share/doc/text-short/html/src/Data.Text.Short.html#unpack"><span class="hs-identifier">unpack</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/time-1.12.2/src/Data.Time.Clock.html"><span class="hs-identifier">Data.Time.Clock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/time-1.12.2/src/Data.Time.Clock.Internal.UTCTime.html#UTCTime"><span class="hs-identifier">UTCTime</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/time-1.12.2/src/Data.Time.Clock.POSIX.html#getCurrentTime"><span class="hs-identifier">getCurrentTime</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Conc.html"><span class="hs-identifier">GHC.Conc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Conc.Sync.html#numCapabilities"><span class="hs-identifier">numCapabilities</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/directory-1.3.8.5/src/System.Directory.html"><span class="hs-identifier">System.Directory</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/directory-1.3.8.5/src/System.Directory.html#removeFile"><span class="hs-identifier">removeFile</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="file:///nix/store/49rppdnin26hx0v2wl3ralyq0sj61ybw-sqlite-easy-lib-sqlite-easy-1.1.1.0-haddock-doc/share/doc/sqlite-easy/html/src/Database.Sqlite.Easy.html"><span class="hs-identifier">Database.Sqlite.Easy</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Internal.html#Text"><span class="hs-identifier">Text</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span>
</span><span id="line-44"></span><span class="hs-keyword">class</span><span> </span><span id="LoadFromDB"><span class="annot"><a href="Cardano.Unlog.BackendDB.html#LoadFromDB"><span class="hs-identifier hs-var">LoadFromDB</span></a></span></span><span> </span><span id="local-6989586621679429125"><span class="annot"><a href="#local-6989586621679429125"><span class="hs-identifier hs-type">l</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-45"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="LoadResult"><span class="annot"><a href="Cardano.Unlog.BackendDB.html#LoadResult"><span class="hs-identifier hs-var">LoadResult</span></a></span></span><span> </span><span id="local-6989586621679429125"><span class="annot"><a href="#local-6989586621679429125"><span class="hs-identifier hs-type">l</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span>  </span><span id="loadQuery"><span class="annot"><a href="Cardano.Unlog.BackendDB.html#loadQuery"><span class="hs-identifier hs-type">loadQuery</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679429125"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/49rppdnin26hx0v2wl3ralyq0sj61ybw-sqlite-easy-lib-sqlite-easy-1.1.1.0-haddock-doc/share/doc/sqlite-easy/html/src/Database.Sqlite.Easy.Internal.html#SQL"><span class="hs-identifier hs-type">SQL</span></a></span><span>
</span><span id="line-48"></span><span>
</span><span id="line-49"></span><span>  </span><span id="loadConvert"><span class="annot"><a href="Cardano.Unlog.BackendDB.html#loadConvert"><span class="hs-identifier hs-type">loadConvert</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679429125"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Unlog.LogObjectDB.html#SummaryDB"><span class="hs-identifier hs-type">SummaryDB</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">SQLData</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#LoadResult"><span class="hs-identifier hs-type">LoadResult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679429125"><span class="hs-identifier hs-type">l</span></a></span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span>  </span><span id="loadTraceFreqs"><span class="annot"><a href="Cardano.Unlog.BackendDB.html#loadTraceFreqs"><span class="hs-identifier hs-type">loadTraceFreqs</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679429125"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Bool"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-52"></span><span>  </span><span id="local-6989586621679429380"><span class="annot"><a href="Cardano.Unlog.BackendDB.html#loadTraceFreqs"><span class="hs-identifier hs-var hs-var">loadTraceFreqs</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; l -&gt; Bool
forall a b. a -&gt; b -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#False"><span class="hs-identifier hs-var">False</span></a></span></span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span>  </span><span id="loadTimingInfo"><span class="annot"><a href="Cardano.Unlog.BackendDB.html#loadTimingInfo"><span class="hs-identifier hs-type">loadTimingInfo</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679429125"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Bool"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-55"></span><span>  </span><span id="local-6989586621679429383"><span class="annot"><a href="Cardano.Unlog.BackendDB.html#loadTimingInfo"><span class="hs-identifier hs-var hs-var">loadTimingInfo</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; l -&gt; Bool
forall a b. a -&gt; b -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#False"><span class="hs-identifier hs-var">False</span></a></span></span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span class="hs-keyword">data</span><span> </span><span id="LoadLogObjects"><span class="annot"><a href="Cardano.Unlog.BackendDB.html#LoadLogObjects"><span class="hs-identifier hs-var">LoadLogObjects</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-58"></span><span>    </span><span id="LoadLogObjectsAll"><span class="annot"><a href="Cardano.Unlog.BackendDB.html#LoadLogObjectsAll"><span class="hs-identifier hs-var">LoadLogObjectsAll</span></a></span></span><span>
</span><span id="line-59"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="LoadLogObjectsWith"><span class="annot"><a href="Cardano.Unlog.BackendDB.html#LoadLogObjectsWith"><span class="hs-identifier hs-var">LoadLogObjectsWith</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Cardano.Unlog.LogObjectDB.html#SQLSelect6Cols"><span class="hs-identifier hs-type">SQLSelect6Cols</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-60"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="LoadTraceFreqsOnly"><span class="annot"><a href="Cardano.Unlog.BackendDB.html#LoadTraceFreqsOnly"><span class="hs-identifier hs-var">LoadTraceFreqsOnly</span></a></span></span><span>
</span><span id="line-61"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679429388"><span id="local-6989586621679429393"><span class="annot"><span class="annottext">LoadLogObjects -&gt; LoadLogObjects -&gt; Bool
(LoadLogObjects -&gt; LoadLogObjects -&gt; Bool)
-&gt; (LoadLogObjects -&gt; LoadLogObjects -&gt; Bool) -&gt; Eq LoadLogObjects
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: LoadLogObjects -&gt; LoadLogObjects -&gt; Bool
== :: LoadLogObjects -&gt; LoadLogObjects -&gt; Bool
$c/= :: LoadLogObjects -&gt; LoadLogObjects -&gt; Bool
/= :: LoadLogObjects -&gt; LoadLogObjects -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679429399"><span id="local-6989586621679429406"><span id="local-6989586621679429410"><span class="annot"><span class="annottext">Int -&gt; LoadLogObjects -&gt; ShowS
[LoadLogObjects] -&gt; ShowS
LoadLogObjects -&gt; FilePath
(Int -&gt; LoadLogObjects -&gt; ShowS)
-&gt; (LoadLogObjects -&gt; FilePath)
-&gt; ([LoadLogObjects] -&gt; ShowS)
-&gt; Show LoadLogObjects
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; FilePath) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; LoadLogObjects -&gt; ShowS
showsPrec :: Int -&gt; LoadLogObjects -&gt; ShowS
$cshow :: LoadLogObjects -&gt; FilePath
show :: LoadLogObjects -&gt; FilePath
$cshowList :: [LoadLogObjects] -&gt; ShowS
showList :: [LoadLogObjects] -&gt; ShowS
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-62"></span><span>
</span><span id="line-63"></span><span class="hs-keyword">data</span><span> </span><span id="LoadSummaryOnly"><span class="annot"><a href="Cardano.Unlog.BackendDB.html#LoadSummaryOnly"><span class="hs-identifier hs-var">LoadSummaryOnly</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-64"></span><span>    </span><span id="LoadSummaryOnly"><span class="annot"><a href="Cardano.Unlog.BackendDB.html#LoadSummaryOnly"><span class="hs-identifier hs-var">LoadSummaryOnly</span></a></span></span><span>
</span><span id="line-65"></span><span>
</span><span id="line-66"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#LoadFromDB"><span class="hs-identifier hs-type">LoadFromDB</span></a></span><span> </span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#LoadLogObjects"><span class="hs-identifier hs-type">LoadLogObjects</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-67"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="LoadResult"><span class="annot"><a href="Cardano.Unlog.BackendDB.html#LoadResult"><span class="hs-identifier hs-var">LoadResult</span></a></span></span><span> </span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#LoadLogObjects"><span class="hs-identifier hs-type">LoadLogObjects</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Cardano.Unlog.LogObject.html#LogObject"><span class="hs-identifier hs-type">LogObject</span></a></span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span>  </span><span id="local-6989586621679429421"><span class="annot"><span class="annottext">loadTraceFreqs :: LoadLogObjects -&gt; Bool
</span><a href="Cardano.Unlog.BackendDB.html#loadTraceFreqs"><span class="hs-identifier hs-var hs-var hs-var hs-var">loadTraceFreqs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#LoadLogObjectsWith"><span class="hs-identifier hs-type">LoadLogObjectsWith</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#False"><span class="hs-identifier hs-var">False</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LoadLogObjects
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#True"><span class="hs-identifier hs-var">True</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-70"></span><span>  </span><span id="local-6989586621679429422"><span class="annot"><span class="annottext">loadQuery :: LoadLogObjects -&gt; Maybe SQL
</span><a href="Cardano.Unlog.BackendDB.html#loadQuery"><span class="hs-identifier hs-var hs-var hs-var hs-var">loadQuery</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-71"></span><span>    </span><span class="annot"><span class="annottext">LoadLogObjects
</span><a href="Cardano.Unlog.BackendDB.html#LoadLogObjectsAll"><span class="hs-identifier hs-var">LoadLogObjectsAll</span></a></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SQL -&gt; Maybe SQL
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">SQL
</span><a href="Cardano.Unlog.BackendDB.html#selectAll"><span class="hs-identifier hs-var">selectAll</span></a></span><span>
</span><span id="line-72"></span><span>    </span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#LoadLogObjectsWith"><span class="hs-identifier hs-type">LoadLogObjectsWith</span></a></span><span> </span><span id="local-6989586621679429424"><span class="annot"><span class="annottext">[SQLSelect6Cols]
</span><a href="#local-6989586621679429424"><span class="hs-identifier hs-var">selects</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SQL -&gt; Maybe SQL
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(SQL -&gt; Maybe SQL) -&gt; SQL -&gt; Maybe SQL
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[SQLSelect6Cols] -&gt; SQL
</span><a href="Cardano.Unlog.LogObjectDB.html#sqlOrdered"><span class="hs-identifier hs-var">sqlOrdered</span></a></span><span> </span><span class="annot"><span class="annottext">[SQLSelect6Cols]
</span><a href="#local-6989586621679429424"><span class="hs-identifier hs-var">selects</span></a></span><span>
</span><span id="line-73"></span><span>    </span><span class="annot"><span class="annottext">LoadLogObjects
</span><a href="Cardano.Unlog.BackendDB.html#LoadTraceFreqsOnly"><span class="hs-identifier hs-var">LoadTraceFreqsOnly</span></a></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe SQL
forall a. Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-74"></span><span>  </span><span id="local-6989586621679429425"><span class="annot"><span class="annottext">loadConvert :: LoadLogObjects
-&gt; SummaryDB -&gt; [SQLData] -&gt; LoadResult LoadLogObjects
</span><a href="Cardano.Unlog.BackendDB.html#loadConvert"><span class="hs-identifier hs-var hs-var hs-var hs-var">loadConvert</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SummaryDB -&gt; [SQLData] -&gt; LogObject)
-&gt; LoadLogObjects -&gt; SummaryDB -&gt; [SQLData] -&gt; LogObject
forall a b. a -&gt; b -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">SummaryDB -&gt; [SQLData] -&gt; LogObject
</span><a href="Cardano.Unlog.LogObjectDB.html#sqlToLogObject"><span class="hs-identifier hs-var">sqlToLogObject</span></a></span><span>
</span><span id="line-75"></span><span>  </span><span id="local-6989586621679429428"><span class="annot"><span class="annottext">loadTimingInfo :: LoadLogObjects -&gt; Bool
</span><a href="Cardano.Unlog.BackendDB.html#loadTimingInfo"><span class="hs-identifier hs-var hs-var hs-var hs-var">loadTimingInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LoadLogObjects -&gt; LoadLogObjects -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#%3D%3D"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">LoadLogObjects
</span><a href="Cardano.Unlog.BackendDB.html#LoadLogObjectsAll"><span class="hs-identifier hs-var">LoadLogObjectsAll</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679429432"><span id="local-6989586621679429436"><span class="annot"><a href="Cardano.Unlog.BackendDB.html#LoadFromDB"><span class="hs-identifier hs-type">LoadFromDB</span></a></span><span> </span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#LoadSummaryOnly"><span class="hs-identifier hs-type">LoadSummaryOnly</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="LoadResult"><span class="annot"><a href="Cardano.Unlog.BackendDB.html#LoadResult"><span class="hs-identifier hs-var">LoadResult</span></a></span></span><span> </span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#LoadSummaryOnly"><span class="hs-identifier hs-type">LoadSummaryOnly</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Cardano.Unlog.LogObjectDB.html#SummaryDB"><span class="hs-identifier hs-type">SummaryDB</span></a></span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span>  </span><span id="local-6989586621679429439"><span class="annot"><span class="annottext">loadQuery :: LoadSummaryOnly -&gt; Maybe SQL
</span><a href="Cardano.Unlog.BackendDB.html#loadQuery"><span class="hs-identifier hs-var hs-var hs-var hs-var">loadQuery</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe SQL -&gt; LoadSummaryOnly -&gt; Maybe SQL
forall a b. a -&gt; b -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe SQL -&gt; LoadSummaryOnly -&gt; Maybe SQL)
-&gt; Maybe SQL -&gt; LoadSummaryOnly -&gt; Maybe SQL
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SQL -&gt; Maybe SQL
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">SQL
</span><span class="hs-string">&quot;SELECT null&quot;</span></span><span>
</span><span id="line-81"></span><span>  </span><span id="local-6989586621679429440"><span class="annot"><span class="annottext">loadConvert :: LoadSummaryOnly
-&gt; SummaryDB -&gt; [SQLData] -&gt; LoadResult LoadSummaryOnly
</span><a href="Cardano.Unlog.BackendDB.html#loadConvert"><span class="hs-identifier hs-var hs-var hs-var hs-var">loadConvert</span></a></span></span><span> </span><span class="annot"><span class="annottext">LoadSummaryOnly
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679429441"><span class="annot"><span class="annottext">SummaryDB
</span><a href="#local-6989586621679429441"><span class="hs-identifier hs-var">summary</span></a></span></span><span> </span><span class="annot"><span class="annottext">[SQLData]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SummaryDB
LoadResult LoadSummaryOnly
</span><a href="#local-6989586621679429441"><span class="hs-identifier hs-var">summary</span></a></span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span id="local-6989586621679429142"><span id="local-6989586621679429143"><span class="annot"><a href="Cardano.Unlog.BackendDB.html#runLiftLogObjectsDB"><span class="hs-identifier hs-type">runLiftLogObjectsDB</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#LoadFromDB"><span class="hs-identifier hs-type">LoadFromDB</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679429142"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679429142"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Unlog.LogObject.html#RunLogs"><span class="hs-identifier hs-type">RunLogs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679429143"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Unlog.LogObject.html#RunLogs"><span class="hs-identifier hs-type">RunLogs</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#LoadResult"><span class="hs-identifier hs-type">LoadResult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679429142"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-85"></span><span id="runLiftLogObjectsDB"><span class="annot"><span class="annottext">runLiftLogObjectsDB :: forall l a.
LoadFromDB l =&gt;
l -&gt; RunLogs a -&gt; ExceptT FilePath IO (RunLogs [LoadResult l])
</span><a href="Cardano.Unlog.BackendDB.html#runLiftLogObjectsDB"><span class="hs-identifier hs-var hs-var">runLiftLogObjectsDB</span></a></span></span><span> </span><span id="local-6989586621679429454"><span class="annot"><span class="annottext">l
</span><a href="#local-6989586621679429454"><span class="hs-identifier hs-var">loadMode</span></a></span></span><span> </span><span class="annot"><a href="Cardano.Unlog.LogObject.html#RunLogs"><span class="hs-identifier hs-type">RunLogs</span></a></span><span class="hs-special">{</span><span id="local-6989586621679429456"><span class="annot"><span class="annottext">Map Host (HostLogs a)
rlHostLogs :: Map Host (HostLogs a)
rlHostLogs :: forall a. RunLogs a -&gt; Map Host (HostLogs a)
</span><a href="#local-6989586621679429456"><span class="hs-identifier hs-var hs-var">rlHostLogs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679429458"><span class="annot"><span class="annottext">UTCTime
rlFilterDate :: UTCTime
rlFilterDate :: forall a. RunLogs a -&gt; UTCTime
</span><a href="#local-6989586621679429458"><span class="hs-glyph hs-var hs-var">..</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO (RunLogs [LoadResult l])
-&gt; ExceptT FilePath IO (RunLogs [LoadResult l])
forall a. IO a -&gt; ExceptT FilePath IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (RunLogs [LoadResult l])
 -&gt; ExceptT FilePath IO (RunLogs [LoadResult l]))
-&gt; IO (RunLogs [LoadResult l])
-&gt; ExceptT FilePath IO (RunLogs [LoadResult l])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-86"></span><span>  </span><span id="local-6989586621679429461"><span class="annot"><span class="annottext">Map Host (HostLogs [LoadResult l])
</span><a href="#local-6989586621679429461"><span class="hs-identifier hs-var">hostLogs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Host, HostLogs [LoadResult l])]
-&gt; Map Host (HostLogs [LoadResult l])
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Strict.Internal.html#fromList"><span class="hs-identifier hs-var">Map.fromList</span></a></span><span>
</span><span id="line-87"></span><span>    </span><span class="annot"><span class="annottext">([(Host, HostLogs [LoadResult l])]
 -&gt; Map Host (HostLogs [LoadResult l]))
-&gt; IO [(Host, HostLogs [LoadResult l])]
-&gt; IO (Map Host (HostLogs [LoadResult l]))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int
-&gt; [IO (Host, HostLogs [LoadResult l])]
-&gt; IO [(Host, HostLogs [LoadResult l])]
forall a. Int -&gt; [IO a] -&gt; IO [a]
</span><a href="Cardano.Util.html#sequenceConcurrentlyChunksOf"><span class="hs-identifier hs-var">sequenceConcurrentlyChunksOf</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Conc.Sync.html#numCapabilities"><span class="hs-identifier hs-var">numCapabilities</span></a></span><span> </span><span class="annot"><span class="annottext">[IO (Host, HostLogs [LoadResult l])]
</span><a href="#local-6989586621679429464"><span class="hs-identifier hs-var">loadActions</span></a></span><span>
</span><span id="line-88"></span><span>  </span><span class="annot"><span class="annottext">RunLogs [LoadResult l] -&gt; IO (RunLogs [LoadResult l])
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(RunLogs [LoadResult l] -&gt; IO (RunLogs [LoadResult l]))
-&gt; RunLogs [LoadResult l] -&gt; IO (RunLogs [LoadResult l])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><a href="Cardano.Unlog.LogObject.html#RunLogs"><span class="hs-identifier hs-type">RunLogs</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">rlHostLogs :: Map Host (HostLogs [LoadResult l])
</span><a href="Cardano.Unlog.LogObject.html#rlHostLogs"><span class="hs-identifier hs-var">rlHostLogs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Host (HostLogs [LoadResult l])
</span><a href="#local-6989586621679429461"><span class="hs-identifier hs-var">hostLogs'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UTCTime
rlFilterDate :: UTCTime
rlFilterDate :: UTCTime
</span><a href="#local-6989586621679429458"><span class="hs-glyph hs-var hs-var">..</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-89"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-90"></span><span>    </span><span id="local-6989586621679429464"><span class="annot"><span class="annottext">loadActions :: [IO (Host, HostLogs [LoadResult l])]
</span><a href="#local-6989586621679429464"><span class="hs-identifier hs-var hs-var">loadActions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Host, HostLogs a) -&gt; IO (Host, HostLogs [LoadResult l]))
-&gt; [(Host, HostLogs a)] -&gt; [IO (Host, HostLogs [LoadResult l])]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">(Host, HostLogs a) -&gt; IO (Host, HostLogs [LoadResult l])
</span><a href="#local-6989586621679429465"><span class="hs-identifier hs-var">load</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Host (HostLogs a) -&gt; [(Host, HostLogs a)]
forall k a. Map k a -&gt; [(k, a)]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#toList"><span class="hs-identifier hs-var">Map.toList</span></a></span><span> </span><span class="annot"><span class="annottext">Map Host (HostLogs a)
</span><a href="#local-6989586621679429456"><span class="hs-identifier hs-var">rlHostLogs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span>    </span><span id="local-6989586621679429467"><span class="annot"><span class="annottext">timingInfo :: Text
-&gt; IO (Host, HostLogs [LoadResult l])
-&gt; IO (Host, HostLogs [LoadResult l])
</span><a href="#local-6989586621679429467"><span class="hs-identifier hs-var hs-var">timingInfo</span></a></span></span><span> </span><span id="local-6989586621679429468"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679429468"><span class="hs-identifier hs-var">h</span></a></span></span><span>
</span><span id="line-92"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">l -&gt; Bool
forall l. LoadFromDB l =&gt; l -&gt; Bool
</span><a href="Cardano.Unlog.BackendDB.html#loadTimingInfo"><span class="hs-identifier hs-var">loadTimingInfo</span></a></span><span> </span><span class="annot"><span class="annottext">l
</span><a href="#local-6989586621679429454"><span class="hs-identifier hs-var">loadMode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath
-&gt; IO (Host, HostLogs [LoadResult l])
-&gt; IO (Host, HostLogs [LoadResult l])
forall (m :: * -&gt; *) a. MonadIO m =&gt; FilePath -&gt; m a -&gt; m a
</span><a href="Cardano.Util.html#withTimingInfo"><span class="hs-identifier hs-var">withTimingInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;loadHostLogsDB/&quot;</span></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; FilePath
</span><a href="file:///nix/store/hhylj20y6j97fsd08pyn3sqxa5j6pm9l-text-short-lib-text-short-0.1.6-haddock-doc/share/doc/text-short/html/src/Data.Text.Short.html#unpack"><span class="hs-identifier hs-var">ShortText.unpack</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679429468"><span class="hs-identifier hs-var">h</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO (Host, HostLogs [LoadResult l])
-&gt; IO (Host, HostLogs [LoadResult l])
forall a. a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#id"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span>    </span><span id="local-6989586621679429465"><span class="annot"><span class="annottext">load :: (Host, HostLogs a) -&gt; IO (Host, HostLogs [LoadResult l])
</span><a href="#local-6989586621679429465"><span class="hs-identifier hs-var hs-var">load</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679429470"><span class="annot"><span class="annottext">host :: Host
</span><a href="#local-6989586621679429470"><span class="hs-identifier hs-var">host</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Analysis.API.Ground.html#Host"><span class="hs-identifier hs-type">Host</span></a></span><span> </span><span id="local-6989586621679429472"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679429472"><span class="hs-identifier hs-var">h</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679429473"><span class="annot"><span class="annottext">HostLogs a
</span><a href="#local-6989586621679429473"><span class="hs-identifier hs-var">hl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; IO (Host, HostLogs [LoadResult l])
-&gt; IO (Host, HostLogs [LoadResult l])
</span><a href="#local-6989586621679429467"><span class="hs-identifier hs-var">timingInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679429472"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Host, HostLogs [LoadResult l])
 -&gt; IO (Host, HostLogs [LoadResult l]))
-&gt; IO (Host, HostLogs [LoadResult l])
-&gt; IO (Host, HostLogs [LoadResult l])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-96"></span><span>      </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Host
</span><a href="#local-6989586621679429470"><span class="hs-identifier hs-var">host</span></a></span><span> </span><span class="annot"><span class="annottext">(HostLogs [LoadResult l] -&gt; (Host, HostLogs [LoadResult l]))
-&gt; IO (HostLogs [LoadResult l])
-&gt; IO (Host, HostLogs [LoadResult l])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">l -&gt; HostLogs a -&gt; IO (HostLogs [LoadResult l])
forall l a.
LoadFromDB l =&gt;
l -&gt; HostLogs a -&gt; IO (HostLogs [LoadResult l])
</span><a href="Cardano.Unlog.BackendDB.html#loadHostLogsDB"><span class="hs-identifier hs-var">loadHostLogsDB</span></a></span><span> </span><span class="annot"><span class="annottext">l
</span><a href="#local-6989586621679429454"><span class="hs-identifier hs-var">loadMode</span></a></span><span> </span><span class="annot"><span class="annottext">HostLogs a
</span><a href="#local-6989586621679429473"><span class="hs-identifier hs-var">hl</span></a></span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span class="hs-comment">-- If the logs have been split up into multiple files, e.g. by a log rotator,</span><span>
</span><span id="line-99"></span><span class="hs-comment">-- this assumes sorting log files by *name* results in chronological order</span><span>
</span><span id="line-100"></span><span class="hs-comment">-- of all *trace messages* contained in them.</span><span>
</span><span id="line-101"></span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#prepareDB"><span class="hs-identifier hs-type">prepareDB</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Except.html#ExceptT"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span id="prepareDB"><span class="annot"><span class="annottext">prepareDB :: FilePath -&gt; [FilePath] -&gt; FilePath -&gt; ExceptT FilePath IO ()
</span><a href="Cardano.Unlog.BackendDB.html#prepareDB"><span class="hs-identifier hs-var hs-var">prepareDB</span></a></span></span><span> </span><span id="local-6989586621679429475"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679429475"><span class="hs-identifier hs-var">machName</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[FilePath] -&gt; [FilePath]
forall a. Ord a =&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.OldList.html#sort"><span class="hs-identifier hs-var">sort</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679429476"><span class="annot"><span class="annottext">[FilePath]
</span><a href="#local-6989586621679429476"><span class="hs-identifier hs-var">logFiles</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679429477"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679429477"><span class="hs-identifier hs-var">outFile</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; ExceptT FilePath IO ()
forall a. IO a -&gt; ExceptT FilePath IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; ExceptT FilePath IO ())
-&gt; IO () -&gt; ExceptT FilePath IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-103"></span><span>
</span><span id="line-104"></span><span>  </span><span class="annot"><span class="annottext">FilePath -&gt; IO ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/directory-1.3.8.5/src/System.Directory.html#removeFile"><span class="hs-identifier hs-var">removeFile</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679429477"><span class="hs-identifier hs-var">outFile</span></a></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; (SomeException -&gt; IO ()) -&gt; IO ()
forall e a. Exception e =&gt; IO a -&gt; (e -&gt; IO a) -&gt; IO a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#catch"><span class="hs-operator hs-var">`catch`</span></a></span><span> </span><span class="hs-glyph">\</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Exception.Type.html#SomeException"><span class="hs-identifier hs-type">SomeException</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span>
</span><span id="line-106"></span><span>  </span><span class="annot"><span class="annottext">FilePath -&gt; IO () -&gt; IO ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; FilePath -&gt; m a -&gt; m a
</span><a href="Cardano.Util.html#withTimingInfo"><span class="hs-identifier hs-var">withTimingInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;prepareDB/&quot;</span></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679429475"><span class="hs-identifier hs-var">machName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ConnectionString -&gt; SQLite () -&gt; IO ()
forall a. ConnectionString -&gt; SQLite a -&gt; IO a
</span><a href="file:///nix/store/49rppdnin26hx0v2wl3ralyq0sj61ybw-sqlite-easy-lib-sqlite-easy-1.1.1.0-haddock-doc/share/doc/sqlite-easy/html/src/Database.Sqlite.Easy.Internal.html#withDb"><span class="hs-identifier hs-var">withDb</span></a></span><span> </span><span class="annot"><span class="annottext">ConnectionString
</span><a href="#local-6989586621679429482"><span class="hs-identifier hs-var">dbName</span></a></span><span> </span><span class="annot"><span class="annottext">(SQLite () -&gt; IO ()) -&gt; SQLite () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-107"></span><span>    </span><span class="annot"><span class="annottext">(SQL -&gt; SQLite [[SQLData]]) -&gt; [SQL] -&gt; SQLite ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="annot"><span class="annottext">SQL -&gt; SQLite [[SQLData]]
</span><a href="file:///nix/store/49rppdnin26hx0v2wl3ralyq0sj61ybw-sqlite-easy-lib-sqlite-easy-1.1.1.0-haddock-doc/share/doc/sqlite-easy/html/src/Database.Sqlite.Easy.Internal.html#run"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">[SQL]
</span><a href="Cardano.Unlog.LogObjectDB.html#createSchema"><span class="hs-identifier hs-var">createSchema</span></a></span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span>    </span><span id="local-6989586621679429486"><span class="annot"><span class="annottext">TraceFreqs
</span><a href="#local-6989586621679429486"><span class="hs-identifier hs-var">tracefreqs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(TraceFreqs -&gt; FilePath -&gt; SQLite TraceFreqs)
-&gt; TraceFreqs -&gt; [FilePath] -&gt; SQLite TraceFreqs
forall (t :: * -&gt; *) (m :: * -&gt; *) b a.
(Foldable t, Monad m) =&gt;
(b -&gt; a -&gt; m b) -&gt; b -&gt; t a -&gt; m b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.html#foldM"><span class="hs-identifier hs-var">foldM</span></a></span><span> </span><span class="annot"><span class="annottext">TraceFreqs -&gt; FilePath -&gt; SQLite TraceFreqs
</span><a href="Cardano.Unlog.BackendDB.html#prepareFile"><span class="hs-identifier hs-var">prepareFile</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceFreqs
forall k a. Map k a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#empty"><span class="hs-identifier hs-var">ML.empty</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Unlog.LogObject.html#TraceFreqs"><span class="hs-identifier hs-type">TraceFreqs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[FilePath]
</span><a href="#local-6989586621679429476"><span class="hs-identifier hs-var">logFiles</span></a></span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span>    </span><span class="annot"><span class="annottext">SQLite () -&gt; SQLite ()
forall a. Typeable a =&gt; SQLite a -&gt; SQLite a
</span><a href="file:///nix/store/49rppdnin26hx0v2wl3ralyq0sj61ybw-sqlite-easy-lib-sqlite-easy-1.1.1.0-haddock-doc/share/doc/sqlite-easy/html/src/Database.Sqlite.Easy.Internal.html#transaction"><span class="hs-identifier hs-var">transaction</span></a></span><span> </span><span class="annot"><span class="annottext">(SQLite () -&gt; SQLite ()) -&gt; SQLite () -&gt; SQLite ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(SQLRunnable -&gt; SQLite [[SQLData]]) -&gt; [SQLRunnable] -&gt; SQLite ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="annot"><span class="annottext">SQLRunnable -&gt; SQLite [[SQLData]]
</span><a href="Cardano.Unlog.LogObjectDB.html#runSqlRunnable"><span class="hs-identifier hs-var">runSqlRunnable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceFreqs -&gt; [SQLRunnable]
</span><a href="Cardano.Unlog.LogObjectDB.html#traceFreqsToSql"><span class="hs-identifier hs-var">traceFreqsToSql</span></a></span><span> </span><span class="annot"><span class="annottext">TraceFreqs
</span><a href="#local-6989586621679429486"><span class="hs-identifier hs-var">tracefreqs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679429493"><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679429493"><span class="hs-identifier hs-var">tMin</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679429494"><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679429494"><span class="hs-identifier hs-var">tMax</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (UTCTime, UTCTime) -&gt; SQLite (UTCTime, UTCTime)
forall a. IO a -&gt; SQLite a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (UTCTime, UTCTime) -&gt; SQLite (UTCTime, UTCTime))
-&gt; IO (UTCTime, UTCTime) -&gt; SQLite (UTCTime, UTCTime)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[FilePath] -&gt; IO (UTCTime, UTCTime)
</span><a href="Cardano.Unlog.BackendDB.html#tMinMax"><span class="hs-identifier hs-var">tMinMax</span></a></span><span> </span><span class="annot"><span class="annottext">[FilePath]
</span><a href="#local-6989586621679429476"><span class="hs-identifier hs-var">logFiles</span></a></span><span>
</span><span id="line-114"></span><span>    </span><span id="local-6989586621679429496"><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679429496"><span class="hs-identifier hs-var">now</span></a></span></span><span>          </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO UTCTime -&gt; SQLite UTCTime
forall a. IO a -&gt; SQLite a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">IO UTCTime
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/time-1.12.2/src/Data.Time.Clock.POSIX.html#getCurrentTime"><span class="hs-identifier hs-var">getCurrentTime</span></a></span><span>
</span><span id="line-115"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-116"></span><span>      </span><span id="local-6989586621679429497"><span class="annot"><span class="annottext">dbSummary :: SummaryDB
</span><a href="#local-6989586621679429497"><span class="hs-identifier hs-var hs-var">dbSummary</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Cardano.Unlog.LogObjectDB.html#SummaryDB"><span class="hs-identifier hs-type">SummaryDB</span></a></span><span>
</span><span id="line-117"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">sdbName :: Host
</span><a href="Cardano.Unlog.LogObjectDB.html#sdbName"><span class="hs-identifier hs-var">sdbName</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; Host
forall a. IsString a =&gt; FilePath -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.String.html#fromString"><span class="hs-identifier hs-var">fromString</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679429475"><span class="hs-identifier hs-var">machName</span></a></span><span>
</span><span id="line-118"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sdbLines :: Int
</span><a href="Cardano.Unlog.LogObjectDB.html#sdbLines"><span class="hs-identifier hs-var">sdbLines</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TraceFreqs -&gt; Int
forall a. Num a =&gt; Map Text a -&gt; a
forall (t :: * -&gt; *) a. (Foldable t, Num a) =&gt; t a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#sum"><span class="hs-identifier hs-var">sum</span></a></span><span> </span><span class="annot"><span class="annottext">TraceFreqs
</span><a href="#local-6989586621679429486"><span class="hs-identifier hs-var">tracefreqs</span></a></span><span>
</span><span id="line-119"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sdbFirstAt :: UTCTime
</span><a href="Cardano.Unlog.LogObjectDB.html#sdbFirstAt"><span class="hs-identifier hs-var">sdbFirstAt</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679429493"><span class="hs-identifier hs-var">tMin</span></a></span><span>
</span><span id="line-120"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sdbLastAt :: UTCTime
</span><a href="Cardano.Unlog.LogObjectDB.html#sdbLastAt"><span class="hs-identifier hs-var">sdbLastAt</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679429494"><span class="hs-identifier hs-var">tMax</span></a></span><span>
</span><span id="line-121"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sdbCreated :: UTCTime
</span><a href="Cardano.Unlog.LogObjectDB.html#sdbCreated"><span class="hs-identifier hs-var">sdbCreated</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679429496"><span class="hs-identifier hs-var">now</span></a></span><span>
</span><span id="line-122"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-123"></span><span>    </span><span class="annot"><span class="annottext">SQLite [[SQLData]] -&gt; SQLite ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Functor.html#void"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">(SQLite [[SQLData]] -&gt; SQLite ())
-&gt; SQLite [[SQLData]] -&gt; SQLite ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SQLRunnable -&gt; SQLite [[SQLData]]
</span><a href="Cardano.Unlog.LogObjectDB.html#runSqlRunnable"><span class="hs-identifier hs-var">runSqlRunnable</span></a></span><span> </span><span class="annot"><span class="annottext">(SQLRunnable -&gt; SQLite [[SQLData]])
-&gt; SQLRunnable -&gt; SQLite [[SQLData]]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SummaryDB -&gt; SQLRunnable
</span><a href="Cardano.Unlog.LogObjectDB.html#summaryToSql"><span class="hs-identifier hs-var">summaryToSql</span></a></span><span> </span><span class="annot"><span class="annottext">SummaryDB
</span><a href="#local-6989586621679429497"><span class="hs-identifier hs-var">dbSummary</span></a></span><span>
</span><span id="line-124"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-125"></span><span>    </span><span id="local-6989586621679429482"><span class="annot"><span class="annottext">dbName :: ConnectionString
</span><a href="#local-6989586621679429482"><span class="hs-identifier hs-var hs-var">dbName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ConnectionString
forall a. IsString a =&gt; FilePath -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.String.html#fromString"><span class="hs-identifier hs-var">fromString</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679429477"><span class="hs-identifier hs-var">outFile</span></a></span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#prepareFile"><span class="hs-identifier hs-type">prepareFile</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Unlog.LogObject.html#TraceFreqs"><span class="hs-identifier hs-type">TraceFreqs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/49rppdnin26hx0v2wl3ralyq0sj61ybw-sqlite-easy-lib-sqlite-easy-1.1.1.0-haddock-doc/share/doc/sqlite-easy/html/src/Database.Sqlite.Easy.Internal.html#SQLite"><span class="hs-identifier hs-type">SQLite</span></a></span><span> </span><span class="annot"><a href="Cardano.Unlog.LogObject.html#TraceFreqs"><span class="hs-identifier hs-type">TraceFreqs</span></a></span><span>
</span><span id="line-128"></span><span id="prepareFile"><span class="annot"><span class="annottext">prepareFile :: TraceFreqs -&gt; FilePath -&gt; SQLite TraceFreqs
</span><a href="Cardano.Unlog.BackendDB.html#prepareFile"><span class="hs-identifier hs-var hs-var">prepareFile</span></a></span></span><span> </span><span id="local-6989586621679429507"><span class="annot"><span class="annottext">TraceFreqs
</span><a href="#local-6989586621679429507"><span class="hs-identifier hs-var">tracefreqs</span></a></span></span><span> </span><span id="local-6989586621679429508"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679429508"><span class="hs-identifier hs-var">log</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-129"></span><span>  </span><span id="local-6989586621679429509"><span class="annot"><span class="annottext">[ByteString]
</span><a href="#local-6989586621679429509"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; [ByteString]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/bytestring-0.11.5.3/src/Data.ByteString.Lazy.Char8.html#lines"><span class="hs-identifier hs-var">BSL.lines</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; [ByteString])
-&gt; SQLite ByteString -&gt; SQLite [ByteString]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IO ByteString -&gt; SQLite ByteString
forall a. IO a -&gt; SQLite a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; IO ByteString
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/bytestring-0.11.5.3/src/Data.ByteString.Lazy.html#readFile"><span class="hs-identifier hs-var">BSL.readFile</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679429508"><span class="hs-identifier hs-var">log</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span>  </span><span class="annot"><span class="annottext">SQLite TraceFreqs -&gt; SQLite TraceFreqs
forall a. Typeable a =&gt; SQLite a -&gt; SQLite a
</span><a href="file:///nix/store/49rppdnin26hx0v2wl3ralyq0sj61ybw-sqlite-easy-lib-sqlite-easy-1.1.1.0-haddock-doc/share/doc/sqlite-easy/html/src/Database.Sqlite.Easy.Internal.html#transaction"><span class="hs-identifier hs-var">transaction</span></a></span><span> </span><span class="annot"><span class="annottext">(SQLite TraceFreqs -&gt; SQLite TraceFreqs)
-&gt; SQLite TraceFreqs -&gt; SQLite TraceFreqs
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(TraceFreqs -&gt; ByteString -&gt; SQLite TraceFreqs)
-&gt; TraceFreqs -&gt; [ByteString] -&gt; SQLite TraceFreqs
forall (t :: * -&gt; *) (m :: * -&gt; *) b a.
(Foldable t, Monad m) =&gt;
(b -&gt; a -&gt; m b) -&gt; b -&gt; t a -&gt; m b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.html#foldM"><span class="hs-identifier hs-var">foldM</span></a></span><span> </span><span class="annot"><span class="annottext">TraceFreqs -&gt; ByteString -&gt; SQLite TraceFreqs
</span><a href="#local-6989586621679429512"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">TraceFreqs
</span><a href="#local-6989586621679429507"><span class="hs-identifier hs-var">tracefreqs</span></a></span><span> </span><span class="annot"><span class="annottext">[ByteString]
</span><a href="#local-6989586621679429509"><span class="hs-identifier hs-var">ls</span></a></span><span>
</span><span id="line-131"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-132"></span><span>    </span><span class="annot"><a href="#local-6989586621679429513"><span class="hs-identifier hs-type">alterFunc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-133"></span><span>    </span><span id="local-6989586621679429513"><span class="annot"><span class="annottext">alterFunc :: Maybe Int -&gt; Maybe Int
</span><a href="#local-6989586621679429513"><span class="hs-identifier hs-var hs-var">alterFunc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Int -&gt; (Int -&gt; Maybe Int) -&gt; Maybe Int -&gt; Maybe Int
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Maybe.html#maybe"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Maybe Int) -&gt; (Int -&gt; Int) -&gt; Int -&gt; Maybe Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int
forall a. Enum a =&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Enum.html#succ"><span class="hs-identifier hs-var">succ</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span>    </span><span id="local-6989586621679429512"><span class="annot"><span class="annottext">go :: TraceFreqs -&gt; ByteString -&gt; SQLite TraceFreqs
</span><a href="#local-6989586621679429512"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679429532"><span class="annot"><span class="annottext">TraceFreqs
</span><a href="#local-6989586621679429532"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span id="local-6989586621679429533"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679429533"><span class="hs-identifier hs-var">line</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Either FilePath LogObject
forall a. FromJSON a =&gt; ByteString -&gt; Either FilePath a
</span><span class="hs-identifier hs-var">Aeson.eitherDecode</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679429533"><span class="hs-identifier hs-var">line</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-136"></span><span>      </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621679429534"><span class="annot"><span class="annottext">logObject :: LogObject
</span><a href="#local-6989586621679429534"><span class="hs-identifier hs-var">logObject</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Cardano.Unlog.LogObject.html#LogObject"><span class="hs-identifier hs-type">LogObject</span></a></span><span class="hs-special">{</span><span id="local-6989586621679429536"><span class="annot"><span class="annottext">TextRef
loNS :: TextRef
loNS :: LogObject -&gt; TextRef
</span><a href="#local-6989586621679429536"><span class="hs-identifier hs-var hs-var">loNS</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679429538"><span class="annot"><span class="annottext">TextRef
loKind :: TextRef
loKind :: LogObject -&gt; TextRef
</span><a href="#local-6989586621679429538"><span class="hs-identifier hs-var hs-var">loKind</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-137"></span><span>        </span><span class="annot"><span class="annottext">Maybe SQLRunnable
-&gt; (SQLRunnable -&gt; SQLite [[SQLData]]) -&gt; SQLite ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#forM_"><span class="hs-identifier hs-var">forM_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LogObject -&gt; Maybe SQLRunnable
</span><a href="Cardano.Unlog.LogObjectDB.html#logObjectToSql"><span class="hs-identifier hs-var">logObjectToSql</span></a></span><span> </span><span class="annot"><span class="annottext">LogObject
</span><a href="#local-6989586621679429534"><span class="hs-identifier hs-var">logObject</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span>            </span><span class="annot"><span class="annottext">SQLRunnable -&gt; SQLite [[SQLData]]
</span><a href="Cardano.Unlog.LogObjectDB.html#runSqlRunnable"><span class="hs-identifier hs-var">runSqlRunnable</span></a></span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679429542"><span class="annot"><span class="annottext">name :: Text
</span><a href="#local-6989586621679429542"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TextRef -&gt; Text
</span><a href="Cardano.Unlog.LogObject.html#fromTextRef"><span class="hs-identifier hs-var">fromTextRef</span></a></span><span> </span><span class="annot"><span class="annottext">TextRef
</span><a href="#local-6989586621679429536"><span class="hs-identifier hs-var">loNS</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;:&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TextRef -&gt; Text
</span><a href="Cardano.Unlog.LogObject.html#fromTextRef"><span class="hs-identifier hs-var">fromTextRef</span></a></span><span> </span><span class="annot"><span class="annottext">TextRef
</span><a href="#local-6989586621679429538"><span class="hs-identifier hs-var">loKind</span></a></span><span>
</span><span id="line-141"></span><span>        </span><span class="annot"><span class="annottext">TraceFreqs -&gt; SQLite TraceFreqs
forall a. a -&gt; SQLite a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(TraceFreqs -&gt; SQLite TraceFreqs)
-&gt; TraceFreqs -&gt; SQLite TraceFreqs
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Int -&gt; Maybe Int) -&gt; Text -&gt; TraceFreqs -&gt; TraceFreqs
forall k a.
Ord k =&gt;
(Maybe a -&gt; Maybe a) -&gt; k -&gt; Map k a -&gt; Map k a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#alter"><span class="hs-identifier hs-var">ML.alter</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int -&gt; Maybe Int
</span><a href="#local-6989586621679429513"><span class="hs-identifier hs-var">alterFunc</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679429542"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">TraceFreqs
</span><a href="#local-6989586621679429532"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span>      </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621679429544"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679429544"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SQLRunnable -&gt; SQLite [[SQLData]]
</span><a href="Cardano.Unlog.LogObjectDB.html#runSqlRunnable"><span class="hs-identifier hs-var">runSqlRunnable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; SQLRunnable
</span><a href="Cardano.Unlog.LogObjectDB.html#errorToSql"><span class="hs-identifier hs-var">errorToSql</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679429544"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; SQLRunnable) -&gt; FilePath -&gt; SQLRunnable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; FilePath
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/bytestring-0.11.5.3/src/Data.ByteString.Lazy.Char8.html#unpack"><span class="hs-identifier hs-var">BSL.unpack</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679429533"><span class="hs-identifier hs-var">line</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SQLite [[SQLData]] -&gt; SQLite TraceFreqs -&gt; SQLite TraceFreqs
forall a b. SQLite a -&gt; SQLite b -&gt; SQLite b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3E%3E"><span class="hs-operator hs-var">&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TraceFreqs -&gt; SQLite TraceFreqs
forall a. a -&gt; SQLite a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">TraceFreqs
</span><a href="#local-6989586621679429532"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-144"></span><span>
</span><span id="line-145"></span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#tMinMax"><span class="hs-identifier hs-type">tMinMax</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/time-1.12.2/src/Data.Time.Clock.Internal.UTCTime.html#UTCTime"><span class="hs-identifier hs-type">UTCTime</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/time-1.12.2/src/Data.Time.Clock.Internal.UTCTime.html#UTCTime"><span class="hs-identifier hs-type">UTCTime</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span id="tMinMax"><span class="annot"><span class="annottext">tMinMax :: [FilePath] -&gt; IO (UTCTime, UTCTime)
</span><a href="Cardano.Unlog.BackendDB.html#tMinMax"><span class="hs-identifier hs-var hs-var">tMinMax</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO (UTCTime, UTCTime)
forall a. FilePath -&gt; IO a
forall (m :: * -&gt; *) a. MonadFail m =&gt; FilePath -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.Fail.html#fail"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;tMinMax: empty list of log files&quot;</span></span><span>
</span><span id="line-147"></span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#tMinMax"><span class="hs-identifier hs-var">tMinMax</span></a></span><span> </span><span class="hs-special">[</span><span id="local-6989586621679429547"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679429547"><span class="hs-identifier hs-var">log</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-148"></span><span>  </span><span id="local-6989586621679429548"><span class="annot"><span class="annottext">[ByteString]
</span><a href="#local-6989586621679429548"><span class="hs-identifier hs-var">ls2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; [ByteString]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/bytestring-0.11.5.3/src/Data.ByteString.Lazy.Char8.html#lines"><span class="hs-identifier hs-var">BSL.lines</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; [ByteString]) -&gt; IO ByteString -&gt; IO [ByteString]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO ByteString
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/bytestring-0.11.5.3/src/Data.ByteString.Lazy.html#readFile"><span class="hs-identifier hs-var">BSL.readFile</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679429547"><span class="hs-identifier hs-var">log</span></a></span><span>
</span><span id="line-149"></span><span>  </span><span class="hs-keyword">let</span><span>
</span><span id="line-150"></span><span>    </span><span class="annot"><a href="#local-6989586621679429549"><span class="hs-identifier hs-type">loMin</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679429550"><span class="hs-identifier hs-type">loMax</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Unlog.LogObject.html#LogObject"><span class="hs-identifier hs-type">LogObject</span></a></span><span>
</span><span id="line-151"></span><span>    </span><span id="local-6989586621679429549"><span class="annot"><span class="annottext">loMin :: LogObject
</span><a href="#local-6989586621679429549"><span class="hs-identifier hs-var hs-var">loMin</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LogObject] -&gt; LogObject
forall a. HasCallStack =&gt; [a] -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.List.html#head"><span class="hs-identifier hs-var">head</span></a></span><span> </span><span class="annot"><span class="annottext">([LogObject] -&gt; LogObject) -&gt; [LogObject] -&gt; LogObject
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Maybe LogObject) -&gt; [ByteString] -&gt; [LogObject]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Maybe.html#mapMaybe"><span class="hs-identifier hs-var">mapMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Maybe LogObject
forall a. FromJSON a =&gt; ByteString -&gt; Maybe a
</span><span class="hs-identifier hs-var">Aeson.decode</span></span><span> </span><span class="annot"><span class="annottext">[ByteString]
</span><a href="#local-6989586621679429548"><span class="hs-identifier hs-var">ls2</span></a></span><span>
</span><span id="line-152"></span><span>    </span><span id="local-6989586621679429550"><span class="annot"><span class="annottext">loMax :: LogObject
</span><a href="#local-6989586621679429550"><span class="hs-identifier hs-var hs-var">loMax</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe LogObject -&gt; LogObject
forall a. HasCallStack =&gt; Maybe a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Maybe.html#fromJust"><span class="hs-identifier hs-var">fromJust</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; Maybe LogObject
forall a. FromJSON a =&gt; ByteString -&gt; Maybe a
</span><span class="hs-identifier hs-var">Aeson.decode</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Maybe LogObject) -&gt; ByteString -&gt; Maybe LogObject
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[ByteString] -&gt; ByteString
forall a. HasCallStack =&gt; [a] -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.List.html#last"><span class="hs-identifier hs-var">last</span></a></span><span> </span><span class="annot"><span class="annottext">[ByteString]
</span><a href="#local-6989586621679429548"><span class="hs-identifier hs-var">ls2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-153"></span><span>  </span><span class="annot"><span class="annottext">(UTCTime, UTCTime) -&gt; IO (UTCTime, UTCTime)
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LogObject -&gt; UTCTime
</span><a href="Cardano.Unlog.LogObject.html#loAt"><span class="hs-identifier hs-var">loAt</span></a></span><span> </span><span class="annot"><span class="annottext">LogObject
</span><a href="#local-6989586621679429549"><span class="hs-identifier hs-var">loMin</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LogObject -&gt; UTCTime
</span><a href="Cardano.Unlog.LogObject.html#loAt"><span class="hs-identifier hs-var">loAt</span></a></span><span> </span><span class="annot"><span class="annottext">LogObject
</span><a href="#local-6989586621679429550"><span class="hs-identifier hs-var">loMax</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-154"></span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#tMinMax"><span class="hs-identifier hs-var">tMinMax</span></a></span><span> </span><span id="local-6989586621679429556"><span class="annot"><span class="annottext">[FilePath]
</span><a href="#local-6989586621679429556"><span class="hs-identifier hs-var">logs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-155"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621679429557"><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679429557"><span class="hs-identifier hs-var">tMin</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UTCTime
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[FilePath] -&gt; IO (UTCTime, UTCTime)
</span><a href="Cardano.Unlog.BackendDB.html#tMinMax"><span class="hs-identifier hs-var">tMinMax</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">[FilePath] -&gt; FilePath
forall a. HasCallStack =&gt; [a] -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.List.html#head"><span class="hs-identifier hs-var">head</span></a></span><span> </span><span class="annot"><span class="annottext">[FilePath]
</span><a href="#local-6989586621679429556"><span class="hs-identifier hs-var">logs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-156"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UTCTime
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679429558"><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679429558"><span class="hs-identifier hs-var">tMax</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[FilePath] -&gt; IO (UTCTime, UTCTime)
</span><a href="Cardano.Unlog.BackendDB.html#tMinMax"><span class="hs-identifier hs-var">tMinMax</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">[FilePath] -&gt; FilePath
forall a. HasCallStack =&gt; [a] -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.List.html#last"><span class="hs-identifier hs-var">last</span></a></span><span> </span><span class="annot"><span class="annottext">[FilePath]
</span><a href="#local-6989586621679429556"><span class="hs-identifier hs-var">logs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-157"></span><span>  </span><span class="annot"><span class="annottext">(UTCTime, UTCTime) -&gt; IO (UTCTime, UTCTime)
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679429557"><span class="hs-identifier hs-var">tMin</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679429558"><span class="hs-identifier hs-var">tMax</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span>
</span><span id="line-160"></span><span class="hs-comment">-- selects the entire LogObject stream, containing all objects relevant for standard analysis</span><span>
</span><span id="line-161"></span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#selectAll"><span class="hs-identifier hs-type">selectAll</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/49rppdnin26hx0v2wl3ralyq0sj61ybw-sqlite-easy-lib-sqlite-easy-1.1.1.0-haddock-doc/share/doc/sqlite-easy/html/src/Database.Sqlite.Easy.Internal.html#SQL"><span class="hs-identifier hs-type">SQL</span></a></span><span>
</span><span id="line-162"></span><span id="selectAll"><span class="annot"><span class="annottext">selectAll :: SQL
</span><a href="Cardano.Unlog.BackendDB.html#selectAll"><span class="hs-identifier hs-var hs-var">selectAll</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SQLSelect6Cols] -&gt; SQL
</span><a href="Cardano.Unlog.LogObjectDB.html#sqlOrdered"><span class="hs-identifier hs-var">sqlOrdered</span></a></span><span>
</span><span id="line-163"></span><span>  </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">SQLSelect6Cols
</span><a href="Cardano.Unlog.BackendDB.html#sqlGetEvent"><span class="hs-identifier hs-var">sqlGetEvent</span></a></span><span>
</span><span id="line-164"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SQLSelect6Cols
</span><a href="Cardano.Unlog.BackendDB.html#sqlGetTxns"><span class="hs-identifier hs-var">sqlGetTxns</span></a></span><span>
</span><span id="line-165"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SQLSelect6Cols
</span><a href="Cardano.Unlog.BackendDB.html#sqlGetResource"><span class="hs-identifier hs-var">sqlGetResource</span></a></span><span>
</span><span id="line-166"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SQLSelect6Cols
</span><a href="Cardano.Unlog.BackendDB.html#sqlGetSlot"><span class="hs-identifier hs-var">sqlGetSlot</span></a></span><span>
</span><span id="line-167"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SQLSelect6Cols
</span><a href="Cardano.Unlog.BackendDB.html#sqlGetLMetrics"><span class="hs-identifier hs-var">sqlGetLMetrics</span></a></span><span>
</span><span id="line-168"></span><span>  </span><span class="hs-special">]</span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#sqlGetEvent"><span class="hs-identifier hs-type">sqlGetEvent</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#sqlGetTxns"><span class="hs-identifier hs-type">sqlGetTxns</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#sqlGetResource"><span class="hs-identifier hs-type">sqlGetResource</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#sqlGetSlot"><span class="hs-identifier hs-type">sqlGetSlot</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#sqlGetLMetrics"><span class="hs-identifier hs-type">sqlGetLMetrics</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Unlog.LogObjectDB.html#SQLSelect6Cols"><span class="hs-identifier hs-type">SQLSelect6Cols</span></a></span><span>
</span><span id="line-171"></span><span id="sqlGetEvent"><span class="annot"><span class="annottext">sqlGetEvent :: SQLSelect6Cols
</span><a href="Cardano.Unlog.BackendDB.html#sqlGetEvent"><span class="hs-identifier hs-var hs-var">sqlGetEvent</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; Maybe Text
-&gt; Maybe Text
-&gt; Maybe Text
-&gt; Maybe Text
-&gt; Maybe Text
-&gt; SQLSelect6Cols
</span><a href="Cardano.Unlog.LogObjectDB.html#mkSQLSelectFrom"><span class="hs-identifier hs-var">mkSQLSelectFrom</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;event&quot;</span></span><span>          </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>                              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;slot&quot;</span></span><span class="hs-special">)</span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;block&quot;</span></span><span class="hs-special">)</span><span>     </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;hash&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-172"></span><span id="sqlGetTxns"><span class="annot"><span class="annottext">sqlGetTxns :: SQLSelect6Cols
</span><a href="Cardano.Unlog.BackendDB.html#sqlGetTxns"><span class="hs-identifier hs-var hs-var">sqlGetTxns</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; Maybe Text
-&gt; Maybe Text
-&gt; Maybe Text
-&gt; Maybe Text
-&gt; Maybe Text
-&gt; SQLSelect6Cols
</span><a href="Cardano.Unlog.LogObjectDB.html#mkSQLSelectFrom"><span class="hs-identifier hs-var">mkSQLSelectFrom</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;txns&quot;</span></span><span>           </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>                              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;count&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;rejected&quot;</span></span><span class="hs-special">)</span><span>  </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;tid&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-173"></span><span id="sqlGetResource"><span class="annot"><span class="annottext">sqlGetResource :: SQLSelect6Cols
</span><a href="Cardano.Unlog.BackendDB.html#sqlGetResource"><span class="hs-identifier hs-var hs-var">sqlGetResource</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; Maybe Text
-&gt; Maybe Text
-&gt; Maybe Text
-&gt; Maybe Text
-&gt; Maybe Text
-&gt; SQLSelect6Cols
</span><a href="Cardano.Unlog.LogObjectDB.html#mkSQLSelectFrom"><span class="hs-identifier hs-var">mkSQLSelectFrom</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;resource&quot;</span></span><span>       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;LOResources&quot;</span></span><span class="hs-special">)</span><span>                 </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>        </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>            </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;as_blob&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-174"></span><span id="sqlGetSlot"><span class="annot"><span class="annottext">sqlGetSlot :: SQLSelect6Cols
</span><a href="Cardano.Unlog.BackendDB.html#sqlGetSlot"><span class="hs-identifier hs-var hs-var">sqlGetSlot</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; Maybe Text
-&gt; Maybe Text
-&gt; Maybe Text
-&gt; Maybe Text
-&gt; Maybe Text
-&gt; SQLSelect6Cols
</span><a href="Cardano.Unlog.LogObjectDB.html#mkSQLSelectFrom"><span class="hs-identifier hs-var">mkSQLSelectFrom</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;slot&quot;</span></span><span>           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;LOTraceStartLeadershipCheck&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;slot&quot;</span></span><span class="hs-special">)</span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;utxo_size&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;chain_dens&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-175"></span><span id="sqlGetLMetrics"><span class="annot"><span class="annottext">sqlGetLMetrics :: SQLSelect6Cols
</span><a href="Cardano.Unlog.BackendDB.html#sqlGetLMetrics"><span class="hs-identifier hs-var hs-var">sqlGetLMetrics</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; Maybe Text
-&gt; Maybe Text
-&gt; Maybe Text
-&gt; Maybe Text
-&gt; Maybe Text
-&gt; SQLSelect6Cols
</span><a href="Cardano.Unlog.LogObjectDB.html#mkSQLSelectFrom"><span class="hs-identifier hs-var">mkSQLSelectFrom</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ledgermetrics&quot;</span></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;LOLedgerMetrics&quot;</span></span><span class="hs-special">)</span><span>             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;slot&quot;</span></span><span class="hs-special">)</span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;utxo_size&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;chain_dens&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-176"></span><span>
</span><span id="line-177"></span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#getSummary"><span class="hs-identifier hs-type">getSummary</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/49rppdnin26hx0v2wl3ralyq0sj61ybw-sqlite-easy-lib-sqlite-easy-1.1.1.0-haddock-doc/share/doc/sqlite-easy/html/src/Database.Sqlite.Easy.Internal.html#SQLite"><span class="hs-identifier hs-type">SQLite</span></a></span><span> </span><span class="annot"><a href="Cardano.Unlog.LogObjectDB.html#SummaryDB"><span class="hs-identifier hs-type">SummaryDB</span></a></span><span>
</span><span id="line-178"></span><span id="getSummary"><span class="annot"><span class="annottext">getSummary :: SQLite SummaryDB
</span><a href="Cardano.Unlog.BackendDB.html#getSummary"><span class="hs-identifier hs-var hs-var">getSummary</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-179"></span><span>  </span><span class="annot"><span class="annottext">[SQLData] -&gt; SummaryDB
forall x. AsSQLData x =&gt; [SQLData] -&gt; x
</span><a href="Cardano.Unlog.LogObjectDB.html#fromSqlDataWithArgs"><span class="hs-identifier hs-var">fromSqlDataWithArgs</span></a></span><span> </span><span class="annot"><span class="annottext">([SQLData] -&gt; SummaryDB)
-&gt; ([[SQLData]] -&gt; [SQLData]) -&gt; [[SQLData]] -&gt; SummaryDB
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[[SQLData]] -&gt; [SQLData]
forall a. HasCallStack =&gt; [a] -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.List.html#head"><span class="hs-identifier hs-var">head</span></a></span><span>
</span><span id="line-180"></span><span>    </span><span class="annot"><span class="annottext">([[SQLData]] -&gt; SummaryDB)
-&gt; SQLite [[SQLData]] -&gt; SQLite SummaryDB
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SQL -&gt; SQLite [[SQLData]]
</span><a href="file:///nix/store/49rppdnin26hx0v2wl3ralyq0sj61ybw-sqlite-easy-lib-sqlite-easy-1.1.1.0-haddock-doc/share/doc/sqlite-easy/html/src/Database.Sqlite.Easy.Internal.html#run"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">SQL
</span><span class="hs-string">&quot;SELECT * FROM summary&quot;</span></span><span>
</span><span id="line-181"></span><span>
</span><span id="line-182"></span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#getTraceFreqs"><span class="hs-identifier hs-type">getTraceFreqs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/49rppdnin26hx0v2wl3ralyq0sj61ybw-sqlite-easy-lib-sqlite-easy-1.1.1.0-haddock-doc/share/doc/sqlite-easy/html/src/Database.Sqlite.Easy.Internal.html#SQLite"><span class="hs-identifier hs-type">SQLite</span></a></span><span> </span><span class="annot"><a href="Cardano.Unlog.LogObject.html#TraceFreqs"><span class="hs-identifier hs-type">TraceFreqs</span></a></span><span>
</span><span id="line-183"></span><span id="getTraceFreqs"><span class="annot"><span class="annottext">getTraceFreqs :: SQLite TraceFreqs
</span><a href="Cardano.Unlog.BackendDB.html#getTraceFreqs"><span class="hs-identifier hs-var hs-var">getTraceFreqs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-184"></span><span>  </span><span class="annot"><span class="annottext">[(Text, Int)] -&gt; TraceFreqs
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Map.Internal.html#fromList"><span class="hs-identifier hs-var">ML.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">([(Text, Int)] -&gt; TraceFreqs)
-&gt; ([[SQLData]] -&gt; [(Text, Int)]) -&gt; [[SQLData]] -&gt; TraceFreqs
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">([SQLData] -&gt; (Text, Int)) -&gt; [[SQLData]] -&gt; [(Text, Int)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">[SQLData] -&gt; (Text, Int)
forall a b. (AsSQLData a, AsSQLData b) =&gt; [SQLData] -&gt; (a, b)
</span><a href="Cardano.Unlog.LogObjectDB.html#fromSqlDataPair"><span class="hs-identifier hs-var">fromSqlDataPair</span></a></span><span>
</span><span id="line-185"></span><span>    </span><span class="annot"><span class="annottext">([[SQLData]] -&gt; TraceFreqs)
-&gt; SQLite [[SQLData]] -&gt; SQLite TraceFreqs
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SQL -&gt; SQLite [[SQLData]]
</span><a href="file:///nix/store/49rppdnin26hx0v2wl3ralyq0sj61ybw-sqlite-easy-lib-sqlite-easy-1.1.1.0-haddock-doc/share/doc/sqlite-easy/html/src/Database.Sqlite.Easy.Internal.html#run"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">SQL
</span><span class="hs-string">&quot;SELECT * FROM tracefreq&quot;</span></span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span id="local-6989586621679429169"><span id="local-6989586621679429170"><span class="annot"><a href="Cardano.Unlog.BackendDB.html#loadHostLogsDB"><span class="hs-identifier hs-type">loadHostLogsDB</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#LoadFromDB"><span class="hs-identifier hs-type">LoadFromDB</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679429169"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679429169"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Unlog.LogObject.html#HostLogs"><span class="hs-identifier hs-type">HostLogs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679429170"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Unlog.LogObject.html#HostLogs"><span class="hs-identifier hs-type">HostLogs</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Cardano.Unlog.BackendDB.html#LoadResult"><span class="hs-identifier hs-type">LoadResult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679429169"><span class="hs-identifier hs-type">l</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-188"></span><span id="loadHostLogsDB"><span class="annot"><span class="annottext">loadHostLogsDB :: forall l a.
LoadFromDB l =&gt;
l -&gt; HostLogs a -&gt; IO (HostLogs [LoadResult l])
</span><a href="Cardano.Unlog.BackendDB.html#loadHostLogsDB"><span class="hs-identifier hs-var hs-var">loadHostLogsDB</span></a></span></span><span> </span><span id="local-6989586621679429581"><span class="annot"><span class="annottext">l
</span><a href="#local-6989586621679429581"><span class="hs-identifier hs-var">loadMode</span></a></span></span><span> </span><span class="annot"><a href="Cardano.Unlog.LogObject.html#HostLogs"><span class="hs-identifier hs-type">HostLogs</span></a></span><span class="hs-special">{</span><span id="local-6989586621679429583"><span id="local-6989586621679429584"><span id="local-6989586621679429585"><span id="local-6989586621679429586"><span id="local-6989586621679429587"><span id="local-6989586621679429588"><span id="local-6989586621679429589"><span class="annot"><span class="annottext">Int
[FilePath]
[ProfileEntry I]
Maybe UTCTime
(LogObjectSource, a)
TraceFreqs
hlRawLogfiles :: [FilePath]
hlRawLines :: Int
hlRawTraceFreqs :: TraceFreqs
hlLogs :: (LogObjectSource, a)
hlProfile :: [ProfileEntry I]
hlRawFirstAt :: Maybe UTCTime
hlRawLastAt :: Maybe UTCTime
hlRawLogfiles :: forall a. HostLogs a -&gt; [FilePath]
hlRawLines :: forall a. HostLogs a -&gt; Int
hlRawTraceFreqs :: forall a. HostLogs a -&gt; TraceFreqs
hlLogs :: forall a. HostLogs a -&gt; (LogObjectSource, a)
hlProfile :: forall a. HostLogs a -&gt; [ProfileEntry I]
hlRawFirstAt :: forall a. HostLogs a -&gt; Maybe UTCTime
hlRawLastAt :: forall a. HostLogs a -&gt; Maybe UTCTime
</span><a href="#local-6989586621679429583"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-189"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">(LogObjectSource, a) -&gt; LogObjectSource
forall a b. (a, b) -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">(LogObjectSource, a)
</span><a href="#local-6989586621679429586"><span class="hs-identifier hs-var">hlLogs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-190"></span><span>    </span><span id="local-6989586621679429598"><span class="annot"><span class="annottext">log :: LogObjectSource
</span><a href="#local-6989586621679429598"><span class="hs-identifier hs-var">log</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Analysis.API.Ground.html#LogObjectSourceSQLite"><span class="hs-identifier hs-type">LogObjectSourceSQLite</span></a></span><span> </span><span id="local-6989586621679429600"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679429600"><span class="hs-identifier hs-var">dbFile</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-191"></span><span>      </span><span class="annot"><span class="annottext">ConnectionString
-&gt; SQLite (HostLogs [LoadResult l]) -&gt; IO (HostLogs [LoadResult l])
forall a. ConnectionString -&gt; SQLite a -&gt; IO a
</span><a href="file:///nix/store/49rppdnin26hx0v2wl3ralyq0sj61ybw-sqlite-easy-lib-sqlite-easy-1.1.1.0-haddock-doc/share/doc/sqlite-easy/html/src/Database.Sqlite.Easy.Internal.html#withDb"><span class="hs-identifier hs-var">withDb</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; ConnectionString
forall a. IsString a =&gt; FilePath -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.String.html#fromString"><span class="hs-identifier hs-var">fromString</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679429600"><span class="hs-identifier hs-var">dbFile</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(SQLite (HostLogs [LoadResult l]) -&gt; IO (HostLogs [LoadResult l]))
-&gt; SQLite (HostLogs [LoadResult l]) -&gt; IO (HostLogs [LoadResult l])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-192"></span><span>
</span><span id="line-193"></span><span>        </span><span class="hs-comment">-- mini-migration for backwards compatibility with DBs based on the old TraceStartLeadershipCheckPlus</span><span>
</span><span id="line-194"></span><span>        </span><span class="annot"><span class="annottext">[[SQLData]]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SQL -&gt; SQLite [[SQLData]]
</span><a href="file:///nix/store/49rppdnin26hx0v2wl3ralyq0sj61ybw-sqlite-easy-lib-sqlite-easy-1.1.1.0-haddock-doc/share/doc/sqlite-easy/html/src/Database.Sqlite.Easy.Internal.html#run"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">SQL
</span><a href="Cardano.Unlog.LogObjectDB.html#createLMetricsIfNotExists"><span class="hs-identifier hs-var">createLMetricsIfNotExists</span></a></span><span>
</span><span id="line-195"></span><span>
</span><span id="line-196"></span><span>        </span><span id="local-6989586621679429602"><span class="annot"><span class="annottext">summary :: SummaryDB
</span><a href="#local-6989586621679429602"><span class="hs-identifier hs-var">summary</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Cardano.Unlog.LogObjectDB.html#SummaryDB"><span class="hs-identifier hs-type">SummaryDB</span></a></span><span class="hs-special">{</span><span id="local-6989586621679429603"><span id="local-6989586621679429604"><span id="local-6989586621679429605"><span id="local-6989586621679429606"><span id="local-6989586621679429607"><span class="annot"><span class="annottext">Int
UTCTime
Host
sdbName :: SummaryDB -&gt; Host
sdbLines :: SummaryDB -&gt; Int
sdbFirstAt :: SummaryDB -&gt; UTCTime
sdbLastAt :: SummaryDB -&gt; UTCTime
sdbCreated :: SummaryDB -&gt; UTCTime
sdbName :: Host
sdbLines :: Int
sdbFirstAt :: UTCTime
sdbLastAt :: UTCTime
sdbCreated :: UTCTime
</span><a href="Cardano.Unlog.LogObjectDB.html#sdbName"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SQLite SummaryDB
</span><a href="Cardano.Unlog.BackendDB.html#getSummary"><span class="hs-identifier hs-var">getSummary</span></a></span><span>
</span><span id="line-197"></span><span>        </span><span id="local-6989586621679429608"><span class="annot"><span class="annottext">TraceFreqs
</span><a href="#local-6989586621679429608"><span class="hs-identifier hs-var">traceFreqs</span></a></span></span><span>            </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">l -&gt; Bool
forall l. LoadFromDB l =&gt; l -&gt; Bool
</span><a href="Cardano.Unlog.BackendDB.html#loadTraceFreqs"><span class="hs-identifier hs-var">loadTraceFreqs</span></a></span><span> </span><span class="annot"><span class="annottext">l
</span><a href="#local-6989586621679429581"><span class="hs-identifier hs-var">loadMode</span></a></span><span>
</span><span id="line-198"></span><span>                                   </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">SQLite TraceFreqs
</span><a href="Cardano.Unlog.BackendDB.html#getTraceFreqs"><span class="hs-identifier hs-var">getTraceFreqs</span></a></span><span>
</span><span id="line-199"></span><span>                                   </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">TraceFreqs -&gt; SQLite TraceFreqs
forall a. a -&gt; SQLite a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">TraceFreqs
</span><a href="#local-6989586621679429585"><span class="hs-identifier hs-var">hlRawTraceFreqs</span></a></span><span>
</span><span id="line-200"></span><span>        </span><span id="local-6989586621679429609"><span class="annot"><span class="annottext">[[SQLData]]
</span><a href="#local-6989586621679429609"><span class="hs-identifier hs-var">rows</span></a></span></span><span>                  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SQLite [[SQLData]]
-&gt; (SQL -&gt; SQLite [[SQLData]]) -&gt; Maybe SQL -&gt; SQLite [[SQLData]]
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Maybe.html#maybe"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[[SQLData]] -&gt; SQLite [[SQLData]]
forall a. a -&gt; SQLite a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SQL -&gt; SQLite [[SQLData]]
</span><a href="file:///nix/store/49rppdnin26hx0v2wl3ralyq0sj61ybw-sqlite-easy-lib-sqlite-easy-1.1.1.0-haddock-doc/share/doc/sqlite-easy/html/src/Database.Sqlite.Easy.Internal.html#run"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">l -&gt; Maybe SQL
forall l. LoadFromDB l =&gt; l -&gt; Maybe SQL
</span><a href="Cardano.Unlog.BackendDB.html#loadQuery"><span class="hs-identifier hs-var">loadQuery</span></a></span><span> </span><span class="annot"><span class="annottext">l
</span><a href="#local-6989586621679429581"><span class="hs-identifier hs-var">loadMode</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-201"></span><span>
</span><span id="line-202"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679429610"><span class="annot"><span class="annottext">rows' :: [LoadResult l]
</span><a href="#local-6989586621679429610"><span class="hs-identifier hs-var hs-var">rows'</span></a></span></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([SQLData] -&gt; LoadResult l) -&gt; [[SQLData]] -&gt; [LoadResult l]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">l -&gt; SummaryDB -&gt; [SQLData] -&gt; LoadResult l
forall l.
LoadFromDB l =&gt;
l -&gt; SummaryDB -&gt; [SQLData] -&gt; LoadResult l
</span><a href="Cardano.Unlog.BackendDB.html#loadConvert"><span class="hs-identifier hs-var">loadConvert</span></a></span><span> </span><span class="annot"><span class="annottext">l
</span><a href="#local-6989586621679429581"><span class="hs-identifier hs-var">loadMode</span></a></span><span> </span><span class="annot"><span class="annottext">SummaryDB
</span><a href="#local-6989586621679429602"><span class="hs-identifier hs-var">summary</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[[SQLData]]
</span><a href="#local-6989586621679429609"><span class="hs-identifier hs-var">rows</span></a></span><span>
</span><span id="line-203"></span><span>
</span><span id="line-204"></span><span>        </span><span class="annot"><span class="annottext">HostLogs [LoadResult l] -&gt; SQLite (HostLogs [LoadResult l])
forall a. a -&gt; SQLite a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(HostLogs [LoadResult l] -&gt; SQLite (HostLogs [LoadResult l]))
-&gt; HostLogs [LoadResult l] -&gt; SQLite (HostLogs [LoadResult l])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><a href="Cardano.Unlog.LogObject.html#HostLogs"><span class="hs-identifier hs-type">HostLogs</span></a></span><span>
</span><span id="line-205"></span><span>          </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hlRawTraceFreqs :: TraceFreqs
</span><a href="Cardano.Unlog.LogObject.html#hlRawTraceFreqs"><span class="hs-identifier hs-var">hlRawTraceFreqs</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TraceFreqs
</span><a href="#local-6989586621679429608"><span class="hs-identifier hs-var">traceFreqs</span></a></span><span>
</span><span id="line-206"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hlRawFirstAt :: Maybe UTCTime
</span><a href="Cardano.Unlog.LogObject.html#hlRawFirstAt"><span class="hs-identifier hs-var">hlRawFirstAt</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UTCTime -&gt; Maybe UTCTime
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679429605"><span class="hs-identifier hs-var">sdbFirstAt</span></a></span><span>
</span><span id="line-207"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hlRawLastAt :: Maybe UTCTime
</span><a href="Cardano.Unlog.LogObject.html#hlRawLastAt"><span class="hs-identifier hs-var">hlRawLastAt</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UTCTime -&gt; Maybe UTCTime
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679429606"><span class="hs-identifier hs-var">sdbLastAt</span></a></span><span>
</span><span id="line-208"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hlRawLines :: Int
</span><a href="Cardano.Unlog.LogObject.html#hlRawLines"><span class="hs-identifier hs-var">hlRawLines</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679429604"><span class="hs-identifier hs-var">sdbLines</span></a></span><span>
</span><span id="line-209"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">hlLogs :: (LogObjectSource, [LoadResult l])
</span><a href="Cardano.Unlog.LogObject.html#hlLogs"><span class="hs-identifier hs-var">hlLogs</span></a></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LogObjectSource
</span><a href="#local-6989586621679429598"><span class="hs-identifier hs-var">log</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LoadResult l]
</span><a href="#local-6989586621679429610"><span class="hs-identifier hs-var">rows'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-210"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[FilePath]
[ProfileEntry I]
hlRawLogfiles :: [FilePath]
hlProfile :: [ProfileEntry I]
hlRawLogfiles :: [FilePath]
hlProfile :: [ProfileEntry I]
</span><a href="#local-6989586621679429583"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span><span>
</span><span id="line-211"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-212"></span><span>    </span><span id="local-6989586621679429611"><span class="annot"><span class="annottext">LogObjectSource
</span><a href="#local-6989586621679429611"><span class="hs-identifier hs-var">other</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO (HostLogs [LoadResult l])
forall a. HasCallStack =&gt; FilePath -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; IO (HostLogs [LoadResult l]))
-&gt; FilePath -&gt; IO (HostLogs [LoadResult l])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;loadHostLogsDB: expected SQLite DB file, got &quot;</span></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">LogObjectSource -&gt; FilePath
forall a. Show a =&gt; a -&gt; FilePath
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">LogObjectSource
</span><a href="#local-6989586621679429611"><span class="hs-identifier hs-var">other</span></a></span><span>
</span><span id="line-213"></span></pre></body></html>