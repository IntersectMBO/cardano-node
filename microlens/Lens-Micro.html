<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Lens.Micro</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">microlens</span><ul class="links" id="page-menu"><li><a href="src/Lens.Micro.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(C) 2013-2016 Edward Kmett 2015-2016 Artyom Kazak 2018 Monadfix</td></tr><tr><th>License</th><td>BSD-style (see the file LICENSE)</td></tr><tr><th>Safe Haskell</th><td>Trustworthy</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Lens.Micro</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Setter: modifies something in a structure</a></li><li><a href="#g:2">Getter: extracts a value from a structure</a></li><li><a href="#g:3">Fold: extracts multiple elements</a></li><li><a href="#g:4">Lens: a combined getter-and-setter</a></li><li><a href="#g:5">Iso: a lens that only changes the representation</a></li><li><a href="#g:6">Traversal: a lens iterating over several elements</a></li><li><a href="#g:7">Prism: a traversal iterating over at most 1 element</a></li><li><a href="#g:8">Other types</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module provides the essential functionality. There are other packages in the microlens family &#8211; mix and match them at will. If you're writing an app, you want <a href="http://hackage.haskell.org/package/microlens-platform">microlens-platform</a> &#8211; it provides the most functionality.</p><ul><li><a href="http://hackage.haskell.org/package/microlens-mtl">microlens-mtl</a> &#8211; (<code>+=</code>) and friends, <code>use</code>, <code>zoom</code>/<code>magnify</code></li><li><a href="http://hackage.haskell.org/package/microlens-th">microlens-th</a> &#8211; <code>makeLenses</code> and <code>makeFields</code></li><li><a href="http://hackage.haskell.org/package/microlens-ghc">microlens-ghc</a> &#8211; everything in microlens + instances to make <code>each</code>/<code>at</code>/<code>ix</code> usable with arrays, <code>ByteString</code>, and containers</li><li><a href="http://hackage.haskell.org/package/microlens-platform">microlens-platform</a> &#8211; microlens-ghc + microlens-mtl + microlens-th + instances for <code>Text</code>, <code>Vector</code>, and <code>HashMap</code></li><li><a href="http://hackage.haskell.org/package/microlens-contra">microlens-contra</a> &#8211; <code>Fold</code> and <code>Getter</code> that are exact copies of types in lens</li></ul><p>Unofficial:</p><ul><li><a href="http://hackage.haskell.org/package/microlens-aeson">microlens-aeson</a> &#8211; a port of <a href="http://hackage.haskell.org/package/lens-aeson">lens-aeson</a></li><li><a href="http://hackage.haskell.org/package/microlens-process">microlens-process</a> - a port of <a href="http://hackage.haskell.org/package/lens-process">lens-process</a></li></ul></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:-38-">(&amp;)</a> :: a -&gt; (a -&gt; b) -&gt; b</li><li class="src short"><a href="#v:-60--38--62-">(&lt;&amp;&gt;)</a> :: <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> f =&gt; f a -&gt; (a -&gt; b) -&gt; f b</li><li class="src short"><span class="keyword">type</span> <a href="#t:ASetter">ASetter</a> s t a b = (a -&gt; <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor-Identity.html#t:Identity" title="Data.Functor.Identity">Identity</a> b) -&gt; s -&gt; <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor-Identity.html#t:Identity" title="Data.Functor.Identity">Identity</a> t</li><li class="src short"><span class="keyword">type</span> <a href="#t:ASetter-39-">ASetter'</a> s a = <a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a> s s a a</li><li class="src short"><a href="#v:sets">sets</a> :: ((a -&gt; b) -&gt; s -&gt; t) -&gt; <a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a> s t a b</li><li class="src short"><a href="#v:-37--126-">(%~)</a> :: <a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a> s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t</li><li class="src short"><a href="#v:over">over</a> :: <a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a> s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t</li><li class="src short"><a href="#v:-43--126-">(+~)</a> :: <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Prelude.html#t:Num" title="Prelude">Num</a> a =&gt; <a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a> s t a a -&gt; a -&gt; s -&gt; t</li><li class="src short"><a href="#v:-45--126-">(-~)</a> :: <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Prelude.html#t:Num" title="Prelude">Num</a> a =&gt; <a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a> s t a a -&gt; a -&gt; s -&gt; t</li><li class="src short"><a href="#v:-60--62--126-">(&lt;&gt;~)</a> :: <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> a =&gt; <a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a> s t a a -&gt; a -&gt; s -&gt; t</li><li class="src short"><a href="#v:.-126-">(.~)</a> :: <a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a> s t a b -&gt; b -&gt; s -&gt; t</li><li class="src short"><a href="#v:set">set</a> :: <a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a> s t a b -&gt; b -&gt; s -&gt; t</li><li class="src short"><a href="#v:-63--126-">(?~)</a> :: <a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a> s t a (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> b) -&gt; b -&gt; s -&gt; t</li><li class="src short"><a href="#v:-60--37--126-">(&lt;%~)</a> :: <a href="Lens-Micro.html#t:LensLike" title="Lens.Micro">LensLike</a> (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/GHC-Tuple-Prim.html#t:-40--44--41-" title="GHC.Tuple.Prim">(,)</a> b) s t a b -&gt; (a -&gt; b) -&gt; s -&gt; (b, t)</li><li class="src short"><a href="#v:-60--60--37--126-">(&lt;&lt;%~)</a> :: <a href="Lens-Micro.html#t:LensLike" title="Lens.Micro">LensLike</a> (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/GHC-Tuple-Prim.html#t:-40--44--41-" title="GHC.Tuple.Prim">(,)</a> a) s t a b -&gt; (a -&gt; b) -&gt; s -&gt; (a, t)</li><li class="src short"><a href="#v:-60--60-.-126-">(&lt;&lt;.~)</a> :: <a href="Lens-Micro.html#t:LensLike" title="Lens.Micro">LensLike</a> (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/GHC-Tuple-Prim.html#t:-40--44--41-" title="GHC.Tuple.Prim">(,)</a> a) s t a b -&gt; b -&gt; s -&gt; (a, t)</li><li class="src short"><a href="#v:mapped">mapped</a> :: <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> f =&gt; <a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a> (f a) (f b) a b</li><li class="src short"><a href="#v:rewriteOf">rewriteOf</a> :: <a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a> a b a b -&gt; (b -&gt; <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) -&gt; a -&gt; b</li><li class="src short"><a href="#v:transformOf">transformOf</a> :: <a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a> a b a b -&gt; (b -&gt; b) -&gt; a -&gt; b</li><li class="src short"><span class="keyword">type</span> <a href="#t:SimpleGetter">SimpleGetter</a> s a = <span class="keyword">forall</span> r. <a href="Lens-Micro.html#t:Getting" title="Lens.Micro">Getting</a> r s a</li><li class="src short"><span class="keyword">type</span> <a href="#t:Getting">Getting</a> r s a = (a -&gt; <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor-Const.html#t:Const" title="Data.Functor.Const">Const</a> r a) -&gt; s -&gt; <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor-Const.html#t:Const" title="Data.Functor.Const">Const</a> r s</li><li class="src short"><a href="#v:-94-.">(^.)</a> :: s -&gt; <a href="Lens-Micro.html#t:Getting" title="Lens.Micro">Getting</a> a s a -&gt; a</li><li class="src short"><a href="#v:to">to</a> :: (s -&gt; a) -&gt; <a href="Lens-Micro.html#t:SimpleGetter" title="Lens.Micro">SimpleGetter</a> s a</li><li class="src short"><span class="keyword">type</span> <a href="#t:SimpleFold">SimpleFold</a> s a = <span class="keyword">forall</span> r. <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> r =&gt; <a href="Lens-Micro.html#t:Getting" title="Lens.Micro">Getting</a> r s a</li><li class="src short"><a href="#v:-94-..">(^..)</a> :: s -&gt; <a href="Lens-Micro.html#t:Getting" title="Lens.Micro">Getting</a> (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Monoid.html#t:Endo" title="Data.Monoid">Endo</a> [a]) s a -&gt; [a]</li><li class="src short"><a href="#v:toListOf">toListOf</a> :: <a href="Lens-Micro.html#t:Getting" title="Lens.Micro">Getting</a> (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Monoid.html#t:Endo" title="Data.Monoid">Endo</a> [a]) s a -&gt; s -&gt; [a]</li><li class="src short"><a href="#v:-94--63-">(^?)</a> :: s -&gt; <a href="Lens-Micro.html#t:Getting" title="Lens.Micro">Getting</a> (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Monoid.html#t:First" title="Data.Monoid">First</a> a) s a -&gt; <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a</li><li class="src short"><a href="#v:-94--63--33-">(^?!)</a> :: <a href="Lens-Micro-Internal.html#t:HasCallStack" title="Lens.Micro.Internal">HasCallStack</a> =&gt; s -&gt; <a href="Lens-Micro.html#t:Getting" title="Lens.Micro">Getting</a> (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Monoid.html#t:Endo" title="Data.Monoid">Endo</a> a) s a -&gt; a</li><li class="src short"><a href="#v:traverseOf_">traverseOf_</a> :: <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> f =&gt; <a href="Lens-Micro.html#t:Getting" title="Lens.Micro">Getting</a> (Traversed r f) s a -&gt; (a -&gt; f r) -&gt; s -&gt; f ()</li><li class="src short"><a href="#v:forOf_">forOf_</a> :: <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> f =&gt; <a href="Lens-Micro.html#t:Getting" title="Lens.Micro">Getting</a> (Traversed r f) s a -&gt; s -&gt; (a -&gt; f r) -&gt; f ()</li><li class="src short"><a href="#v:has">has</a> :: <a href="Lens-Micro.html#t:Getting" title="Lens.Micro">Getting</a> <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Monoid.html#t:Any" title="Data.Monoid">Any</a> s a -&gt; s -&gt; <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:folded">folded</a> :: <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Foldable.html#t:Foldable" title="Data.Foldable">Foldable</a> f =&gt; <a href="Lens-Micro.html#t:SimpleFold" title="Lens.Micro">SimpleFold</a> (f a) a</li><li class="src short"><a href="#v:folding">folding</a> :: <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Foldable.html#t:Foldable" title="Data.Foldable">Foldable</a> f =&gt; (s -&gt; f a) -&gt; <a href="Lens-Micro.html#t:SimpleFold" title="Lens.Micro">SimpleFold</a> s a</li><li class="src short"><span class="keyword">type</span> <a href="#t:Lens">Lens</a> s t a b = <span class="keyword">forall</span> f. <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> f =&gt; (a -&gt; f b) -&gt; s -&gt; f t</li><li class="src short"><span class="keyword">type</span> <a href="#t:Lens-39-">Lens'</a> s a = <a href="Lens-Micro.html#t:Lens" title="Lens.Micro">Lens</a> s s a a</li><li class="src short"><a href="#v:lens">lens</a> :: (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; <a href="Lens-Micro.html#t:Lens" title="Lens.Micro">Lens</a> s t a b</li><li class="src short"><a href="#v:at">at</a> :: <a href="Lens-Micro-Internal.html#t:At" title="Lens.Micro.Internal">At</a> m =&gt; <a href="Lens-Micro-Internal.html#t:Index" title="Lens.Micro.Internal">Index</a> m -&gt; <a href="Lens-Micro.html#t:Lens-39-" title="Lens.Micro">Lens'</a> m (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Lens-Micro-Internal.html#t:IxValue" title="Lens.Micro.Internal">IxValue</a> m))</li><li class="src short"><a href="#v:_1">_1</a> :: <a href="Lens-Micro-Internal.html#t:Field1" title="Lens.Micro.Internal">Field1</a> s t a b =&gt; <a href="Lens-Micro.html#t:Lens" title="Lens.Micro">Lens</a> s t a b</li><li class="src short"><a href="#v:_2">_2</a> :: <a href="Lens-Micro-Internal.html#t:Field2" title="Lens.Micro.Internal">Field2</a> s t a b =&gt; <a href="Lens-Micro.html#t:Lens" title="Lens.Micro">Lens</a> s t a b</li><li class="src short"><a href="#v:_3">_3</a> :: <a href="Lens-Micro-Internal.html#t:Field3" title="Lens.Micro.Internal">Field3</a> s t a b =&gt; <a href="Lens-Micro.html#t:Lens" title="Lens.Micro">Lens</a> s t a b</li><li class="src short"><a href="#v:_4">_4</a> :: <a href="Lens-Micro-Internal.html#t:Field4" title="Lens.Micro.Internal">Field4</a> s t a b =&gt; <a href="Lens-Micro.html#t:Lens" title="Lens.Micro">Lens</a> s t a b</li><li class="src short"><a href="#v:_5">_5</a> :: <a href="Lens-Micro-Internal.html#t:Field5" title="Lens.Micro.Internal">Field5</a> s t a b =&gt; <a href="Lens-Micro.html#t:Lens" title="Lens.Micro">Lens</a> s t a b</li><li class="src short"><a href="#v:strict">strict</a> :: <a href="Lens-Micro-Internal.html#t:Strict" title="Lens.Micro.Internal">Strict</a> lazy strict =&gt; <a href="Lens-Micro.html#t:Lens-39-" title="Lens.Micro">Lens'</a> lazy strict</li><li class="src short"><a href="#v:lazy">lazy</a> :: <a href="Lens-Micro-Internal.html#t:Strict" title="Lens.Micro.Internal">Strict</a> lazy strict =&gt; <a href="Lens-Micro.html#t:Lens-39-" title="Lens.Micro">Lens'</a> strict lazy</li><li class="src short"><a href="#v:non">non</a> :: <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a =&gt; a -&gt; <a href="Lens-Micro.html#t:Lens-39-" title="Lens.Micro">Lens'</a> (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) a</li><li class="src short"><span class="keyword">type</span> <a href="#t:Traversal">Traversal</a> s t a b = <span class="keyword">forall</span> f. <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> f =&gt; (a -&gt; f b) -&gt; s -&gt; f t</li><li class="src short"><span class="keyword">type</span> <a href="#t:Traversal-39-">Traversal'</a> s a = <a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a> s s a a</li><li class="src short"><a href="#v:traverseOf">traverseOf</a> :: <a href="Lens-Micro.html#t:LensLike" title="Lens.Micro">LensLike</a> f s t a b -&gt; (a -&gt; f b) -&gt; s -&gt; f t</li><li class="src short"><a href="#v:forOf">forOf</a> :: <a href="Lens-Micro.html#t:LensLike" title="Lens.Micro">LensLike</a> f s t a b -&gt; s -&gt; (a -&gt; f b) -&gt; f t</li><li class="src short"><a href="#v:singular">singular</a> :: <a href="Lens-Micro-Internal.html#t:HasCallStack" title="Lens.Micro.Internal">HasCallStack</a> =&gt; <a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a> s t a a -&gt; <a href="Lens-Micro.html#t:Lens" title="Lens.Micro">Lens</a> s t a a</li><li class="src short"><a href="#v:failing">failing</a> :: <a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a> s t a b -&gt; <a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a> s t a b -&gt; <a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a> s t a b</li><li class="src short"><a href="#v:filtered">filtered</a> :: (a -&gt; <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Lens-Micro.html#t:Traversal-39-" title="Lens.Micro">Traversal'</a> a a</li><li class="src short"><a href="#v:both">both</a> :: <a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a> (a, a) (b, b) a b</li><li class="src short"><a href="#v:traversed">traversed</a> :: <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Traversable.html#t:Traversable" title="Data.Traversable">Traversable</a> f =&gt; <a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a> (f a) (f b) a b</li><li class="src short"><a href="#v:each">each</a> :: <a href="Lens-Micro-Internal.html#t:Each" title="Lens.Micro.Internal">Each</a> s t a b =&gt; <a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a> s t a b</li><li class="src short"><a href="#v:ix">ix</a> :: <a href="Lens-Micro-Internal.html#t:Ixed" title="Lens.Micro.Internal">Ixed</a> m =&gt; <a href="Lens-Micro-Internal.html#t:Index" title="Lens.Micro.Internal">Index</a> m -&gt; <a href="Lens-Micro.html#t:Traversal-39-" title="Lens.Micro">Traversal'</a> m (<a href="Lens-Micro-Internal.html#t:IxValue" title="Lens.Micro.Internal">IxValue</a> m)</li><li class="src short"><a href="#v:_head">_head</a> :: <a href="Lens-Micro-Internal.html#t:Cons" title="Lens.Micro.Internal">Cons</a> s s a a =&gt; <a href="Lens-Micro.html#t:Traversal-39-" title="Lens.Micro">Traversal'</a> s a</li><li class="src short"><a href="#v:_tail">_tail</a> :: <a href="Lens-Micro-Internal.html#t:Cons" title="Lens.Micro.Internal">Cons</a> s s a a =&gt; <a href="Lens-Micro.html#t:Traversal-39-" title="Lens.Micro">Traversal'</a> s s</li><li class="src short"><a href="#v:_init">_init</a> :: <a href="Lens-Micro-Internal.html#t:Snoc" title="Lens.Micro.Internal">Snoc</a> s s a a =&gt; <a href="Lens-Micro.html#t:Traversal-39-" title="Lens.Micro">Traversal'</a> s s</li><li class="src short"><a href="#v:_last">_last</a> :: <a href="Lens-Micro-Internal.html#t:Snoc" title="Lens.Micro.Internal">Snoc</a> s s a a =&gt; <a href="Lens-Micro.html#t:Traversal-39-" title="Lens.Micro">Traversal'</a> s a</li><li class="src short"><a href="#v:mapAccumLOf">mapAccumLOf</a> :: <a href="Lens-Micro.html#t:LensLike" title="Lens.Micro">LensLike</a> (State acc) s t a b -&gt; (acc -&gt; a -&gt; (acc, b)) -&gt; acc -&gt; s -&gt; (acc, t)</li><li class="src short"><a href="#v:worded">worded</a> :: <a href="Lens-Micro.html#t:Traversal-39-" title="Lens.Micro">Traversal'</a> <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:lined">lined</a> :: <a href="Lens-Micro.html#t:Traversal-39-" title="Lens.Micro">Traversal'</a> <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-String.html#t:String" title="Data.String">String</a></li><li class="src short"><a href="#v:_Left">_Left</a> :: <a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a> (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a> a b) (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a> a' b) a a'</li><li class="src short"><a href="#v:_Right">_Right</a> :: <a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a> (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a> a b) (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a> a b') b b'</li><li class="src short"><a href="#v:_Just">_Just</a> :: <a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a> (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a') a a'</li><li class="src short"><a href="#v:_Nothing">_Nothing</a> :: <a href="Lens-Micro.html#t:Traversal-39-" title="Lens.Micro">Traversal'</a> (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) ()</li><li class="src short"><a href="#v:_Show">_Show</a> :: (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Text-Show.html#t:Show" title="Text.Show">Show</a> a, <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Text-Read.html#t:Read" title="Text.Read">Read</a> a) =&gt; <a href="Lens-Micro.html#t:Traversal-39-" title="Lens.Micro">Traversal'</a> <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-String.html#t:String" title="Data.String">String</a> a</li><li class="src short"><span class="keyword">type</span> <a href="#t:LensLike">LensLike</a> f s t a b = (a -&gt; f b) -&gt; s -&gt; f t</li><li class="src short"><span class="keyword">type</span> <a href="#t:LensLike-39-">LensLike'</a> f s a = <a href="Lens-Micro.html#t:LensLike" title="Lens.Micro">LensLike</a> f s s a a</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:-38-" class="def">(&amp;)</a> :: a -&gt; (a -&gt; b) -&gt; b <span class="fixity">infixl 1</span><span class="rightedge"></span> <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src" class="link">Source</a> <a href="#v:-38-" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#v:-38-" title="Lens.Micro">&amp;</a></code> is a reverse application operator.  This provides notational
 convenience.  Its precedence is one higher than that of the forward
 application operator <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Function.html#v:-36-" title="Data.Function">$</a></code>, which allows <code><a href="Lens-Micro.html#v:-38-" title="Lens.Micro">&amp;</a></code> to be nested in <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Function.html#v:-36-" title="Data.Function">$</a></code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>5 &amp; (+1) &amp; show
</code></strong>&quot;6&quot;
</pre><p><em>Since: base-4.8.0.0</em></p></div></div><div class="doc"><p>This operator is useful when you want to modify something several times. For instance, if you want to change 1st and 3rd elements of a tuple, you can write this:</p><pre>(1,2,3) <code><a href="Lens-Micro.html#v:-38-" title="Lens.Micro">&amp;</a></code> <code><a href="Lens-Micro.html#v:_1" title="Lens.Micro">_1</a></code> <code><a href="Lens-Micro.html#v:.-126-" title="Lens.Micro">.~</a></code> 0
        <code><a href="Lens-Micro.html#v:-38-" title="Lens.Micro">&amp;</a></code> <code><a href="Lens-Micro.html#v:_3" title="Lens.Micro">_3</a></code> <code><a href="Lens-Micro.html#v:-37--126-" title="Lens.Micro">%~</a></code> <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Prelude.html#v:negate" title="Prelude">negate</a></code>
</pre><p>instead of e.g. this:</p><pre>(<code><a href="Lens-Micro.html#v:_1" title="Lens.Micro">_1</a></code> <code><a href="Lens-Micro.html#v:.-126-" title="Lens.Micro">.~</a></code> 0) <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Function.html#v:." title="Data.Function">.</a></code> (<code><a href="Lens-Micro.html#v:_3" title="Lens.Micro">_3</a></code> <code><a href="Lens-Micro.html#v:-37--126-" title="Lens.Micro">%~</a></code> <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Prelude.html#v:negate" title="Prelude">negate</a></code>) <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Function.html#v:-36-" title="Data.Function">$</a></code> (1,2,3)
</pre><p>or this:</p><pre><code><a href="Lens-Micro.html#v:set" title="Lens.Micro">set</a></code> <code><a href="Lens-Micro.html#v:_1" title="Lens.Micro">_1</a></code> 0 <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Function.html#v:." title="Data.Function">.</a></code>
<code><a href="Lens-Micro.html#v:over" title="Lens.Micro">over</a></code> <code><a href="Lens-Micro.html#v:_3" title="Lens.Micro">_3</a></code> <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Prelude.html#v:negate" title="Prelude">negate</a></code>
  <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Function.html#v:-36-" title="Data.Function">$</a></code> (1,2,3)
</pre></div><div class="top"><p class="src"><a id="v:-60--38--62-" class="def">(&lt;&amp;&gt;)</a> :: <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> f =&gt; f a -&gt; (a -&gt; b) -&gt; f b <span class="fixity">infixl 1</span><span class="rightedge"></span> <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/src" class="link">Source</a> <a href="#v:-60--38--62-" class="selflink">#</a></p><div class="doc"><p>Flipped version of <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#v:-60--36--62-" title="Data.Functor">&lt;$&gt;</a></code>.</p><pre>(<code><a href="Lens-Micro.html#v:-60--38--62-" title="Lens.Micro">&lt;&amp;&gt;</a></code>) = <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Function.html#v:flip" title="Data.Function">flip</a></code> <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#v:fmap" title="Data.Functor">fmap</a></code>
</pre><h4 class="subheading details-toggle-control details-toggle" data-details-id="ch:-60--38--62-0">Examples</h4><details id="ch:-60--38--62-0"><summary class="hide-when-js-enabled">Expand</summary><p>Apply <code>(+1)</code> to a list, a <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#v:Just" title="Data.Maybe">Just</a></code> and a <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Either.html#v:Right" title="Data.Either">Right</a></code>:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Just 2 &lt;&amp;&gt; (+1)
</code></strong>Just 3
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>[1,2,3] &lt;&amp;&gt; (+1)
</code></strong>[2,3,4]
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Right 3 &lt;&amp;&gt; (+1)
</code></strong>Right 4
</pre></details><p><em>Since: base-4.11.0.0</em></p></div></div><div class="doc"><p>(<code><a href="Lens-Micro.html#v:-60--38--62-" title="Lens.Micro">&lt;&amp;&gt;</a></code>) is flipped (<code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#v:-60--36--62-" title="Data.Functor">&lt;$&gt;</a></code>):</p><pre>x <code><a href="Lens-Micro.html#v:-60--38--62-" title="Lens.Micro">&lt;&amp;&gt;</a></code> f = f <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#v:-60--36--62-" title="Data.Functor">&lt;$&gt;</a></code> x
</pre><p>It's often useful when writing lenses. For instance, let's say you're writing <code><a href="Lens-Micro.html#v:ix" title="Lens.Micro">ix</a></code> for <code>Map</code>; if the key is found in the map, you have to apply a function to it and then change the map based on the new value &#8211; which requires a lambda, like this:</p><pre><code><a href="Lens-Micro.html#v:ix" title="Lens.Micro">ix</a></code> key f map = case Map.lookup key map of
     Just val -&gt; (\val' -&gt; Map.insert key val' map) <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#v:-60--36--62-" title="Data.Functor">&lt;$&gt;</a></code> f val
     Nothing  -&gt; <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Control-Applicative.html#v:pure" title="Control.Applicative">pure</a></code> map
</pre><p>With (<code><a href="Lens-Micro.html#v:-60--38--62-" title="Lens.Micro">&lt;&amp;&gt;</a></code>) you can get rid of parentheses and move the long lambda expression to the right of the value (like when you use <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Control-Monad.html#v:-62--62--61-" title="Control.Monad">&gt;&gt;=</a></code>):</p><pre><code><a href="Lens-Micro.html#v:ix" title="Lens.Micro">ix</a></code> key f map = case Map.lookup key map of
     Just val -&gt; f val <code><a href="Lens-Micro.html#v:-60--38--62-" title="Lens.Micro">&lt;&amp;&gt;</a></code> \val' -&gt; Map.insert key val' map
     Nothing  -&gt; <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Control-Applicative.html#v:pure" title="Control.Applicative">pure</a></code> map
</pre></div><a href="#g:1" id="g:1"><h1>Setter: modifies something in a structure</h1></a><div class="doc"><p>A setter is, broadly speaking, something that lets you modify a part of some value. Most likely you already know some setters:</p><ul><li><pre><code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Control-Arrow.html#v:first" title="Control.Arrow">first</a></code> :: (a -&gt; b) -&gt; (a, x) -&gt; (b, x)</pre><p>(modifies 1st element of a pair; corresponds to <code><a href="Lens-Micro.html#v:_1" title="Lens.Micro">_1</a></code>)</p></li><li><pre><code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Control-Arrow.html#v:left" title="Control.Arrow">left</a></code> :: (a -&gt; b) -&gt; <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a></code> a x -&gt; <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a></code> b x</pre><p>(modifies left branch of <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a></code>; corresponds to <code><a href="Lens-Micro.html#v:_Left" title="Lens.Micro">_Left</a></code>)</p></li><li><pre><code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/GHC-List.html#v:map" title="GHC.List">map</a></code> :: (a -&gt; b) -&gt; [a] -&gt; [b]</pre><p>(modifies every element in a list; corresponds to <code><a href="Lens-Micro.html#v:mapped" title="Lens.Micro">mapped</a></code>)</p></li></ul><p>As you see, a setter takes a function, a value, and applies the function to some part (or several parts) of the value. Moreover, setters can be pretty specific &#8211; for instance, a function that modifies the 3rd element of a list is a setter too:</p><pre>-- Modify 3rd element in a list, if present.
modify3rd :: (a -&gt; a) -&gt; [a] -&gt; [a]
modify3rd f (a:b:c:xs) = a : b : f c : xs
modify3rd _ xs         = xs
</pre><p>A nice thing about setters is that they compose easily &#8211; you can write <code><code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/GHC-List.html#v:map" title="GHC.List">map</a></code> <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Function.html#v:." title="Data.Function">.</a></code> <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Control-Arrow.html#v:left" title="Control.Arrow">left</a></code></code> and it would be a function that takes a list of <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a></code>s and modifies all of them that are <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Either.html#v:Left" title="Data.Either">Left</a></code>s.</p><p>This library provides its own type for setters &#8211; <code><a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a></code>; it's needed so that some functions in this library (like <code><a href="Lens-Micro.html#v:_1" title="Lens.Micro">_1</a></code>) would be usable both as setters and as getters. You can turn an ordinary function like <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/GHC-List.html#v:map" title="GHC.List">map</a></code> to a &#8220;lensy&#8221; setter with <code><a href="Lens-Micro.html#v:sets" title="Lens.Micro">sets</a></code>.</p><p>To apply a setter to a value, use (<code><a href="Lens-Micro.html#v:-37--126-" title="Lens.Micro">%~</a></code>) or <code><a href="Lens-Micro.html#v:over" title="Lens.Micro">over</a></code>:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>[1,2,3] &amp; mapped %~ succ
</code></strong>[2,3,4]
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>over _head toUpper &quot;jane&quot;
</code></strong>&quot;Jane&quot;
</pre><p>To modify a value deeper inside the structure, use (<code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Function.html#v:." title="Data.Function">.</a></code>):</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>[&quot;abc&quot;,&quot;def&quot;,&quot;ghi&quot;] &amp; ix 1 . ix 2 %~ toUpper
</code></strong>[&quot;abc&quot;,&quot;deF&quot;,&quot;ghi&quot;]
</pre><p>To set a value instead of modifying it, use <code><a href="Lens-Micro.html#v:set" title="Lens.Micro">set</a></code> or (<code><a href="Lens-Micro.html#v:.-126-" title="Lens.Micro">.~</a></code>):</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>&quot;abc&quot; &amp; mapped .~ 'x'
</code></strong>&quot;xxx&quot;
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>set _2 'X' ('a','b','c')
</code></strong>('a','X','c')
</pre><p>It's also possible to get both the old and the new value back &#8211; see (<code><a href="Lens-Micro.html#v:-60--37--126-" title="Lens.Micro">&lt;%~</a></code>) and (<code><a href="Lens-Micro.html#v:-60--60--37--126-" title="Lens.Micro">&lt;&lt;%~</a></code>).</p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:ASetter" class="def">ASetter</a> s t a b = (a -&gt; <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor-Identity.html#t:Identity" title="Data.Functor.Identity">Identity</a> b) -&gt; s -&gt; <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor-Identity.html#t:Identity" title="Data.Functor.Identity">Identity</a> t <a href="src/Lens.Micro.Type.html#ASetter" class="link">Source</a> <a href="#t:ASetter" class="selflink">#</a></p><div class="doc"><p><code>ASetter s t a b</code> is something that turns a function modifying a value into a function modifying a <em>structure</em>. If you ignore <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor-Identity.html#t:Identity" title="Data.Functor.Identity">Identity</a></code> (as <code>Identity a</code> is the same thing as <code>a</code>), the type is:</p><pre>type ASetter s t a b = (a -&gt; b) -&gt; s -&gt; t
</pre><p>The reason <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor-Identity.html#t:Identity" title="Data.Functor.Identity">Identity</a></code> is used here is for <code><a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a></code> to be composable with other types, such as <code><a href="Lens-Micro.html#t:Lens" title="Lens.Micro">Lens</a></code>.</p><p>Technically, if you're writing a library, you shouldn't use this type for setters you are exporting from your library; the right type to use is <code><a href="http://hackage.haskell.org/package/lens/docs/Control-Lens-Setter.html#t:Setter">Setter</a></code>, but it is not provided by this package (because then it'd have to depend on <a href="http://hackage.haskell.org/package/distributive">distributive</a>). It's completely alright, however, to export functions which take an <code><a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a></code> as an argument.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:ASetter-39-" class="def">ASetter'</a> s a = <a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a> s s a a <a href="src/Lens.Micro.Type.html#ASetter%27" class="link">Source</a> <a href="#t:ASetter-39-" class="selflink">#</a></p><div class="doc"><p>This is a type alias for monomorphic setters which don't change the type of the container (or of the value inside). It's useful more often than the same type in lens, because we can't provide real setters and so it does the job of both <code><a href="http://hackage.haskell.org/package/lens/docs/Control-Lens-Setter.html#t:ASetter-39-">ASetter'</a></code> and <code><a href="http://hackage.haskell.org/package/lens/docs/Control-Lens-Setter.html#t:Setter-39-">Setter'</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:sets" class="def">sets</a> :: ((a -&gt; b) -&gt; s -&gt; t) -&gt; <a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a> s t a b <a href="src/Lens.Micro.Internal.html#sets" class="link">Source</a> <a href="#v:sets" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#v:sets" title="Lens.Micro">sets</a></code> creates an <code><a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a></code> from an ordinary function. (The only thing it does is wrapping and unwrapping <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor-Identity.html#t:Identity" title="Data.Functor.Identity">Identity</a></code>.)</p></div></div><div class="top"><p class="src"><a id="v:-37--126-" class="def">(%~)</a> :: <a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a> s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t <span class="fixity">infixr 4</span><span class="rightedge"></span> <a href="src/Lens.Micro.html#%25~" class="link">Source</a> <a href="#v:-37--126-" class="selflink">#</a></p><div class="doc"><p>(<code><a href="Lens-Micro.html#v:-37--126-" title="Lens.Micro">%~</a></code>) applies a function to the target; an alternative explanation is that it is an inverse of <code><a href="Lens-Micro.html#v:sets" title="Lens.Micro">sets</a></code>, which turns a setter into an ordinary function. <code><code><a href="Lens-Micro.html#v:mapped" title="Lens.Micro">mapped</a></code> <code><a href="Lens-Micro.html#v:-37--126-" title="Lens.Micro">%~</a></code> <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/GHC-List.html#v:reverse" title="GHC.List">reverse</a></code></code> is the same thing as <code><code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#v:fmap" title="Data.Functor">fmap</a></code> <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/GHC-List.html#v:reverse" title="GHC.List">reverse</a></code></code>.</p><p>See <code><a href="Lens-Micro.html#v:over" title="Lens.Micro">over</a></code> if you want a non-operator synonym.</p><p>Negating the 1st element of a pair:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(1,2) &amp; _1 %~ negate
</code></strong>(-1,2)
</pre><p>Turning all <code>Left</code>s in a list to upper case:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(mapped._Left.mapped %~ toUpper) [Left &quot;foo&quot;, Right &quot;bar&quot;]
</code></strong>[Left &quot;FOO&quot;,Right &quot;bar&quot;]
</pre></div></div><div class="top"><p class="src"><a id="v:over" class="def">over</a> :: <a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a> s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t <a href="src/Lens.Micro.html#over" class="link">Source</a> <a href="#v:over" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#v:over" title="Lens.Micro">over</a></code> is a synonym for (<code><a href="Lens-Micro.html#v:-37--126-" title="Lens.Micro">%~</a></code>).</p><p>Getting <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#v:fmap" title="Data.Functor">fmap</a></code> in a roundabout way:</p><pre><code><a href="Lens-Micro.html#v:over" title="Lens.Micro">over</a></code> <code><a href="Lens-Micro.html#v:mapped" title="Lens.Micro">mapped</a></code> :: <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a></code> f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
<code><a href="Lens-Micro.html#v:over" title="Lens.Micro">over</a></code> <code><a href="Lens-Micro.html#v:mapped" title="Lens.Micro">mapped</a></code> = <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#v:fmap" title="Data.Functor">fmap</a></code>
</pre><p>Applying a function to both components of a pair:</p><pre><code><a href="Lens-Micro.html#v:over" title="Lens.Micro">over</a></code> <code><a href="Lens-Micro.html#v:both" title="Lens.Micro">both</a></code> :: (a -&gt; b) -&gt; (a, a) -&gt; (b, b)
<code><a href="Lens-Micro.html#v:over" title="Lens.Micro">over</a></code> <code><a href="Lens-Micro.html#v:both" title="Lens.Micro">both</a></code> = \f t -&gt; (f (fst t), f (snd t))
</pre><p>Using <code><code><a href="Lens-Micro.html#v:over" title="Lens.Micro">over</a></code> <code><a href="Lens-Micro.html#v:_2" title="Lens.Micro">_2</a></code></code> as a replacement for <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Control-Arrow.html#v:second" title="Control.Arrow">second</a></code>:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>over _2 show (10,20)
</code></strong>(10,&quot;20&quot;)
</pre></div></div><div class="top"><p class="src"><a id="v:-43--126-" class="def">(+~)</a> :: <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Prelude.html#t:Num" title="Prelude">Num</a> a =&gt; <a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a> s t a a -&gt; a -&gt; s -&gt; t <span class="fixity">infixr 4</span><span class="rightedge"></span> <a href="src/Lens.Micro.html#%2B~" class="link">Source</a> <a href="#v:-43--126-" class="selflink">#</a></p><div class="doc"><p>Increment the target(s) of a numerically valued <code><a href="Lens-Micro.html#t:Lens" title="Lens.Micro">Lens</a></code> or <code><a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a></code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(a,b) &amp; _1 +~ c
</code></strong>(a + c,b)
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(a,b) &amp; both +~ c
</code></strong>(a + c,b + c)
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(1,2) &amp; _2 +~ 1
</code></strong>(1,3)
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>[(a,b),(c,d)] &amp; traverse.both +~ e
</code></strong>[(a + e,b + e),(c + e,d + e)]
</pre><pre>(<code><a href="Lens-Micro.html#v:-43--126-" title="Lens.Micro">+~</a></code>) :: <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Prelude.html#t:Num" title="Prelude">Num</a></code> a =&gt; <code><a href="Lens-Micro.html#t:Lens-39-" title="Lens.Micro">Lens'</a></code> s a      -&gt; a -&gt; s -&gt; s
(<code><a href="Lens-Micro.html#v:-43--126-" title="Lens.Micro">+~</a></code>) :: <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Prelude.html#t:Num" title="Prelude">Num</a></code> a =&gt; <code><a href="Lens-Micro.html#t:Traversal-39-" title="Lens.Micro">Traversal'</a></code> s a -&gt; a -&gt; s -&gt; s
</pre><p><em>Since: 0.4.10</em></p></div></div><div class="top"><p class="src"><a id="v:-45--126-" class="def">(-~)</a> :: <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Prelude.html#t:Num" title="Prelude">Num</a> a =&gt; <a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a> s t a a -&gt; a -&gt; s -&gt; t <span class="fixity">infixr 4</span><span class="rightedge"></span> <a href="src/Lens.Micro.html#-~" class="link">Source</a> <a href="#v:-45--126-" class="selflink">#</a></p><div class="doc"><p>Decrement the target(s) of a numerically valued <code><a href="Lens-Micro.html#t:Lens" title="Lens.Micro">Lens</a></code>, or <code><a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a></code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(a,b) &amp; _1 -~ c
</code></strong>(a - c,b)
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(a,b) &amp; both -~ c
</code></strong>(a - c,b - c)
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>_1 -~ 2 $ (1,2)
</code></strong>(-1,2)
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>mapped.mapped -~ 1 $ [[4,5],[6,7]]
</code></strong>[[3,4],[5,6]]
</pre><pre>(<code><a href="Lens-Micro.html#v:-45--126-" title="Lens.Micro">-~</a></code>) :: <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Prelude.html#t:Num" title="Prelude">Num</a></code> a =&gt; <code><a href="Lens-Micro.html#t:Lens-39-" title="Lens.Micro">Lens'</a></code> s a      -&gt; a -&gt; s -&gt; s
(<code><a href="Lens-Micro.html#v:-45--126-" title="Lens.Micro">-~</a></code>) :: <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Prelude.html#t:Num" title="Prelude">Num</a></code> a =&gt; <code><a href="Lens-Micro.html#t:Traversal-39-" title="Lens.Micro">Traversal'</a></code> s a -&gt; a -&gt; s -&gt; s
</pre><p><em>Since: 0.4.10</em></p></div></div><div class="top"><p class="src"><a id="v:-60--62--126-" class="def">(&lt;&gt;~)</a> :: <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> a =&gt; <a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a> s t a a -&gt; a -&gt; s -&gt; t <span class="fixity">infixr 4</span><span class="rightedge"></span> <a href="src/Lens.Micro.html#%3C%3E~" class="link">Source</a> <a href="#v:-60--62--126-" class="selflink">#</a></p><div class="doc"><p>(<code><a href="Lens-Micro.html#v:-60--62--126-" title="Lens.Micro">&lt;&gt;~</a></code>) appends a value monoidally to the target.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(&quot;hello&quot;, &quot;goodbye&quot;) &amp; both &lt;&gt;~ &quot; world!&quot;
</code></strong>(&quot;hello world!&quot;, &quot;goodbye world!&quot;)
</pre><p><em>Since: 0.4.9</em></p></div></div><div class="top"><p class="src"><a id="v:.-126-" class="def">(.~)</a> :: <a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a> s t a b -&gt; b -&gt; s -&gt; t <span class="fixity">infixr 4</span><span class="rightedge"></span> <a href="src/Lens.Micro.html#.~" class="link">Source</a> <a href="#v:.-126-" class="selflink">#</a></p><div class="doc"><p>(<code><a href="Lens-Micro.html#v:.-126-" title="Lens.Micro">.~</a></code>) assigns a value to the target. It's the same thing as using (<code><a href="Lens-Micro.html#v:-37--126-" title="Lens.Micro">%~</a></code>) with <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Function.html#v:const" title="Data.Function">const</a></code>:</p><pre>l <code><a href="Lens-Micro.html#v:.-126-" title="Lens.Micro">.~</a></code> x = l <code><a href="Lens-Micro.html#v:-37--126-" title="Lens.Micro">%~</a></code> <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Function.html#v:const" title="Data.Function">const</a></code> x
</pre><p>See <code><a href="Lens-Micro.html#v:set" title="Lens.Micro">set</a></code> if you want a non-operator synonym.</p><p>Here it is used to change 2 fields of a 3-tuple:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(0,0,0) &amp; _1 .~ 1 &amp; _3 .~ 3
</code></strong>(1,0,3)
</pre></div></div><div class="top"><p class="src"><a id="v:set" class="def">set</a> :: <a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a> s t a b -&gt; b -&gt; s -&gt; t <a href="src/Lens.Micro.html#set" class="link">Source</a> <a href="#v:set" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#v:set" title="Lens.Micro">set</a></code> is a synonym for (<code><a href="Lens-Micro.html#v:.-126-" title="Lens.Micro">.~</a></code>).</p><p>Setting the 1st component of a pair:</p><pre><code><a href="Lens-Micro.html#v:set" title="Lens.Micro">set</a></code> <code><a href="Lens-Micro.html#v:_1" title="Lens.Micro">_1</a></code> :: x -&gt; (a, b) -&gt; (x, b)
<code><a href="Lens-Micro.html#v:set" title="Lens.Micro">set</a></code> <code><a href="Lens-Micro.html#v:_1" title="Lens.Micro">_1</a></code> = \x t -&gt; (x, snd t)
</pre><p>Using it to rewrite (<code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#v:-60--36-" title="Data.Functor">&lt;$</a></code>):</p><pre><code><a href="Lens-Micro.html#v:set" title="Lens.Micro">set</a></code> <code><a href="Lens-Micro.html#v:mapped" title="Lens.Micro">mapped</a></code> :: <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a></code> f =&gt; a -&gt; f b -&gt; f a
<code><a href="Lens-Micro.html#v:set" title="Lens.Micro">set</a></code> <code><a href="Lens-Micro.html#v:mapped" title="Lens.Micro">mapped</a></code> = (<code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#v:-60--36-" title="Data.Functor">&lt;$</a></code>)
</pre></div></div><div class="top"><p class="src"><a id="v:-63--126-" class="def">(?~)</a> :: <a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a> s t a (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> b) -&gt; b -&gt; s -&gt; t <span class="fixity">infixr 4</span><span class="rightedge"></span> <a href="src/Lens.Micro.html#%3F~" class="link">Source</a> <a href="#v:-63--126-" class="selflink">#</a></p><div class="doc"><p>(<code><a href="Lens-Micro.html#v:-63--126-" title="Lens.Micro">?~</a></code>) is a version of (<code><a href="Lens-Micro.html#v:.-126-" title="Lens.Micro">.~</a></code>) that wraps the value into <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#v:Just" title="Data.Maybe">Just</a></code> before setting.</p><pre>l ?~ b = l .~ Just b
</pre><p>It can be useful in combination with <code><a href="Lens-Micro.html#v:at" title="Lens.Micro">at</a></code>:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Map.empty &amp; at 3 ?~ x
</code></strong>fromList [(3,x)]
</pre></div></div><div class="top"><p class="src"><a id="v:-60--37--126-" class="def">(&lt;%~)</a> :: <a href="Lens-Micro.html#t:LensLike" title="Lens.Micro">LensLike</a> (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/GHC-Tuple-Prim.html#t:-40--44--41-" title="GHC.Tuple.Prim">(,)</a> b) s t a b -&gt; (a -&gt; b) -&gt; s -&gt; (b, t) <span class="fixity">infixr 4</span><span class="rightedge"></span> <a href="src/Lens.Micro.html#%3C%25~" class="link">Source</a> <a href="#v:-60--37--126-" class="selflink">#</a></p><div class="doc"><p>This is a version of (<code><a href="Lens-Micro.html#v:-37--126-" title="Lens.Micro">%~</a></code>) which modifies the structure and returns it along with the new value:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(1, 2) &amp; _1 &lt;%~ negate
</code></strong>(-1, (-1, 2))
</pre><p>Simpler type signatures:</p><pre>(<code><a href="Lens-Micro.html#v:-60--37--126-" title="Lens.Micro">&lt;%~</a></code>) ::             <code><a href="Lens-Micro.html#t:Lens" title="Lens.Micro">Lens</a></code> s t a b      -&gt; (a -&gt; b) -&gt; s -&gt; (b, t)
(<code><a href="Lens-Micro.html#v:-60--37--126-" title="Lens.Micro">&lt;%~</a></code>) :: <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a></code> b =&gt; <code><a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a></code> s t a b -&gt; (a -&gt; b) -&gt; s -&gt; (b, t)
</pre><p>Since it does getting in addition to setting, you can't use it with <code><a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a></code> (but you can use it with lens and traversals).</p></div></div><div class="top"><p class="src"><a id="v:-60--60--37--126-" class="def">(&lt;&lt;%~)</a> :: <a href="Lens-Micro.html#t:LensLike" title="Lens.Micro">LensLike</a> (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/GHC-Tuple-Prim.html#t:-40--44--41-" title="GHC.Tuple.Prim">(,)</a> a) s t a b -&gt; (a -&gt; b) -&gt; s -&gt; (a, t) <span class="fixity">infixr 4</span><span class="rightedge"></span> <a href="src/Lens.Micro.html#%3C%3C%25~" class="link">Source</a> <a href="#v:-60--60--37--126-" class="selflink">#</a></p><div class="doc"><p>This is a version of (<code><a href="Lens-Micro.html#v:-37--126-" title="Lens.Micro">%~</a></code>) which modifies the structure and returns it along with the old value:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(1, 2) &amp; _1 &lt;&lt;%~ negate
</code></strong>(1, (-1, 2))
</pre><p>Simpler type signatures:</p><pre>(<code><a href="Lens-Micro.html#v:-60--60--37--126-" title="Lens.Micro">&lt;&lt;%~</a></code>) ::             <code><a href="Lens-Micro.html#t:Lens" title="Lens.Micro">Lens</a></code> s t a b      -&gt; (a -&gt; b) -&gt; s -&gt; (a, t)
(<code><a href="Lens-Micro.html#v:-60--60--37--126-" title="Lens.Micro">&lt;&lt;%~</a></code>) :: <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a></code> a =&gt; <code><a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a></code> s t a b -&gt; (a -&gt; b) -&gt; s -&gt; (a, t)
</pre></div></div><div class="top"><p class="src"><a id="v:-60--60-.-126-" class="def">(&lt;&lt;.~)</a> :: <a href="Lens-Micro.html#t:LensLike" title="Lens.Micro">LensLike</a> (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/ghc-prim-0.10.0/GHC-Tuple-Prim.html#t:-40--44--41-" title="GHC.Tuple.Prim">(,)</a> a) s t a b -&gt; b -&gt; s -&gt; (a, t) <span class="fixity">infixr 4</span><span class="rightedge"></span> <a href="src/Lens.Micro.html#%3C%3C.~" class="link">Source</a> <a href="#v:-60--60-.-126-" class="selflink">#</a></p><div class="doc"><p>This is a version of (<code><a href="Lens-Micro.html#v:.-126-" title="Lens.Micro">.~</a></code>) which modifies the structure and returns it along with the old value:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(1, 2) &amp; _1 &lt;&lt;.~ 0
</code></strong>(1, (0, 2))
</pre><p>Simpler type signatures:</p><pre>(<code><a href="Lens-Micro.html#v:-60--60-.-126-" title="Lens.Micro">&lt;&lt;.~</a></code>) ::             <code><a href="Lens-Micro.html#t:Lens" title="Lens.Micro">Lens</a></code> s t a b      -&gt; b -&gt; s -&gt; (a, t)
(<code><a href="Lens-Micro.html#v:-60--60-.-126-" title="Lens.Micro">&lt;&lt;.~</a></code>) :: <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a></code> a =&gt; <code><a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a></code> s t a b -&gt; b -&gt; s -&gt; (a, t)
</pre></div></div><div class="top"><p class="src"><a id="v:mapped" class="def">mapped</a> :: <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> f =&gt; <a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a> (f a) (f b) a b <a href="src/Lens.Micro.html#mapped" class="link">Source</a> <a href="#v:mapped" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#v:mapped" title="Lens.Micro">mapped</a></code> is a setter for everything contained in a functor. You can use it to map over lists, <code>Maybe</code>, or even <code>IO</code> (which is something you can't do with <code><a href="Lens-Micro.html#v:traversed" title="Lens.Micro">traversed</a></code> or <code><a href="Lens-Micro.html#v:each" title="Lens.Micro">each</a></code>).</p><p>Here <code><a href="Lens-Micro.html#v:mapped" title="Lens.Micro">mapped</a></code> is used to turn a value to all non-<code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> values in a list:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>[Just 3,Nothing,Just 5] &amp; mapped.mapped .~ 0
</code></strong>[Just 0,Nothing,Just 0]
</pre><p>Keep in mind that while <code><a href="Lens-Micro.html#v:mapped" title="Lens.Micro">mapped</a></code> is a more powerful setter than <code><a href="Lens-Micro.html#v:each" title="Lens.Micro">each</a></code>, it can't be used as a getter! This won't work (and will fail with a type error):</p><pre>[(1,2),(3,4),(5,6)] <code><a href="Lens-Micro.html#v:-94-.." title="Lens.Micro">^..</a></code> <code><a href="Lens-Micro.html#v:mapped" title="Lens.Micro">mapped</a></code> . <code><a href="Lens-Micro.html#v:both" title="Lens.Micro">both</a></code>
</pre></div></div><div class="top"><p class="src"><a id="v:rewriteOf" class="def">rewriteOf</a> :: <a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a> a b a b -&gt; (b -&gt; <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) -&gt; a -&gt; b <a href="src/Lens.Micro.html#rewriteOf" class="link">Source</a> <a href="#v:rewriteOf" class="selflink">#</a></p><div class="doc"><p>&#8594; See <a href="https://github.com/monadfix/microlens/pull/119#issuecomment-496004851">an example</a> on GitHub.</p><p>Rewrite by applying a rule everywhere you can. Ensures that the rule cannot be applied anywhere in the result.</p><p>Usually <code><a href="Lens-Micro.html#v:transformOf" title="Lens.Micro">transformOf</a></code> is more appropriate, but <code><a href="Lens-Micro.html#v:rewriteOf" title="Lens.Micro">rewriteOf</a></code> can give better compositionality. Given two single transformations <code>f</code> and <code>g</code>, you can construct <code>\a -&gt; f a <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Control-Applicative.html#v:-60--124--62-" title="Control.Applicative">&lt;|&gt;</a></code> g a</code> which performs both rewrites until a fixed point.</p><p><em>Since: 0.4.11</em></p></div></div><div class="top"><p class="src"><a id="v:transformOf" class="def">transformOf</a> :: <a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a> a b a b -&gt; (b -&gt; b) -&gt; a -&gt; b <a href="src/Lens.Micro.html#transformOf" class="link">Source</a> <a href="#v:transformOf" class="selflink">#</a></p><div class="doc"><p>Transform every element by recursively applying a given <code><a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a></code> in a bottom-up manner.</p><p><em>Since: 0.4.11</em></p></div></div><a href="#g:2" id="g:2"><h1>Getter: extracts a value from a structure</h1></a><div class="doc"><p>A getter extracts something from a value; in fact, any function is a getter. However, same as with setters, this library uses a special type for getters so that functions like <code><a href="Lens-Micro.html#v:_1" title="Lens.Micro">_1</a></code> would be usable both as a setter and a getter. An ordinary function can be turned into a getter with <code><a href="Lens-Micro.html#v:to" title="Lens.Micro">to</a></code>.</p><p>Using a getter is done with (<code><a href="Lens-Micro.html#v:-94-." title="Lens.Micro">^.</a></code>) or <code><a href="Lens-Micro-Extras.html#v:view" title="Lens.Micro.Extras">view</a></code> from <a href="Lens-Micro-Extras.html">Lens.Micro.Extras</a>:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>('x','y') ^. _1
</code></strong>'x'
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>view (ix 2) [0..5]
</code></strong>2
</pre><p>Getters can be composed with (<code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Function.html#v:." title="Data.Function">.</a></code>):</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>[(1,2),(3,4),(5,6)] ^. ix 1 . _2
</code></strong>4
</pre><p>A getter always returns exactly 1 element (getters that can return more than one element are called folds and are present in this library as well).</p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:SimpleGetter" class="def">SimpleGetter</a> s a = <span class="keyword">forall</span> r. <a href="Lens-Micro.html#t:Getting" title="Lens.Micro">Getting</a> r s a <a href="src/Lens.Micro.Type.html#SimpleGetter" class="link">Source</a> <a href="#t:SimpleGetter" class="selflink">#</a></p><div class="doc"><p>A <code>SimpleGetter s a</code> extracts <code>a</code> from <code>s</code>; so, it's the same thing as <code>(s -&gt; a)</code>, but you can use it in lens chains because its type looks like this:</p><pre>type SimpleGetter s a =
  forall r. (a -&gt; Const r a) -&gt; s -&gt; Const r s
</pre><p>Since <code>Const r</code> is a functor, <code><a href="Lens-Micro.html#t:SimpleGetter" title="Lens.Micro">SimpleGetter</a></code> has the same shape as other lens types and can be composed with them. To get <code>(s -&gt; a)</code> out of a <code><a href="Lens-Micro.html#t:SimpleGetter" title="Lens.Micro">SimpleGetter</a></code>, choose <code>r ~ a</code> and feed <code>Const :: a -&gt; Const a a</code> to the getter:</p><pre>-- the actual signature is more permissive:
-- <code><a href="Lens-Micro-Extras.html#v:view" title="Lens.Micro.Extras">view</a></code> :: <code><a href="Lens-Micro.html#t:Getting" title="Lens.Micro">Getting</a></code> a s a -&gt; s -&gt; a
<code><a href="Lens-Micro-Extras.html#v:view" title="Lens.Micro.Extras">view</a></code> :: <code><a href="Lens-Micro.html#t:SimpleGetter" title="Lens.Micro">SimpleGetter</a></code> s a -&gt; s -&gt; a
<code><a href="Lens-Micro-Extras.html#v:view" title="Lens.Micro.Extras">view</a></code> getter = <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor-Const.html#v:getConst" title="Data.Functor.Const">getConst</a></code> . getter <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor-Const.html#t:Const" title="Data.Functor.Const">Const</a></code>
</pre><p>The actual <code><a href="http://hackage.haskell.org/package/lens/docs/Control-Lens-Getter.html#t:Getter">Getter</a></code> from lens is more general:</p><pre>type Getter s a =
  forall f. (Contravariant f, Functor f) =&gt; (a -&gt; f a) -&gt; s -&gt; f s
</pre><p>I'm not currently aware of any functions that take lens's <code>Getter</code> but won't accept <code><a href="Lens-Micro.html#t:SimpleGetter" title="Lens.Micro">SimpleGetter</a></code>, but you should try to avoid exporting <code><a href="Lens-Micro.html#t:SimpleGetter" title="Lens.Micro">SimpleGetter</a></code>s anyway to minimise confusion. Alternatively, look at <a href="http://hackage.haskell.org/package/microlens-contra">microlens-contra</a>, which provides a fully lens-compatible <code>Getter</code>.</p><p>Lens users: you can convert a <code><a href="Lens-Micro.html#t:SimpleGetter" title="Lens.Micro">SimpleGetter</a></code> to <code>Getter</code> by applying <code>to . view</code> to it.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Getting" class="def">Getting</a> r s a = (a -&gt; <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor-Const.html#t:Const" title="Data.Functor.Const">Const</a> r a) -&gt; s -&gt; <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor-Const.html#t:Const" title="Data.Functor.Const">Const</a> r s <a href="src/Lens.Micro.Type.html#Getting" class="link">Source</a> <a href="#t:Getting" class="selflink">#</a></p><div class="doc"><p>Functions that operate on getters and folds &#8211; such as (<code><a href="Lens-Micro.html#v:-94-." title="Lens.Micro">^.</a></code>), (<code><a href="Lens-Micro.html#v:-94-.." title="Lens.Micro">^..</a></code>), (<code><a href="Lens-Micro.html#v:-94--63-" title="Lens.Micro">^?</a></code>) &#8211; use <code>Getter r s a</code> (with different values of <code>r</code>) to describe what kind of result they need. For instance, (<code><a href="Lens-Micro.html#v:-94-." title="Lens.Micro">^.</a></code>) needs the getter to be able to return a single value, and so it accepts a getter of type <code>Getting a s a</code>. (<code><a href="Lens-Micro.html#v:-94-.." title="Lens.Micro">^..</a></code>) wants the getter to gather values together, so it uses <code>Getting (Endo [a]) s a</code> (it could've used <code>Getting [a] s a</code> instead, but it's faster with <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Monoid.html#v:Endo" title="Data.Monoid">Endo</a></code>). The choice of <code>r</code> depends on what you want to do with elements you're extracting from <code>s</code>.</p></div></div><div class="top"><p class="src"><a id="v:-94-." class="def">(^.)</a> :: s -&gt; <a href="Lens-Micro.html#t:Getting" title="Lens.Micro">Getting</a> a s a -&gt; a <span class="fixity">infixl 8</span><span class="rightedge"></span> <a href="src/Lens.Micro.html#%5E." class="link">Source</a> <a href="#v:-94-." class="selflink">#</a></p><div class="doc"><p>(<code><a href="Lens-Micro.html#v:-94-." title="Lens.Micro">^.</a></code>) applies a getter to a value; in other words, it gets a value out of a structure using a getter (which can be a lens, traversal, fold, etc.).</p><p>Getting 1st field of a tuple:</p><pre>(<code><a href="Lens-Micro.html#v:-94-." title="Lens.Micro">^.</a></code> <code><a href="Lens-Micro.html#v:_1" title="Lens.Micro">_1</a></code>) :: (a, b) -&gt; a
(<code><a href="Lens-Micro.html#v:-94-." title="Lens.Micro">^.</a></code> <code><a href="Lens-Micro.html#v:_1" title="Lens.Micro">_1</a></code>) = <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Tuple.html#v:fst" title="Data.Tuple">fst</a></code>
</pre><p>When (<code><a href="Lens-Micro.html#v:-94-." title="Lens.Micro">^.</a></code>) is used with a traversal, it combines all results using the <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a></code> instance for the resulting type. For instance, for lists it would be simple concatenation:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(&quot;str&quot;,&quot;ing&quot;) ^. each
</code></strong>&quot;string&quot;
</pre><p>The reason for this is that traversals use <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a></code>, and the <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a></code> instance for <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor-Const.html#t:Const" title="Data.Functor.Const">Const</a></code> uses monoid concatenation to combine &#8220;effects&#8221; of <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor-Const.html#t:Const" title="Data.Functor.Const">Const</a></code>.</p><p>A non-operator version of (<code><a href="Lens-Micro.html#v:-94-." title="Lens.Micro">^.</a></code>) is called <code>view</code>, and it's a bit more general than (<code><a href="Lens-Micro.html#v:-94-." title="Lens.Micro">^.</a></code>) (it works in <code>MonadReader</code>). If you need the general version, you can get it from <a href="http://hackage.haskell.org/package/microlens-mtl">microlens-mtl</a>; otherwise there's <code><a href="Lens-Micro-Extras.html#v:view" title="Lens.Micro.Extras">view</a></code> available in <a href="Lens-Micro-Extras.html">Lens.Micro.Extras</a>.</p></div></div><div class="top"><p class="src"><a id="v:to" class="def">to</a> :: (s -&gt; a) -&gt; <a href="Lens-Micro.html#t:SimpleGetter" title="Lens.Micro">SimpleGetter</a> s a <a href="src/Lens.Micro.html#to" class="link">Source</a> <a href="#v:to" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#v:to" title="Lens.Micro">to</a></code> creates a getter from any function:</p><pre>a <code><a href="Lens-Micro.html#v:-94-." title="Lens.Micro">^.</a></code> <code><a href="Lens-Micro.html#v:to" title="Lens.Micro">to</a></code> f = f a
</pre><p>It's most useful in chains, because it lets you mix lenses and ordinary functions. Suppose you have a record which comes from some third-party library and doesn't have any lens accessors. You want to do something like this:</p><pre>value ^. _1 . field . at 2
</pre><p>However, <code>field</code> isn't a getter, and you have to do this instead:</p><pre>field (value ^. _1) ^. at 2
</pre><p>but now <code>value</code> is in the middle and it's hard to read the resulting code. A variant with <code><a href="Lens-Micro.html#v:to" title="Lens.Micro">to</a></code> is prettier and more readable:</p><pre>value ^. _1 . to field . at 2
</pre></div></div><a href="#g:3" id="g:3"><h1>Fold: extracts multiple elements</h1></a><div class="doc"><p>Folds are getters that can return more than one element (or no elements at all). <a href="http://comonad.com/reader/2015/free-monoids-in-haskell/">Except for some rare cases</a>, a fold is the same thing as <code>(s -&gt; [a])</code>; you can use <code><a href="Lens-Micro.html#v:folding" title="Lens.Micro">folding</a></code> to turn any function of type <code>(s -&gt; f a)</code> (where <code>f</code> is <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Foldable.html#t:Foldable" title="Data.Foldable">Foldable</a></code>) into a fold.</p><p>Folds can be applied to values by using operators like (<code><a href="Lens-Micro.html#v:-94-.." title="Lens.Micro">^..</a></code>), (<code><a href="Lens-Micro.html#v:-94--63-" title="Lens.Micro">^?</a></code>), etc:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(1,2) ^.. both
</code></strong>[1,2]
</pre><p>A nice thing about folds is that you can combine them with (<code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Monoid.html#v:-60--62-" title="Data.Monoid">&lt;&gt;</a></code>) to concatenate their outputs:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(1,2,3) ^.. (_2 &lt;&gt; _1)
</code></strong>[2,1]
</pre><p>When you need to get all elements of the same type in a complicated structure, (<code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Monoid.html#v:-60--62-" title="Data.Monoid">&lt;&gt;</a></code>) can be more helpful than <code><a href="Lens-Micro.html#v:each" title="Lens.Micro">each</a></code>:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>([1,2], 3, [Nothing, Just 4]) ^.. (_1.each &lt;&gt; _2 &lt;&gt; _3.each._Just)
</code></strong>[1,2,3,4]
</pre><p>(Just like setters and getters before, folds can be composed with (<code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Function.html#v:." title="Data.Function">.</a></code>).)</p><p>The (<code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Monoid.html#v:-60--62-" title="Data.Monoid">&lt;&gt;</a></code>) trick works nicely with (<code><a href="Lens-Micro.html#v:-94--63-" title="Lens.Micro">^?</a></code>), too. For instance, if you want to get the 9th element of the list, but would be fine with 5th too if the list is too short, you could combine <code>ix 9</code> and <code>ix 5</code>:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>[0..9] ^? (ix 9 &lt;&gt; ix 5)
</code></strong>Just 9
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>[0..8] ^? (ix 9 &lt;&gt; ix 5)
</code></strong>Just 5
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>[0..3] ^? (ix 9 &lt;&gt; ix 5)
</code></strong>Nothing
</pre><p>(Unfortunately, this trick won't help you with setting or modifying.)</p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:SimpleFold" class="def">SimpleFold</a> s a = <span class="keyword">forall</span> r. <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> r =&gt; <a href="Lens-Micro.html#t:Getting" title="Lens.Micro">Getting</a> r s a <a href="src/Lens.Micro.Type.html#SimpleFold" class="link">Source</a> <a href="#t:SimpleFold" class="selflink">#</a></p><div class="doc"><p>A <code>SimpleFold s a</code> extracts several <code>a</code>s from <code>s</code>; so, it's pretty much the same thing as <code>(s -&gt; [a])</code>, but you can use it with lens operators.</p><p>The actual <code>Fold</code> from lens is more general:</p><pre>type Fold s a =
  forall f. (Contravariant f, Applicative f) =&gt; (a -&gt; f a) -&gt; s -&gt; f s
</pre><p>There are several functions in lens that accept lens's <code>Fold</code> but won't accept <code><a href="Lens-Micro.html#t:SimpleFold" title="Lens.Micro">SimpleFold</a></code>; I'm aware of
<code><a href="http://hackage.haskell.org/package/lens/docs/Control-Lens-Fold.html#v:takingWhile">takingWhile</a></code>,
<code><a href="http://hackage.haskell.org/package/lens/docs/Control-Lens-Fold.html#v:droppingWhile">droppingWhile</a></code>,
<code><a href="http://hackage.haskell.org/package/lens/docs/Control-Lens-Fold.html#v:backwards">backwards</a></code>,
<code><a href="http://hackage.haskell.org/package/lens/docs/Control-Lens-Fold.html#v:foldByOf">foldByOf</a></code>,
<code><a href="http://hackage.haskell.org/package/lens/docs/Control-Lens-Fold.html#v:foldMapByOf">foldMapByOf</a></code>.
For this reason, try not to export <code><a href="Lens-Micro.html#t:SimpleFold" title="Lens.Micro">SimpleFold</a></code>s if at all possible. <a href="http://hackage.haskell.org/package/microlens-contra">microlens-contra</a> provides a fully lens-compatible <code>Fold</code>.</p><p>Lens users: you can convert a <code><a href="Lens-Micro.html#t:SimpleFold" title="Lens.Micro">SimpleFold</a></code> to <code>Fold</code> by applying <code>folded . toListOf</code> to it.</p></div></div><div class="top"><p class="src"><a id="v:-94-.." class="def">(^..)</a> :: s -&gt; <a href="Lens-Micro.html#t:Getting" title="Lens.Micro">Getting</a> (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Monoid.html#t:Endo" title="Data.Monoid">Endo</a> [a]) s a -&gt; [a] <span class="fixity">infixl 8</span><span class="rightedge"></span> <a href="src/Lens.Micro.html#%5E.." class="link">Source</a> <a href="#v:-94-.." class="selflink">#</a></p><div class="doc"><p><code>s ^.. t</code> returns the list of all values that <code>t</code> gets from <code>s</code>.</p><p>A <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a></code> contains either 0 or 1 values:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Just 3 ^.. _Just
</code></strong>[3]
</pre><p>Gathering all values in a list of tuples:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>[(1,2),(3,4)] ^.. each.each
</code></strong>[1,2,3,4]
</pre></div></div><div class="top"><p class="src"><a id="v:toListOf" class="def">toListOf</a> :: <a href="Lens-Micro.html#t:Getting" title="Lens.Micro">Getting</a> (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Monoid.html#t:Endo" title="Data.Monoid">Endo</a> [a]) s a -&gt; s -&gt; [a] <a href="src/Lens.Micro.html#toListOf" class="link">Source</a> <a href="#v:toListOf" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#v:toListOf" title="Lens.Micro">toListOf</a></code> is a synonym for (<code><a href="Lens-Micro.html#v:-94-.." title="Lens.Micro">^..</a></code>).</p></div></div><div class="top"><p class="src"><a id="v:-94--63-" class="def">(^?)</a> :: s -&gt; <a href="Lens-Micro.html#t:Getting" title="Lens.Micro">Getting</a> (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Monoid.html#t:First" title="Data.Monoid">First</a> a) s a -&gt; <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a <span class="fixity">infixl 8</span><span class="rightedge"></span> <a href="src/Lens.Micro.html#%5E%3F" class="link">Source</a> <a href="#v:-94--63-" class="selflink">#</a></p><div class="doc"><p><code>s ^? t</code> returns the 1st element <code>t</code> returns, or <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> if <code>t</code> doesn't return anything. It's trivially implemented by passing the <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Monoid.html#t:First" title="Data.Monoid">First</a></code> monoid to the getter.</p><p>Safe <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/GHC-List.html#v:head" title="GHC.List">head</a></code>:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>[] ^? each
</code></strong>Nothing
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>[1..3] ^? each
</code></strong>Just 1
</pre><p>Converting <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a></code> to <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a></code>:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Left 1 ^? _Right
</code></strong>Nothing
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Right 1 ^? _Right
</code></strong>Just 1
</pre><p>A non-operator version of (<code><a href="Lens-Micro.html#v:-94--63-" title="Lens.Micro">^?</a></code>) is called <code>preview</code>, and &#8211; like <code>view</code> &#8211; it's a bit more general than (<code><a href="Lens-Micro.html#v:-94--63-" title="Lens.Micro">^?</a></code>) (it works in <code>MonadReader</code>). If you need the general version, you can get it from <a href="http://hackage.haskell.org/package/microlens-mtl">microlens-mtl</a>; otherwise there's <code><a href="Lens-Micro-Extras.html#v:preview" title="Lens.Micro.Extras">preview</a></code> available in <a href="Lens-Micro-Extras.html">Lens.Micro.Extras</a>.</p></div></div><div class="top"><p class="src"><a id="v:-94--63--33-" class="def">(^?!)</a> :: <a href="Lens-Micro-Internal.html#t:HasCallStack" title="Lens.Micro.Internal">HasCallStack</a> =&gt; s -&gt; <a href="Lens-Micro.html#t:Getting" title="Lens.Micro">Getting</a> (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Monoid.html#t:Endo" title="Data.Monoid">Endo</a> a) s a -&gt; a <span class="fixity">infixl 8</span><span class="rightedge"></span> <a href="src/Lens.Micro.html#%5E%3F%21" class="link">Source</a> <a href="#v:-94--63--33-" class="selflink">#</a></p><div class="doc"><p>(<code><a href="Lens-Micro.html#v:-94--63--33-" title="Lens.Micro">^?!</a></code>) is an unsafe variant of (<code><a href="Lens-Micro.html#v:-94--63-" title="Lens.Micro">^?</a></code>) &#8211; instead of using <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> to indicate that there were no elements returned, it throws an exception.</p></div></div><div class="top"><p class="src"><a id="v:traverseOf_" class="def">traverseOf_</a> :: <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> f =&gt; <a href="Lens-Micro.html#t:Getting" title="Lens.Micro">Getting</a> (Traversed r f) s a -&gt; (a -&gt; f r) -&gt; s -&gt; f () <a href="src/Lens.Micro.html#traverseOf_" class="link">Source</a> <a href="#v:traverseOf_" class="selflink">#</a></p><div class="doc"><p>Apply an action to all targets and discard the result (like <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Foldable.html#v:mapM_" title="Data.Foldable">mapM_</a></code> or <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Foldable.html#v:traverse_" title="Data.Foldable">traverse_</a></code>):</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>traverseOf_ both putStrLn (&quot;hello&quot;, &quot;world&quot;)
</code></strong>hello
world
</pre><p>Works with anything that allows getting, including lenses and getters (so, anything except for <code><a href="Lens-Micro.html#t:ASetter" title="Lens.Micro">ASetter</a></code>). Should be faster than <code><a href="Lens-Micro.html#v:traverseOf" title="Lens.Micro">traverseOf</a></code> when you don't need the result.</p></div></div><div class="top"><p class="src"><a id="v:forOf_" class="def">forOf_</a> :: <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> f =&gt; <a href="Lens-Micro.html#t:Getting" title="Lens.Micro">Getting</a> (Traversed r f) s a -&gt; s -&gt; (a -&gt; f r) -&gt; f () <a href="src/Lens.Micro.html#forOf_" class="link">Source</a> <a href="#v:forOf_" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#v:traverseOf_" title="Lens.Micro">traverseOf_</a></code> with flipped arguments. Useful if the &#8220;loop body&#8221; is a lambda
or a <code>do</code> block, or in some other cases &#8211; for instance, you can avoid
accidentally using <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Foldable.html#v:for_" title="Data.Foldable">for_</a></code> on a tuple or <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a></code> by switching
to <code><code><a href="Lens-Micro.html#v:forOf_" title="Lens.Micro">forOf_</a></code> <code><a href="Lens-Micro.html#v:each" title="Lens.Micro">each</a></code></code>. Or you can write custom loops like these:</p><pre><code><a href="Lens-Micro.html#v:forOf_" title="Lens.Micro">forOf_</a></code> <code><a href="Lens-Micro.html#v:both" title="Lens.Micro">both</a></code> (a, b) $ \x -&gt;
  ...
<code><a href="Lens-Micro.html#v:forOf_" title="Lens.Micro">forOf_</a></code> <code><a href="Lens-Micro.html#v:each" title="Lens.Micro">each</a></code> [1..10] $ \x -&gt;
  ...
<code><a href="Lens-Micro.html#v:forOf_" title="Lens.Micro">forOf_</a></code> (<code><a href="Lens-Micro.html#v:each" title="Lens.Micro">each</a></code> . <code><a href="Lens-Micro.html#v:_Right" title="Lens.Micro">_Right</a></code>) $ \x -&gt;
  ...
</pre></div></div><div class="top"><p class="src"><a id="v:has" class="def">has</a> :: <a href="Lens-Micro.html#t:Getting" title="Lens.Micro">Getting</a> <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Monoid.html#t:Any" title="Data.Monoid">Any</a> s a -&gt; s -&gt; <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Lens.Micro.html#has" class="link">Source</a> <a href="#v:has" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#v:has" title="Lens.Micro">has</a></code> checks whether a getter (any getter, including lenses, traversals, and folds) returns at least 1 value.</p><p>Checking whether a list is non-empty:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>has each []
</code></strong>False
</pre><p>You can also use it with e.g. <code><a href="Lens-Micro.html#v:_Left" title="Lens.Micro">_Left</a></code> (and other 0-or-1 traversals) as a replacement for <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#v:isNothing" title="Data.Maybe">isNothing</a></code>, <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#v:isJust" title="Data.Maybe">isJust</a></code> and other <code>isConstructorName</code> functions:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>has _Left (Left 1)
</code></strong>True
</pre></div></div><div class="top"><p class="src"><a id="v:folded" class="def">folded</a> :: <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Foldable.html#t:Foldable" title="Data.Foldable">Foldable</a> f =&gt; <a href="Lens-Micro.html#t:SimpleFold" title="Lens.Micro">SimpleFold</a> (f a) a <a href="src/Lens.Micro.Internal.html#folded" class="link">Source</a> <a href="#v:folded" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#v:folded" title="Lens.Micro">folded</a></code> is a fold for anything <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Foldable.html#t:Foldable" title="Data.Foldable">Foldable</a></code>. In a way, it's an opposite of
<code>mapped</code> &#8211; the most powerful getter, but can't be used as a setter.</p></div></div><div class="top"><p class="src"><a id="v:folding" class="def">folding</a> :: <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Foldable.html#t:Foldable" title="Data.Foldable">Foldable</a> f =&gt; (s -&gt; f a) -&gt; <a href="Lens-Micro.html#t:SimpleFold" title="Lens.Micro">SimpleFold</a> s a <a href="src/Lens.Micro.html#folding" class="link">Source</a> <a href="#v:folding" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#v:folding" title="Lens.Micro">folding</a></code> creates a fold out of any function that returns a <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Foldable.html#t:Foldable" title="Data.Foldable">Foldable</a></code> container (for instance, a list):</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>[1..5] ^.. folding tail
</code></strong>[2,3,4,5]
</pre></div></div><a href="#g:4" id="g:4"><h1>Lens: a combined getter-and-setter</h1></a><div class="doc"><p>Lenses are composable &#8220;pointers&#8221; at values inside some bigger structure (e.g. <code><a href="Lens-Micro.html#v:_1" title="Lens.Micro">_1</a></code> points at the first element of a tuple). You can use (<code><a href="Lens-Micro.html#v:-94-." title="Lens.Micro">^.</a></code>) to get, (<code><a href="Lens-Micro.html#v:.-126-" title="Lens.Micro">.~</a></code>) to set, and (<code><a href="Lens-Micro.html#v:-37--126-" title="Lens.Micro">%~</a></code>) to modify:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(1,2) ^. _1
</code></strong>1
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(1,2) &amp; _1 .~ 3
</code></strong>(3,2)
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(1,2) &amp; _1 %~ negate
</code></strong>(-1,2)
</pre><p>To apply a monadic action (or an <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a></code> action, or even a <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a></code> action) to the pointed value, just apply the lens directly or use <code><a href="Lens-Micro.html#v:traverseOf" title="Lens.Micro">traverseOf</a></code> (or <code><a href="Lens-Micro.html#v:traverseOf_" title="Lens.Micro">traverseOf_</a></code> if you don't need the result):</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>traverseOf_ _1 print (1,2)
</code></strong>1
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>_1 id (Just 1, 2)
</code></strong>Just (1, 2)
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>_1 id (Nothing, 2)
</code></strong>Nothing
</pre><p>A <code><a href="Lens-Micro.html#t:Lens" title="Lens.Micro">Lens</a></code> can only point at a single value inside a structure (unlike a <code><a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a></code>).</p><p>(<code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Function.html#v:." title="Data.Function">.</a></code>) composes lenses (i.e. if a <code>B</code> is a part of <code>A</code>, and a <code>C</code> is a part of <code>B</code>, then <code>b.c</code> lets you operate on <code>C</code> inside <code>A</code>). You can create lenses with <code><a href="Lens-Micro.html#v:lens" title="Lens.Micro">lens</a></code>, or you can write them by hand.</p><p>There are several ways to get lenses for some datatype:</p><ul><li>They can already be provided by the package, by <code>microlens</code>, or by some other package like <a href="http://hackage.haskell.org/package/microlens-platform">microlens-platform</a>.</li><li>They can be provided by some unofficial package (like <a href="http://hackage.haskell.org/package/microlens-aeson">microlens-aeson</a>).</li><li>You can get them by combining already existing lenses.</li><li>You can derive them with Template Haskell (with <a href="http://hackage.haskell.org/package/microlens-th">microlens-th</a>).</li><li>You can write them with <code><a href="Lens-Micro.html#v:lens" title="Lens.Micro">lens</a></code> if you have a setter and a getter. It's a simple and good way.</li><li>You can write them manually (sometimes it looks a bit better than the variant with <code><a href="Lens-Micro.html#v:lens" title="Lens.Micro">lens</a></code>, sometimes worse). The generic template is as follows:</li></ul><pre>somelens :: Lens s t a b

-- &#8220;f&#8221; is the &#8220;a -&gt; f b&#8221; function, &#8220;s&#8221; is the structure.
somelens f s =
  let
    a = ...                 -- Extract the value from &#8220;s&#8221;.
    rebuildWith b = ...     -- Write a function which would
                            -- combine &#8220;s&#8221; and modified value
                            -- to produce new structure.
  in
    rebuildWith <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#v:-60--36--62-" title="Data.Functor">&lt;$&gt;</a></code> f a     -- Apply the structure-producing
                            -- function to the modified value.
</pre><p>Here's the <code><a href="Lens-Micro.html#v:_1" title="Lens.Micro">_1</a></code> lens, for instance:</p><pre><code><a href="Lens-Micro.html#v:_1" title="Lens.Micro">_1</a></code> :: <code><a href="Lens-Micro.html#t:Lens" title="Lens.Micro">Lens</a></code> (a, x) (b, x) a b
<code><a href="Lens-Micro.html#v:_1" title="Lens.Micro">_1</a></code> f (a, x) = (\b -&gt; (b, x)) <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#v:-60--36--62-" title="Data.Functor">&lt;$&gt;</a></code> f a
</pre><p>Here's a more complicated lens, which extracts <em>several</em> values from a structure (in a tuple):</p><pre>type Age     = Int
type City    = String
type Country = String

data Person = Person Age City Country

-- This lens lets you access all location-related information about a person.
location :: <code><a href="Lens-Micro.html#t:Lens-39-" title="Lens.Micro">Lens'</a></code> Person (City, Country)
location f (Person age city country) =
  (\(city', country') -&gt; Person age city' country') <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#v:-60--36--62-" title="Data.Functor">&lt;$&gt;</a></code> f (city, country)
</pre><p>You even can choose to use a lens to present <em>all</em> information contained in the structure (in a different way). Such lenses are called <code><a href="http://hackage.haskell.org/package/lens/docs/Control-Lens-Iso.html#t:Iso">Iso</a></code> in lens's terminology. For instance (assuming you don't mind functions that can error out), here's a lens which lets you act on the string representation of a value:</p><pre>string :: (Read a, Show a) =&gt; <code><a href="Lens-Micro.html#t:Lens-39-" title="Lens.Micro">Lens'</a></code> a String
string f s = read <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#v:-60--36--62-" title="Data.Functor">&lt;$&gt;</a></code> f (show s)
</pre><p>Using it to reverse a number:</p><pre>&gt;&gt;&gt; 123 <code><a href="Lens-Micro.html#v:-38-" title="Lens.Micro">&amp;</a></code> string <code><a href="Lens-Micro.html#v:-37--126-" title="Lens.Micro">%~</a></code> reverse
321
</pre></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Lens" class="def">Lens</a> s t a b = <span class="keyword">forall</span> f. <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> f =&gt; (a -&gt; f b) -&gt; s -&gt; f t <a href="src/Lens.Micro.Type.html#Lens" class="link">Source</a> <a href="#t:Lens" class="selflink">#</a></p><div class="doc"><p><code>Lens s t a b</code> is the lowest common denominator of a setter and a getter, something that has the power of both; it has a <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a></code> constraint, and since both <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor-Const.html#t:Const" title="Data.Functor.Const">Const</a></code> and <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor-Identity.html#t:Identity" title="Data.Functor.Identity">Identity</a></code> are functors, it can be used whenever a getter or a setter is needed.</p><ul><li><code>a</code> is the type of the value inside of structure</li><li><code>b</code> is the type of the replaced value</li><li><code>s</code> is the type of the whole structure</li><li><code>t</code> is the type of the structure after replacing <code>a</code> in it with <code>b</code></li></ul></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Lens-39-" class="def">Lens'</a> s a = <a href="Lens-Micro.html#t:Lens" title="Lens.Micro">Lens</a> s s a a <a href="src/Lens.Micro.Type.html#Lens%27" class="link">Source</a> <a href="#t:Lens-39-" class="selflink">#</a></p><div class="doc"><p>This is a type alias for monomorphic lenses which don't change the type of the container (or of the value inside).</p></div></div><div class="top"><p class="src"><a id="v:lens" class="def">lens</a> :: (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; <a href="Lens-Micro.html#t:Lens" title="Lens.Micro">Lens</a> s t a b <a href="src/Lens.Micro.html#lens" class="link">Source</a> <a href="#v:lens" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#v:lens" title="Lens.Micro">lens</a></code> creates a <code><a href="Lens-Micro.html#t:Lens" title="Lens.Micro">Lens</a></code> from a getter and a setter. The resulting lens isn't the most effective one (because of having to traverse the structure twice when modifying), but it shouldn't matter much.</p><p>A (partial) lens for list indexing:</p><pre>ix :: Int -&gt; <code><a href="Lens-Micro.html#t:Lens-39-" title="Lens.Micro">Lens'</a></code> [a] a
ix i = <code><a href="Lens-Micro.html#v:lens" title="Lens.Micro">lens</a></code> (<code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/GHC-List.html#v:-33--33-" title="GHC.List">!!</a></code> i)                                   -- getter
            (\s b -&gt; take i s ++ b : drop (i+1) s)   -- setter
</pre><p>Usage:</p><pre>&gt;&gt;&gt; [1..9] <code><a href="Lens-Micro.html#v:-94-." title="Lens.Micro">^.</a></code> ix 3
4

&gt;&gt;&gt; [1..9] &amp; ix 3 <code><a href="Lens-Micro.html#v:-37--126-" title="Lens.Micro">%~</a></code> negate
[1,2,3,-4,5,6,7,8,9]
</pre><p>When getting, the setter is completely unused; when setting, the getter is unused. Both are used only when the value is being modified. For instance, here we define a lens for the 1st element of a list, but instead of a legitimate getter we use <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Prelude.html#v:undefined" title="Prelude">undefined</a></code>. Then we use the resulting lens for <em>setting</em> and it works, which proves that the getter wasn't used:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>[1,2,3] &amp; lens undefined (\s b -&gt; b : tail s) .~ 10
</code></strong>[10,2,3]
</pre></div></div><div class="top"><p class="src"><a id="v:at" class="def">at</a> :: <a href="Lens-Micro-Internal.html#t:At" title="Lens.Micro.Internal">At</a> m =&gt; <a href="Lens-Micro-Internal.html#t:Index" title="Lens.Micro.Internal">Index</a> m -&gt; <a href="Lens-Micro.html#t:Lens-39-" title="Lens.Micro">Lens'</a> m (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="Lens-Micro-Internal.html#t:IxValue" title="Lens.Micro.Internal">IxValue</a> m)) <a href="src/Lens.Micro.Internal.html#at" class="link">Source</a> <a href="#v:at" class="selflink">#</a></p><div class="doc"><p>This lens lets you read, write, or delete elements in <code>Map</code>-like structures. It returns <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> when the value isn't found, just like <code>lookup</code>:</p><pre>Data.Map.lookup k m = m <code><a href="Lens-Micro.html#v:-94-." title="Lens.Micro">^.</a></code> at k
</pre><p>However, it also lets you insert and delete values by setting the value to <code><code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#v:Just" title="Data.Maybe">Just</a></code> value</code> or <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code>:</p><pre>Data.Map.insert k a m = m <code><a href="Lens-Micro.html#v:-38-" title="Lens.Micro">&amp;</a></code> at k <code><a href="Lens-Micro.html#v:.-126-" title="Lens.Micro">.~</a></code> Just a

Data.Map.delete k m = m <code><a href="Lens-Micro.html#v:-38-" title="Lens.Micro">&amp;</a></code> at k <code><a href="Lens-Micro.html#v:.-126-" title="Lens.Micro">.~</a></code> Nothing
</pre><p>Or you could use (<code><a href="Lens-Micro.html#v:-63--126-" title="Lens.Micro">?~</a></code>) instead of (<code><a href="Lens-Micro.html#v:.-126-" title="Lens.Micro">.~</a></code>):</p><pre>Data.Map.insert k a m = m <code><a href="Lens-Micro.html#v:-38-" title="Lens.Micro">&amp;</a></code> at k <code><a href="Lens-Micro.html#v:-63--126-" title="Lens.Micro">?~</a></code> a
</pre><p>Note that <code><a href="Lens-Micro.html#v:at" title="Lens.Micro">at</a></code> doesn't work for arrays or lists. You can't delete an arbitrary element from an array (what would be left in its place?), and you can't set an arbitrary element in a list because if the index is out of list's bounds, you'd have to somehow fill the stretch between the last element and the element you just inserted (i.e. <code>[1,2,3] &amp; at 10 .~ 5</code> is undefined). If you want to modify an already existing value in an array or list, you should use <code><a href="Lens-Micro.html#v:ix" title="Lens.Micro">ix</a></code> instead.</p><p><code><a href="Lens-Micro.html#v:at" title="Lens.Micro">at</a></code> is often used with <code><a href="Lens-Micro.html#v:non" title="Lens.Micro">non</a></code>. See the documentation of <code><a href="Lens-Micro.html#v:non" title="Lens.Micro">non</a></code> for examples.</p><p>Note that <code><a href="Lens-Micro.html#v:at" title="Lens.Micro">at</a></code> isn't strict for <code>Map</code>, even if you're using <code>Data.Map.Strict</code>:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Data.Map.Strict.size (Data.Map.Strict.empty &amp; at 1 .~ Just undefined)
</code></strong>1
</pre><p>The reason for such behavior is that there's actually no &#8220;strict <code>Map</code>&#8221; type; <code>Data.Map.Strict</code> just provides some strict functions for ordinary <code>Map</code>s.</p><p>This package doesn't actually provide any instances for <code><a href="Lens-Micro.html#v:at" title="Lens.Micro">at</a></code>, but there are instances for <code>Map</code> and <code>IntMap</code> in <a href="http://hackage.haskell.org/package/microlens-ghc">microlens-ghc</a> and an instance for <code>HashMap</code> in <a href="http://hackage.haskell.org/package/microlens-platform">microlens-platform</a>.</p></div></div><div class="top"><p class="src"><a id="v:_1" class="def">_1</a> :: <a href="Lens-Micro-Internal.html#t:Field1" title="Lens.Micro.Internal">Field1</a> s t a b =&gt; <a href="Lens-Micro.html#t:Lens" title="Lens.Micro">Lens</a> s t a b <a href="src/Lens.Micro.Internal.html#_1" class="link">Source</a> <a href="#v:_1" class="selflink">#</a></p><div class="doc"><p>Gives access to the 1st field of a tuple (up to 5-tuples).</p><p>Getting the 1st component:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(1,2,3,4,5) ^. _1
</code></strong>1
</pre><p>Setting the 1st component:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(1,2,3) &amp; _1 .~ 10
</code></strong>(10,2,3)
</pre><p>Note that this lens is lazy, and can set fields even of <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Prelude.html#v:undefined" title="Prelude">undefined</a></code>:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>set _1 10 undefined :: (Int, Int)
</code></strong>(10,*** Exception: Prelude.undefined
</pre><p>This is done to avoid violating a lens law stating that you can get back what you put:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>view _1 . set _1 10 $ (undefined :: (Int, Int))
</code></strong>10
</pre><p>The implementation (for 2-tuples) is:</p><pre><code><a href="Lens-Micro.html#v:_1" title="Lens.Micro">_1</a></code> f t = (,) <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#v:-60--36--62-" title="Data.Functor">&lt;$&gt;</a></code> f    (<code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Tuple.html#v:fst" title="Data.Tuple">fst</a></code> t)
             <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Control-Applicative.html#v:-60--42--62-" title="Control.Applicative">&lt;*&gt;</a></code> <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Control-Applicative.html#v:pure" title="Control.Applicative">pure</a></code> (<code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Tuple.html#v:snd" title="Data.Tuple">snd</a></code> t)
</pre><p>or, alternatively,</p><pre><code><a href="Lens-Micro.html#v:_1" title="Lens.Micro">_1</a></code> f ~(a,b) = (\a' -&gt; (a',b)) <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#v:-60--36--62-" title="Data.Functor">&lt;$&gt;</a></code> f a
</pre><p>(where <code>~</code> means a <a href="https://wiki.haskell.org/Lazy_pattern_match">lazy pattern</a>).</p><p><code><a href="Lens-Micro.html#v:_2" title="Lens.Micro">_2</a></code>, <code><a href="Lens-Micro.html#v:_3" title="Lens.Micro">_3</a></code>, <code><a href="Lens-Micro.html#v:_4" title="Lens.Micro">_4</a></code>, and <code><a href="Lens-Micro.html#v:_5" title="Lens.Micro">_5</a></code> are also available (see below).</p></div></div><div class="top"><p class="src"><a id="v:_2" class="def">_2</a> :: <a href="Lens-Micro-Internal.html#t:Field2" title="Lens.Micro.Internal">Field2</a> s t a b =&gt; <a href="Lens-Micro.html#t:Lens" title="Lens.Micro">Lens</a> s t a b <a href="src/Lens.Micro.Internal.html#_2" class="link">Source</a> <a href="#v:_2" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:_3" class="def">_3</a> :: <a href="Lens-Micro-Internal.html#t:Field3" title="Lens.Micro.Internal">Field3</a> s t a b =&gt; <a href="Lens-Micro.html#t:Lens" title="Lens.Micro">Lens</a> s t a b <a href="src/Lens.Micro.Internal.html#_3" class="link">Source</a> <a href="#v:_3" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:_4" class="def">_4</a> :: <a href="Lens-Micro-Internal.html#t:Field4" title="Lens.Micro.Internal">Field4</a> s t a b =&gt; <a href="Lens-Micro.html#t:Lens" title="Lens.Micro">Lens</a> s t a b <a href="src/Lens.Micro.Internal.html#_4" class="link">Source</a> <a href="#v:_4" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:_5" class="def">_5</a> :: <a href="Lens-Micro-Internal.html#t:Field5" title="Lens.Micro.Internal">Field5</a> s t a b =&gt; <a href="Lens-Micro.html#t:Lens" title="Lens.Micro">Lens</a> s t a b <a href="src/Lens.Micro.Internal.html#_5" class="link">Source</a> <a href="#v:_5" class="selflink">#</a></p></div><a href="#g:5" id="g:5"><h1>Iso: a lens that only changes the representation</h1></a><div class="doc"><p>Isos (or isomorphisms) are lenses that convert a value instead of targeting a part of it; in other words, inside of every list lives a reversed list, inside of every strict <code>Text</code> lives a lazy <code>Text</code>, and inside of every <code>(a, b)</code> lives a <code>(b, a)</code>. Since an isomorphism doesn't lose any information, it's possible to <em>reverse</em> it and use it in the opposite direction by using <code>from</code> from the lens library:</p><pre>from :: Iso' s a -&gt; Iso' a s
</pre><p>However, it's not possible for microlens to export isomorphisms, because their type depends on <code><a href="http://hackage.haskell.org/package/profunctors/docs/Data-Profunctor.html#t:Profunctor">Profunctor</a></code>, which resides in the <a href="http://hackage.haskell.org/package/profunctors">profunctors</a> library, which is a somewhat huge dependency. So, all isomorphisms included here are lenses instead (and thus you can't use them in the opposite direction).</p></div><div class="top"><p class="src"><a id="v:strict" class="def">strict</a> :: <a href="Lens-Micro-Internal.html#t:Strict" title="Lens.Micro.Internal">Strict</a> lazy strict =&gt; <a href="Lens-Micro.html#t:Lens-39-" title="Lens.Micro">Lens'</a> lazy strict <a href="src/Lens.Micro.Internal.html#strict" class="link">Source</a> <a href="#v:strict" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#v:strict" title="Lens.Micro">strict</a></code> lets you convert between strict and lazy versions of a datatype:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>let someText = &quot;hello&quot; :: Lazy.Text
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>someText ^. strict
</code></strong>&quot;hello&quot; :: Strict.Text
</pre><p>It can also be useful if you have a function that works on a strict type but your type is lazy:</p><pre>stripDiacritics :: Strict.Text -&gt; Strict.Text
stripDiacritics = ...
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>let someText = &quot;Paul Erd&#337;s&quot; :: Lazy.Text
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>someText &amp; strict %~ stripDiacritics
</code></strong>&quot;Paul Erdos&quot; :: Lazy.Text
</pre><p><code><a href="Lens-Micro.html#v:strict" title="Lens.Micro">strict</a></code> works on <code>ByteString</code> and <code>StateT</code>/<code>WriterT</code>/<code>RWST</code> if you use <a href="http://hackage.haskell.org/package/microlens-ghc">microlens-ghc</a>, and additionally on <code>Text</code> if you use <a href="http://hackage.haskell.org/package/microlens-platform">microlens-platform</a>.</p></div></div><div class="top"><p class="src"><a id="v:lazy" class="def">lazy</a> :: <a href="Lens-Micro-Internal.html#t:Strict" title="Lens.Micro.Internal">Strict</a> lazy strict =&gt; <a href="Lens-Micro.html#t:Lens-39-" title="Lens.Micro">Lens'</a> strict lazy <a href="src/Lens.Micro.Internal.html#lazy" class="link">Source</a> <a href="#v:lazy" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#v:lazy" title="Lens.Micro">lazy</a></code> is like <code><a href="Lens-Micro.html#v:strict" title="Lens.Micro">strict</a></code> but works in opposite direction:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>let someText = &quot;hello&quot; :: Strict.Text
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>someText ^. lazy
</code></strong>&quot;hello&quot; :: Lazy.Text
</pre></div></div><div class="top"><p class="src"><a id="v:non" class="def">non</a> :: <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a =&gt; a -&gt; <a href="Lens-Micro.html#t:Lens-39-" title="Lens.Micro">Lens'</a> (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) a <a href="src/Lens.Micro.html#non" class="link">Source</a> <a href="#v:non" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#v:non" title="Lens.Micro">non</a></code> lets you &#8220;relabel&#8221; a <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a></code> by equating <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> to an arbitrary value (which you can choose):</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Just 1 ^. non 0
</code></strong>1
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Nothing ^. non 0
</code></strong>0
</pre><p>The most useful thing about <code><a href="Lens-Micro.html#v:non" title="Lens.Micro">non</a></code> is that relabeling also works in other direction. If you try to <code><a href="Lens-Micro.html#v:set" title="Lens.Micro">set</a></code> the &#8220;forbidden&#8221; value, it'll be turned to <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code>:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Just 1 &amp; non 0 .~ 0
</code></strong>Nothing
</pre><p>Setting anything else works just fine:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Just 1 &amp; non 0 .~ 5
</code></strong>Just 5
</pre><p>Same happens if you try to modify a value:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Just 1 &amp; non 0 %~ subtract 1
</code></strong>Nothing
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Just 1 &amp; non 0 %~ (+ 1)
</code></strong>Just 2
</pre><p><code><a href="Lens-Micro.html#v:non" title="Lens.Micro">non</a></code> is often useful when combined with <code><a href="Lens-Micro.html#v:at" title="Lens.Micro">at</a></code>. For instance, if you have a map of songs and their playcounts, it makes sense not to store songs with 0 plays in the map; <code><a href="Lens-Micro.html#v:non" title="Lens.Micro">non</a></code> can act as a filter that wouldn't pass such entries.</p><p>Decrease playcount of a song to 0, and it'll be gone:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>fromList [(&quot;Soon&quot;,1),(&quot;Yesterday&quot;,3)] &amp; at &quot;Soon&quot; . non 0 %~ subtract 1
</code></strong>fromList [(&quot;Yesterday&quot;,3)]
</pre><p>Try to add a song with 0 plays, and it won't be added:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>fromList [(&quot;Yesterday&quot;,3)] &amp; at &quot;Soon&quot; . non 0 .~ 0
</code></strong>fromList [(&quot;Yesterday&quot;,3)]
</pre><p>But it will be added if you set any other number:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>fromList [(&quot;Yesterday&quot;,3)] &amp; at &quot;Soon&quot; . non 0 .~ 1
</code></strong>fromList [(&quot;Soon&quot;,1),(&quot;Yesterday&quot;,3)]
</pre><p><code><a href="Lens-Micro.html#v:non" title="Lens.Micro">non</a></code> is also useful when working with nested maps. Here a nested map is created when it's missing:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Map.empty &amp; at &quot;Dez Mona&quot; . non Map.empty . at &quot;Soon&quot; .~ Just 1
</code></strong>fromList [(&quot;Dez Mona&quot;,fromList [(&quot;Soon&quot;,1)])]
</pre><p>and here it is deleted when its last entry is deleted (notice that <code><a href="Lens-Micro.html#v:non" title="Lens.Micro">non</a></code> is used twice here):</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>fromList [(&quot;Dez Mona&quot;,fromList [(&quot;Soon&quot;,1)])] &amp; at &quot;Dez Mona&quot; . non Map.empty . at &quot;Soon&quot; . non 0 %~ subtract 1
</code></strong>fromList []
</pre><p>To understand the last example better, observe the flow of values in it:</p><ul><li>the map goes into <code>at &quot;Dez Mona&quot;</code></li><li>the nested map (wrapped into <code>Just</code>) goes into <code>non Map.empty</code></li><li><code>Just</code> is unwrapped and the nested map goes into <code>at &quot;Soon&quot;</code></li><li><code>Just 1</code> is unwrapped by <code>non 0</code></li></ul><p>Then the final value &#8211; i.e. 1 &#8211; is modified by <code>subtract 1</code> and the result (which is 0) starts flowing backwards:</p><ul><li><code>non 0</code> sees the 0 and produces a <code>Nothing</code></li><li><code>at &quot;Soon&quot;</code> sees <code>Nothing</code> and deletes the corresponding value from the map</li><li>the resulting empty map is passed to <code>non Map.empty</code>, which sees that it's empty and thus produces <code>Nothing</code></li><li><code>at &quot;Dez Mona&quot;</code> sees <code>Nothing</code> and removes the key from the map</li></ul></div></div><a href="#g:6" id="g:6"><h1>Traversal: a lens iterating over several elements</h1></a><div class="doc"><p>Traversals are like lenses but they can point at multiple values. Use (<code><a href="Lens-Micro.html#v:-94-.." title="Lens.Micro">^..</a></code>) to get all values, (<code><a href="Lens-Micro.html#v:-94--63-" title="Lens.Micro">^?</a></code>) to get the 1st value, (<code><a href="Lens-Micro.html#v:.-126-" title="Lens.Micro">.~</a></code>) to set values, (<code><a href="Lens-Micro.html#v:-37--126-" title="Lens.Micro">%~</a></code>) to modify them. (<code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Function.html#v:." title="Data.Function">.</a></code>) composes traversals just as it composes lenses. (<code><a href="Lens-Micro.html#v:-94-." title="Lens.Micro">^.</a></code>) can be used with traversals as well, but don't confuse it with (<code><a href="Lens-Micro.html#v:-94-.." title="Lens.Micro">^..</a></code>) &#8211; (<code><a href="Lens-Micro.html#v:-94-.." title="Lens.Micro">^..</a></code>) gets all traversed values, (<code><a href="Lens-Micro.html#v:-94-." title="Lens.Micro">^.</a></code>) combines traversed values using the (<code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Monoid.html#v:-60--62-" title="Data.Monoid">&lt;&gt;</a></code>) operation (if the values are instances of <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a></code>; if they aren't, it won't compile). <code><a href="Lens-Micro.html#v:traverseOf" title="Lens.Micro">traverseOf</a></code> and <code><a href="Lens-Micro.html#v:traverseOf_" title="Lens.Micro">traverseOf_</a></code> apply an action to all pointed values of a traversal.</p><p>Traversals don't differ from lenses when it comes to setting &#8211; you can use usual (<code><a href="Lens-Micro.html#v:-37--126-" title="Lens.Micro">%~</a></code>) and (<code><a href="Lens-Micro.html#v:.-126-" title="Lens.Micro">.~</a></code>) to modify and set values. Getting is a bit different, because you have to decide what to do in the case of multiple values. In particular, you can use these combinators (as well as everything else in the &#8220;Folds&#8221; section):</p><ul><li>(<code><a href="Lens-Micro.html#v:-94-.." title="Lens.Micro">^..</a></code>) gets a list of values</li><li>(<code><a href="Lens-Micro.html#v:-94--63-" title="Lens.Micro">^?</a></code>) gets the 1st value (or <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> if there are no values)</li><li>(<code><a href="Lens-Micro.html#v:-94--63--33-" title="Lens.Micro">^?!</a></code>) gets the 1st value and throws an exception if there are no values</li></ul><p>If you are sure that the traversal will traverse at least one value, you can convert it to a lens with <code><a href="Lens-Micro.html#v:singular" title="Lens.Micro">singular</a></code>.</p><p><code><a href="Lens-Micro.html#v:traversed" title="Lens.Micro">traversed</a></code> is a universal traversal for anything that belongs to the <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Traversable.html#t:Traversable" title="Data.Traversable">Traversable</a></code> typeclass. However, in many cases <code><a href="Lens-Micro.html#v:each" title="Lens.Micro">each</a></code> works as well and is shorter and nicer-looking.</p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Traversal" class="def">Traversal</a> s t a b = <span class="keyword">forall</span> f. <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> f =&gt; (a -&gt; f b) -&gt; s -&gt; f t <a href="src/Lens.Micro.Type.html#Traversal" class="link">Source</a> <a href="#t:Traversal" class="selflink">#</a></p><div class="doc"><p><code>Traversal s t a b</code> is a generalisation of <code><a href="Lens-Micro.html#t:Lens" title="Lens.Micro">Lens</a></code> which allows many targets (possibly 0). It's achieved by changing the constraint to <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a></code> instead of <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a></code> &#8211; indeed, the point of <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a></code> is that you can combine effects, which is just what we need to have many targets.</p><p>Ultimately, traversals should follow 2 laws:</p><pre>t pure &#8801; pure
fmap (t f) . t g &#8801; getCompose . t (Compose . fmap f . g)
</pre><p>The 1st law states that you can't change the shape of the structure or do anything funny with elements (traverse elements which aren't in the structure, create new elements out of thin air, etc.). The 2nd law states that you should be able to fuse 2 identical traversals into one. For a more detailed explanation of the laws, see <a href="http://artyom.me/lens-over-tea-2#traversal-laws">this blog post</a> (if you prefer rambling blog posts), or <a href="https://www.cs.ox.ac.uk/jeremy.gibbons/publications/iterator.pdf">The Essence Of The Iterator Pattern</a> (if you prefer papers).</p><p>Traversing any value twice is a violation of traversal laws. You can, however, traverse values in any order.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Traversal-39-" class="def">Traversal'</a> s a = <a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a> s s a a <a href="src/Lens.Micro.Type.html#Traversal%27" class="link">Source</a> <a href="#t:Traversal-39-" class="selflink">#</a></p><div class="doc"><p>This is a type alias for monomorphic traversals which don't change the type of the container (or of the values inside).</p></div></div><div class="top"><p class="src"><a id="v:traverseOf" class="def">traverseOf</a> :: <a href="Lens-Micro.html#t:LensLike" title="Lens.Micro">LensLike</a> f s t a b -&gt; (a -&gt; f b) -&gt; s -&gt; f t <a href="src/Lens.Micro.html#traverseOf" class="link">Source</a> <a href="#v:traverseOf" class="selflink">#</a></p><div class="doc"><p>Apply an action to all targets (like <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Traversable.html#v:mapM" title="Data.Traversable">mapM</a></code> or <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Traversable.html#v:traverse" title="Data.Traversable">traverse</a></code>):</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>traverseOf both readFile (&quot;file1&quot;, &quot;file2&quot;)
</code></strong>(&lt;contents of file1&gt;, &lt;contents of file2&gt;)
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>traverseOf _1 id (Just 1, 2)
</code></strong>Just (1, 2)
<code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>traverseOf _1 id (Nothing, 2)
</code></strong>Nothing
</pre><p>You can also just apply the lens/traversal directly (but <code><a href="Lens-Micro.html#v:traverseOf" title="Lens.Micro">traverseOf</a></code> might be more readable):</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>both readFile (&quot;file1&quot;, &quot;file2&quot;)
</code></strong>(&lt;contents of file1&gt;, &lt;contents of file2&gt;)
</pre><p>If you don't need the result, use <code><a href="Lens-Micro.html#v:traverseOf_" title="Lens.Micro">traverseOf_</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:forOf" class="def">forOf</a> :: <a href="Lens-Micro.html#t:LensLike" title="Lens.Micro">LensLike</a> f s t a b -&gt; s -&gt; (a -&gt; f b) -&gt; f t <a href="src/Lens.Micro.html#forOf" class="link">Source</a> <a href="#v:forOf" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#v:traverseOf" title="Lens.Micro">traverseOf</a></code> with flipped arguments. Useful if the &#8220;loop body&#8221; is a lambda or
a <code>do</code> block.</p></div></div><div class="top"><p class="src"><a id="v:singular" class="def">singular</a> :: <a href="Lens-Micro-Internal.html#t:HasCallStack" title="Lens.Micro.Internal">HasCallStack</a> =&gt; <a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a> s t a a -&gt; <a href="Lens-Micro.html#t:Lens" title="Lens.Micro">Lens</a> s t a a <a href="src/Lens.Micro.html#singular" class="link">Source</a> <a href="#v:singular" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#v:singular" title="Lens.Micro">singular</a></code> turns a traversal into a lens that behaves like a single-element traversal:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>[1,2,3] ^. singular each
</code></strong>1
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>[1,2,3] &amp; singular each %~ negate
</code></strong>[-1,2,3]
</pre><p>If there is nothing to return, it'll throw an error:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>[] ^. singular each
</code></strong>*** Exception: Lens.Micro.singular: empty traversal
</pre><p>However, it won't fail if you are merely setting the value:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>[] &amp; singular each %~ negate
</code></strong></pre></div></div><div class="top"><p class="src"><a id="v:failing" class="def">failing</a> :: <a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a> s t a b -&gt; <a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a> s t a b -&gt; <a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a> s t a b <span class="fixity">infixl 5</span><span class="rightedge"></span> <a href="src/Lens.Micro.html#failing" class="link">Source</a> <a href="#v:failing" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#v:failing" title="Lens.Micro">failing</a></code> lets you chain traversals together; if the 1st traversal fails, the 2nd traversal will be used.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>([1,2],[3]) &amp; failing (_1.each) (_2.each) .~ 0
</code></strong>([0,0],[3])
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>([],[3]) &amp; failing (_1.each) (_2.each) .~ 0
</code></strong>([],[0])
</pre><p>Note that the resulting traversal won't be valid unless either both traversals don't touch each others' elements, or both traversals return exactly the same results. To see an example of how <code><a href="Lens-Micro.html#v:failing" title="Lens.Micro">failing</a></code> can generate invalid traversals, see <a href="http://stackoverflow.com/questions/27138856/why-does-failing-from-lens-produce-invalid-traversals">this Stackoverflow question</a>.</p></div></div><div class="top"><p class="src"><a id="v:filtered" class="def">filtered</a> :: (a -&gt; <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Lens-Micro.html#t:Traversal-39-" title="Lens.Micro">Traversal'</a> a a <a href="src/Lens.Micro.html#filtered" class="link">Source</a> <a href="#v:filtered" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#v:filtered" title="Lens.Micro">filtered</a></code> is a traversal that filters elements &#8220;passing&#8221; through it:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(1,2,3,4) ^.. each
</code></strong>[1,2,3,4]
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(1,2,3,4) ^.. each . filtered even
</code></strong>[2,4]
</pre><p>It also can be used to modify elements selectively:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(1,2,3,4) &amp; each . filtered even %~ (*100)
</code></strong>(1,200,3,400)
</pre><p>The implementation of <code><a href="Lens-Micro.html#v:filtered" title="Lens.Micro">filtered</a></code> is very simple. Consider this traversal, which always &#8220;traverses&#8221; just the value it's given:</p><pre>id :: <code><a href="Lens-Micro.html#t:Traversal-39-" title="Lens.Micro">Traversal'</a></code> a a
id f s = f s
</pre><p>And this traversal, which traverses nothing (in other words, <em>doesn't</em> traverse the value it's given):</p><pre>ignored :: <code><a href="Lens-Micro.html#t:Traversal-39-" title="Lens.Micro">Traversal'</a></code> a a
ignored f s = <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Control-Applicative.html#v:pure" title="Control.Applicative">pure</a></code> s
</pre><p>And now combine them into a traversal that conditionally traverses the value it's given, and you get <code><a href="Lens-Micro.html#v:filtered" title="Lens.Micro">filtered</a></code>:</p><pre>filtered :: (a -&gt; Bool) -&gt; <code><a href="Lens-Micro.html#t:Traversal-39-" title="Lens.Micro">Traversal'</a></code> a a
filtered p f s = if p s then f s else <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Control-Applicative.html#v:pure" title="Control.Applicative">pure</a></code> s
</pre><p>By the way, note that <code><a href="Lens-Micro.html#v:filtered" title="Lens.Micro">filtered</a></code> can generate illegal traversals &#8211; sometimes this can bite you. In particular, an optimisation that should be safe becomes unsafe. (To the best of my knowledge, this optimisation never happens automatically. If you just use <code><a href="Lens-Micro.html#v:filtered" title="Lens.Micro">filtered</a></code> to modify/view something, you're safe. If you don't define any traversals that use <code><a href="Lens-Micro.html#v:filtered" title="Lens.Micro">filtered</a></code>, you're safe too.)</p><p>Let's use <code>evens</code> as an example:</p><pre>evens = <code><a href="Lens-Micro.html#v:filtered" title="Lens.Micro">filtered</a></code> <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Prelude.html#v:even" title="Prelude">even</a></code>
</pre><p>If <code>evens</code> was a legal traversal, you'd be able to fuse several applications of <code>evens</code> like this:</p><pre><code><a href="Lens-Micro.html#v:over" title="Lens.Micro">over</a></code> evens f <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Function.html#v:." title="Data.Function">.</a></code> <code><a href="Lens-Micro.html#v:over" title="Lens.Micro">over</a></code> evens g = <code><a href="Lens-Micro.html#v:over" title="Lens.Micro">over</a></code> evens (f <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Function.html#v:." title="Data.Function">.</a></code> g)
</pre><p>Unfortunately, in case of <code>evens</code> this isn't a correct optimisation:</p><ul><li>the left-side variant applies <code>g</code> to all even numbers, and then applies <code>f</code> to all even numbers that are left after <code>f</code> (because <code>f</code> might've turned some even numbers into odd ones)</li><li>the right-side variant applies <code>f</code> and <code>g</code> to all even numbers</li></ul><p>Of course, when you are careful and know what you're doing, you won't try to make such an optimisation. However, if you export an illegal traversal created with <code><a href="Lens-Micro.html#v:filtered" title="Lens.Micro">filtered</a></code> and someone tries to use it, they might mistakenly assume that it's legal, do the optimisation, and silently get an incorrect result.</p><p>If you are using <code><a href="Lens-Micro.html#v:filtered" title="Lens.Micro">filtered</a></code> with some another traversal that doesn't overlap with -whatever the predicate checks-, the resulting traversal will be legal. For instance, here the predicate looks at the 1st element of a tuple, but the resulting traversal only gives you access to the 2nd:</p><pre>pairedWithEvens :: <code><a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a></code> [(Int, a)] [(Int, b)] a b
pairedWithEvens = <code><a href="Lens-Micro.html#v:each" title="Lens.Micro">each</a></code> <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Function.html#v:." title="Data.Function">.</a></code> <code><a href="Lens-Micro.html#v:filtered" title="Lens.Micro">filtered</a></code> (<code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Prelude.html#v:even" title="Prelude">even</a></code> <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Function.html#v:." title="Data.Function">.</a></code> <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Tuple.html#v:fst" title="Data.Tuple">fst</a></code>) <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Function.html#v:." title="Data.Function">.</a></code> <code><a href="Lens-Micro.html#v:_2" title="Lens.Micro">_2</a></code>
</pre><p>Since you can't do anything with the 1st components through this traversal, the following holds for any <code>f</code> and <code>g</code>:</p><pre><code><a href="Lens-Micro.html#v:over" title="Lens.Micro">over</a></code> pairedWithEvens f <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Function.html#v:." title="Data.Function">.</a></code> <code><a href="Lens-Micro.html#v:over" title="Lens.Micro">over</a></code> pairedWithEvens g = <code><a href="Lens-Micro.html#v:over" title="Lens.Micro">over</a></code> pairedWithEvens (f <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Function.html#v:." title="Data.Function">.</a></code> g)
</pre></div></div><div class="top"><p class="src"><a id="v:both" class="def">both</a> :: <a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a> (a, a) (b, b) a b <a href="src/Lens.Micro.html#both" class="link">Source</a> <a href="#v:both" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#v:both" title="Lens.Micro">both</a></code> traverses both fields of a tuple. Unlike <code><a href="http://hackage.haskell.org/package/lens/docs/Control-Lens-Traversal.html#v:both">both</a></code> from lens, it only works for pairs &#8211; not for triples or <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a></code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(&quot;str&quot;,&quot;ing&quot;) ^. both
</code></strong>&quot;string&quot;
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(&quot;str&quot;,&quot;ing&quot;) &amp; both %~ reverse
</code></strong>(&quot;rts&quot;,&quot;gni&quot;)
</pre></div></div><div class="top"><p class="src"><a id="v:traversed" class="def">traversed</a> :: <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Traversable.html#t:Traversable" title="Data.Traversable">Traversable</a> f =&gt; <a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a> (f a) (f b) a b <a href="src/Lens.Micro.Internal.html#traversed" class="link">Source</a> <a href="#v:traversed" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#v:traversed" title="Lens.Micro">traversed</a></code> traverses any <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Traversable.html#t:Traversable" title="Data.Traversable">Traversable</a></code> container (list, vector, <code>Map</code>, <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a></code>, you name it):</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Just 1 ^.. traversed
</code></strong>[1]
</pre><p><code><a href="Lens-Micro.html#v:traversed" title="Lens.Micro">traversed</a></code> is the same as <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Traversable.html#v:traverse" title="Data.Traversable">traverse</a></code>, but can be faster thanks to magic rewrite rules.</p></div></div><div class="top"><p class="src"><a id="v:each" class="def">each</a> :: <a href="Lens-Micro-Internal.html#t:Each" title="Lens.Micro.Internal">Each</a> s t a b =&gt; <a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a> s t a b <a href="src/Lens.Micro.Internal.html#each" class="link">Source</a> <a href="#v:each" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#v:each" title="Lens.Micro">each</a></code> tries to be a universal <code><a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a></code> &#8211; it behaves like <code><a href="Lens-Micro.html#v:traversed" title="Lens.Micro">traversed</a></code> in most situations, but also adds support for e.g. tuples with same-typed values:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(1,2) &amp; each %~ succ
</code></strong>(2,3)
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>[&quot;x&quot;, &quot;y&quot;, &quot;z&quot;] ^. each
</code></strong>&quot;xyz&quot;
</pre><p>However, note that <code><a href="Lens-Micro.html#v:each" title="Lens.Micro">each</a></code> doesn't work on <em>every</em> instance of <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Traversable.html#t:Traversable" title="Data.Traversable">Traversable</a></code>. If you have a <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Traversable.html#t:Traversable" title="Data.Traversable">Traversable</a></code> which isn't supported by <code><a href="Lens-Micro.html#v:each" title="Lens.Micro">each</a></code>, you can use <code><a href="Lens-Micro.html#v:traversed" title="Lens.Micro">traversed</a></code> instead. Personally, I like using <code><a href="Lens-Micro.html#v:each" title="Lens.Micro">each</a></code> instead of <code><a href="Lens-Micro.html#v:traversed" title="Lens.Micro">traversed</a></code> whenever possible &#8211; it's shorter and more descriptive.</p><p>You can use <code><a href="Lens-Micro.html#v:each" title="Lens.Micro">each</a></code> with these things:</p><pre><code><a href="Lens-Micro.html#v:each" title="Lens.Micro">each</a></code> :: <code><a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a></code> [a] [b] a b

<code><a href="Lens-Micro.html#v:each" title="Lens.Micro">each</a></code> :: <code><a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a></code> (<code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a></code> a) (<code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a></code> b) a b
<code><a href="Lens-Micro.html#v:each" title="Lens.Micro">each</a></code> :: <code><a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a></code> (<code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a></code> a a) (<code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a></code> b b) a b  -- since 0.4.11

<code><a href="Lens-Micro.html#v:each" title="Lens.Micro">each</a></code> :: <code><a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a></code> (a,a) (b,b) a b
<code><a href="Lens-Micro.html#v:each" title="Lens.Micro">each</a></code> :: <code><a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a></code> (a,a,a) (b,b,b) a b
<code><a href="Lens-Micro.html#v:each" title="Lens.Micro">each</a></code> :: <code><a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a></code> (a,a,a,a) (b,b,b,b) a b
<code><a href="Lens-Micro.html#v:each" title="Lens.Micro">each</a></code> :: <code><a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a></code> (a,a,a,a,a) (b,b,b,b,b) a b

<code><a href="Lens-Micro.html#v:each" title="Lens.Micro">each</a></code> :: (<code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Prelude.html#t:RealFloat" title="Prelude">RealFloat</a></code> a, <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Prelude.html#t:RealFloat" title="Prelude">RealFloat</a></code> b) =&gt; <code><a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a></code> (<code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Complex.html#t:Complex" title="Data.Complex">Complex</a></code> a) (<code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Complex.html#t:Complex" title="Data.Complex">Complex</a></code> b) a b
</pre><p>You can also use <code><a href="Lens-Micro.html#v:each" title="Lens.Micro">each</a></code> with types from <a href="http://hackage.haskell.org/package/array">array</a>, <a href="http://hackage.haskell.org/package/bytestring">bytestring</a>, and <a href="http://hackage.haskell.org/package/containers">containers</a> by using <a href="http://hackage.haskell.org/package/microlens-ghc">microlens-ghc</a>, or additionally with types from <a href="http://hackage.haskell.org/package/vector">vector</a>, <a href="http://hackage.haskell.org/package/text">text</a>, and <a href="http://hackage.haskell.org/package/unordered-containers">unordered-containers</a> by using <a href="http://hackage.haskell.org/package/microlens-platform">microlens-platform</a>.</p></div></div><div class="top"><p class="src"><a id="v:ix" class="def">ix</a> :: <a href="Lens-Micro-Internal.html#t:Ixed" title="Lens.Micro.Internal">Ixed</a> m =&gt; <a href="Lens-Micro-Internal.html#t:Index" title="Lens.Micro.Internal">Index</a> m -&gt; <a href="Lens-Micro.html#t:Traversal-39-" title="Lens.Micro">Traversal'</a> m (<a href="Lens-Micro-Internal.html#t:IxValue" title="Lens.Micro.Internal">IxValue</a> m) <a href="src/Lens.Micro.Internal.html#ix" class="link">Source</a> <a href="#v:ix" class="selflink">#</a></p><div class="doc"><p>This traversal lets you access (and update) an arbitrary element in a list, array, <code>Map</code>, etc. (If you want to insert or delete elements as well, look at <code><a href="Lens-Micro.html#v:at" title="Lens.Micro">at</a></code>.)</p><p>An example for lists:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>[0..5] &amp; ix 3 .~ 10
</code></strong>[0,1,2,10,4,5]
</pre><p>You can use it for getting, too:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>[0..5] ^? ix 3
</code></strong>Just 3
</pre><p>Of course, the element may not be present (which means that you can use <code><a href="Lens-Micro.html#v:ix" title="Lens.Micro">ix</a></code> as a safe variant of (<code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/GHC-List.html#v:-33--33-" title="GHC.List">!!</a></code>)):</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>[0..5] ^? ix 10
</code></strong>Nothing
</pre><p>Another useful instance is the one for functions &#8211; it lets you modify their outputs for specific inputs. For instance, here's <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Foldable.html#v:maximum" title="Data.Foldable">maximum</a></code> that returns 0 when the list is empty (instead of throwing an exception):</p><pre>maximum0 = <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Foldable.html#v:maximum" title="Data.Foldable">maximum</a></code> <code><a href="Lens-Micro.html#v:-38-" title="Lens.Micro">&amp;</a></code> <code><a href="Lens-Micro.html#v:ix" title="Lens.Micro">ix</a></code> [] <code><a href="Lens-Micro.html#v:.-126-" title="Lens.Micro">.~</a></code> 0
</pre><p>The following instances are provided in this package:</p><pre><code><a href="Lens-Micro.html#v:ix" title="Lens.Micro">ix</a></code> :: <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a></code> -&gt; <code><a href="Lens-Micro.html#t:Traversal-39-" title="Lens.Micro">Traversal'</a></code> [a] a

<code><a href="Lens-Micro.html#v:ix" title="Lens.Micro">ix</a></code> :: <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a></code> -&gt; <code><a href="Lens-Micro.html#t:Traversal-39-" title="Lens.Micro">Traversal'</a></code> (NonEmpty a) a

<code><a href="Lens-Micro.html#v:ix" title="Lens.Micro">ix</a></code> :: (<code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a></code> e) =&gt; e -&gt; <code><a href="Lens-Micro.html#t:Traversal-39-" title="Lens.Micro">Traversal'</a></code> (e -&gt; a) a
</pre><p>You can also use <code><a href="Lens-Micro.html#v:ix" title="Lens.Micro">ix</a></code> with types from <a href="http://hackage.haskell.org/package/array">array</a>, <a href="http://hackage.haskell.org/package/bytestring">bytestring</a>, and <a href="http://hackage.haskell.org/package/containers">containers</a> by using <a href="http://hackage.haskell.org/package/microlens-ghc">microlens-ghc</a>, or additionally with types from <a href="http://hackage.haskell.org/package/vector">vector</a>, <a href="http://hackage.haskell.org/package/text">text</a>, and <a href="http://hackage.haskell.org/package/unordered-containers">unordered-containers</a> by using <a href="http://hackage.haskell.org/package/microlens-platform">microlens-platform</a>.</p></div></div><div class="top"><p class="src"><a id="v:_head" class="def">_head</a> :: <a href="Lens-Micro-Internal.html#t:Cons" title="Lens.Micro.Internal">Cons</a> s s a a =&gt; <a href="Lens-Micro.html#t:Traversal-39-" title="Lens.Micro">Traversal'</a> s a <a href="src/Lens.Micro.html#_head" class="link">Source</a> <a href="#v:_head" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#v:_head" title="Lens.Micro">_head</a></code> traverses the 1st element of something (usually a list, but can also be a <code>Seq</code>, etc):</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>[1..5] ^? _head
</code></strong>Just 1
</pre><p>It can be used to modify too, as in this example where the 1st letter of a sentence is capitalised:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>&quot;mary had a little lamb.&quot; &amp; _head %~ toTitle
</code></strong>&quot;Mary had a little lamb.&quot;
</pre><p>The reason it's a traversal and not a lens is that there's nothing to traverse when the list is empty:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>[] ^? _head
</code></strong>Nothing
</pre><p>This package only lets you use <code><a href="Lens-Micro.html#v:_head" title="Lens.Micro">_head</a></code> on lists, but if you use <a href="http://hackage.haskell.org/package/microlens-ghc">microlens-ghc</a> you get instances for <code>ByteString</code> and <code>Seq</code>, and if you use <a href="http://hackage.haskell.org/package/microlens-platform">microlens-platform</a> you additionally get instances for <code>Text</code> and <code>Vector</code>.</p></div></div><div class="top"><p class="src"><a id="v:_tail" class="def">_tail</a> :: <a href="Lens-Micro-Internal.html#t:Cons" title="Lens.Micro.Internal">Cons</a> s s a a =&gt; <a href="Lens-Micro.html#t:Traversal-39-" title="Lens.Micro">Traversal'</a> s s <a href="src/Lens.Micro.html#_tail" class="link">Source</a> <a href="#v:_tail" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#v:_tail" title="Lens.Micro">_tail</a></code> gives you access to the tail of a list (or <code>Seq</code>, etc):</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>[1..5] ^? _tail
</code></strong>Just [2,3,4,5]
</pre><p>You can modify the tail as well:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>[4,1,2,3] &amp; _tail %~ reverse
</code></strong>[4,3,2,1]
</pre><p>Since lists are monoids, you can use <code><a href="Lens-Micro.html#v:_tail" title="Lens.Micro">_tail</a></code> with plain (<code><a href="Lens-Micro.html#v:-94-." title="Lens.Micro">^.</a></code>) (and then it'll return an empty list if you give it an empty list):</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>[1..5] ^. _tail
</code></strong>[2,3,4,5]
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>[] ^. _tail
</code></strong>[]
</pre><p>If you want to traverse each <em>element</em> of the tail, use <code><a href="Lens-Micro.html#v:_tail" title="Lens.Micro">_tail</a></code> with <code><a href="Lens-Micro.html#v:each" title="Lens.Micro">each</a></code>:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>&quot;I HATE CAPS.&quot; &amp; _tail.each %~ toLower
</code></strong>&quot;I hate caps.&quot;
</pre><p>This package only lets you use <code><a href="Lens-Micro.html#v:_tail" title="Lens.Micro">_tail</a></code> on lists, but if you use <a href="http://hackage.haskell.org/package/microlens-ghc">microlens-ghc</a> you get instances for <code>ByteString</code> and <code>Seq</code>, and if you use <a href="http://hackage.haskell.org/package/microlens-platform">microlens-platform</a> you additionally get instances for <code>Text</code> and <code>Vector</code>.</p></div></div><div class="top"><p class="src"><a id="v:_init" class="def">_init</a> :: <a href="Lens-Micro-Internal.html#t:Snoc" title="Lens.Micro.Internal">Snoc</a> s s a a =&gt; <a href="Lens-Micro.html#t:Traversal-39-" title="Lens.Micro">Traversal'</a> s s <a href="src/Lens.Micro.html#_init" class="link">Source</a> <a href="#v:_init" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#v:_init" title="Lens.Micro">_init</a></code> gives you access to all-but-the-last elements of the list:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>&quot;Hello.&quot; ^. _init
</code></strong>&quot;Hello&quot;
</pre><p>See documentation for <code><a href="Lens-Micro.html#v:_tail" title="Lens.Micro">_tail</a></code>, as <code><a href="Lens-Micro.html#v:_init" title="Lens.Micro">_init</a></code> and <code><a href="Lens-Micro.html#v:_tail" title="Lens.Micro">_tail</a></code> are pretty similar.</p></div></div><div class="top"><p class="src"><a id="v:_last" class="def">_last</a> :: <a href="Lens-Micro-Internal.html#t:Snoc" title="Lens.Micro.Internal">Snoc</a> s s a a =&gt; <a href="Lens-Micro.html#t:Traversal-39-" title="Lens.Micro">Traversal'</a> s a <a href="src/Lens.Micro.html#_last" class="link">Source</a> <a href="#v:_last" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#v:_last" title="Lens.Micro">_last</a></code> gives you access to the last element of the list:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>&quot;Hello.&quot; ^? _last
</code></strong>'.'
</pre><p>See documentation for <code><a href="Lens-Micro.html#v:_head" title="Lens.Micro">_head</a></code>, as <code><a href="Lens-Micro.html#v:_last" title="Lens.Micro">_last</a></code> and <code><a href="Lens-Micro.html#v:_head" title="Lens.Micro">_head</a></code> are pretty similar.</p></div></div><div class="top"><p class="src"><a id="v:mapAccumLOf" class="def">mapAccumLOf</a> :: <a href="Lens-Micro.html#t:LensLike" title="Lens.Micro">LensLike</a> (State acc) s t a b -&gt; (acc -&gt; a -&gt; (acc, b)) -&gt; acc -&gt; s -&gt; (acc, t) <a href="src/Lens.Micro.html#mapAccumLOf" class="link">Source</a> <a href="#v:mapAccumLOf" class="selflink">#</a></p><div class="doc"><p>This generalizes <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Traversable.html#v:mapAccumL" title="Data.Traversable">mapAccumL</a></code> to an arbitrary <code><a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a></code>. (Note that it doesn't work on folds, only traversals.)</p><pre><code>mapAccumL</code> &#8801; <code><a href="Lens-Micro.html#v:mapAccumLOf" title="Lens.Micro">mapAccumLOf</a></code> <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Traversable.html#v:traverse" title="Data.Traversable">traverse</a></code>
</pre></div></div><div class="top"><p class="src"><a id="v:worded" class="def">worded</a> :: <a href="Lens-Micro.html#t:Traversal-39-" title="Lens.Micro">Traversal'</a> <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Lens.Micro.html#worded" class="link">Source</a> <a href="#v:worded" class="selflink">#</a></p><div class="doc"><p>Focus on the <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/GHC-OldList.html#v:words" title="GHC.OldList">words</a></code> of a string.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>&quot;avoid success at all costs&quot; &amp; worded . _head %~ toUpper
</code></strong>&quot;Avoid Success At All Costs&quot;
</pre><p>This violates the traversal laws when whitespace is set or when the source has
space at the ends or more than one contiguous space anywhere.</p></div></div><div class="top"><p class="src"><a id="v:lined" class="def">lined</a> :: <a href="Lens-Micro.html#t:Traversal-39-" title="Lens.Micro">Traversal'</a> <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-String.html#t:String" title="Data.String">String</a> <a href="src/Lens.Micro.html#lined" class="link">Source</a> <a href="#v:lined" class="selflink">#</a></p><div class="doc"><p>Focus on the <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/GHC-OldList.html#v:lines" title="GHC.OldList">lines</a></code> of a string.</p><pre>countAndMarkEmptyLines :: String -&gt; State Int String
countAndMarkEmptyLines s = runState (f s) 0 where
  f = <code><a href="Lens-Micro.html#v:traverseOf" title="Lens.Micro">traverseOf</a></code> (lined . <code><a href="Lens-Micro.html#v:filtered" title="Lens.Micro">filtered</a></code> null) $ \_ -&gt; do
    modify' (+ 1)
    return &quot;# Empty line&quot;
</pre><p>This violates the traversal laws when newlines are set or when the source has
more than one contiguous newline anywhere.</p></div></div><a href="#g:7" id="g:7"><h1>Prism: a traversal iterating over at most 1 element</h1></a><div class="doc"><p>Prisms are traversals that always target 0 or 1 values. Moreover, it's possible to <em>reverse</em> a prism, using it to construct a structure instead of peeking into it. Here's an example from the lens library:</p><pre>&gt;&gt;&gt; over _Left (+1) (Left 2)
Left 3

&gt;&gt;&gt; _Left # 5
Left 5
</pre><p>However, it's not possible for microlens to export prisms, because their type depends on <code><a href="http://hackage.haskell.org/package/profunctors/docs/Data-Profunctor.html#t:Choice">Choice</a></code> from <a href="http://hackage.haskell.org/package/profunctors">profunctors</a>. So, all prisms included here are traversals instead (and you can't reverse them).</p></div><div class="top"><p class="src"><a id="v:_Left" class="def">_Left</a> :: <a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a> (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a> a b) (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a> a' b) a a' <a href="src/Lens.Micro.html#_Left" class="link">Source</a> <a href="#v:_Left" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#v:_Left" title="Lens.Micro">_Left</a></code> targets the value contained in an <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a></code>, provided it's a <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Either.html#v:Left" title="Data.Either">Left</a></code>.</p><p>Gathering all <code>Left</code>s in a structure (like the <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Either.html#v:lefts" title="Data.Either">lefts</a></code> function, but not necessarily just for lists):</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>[Left 1, Right 'c', Left 3] ^.. each._Left
</code></strong>[1,3]
</pre><p>Checking whether an <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a></code> is a <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Either.html#v:Left" title="Data.Either">Left</a></code> (like <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Either.html#v:isLeft" title="Data.Either">isLeft</a></code>):</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>has _Left (Left 1)
</code></strong>True
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>has _Left (Right 1)
</code></strong>False
</pre><p>Extracting a value (if you're sure it's a <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Either.html#v:Left" title="Data.Either">Left</a></code>):</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Left 1 ^?! _Left
</code></strong>1
</pre><p>Mapping over all <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Either.html#v:Left" title="Data.Either">Left</a></code>s:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>(each._Left %~ map toUpper) [Left &quot;foo&quot;, Right &quot;bar&quot;]
</code></strong>[Left &quot;FOO&quot;,Right &quot;bar&quot;]
</pre><p>Implementation:</p><pre><code><a href="Lens-Micro.html#v:_Left" title="Lens.Micro">_Left</a></code> f (Left a)  = <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Either.html#v:Left" title="Data.Either">Left</a></code> <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#v:-60--36--62-" title="Data.Functor">&lt;$&gt;</a></code> f a
<code><a href="Lens-Micro.html#v:_Left" title="Lens.Micro">_Left</a></code> _ (Right b) = <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Control-Applicative.html#v:pure" title="Control.Applicative">pure</a></code> (<code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Either.html#v:Right" title="Data.Either">Right</a></code> b)
</pre></div></div><div class="top"><p class="src"><a id="v:_Right" class="def">_Right</a> :: <a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a> (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a> a b) (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a> a b') b b' <a href="src/Lens.Micro.html#_Right" class="link">Source</a> <a href="#v:_Right" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#v:_Right" title="Lens.Micro">_Right</a></code> targets the value contained in an <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Either.html#t:Either" title="Data.Either">Either</a></code>, provided it's a <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Either.html#v:Right" title="Data.Either">Right</a></code>.</p><p>See documentation for <code><a href="Lens-Micro.html#v:_Left" title="Lens.Micro">_Left</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:_Just" class="def">_Just</a> :: <a href="Lens-Micro.html#t:Traversal" title="Lens.Micro">Traversal</a> (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a') a a' <a href="src/Lens.Micro.html#_Just" class="link">Source</a> <a href="#v:_Just" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#v:_Just" title="Lens.Micro">_Just</a></code> targets the value contained in a <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a></code>, provided it's a <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#v:Just" title="Data.Maybe">Just</a></code>.</p><p>See documentation for <code><a href="Lens-Micro.html#v:_Left" title="Lens.Micro">_Left</a></code> (as these 2 are pretty similar). In particular, it can be used to write these:</p><ul><li>Unsafely extracting a value from a <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#v:Just" title="Data.Maybe">Just</a></code>:</li></ul><pre>   <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#v:fromJust" title="Data.Maybe">fromJust</a></code> = (<code><a href="Lens-Micro.html#v:-94--63--33-" title="Lens.Micro">^?!</a></code> <code><a href="Lens-Micro.html#v:_Just" title="Lens.Micro">_Just</a></code>)
   </pre><ul><li>Checking whether a value is a <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#v:Just" title="Data.Maybe">Just</a></code>:</li></ul><pre>   <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#v:isJust" title="Data.Maybe">isJust</a></code> = <code><a href="Lens-Micro.html#v:has" title="Lens.Micro">has</a></code> <code><a href="Lens-Micro.html#v:_Just" title="Lens.Micro">_Just</a></code>
   </pre><ul><li>Converting a <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a></code> to a list (empty or consisting of a single element):</li></ul><pre>   <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#v:maybeToList" title="Data.Maybe">maybeToList</a></code> = (<code><a href="Lens-Micro.html#v:-94-.." title="Lens.Micro">^..</a></code> <code><a href="Lens-Micro.html#v:_Just" title="Lens.Micro">_Just</a></code>)
   </pre><ul><li>Gathering all <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#v:Just" title="Data.Maybe">Just</a></code>s in a list:</li></ul><pre>   <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#v:catMaybes" title="Data.Maybe">catMaybes</a></code> = (<code><a href="Lens-Micro.html#v:-94-.." title="Lens.Micro">^..</a></code> <code><a href="Lens-Micro.html#v:each" title="Lens.Micro">each</a></code> <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Function.html#v:." title="Data.Function">.</a></code> <code><a href="Lens-Micro.html#v:_Just" title="Lens.Micro">_Just</a></code>)
   </pre></div></div><div class="top"><p class="src"><a id="v:_Nothing" class="def">_Nothing</a> :: <a href="Lens-Micro.html#t:Traversal-39-" title="Lens.Micro">Traversal'</a> (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) () <a href="src/Lens.Micro.html#_Nothing" class="link">Source</a> <a href="#v:_Nothing" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#v:_Nothing" title="Lens.Micro">_Nothing</a></code> targets a <code>()</code> if the <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a></code> is a <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code>, and doesn't target anything otherwise:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Just 1 ^.. _Nothing
</code></strong>[]
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Nothing ^.. _Nothing
</code></strong>[()]
</pre><p>It's not particularly useful (unless you want to use <code><code><a href="Lens-Micro.html#v:has" title="Lens.Micro">has</a></code> <code><a href="Lens-Micro.html#v:_Nothing" title="Lens.Micro">_Nothing</a></code></code> as a replacement for <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#v:isNothing" title="Data.Maybe">isNothing</a></code>), and provided mainly for consistency.</p><p>Implementation:</p><pre><code><a href="Lens-Micro.html#v:_Nothing" title="Lens.Micro">_Nothing</a></code> f Nothing = <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Function.html#v:const" title="Data.Function">const</a></code> <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-Functor.html#v:-60--36--62-" title="Data.Functor">&lt;$&gt;</a></code> f ()
<code><a href="Lens-Micro.html#v:_Nothing" title="Lens.Micro">_Nothing</a></code> _ j       = <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Control-Applicative.html#v:pure" title="Control.Applicative">pure</a></code> j
</pre></div></div><div class="top"><p class="src"><a id="v:_Show" class="def">_Show</a> :: (<a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Text-Show.html#t:Show" title="Text.Show">Show</a> a, <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Text-Read.html#t:Read" title="Text.Read">Read</a> a) =&gt; <a href="Lens-Micro.html#t:Traversal-39-" title="Lens.Micro">Traversal'</a> <a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-String.html#t:String" title="Data.String">String</a> a <a href="src/Lens.Micro.html#_Show" class="link">Source</a> <a href="#v:_Show" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#v:_Show" title="Lens.Micro">_Show</a></code> targets the Haskell value in a <code>String</code> using <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Text-Read.html#t:Read" title="Text.Read">Read</a></code>, or nothing if parsing fails.  Likewise, setting a Haskell value through this prism renders a <code>String</code> using <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Text-Show.html#t:Show" title="Text.Show">Show</a></code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>[&quot;abc&quot;,&quot;8&quot;,&quot;def&quot;,&quot;9&quot;] &amp; mapped . _Show %~ \x -&gt; x + 1 :: Int
</code></strong>[&quot;abc&quot;,&quot;9&quot;,&quot;def&quot;,&quot;10&quot;]
</pre><p>Note that this prism is improper for types that don't satisfy <code>read . show = id</code>:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>&quot;25.9999999&quot; &amp; _Show %~ \x -&gt; x :: Float
</code></strong>&quot;26.0&quot;
</pre><p>These functions from <code>base</code> can be expressed in terms of <code><a href="Lens-Micro.html#v:_Show" title="Lens.Micro">_Show</a></code>:</p><ul><li>Unsafely parsing a value from a <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-String.html#t:String" title="Data.String">String</a></code>:</li></ul><pre> <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Text-Read.html#v:read" title="Text.Read">read</a></code> = (<code><a href="Lens-Micro.html#v:-94--63--33-" title="Lens.Micro">^?!</a></code> <code><a href="Lens-Micro.html#v:_Show" title="Lens.Micro">_Show</a></code>)
 </pre><ul><li>Safely parsing a value from a <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Data-String.html#t:String" title="Data.String">String</a></code>:</li></ul><pre> <code><a href="file:///nix/store/q5s037f3dqgwfpccw3qcagm27malqb1y-ghc-9.6.7-doc/share/doc/ghc-9.6.7/html/libraries/base-4.18.3.0/Text-Read.html#v:readMaybe" title="Text.Read">readMaybe</a></code> = (<code><a href="Lens-Micro.html#v:-94--63-" title="Lens.Micro">^?</a></code> <code><a href="Lens-Micro.html#v:_Show" title="Lens.Micro">_Show</a></code>)
 </pre></div></div><a href="#g:8" id="g:8"><h1>Other types</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:LensLike" class="def">LensLike</a> f s t a b = (a -&gt; f b) -&gt; s -&gt; f t <a href="src/Lens.Micro.Type.html#LensLike" class="link">Source</a> <a href="#t:LensLike" class="selflink">#</a></p><div class="doc"><p><code><a href="Lens-Micro.html#t:LensLike" title="Lens.Micro">LensLike</a></code> is a type that is often used to make combinators as general as possible. For instance, take (<code><a href="Lens-Micro.html#v:-60--60--37--126-" title="Lens.Micro">&lt;&lt;%~</a></code>), which only requires the passed lens to be able to work with the <code>(,) a</code> functor (lenses and traversals can do that). The fully expanded type is as follows:</p><pre>(<code><a href="Lens-Micro.html#v:-60--60--37--126-" title="Lens.Micro">&lt;&lt;%~</a></code>) :: ((a -&gt; (a, b)) -&gt; s -&gt; (a, t)) -&gt; (a -&gt; b) -&gt; s -&gt; (a, t)
</pre><p>With <code><a href="Lens-Micro.html#t:LensLike" title="Lens.Micro">LensLike</a></code>, the intent to use the <code>(,) a</code> functor can be made a bit clearer:</p><pre>(<code><a href="Lens-Micro.html#v:-60--60--37--126-" title="Lens.Micro">&lt;&lt;%~</a></code>) :: LensLike ((,) a) s t a b -&gt; (a -&gt; b) -&gt; s -&gt; (a, t)
</pre></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:LensLike-39-" class="def">LensLike'</a> f s a = <a href="Lens-Micro.html#t:LensLike" title="Lens.Micro">LensLike</a> f s s a a <a href="src/Lens.Micro.Type.html#LensLike%27" class="link">Source</a> <a href="#t:LensLike-39-" class="selflink">#</a></p><div class="doc"><p>A type alias for monomorphic <code><a href="Lens-Micro.html#t:LensLike" title="Lens.Micro">LensLike</a></code>s.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>