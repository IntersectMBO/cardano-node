<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# language RecordWildCards #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# language DerivingVia #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# language OverloadedStrings #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# language ScopedTypeVariables #-}</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-comment">-- | The implementation of sqlite-easy.</span><span>
</span><span id="line-7"></span><span class="hs-comment">--</span><span>
</span><span id="line-8"></span><span class="hs-comment">-- This module is unstable and may change at any time.</span><span>
</span><span id="line-9"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Database.Sqlite.Easy.Internal</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Database.SQLite3</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Database</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">SQLData</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Statement</span></span><span class="hs-special">)</span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Database.SQLite3</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Direct</span></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.String.html"><span class="hs-identifier">Data.String</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.String.html#IsString"><span class="hs-identifier">IsString</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.String.html#fromString"><span class="hs-identifier">fromString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.html"><span class="hs-identifier">Data.Text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Internal.html#Text"><span class="hs-identifier">Text</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.html"><span class="hs-identifier">Data.Text</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Typeable.html"><span class="hs-identifier">Data.Typeable</span></a></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Pool</span></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/mtl-2.3.1/src/Control.Monad.Reader.html"><span class="hs-identifier">Control.Monad.Reader</span></a></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Exception.html"><span class="hs-identifier">Control.Exception</span></a></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.IO.Unlift</span></span><span>
</span><span id="line-21"></span><span>
</span><span id="line-22"></span><span class="annot"><span class="hs-comment">-- * Connection</span></span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span class="annot"><span class="hs-comment">-- | A SQLite3 connection string</span></span><span>
</span><span id="line-25"></span><span class="hs-keyword">newtype</span><span> </span><span id="ConnectionString"><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#ConnectionString"><span class="hs-identifier hs-var">ConnectionString</span></a></span></span><span>
</span><span id="line-26"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="ConnectionString"><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#ConnectionString"><span class="hs-identifier hs-var">ConnectionString</span></a></span></span><span>
</span><span id="line-27"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="unConnectionString"><span class="annot"><span class="annottext">ConnectionString -&gt; Text
</span><a href="Database.Sqlite.Easy.Internal.html#unConnectionString"><span class="hs-identifier hs-var hs-var">unConnectionString</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-28"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-29"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679061098"><span class="annot"><span class="annottext">String -&gt; ConnectionString
(String -&gt; ConnectionString) -&gt; IsString ConnectionString
forall a. (String -&gt; a) -&gt; IsString a
$cfromString :: String -&gt; ConnectionString
fromString :: String -&gt; ConnectionString
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.String.html#IsString"><span class="hs-identifier hs-var hs-var hs-var hs-var">IsString</span></a></span></span><span> </span><span class="hs-keyword">via</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-30"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679061104"><span id="local-6989586621679061110"><span id="local-6989586621679061114"><span class="annot"><span class="annottext">Int -&gt; ConnectionString -&gt; ShowS
[ConnectionString] -&gt; ShowS
ConnectionString -&gt; String
(Int -&gt; ConnectionString -&gt; ShowS)
-&gt; (ConnectionString -&gt; String)
-&gt; ([ConnectionString] -&gt; ShowS)
-&gt; Show ConnectionString
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; ConnectionString -&gt; ShowS
showsPrec :: Int -&gt; ConnectionString -&gt; ShowS
$cshow :: ConnectionString -&gt; String
show :: ConnectionString -&gt; String
$cshowList :: [ConnectionString] -&gt; ShowS
showList :: [ConnectionString] -&gt; ShowS
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span>
</span><span id="line-31"></span><span>
</span><span id="line-32"></span><span class="hs-comment">-- | Create a pool of a sqlite3 db with a specific connection string.</span><span>
</span><span id="line-33"></span><span class="hs-comment">--   This also sets a few default pragmas.</span><span>
</span><span id="line-34"></span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#createSqlitePool"><span class="hs-identifier hs-type">createSqlitePool</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#ConnectionString"><span class="hs-identifier hs-type">ConnectionString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Pool</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Database</span></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span id="createSqlitePool"><span class="annot"><span class="annottext">createSqlitePool :: ConnectionString -&gt; IO (Pool Database)
</span><a href="Database.Sqlite.Easy.Internal.html#createSqlitePool"><span class="hs-identifier hs-var hs-var">createSqlitePool</span></a></span></span><span> </span><span id="local-6989586621679061118"><span class="annot"><span class="annottext">ConnectionString
</span><a href="#local-6989586621679061118"><span class="hs-identifier hs-var">connStr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-36"></span><span>  </span><span class="annot"><span class="annottext">PoolConfig Database -&gt; IO (Pool Database)
forall a. PoolConfig a -&gt; IO (Pool a)
</span><span class="hs-identifier hs-var">newPool</span></span><span> </span><span class="annot"><span class="annottext">(PoolConfig Database -&gt; IO (Pool Database))
-&gt; PoolConfig Database -&gt; IO (Pool Database)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">IO Database
-&gt; (Database -&gt; IO ()) -&gt; Double -&gt; Int -&gt; PoolConfig Database
forall a. IO a -&gt; (a -&gt; IO ()) -&gt; Double -&gt; Int -&gt; PoolConfig a
</span><span class="hs-identifier hs-var">defaultPoolConfig</span></span><span>
</span><span id="line-37"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConnectionString -&gt; [SQL] -&gt; IO Database
</span><a href="Database.Sqlite.Easy.Internal.html#openWith"><span class="hs-identifier hs-var">openWith</span></a></span><span> </span><span class="annot"><span class="annottext">ConnectionString
</span><a href="#local-6989586621679061118"><span class="hs-identifier hs-var">connStr</span></a></span><span> </span><span class="annot"><span class="annottext">[SQL]
</span><a href="Database.Sqlite.Easy.Internal.html#defaultPragmas"><span class="hs-identifier hs-var">defaultPragmas</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span>    </span><span class="annot"><span class="annottext">Database -&gt; IO ()
</span><span class="hs-identifier hs-var">Direct.close</span></span><span>
</span><span id="line-39"></span><span>    </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">180</span></span><span>
</span><span id="line-40"></span><span>    </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">50</span></span><span>
</span><span id="line-41"></span><span>
</span><span id="line-42"></span><span class="hs-comment">-- | Create a pool of a sqlite3 db with a specific connection string.</span><span>
</span><span id="line-43"></span><span class="hs-comment">--   This will also run the supplied SQL statements after establishing</span><span>
</span><span id="line-44"></span><span class="hs-comment">--   each connection.</span><span>
</span><span id="line-45"></span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#createSqlitePoolWith"><span class="hs-identifier hs-type">createSqlitePoolWith</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#ConnectionString"><span class="hs-identifier hs-type">ConnectionString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQL"><span class="hs-identifier hs-type">SQL</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Pool</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Database</span></span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span id="createSqlitePoolWith"><span class="annot"><span class="annottext">createSqlitePoolWith :: ConnectionString -&gt; [SQL] -&gt; IO (Pool Database)
</span><a href="Database.Sqlite.Easy.Internal.html#createSqlitePoolWith"><span class="hs-identifier hs-var hs-var">createSqlitePoolWith</span></a></span></span><span> </span><span id="local-6989586621679061125"><span class="annot"><span class="annottext">ConnectionString
</span><a href="#local-6989586621679061125"><span class="hs-identifier hs-var">connStr</span></a></span></span><span> </span><span id="local-6989586621679061126"><span class="annot"><span class="annottext">[SQL]
</span><a href="#local-6989586621679061126"><span class="hs-identifier hs-var">statements</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-47"></span><span>  </span><span class="annot"><span class="annottext">PoolConfig Database -&gt; IO (Pool Database)
forall a. PoolConfig a -&gt; IO (Pool a)
</span><span class="hs-identifier hs-var">newPool</span></span><span> </span><span class="annot"><span class="annottext">(PoolConfig Database -&gt; IO (Pool Database))
-&gt; PoolConfig Database -&gt; IO (Pool Database)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">IO Database
-&gt; (Database -&gt; IO ()) -&gt; Double -&gt; Int -&gt; PoolConfig Database
forall a. IO a -&gt; (a -&gt; IO ()) -&gt; Double -&gt; Int -&gt; PoolConfig a
</span><span class="hs-identifier hs-var">defaultPoolConfig</span></span><span>
</span><span id="line-48"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConnectionString -&gt; [SQL] -&gt; IO Database
</span><a href="Database.Sqlite.Easy.Internal.html#openWith"><span class="hs-identifier hs-var">openWith</span></a></span><span> </span><span class="annot"><span class="annottext">ConnectionString
</span><a href="#local-6989586621679061125"><span class="hs-identifier hs-var">connStr</span></a></span><span> </span><span class="annot"><span class="annottext">[SQL]
</span><a href="#local-6989586621679061126"><span class="hs-identifier hs-var">statements</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span>    </span><span class="annot"><span class="annottext">Database -&gt; IO ()
</span><span class="hs-identifier hs-var">Direct.close</span></span><span>
</span><span id="line-50"></span><span>    </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">180</span></span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">50</span></span><span>
</span><span id="line-52"></span><span>
</span><span id="line-53"></span><span class="hs-comment">-- | Open a connection to a database, run the supplied statements,</span><span>
</span><span id="line-54"></span><span class="hs-comment">--   and return the connection.</span><span>
</span><span id="line-55"></span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#openWith"><span class="hs-identifier hs-type">openWith</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#ConnectionString"><span class="hs-identifier hs-type">ConnectionString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQL"><span class="hs-identifier hs-type">SQL</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Database</span></span><span>
</span><span id="line-56"></span><span id="openWith"><span class="annot"><span class="annottext">openWith :: ConnectionString -&gt; [SQL] -&gt; IO Database
</span><a href="Database.Sqlite.Easy.Internal.html#openWith"><span class="hs-identifier hs-var hs-var">openWith</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#ConnectionString"><span class="hs-identifier hs-type">ConnectionString</span></a></span><span> </span><span id="local-6989586621679061127"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679061127"><span class="hs-identifier hs-var">connStr</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679061128"><span class="annot"><span class="annottext">[SQL]
</span><a href="#local-6989586621679061128"><span class="hs-identifier hs-var">sqls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-57"></span><span>  </span><span id="local-6989586621679061129"><span class="annot"><span class="annottext">Database
</span><a href="#local-6989586621679061129"><span class="hs-identifier hs-var">conn</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Text -&gt; IO Database
</span><span class="hs-identifier hs-var">Direct.open</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679061127"><span class="hs-identifier hs-var">connStr</span></a></span><span>
</span><span id="line-58"></span><span>  </span><span class="annot"><span class="annottext">Database -&gt; Text -&gt; IO ()
</span><span class="hs-identifier hs-var">Direct.exec</span></span><span>
</span><span id="line-59"></span><span>    </span><span class="annot"><span class="annottext">Database
</span><a href="#local-6989586621679061129"><span class="hs-identifier hs-var">conn</span></a></span><span>
</span><span id="line-60"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Text] -&gt; Text
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.html#unlines"><span class="hs-identifier hs-var">T.unlines</span></a></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; Text) -&gt; [Text] -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(SQL -&gt; Text) -&gt; [SQL] -&gt; [Text]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQL"><span class="hs-identifier hs-type">SQL</span></a></span><span> </span><span id="local-6989586621679061134"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679061134"><span class="hs-identifier hs-var">sql</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679061134"><span class="hs-identifier hs-var">sql</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;; &quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[SQL]
</span><a href="#local-6989586621679061128"><span class="hs-identifier hs-var">sqls</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span>  </span><span class="annot"><span class="annottext">Database -&gt; IO Database
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Database
</span><a href="#local-6989586621679061129"><span class="hs-identifier hs-var">conn</span></a></span><span>
</span><span id="line-62"></span><span>
</span><span id="line-63"></span><span class="annot"><span class="hs-comment">-- | Default pragmas to be set when opening a connection from a pool.</span></span><span>
</span><span id="line-64"></span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#defaultPragmas"><span class="hs-identifier hs-type">defaultPragmas</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQL"><span class="hs-identifier hs-type">SQL</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-65"></span><span id="defaultPragmas"><span class="annot"><span class="annottext">defaultPragmas :: [SQL]
</span><a href="Database.Sqlite.Easy.Internal.html#defaultPragmas"><span class="hs-identifier hs-var hs-var">defaultPragmas</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-66"></span><span>  </span><span class="hs-special">[</span><span> </span><span class="hs-comment">-- https://www.sqlite.org/pragma.html#pragma_foreign_keys</span><span>
</span><span id="line-67"></span><span>    </span><span class="annot"><span class="annottext">SQL
</span><span class="hs-string">&quot;PRAGMA foreign_keys = on&quot;</span></span><span>
</span><span id="line-68"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- https://www.sqlite.org/pragma.html#pragma_busy_timeout</span><span>
</span><span id="line-69"></span><span>    </span><span class="annot"><span class="annottext">SQL
</span><span class="hs-string">&quot;PRAGMA busy_timeout = 30000&quot;</span></span><span>
</span><span id="line-70"></span><span>  </span><span class="hs-special">]</span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span class="annot"><span class="hs-comment">-- | Open a database, run some stuff, close the database.</span></span><span>
</span><span id="line-73"></span><span id="local-6989586621679060932"><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#withDb"><span class="hs-identifier hs-type">withDb</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#ConnectionString"><span class="hs-identifier hs-type">ConnectionString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQLite"><span class="hs-identifier hs-type">SQLite</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060932"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060932"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-74"></span><span id="withDb"><span class="annot"><span class="annottext">withDb :: forall a. ConnectionString -&gt; SQLite a -&gt; IO a
</span><a href="Database.Sqlite.Easy.Internal.html#withDb"><span class="hs-identifier hs-var hs-var">withDb</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#ConnectionString"><span class="hs-identifier hs-type">ConnectionString</span></a></span><span> </span><span id="local-6989586621679061136"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679061136"><span class="hs-identifier hs-var">connStr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-75"></span><span>  </span><span class="annot"><span class="annottext">IO Database -&gt; (Database -&gt; IO ()) -&gt; (Database -&gt; IO a) -&gt; IO a
forall a b c. IO a -&gt; (a -&gt; IO b) -&gt; (a -&gt; IO c) -&gt; IO c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Exception.Base.html#bracket"><span class="hs-identifier hs-var">bracket</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; IO Database
</span><span class="hs-identifier hs-var">Direct.open</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679061136"><span class="hs-identifier hs-var">connStr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Database -&gt; IO ()
</span><span class="hs-identifier hs-var">Direct.close</span></span><span> </span><span class="annot"><span class="annottext">((Database -&gt; IO a) -&gt; IO a)
-&gt; (SQLite a -&gt; Database -&gt; IO a) -&gt; SQLite a -&gt; IO a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Database -&gt; SQLite a -&gt; IO a) -&gt; SQLite a -&gt; Database -&gt; IO a
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#flip"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">Database -&gt; SQLite a -&gt; IO a
forall a. Database -&gt; SQLite a -&gt; IO a
</span><a href="Database.Sqlite.Easy.Internal.html#runSQLite"><span class="hs-identifier hs-var">runSQLite</span></a></span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span class="annot"><span class="hs-comment">-- | Use an active database connection to run some stuff on a database.</span></span><span>
</span><span id="line-78"></span><span id="local-6989586621679061141"><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#withDatabase"><span class="hs-identifier hs-type">withDatabase</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Database</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQLite"><span class="hs-identifier hs-type">SQLite</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679061141"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679061141"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-79"></span><span id="withDatabase"><span class="annot"><span class="annottext">withDatabase :: forall a. Database -&gt; SQLite a -&gt; IO a
</span><a href="Database.Sqlite.Easy.Internal.html#withDatabase"><span class="hs-identifier hs-var hs-var">withDatabase</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Database -&gt; SQLite a -&gt; IO a
forall a. Database -&gt; SQLite a -&gt; IO a
</span><a href="Database.Sqlite.Easy.Internal.html#runSQLite"><span class="hs-identifier hs-var">runSQLite</span></a></span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span class="annot"><span class="hs-comment">-- | Use a resource pool to run some stuff on a database.</span></span><span>
</span><span id="line-82"></span><span id="local-6989586621679060945"><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#withPool"><span class="hs-identifier hs-type">withPool</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pool</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Database</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQLite"><span class="hs-identifier hs-type">SQLite</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060945"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060945"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-83"></span><span id="withPool"><span class="annot"><span class="annottext">withPool :: forall a. Pool Database -&gt; SQLite a -&gt; IO a
</span><a href="Database.Sqlite.Easy.Internal.html#withPool"><span class="hs-identifier hs-var hs-var">withPool</span></a></span></span><span> </span><span id="local-6989586621679061144"><span class="annot"><span class="annottext">Pool Database
</span><a href="#local-6989586621679061144"><span class="hs-identifier hs-var">pool</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pool Database -&gt; (Database -&gt; IO a) -&gt; IO a
forall a r. Pool a -&gt; (a -&gt; IO r) -&gt; IO r
</span><span class="hs-identifier hs-var">withResource</span></span><span> </span><span class="annot"><span class="annottext">Pool Database
</span><a href="#local-6989586621679061144"><span class="hs-identifier hs-var">pool</span></a></span><span> </span><span class="annot"><span class="annottext">((Database -&gt; IO a) -&gt; IO a)
-&gt; (SQLite a -&gt; Database -&gt; IO a) -&gt; SQLite a -&gt; IO a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(Database -&gt; SQLite a -&gt; IO a) -&gt; SQLite a -&gt; Database -&gt; IO a
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#flip"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">Database -&gt; SQLite a -&gt; IO a
forall a. Database -&gt; SQLite a -&gt; IO a
</span><a href="Database.Sqlite.Easy.Internal.html#runSQLite"><span class="hs-identifier hs-var">runSQLite</span></a></span><span>
</span><span id="line-84"></span><span>
</span><span id="line-85"></span><span class="annot"><span class="hs-comment">-- * Execution</span></span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span class="annot"><span class="hs-comment">-- | A SQL statement</span></span><span>
</span><span id="line-88"></span><span class="hs-keyword">newtype</span><span> </span><span id="SQL"><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQL"><span class="hs-identifier hs-var">SQL</span></a></span></span><span>
</span><span id="line-89"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="SQL"><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQL"><span class="hs-identifier hs-var">SQL</span></a></span></span><span>
</span><span id="line-90"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="unSQL"><span class="annot"><span class="annottext">SQL -&gt; Text
</span><a href="Database.Sqlite.Easy.Internal.html#unSQL"><span class="hs-identifier hs-var hs-var">unSQL</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-91"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-92"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679061148"><span id="local-6989586621679061152"><span id="local-6989586621679061158"><span class="annot"><span class="annottext">NonEmpty SQL -&gt; SQL
SQL -&gt; SQL -&gt; SQL
(SQL -&gt; SQL -&gt; SQL)
-&gt; (NonEmpty SQL -&gt; SQL)
-&gt; (forall b. Integral b =&gt; b -&gt; SQL -&gt; SQL)
-&gt; Semigroup SQL
forall b. Integral b =&gt; b -&gt; SQL -&gt; SQL
forall a.
(a -&gt; a -&gt; a)
-&gt; (NonEmpty a -&gt; a)
-&gt; (forall b. Integral b =&gt; b -&gt; a -&gt; a)
-&gt; Semigroup a
$c&lt;&gt; :: SQL -&gt; SQL -&gt; SQL
&lt;&gt; :: SQL -&gt; SQL -&gt; SQL
$csconcat :: NonEmpty SQL -&gt; SQL
sconcat :: NonEmpty SQL -&gt; SQL
$cstimes :: forall b. Integral b =&gt; b -&gt; SQL -&gt; SQL
stimes :: forall b. Integral b =&gt; b -&gt; SQL -&gt; SQL
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#Semigroup"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Semigroup</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679061166"><span class="annot"><span class="annottext">String -&gt; SQL
(String -&gt; SQL) -&gt; IsString SQL
forall a. (String -&gt; a) -&gt; IsString a
$cfromString :: String -&gt; SQL
fromString :: String -&gt; SQL
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.String.html#IsString"><span class="hs-identifier hs-var hs-var hs-var hs-var">IsString</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">via</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/text-2.0.2/src/Data.Text.Internal.html#Text"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-93"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679061170"><span id="local-6989586621679061174"><span id="local-6989586621679061178"><span class="annot"><span class="annottext">Int -&gt; SQL -&gt; ShowS
[SQL] -&gt; ShowS
SQL -&gt; String
(Int -&gt; SQL -&gt; ShowS)
-&gt; (SQL -&gt; String) -&gt; ([SQL] -&gt; ShowS) -&gt; Show SQL
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; SQL -&gt; ShowS
showsPrec :: Int -&gt; SQL -&gt; ShowS
$cshow :: SQL -&gt; String
show :: SQL -&gt; String
$cshowList :: [SQL] -&gt; ShowS
showList :: [SQL] -&gt; ShowS
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span class="annot"><span class="hs-comment">-- | Run a SQL statement on a database and fetch the results.</span></span><span>
</span><span id="line-96"></span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#run"><span class="hs-identifier hs-type">run</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQL"><span class="hs-identifier hs-type">SQL</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQLite"><span class="hs-identifier hs-type">SQLite</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">SQLData</span></span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-97"></span><span id="run"><span class="annot"><span class="annottext">run :: SQL -&gt; SQLite [[SQLData]]
</span><a href="Database.Sqlite.Easy.Internal.html#run"><span class="hs-identifier hs-var hs-var">run</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQL"><span class="hs-identifier hs-type">SQL</span></a></span><span> </span><span id="local-6989586621679061181"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679061181"><span class="hs-identifier hs-var">stmt</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-98"></span><span>  </span><span id="local-6989586621679061182"><span class="annot"><span class="annottext">Database
</span><a href="#local-6989586621679061182"><span class="hs-identifier hs-var">db</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SQLite Database
</span><a href="Database.Sqlite.Easy.Internal.html#getDB"><span class="hs-identifier hs-var">getDB</span></a></span><span>
</span><span id="line-99"></span><span>  </span><span class="annot"><span class="annottext">IO [[SQLData]] -&gt; SQLite [[SQLData]]
forall a. IO a -&gt; SQLite a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO [[SQLData]] -&gt; SQLite [[SQLData]])
-&gt; IO [[SQLData]] -&gt; SQLite [[SQLData]]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Database -&gt; Text -&gt; (Statement -&gt; IO [[SQLData]]) -&gt; IO [[SQLData]]
forall a. Database -&gt; Text -&gt; (Statement -&gt; IO a) -&gt; IO a
</span><span class="hs-identifier hs-var">Direct.withStatement</span></span><span> </span><span class="annot"><span class="annottext">Database
</span><a href="#local-6989586621679061182"><span class="hs-identifier hs-var">db</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679061181"><span class="hs-identifier hs-var">stmt</span></a></span><span> </span><span class="annot"><span class="annottext">Statement -&gt; IO [[SQLData]]
</span><a href="Database.Sqlite.Easy.Internal.html#fetchAll"><span class="hs-identifier hs-var">fetchAll</span></a></span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span class="annot"><span class="hs-comment">-- | Run a SQL statement with certain parameters on a database and fetch the results.</span></span><span>
</span><span id="line-102"></span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#runWith"><span class="hs-identifier hs-type">runWith</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQL"><span class="hs-identifier hs-type">SQL</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">SQLData</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQLite"><span class="hs-identifier hs-type">SQLite</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">SQLData</span></span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-103"></span><span id="runWith"><span class="annot"><span class="annottext">runWith :: SQL -&gt; [SQLData] -&gt; SQLite [[SQLData]]
</span><a href="Database.Sqlite.Easy.Internal.html#runWith"><span class="hs-identifier hs-var hs-var">runWith</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQL"><span class="hs-identifier hs-type">SQL</span></a></span><span> </span><span id="local-6989586621679061188"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679061188"><span class="hs-identifier hs-var">stmt</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679061189"><span class="annot"><span class="annottext">[SQLData]
</span><a href="#local-6989586621679061189"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-104"></span><span>  </span><span id="local-6989586621679061190"><span class="annot"><span class="annottext">Database
</span><a href="#local-6989586621679061190"><span class="hs-identifier hs-var">db</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SQLite Database
</span><a href="Database.Sqlite.Easy.Internal.html#getDB"><span class="hs-identifier hs-var">getDB</span></a></span><span>
</span><span id="line-105"></span><span>  </span><span class="annot"><span class="annottext">IO [[SQLData]] -&gt; SQLite [[SQLData]]
forall a. IO a -&gt; SQLite a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO [[SQLData]] -&gt; SQLite [[SQLData]])
-&gt; IO [[SQLData]] -&gt; SQLite [[SQLData]]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Database -&gt; Text -&gt; (Statement -&gt; IO [[SQLData]]) -&gt; IO [[SQLData]]
forall a. Database -&gt; Text -&gt; (Statement -&gt; IO a) -&gt; IO a
</span><span class="hs-identifier hs-var">Direct.withStatement</span></span><span> </span><span class="annot"><span class="annottext">Database
</span><a href="#local-6989586621679061190"><span class="hs-identifier hs-var">db</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679061188"><span class="hs-identifier hs-var">stmt</span></a></span><span> </span><span class="annot"><span class="annottext">((Statement -&gt; IO [[SQLData]]) -&gt; IO [[SQLData]])
-&gt; (Statement -&gt; IO [[SQLData]]) -&gt; IO [[SQLData]]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679061191"><span class="annot"><span class="annottext">Statement
</span><a href="#local-6989586621679061191"><span class="hs-identifier hs-var">preparedStmt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-106"></span><span>      </span><span class="annot"><span class="annottext">Statement -&gt; [SQLData] -&gt; IO ()
</span><span class="hs-identifier hs-var">Direct.bind</span></span><span> </span><span class="annot"><span class="annottext">Statement
</span><a href="#local-6989586621679061191"><span class="hs-identifier hs-var">preparedStmt</span></a></span><span> </span><span class="annot"><span class="annottext">[SQLData]
</span><a href="#local-6989586621679061189"><span class="hs-identifier hs-var">params</span></a></span><span>
</span><span id="line-107"></span><span>      </span><span class="annot"><span class="annottext">Statement -&gt; IO [[SQLData]]
</span><a href="Database.Sqlite.Easy.Internal.html#fetchAll"><span class="hs-identifier hs-var">fetchAll</span></a></span><span> </span><span class="annot"><span class="annottext">Statement
</span><a href="#local-6989586621679061191"><span class="hs-identifier hs-var">preparedStmt</span></a></span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span class="hs-comment">-- | Run a SQL statement binding it to all given parameter rows and fetch all of the data.</span><span>
</span><span id="line-110"></span><span class="hs-comment">--   This can significantly improve speed for cases like bulk INSERTs.</span><span>
</span><span id="line-111"></span><span class="hs-comment">--</span><span>
</span><span id="line-112"></span><span class="hs-comment">-- @since 1.1.1.0</span><span>
</span><span id="line-113"></span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#runWithMany"><span class="hs-identifier hs-type">runWithMany</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQL"><span class="hs-identifier hs-type">SQL</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">SQLData</span></span><span class="hs-special">]</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQLite"><span class="hs-identifier hs-type">SQLite</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">SQLData</span></span><span class="hs-special">]</span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-114"></span><span id="runWithMany"><span class="annot"><span class="annottext">runWithMany :: SQL -&gt; [[SQLData]] -&gt; SQLite [[[SQLData]]]
</span><a href="Database.Sqlite.Easy.Internal.html#runWithMany"><span class="hs-identifier hs-var hs-var">runWithMany</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQL"><span class="hs-identifier hs-type">SQL</span></a></span><span> </span><span id="local-6989586621679061194"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679061194"><span class="hs-identifier hs-var">stmt</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679061195"><span class="annot"><span class="annottext">[[SQLData]]
</span><a href="#local-6989586621679061195"><span class="hs-identifier hs-var">paramsList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-115"></span><span>  </span><span id="local-6989586621679061196"><span class="annot"><span class="annottext">Database
</span><a href="#local-6989586621679061196"><span class="hs-identifier hs-var">db</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SQLite Database
</span><a href="Database.Sqlite.Easy.Internal.html#getDB"><span class="hs-identifier hs-var">getDB</span></a></span><span>
</span><span id="line-116"></span><span>  </span><span class="annot"><span class="annottext">IO [[[SQLData]]] -&gt; SQLite [[[SQLData]]]
forall a. IO a -&gt; SQLite a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO [[[SQLData]]] -&gt; SQLite [[[SQLData]]])
-&gt; IO [[[SQLData]]] -&gt; SQLite [[[SQLData]]]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Database
-&gt; Text -&gt; (Statement -&gt; IO [[[SQLData]]]) -&gt; IO [[[SQLData]]]
forall a. Database -&gt; Text -&gt; (Statement -&gt; IO a) -&gt; IO a
</span><span class="hs-identifier hs-var">Direct.withStatement</span></span><span> </span><span class="annot"><span class="annottext">Database
</span><a href="#local-6989586621679061196"><span class="hs-identifier hs-var">db</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679061194"><span class="hs-identifier hs-var">stmt</span></a></span><span> </span><span class="annot"><span class="annottext">((Statement -&gt; IO [[[SQLData]]]) -&gt; IO [[[SQLData]]])
-&gt; (Statement -&gt; IO [[[SQLData]]]) -&gt; IO [[[SQLData]]]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679061197"><span class="annot"><span class="annottext">Statement
</span><a href="#local-6989586621679061197"><span class="hs-identifier hs-var">preparedStmt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-117"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-118"></span><span>      </span><span id="local-6989586621679061201"><span class="annot"><span class="annottext">runRow :: [SQLData] -&gt; IO [[SQLData]]
</span><a href="#local-6989586621679061201"><span class="hs-identifier hs-var hs-var">runRow</span></a></span></span><span> </span><span id="local-6989586621679061202"><span class="annot"><span class="annottext">[SQLData]
</span><a href="#local-6989586621679061202"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-119"></span><span>        </span><span class="annot"><span class="annottext">Statement -&gt; IO ()
</span><span class="hs-identifier hs-var">Direct.reset</span></span><span> </span><span class="annot"><span class="annottext">Statement
</span><a href="#local-6989586621679061197"><span class="hs-identifier hs-var">preparedStmt</span></a></span><span>
</span><span id="line-120"></span><span>        </span><span class="annot"><span class="annottext">Statement -&gt; IO ()
</span><span class="hs-identifier hs-var">Direct.clearBindings</span></span><span> </span><span class="annot"><span class="annottext">Statement
</span><a href="#local-6989586621679061197"><span class="hs-identifier hs-var">preparedStmt</span></a></span><span>
</span><span id="line-121"></span><span>        </span><span class="annot"><span class="annottext">Statement -&gt; [SQLData] -&gt; IO ()
</span><span class="hs-identifier hs-var">Direct.bind</span></span><span> </span><span class="annot"><span class="annottext">Statement
</span><a href="#local-6989586621679061197"><span class="hs-identifier hs-var">preparedStmt</span></a></span><span> </span><span class="annot"><span class="annottext">[SQLData]
</span><a href="#local-6989586621679061202"><span class="hs-identifier hs-var">params</span></a></span><span>
</span><span id="line-122"></span><span>        </span><span class="annot"><span class="annottext">Statement -&gt; IO [[SQLData]]
</span><a href="Database.Sqlite.Easy.Internal.html#fetchAll"><span class="hs-identifier hs-var">fetchAll</span></a></span><span> </span><span class="annot"><span class="annottext">Statement
</span><a href="#local-6989586621679061197"><span class="hs-identifier hs-var">preparedStmt</span></a></span><span>
</span><span id="line-123"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">([SQLData] -&gt; IO [[SQLData]]) -&gt; [[SQLData]] -&gt; IO [[[SQLData]]]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">[SQLData] -&gt; IO [[SQLData]]
</span><a href="#local-6989586621679061201"><span class="hs-identifier hs-var">runRow</span></a></span><span> </span><span class="annot"><span class="annottext">[[SQLData]]
</span><a href="#local-6989586621679061195"><span class="hs-identifier hs-var">paramsList</span></a></span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span class="annot"><span class="hs-comment">-- | Run a statement and fetch all of the data.</span></span><span>
</span><span id="line-126"></span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#fetchAll"><span class="hs-identifier hs-type">fetchAll</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Statement</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">SQLData</span></span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-127"></span><span id="fetchAll"><span class="annot"><span class="annottext">fetchAll :: Statement -&gt; IO [[SQLData]]
</span><a href="Database.Sqlite.Easy.Internal.html#fetchAll"><span class="hs-identifier hs-var hs-var">fetchAll</span></a></span></span><span> </span><span id="local-6989586621679061206"><span class="annot"><span class="annottext">Statement
</span><a href="#local-6989586621679061206"><span class="hs-identifier hs-var">stmt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-128"></span><span>  </span><span id="local-6989586621679061207"><span class="annot"><span class="annottext">StepResult
</span><a href="#local-6989586621679061207"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Statement -&gt; IO StepResult
</span><span class="hs-identifier hs-var">Direct.step</span></span><span> </span><span class="annot"><span class="annottext">Statement
</span><a href="#local-6989586621679061206"><span class="hs-identifier hs-var">stmt</span></a></span><span>
</span><span id="line-129"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">StepResult
</span><a href="#local-6989586621679061207"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-130"></span><span>    </span><span class="annot"><span class="annottext">StepResult
</span><span class="hs-identifier hs-var">Direct.Row</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-131"></span><span>      </span><span id="local-6989586621679061210"><span class="annot"><span class="annottext">[SQLData]
</span><a href="#local-6989586621679061210"><span class="hs-identifier hs-var">row</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Statement -&gt; IO [SQLData]
</span><span class="hs-identifier hs-var">Direct.columns</span></span><span> </span><span class="annot"><span class="annottext">Statement
</span><a href="#local-6989586621679061206"><span class="hs-identifier hs-var">stmt</span></a></span><span>
</span><span id="line-132"></span><span>      </span><span id="local-6989586621679061212"><span class="annot"><span class="annottext">[[SQLData]]
</span><a href="#local-6989586621679061212"><span class="hs-identifier hs-var">rows</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Statement -&gt; IO [[SQLData]]
</span><a href="Database.Sqlite.Easy.Internal.html#fetchAll"><span class="hs-identifier hs-var">fetchAll</span></a></span><span> </span><span class="annot"><span class="annottext">Statement
</span><a href="#local-6989586621679061206"><span class="hs-identifier hs-var">stmt</span></a></span><span>
</span><span id="line-133"></span><span>      </span><span class="annot"><span class="annottext">[[SQLData]] -&gt; IO [[SQLData]]
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SQLData]
</span><a href="#local-6989586621679061210"><span class="hs-identifier hs-var">row</span></a></span><span> </span><span class="annot"><span class="annottext">[SQLData] -&gt; [[SQLData]] -&gt; [[SQLData]]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#%3A"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[[SQLData]]
</span><a href="#local-6989586621679061212"><span class="hs-identifier hs-var">rows</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span>    </span><span class="annot"><span class="annottext">StepResult
</span><span class="hs-identifier hs-var">Direct.Done</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-135"></span><span>      </span><span class="annot"><span class="annottext">[[SQLData]] -&gt; IO [[SQLData]]
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span class="annot"><span class="hs-comment">-- * Transaction</span></span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span class="hs-comment">-- | The type of actions to run on a SQLite database.</span><span>
</span><span id="line-140"></span><span class="hs-comment">--   In essence, it is almost the same as @Database -&gt; IO a@.</span><span>
</span><span id="line-141"></span><span class="hs-comment">--</span><span>
</span><span id="line-142"></span><span class="hs-comment">--   'SQLite' actions can be created with the 'run' and 'runWith'</span><span>
</span><span id="line-143"></span><span class="hs-comment">--   functions, and can be composed using the type class instances.</span><span>
</span><span id="line-144"></span><span class="hs-comment">--</span><span>
</span><span id="line-145"></span><span class="hs-comment">--   'SQLite' actions can be run with the 'withDb', 'withDatabase',</span><span>
</span><span id="line-146"></span><span class="hs-comment">--   and 'withPool' functions.</span><span>
</span><span id="line-147"></span><span class="hs-keyword">newtype</span><span> </span><span id="SQLite"><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQLite"><span class="hs-identifier hs-var">SQLite</span></a></span></span><span> </span><span id="local-6989586621679060962"><span class="annot"><a href="#local-6989586621679060962"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-148"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="SQLite"><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQLite"><span class="hs-identifier hs-var">SQLite</span></a></span></span><span>
</span><span id="line-149"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="unSQLite"><span class="annot"><span class="annottext">forall a. SQLite a -&gt; SQLiteStuff -&gt; IO a
</span><a href="Database.Sqlite.Easy.Internal.html#unSQLite"><span class="hs-identifier hs-var hs-var">unSQLite</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQLiteStuff"><span class="hs-identifier hs-type">SQLiteStuff</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060962"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-150"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-151"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679061217"><span id="local-6989586621679061223"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; SQLite a -&gt; SQLite b)
-&gt; (forall a b. a -&gt; SQLite b -&gt; SQLite a) -&gt; Functor SQLite
forall a b. a -&gt; SQLite b -&gt; SQLite a
forall a b. (a -&gt; b) -&gt; SQLite a -&gt; SQLite b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall a b. (a -&gt; b) -&gt; SQLite a -&gt; SQLite b
fmap :: forall a b. (a -&gt; b) -&gt; SQLite a -&gt; SQLite b
$c&lt;$ :: forall a b. a -&gt; SQLite b -&gt; SQLite a
&lt;$ :: forall a b. a -&gt; SQLite b -&gt; SQLite a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#Functor"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679061233"><span id="local-6989586621679061238"><span id="local-6989586621679061242"><span id="local-6989586621679061246"><span id="local-6989586621679061250"><span class="annot"><span class="annottext">Functor SQLite
Functor SQLite =&gt;
(forall a. a -&gt; SQLite a)
-&gt; (forall a b. SQLite (a -&gt; b) -&gt; SQLite a -&gt; SQLite b)
-&gt; (forall a b c.
    (a -&gt; b -&gt; c) -&gt; SQLite a -&gt; SQLite b -&gt; SQLite c)
-&gt; (forall a b. SQLite a -&gt; SQLite b -&gt; SQLite b)
-&gt; (forall a b. SQLite a -&gt; SQLite b -&gt; SQLite a)
-&gt; Applicative SQLite
forall a. a -&gt; SQLite a
forall a b. SQLite a -&gt; SQLite b -&gt; SQLite a
forall a b. SQLite a -&gt; SQLite b -&gt; SQLite b
forall a b. SQLite (a -&gt; b) -&gt; SQLite a -&gt; SQLite b
forall a b c. (a -&gt; b -&gt; c) -&gt; SQLite a -&gt; SQLite b -&gt; SQLite c
forall (f :: * -&gt; *).
Functor f =&gt;
(forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
$cpure :: forall a. a -&gt; SQLite a
pure :: forall a. a -&gt; SQLite a
$c&lt;*&gt; :: forall a b. SQLite (a -&gt; b) -&gt; SQLite a -&gt; SQLite b
&lt;*&gt; :: forall a b. SQLite (a -&gt; b) -&gt; SQLite a -&gt; SQLite b
$cliftA2 :: forall a b c. (a -&gt; b -&gt; c) -&gt; SQLite a -&gt; SQLite b -&gt; SQLite c
liftA2 :: forall a b c. (a -&gt; b -&gt; c) -&gt; SQLite a -&gt; SQLite b -&gt; SQLite c
$c*&gt; :: forall a b. SQLite a -&gt; SQLite b -&gt; SQLite b
*&gt; :: forall a b. SQLite a -&gt; SQLite b -&gt; SQLite b
$c&lt;* :: forall a b. SQLite a -&gt; SQLite b -&gt; SQLite a
&lt;* :: forall a b. SQLite a -&gt; SQLite b -&gt; SQLite a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#Applicative"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></a></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679061258"><span id="local-6989586621679061263"><span id="local-6989586621679061267"><span class="annot"><span class="annottext">Applicative SQLite
Applicative SQLite =&gt;
(forall a b. SQLite a -&gt; (a -&gt; SQLite b) -&gt; SQLite b)
-&gt; (forall a b. SQLite a -&gt; SQLite b -&gt; SQLite b)
-&gt; (forall a. a -&gt; SQLite a)
-&gt; Monad SQLite
forall a. a -&gt; SQLite a
forall a b. SQLite a -&gt; SQLite b -&gt; SQLite b
forall a b. SQLite a -&gt; (a -&gt; SQLite b) -&gt; SQLite b
forall (m :: * -&gt; *).
Applicative m =&gt;
(forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
$c&gt;&gt;= :: forall a b. SQLite a -&gt; (a -&gt; SQLite b) -&gt; SQLite b
&gt;&gt;= :: forall a b. SQLite a -&gt; (a -&gt; SQLite b) -&gt; SQLite b
$c&gt;&gt; :: forall a b. SQLite a -&gt; SQLite b -&gt; SQLite b
&gt;&gt; :: forall a b. SQLite a -&gt; SQLite b -&gt; SQLite b
$creturn :: forall a. a -&gt; SQLite a
return :: forall a. a -&gt; SQLite a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#Monad"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679061274"><span class="annot"><span class="annottext">Monad SQLite
Monad SQLite =&gt; (forall a. IO a -&gt; SQLite a) -&gt; MonadIO SQLite
forall a. IO a -&gt; SQLite a
forall (m :: * -&gt; *).
Monad m =&gt;
(forall a. IO a -&gt; m a) -&gt; MonadIO m
$cliftIO :: forall a. IO a -&gt; SQLite a
liftIO :: forall a. IO a -&gt; SQLite a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadIO</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679061284"><span class="annot"><span class="annottext">Monad SQLite
Monad SQLite =&gt; (forall a. String -&gt; SQLite a) -&gt; MonadFail SQLite
forall a. String -&gt; SQLite a
forall (m :: * -&gt; *).
Monad m =&gt;
(forall a. String -&gt; m a) -&gt; MonadFail m
$cfail :: forall a. String -&gt; SQLite a
fail :: forall a. String -&gt; SQLite a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.Fail.html#MonadFail"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadFail</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679061295"><span class="annot"><span class="annottext">MonadIO SQLite
MonadIO SQLite =&gt;
(forall b. ((forall a. SQLite a -&gt; IO a) -&gt; IO b) -&gt; SQLite b)
-&gt; MonadUnliftIO SQLite
forall b. ((forall a. SQLite a -&gt; IO a) -&gt; IO b) -&gt; SQLite b
forall (m :: * -&gt; *).
MonadIO m =&gt;
(forall b. ((forall a. m a -&gt; IO a) -&gt; IO b) -&gt; m b)
-&gt; MonadUnliftIO m
$cwithRunInIO :: forall b. ((forall a. SQLite a -&gt; IO a) -&gt; IO b) -&gt; SQLite b
withRunInIO :: forall b. ((forall a. SQLite a -&gt; IO a) -&gt; IO b) -&gt; SQLite b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadUnliftIO</span></span></span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span>  </span><span class="hs-keyword">via</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/transformers-0.6.1.0/src/Control.Monad.Trans.Reader.html#ReaderT"><span class="hs-identifier hs-type">ReaderT</span></a></span><span> </span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQLiteStuff"><span class="hs-identifier hs-type">SQLiteStuff</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span>
</span><span id="line-153"></span><span>
</span><span id="line-154"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679061028"><span id="local-6989586621679061306"><span id="local-6989586621679061310"><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#Semigroup"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679061028"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#Semigroup"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQLite"><span class="hs-identifier hs-type">SQLite</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679061028"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-155"></span><span>  </span><span id="local-6989586621679061317"><span class="annot"><span class="annottext">SQLite a
</span><a href="#local-6989586621679061317"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679061318"><span class="annot"><span class="annottext">&lt;&gt; :: SQLite a -&gt; SQLite a -&gt; SQLite a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></a></span></span><span> </span><span id="local-6989586621679061319"><span class="annot"><span class="annottext">SQLite a
</span><a href="#local-6989586621679061319"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">(&lt;&gt;)</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; a -&gt; a) -&gt; SQLite a -&gt; SQLite (a -&gt; a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SQLite a
</span><a href="#local-6989586621679061317"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">SQLite (a -&gt; a) -&gt; SQLite a -&gt; SQLite a
forall a b. SQLite (a -&gt; b) -&gt; SQLite a -&gt; SQLite b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SQLite a
</span><a href="#local-6989586621679061319"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-156"></span><span>
</span><span id="line-157"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679061034"><span id="local-6989586621679061327"><span id="local-6989586621679061331"><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#Monoid"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679061034"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#Monoid"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQLite"><span class="hs-identifier hs-type">SQLite</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679061034"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-158"></span><span>  </span><span id="local-6989586621679061337"><span class="annot"><span class="annottext">mempty :: SQLite a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; SQLite a
forall a. a -&gt; SQLite a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">a
forall a. Monoid a =&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-159"></span><span>
</span><span id="line-160"></span><span class="hs-keyword">data</span><span> </span><span id="SQLiteStuff"><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQLiteStuff"><span class="hs-identifier hs-var">SQLiteStuff</span></a></span></span><span>
</span><span id="line-161"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="SQLiteStuff"><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQLiteStuff"><span class="hs-identifier hs-var">SQLiteStuff</span></a></span></span><span>
</span><span id="line-162"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="dbConn"><span class="annot"><span class="annottext">SQLiteStuff -&gt; Database
</span><a href="Database.Sqlite.Easy.Internal.html#dbConn"><span class="hs-identifier hs-var hs-var">dbConn</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Database</span></span><span>
</span><span id="line-163"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="transactionNumber"><span class="annot"><span class="annottext">SQLiteStuff -&gt; Maybe Int
</span><a href="Database.Sqlite.Easy.Internal.html#transactionNumber"><span class="hs-identifier hs-var hs-var">transactionNumber</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-164"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-165"></span><span>
</span><span id="line-166"></span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#getDB"><span class="hs-identifier hs-type">getDB</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQLite"><span class="hs-identifier hs-type">SQLite</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Database</span></span><span>
</span><span id="line-167"></span><span id="getDB"><span class="annot"><span class="annottext">getDB :: SQLite Database
</span><a href="Database.Sqlite.Easy.Internal.html#getDB"><span class="hs-identifier hs-var hs-var">getDB</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SQLiteStuff -&gt; IO Database) -&gt; SQLite Database
forall a. (SQLiteStuff -&gt; IO a) -&gt; SQLite a
</span><a href="Database.Sqlite.Easy.Internal.html#SQLite"><span class="hs-identifier hs-var">SQLite</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQLiteStuff"><span class="hs-identifier hs-type">SQLiteStuff</span></a></span><span> </span><span id="local-6989586621679061341"><span class="annot"><span class="annottext">Database
</span><a href="#local-6989586621679061341"><span class="hs-identifier hs-var">dbConn</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Database -&gt; IO Database
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Database
</span><a href="#local-6989586621679061341"><span class="hs-identifier hs-var">dbConn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-168"></span><span>
</span><span id="line-169"></span><span id="local-6989586621679060943"><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#runSQLite"><span class="hs-identifier hs-type">runSQLite</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Database</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQLite"><span class="hs-identifier hs-type">SQLite</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060943"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679060943"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-170"></span><span id="runSQLite"><span class="annot"><span class="annottext">runSQLite :: forall a. Database -&gt; SQLite a -&gt; IO a
</span><a href="Database.Sqlite.Easy.Internal.html#runSQLite"><span class="hs-identifier hs-var hs-var">runSQLite</span></a></span></span><span> </span><span id="local-6989586621679061342"><span class="annot"><span class="annottext">Database
</span><a href="#local-6989586621679061342"><span class="hs-identifier hs-var">db</span></a></span></span><span> </span><span id="local-6989586621679061343"><span class="annot"><span class="annottext">SQLite a
</span><a href="#local-6989586621679061343"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SQLite a -&gt; SQLiteStuff -&gt; IO a
forall a. SQLite a -&gt; SQLiteStuff -&gt; IO a
</span><a href="Database.Sqlite.Easy.Internal.html#unSQLite"><span class="hs-identifier hs-var">unSQLite</span></a></span><span> </span><span class="annot"><span class="annottext">SQLite a
</span><a href="#local-6989586621679061343"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Database -&gt; Maybe Int -&gt; SQLiteStuff
</span><a href="Database.Sqlite.Easy.Internal.html#SQLiteStuff"><span class="hs-identifier hs-var">SQLiteStuff</span></a></span><span> </span><span class="annot"><span class="annottext">Database
</span><a href="#local-6989586621679061342"><span class="hs-identifier hs-var">db</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span class="hs-comment">-- | Run operations as a transaction.</span><span>
</span><span id="line-173"></span><span class="hs-comment">--   If the action throws an error, the transaction is rolled back.</span><span>
</span><span id="line-174"></span><span class="hs-comment">--   For more information, visit: &lt;https://www.sqlite.org/lang_transaction.html&gt;</span><span>
</span><span id="line-175"></span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#transaction"><span class="hs-identifier hs-type">transaction</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679061036"><span class="annot"><a href="#local-6989586621679061036"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Typeable.Internal.html#Typeable"><span class="hs-identifier hs-type">Typeable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679061036"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQLite"><span class="hs-identifier hs-type">SQLite</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679061036"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQLite"><span class="hs-identifier hs-type">SQLite</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679061036"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-176"></span><span id="transaction"><span class="annot"><span class="annottext">transaction :: forall a. Typeable a =&gt; SQLite a -&gt; SQLite a
</span><a href="Database.Sqlite.Easy.Internal.html#transaction"><span class="hs-identifier hs-var hs-var">transaction</span></a></span></span><span> </span><span id="local-6989586621679061384"><span class="annot"><span class="annottext">SQLite a
</span><a href="#local-6989586621679061384"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-177"></span><span>  </span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQLiteStuff"><span class="hs-identifier hs-type">SQLiteStuff</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679061385"><span id="local-6989586621679061386"><span class="annot"><span class="annottext">Maybe Int
Database
dbConn :: SQLiteStuff -&gt; Database
transactionNumber :: SQLiteStuff -&gt; Maybe Int
dbConn :: Database
transactionNumber :: Maybe Int
</span><a href="Database.Sqlite.Easy.Internal.html#dbConn"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(SQLiteStuff -&gt; IO SQLiteStuff) -&gt; SQLite SQLiteStuff
forall a. (SQLiteStuff -&gt; IO a) -&gt; SQLite a
</span><a href="Database.Sqlite.Easy.Internal.html#SQLite"><span class="hs-identifier hs-var">SQLite</span></a></span><span> </span><span class="annot"><span class="annottext">((SQLiteStuff -&gt; IO SQLiteStuff) -&gt; SQLite SQLiteStuff)
-&gt; (SQLiteStuff -&gt; IO SQLiteStuff) -&gt; SQLite SQLiteStuff
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679061387"><span class="annot"><span class="annottext">SQLiteStuff
</span><a href="#local-6989586621679061387"><span class="hs-identifier hs-var">stuff</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SQLiteStuff -&gt; IO SQLiteStuff
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">SQLiteStuff
</span><a href="#local-6989586621679061387"><span class="hs-identifier hs-var">stuff</span></a></span><span>
</span><span id="line-178"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621679061386"><span class="hs-identifier hs-var">transactionNumber</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-179"></span><span>    </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-180"></span><span>      </span><span class="hs-keyword">let</span><span>
</span><span id="line-181"></span><span>        </span><span id="local-6989586621679061388"><span class="annot"><span class="annottext">runIO :: SQL -&gt; IO [[SQLData]]
</span><a href="#local-6989586621679061388"><span class="hs-identifier hs-var hs-var">runIO</span></a></span></span><span> </span><span id="local-6989586621679061389"><span class="annot"><span class="annottext">SQL
</span><a href="#local-6989586621679061389"><span class="hs-identifier hs-var">sql</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SQLite [[SQLData]] -&gt; SQLiteStuff -&gt; IO [[SQLData]]
forall a. SQLite a -&gt; SQLiteStuff -&gt; IO a
</span><a href="Database.Sqlite.Easy.Internal.html#unSQLite"><span class="hs-identifier hs-var">unSQLite</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SQL -&gt; SQLite [[SQLData]]
</span><a href="Database.Sqlite.Easy.Internal.html#run"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">SQL
</span><a href="#local-6989586621679061389"><span class="hs-identifier hs-var">sql</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Database -&gt; Maybe Int -&gt; SQLiteStuff
</span><a href="Database.Sqlite.Easy.Internal.html#SQLiteStuff"><span class="hs-identifier hs-var">SQLiteStuff</span></a></span><span> </span><span class="annot"><span class="annottext">Database
</span><a href="#local-6989586621679061385"><span class="hs-identifier hs-var">dbConn</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-182"></span><span>        </span><span id="local-6989586621679061391"><span class="annot"><span class="annottext">commit :: IO [[SQLData]]
</span><a href="#local-6989586621679061391"><span class="hs-identifier hs-var hs-var">commit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SQL -&gt; IO [[SQLData]]
</span><a href="#local-6989586621679061388"><span class="hs-identifier hs-var">runIO</span></a></span><span> </span><span class="annot"><span class="annottext">SQL
</span><span class="hs-string">&quot;COMMIT&quot;</span></span><span>
</span><span id="line-183"></span><span>        </span><span id="local-6989586621679061393"><span class="annot"><span class="annottext">rollback' :: IO [[SQLData]]
</span><a href="#local-6989586621679061393"><span class="hs-identifier hs-var hs-var">rollback'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SQL -&gt; IO [[SQLData]]
</span><a href="#local-6989586621679061388"><span class="hs-identifier hs-var">runIO</span></a></span><span> </span><span class="annot"><span class="annottext">SQL
</span><span class="hs-string">&quot;ROLLBACK&quot;</span></span><span>
</span><span id="line-184"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SQL -&gt; SQLite [[SQLData]]
</span><a href="Database.Sqlite.Easy.Internal.html#run"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">SQL
</span><span class="hs-string">&quot;BEGIN&quot;</span></span><span>
</span><span id="line-185"></span><span>      </span><span class="annot"><span class="annottext">IO a -&gt; SQLite a
forall a. IO a -&gt; SQLite a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO a -&gt; SQLite a) -&gt; IO a -&gt; SQLite a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">IO a -&gt; [Handler a] -&gt; IO a
forall a. IO a -&gt; [Handler a] -&gt; IO a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Exception.html#catches"><span class="hs-identifier hs-var">catches</span></a></span><span>
</span><span id="line-186"></span><span>        </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">SQLite a -&gt; SQLiteStuff -&gt; IO a
forall a. SQLite a -&gt; SQLiteStuff -&gt; IO a
</span><a href="Database.Sqlite.Easy.Internal.html#unSQLite"><span class="hs-identifier hs-var">unSQLite</span></a></span><span> </span><span class="annot"><span class="annottext">SQLite a
</span><a href="#local-6989586621679061384"><span class="hs-identifier hs-var">action</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Database -&gt; Maybe Int -&gt; SQLiteStuff
</span><a href="Database.Sqlite.Easy.Internal.html#SQLiteStuff"><span class="hs-identifier hs-var">SQLiteStuff</span></a></span><span> </span><span class="annot"><span class="annottext">Database
</span><a href="#local-6989586621679061385"><span class="hs-identifier hs-var">dbConn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IO a -&gt; IO [[SQLData]] -&gt; IO a
forall a b. IO a -&gt; IO b -&gt; IO a
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%2A"><span class="hs-operator hs-var">&lt;*</span></a></span><span> </span><span class="annot"><span class="annottext">IO [[SQLData]]
</span><a href="#local-6989586621679061391"><span class="hs-identifier hs-var">commit</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">(RollbackCurrent a -&gt; IO a) -&gt; Handler a
forall a e. Exception e =&gt; (e -&gt; IO a) -&gt; Handler a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Exception.html#Handler"><span class="hs-identifier hs-var">Handler</span></a></span><span> </span><span class="annot"><span class="annottext">((RollbackCurrent a -&gt; IO a) -&gt; Handler a)
-&gt; (RollbackCurrent a -&gt; IO a) -&gt; Handler a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#RollbackCurrent"><span class="hs-identifier hs-type">RollbackCurrent</span></a></span><span> </span><span id="local-6989586621679061398"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679061398"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO [[SQLData]]
</span><a href="#local-6989586621679061393"><span class="hs-identifier hs-var">rollback'</span></a></span><span> </span><span class="annot"><span class="annottext">IO [[SQLData]] -&gt; IO a -&gt; IO a
forall a b. IO a -&gt; IO b -&gt; IO b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%2A%3E"><span class="hs-operator hs-var">*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; IO a
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679061398"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-188"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(RollbackAll a -&gt; IO a) -&gt; Handler a
forall a e. Exception e =&gt; (e -&gt; IO a) -&gt; Handler a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Exception.html#Handler"><span class="hs-identifier hs-var">Handler</span></a></span><span> </span><span class="annot"><span class="annottext">((RollbackAll a -&gt; IO a) -&gt; Handler a)
-&gt; (RollbackAll a -&gt; IO a) -&gt; Handler a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#RollbackAll"><span class="hs-identifier hs-type">RollbackAll</span></a></span><span> </span><span id="local-6989586621679061400"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679061400"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO [[SQLData]]
</span><a href="#local-6989586621679061393"><span class="hs-identifier hs-var">rollback'</span></a></span><span> </span><span class="annot"><span class="annottext">IO [[SQLData]] -&gt; IO a -&gt; IO a
forall a b. IO a -&gt; IO b -&gt; IO b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%2A%3E"><span class="hs-operator hs-var">*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; IO a
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679061400"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-189"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(SomeException -&gt; IO a) -&gt; Handler a
forall a e. Exception e =&gt; (e -&gt; IO a) -&gt; Handler a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Exception.html#Handler"><span class="hs-identifier hs-var">Handler</span></a></span><span> </span><span class="annot"><span class="annottext">((SomeException -&gt; IO a) -&gt; Handler a)
-&gt; (SomeException -&gt; IO a) -&gt; Handler a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679061401"><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679061401"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Exception.Type.html#SomeException"><span class="hs-identifier hs-type">SomeException</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO [[SQLData]]
</span><a href="#local-6989586621679061393"><span class="hs-identifier hs-var">rollback'</span></a></span><span> </span><span class="annot"><span class="annottext">IO [[SQLData]] -&gt; IO a -&gt; IO a
forall a b. IO a -&gt; IO b -&gt; IO b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%2A%3E"><span class="hs-operator hs-var">*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; IO a
forall e a. Exception e =&gt; e -&gt; IO a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#throwIO"><span class="hs-identifier hs-var">throwIO</span></a></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679061401"><span class="hs-identifier hs-var">ex</span></a></span><span>
</span><span id="line-190"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-191"></span><span>    </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679061403"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679061403"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-192"></span><span>      </span><span class="hs-keyword">let</span><span>
</span><span id="line-193"></span><span>        </span><span id="local-6989586621679061404"><span class="annot"><span class="annottext">runIO :: SQL -&gt; IO [[SQLData]]
</span><a href="#local-6989586621679061404"><span class="hs-identifier hs-var hs-var">runIO</span></a></span></span><span> </span><span id="local-6989586621679061405"><span class="annot"><span class="annottext">SQL
</span><a href="#local-6989586621679061405"><span class="hs-identifier hs-var">sql</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SQLite [[SQLData]] -&gt; SQLiteStuff -&gt; IO [[SQLData]]
forall a. SQLite a -&gt; SQLiteStuff -&gt; IO a
</span><a href="Database.Sqlite.Easy.Internal.html#unSQLite"><span class="hs-identifier hs-var">unSQLite</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SQL -&gt; SQLite [[SQLData]]
</span><a href="Database.Sqlite.Easy.Internal.html#run"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">SQL
</span><a href="#local-6989586621679061405"><span class="hs-identifier hs-var">sql</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Database -&gt; Maybe Int -&gt; SQLiteStuff
</span><a href="Database.Sqlite.Easy.Internal.html#SQLiteStuff"><span class="hs-identifier hs-var">SQLiteStuff</span></a></span><span> </span><span class="annot"><span class="annottext">Database
</span><a href="#local-6989586621679061385"><span class="hs-identifier hs-var">dbConn</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-194"></span><span>        </span><span id="local-6989586621679061413"><span class="annot"><span class="annottext">transactionName :: SQL
</span><a href="#local-6989586621679061413"><span class="hs-identifier hs-var hs-var">transactionName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SQL
</span><span class="hs-string">&quot;'sqlite_easy_transaction_&quot;</span></span><span> </span><span class="annot"><span class="annottext">SQL -&gt; SQL -&gt; SQL
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SQL
forall a. IsString a =&gt; String -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.String.html#fromString"><span class="hs-identifier hs-var">fromString</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679061403"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SQL -&gt; SQL -&gt; SQL
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SQL
</span><span class="hs-string">&quot;'&quot;</span></span><span>
</span><span id="line-195"></span><span>        </span><span id="local-6989586621679061417"><span class="annot"><span class="annottext">release :: IO [[SQLData]]
</span><a href="#local-6989586621679061417"><span class="hs-identifier hs-var hs-var">release</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SQL -&gt; IO [[SQLData]]
</span><a href="#local-6989586621679061404"><span class="hs-identifier hs-var">runIO</span></a></span><span> </span><span class="annot"><span class="annottext">(SQL -&gt; IO [[SQLData]]) -&gt; SQL -&gt; IO [[SQLData]]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SQL
</span><span class="hs-string">&quot;RELEASE SAVEPOINT &quot;</span></span><span> </span><span class="annot"><span class="annottext">SQL -&gt; SQL -&gt; SQL
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SQL
</span><a href="#local-6989586621679061413"><span class="hs-identifier hs-var">transactionName</span></a></span><span>
</span><span id="line-196"></span><span>        </span><span id="local-6989586621679061420"><span class="annot"><span class="annottext">rollbackCurrent :: IO [[SQLData]]
</span><a href="#local-6989586621679061420"><span class="hs-identifier hs-var hs-var">rollbackCurrent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SQL -&gt; IO [[SQLData]]
</span><a href="#local-6989586621679061404"><span class="hs-identifier hs-var">runIO</span></a></span><span> </span><span class="annot"><span class="annottext">(SQL -&gt; IO [[SQLData]]) -&gt; SQL -&gt; IO [[SQLData]]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SQL
</span><span class="hs-string">&quot;ROLLBACK TRANSACTION TO SAVEPOINT &quot;</span></span><span> </span><span class="annot"><span class="annottext">SQL -&gt; SQL -&gt; SQL
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SQL
</span><a href="#local-6989586621679061413"><span class="hs-identifier hs-var">transactionName</span></a></span><span>
</span><span id="line-197"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SQL -&gt; SQLite [[SQLData]]
</span><a href="Database.Sqlite.Easy.Internal.html#run"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">(SQL -&gt; SQLite [[SQLData]]) -&gt; SQL -&gt; SQLite [[SQLData]]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SQL
</span><span class="hs-string">&quot;SAVEPOINT &quot;</span></span><span> </span><span class="annot"><span class="annottext">SQL -&gt; SQL -&gt; SQL
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SQL
</span><a href="#local-6989586621679061413"><span class="hs-identifier hs-var">transactionName</span></a></span><span>
</span><span id="line-198"></span><span>      </span><span class="annot"><span class="annottext">IO a -&gt; SQLite a
forall a. IO a -&gt; SQLite a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO a -&gt; SQLite a) -&gt; IO a -&gt; SQLite a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">IO a -&gt; [Handler a] -&gt; IO a
forall a. IO a -&gt; [Handler a] -&gt; IO a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Exception.html#catches"><span class="hs-identifier hs-var">catches</span></a></span><span>
</span><span id="line-199"></span><span>        </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">SQLite a -&gt; SQLiteStuff -&gt; IO a
forall a. SQLite a -&gt; SQLiteStuff -&gt; IO a
</span><a href="Database.Sqlite.Easy.Internal.html#unSQLite"><span class="hs-identifier hs-var">unSQLite</span></a></span><span> </span><span class="annot"><span class="annottext">SQLite a
</span><a href="#local-6989586621679061384"><span class="hs-identifier hs-var">action</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Database -&gt; Maybe Int -&gt; SQLiteStuff
</span><a href="Database.Sqlite.Easy.Internal.html#SQLiteStuff"><span class="hs-identifier hs-var">SQLiteStuff</span></a></span><span> </span><span class="annot"><span class="annottext">Database
</span><a href="#local-6989586621679061385"><span class="hs-identifier hs-var">dbConn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
forall a. a -&gt; Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679061403"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IO a -&gt; IO [[SQLData]] -&gt; IO a
forall a b. IO a -&gt; IO b -&gt; IO a
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%2A"><span class="hs-operator hs-var">&lt;*</span></a></span><span> </span><span class="annot"><span class="annottext">IO [[SQLData]]
</span><a href="#local-6989586621679061417"><span class="hs-identifier hs-var">release</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-200"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">(RollbackCurrent a -&gt; IO a) -&gt; Handler a
forall a e. Exception e =&gt; (e -&gt; IO a) -&gt; Handler a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Exception.html#Handler"><span class="hs-identifier hs-var">Handler</span></a></span><span> </span><span class="annot"><span class="annottext">((RollbackCurrent a -&gt; IO a) -&gt; Handler a)
-&gt; (RollbackCurrent a -&gt; IO a) -&gt; Handler a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#RollbackCurrent"><span class="hs-identifier hs-type">RollbackCurrent</span></a></span><span> </span><span id="local-6989586621679061422"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679061422"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO [[SQLData]]
</span><a href="#local-6989586621679061420"><span class="hs-identifier hs-var">rollbackCurrent</span></a></span><span> </span><span class="annot"><span class="annottext">IO [[SQLData]] -&gt; IO a -&gt; IO a
forall a b. IO a -&gt; IO b -&gt; IO b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%2A%3E"><span class="hs-operator hs-var">*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; IO a
forall a. a -&gt; IO a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679061422"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-201"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(RollbackAll a -&gt; IO a) -&gt; Handler a
forall a e. Exception e =&gt; (e -&gt; IO a) -&gt; Handler a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Exception.html#Handler"><span class="hs-identifier hs-var">Handler</span></a></span><span> </span><span class="annot"><span class="annottext">((RollbackAll a -&gt; IO a) -&gt; Handler a)
-&gt; (RollbackAll a -&gt; IO a) -&gt; Handler a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679061423"><span class="annot"><span class="annottext">RollbackAll a
</span><a href="#local-6989586621679061423"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#RollbackAll"><span class="hs-identifier hs-type">RollbackAll</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679061036"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO [[SQLData]]
</span><a href="#local-6989586621679061420"><span class="hs-identifier hs-var">rollbackCurrent</span></a></span><span> </span><span class="annot"><span class="annottext">IO [[SQLData]] -&gt; IO a -&gt; IO a
forall a b. IO a -&gt; IO b -&gt; IO b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%2A%3E"><span class="hs-operator hs-var">*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">RollbackAll a -&gt; IO a
forall e a. Exception e =&gt; e -&gt; IO a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#throwIO"><span class="hs-identifier hs-var">throwIO</span></a></span><span> </span><span class="annot"><span class="annottext">RollbackAll a
</span><a href="#local-6989586621679061423"><span class="hs-identifier hs-var">ex</span></a></span><span>
</span><span id="line-202"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(SomeException -&gt; IO a) -&gt; Handler a
forall a e. Exception e =&gt; (e -&gt; IO a) -&gt; Handler a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Exception.html#Handler"><span class="hs-identifier hs-var">Handler</span></a></span><span> </span><span class="annot"><span class="annottext">((SomeException -&gt; IO a) -&gt; Handler a)
-&gt; (SomeException -&gt; IO a) -&gt; Handler a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679061424"><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679061424"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Exception.Type.html#SomeException"><span class="hs-identifier hs-type">SomeException</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO [[SQLData]]
</span><a href="#local-6989586621679061420"><span class="hs-identifier hs-var">rollbackCurrent</span></a></span><span> </span><span class="annot"><span class="annottext">IO [[SQLData]] -&gt; IO a -&gt; IO a
forall a b. IO a -&gt; IO b -&gt; IO b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%2A%3E"><span class="hs-operator hs-var">*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; IO a
forall e a. Exception e =&gt; e -&gt; IO a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#throwIO"><span class="hs-identifier hs-var">throwIO</span></a></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679061424"><span class="hs-identifier hs-var">ex</span></a></span><span>
</span><span id="line-203"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-204"></span><span>
</span><span id="line-205"></span><span id="local-6989586621679061051"><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#asTransaction%27"><span class="hs-identifier hs-type">asTransaction'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Database</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679061051"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#IO"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679061051"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-206"></span><span id="asTransaction%27"><span class="annot"><span class="annottext">asTransaction' :: forall a. Database -&gt; IO a -&gt; IO a
</span><a href="Database.Sqlite.Easy.Internal.html#asTransaction%27"><span class="hs-identifier hs-var hs-var">asTransaction'</span></a></span></span><span> </span><span id="local-6989586621679061435"><span class="annot"><span class="annottext">Database
</span><a href="#local-6989586621679061435"><span class="hs-identifier hs-var">db</span></a></span></span><span> </span><span id="local-6989586621679061436"><span class="annot"><span class="annottext">IO a
</span><a href="#local-6989586621679061436"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-207"></span><span>  </span><span class="hs-keyword">let</span><span>
</span><span id="line-208"></span><span>    </span><span id="local-6989586621679061437"><span class="annot"><span class="annottext">runIO :: SQL -&gt; IO [[SQLData]]
</span><a href="#local-6989586621679061437"><span class="hs-identifier hs-var hs-var">runIO</span></a></span></span><span> </span><span id="local-6989586621679061438"><span class="annot"><span class="annottext">SQL
</span><a href="#local-6989586621679061438"><span class="hs-identifier hs-var">sql</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SQLite [[SQLData]] -&gt; SQLiteStuff -&gt; IO [[SQLData]]
forall a. SQLite a -&gt; SQLiteStuff -&gt; IO a
</span><a href="Database.Sqlite.Easy.Internal.html#unSQLite"><span class="hs-identifier hs-var">unSQLite</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SQL -&gt; SQLite [[SQLData]]
</span><a href="Database.Sqlite.Easy.Internal.html#run"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">SQL
</span><a href="#local-6989586621679061438"><span class="hs-identifier hs-var">sql</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Database -&gt; Maybe Int -&gt; SQLiteStuff
</span><a href="Database.Sqlite.Easy.Internal.html#SQLiteStuff"><span class="hs-identifier hs-var">SQLiteStuff</span></a></span><span> </span><span class="annot"><span class="annottext">Database
</span><a href="#local-6989586621679061435"><span class="hs-identifier hs-var">db</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-209"></span><span>  </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SQL -&gt; IO [[SQLData]]
</span><a href="#local-6989586621679061437"><span class="hs-identifier hs-var">runIO</span></a></span><span> </span><span class="annot"><span class="annottext">SQL
</span><span class="hs-string">&quot;BEGIN&quot;</span></span><span>
</span><span id="line-210"></span><span>  </span><span class="annot"><span class="annottext">IO a -&gt; [Handler a] -&gt; IO a
forall a. IO a -&gt; [Handler a] -&gt; IO a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Exception.html#catches"><span class="hs-identifier hs-var">catches</span></a></span><span>
</span><span id="line-211"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IO a
</span><a href="#local-6989586621679061436"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="annot"><span class="annottext">IO a -&gt; IO [[SQLData]] -&gt; IO a
forall a b. IO a -&gt; IO b -&gt; IO a
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%2A"><span class="hs-operator hs-var">&lt;*</span></a></span><span> </span><span class="annot"><span class="annottext">SQL -&gt; IO [[SQLData]]
</span><a href="#local-6989586621679061437"><span class="hs-identifier hs-var">runIO</span></a></span><span> </span><span class="annot"><span class="annottext">SQL
</span><span class="hs-string">&quot;COMMIT&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-212"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">(SomeException -&gt; IO a) -&gt; Handler a
forall a e. Exception e =&gt; (e -&gt; IO a) -&gt; Handler a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Exception.html#Handler"><span class="hs-identifier hs-var">Handler</span></a></span><span> </span><span class="annot"><span class="annottext">((SomeException -&gt; IO a) -&gt; Handler a)
-&gt; (SomeException -&gt; IO a) -&gt; Handler a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679061439"><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679061439"><span class="hs-identifier hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Exception.Type.html#SomeException"><span class="hs-identifier hs-type">SomeException</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SQL -&gt; IO [[SQLData]]
</span><a href="#local-6989586621679061437"><span class="hs-identifier hs-var">runIO</span></a></span><span> </span><span class="annot"><span class="annottext">SQL
</span><span class="hs-string">&quot;ROLLBACK&quot;</span></span><span> </span><span class="annot"><span class="annottext">IO [[SQLData]] -&gt; IO a -&gt; IO a
forall a b. IO a -&gt; IO b -&gt; IO b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%2A%3E"><span class="hs-operator hs-var">*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; IO a
forall e a. Exception e =&gt; e -&gt; IO a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#throwIO"><span class="hs-identifier hs-var">throwIO</span></a></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679061439"><span class="hs-identifier hs-var">ex</span></a></span><span>
</span><span id="line-213"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-214"></span><span>
</span><span id="line-215"></span><span class="hs-comment">-- | Rollback the current (inner-most) transaction by supplying the return value.</span><span>
</span><span id="line-216"></span><span class="hs-comment">--   To be used inside transactions.</span><span>
</span><span id="line-217"></span><span id="local-6989586621679061053"><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#rollback"><span class="hs-identifier hs-type">rollback</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Typeable.Internal.html#Typeable"><span class="hs-identifier hs-type">Typeable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679061053"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679061053"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQLite"><span class="hs-identifier hs-type">SQLite</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679061053"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-218"></span><span id="rollback"><span class="annot"><span class="annottext">rollback :: forall a. Typeable a =&gt; a -&gt; SQLite a
</span><a href="Database.Sqlite.Easy.Internal.html#rollback"><span class="hs-identifier hs-var hs-var">rollback</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO a -&gt; SQLite a
forall a. IO a -&gt; SQLite a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO a -&gt; SQLite a) -&gt; (a -&gt; IO a) -&gt; a -&gt; SQLite a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">RollbackCurrent a -&gt; IO a
forall e a. Exception e =&gt; e -&gt; IO a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#throwIO"><span class="hs-identifier hs-var">throwIO</span></a></span><span> </span><span class="annot"><span class="annottext">(RollbackCurrent a -&gt; IO a)
-&gt; (a -&gt; RollbackCurrent a) -&gt; a -&gt; IO a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; RollbackCurrent a
forall a. a -&gt; RollbackCurrent a
</span><a href="Database.Sqlite.Easy.Internal.html#RollbackCurrent"><span class="hs-identifier hs-var">RollbackCurrent</span></a></span><span>
</span><span id="line-219"></span><span>
</span><span id="line-220"></span><span class="hs-comment">-- | Rollback all transaction structure by supplying the return value.</span><span>
</span><span id="line-221"></span><span class="hs-comment">--   To be used inside transactions.</span><span>
</span><span id="line-222"></span><span id="local-6989586621679061444"><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#rollbackAll"><span class="hs-identifier hs-type">rollbackAll</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Typeable.Internal.html#Typeable"><span class="hs-identifier hs-type">Typeable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679061444"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679061444"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#SQLite"><span class="hs-identifier hs-type">SQLite</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679061444"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-223"></span><span id="rollbackAll"><span class="annot"><span class="annottext">rollbackAll :: forall a. Typeable a =&gt; a -&gt; SQLite a
</span><a href="Database.Sqlite.Easy.Internal.html#rollbackAll"><span class="hs-identifier hs-var hs-var">rollbackAll</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO a -&gt; SQLite a
forall a. IO a -&gt; SQLite a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO a -&gt; SQLite a) -&gt; (a -&gt; IO a) -&gt; a -&gt; SQLite a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">RollbackAll a -&gt; IO a
forall e a. Exception e =&gt; e -&gt; IO a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.IO.html#throwIO"><span class="hs-identifier hs-var">throwIO</span></a></span><span> </span><span class="annot"><span class="annottext">(RollbackAll a -&gt; IO a) -&gt; (a -&gt; RollbackAll a) -&gt; a -&gt; IO a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; RollbackAll a
forall a. a -&gt; RollbackAll a
</span><a href="Database.Sqlite.Easy.Internal.html#RollbackAll"><span class="hs-identifier hs-var">RollbackAll</span></a></span><span>
</span><span id="line-224"></span><span>
</span><span id="line-225"></span><span class="hs-keyword">data</span><span> </span><span id="RollbackCurrent"><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#RollbackCurrent"><span class="hs-identifier hs-var">RollbackCurrent</span></a></span></span><span> </span><span id="local-6989586621679061055"><span class="annot"><a href="#local-6989586621679061055"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-226"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="RollbackCurrent"><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#RollbackCurrent"><span class="hs-identifier hs-var">RollbackCurrent</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679061055"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679061059"><span id="local-6989586621679061450"><span id="local-6989586621679061455"><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#Show"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#RollbackCurrent"><span class="hs-identifier hs-type">RollbackCurrent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679061059"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-229"></span><span>  </span><span id="local-6989586621679061457"><span class="annot"><span class="annottext">show :: RollbackCurrent a -&gt; String
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#show"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#RollbackCurrent"><span class="hs-identifier hs-type">RollbackCurrent</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;RollbackCurrent&quot;</span></span><span>
</span><span id="line-230"></span><span>
</span><span id="line-231"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679061042"><span id="local-6989586621679061465"><span id="local-6989586621679061468"><span id="local-6989586621679061471"><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Typeable.Internal.html#Typeable"><span class="hs-identifier hs-type">Typeable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679061042"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Exception.Type.html#Exception"><span class="hs-identifier hs-type">Exception</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#RollbackCurrent"><span class="hs-identifier hs-type">RollbackCurrent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679061042"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-232"></span><span>
</span><span id="line-233"></span><span class="hs-keyword">data</span><span> </span><span id="RollbackAll"><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#RollbackAll"><span class="hs-identifier hs-var">RollbackAll</span></a></span></span><span> </span><span id="local-6989586621679061057"><span class="annot"><a href="#local-6989586621679061057"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-234"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="RollbackAll"><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#RollbackAll"><span class="hs-identifier hs-var">RollbackAll</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679061057"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-235"></span><span>
</span><span id="line-236"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679061063"><span id="local-6989586621679061475"><span id="local-6989586621679061480"><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#Show"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#RollbackAll"><span class="hs-identifier hs-type">RollbackAll</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679061063"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-237"></span><span>  </span><span id="local-6989586621679061482"><span class="annot"><span class="annottext">show :: RollbackAll a -&gt; String
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#show"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#RollbackAll"><span class="hs-identifier hs-type">RollbackAll</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;RollbackAll&quot;</span></span><span>
</span><span id="line-238"></span><span>
</span><span id="line-239"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679061043"><span id="local-6989586621679061490"><span id="local-6989586621679061493"><span id="local-6989586621679061496"><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Typeable.Internal.html#Typeable"><span class="hs-identifier hs-type">Typeable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679061043"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Exception.Type.html#Exception"><span class="hs-identifier hs-type">Exception</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Sqlite.Easy.Internal.html#RollbackAll"><span class="hs-identifier hs-type">RollbackAll</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679061043"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-240"></span></pre></body></html>