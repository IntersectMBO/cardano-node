<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>System.Systemd.Daemon</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">systemd-2.4.0: Systemd facilities (Socket activation, Notify)</span><ul class="links" id="page-menu"><li><a href="src/System.Systemd.Daemon.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) Romain G&#233;rard 2014<br />David Fisher 2013</td></tr><tr><th>License</th><td>BSD3</td></tr><tr><th>Maintainer</th><td>romain.gerard@erebe.eu</td></tr><tr><th>Stability</th><td>stable</td></tr><tr><th>Portability</th><td>Require Systemd or will fail otherwise</td></tr><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">System.Systemd.Daemon</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Notify functions</a></li><li><a href="#g:2">Socket activation functions</a></li><li><a href="#g:3">Utils</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Implementation of Systemd facilities to create and manage
daemons.</p><p>All socket-related actions in this module, work with the
<a href="Network-Socket.html">Network.Socket</a> module from <code>network</code>. If you want to use
a different socket library or work directly with file
descriptors, see <a href="System-Systemd-Daemon-Fd.html">System.Systemd.Daemon.Fd</a>.</p><p>This module contains socket activation and notify tools. See</p><ul><li><a href="http://0pointer.de/blog/projects/socket-activation.html">http://0pointer.de/blog/projects/socket-activation.html</a></li><li><a href="http://www.freedesktop.org/software/systemd/man/systemd.socket.html">http://www.freedesktop.org/software/systemd/man/systemd.socket.html</a></li><li><a href="http://www.freedesktop.org/software/systemd/man/systemd.service.html">http://www.freedesktop.org/software/systemd/man/systemd.service.html</a></li></ul><p>Example:</p><pre>import Control.Monad(forever)
import System.Systemd.Daemon(notifyWatchdog)

main :: IO ()
main = forever $ do
        functionThatMayHang
        notifyWatchdog
</pre><p>If you use the service described as below,
Systemd will restart your program each time the watchdog
fail to notify itself under 60 sec.</p><pre>[Unit]
Description=MyDaemon

[Service]
Type=simple
TimeoutStartSec=0
ExecStart=AbsolutePathToMyExecutable
WatchdogSec=60
Restart=on-failure

[Install]
WantedBy=multi-user.target
</pre></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:notify">notify</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> ())</li><li class="src short"><a href="#v:notifyWithFD">notifyWithFD</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> -&gt; Socket -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> ())</li><li class="src short"><a href="#v:storeFd">storeFd</a> :: Socket -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> ())</li><li class="src short"><a href="#v:storeFdWithName">storeFdWithName</a> :: Socket -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> ())</li><li class="src short"><a href="#v:notifyWatchdog">notifyWatchdog</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> ())</li><li class="src short"><a href="#v:notifyReady">notifyReady</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> ())</li><li class="src short"><a href="#v:notifyPID">notifyPID</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-Posix-Types.html#t:CPid" title="System.Posix.Types">CPid</a> -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> ())</li><li class="src short"><a href="#v:notifyErrno">notifyErrno</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Foreign-C-Error.html#t:Errno" title="Foreign.C.Error">Errno</a> -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> ())</li><li class="src short"><a href="#v:notifyStatus">notifyStatus</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> ())</li><li class="src short"><a href="#v:notifyBusError">notifyBusError</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> ())</li><li class="src short"><a href="#v:notifyReloading">notifyReloading</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> ())</li><li class="src short"><a href="#v:notifyStopping">notifyStopping</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> ())</li><li class="src short"><a href="#v:getActivatedSockets">getActivatedSockets</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> [Socket])</li><li class="src short"><a href="#v:getActivatedSocketsWithNames">getActivatedSocketsWithNames</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> [(Socket, <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a>)])</li><li class="src short"><a href="#v:unsetEnvironnement">unsetEnvironnement</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> ()</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Notify functions</h1></a><div class="top"><p class="src"><a id="v:notify" class="def">notify</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> ()) <a href="src/System.Systemd.Daemon.html#notify" class="link">Source</a> <a href="#v:notify" class="selflink">#</a></p><div class="doc"><p>Notify systemd about an event</p><p>After notifying systemd the <code><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></code> parameter specify if the environnement
 shall be unset (Further call to notify will fail)</p><p>The <code><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a></code> is the event to pass</p><p>Returns <code><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> if the program was not started with systemd
 or that the environnement was previously unset</p></div></div><div class="top"><p class="src"><a id="v:notifyWithFD" class="def">notifyWithFD</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> -&gt; Socket -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> ()) <a href="src/System.Systemd.Daemon.html#notifyWithFD" class="link">Source</a> <a href="#v:notifyWithFD" class="selflink">#</a></p><div class="doc"><p>Same as <code><a href="System-Systemd-Daemon.html#v:notify" title="System.Systemd.Daemon">notify</a></code> but send along a socket to be stored</p><p>It is up to the caller to properly set the message
 (i.e: do not forget to set FDSTORE=1)</p></div></div><div class="top"><p class="src"><a id="v:storeFd" class="def">storeFd</a> :: Socket -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> ()) <a href="src/System.Systemd.Daemon.html#storeFd" class="link">Source</a> <a href="#v:storeFd" class="selflink">#</a></p><div class="doc"><p>Notify systemd to store a socket for us.</p><p>To be used along <code><a href="System-Systemd-Daemon.html#v:getActivatedSockets" title="System.Systemd.Daemon">getActivatedSockets</a></code> during a restart</p><p>Usefull for zero downtime restart</p></div></div><div class="top"><p class="src"><a id="v:storeFdWithName" class="def">storeFdWithName</a> :: Socket -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> ()) <a href="src/System.Systemd.Daemon.html#storeFdWithName" class="link">Source</a> <a href="#v:storeFdWithName" class="selflink">#</a></p><div class="doc"><p>Notify systemd to store a socket for us and specify a name.</p><p>To be used along <code><a href="System-Systemd-Daemon.html#v:getActivatedSocketsWithNames" title="System.Systemd.Daemon">getActivatedSocketsWithNames</a></code> during a restart</p><p>Usefull for zero downtime restart</p></div></div><div class="top"><p class="src"><a id="v:notifyWatchdog" class="def">notifyWatchdog</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> ()) <a href="src/System.Systemd.Daemon.html#notifyWatchdog" class="link">Source</a> <a href="#v:notifyWatchdog" class="selflink">#</a></p><div class="doc"><p>Notify the watchdog that the program is still alive</p></div></div><div class="top"><p class="src"><a id="v:notifyReady" class="def">notifyReady</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> ()) <a href="src/System.Systemd.Daemon.html#notifyReady" class="link">Source</a> <a href="#v:notifyReady" class="selflink">#</a></p><div class="doc"><p>Notify the systemd that the program is ready</p></div></div><div class="top"><p class="src"><a id="v:notifyPID" class="def">notifyPID</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-Posix-Types.html#t:CPid" title="System.Posix.Types">CPid</a> -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> ()) <a href="src/System.Systemd.Daemon.html#notifyPID" class="link">Source</a> <a href="#v:notifyPID" class="selflink">#</a></p><div class="doc"><p>Notify systemd of the PID of the program (for after a fork)</p></div></div><div class="top"><p class="src"><a id="v:notifyErrno" class="def">notifyErrno</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Foreign-C-Error.html#t:Errno" title="Foreign.C.Error">Errno</a> -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> ()) <a href="src/System.Systemd.Daemon.html#notifyErrno" class="link">Source</a> <a href="#v:notifyErrno" class="selflink">#</a></p><div class="doc"><p>Notify systemd of an <code><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Foreign-C-Error.html#t:Errno" title="Foreign.C.Error">Errno</a></code> error</p></div></div><div class="top"><p class="src"><a id="v:notifyStatus" class="def">notifyStatus</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> ()) <a href="src/System.Systemd.Daemon.html#notifyStatus" class="link">Source</a> <a href="#v:notifyStatus" class="selflink">#</a></p><div class="doc"><p>Notify systemd of the status of the program.</p><p>An arbitrary <code><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a></code> can be passed</p></div></div><div class="top"><p class="src"><a id="v:notifyBusError" class="def">notifyBusError</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a> -&gt; <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> ()) <a href="src/System.Systemd.Daemon.html#notifyBusError" class="link">Source</a> <a href="#v:notifyBusError" class="selflink">#</a></p><div class="doc"><p>Notify systemd of a DBUS error like.</p><p>Correct formatting of the <code><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a></code> is left to the caller</p></div></div><div class="top"><p class="src"><a id="v:notifyReloading" class="def">notifyReloading</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> ()) <a href="src/System.Systemd.Daemon.html#notifyReloading" class="link">Source</a> <a href="#v:notifyReloading" class="selflink">#</a></p><div class="doc"><p>Notify systemd that the service is reloading its configuration</p></div></div><div class="top"><p class="src"><a id="v:notifyStopping" class="def">notifyStopping</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> ()) <a href="src/System.Systemd.Daemon.html#notifyStopping" class="link">Source</a> <a href="#v:notifyStopping" class="selflink">#</a></p><div class="doc"><p>Notify systemd that the service is beginning its shutdown</p></div></div><a href="#g:2" id="g:2"><h1>Socket activation functions</h1></a><div class="top"><p class="src"><a id="v:getActivatedSockets" class="def">getActivatedSockets</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> [Socket]) <a href="src/System.Systemd.Daemon.html#getActivatedSockets" class="link">Source</a> <a href="#v:getActivatedSockets" class="selflink">#</a></p><div class="doc"><p>Return a list of activated sockets, if the program was started with
 socket activation.</p><p>The sockets are in the same order as in the associated <code>.socket</code> file.
 The sockets will have their family, type, and status set appropriately.</p><p>Returns <code><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> in systems without socket activation (or
 when the program was not socket activated).</p></div></div><div class="top"><p class="src"><a id="v:getActivatedSocketsWithNames" class="def">getActivatedSocketsWithNames</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> [(Socket, <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-String.html#t:String" title="Data.String">String</a>)]) <a href="src/System.Systemd.Daemon.html#getActivatedSocketsWithNames" class="link">Source</a> <a href="#v:getActivatedSocketsWithNames" class="selflink">#</a></p><div class="doc"><p>Same as <code><a href="System-Systemd-Daemon.html#v:getActivatedSockets" title="System.Systemd.Daemon">getActivatedSockets</a></code> but return also the names associated
 with those sockets if <code><a href="System-Systemd-Daemon.html#v:storeFdWithName" title="System.Systemd.Daemon">storeFdWithName</a></code> was used or specified in the <code>.socket</code> file.</p><p>IF <code><a href="System-Systemd-Daemon.html#v:storeFd" title="System.Systemd.Daemon">storeFd</a></code> was used to transmit the socket to systemd, the name will be a generic one
 (i.e: usally &quot;stored&quot;)</p></div></div><a href="#g:3" id="g:3"><h1>Utils</h1></a><div class="top"><p class="src"><a id="v:unsetEnvironnement" class="def">unsetEnvironnement</a> :: <a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="src/System.Systemd.Internal.html#unsetEnvironnement" class="link">Source</a> <a href="#v:unsetEnvironnement" class="selflink">#</a></p><div class="doc"><p>Unset all environnement variable related to Systemd.</p><p>Calls to functions like <code><a href="System-Systemd-Daemon.html#v:notify" title="System.Systemd.Daemon">notify</a></code> and
 <code><a href="System-Systemd-Daemon.html#v:getActivatedSockets" title="System.Systemd.Daemon">getActivatedSockets</a></code> will return
 <code><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> after that.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>