<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>GHC.Compact.Serialized</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ghc-compact-0.1.0.0: In memory storage of deeply evaluated data structure</span><ul class="links" id="page-menu"><li><a href="src/GHC.Compact.Serialized.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) The University of Glasgow 2001-2009<br />(c) Giovanni Campagna &lt;gcampagn@cs.stanford.edu&gt; 2015</td></tr><tr><th>License</th><td>BSD-style (see the file LICENSE)</td></tr><tr><th>Maintainer</th><td>libraries@haskell.org</td></tr><tr><th>Stability</th><td>unstable</td></tr><tr><th>Portability</th><td>non-portable (GHC Extensions)</td></tr><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">GHC.Compact.Serialized</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module contains support for serializing a Compact for network
 transmission and on-disk storage.</p><p><em>Since: 1.0.0</em></p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:SerializedCompact">SerializedCompact</a> a = <a href="#v:SerializedCompact">SerializedCompact</a> {<ul class="subs"><li><a href="#v:serializedCompactBlockList">serializedCompactBlockList</a> :: [(<a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> (), <a href="../base-4.18.2.1/Data-Word.html#t:Word" title="Data.Word">Word</a>)]</li><li><a href="#v:serializedCompactRoot">serializedCompactRoot</a> :: <a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> ()</li></ul>}</li><li class="src short"><a href="#v:withSerializedCompact">withSerializedCompact</a> :: <a href="GHC-Compact.html#t:Compact" title="GHC.Compact">Compact</a> a -&gt; (<a href="GHC-Compact-Serialized.html#t:SerializedCompact" title="GHC.Compact.Serialized">SerializedCompact</a> a -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> c) -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> c</li><li class="src short"><a href="#v:importCompact">importCompact</a> :: <a href="GHC-Compact-Serialized.html#t:SerializedCompact" title="GHC.Compact.Serialized">SerializedCompact</a> a -&gt; (<a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> b -&gt; <a href="../base-4.18.2.1/Data-Word.html#t:Word" title="Data.Word">Word</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> ()) -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="GHC-Compact.html#t:Compact" title="GHC.Compact">Compact</a> a))</li><li class="src short"><a href="#v:importCompactByteStrings">importCompactByteStrings</a> :: <a href="GHC-Compact-Serialized.html#t:SerializedCompact" title="GHC.Compact.Serialized">SerializedCompact</a> a -&gt; [<a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a>] -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="GHC-Compact.html#t:Compact" title="GHC.Compact">Compact</a> a))</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:SerializedCompact" class="def">SerializedCompact</a> a <a href="src/GHC.Compact.Serialized.html#SerializedCompact" class="link">Source</a> <a href="#t:SerializedCompact" class="selflink">#</a></p><div class="doc"><p>A serialized version of the <code><a href="GHC-Compact.html#t:Compact" title="GHC.Compact">Compact</a></code> metadata (each block with
 address and size and the address of the root). This structure is
 meant to be sent alongside the actual <code><a href="GHC-Compact.html#t:Compact" title="GHC.Compact">Compact</a></code> data. It can be
 sent out of band in advance if the data is to be sent over RDMA
 (which requires both sender and receiver to have pinned buffers).</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:SerializedCompact" class="def">SerializedCompact</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:serializedCompactBlockList" class="def">serializedCompactBlockList</a> :: [(<a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> (), <a href="../base-4.18.2.1/Data-Word.html#t:Word" title="Data.Word">Word</a>)]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:serializedCompactRoot" class="def">serializedCompactRoot</a> :: <a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> ()</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:withSerializedCompact" class="def">withSerializedCompact</a> :: <a href="GHC-Compact.html#t:Compact" title="GHC.Compact">Compact</a> a -&gt; (<a href="GHC-Compact-Serialized.html#t:SerializedCompact" title="GHC.Compact.Serialized">SerializedCompact</a> a -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> c) -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> c <a href="src/GHC.Compact.Serialized.html#withSerializedCompact" class="link">Source</a> <a href="#v:withSerializedCompact" class="selflink">#</a></p><div class="doc"><p>Serialize the <code><a href="GHC-Compact.html#t:Compact" title="GHC.Compact">Compact</a></code>, and call the provided function with
 with the <code><a href="GHC-Compact.html#t:Compact" title="GHC.Compact">Compact</a></code> serialized representation.  It is not safe
 to return the pointer from the action and use it after
 the action completes: all uses must be inside this bracket,
 since we cannot guarantee that the compact region will stay
 live from the <code><a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a></code> object.  For example, it would be
 unsound to use <code>unsafeInterleaveIO</code> to lazily construct
 a lazy bytestring from the <code><a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:importCompact" class="def">importCompact</a> :: <a href="GHC-Compact-Serialized.html#t:SerializedCompact" title="GHC.Compact.Serialized">SerializedCompact</a> a -&gt; (<a href="../base-4.18.2.1/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> b -&gt; <a href="../base-4.18.2.1/Data-Word.html#t:Word" title="Data.Word">Word</a> -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> ()) -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="GHC-Compact.html#t:Compact" title="GHC.Compact">Compact</a> a)) <a href="src/GHC.Compact.Serialized.html#importCompact" class="link">Source</a> <a href="#v:importCompact" class="selflink">#</a></p><div class="doc"><p>Deserialize a <code><a href="GHC-Compact-Serialized.html#t:SerializedCompact" title="GHC.Compact.Serialized">SerializedCompact</a></code> into a in-memory <code><a href="GHC-Compact.html#t:Compact" title="GHC.Compact">Compact</a></code>. The
 provided function will be called with the address and size of each
 newly allocated block in succession, and should fill the memory
 from the external source (eg. by reading from a socket or from disk)
 <code><a href="GHC-Compact-Serialized.html#v:importCompact" title="GHC.Compact.Serialized">importCompact</a></code> can return Nothing if the <code><a href="GHC-Compact.html#t:Compact" title="GHC.Compact">Compact</a></code> was corrupt
 or it had pointers that could not be adjusted.</p></div></div><div class="top"><p class="src"><a id="v:importCompactByteStrings" class="def">importCompactByteStrings</a> :: <a href="GHC-Compact-Serialized.html#t:SerializedCompact" title="GHC.Compact.Serialized">SerializedCompact</a> a -&gt; [<a href="../bytestring-0.11.5.3/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a>] -&gt; <a href="../base-4.18.2.1/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base-4.18.2.1/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (<a href="GHC-Compact.html#t:Compact" title="GHC.Compact">Compact</a> a)) <a href="src/GHC.Compact.Serialized.html#importCompactByteStrings" class="link">Source</a> <a href="#v:importCompactByteStrings" class="selflink">#</a></p><div class="doc"><p>Convenience function for importing a compact region that is represented
 by a list of strict <code>ByteString</code>s.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>