<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns #-}</span><span>
</span><span id="line-2"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Control.Monad.IOSimPOR.Types</span><span>
</span><span id="line-3"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * Effects</span></span><span>
</span><span id="line-4"></span><span>    </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#Effect"><span class="hs-identifier">Effect</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-5"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#readEffects"><span class="hs-identifier">readEffects</span></a></span><span>
</span><span id="line-6"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#writeEffects"><span class="hs-identifier">writeEffects</span></a></span><span>
</span><span id="line-7"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#forkEffect"><span class="hs-identifier">forkEffect</span></a></span><span>
</span><span id="line-8"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#throwToEffect"><span class="hs-identifier">throwToEffect</span></a></span><span>
</span><span id="line-9"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#wakeupEffects"><span class="hs-identifier">wakeupEffects</span></a></span><span>
</span><span id="line-10"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#onlyReadEffect"><span class="hs-identifier">onlyReadEffect</span></a></span><span>
</span><span id="line-11"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#racingEffects"><span class="hs-identifier">racingEffects</span></a></span><span>
</span><span id="line-12"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#ppEffect"><span class="hs-identifier">ppEffect</span></a></span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Schedules</span></span><span>
</span><span id="line-14"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#ScheduleControl"><span class="hs-identifier">ScheduleControl</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-15"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#isDefaultSchedule"><span class="hs-identifier">isDefaultSchedule</span></a></span><span>
</span><span id="line-16"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#ScheduleMod"><span class="hs-identifier">ScheduleMod</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Steps</span></span><span>
</span><span id="line-18"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.IOSim.CommonTypes.html#StepId"><span class="hs-identifier">StepId</span></a></span><span>
</span><span id="line-19"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.IOSim.CommonTypes.html#ppStepId"><span class="hs-identifier">ppStepId</span></a></span><span>
</span><span id="line-20"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#Step"><span class="hs-identifier">Step</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#StepInfo"><span class="hs-identifier">StepInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Races</span></span><span>
</span><span id="line-23"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#Races"><span class="hs-identifier">Races</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#noRaces"><span class="hs-identifier">noRaces</span></a></span><span>
</span><span id="line-25"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.List.html"><span class="hs-identifier">Data.List</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">List</span></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Set.html"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#Set"><span class="hs-identifier">Set</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Set.html"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Control.Monad.IOSim.CommonTypes.html"><span class="hs-identifier">Control.Monad.IOSim.CommonTypes</span></a></span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span class="hs-comment">--</span><span>
</span><span id="line-34"></span><span class="hs-comment">-- Effects</span><span>
</span><span id="line-35"></span><span class="hs-comment">--</span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span class="hs-comment">-- | An `Effect` aggregates effects performed by a thread in a given</span><span>
</span><span id="line-38"></span><span class="hs-comment">-- execution step.  Only used by *IOSimPOR*.</span><span>
</span><span id="line-39"></span><span class="hs-comment">--</span><span>
</span><span id="line-40"></span><span class="hs-keyword">data</span><span> </span><span id="Effect"><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#Effect"><span class="hs-identifier hs-var">Effect</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Effect"><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#Effect"><span class="hs-identifier hs-var">Effect</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-41"></span><span>    </span><span id="effectReads"><span class="annot"><span class="annottext">Effect -&gt; Set TVarId
</span><a href="Control.Monad.IOSimPOR.Types.html#effectReads"><span class="hs-identifier hs-var hs-var">effectReads</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="Control.Monad.IOSim.CommonTypes.html#TVarId"><span class="hs-identifier hs-type">TVarId</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>    </span><span id="effectWrites"><span class="annot"><span class="annottext">Effect -&gt; Set TVarId
</span><a href="Control.Monad.IOSimPOR.Types.html#effectWrites"><span class="hs-identifier hs-var hs-var">effectWrites</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="Control.Monad.IOSim.CommonTypes.html#TVarId"><span class="hs-identifier hs-type">TVarId</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>    </span><span id="effectForks"><span class="annot"><span class="annottext">Effect -&gt; Set IOSimThreadId
</span><a href="Control.Monad.IOSimPOR.Types.html#effectForks"><span class="hs-identifier hs-var hs-var">effectForks</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="Control.Monad.IOSim.CommonTypes.html#IOSimThreadId"><span class="hs-identifier hs-type">IOSimThreadId</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>    </span><span id="effectThrows"><span class="annot"><span class="annottext">Effect -&gt; [IOSimThreadId]
</span><a href="Control.Monad.IOSimPOR.Types.html#effectThrows"><span class="hs-identifier hs-var hs-var">effectThrows</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="Control.Monad.IOSim.CommonTypes.html#IOSimThreadId"><span class="hs-identifier hs-type">IOSimThreadId</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>    </span><span id="effectWakeup"><span class="annot"><span class="annottext">Effect -&gt; Set IOSimThreadId
</span><a href="Control.Monad.IOSimPOR.Types.html#effectWakeup"><span class="hs-identifier hs-var hs-var">effectWakeup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="Control.Monad.IOSim.CommonTypes.html#IOSimThreadId"><span class="hs-identifier hs-type">IOSimThreadId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-47"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679133444"><span id="local-6989586621679133455"><span id="local-6989586621679133459"><span class="annot"><span class="annottext">Int -&gt; Effect -&gt; ShowS
[Effect] -&gt; ShowS
Effect -&gt; String
(Int -&gt; Effect -&gt; ShowS)
-&gt; (Effect -&gt; String) -&gt; ([Effect] -&gt; ShowS) -&gt; Show Effect
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; Effect -&gt; ShowS
showsPrec :: Int -&gt; Effect -&gt; ShowS
$cshow :: Effect -&gt; String
show :: Effect -&gt; String
$cshowList :: [Effect] -&gt; ShowS
showList :: [Effect] -&gt; ShowS
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679133464"><span id="local-6989586621679133474"><span class="annot"><span class="annottext">Effect -&gt; Effect -&gt; Bool
(Effect -&gt; Effect -&gt; Bool)
-&gt; (Effect -&gt; Effect -&gt; Bool) -&gt; Eq Effect
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: Effect -&gt; Effect -&gt; Bool
== :: Effect -&gt; Effect -&gt; Bool
$c/= :: Effect -&gt; Effect -&gt; Bool
/= :: Effect -&gt; Effect -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span>
</span><span id="line-49"></span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#ppEffect"><span class="hs-identifier hs-type">ppEffect</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#Effect"><span class="hs-identifier hs-type">Effect</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-50"></span><span id="ppEffect"><span class="annot"><span class="annottext">ppEffect :: Effect -&gt; String
</span><a href="Control.Monad.IOSimPOR.Types.html#ppEffect"><span class="hs-identifier hs-var hs-var">ppEffect</span></a></span></span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#Effect"><span class="hs-identifier hs-type">Effect</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621679133478"><span class="annot"><span class="annottext">Set TVarId
effectReads :: Effect -&gt; Set TVarId
effectReads :: Set TVarId
</span><a href="Control.Monad.IOSimPOR.Types.html#effectReads"><span class="hs-identifier hs-var hs-var">effectReads</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679133479"><span class="annot"><span class="annottext">Set TVarId
effectWrites :: Effect -&gt; Set TVarId
effectWrites :: Set TVarId
</span><a href="Control.Monad.IOSimPOR.Types.html#effectWrites"><span class="hs-identifier hs-var hs-var">effectWrites</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679133480"><span class="annot"><span class="annottext">Set IOSimThreadId
effectForks :: Effect -&gt; Set IOSimThreadId
effectForks :: Set IOSimThreadId
</span><a href="Control.Monad.IOSimPOR.Types.html#effectForks"><span class="hs-identifier hs-var hs-var">effectForks</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679133481"><span class="annot"><span class="annottext">[IOSimThreadId]
effectThrows :: Effect -&gt; [IOSimThreadId]
effectThrows :: [IOSimThreadId]
</span><a href="Control.Monad.IOSimPOR.Types.html#effectThrows"><span class="hs-identifier hs-var hs-var">effectThrows</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679133482"><span class="annot"><span class="annottext">Set IOSimThreadId
effectWakeup :: Effect -&gt; Set IOSimThreadId
effectWakeup :: Set IOSimThreadId
</span><a href="Control.Monad.IOSimPOR.Types.html#effectWakeup"><span class="hs-identifier hs-var hs-var">effectWakeup</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-51"></span><span>  </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Effect { &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-52"></span><span>    </span><span class="annot"><span class="annottext">[String] -&gt; String
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#concat"><span class="hs-identifier hs-var">concat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; [String]
forall a. a -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.OldList.html#intersperse"><span class="hs-identifier hs-var">List.intersperse</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, &quot;</span></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; [String]) -&gt; [String] -&gt; [String]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-53"></span><span>           </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;reads = &quot;</span></span><span>  </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Set TVarId -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Set TVarId
</span><a href="#local-6989586621679133478"><span class="hs-identifier hs-var">effectReads</span></a></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#not"><span class="hs-identifier hs-var">not</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set TVarId -&gt; Bool
forall a. Set a -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">Set TVarId
</span><a href="#local-6989586621679133478"><span class="hs-identifier hs-var">effectReads</span></a></span><span class="hs-special">)</span><span>  </span><span class="hs-special">]</span><span>
</span><span id="line-54"></span><span>        </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;writes = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Set TVarId -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Set TVarId
</span><a href="#local-6989586621679133479"><span class="hs-identifier hs-var">effectWrites</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#not"><span class="hs-identifier hs-var">not</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set TVarId -&gt; Bool
forall a. Set a -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">Set TVarId
</span><a href="#local-6989586621679133479"><span class="hs-identifier hs-var">effectWrites</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-55"></span><span>        </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;forks = &quot;</span></span><span>  </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">(IOSimThreadId -&gt; String) -&gt; [IOSimThreadId] -&gt; String
forall a. (a -&gt; String) -&gt; [a] -&gt; String
</span><a href="Control.Monad.IOSim.CommonTypes.html#ppList"><span class="hs-identifier hs-var">ppList</span></a></span><span> </span><span class="annot"><span class="annottext">IOSimThreadId -&gt; String
</span><a href="Control.Monad.IOSim.CommonTypes.html#ppIOSimThreadId"><span class="hs-identifier hs-var">ppIOSimThreadId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set IOSimThreadId -&gt; [IOSimThreadId]
forall a. Set a -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#toList"><span class="hs-identifier hs-var">Set.toList</span></a></span><span> </span><span class="annot"><span class="annottext">Set IOSimThreadId
</span><a href="#local-6989586621679133480"><span class="hs-identifier hs-var">effectForks</span></a></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#not"><span class="hs-identifier hs-var">not</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set IOSimThreadId -&gt; Bool
forall a. Set a -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">Set IOSimThreadId
</span><a href="#local-6989586621679133480"><span class="hs-identifier hs-var">effectForks</span></a></span><span class="hs-special">)</span><span>  </span><span class="hs-special">]</span><span>
</span><span id="line-56"></span><span>        </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;throws = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">(IOSimThreadId -&gt; String) -&gt; [IOSimThreadId] -&gt; String
forall a. (a -&gt; String) -&gt; [a] -&gt; String
</span><a href="Control.Monad.IOSim.CommonTypes.html#ppList"><span class="hs-identifier hs-var">ppList</span></a></span><span> </span><span class="annot"><span class="annottext">IOSimThreadId -&gt; String
</span><a href="Control.Monad.IOSim.CommonTypes.html#ppIOSimThreadId"><span class="hs-identifier hs-var">ppIOSimThreadId</span></a></span><span>             </span><span class="annot"><span class="annottext">[IOSimThreadId]
</span><a href="#local-6989586621679133481"><span class="hs-identifier hs-var">effectThrows</span></a></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#not"><span class="hs-identifier hs-var">not</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[IOSimThreadId] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[IOSimThreadId]
</span><a href="#local-6989586621679133481"><span class="hs-identifier hs-var">effectThrows</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-57"></span><span>        </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;wakeup = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">(IOSimThreadId -&gt; String) -&gt; [IOSimThreadId] -&gt; String
forall a. (a -&gt; String) -&gt; [a] -&gt; String
</span><a href="Control.Monad.IOSim.CommonTypes.html#ppList"><span class="hs-identifier hs-var">ppList</span></a></span><span> </span><span class="annot"><span class="annottext">IOSimThreadId -&gt; String
</span><a href="Control.Monad.IOSim.CommonTypes.html#ppIOSimThreadId"><span class="hs-identifier hs-var">ppIOSimThreadId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set IOSimThreadId -&gt; [IOSimThreadId]
forall a. Set a -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#toList"><span class="hs-identifier hs-var">Set.toList</span></a></span><span> </span><span class="annot"><span class="annottext">Set IOSimThreadId
</span><a href="#local-6989586621679133482"><span class="hs-identifier hs-var">effectWakeup</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#not"><span class="hs-identifier hs-var">not</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set IOSimThreadId -&gt; Bool
forall a. Set a -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">Set IOSimThreadId
</span><a href="#local-6989586621679133482"><span class="hs-identifier hs-var">effectWakeup</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span>        </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; }&quot;</span></span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679133493"><span id="local-6989586621679133497"><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#Semigroup"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#Effect"><span class="hs-identifier hs-type">Effect</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-62"></span><span>  </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#Effect"><span class="hs-identifier hs-type">Effect</span></a></span><span> </span><span id="local-6989586621679133507"><span class="annot"><span class="annottext">Set TVarId
</span><a href="#local-6989586621679133507"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621679133508"><span class="annot"><span class="annottext">Set TVarId
</span><a href="#local-6989586621679133508"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621679133509"><span class="annot"><span class="annottext">Set IOSimThreadId
</span><a href="#local-6989586621679133509"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621679133510"><span class="annot"><span class="annottext">[IOSimThreadId]
</span><a href="#local-6989586621679133510"><span class="hs-identifier hs-var">ts</span></a></span></span><span> </span><span id="local-6989586621679133511"><span class="annot"><span class="annottext">Set IOSimThreadId
</span><a href="#local-6989586621679133511"><span class="hs-identifier hs-var">wu</span></a></span></span><span> </span><span id="local-6989586621679133512"><span class="annot"><span class="annottext">&lt;&gt; :: Effect -&gt; Effect -&gt; Effect
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></a></span></span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#Effect"><span class="hs-identifier hs-type">Effect</span></a></span><span> </span><span id="local-6989586621679133513"><span class="annot"><span class="annottext">Set TVarId
</span><a href="#local-6989586621679133513"><span class="hs-identifier hs-var">r'</span></a></span></span><span> </span><span id="local-6989586621679133514"><span class="annot"><span class="annottext">Set TVarId
</span><a href="#local-6989586621679133514"><span class="hs-identifier hs-var">w'</span></a></span></span><span> </span><span id="local-6989586621679133515"><span class="annot"><span class="annottext">Set IOSimThreadId
</span><a href="#local-6989586621679133515"><span class="hs-identifier hs-var">s'</span></a></span></span><span> </span><span id="local-6989586621679133516"><span class="annot"><span class="annottext">[IOSimThreadId]
</span><a href="#local-6989586621679133516"><span class="hs-identifier hs-var">ts'</span></a></span></span><span> </span><span id="local-6989586621679133517"><span class="annot"><span class="annottext">Set IOSimThreadId
</span><a href="#local-6989586621679133517"><span class="hs-identifier hs-var">wu'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-63"></span><span>    </span><span class="annot"><span class="annottext">Set TVarId
-&gt; Set TVarId
-&gt; Set IOSimThreadId
-&gt; [IOSimThreadId]
-&gt; Set IOSimThreadId
-&gt; Effect
</span><a href="Control.Monad.IOSimPOR.Types.html#Effect"><span class="hs-identifier hs-var">Effect</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set TVarId
</span><a href="#local-6989586621679133507"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Set TVarId -&gt; Set TVarId -&gt; Set TVarId
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Set TVarId
</span><a href="#local-6989586621679133513"><span class="hs-identifier hs-var">r'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set TVarId
</span><a href="#local-6989586621679133508"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Set TVarId -&gt; Set TVarId -&gt; Set TVarId
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Set TVarId
</span><a href="#local-6989586621679133514"><span class="hs-identifier hs-var">w'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set IOSimThreadId
</span><a href="#local-6989586621679133509"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Set IOSimThreadId -&gt; Set IOSimThreadId -&gt; Set IOSimThreadId
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Set IOSimThreadId
</span><a href="#local-6989586621679133515"><span class="hs-identifier hs-var">s'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[IOSimThreadId]
</span><a href="#local-6989586621679133510"><span class="hs-identifier hs-var">ts</span></a></span><span> </span><span class="annot"><span class="annottext">[IOSimThreadId] -&gt; [IOSimThreadId] -&gt; [IOSimThreadId]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[IOSimThreadId]
</span><a href="#local-6989586621679133516"><span class="hs-identifier hs-var">ts'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set IOSimThreadId
</span><a href="#local-6989586621679133511"><span class="hs-identifier hs-var">wu</span></a></span><span> </span><span class="annot"><span class="annottext">Set IOSimThreadId -&gt; Set IOSimThreadId -&gt; Set IOSimThreadId
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Set IOSimThreadId
</span><a href="#local-6989586621679133517"><span class="hs-identifier hs-var">wu'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span>
</span><span id="line-65"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679133522"><span id="local-6989586621679133525"><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#Monoid"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#Effect"><span class="hs-identifier hs-type">Effect</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-66"></span><span>  </span><span id="local-6989586621679133528"><span class="annot"><span class="annottext">mempty :: Effect
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set TVarId
-&gt; Set TVarId
-&gt; Set IOSimThreadId
-&gt; [IOSimThreadId]
-&gt; Set IOSimThreadId
-&gt; Effect
</span><a href="Control.Monad.IOSimPOR.Types.html#Effect"><span class="hs-identifier hs-var">Effect</span></a></span><span> </span><span class="annot"><span class="annottext">Set TVarId
forall a. Set a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#empty"><span class="hs-identifier hs-var">Set.empty</span></a></span><span> </span><span class="annot"><span class="annottext">Set TVarId
forall a. Set a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#empty"><span class="hs-identifier hs-var">Set.empty</span></a></span><span> </span><span class="annot"><span class="annottext">Set IOSimThreadId
forall a. Set a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#empty"><span class="hs-identifier hs-var">Set.empty</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Set IOSimThreadId
forall a. Set a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#empty"><span class="hs-identifier hs-var">Set.empty</span></a></span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span class="hs-comment">--</span><span>
</span><span id="line-69"></span><span class="hs-comment">-- Effect smart constructors</span><span>
</span><span id="line-70"></span><span class="hs-comment">--</span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span class="hs-comment">-- readEffect :: SomeTVar s -&gt; Effect</span><span>
</span><span id="line-73"></span><span class="hs-comment">-- readEffect r = mempty{effectReads = Set.singleton $ someTvarId r }</span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span id="local-6989586621679133360"><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#readEffects"><span class="hs-identifier hs-type">readEffects</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Control.Monad.IOSim.CommonTypes.html#SomeTVar"><span class="hs-identifier hs-type">SomeTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679133360"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#Effect"><span class="hs-identifier hs-type">Effect</span></a></span></span><span>
</span><span id="line-76"></span><span id="readEffects"><span class="annot"><span class="annottext">readEffects :: forall s. [SomeTVar s] -&gt; Effect
</span><a href="Control.Monad.IOSimPOR.Types.html#readEffects"><span class="hs-identifier hs-var hs-var">readEffects</span></a></span></span><span> </span><span id="local-6989586621679133532"><span class="annot"><span class="annottext">[SomeTVar s]
</span><a href="#local-6989586621679133532"><span class="hs-identifier hs-var">rs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Effect
forall a. Monoid a =&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">{</span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#effectReads"><span class="hs-identifier hs-var">effectReads</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#fromList"><span class="hs-identifier hs-type">Set.fromList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#map"><span class="hs-identifier hs-type">map</span></a></span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#someTvarId"><span class="hs-identifier hs-type">someTvarId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679133532"><span class="hs-identifier hs-type">rs</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-77"></span><span>
</span><span id="line-78"></span><span class="hs-comment">-- writeEffect :: SomeTVar s -&gt; Effect</span><span>
</span><span id="line-79"></span><span class="hs-comment">-- writeEffect r = mempty{effectWrites = Set.singleton $ someTvarId r }</span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span id="local-6989586621679133535"><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#writeEffects"><span class="hs-identifier hs-type">writeEffects</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Control.Monad.IOSim.CommonTypes.html#SomeTVar"><span class="hs-identifier hs-type">SomeTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679133535"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#Effect"><span class="hs-identifier hs-type">Effect</span></a></span></span><span>
</span><span id="line-82"></span><span id="writeEffects"><span class="annot"><span class="annottext">writeEffects :: forall s. [SomeTVar s] -&gt; Effect
</span><a href="Control.Monad.IOSimPOR.Types.html#writeEffects"><span class="hs-identifier hs-var hs-var">writeEffects</span></a></span></span><span> </span><span id="local-6989586621679133538"><span class="annot"><span class="annottext">[SomeTVar s]
</span><a href="#local-6989586621679133538"><span class="hs-identifier hs-var">rs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Effect
forall a. Monoid a =&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">{</span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#effectWrites"><span class="hs-identifier hs-var">effectWrites</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#fromList"><span class="hs-identifier hs-type">Set.fromList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#map"><span class="hs-identifier hs-type">map</span></a></span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#someTvarId"><span class="hs-identifier hs-type">someTvarId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679133538"><span class="hs-identifier hs-type">rs</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#forkEffect"><span class="hs-identifier hs-type">forkEffect</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.IOSim.CommonTypes.html#IOSimThreadId"><span class="hs-identifier hs-type">IOSimThreadId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#Effect"><span class="hs-identifier hs-type">Effect</span></a></span><span>
</span><span id="line-85"></span><span id="forkEffect"><span class="annot"><span class="annottext">forkEffect :: IOSimThreadId -&gt; Effect
</span><a href="Control.Monad.IOSimPOR.Types.html#forkEffect"><span class="hs-identifier hs-var hs-var">forkEffect</span></a></span></span><span> </span><span id="local-6989586621679133539"><span class="annot"><span class="annottext">IOSimThreadId
</span><a href="#local-6989586621679133539"><span class="hs-identifier hs-var">tid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Effect
forall a. Monoid a =&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">{</span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#effectForks"><span class="hs-identifier hs-var">effectForks</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#singleton"><span class="hs-identifier hs-type">Set.singleton</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679133539"><span class="hs-identifier hs-type">tid</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#throwToEffect"><span class="hs-identifier hs-type">throwToEffect</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.IOSim.CommonTypes.html#IOSimThreadId"><span class="hs-identifier hs-type">IOSimThreadId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#Effect"><span class="hs-identifier hs-type">Effect</span></a></span><span>
</span><span id="line-88"></span><span id="throwToEffect"><span class="annot"><span class="annottext">throwToEffect :: IOSimThreadId -&gt; Effect
</span><a href="Control.Monad.IOSimPOR.Types.html#throwToEffect"><span class="hs-identifier hs-var hs-var">throwToEffect</span></a></span></span><span> </span><span id="local-6989586621679133541"><span class="annot"><span class="annottext">IOSimThreadId
</span><a href="#local-6989586621679133541"><span class="hs-identifier hs-var">tid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Effect
forall a. Monoid a =&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#effectThrows"><span class="hs-identifier hs-var">effectThrows</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679133541"><span class="hs-identifier hs-type">tid</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#wakeupEffects"><span class="hs-identifier hs-type">wakeupEffects</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Control.Monad.IOSim.CommonTypes.html#IOSimThreadId"><span class="hs-identifier hs-type">IOSimThreadId</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#Effect"><span class="hs-identifier hs-type">Effect</span></a></span><span>
</span><span id="line-91"></span><span id="wakeupEffects"><span class="annot"><span class="annottext">wakeupEffects :: [IOSimThreadId] -&gt; Effect
</span><a href="Control.Monad.IOSimPOR.Types.html#wakeupEffects"><span class="hs-identifier hs-var hs-var">wakeupEffects</span></a></span></span><span> </span><span id="local-6989586621679133542"><span class="annot"><span class="annottext">[IOSimThreadId]
</span><a href="#local-6989586621679133542"><span class="hs-identifier hs-var">tids</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Effect
forall a. Monoid a =&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">{</span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#effectWakeup"><span class="hs-identifier hs-var">effectWakeup</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#fromList"><span class="hs-identifier hs-type">Set.fromList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679133542"><span class="hs-identifier hs-type">tids</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span class="hs-comment">--</span><span>
</span><span id="line-94"></span><span class="hs-comment">-- Utils</span><span>
</span><span id="line-95"></span><span class="hs-comment">--</span><span>
</span><span id="line-96"></span><span>
</span><span id="line-97"></span><span id="local-6989586621679133366"><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#someTvarId"><span class="hs-identifier hs-type">someTvarId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.IOSim.CommonTypes.html#SomeTVar"><span class="hs-identifier hs-type">SomeTVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679133366"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.IOSim.CommonTypes.html#TVarId"><span class="hs-identifier hs-type">TVarId</span></a></span></span><span>
</span><span id="line-98"></span><span id="someTvarId"><span class="annot"><span class="annottext">someTvarId :: forall s. SomeTVar s -&gt; TVarId
</span><a href="Control.Monad.IOSimPOR.Types.html#someTvarId"><span class="hs-identifier hs-var hs-var">someTvarId</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.IOSim.CommonTypes.html#SomeTVar"><span class="hs-identifier hs-type">SomeTVar</span></a></span><span> </span><span id="local-6989586621679133544"><span class="annot"><span class="annottext">TVar s a
</span><a href="#local-6989586621679133544"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TVar s a -&gt; TVarId
forall s a. TVar s a -&gt; TVarId
</span><a href="Control.Monad.IOSim.CommonTypes.html#tvarId"><span class="hs-identifier hs-var">tvarId</span></a></span><span> </span><span class="annot"><span class="annottext">TVar s a
</span><a href="#local-6989586621679133544"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#onlyReadEffect"><span class="hs-identifier hs-type">onlyReadEffect</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#Effect"><span class="hs-identifier hs-type">Effect</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Bool"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-101"></span><span id="onlyReadEffect"><span class="annot"><span class="annottext">onlyReadEffect :: Effect -&gt; Bool
</span><a href="Control.Monad.IOSimPOR.Types.html#onlyReadEffect"><span class="hs-identifier hs-var hs-var">onlyReadEffect</span></a></span></span><span> </span><span id="local-6989586621679133546"><span class="annot"><span class="annottext">Effect
</span><a href="#local-6989586621679133546"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Effect
</span><a href="#local-6989586621679133546"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#effectReads"><span class="hs-identifier hs-var">effectReads</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#effectReads"><span class="hs-identifier hs-var">effectReads</span></a></span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#mempty"><span class="hs-identifier hs-type">mempty</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">Effect -&gt; Effect -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#%3D%3D"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Effect
forall a. Monoid a =&gt; a
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-102"></span><span>
</span><span id="line-103"></span><span class="hs-comment">-- | Check if two effects race.  The two effects are assumed to come from</span><span>
</span><span id="line-104"></span><span class="hs-comment">-- different threads, from steps which do not wake one another, see</span><span>
</span><span id="line-105"></span><span class="hs-comment">-- `racingSteps`.</span><span>
</span><span id="line-106"></span><span class="hs-comment">--</span><span>
</span><span id="line-107"></span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#racingEffects"><span class="hs-identifier hs-type">racingEffects</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#Effect"><span class="hs-identifier hs-type">Effect</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#Effect"><span class="hs-identifier hs-type">Effect</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Bool"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-108"></span><span id="racingEffects"><span class="annot"><span class="annottext">racingEffects :: Effect -&gt; Effect -&gt; Bool
</span><a href="Control.Monad.IOSimPOR.Types.html#racingEffects"><span class="hs-identifier hs-var hs-var">racingEffects</span></a></span></span><span> </span><span id="local-6989586621679133547"><span class="annot"><span class="annottext">Effect
</span><a href="#local-6989586621679133547"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621679133548"><span class="annot"><span class="annottext">Effect
</span><a href="#local-6989586621679133548"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span>       </span><span class="hs-comment">-- both effects throw to the same threads</span><span>
</span><span id="line-111"></span><span>       </span><span class="annot"><span class="annottext">Effect -&gt; [IOSimThreadId]
</span><a href="Control.Monad.IOSimPOR.Types.html#effectThrows"><span class="hs-identifier hs-var">effectThrows</span></a></span><span> </span><span class="annot"><span class="annottext">Effect
</span><a href="#local-6989586621679133547"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">[IOSimThreadId] -&gt; [IOSimThreadId] -&gt; Bool
forall a. Eq a =&gt; [a] -&gt; [a] -&gt; Bool
</span><a href="#local-6989586621679133549"><span class="hs-operator hs-var">`intersectsL`</span></a></span><span> </span><span class="annot"><span class="annottext">Effect -&gt; [IOSimThreadId]
</span><a href="Control.Monad.IOSimPOR.Types.html#effectThrows"><span class="hs-identifier hs-var">effectThrows</span></a></span><span> </span><span class="annot"><span class="annottext">Effect
</span><a href="#local-6989586621679133548"><span class="hs-identifier hs-var">e'</span></a></span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span>       </span><span class="hs-comment">-- concurrent reads &amp; writes of the same TVars</span><span>
</span><span id="line-114"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#%7C%7C"><span class="hs-operator hs-var">||</span></a></span><span> </span><span class="annot"><span class="annottext">Effect -&gt; Set TVarId
</span><a href="Control.Monad.IOSimPOR.Types.html#effectReads"><span class="hs-identifier hs-var">effectReads</span></a></span><span>  </span><span class="annot"><span class="annottext">Effect
</span><a href="#local-6989586621679133547"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Set TVarId -&gt; Set TVarId -&gt; Bool
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Bool
</span><a href="#local-6989586621679133551"><span class="hs-operator hs-var">`intersects`</span></a></span><span>  </span><span class="annot"><span class="annottext">Effect -&gt; Set TVarId
</span><a href="Control.Monad.IOSimPOR.Types.html#effectWrites"><span class="hs-identifier hs-var">effectWrites</span></a></span><span> </span><span class="annot"><span class="annottext">Effect
</span><a href="#local-6989586621679133548"><span class="hs-identifier hs-var">e'</span></a></span><span>
</span><span id="line-115"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#%7C%7C"><span class="hs-operator hs-var">||</span></a></span><span> </span><span class="annot"><span class="annottext">Effect -&gt; Set TVarId
</span><a href="Control.Monad.IOSimPOR.Types.html#effectWrites"><span class="hs-identifier hs-var">effectWrites</span></a></span><span> </span><span class="annot"><span class="annottext">Effect
</span><a href="#local-6989586621679133547"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Set TVarId -&gt; Set TVarId -&gt; Bool
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Bool
</span><a href="#local-6989586621679133551"><span class="hs-operator hs-var">`intersects`</span></a></span><span>  </span><span class="annot"><span class="annottext">Effect -&gt; Set TVarId
</span><a href="Control.Monad.IOSimPOR.Types.html#effectReads"><span class="hs-identifier hs-var">effectReads</span></a></span><span>  </span><span class="annot"><span class="annottext">Effect
</span><a href="#local-6989586621679133548"><span class="hs-identifier hs-var">e'</span></a></span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span>       </span><span class="hs-comment">-- concurrent writes to the same TVars</span><span>
</span><span id="line-118"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#%7C%7C"><span class="hs-operator hs-var">||</span></a></span><span> </span><span class="annot"><span class="annottext">Effect -&gt; Set TVarId
</span><a href="Control.Monad.IOSimPOR.Types.html#effectWrites"><span class="hs-identifier hs-var">effectWrites</span></a></span><span> </span><span class="annot"><span class="annottext">Effect
</span><a href="#local-6989586621679133547"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Set TVarId -&gt; Set TVarId -&gt; Bool
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Bool
</span><a href="#local-6989586621679133551"><span class="hs-operator hs-var">`intersects`</span></a></span><span>  </span><span class="annot"><span class="annottext">Effect -&gt; Set TVarId
</span><a href="Control.Monad.IOSimPOR.Types.html#effectWrites"><span class="hs-identifier hs-var">effectWrites</span></a></span><span> </span><span class="annot"><span class="annottext">Effect
</span><a href="#local-6989586621679133548"><span class="hs-identifier hs-var">e'</span></a></span><span>
</span><span id="line-119"></span><span>
</span><span id="line-120"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-121"></span><span>    </span><span id="local-6989586621679133375"><span class="annot"><a href="#local-6989586621679133551"><span class="hs-identifier hs-type">intersects</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Ord"><span class="hs-identifier hs-type">Ord</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679133375"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679133375"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679133375"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Bool"><span class="hs-identifier hs-type">Bool</span></a></span></span><span>
</span><span id="line-122"></span><span>    </span><span id="local-6989586621679133551"><span class="annot"><span class="annottext">intersects :: forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Bool
</span><a href="#local-6989586621679133551"><span class="hs-identifier hs-var hs-var">intersects</span></a></span></span><span> </span><span id="local-6989586621679133554"><span class="annot"><span class="annottext">Set a
</span><a href="#local-6989586621679133554"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679133555"><span class="annot"><span class="annottext">Set a
</span><a href="#local-6989586621679133555"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#not"><span class="hs-identifier hs-var">not</span></a></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Set a
</span><a href="#local-6989586621679133554"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Set a -&gt; Set a -&gt; Bool
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#disjoint"><span class="hs-operator hs-var">`Set.disjoint`</span></a></span><span> </span><span class="annot"><span class="annottext">Set a
</span><a href="#local-6989586621679133555"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-123"></span><span>
</span><span id="line-124"></span><span>    </span><span id="local-6989586621679133374"><span class="annot"><a href="#local-6989586621679133549"><span class="hs-identifier hs-type">intersectsL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679133374"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679133374"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679133374"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Bool"><span class="hs-identifier hs-type">Bool</span></a></span></span><span>
</span><span id="line-125"></span><span>    </span><span id="local-6989586621679133549"><span class="annot"><span class="annottext">intersectsL :: forall a. Eq a =&gt; [a] -&gt; [a] -&gt; Bool
</span><a href="#local-6989586621679133549"><span class="hs-identifier hs-var hs-var">intersectsL</span></a></span></span><span> </span><span id="local-6989586621679133560"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679133560"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679133561"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679133561"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#not"><span class="hs-identifier hs-var">not</span></a></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">([a] -&gt; Bool) -&gt; [a] -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679133560"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; [a] -&gt; [a]
forall a. Eq a =&gt; [a] -&gt; [a] -&gt; [a]
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/Data.OldList.html#intersect"><span class="hs-operator hs-var">`List.intersect`</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621679133561"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span>
</span><span id="line-128"></span><span class="hs-comment">---</span><span>
</span><span id="line-129"></span><span class="hs-comment">--- Schedules</span><span>
</span><span id="line-130"></span><span class="hs-comment">---</span><span>
</span><span id="line-131"></span><span>
</span><span id="line-132"></span><span class="hs-comment">-- | Modified execution schedule.</span><span>
</span><span id="line-133"></span><span class="hs-comment">--</span><span>
</span><span id="line-134"></span><span class="hs-keyword">data</span><span> </span><span id="ScheduleControl"><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#ScheduleControl"><span class="hs-identifier hs-var">ScheduleControl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ControlDefault"><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#ControlDefault"><span class="hs-identifier hs-var">ControlDefault</span></a></span></span><span>
</span><span id="line-135"></span><span>                     </span><span class="annot"><span class="hs-comment">-- ^ default scheduling mode</span></span><span>
</span><span id="line-136"></span><span>                     </span><span class="hs-glyph">|</span><span> </span><span id="ControlAwait"><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#ControlAwait"><span class="hs-identifier hs-var">ControlAwait</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#ScheduleMod"><span class="hs-identifier hs-type">ScheduleMod</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-137"></span><span>                     </span><span class="hs-comment">-- ^ if the current control is 'ControlAwait', the normal</span><span>
</span><span id="line-138"></span><span>                     </span><span class="hs-comment">-- scheduling will proceed, until the thread found in the</span><span>
</span><span id="line-139"></span><span>                     </span><span class="hs-comment">-- first 'ScheduleMod' reaches the given step.  At this</span><span>
</span><span id="line-140"></span><span>                     </span><span class="hs-comment">-- point the thread is put to sleep, until after all the</span><span>
</span><span id="line-141"></span><span>                     </span><span class="hs-comment">-- steps are followed.</span><span>
</span><span id="line-142"></span><span>                     </span><span class="hs-glyph">|</span><span> </span><span id="ControlFollow"><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#ControlFollow"><span class="hs-identifier hs-var">ControlFollow</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Control.Monad.IOSim.CommonTypes.html#StepId"><span class="hs-identifier hs-type">StepId</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#ScheduleMod"><span class="hs-identifier hs-type">ScheduleMod</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-143"></span><span>                     </span><span class="hs-comment">-- ^ follow the steps then continue with schedule</span><span>
</span><span id="line-144"></span><span>                     </span><span class="hs-comment">-- modifications.  This control is set by 'followControl'</span><span>
</span><span id="line-145"></span><span>                     </span><span class="hs-comment">-- when 'controlTargets' returns true.</span><span>
</span><span id="line-146"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679133568"><span id="local-6989586621679133575"><span class="annot"><span class="annottext">ScheduleControl -&gt; ScheduleControl -&gt; Bool
(ScheduleControl -&gt; ScheduleControl -&gt; Bool)
-&gt; (ScheduleControl -&gt; ScheduleControl -&gt; Bool)
-&gt; Eq ScheduleControl
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: ScheduleControl -&gt; ScheduleControl -&gt; Bool
== :: ScheduleControl -&gt; ScheduleControl -&gt; Bool
$c/= :: ScheduleControl -&gt; ScheduleControl -&gt; Bool
/= :: ScheduleControl -&gt; ScheduleControl -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679133585"><span id="local-6989586621679133593"><span id="local-6989586621679133600"><span id="local-6989586621679133604"><span id="local-6989586621679133607"><span id="local-6989586621679133610"><span id="local-6989586621679133613"><span class="annot"><span class="annottext">Eq ScheduleControl
Eq ScheduleControl =&gt;
(ScheduleControl -&gt; ScheduleControl -&gt; Ordering)
-&gt; (ScheduleControl -&gt; ScheduleControl -&gt; Bool)
-&gt; (ScheduleControl -&gt; ScheduleControl -&gt; Bool)
-&gt; (ScheduleControl -&gt; ScheduleControl -&gt; Bool)
-&gt; (ScheduleControl -&gt; ScheduleControl -&gt; Bool)
-&gt; (ScheduleControl -&gt; ScheduleControl -&gt; ScheduleControl)
-&gt; (ScheduleControl -&gt; ScheduleControl -&gt; ScheduleControl)
-&gt; Ord ScheduleControl
ScheduleControl -&gt; ScheduleControl -&gt; Bool
ScheduleControl -&gt; ScheduleControl -&gt; Ordering
ScheduleControl -&gt; ScheduleControl -&gt; ScheduleControl
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: ScheduleControl -&gt; ScheduleControl -&gt; Ordering
compare :: ScheduleControl -&gt; ScheduleControl -&gt; Ordering
$c&lt; :: ScheduleControl -&gt; ScheduleControl -&gt; Bool
&lt; :: ScheduleControl -&gt; ScheduleControl -&gt; Bool
$c&lt;= :: ScheduleControl -&gt; ScheduleControl -&gt; Bool
&lt;= :: ScheduleControl -&gt; ScheduleControl -&gt; Bool
$c&gt; :: ScheduleControl -&gt; ScheduleControl -&gt; Bool
&gt; :: ScheduleControl -&gt; ScheduleControl -&gt; Bool
$c&gt;= :: ScheduleControl -&gt; ScheduleControl -&gt; Bool
&gt;= :: ScheduleControl -&gt; ScheduleControl -&gt; Bool
$cmax :: ScheduleControl -&gt; ScheduleControl -&gt; ScheduleControl
max :: ScheduleControl -&gt; ScheduleControl -&gt; ScheduleControl
$cmin :: ScheduleControl -&gt; ScheduleControl -&gt; ScheduleControl
min :: ScheduleControl -&gt; ScheduleControl -&gt; ScheduleControl
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Ord"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679133621"><span id="local-6989586621679133630"><span id="local-6989586621679133634"><span class="annot"><span class="annottext">Int -&gt; ScheduleControl -&gt; ShowS
[ScheduleControl] -&gt; ShowS
ScheduleControl -&gt; String
(Int -&gt; ScheduleControl -&gt; ShowS)
-&gt; (ScheduleControl -&gt; String)
-&gt; ([ScheduleControl] -&gt; ShowS)
-&gt; Show ScheduleControl
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; ScheduleControl -&gt; ShowS
showsPrec :: Int -&gt; ScheduleControl -&gt; ShowS
$cshow :: ScheduleControl -&gt; String
show :: ScheduleControl -&gt; String
$cshowList :: [ScheduleControl] -&gt; ShowS
showList :: [ScheduleControl] -&gt; ShowS
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span>
</span><span id="line-148"></span><span>
</span><span id="line-149"></span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#isDefaultSchedule"><span class="hs-identifier hs-type">isDefaultSchedule</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#ScheduleControl"><span class="hs-identifier hs-type">ScheduleControl</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Bool"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-150"></span><span id="isDefaultSchedule"><span class="annot"><span class="annottext">isDefaultSchedule :: ScheduleControl -&gt; Bool
</span><a href="Control.Monad.IOSimPOR.Types.html#isDefaultSchedule"><span class="hs-identifier hs-var hs-var">isDefaultSchedule</span></a></span></span><span> </span><span class="annot"><span class="annottext">ScheduleControl
</span><a href="Control.Monad.IOSimPOR.Types.html#ControlDefault"><span class="hs-identifier hs-var">ControlDefault</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#True"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-151"></span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#isDefaultSchedule"><span class="hs-identifier hs-var">isDefaultSchedule</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#ControlFollow"><span class="hs-identifier hs-type">ControlFollow</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#True"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-152"></span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#isDefaultSchedule"><span class="hs-identifier hs-var">isDefaultSchedule</span></a></span><span> </span><span class="annot"><span class="annottext">ScheduleControl
</span><span class="hs-identifier">_</span></span><span>                     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#False"><span class="hs-identifier hs-var">False</span></a></span><span>
</span><span id="line-153"></span><span>
</span><span id="line-154"></span><span class="hs-comment">-- | A schedule modification inserted at given execution step.</span><span>
</span><span id="line-155"></span><span class="hs-comment">--</span><span>
</span><span id="line-156"></span><span class="hs-keyword">data</span><span> </span><span id="ScheduleMod"><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#ScheduleMod"><span class="hs-identifier hs-var">ScheduleMod</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ScheduleMod"><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#ScheduleMod"><span class="hs-identifier hs-var">ScheduleMod</span></a></span></span><span class="hs-special">{</span><span>
</span><span id="line-157"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Step at which the 'ScheduleMod' is activated.</span></span><span>
</span><span id="line-158"></span><span>    </span><span id="scheduleModTarget"><span class="annot"><span class="annottext">ScheduleMod -&gt; StepId
</span><a href="Control.Monad.IOSimPOR.Types.html#scheduleModTarget"><span class="hs-identifier hs-var hs-var">scheduleModTarget</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.IOSim.CommonTypes.html#StepId"><span class="hs-identifier hs-type">StepId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-159"></span><span>    </span><span class="hs-comment">-- | 'ScheduleControl' at the activation step.  It is needed by</span><span>
</span><span id="line-160"></span><span>    </span><span class="hs-comment">-- 'extendScheduleControl' when combining the discovered schedule with the</span><span>
</span><span id="line-161"></span><span>    </span><span class="hs-comment">-- initial one.</span><span>
</span><span id="line-162"></span><span>    </span><span id="scheduleModControl"><span class="annot"><span class="annottext">ScheduleMod -&gt; ScheduleControl
</span><a href="Control.Monad.IOSimPOR.Types.html#scheduleModControl"><span class="hs-identifier hs-var hs-var">scheduleModControl</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#ScheduleControl"><span class="hs-identifier hs-type">ScheduleControl</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-163"></span><span>    </span><span class="hs-comment">-- | Series of steps which are executed at the target step.  This *includes*</span><span>
</span><span id="line-164"></span><span>    </span><span class="hs-comment">-- the target step, not necessarily as the last step.</span><span>
</span><span id="line-165"></span><span>    </span><span id="scheduleModInsertion"><span class="annot"><span class="annottext">ScheduleMod -&gt; [StepId]
</span><a href="Control.Monad.IOSimPOR.Types.html#scheduleModInsertion"><span class="hs-identifier hs-var hs-var">scheduleModInsertion</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Control.Monad.IOSim.CommonTypes.html#StepId"><span class="hs-identifier hs-type">StepId</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-166"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-167"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679133645"><span id="local-6989586621679133651"><span class="annot"><span class="annottext">ScheduleMod -&gt; ScheduleMod -&gt; Bool
(ScheduleMod -&gt; ScheduleMod -&gt; Bool)
-&gt; (ScheduleMod -&gt; ScheduleMod -&gt; Bool) -&gt; Eq ScheduleMod
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: ScheduleMod -&gt; ScheduleMod -&gt; Bool
== :: ScheduleMod -&gt; ScheduleMod -&gt; Bool
$c/= :: ScheduleMod -&gt; ScheduleMod -&gt; Bool
/= :: ScheduleMod -&gt; ScheduleMod -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Eq"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679133656"><span id="local-6989586621679133662"><span id="local-6989586621679133668"><span id="local-6989586621679133671"><span id="local-6989586621679133674"><span id="local-6989586621679133677"><span id="local-6989586621679133680"><span class="annot"><span class="annottext">Eq ScheduleMod
Eq ScheduleMod =&gt;
(ScheduleMod -&gt; ScheduleMod -&gt; Ordering)
-&gt; (ScheduleMod -&gt; ScheduleMod -&gt; Bool)
-&gt; (ScheduleMod -&gt; ScheduleMod -&gt; Bool)
-&gt; (ScheduleMod -&gt; ScheduleMod -&gt; Bool)
-&gt; (ScheduleMod -&gt; ScheduleMod -&gt; Bool)
-&gt; (ScheduleMod -&gt; ScheduleMod -&gt; ScheduleMod)
-&gt; (ScheduleMod -&gt; ScheduleMod -&gt; ScheduleMod)
-&gt; Ord ScheduleMod
ScheduleMod -&gt; ScheduleMod -&gt; Bool
ScheduleMod -&gt; ScheduleMod -&gt; Ordering
ScheduleMod -&gt; ScheduleMod -&gt; ScheduleMod
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: ScheduleMod -&gt; ScheduleMod -&gt; Ordering
compare :: ScheduleMod -&gt; ScheduleMod -&gt; Ordering
$c&lt; :: ScheduleMod -&gt; ScheduleMod -&gt; Bool
&lt; :: ScheduleMod -&gt; ScheduleMod -&gt; Bool
$c&lt;= :: ScheduleMod -&gt; ScheduleMod -&gt; Bool
&lt;= :: ScheduleMod -&gt; ScheduleMod -&gt; Bool
$c&gt; :: ScheduleMod -&gt; ScheduleMod -&gt; Bool
&gt; :: ScheduleMod -&gt; ScheduleMod -&gt; Bool
$c&gt;= :: ScheduleMod -&gt; ScheduleMod -&gt; Bool
&gt;= :: ScheduleMod -&gt; ScheduleMod -&gt; Bool
$cmax :: ScheduleMod -&gt; ScheduleMod -&gt; ScheduleMod
max :: ScheduleMod -&gt; ScheduleMod -&gt; ScheduleMod
$cmin :: ScheduleMod -&gt; ScheduleMod -&gt; ScheduleMod
min :: ScheduleMod -&gt; ScheduleMod -&gt; ScheduleMod
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#Ord"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></a></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-168"></span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679133684"><span id="local-6989586621679133687"><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#Show"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#ScheduleMod"><span class="hs-identifier hs-type">ScheduleMod</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-171"></span><span>  </span><span id="local-6989586621679133697"><span class="annot"><span class="annottext">showsPrec :: Int -&gt; ScheduleMod -&gt; ShowS
</span><a href="#local-6989586621679133697"><span class="hs-identifier hs-var hs-var hs-var hs-var">showsPrec</span></a></span></span><span> </span><span id="local-6989586621679133699"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679133699"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#ScheduleMod"><span class="hs-identifier hs-type">ScheduleMod</span></a></span><span> </span><span id="local-6989586621679133700"><span class="annot"><span class="annottext">StepId
</span><a href="#local-6989586621679133700"><span class="hs-identifier hs-var">tgt</span></a></span></span><span> </span><span id="local-6989586621679133701"><span class="annot"><span class="annottext">ScheduleControl
</span><a href="#local-6989586621679133701"><span class="hs-identifier hs-var">ctrl</span></a></span></span><span> </span><span id="local-6989586621679133702"><span class="annot"><span class="annottext">[StepId]
</span><a href="#local-6989586621679133702"><span class="hs-identifier hs-var">insertion</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-172"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; ShowS -&gt; ShowS
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#showParen"><span class="hs-identifier hs-var">showParen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679133699"><span class="hs-identifier hs-var">d</span></a></span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Classes.html#%3E"><span class="hs-operator hs-var">&gt;</span></a></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ShowS -&gt; ShowS) -&gt; ShowS -&gt; ShowS
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-173"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#showString"><span class="hs-identifier hs-var">showString</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ScheduleMod &quot;</span></span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span>
</span><span id="line-174"></span><span>      </span><span class="annot"><span class="annottext">Int -&gt; StepId -&gt; ShowS
forall a. Show a =&gt; Int -&gt; a -&gt; ShowS
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#showsPrec"><span class="hs-identifier hs-var">showsPrec</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">11</span></span><span> </span><span class="annot"><span class="annottext">StepId
</span><a href="#local-6989586621679133700"><span class="hs-identifier hs-var">tgt</span></a></span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span>
</span><span id="line-175"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#showString"><span class="hs-identifier hs-var">showString</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; &quot;</span></span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span>
</span><span id="line-176"></span><span>      </span><span class="annot"><span class="annottext">Int -&gt; ScheduleControl -&gt; ShowS
forall a. Show a =&gt; Int -&gt; a -&gt; ShowS
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#showsPrec"><span class="hs-identifier hs-var">showsPrec</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">11</span></span><span> </span><span class="annot"><span class="annottext">ScheduleControl
</span><a href="#local-6989586621679133701"><span class="hs-identifier hs-var">ctrl</span></a></span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span>
</span><span id="line-177"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#showString"><span class="hs-identifier hs-var">showString</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; &quot;</span></span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span>
</span><span id="line-178"></span><span>      </span><span class="annot"><span class="annottext">Int -&gt; [StepId] -&gt; ShowS
forall a. Show a =&gt; Int -&gt; a -&gt; ShowS
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#showsPrec"><span class="hs-identifier hs-var">showsPrec</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">11</span></span><span> </span><span class="annot"><span class="annottext">[StepId]
</span><a href="#local-6989586621679133702"><span class="hs-identifier hs-var">insertion</span></a></span><span>
</span><span id="line-179"></span><span>
</span><span id="line-180"></span><span class="hs-comment">--</span><span>
</span><span id="line-181"></span><span class="hs-comment">-- Steps</span><span>
</span><span id="line-182"></span><span class="hs-comment">--</span><span>
</span><span id="line-183"></span><span>
</span><span id="line-184"></span><span class="hs-keyword">data</span><span> </span><span id="Step"><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#Step"><span class="hs-identifier hs-var">Step</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Step"><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#Step"><span class="hs-identifier hs-var">Step</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-185"></span><span>    </span><span id="stepThreadId"><span class="annot"><span class="annottext">Step -&gt; IOSimThreadId
</span><a href="Control.Monad.IOSimPOR.Types.html#stepThreadId"><span class="hs-identifier hs-var hs-var">stepThreadId</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Control.Monad.IOSim.CommonTypes.html#IOSimThreadId"><span class="hs-identifier hs-type">IOSimThreadId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-186"></span><span>    </span><span id="stepStep"><span class="annot"><span class="annottext">Step -&gt; Int
</span><a href="Control.Monad.IOSimPOR.Types.html#stepStep"><span class="hs-identifier hs-var hs-var">stepStep</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/ghc-prim-0.10.0/src/GHC.Types.html#Int"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-187"></span><span>    </span><span id="stepEffect"><span class="annot"><span class="annottext">Step -&gt; Effect
</span><a href="Control.Monad.IOSimPOR.Types.html#stepEffect"><span class="hs-identifier hs-var hs-var">stepEffect</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#Effect"><span class="hs-identifier hs-type">Effect</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-188"></span><span>    </span><span id="stepVClock"><span class="annot"><span class="annottext">Step -&gt; VectorClock
</span><a href="Control.Monad.IOSimPOR.Types.html#stepVClock"><span class="hs-identifier hs-var hs-var">stepVClock</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Control.Monad.IOSim.CommonTypes.html#VectorClock"><span class="hs-identifier hs-type">VectorClock</span></a></span><span>
</span><span id="line-189"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-190"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679133713"><span id="local-6989586621679133721"><span id="local-6989586621679133725"><span class="annot"><span class="annottext">Int -&gt; Step -&gt; ShowS
[Step] -&gt; ShowS
Step -&gt; String
(Int -&gt; Step -&gt; ShowS)
-&gt; (Step -&gt; String) -&gt; ([Step] -&gt; ShowS) -&gt; Show Step
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; Step -&gt; ShowS
showsPrec :: Int -&gt; Step -&gt; ShowS
$cshow :: Step -&gt; String
show :: Step -&gt; String
$cshowList :: [Step] -&gt; ShowS
showList :: [Step] -&gt; ShowS
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span>
</span><span id="line-191"></span><span>
</span><span id="line-192"></span><span>
</span><span id="line-193"></span><span class="hs-comment">--</span><span>
</span><span id="line-194"></span><span class="hs-comment">-- StepInfo</span><span>
</span><span id="line-195"></span><span class="hs-comment">--</span><span>
</span><span id="line-196"></span><span>
</span><span id="line-197"></span><span class="hs-comment">-- | As we execute a simulation, we collect information about each step.  This</span><span>
</span><span id="line-198"></span><span class="hs-comment">-- information is updated as the simulation evolves by</span><span>
</span><span id="line-199"></span><span class="hs-comment">-- `Control.Monad.IOSimPOR.Types.updateRaces`.</span><span>
</span><span id="line-200"></span><span class="hs-comment">--</span><span>
</span><span id="line-201"></span><span class="hs-keyword">data</span><span> </span><span id="StepInfo"><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#StepInfo"><span class="hs-identifier hs-var">StepInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="StepInfo"><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#StepInfo"><span class="hs-identifier hs-var">StepInfo</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-202"></span><span>    </span><span class="hs-comment">-- | Step that we want to reschedule to run after a step in `stepInfoRaces`</span><span>
</span><span id="line-203"></span><span>    </span><span class="hs-comment">-- (there will be one schedule modification per step in</span><span>
</span><span id="line-204"></span><span>    </span><span class="hs-comment">-- `stepInfoRaces`).</span><span>
</span><span id="line-205"></span><span>    </span><span id="stepInfoStep"><span class="annot"><span class="annottext">StepInfo -&gt; Step
</span><a href="Control.Monad.IOSimPOR.Types.html#stepInfoStep"><span class="hs-identifier hs-var hs-var">stepInfoStep</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#Step"><span class="hs-identifier hs-type">Step</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-206"></span><span>
</span><span id="line-207"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Control information when we reached this step.</span></span><span>
</span><span id="line-208"></span><span>    </span><span id="stepInfoControl"><span class="annot"><span class="annottext">StepInfo -&gt; ScheduleControl
</span><a href="Control.Monad.IOSimPOR.Types.html#stepInfoControl"><span class="hs-identifier hs-var hs-var">stepInfoControl</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#ScheduleControl"><span class="hs-identifier hs-type">ScheduleControl</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-209"></span><span>
</span><span id="line-210"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Threads that are still concurrent with this step.</span></span><span>
</span><span id="line-211"></span><span>    </span><span id="stepInfoConcurrent"><span class="annot"><span class="annottext">StepInfo -&gt; Set IOSimThreadId
</span><a href="Control.Monad.IOSimPOR.Types.html#stepInfoConcurrent"><span class="hs-identifier hs-var hs-var">stepInfoConcurrent</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/containers-0.6.7/src/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="Control.Monad.IOSim.CommonTypes.html#IOSimThreadId"><span class="hs-identifier hs-type">IOSimThreadId</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-212"></span><span>
</span><span id="line-213"></span><span>    </span><span class="hs-comment">-- | Steps following this one that did not happen after it</span><span>
</span><span id="line-214"></span><span>    </span><span class="hs-comment">-- (in reverse order).</span><span>
</span><span id="line-215"></span><span>    </span><span id="stepInfoNonDep"><span class="annot"><span class="annottext">StepInfo -&gt; [Step]
</span><a href="Control.Monad.IOSimPOR.Types.html#stepInfoNonDep"><span class="hs-identifier hs-var hs-var">stepInfoNonDep</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#Step"><span class="hs-identifier hs-type">Step</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Later steps that race with `stepInfoStep`.</span></span><span>
</span><span id="line-218"></span><span>    </span><span id="stepInfoRaces"><span class="annot"><span class="annottext">StepInfo -&gt; [Step]
</span><a href="Control.Monad.IOSimPOR.Types.html#stepInfoRaces"><span class="hs-identifier hs-var hs-var">stepInfoRaces</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#Step"><span class="hs-identifier hs-type">Step</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-219"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-220"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679133734"><span id="local-6989586621679133743"><span id="local-6989586621679133747"><span class="annot"><span class="annottext">Int -&gt; StepInfo -&gt; ShowS
[StepInfo] -&gt; ShowS
StepInfo -&gt; String
(Int -&gt; StepInfo -&gt; ShowS)
-&gt; (StepInfo -&gt; String) -&gt; ([StepInfo] -&gt; ShowS) -&gt; Show StepInfo
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; StepInfo -&gt; ShowS
showsPrec :: Int -&gt; StepInfo -&gt; ShowS
$cshow :: StepInfo -&gt; String
show :: StepInfo -&gt; String
$cshowList :: [StepInfo] -&gt; ShowS
showList :: [StepInfo] -&gt; ShowS
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span>
</span><span id="line-221"></span><span>
</span><span id="line-222"></span><span class="hs-comment">--</span><span>
</span><span id="line-223"></span><span class="hs-comment">-- Races</span><span>
</span><span id="line-224"></span><span class="hs-comment">--</span><span>
</span><span id="line-225"></span><span>
</span><span id="line-226"></span><span class="hs-keyword">data</span><span> </span><span id="Races"><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#Races"><span class="hs-identifier hs-var">Races</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Races"><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#Races"><span class="hs-identifier hs-var">Races</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- These steps may still race with future steps</span><span>
</span><span id="line-227"></span><span>                     </span><span id="activeRaces"><span class="annot"><span class="annottext">Races -&gt; [StepInfo]
</span><a href="Control.Monad.IOSimPOR.Types.html#activeRaces"><span class="hs-identifier hs-var hs-var">activeRaces</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#StepInfo"><span class="hs-identifier hs-type">StepInfo</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-228"></span><span>                     </span><span class="hs-comment">-- These steps cannot be concurrent with future steps</span><span>
</span><span id="line-229"></span><span>                     </span><span id="completeRaces"><span class="annot"><span class="annottext">Races -&gt; [StepInfo]
</span><a href="Control.Monad.IOSimPOR.Types.html#completeRaces"><span class="hs-identifier hs-var hs-var">completeRaces</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#StepInfo"><span class="hs-identifier hs-type">StepInfo</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-230"></span><span>                   </span><span class="hs-special">}</span><span>
</span><span id="line-231"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679133753"><span id="local-6989586621679133759"><span id="local-6989586621679133763"><span class="annot"><span class="annottext">Int -&gt; Races -&gt; ShowS
[Races] -&gt; ShowS
Races -&gt; String
(Int -&gt; Races -&gt; ShowS)
-&gt; (Races -&gt; String) -&gt; ([Races] -&gt; ShowS) -&gt; Show Races
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; Races -&gt; ShowS
showsPrec :: Int -&gt; Races -&gt; ShowS
$cshow :: Races -&gt; String
show :: Races -&gt; String
$cshowList :: [Races] -&gt; ShowS
showList :: [Races] -&gt; ShowS
</span><a href="file:///nix/store/q976m622jbq42nf9zkhq5axjca5xj9w0-ghc-9.6.6-doc/share/doc/ghc-9.6.6/html/libraries/base-4.18.2.1/src/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span>
</span><span id="line-232"></span><span>
</span><span id="line-233"></span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#noRaces"><span class="hs-identifier hs-type">noRaces</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Monad.IOSimPOR.Types.html#Races"><span class="hs-identifier hs-type">Races</span></a></span><span>
</span><span id="line-234"></span><span id="noRaces"><span class="annot"><span class="annottext">noRaces :: Races
</span><a href="Control.Monad.IOSimPOR.Types.html#noRaces"><span class="hs-identifier hs-var hs-var">noRaces</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[StepInfo] -&gt; [StepInfo] -&gt; Races
</span><a href="Control.Monad.IOSimPOR.Types.html#Races"><span class="hs-identifier hs-var">Races</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-235"></span></pre></body></html>