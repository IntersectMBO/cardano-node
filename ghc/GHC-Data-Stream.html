<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>GHC.Data.Stream</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ghc-9.6.6: The GHC API</span><ul class="links" id="page-menu"><li><a href="src/GHC.Data.Stream.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">GHC.Data.Stream</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Monadic streams</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">newtype</span> <a href="#t:Stream">Stream</a> m a b = <a href="#v:Stream">Stream</a> {<ul class="subs"><li><a href="#v:runStreamInternal">runStreamInternal</a> :: <span class="keyword">forall</span> r' r. (a -&gt; m r') -&gt; (b -&gt; <a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m r' r) -&gt; <a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m r' r</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:StreamS">StreamS</a> m a b<ul class="subs"><li>= <a href="#v:Yield">Yield</a> a (<a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m a b)</li><li>| <a href="#v:Done">Done</a> b</li><li>| <a href="#v:Effect">Effect</a> (m (<a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m a b))</li></ul></li><li class="src short"><a href="#v:runStream">runStream</a> :: <a href="GHC-Utils-Monad.html#t:Applicative" title="GHC.Utils.Monad">Applicative</a> m =&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m r' r -&gt; <a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m r' r</li><li class="src short"><a href="#v:yield">yield</a> :: <a href="GHC-Prelude-Basic.html#t:Monad" title="GHC.Prelude.Basic">Monad</a> m =&gt; a -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a ()</li><li class="src short"><a href="#v:liftIO">liftIO</a> :: <a href="GHC-Utils-Monad.html#t:MonadIO" title="GHC.Utils.Monad">MonadIO</a> m =&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> a -&gt; m a</li><li class="src short"><a href="#v:collect">collect</a> :: <a href="GHC-Prelude-Basic.html#t:Monad" title="GHC.Prelude.Basic">Monad</a> m =&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a () -&gt; m [a]</li><li class="src short"><a href="#v:consume">consume</a> :: (<a href="GHC-Prelude-Basic.html#t:Monad" title="GHC.Prelude.Basic">Monad</a> m, <a href="GHC-Prelude-Basic.html#t:Monad" title="GHC.Prelude.Basic">Monad</a> n) =&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a b -&gt; (<span class="keyword">forall</span> a. m a -&gt; n a) -&gt; (a -&gt; n ()) -&gt; n b</li><li class="src short"><a href="#v:fromList">fromList</a> :: <a href="GHC-Prelude-Basic.html#t:Monad" title="GHC.Prelude.Basic">Monad</a> m =&gt; [a] -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a ()</li><li class="src short"><a href="#v:map">map</a> :: <a href="GHC-Prelude-Basic.html#t:Monad" title="GHC.Prelude.Basic">Monad</a> m =&gt; (a -&gt; b) -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a x -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m b x</li><li class="src short"><a href="#v:mapM">mapM</a> :: <a href="GHC-Prelude-Basic.html#t:Monad" title="GHC.Prelude.Basic">Monad</a> m =&gt; (a -&gt; m b) -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a x -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m b x</li><li class="src short"><a href="#v:mapAccumL_">mapAccumL_</a> :: <span class="keyword">forall</span> m a b c r. <a href="GHC-Prelude-Basic.html#t:Monad" title="GHC.Prelude.Basic">Monad</a> m =&gt; (c -&gt; a -&gt; m (c, b)) -&gt; c -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a r -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m b (c, r)</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:Stream" class="def">Stream</a> m a b <a href="src/GHC.Data.Stream.html#Stream" class="link">Source</a> <a href="#t:Stream" class="selflink">#</a></p><div class="doc"><p><code>Stream m a b</code> is a computation in some Monad <code>m</code> that delivers a sequence
 of elements of type <code>a</code> followed by a result of type <code>b</code>.</p><p>More concretely, a value of type <code>Stream m a b</code> can be run using <code>runStreamInternal</code>
 in the Monad <code>m</code>, and it delivers either</p><ul><li>the final result: <code>Done b</code>, or</li><li><code>Yield a str</code> where <code>a</code> is the next element in the stream, and <code>str</code>
     is the rest of the stream</li><li><code>Effect mstr</code> where <code>mstr</code> is some action running in <code>m</code> which
  generates the rest of the stream.</li></ul><p>Stream is itself a Monad, and provides an operation <code><a href="GHC-Data-Stream.html#v:yield" title="GHC.Data.Stream">yield</a></code> that
 produces a new element of the stream.  This makes it convenient to turn
 existing monadic computations into streams.</p><p>The idea is that Stream is useful for making a monadic computation
 that produces values from time to time.  This can be used for
 knitting together two complex monadic operations, so that the
 producer does not have to produce all its values before the
 consumer starts consuming them.  We make the producer into a
 Stream, and the consumer pulls on the stream each time it wants a
 new value.</p><p><code><a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a></code> is implemented in the &quot;yoneda&quot; style for efficiency. By
 representing a stream in this manner <code><a href="GHC-Prelude-Basic.html#v:fmap" title="GHC.Prelude.Basic">fmap</a></code> and <code><a href="GHC-Prelude-Basic.html#v:-62--62--61-" title="GHC.Prelude.Basic">&gt;&gt;=</a></code> operations are
 accumulated in the function parameters before being applied once when
 the stream is destroyed. In the old implementation each usage of <code><a href="GHC-Data-Stream.html#v:mapM" title="GHC.Data.Stream">mapM</a></code>
 and <code><a href="GHC-Prelude-Basic.html#v:-62--62--61-" title="GHC.Prelude.Basic">&gt;&gt;=</a></code> would traverse the entire stream in order to apply the
 substitution at the leaves.</p><p>The &gt;&gt;= operation for <code><a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a></code> was a hot-spot in the ticky profile for
 the <a href="ManyConstructors.html">ManyConstructors</a> test which called the <code>cg</code> function many times in
 <code>StgToCmm.hs</code></p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Stream" class="def">Stream</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:runStreamInternal" class="def">runStreamInternal</a> :: <span class="keyword">forall</span> r' r. (a -&gt; m r') -&gt; (b -&gt; <a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m r' r) -&gt; <a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m r' r</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Stream">Instances</h4><details id="i:Stream" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Stream:MonadIO:1"></span> <a href="GHC-Utils-Monad.html#t:MonadIO" title="GHC.Utils.Monad">MonadIO</a> m =&gt; <a href="GHC-Utils-Monad.html#t:MonadIO" title="GHC.Utils.Monad">MonadIO</a> (<a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m b)</span> <a href="src/GHC.Data.Stream.html#line-92" class="link">Source</a> <a href="#t:Stream" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Stream:MonadIO:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Data-Stream.html">GHC.Data.Stream</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:liftIO">liftIO</a> :: <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> a -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m b a <a href="../base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO" class="link">Source</a> <a href="#v:liftIO" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Stream:Applicative:2"></span> <a href="GHC-Utils-Monad.html#t:Applicative" title="GHC.Utils.Monad">Applicative</a> (<a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a)</span> <a href="src/GHC.Data.Stream.html#line-85" class="link">Source</a> <a href="#t:Stream" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Stream:Applicative:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Data-Stream.html">GHC.Data.Stream</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a0 -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a a0 <a href="../base-4.18.2.1/src/GHC.Base.html#pure" class="link">Source</a> <a href="#v:pure" class="selflink">#</a></p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a (a0 -&gt; b) -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a a0 -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a b <a href="../base-4.18.2.1/src/GHC.Base.html#%3C%2A%3E" class="link">Source</a> <a href="#v:-60--42--62-" class="selflink">#</a></p><p class="src"><a href="#v:liftA2">liftA2</a> :: (a0 -&gt; b -&gt; c) -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a a0 -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a b -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a c <a href="../base-4.18.2.1/src/GHC.Base.html#liftA2" class="link">Source</a> <a href="#v:liftA2" class="selflink">#</a></p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a a0 -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a b -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a b <a href="../base-4.18.2.1/src/GHC.Base.html#%2A%3E" class="link">Source</a> <a href="#v:-42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a a0 -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a b -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a a0 <a href="../base-4.18.2.1/src/GHC.Base.html#%3C%2A" class="link">Source</a> <a href="#v:-60--42-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Stream:Functor:3"></span> <a href="GHC-Prelude-Basic.html#t:Functor" title="GHC.Prelude.Basic">Functor</a> (<a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> f a)</span> <a href="src/GHC.Data.Stream.html#line-82" class="link">Source</a> <a href="#t:Stream" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Stream:Functor:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Data-Stream.html">GHC.Data.Stream</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a0 -&gt; b) -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> f a a0 -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> f a b <a href="../base-4.18.2.1/src/GHC.Base.html#fmap" class="link">Source</a> <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a0 -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> f a b -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> f a a0 <a href="../base-4.18.2.1/src/GHC.Base.html#%3C%24" class="link">Source</a> <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Stream:Monad:4"></span> <a href="GHC-Prelude-Basic.html#t:Monad" title="GHC.Prelude.Basic">Monad</a> (<a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a)</span> <a href="src/GHC.Data.Stream.html#line-89" class="link">Source</a> <a href="#t:Stream" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Stream:Monad:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Data-Stream.html">GHC.Data.Stream</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> :: <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a a0 -&gt; (a0 -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a b) -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a b <a href="../base-4.18.2.1/src/GHC.Base.html#%3E%3E%3D" class="link">Source</a> <a href="#v:-62--62--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> :: <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a a0 -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a b -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a b <a href="../base-4.18.2.1/src/GHC.Base.html#%3E%3E" class="link">Source</a> <a href="#v:-62--62-" class="selflink">#</a></p><p class="src"><a href="#v:return">return</a> :: a0 -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a a0 <a href="../base-4.18.2.1/src/GHC.Base.html#return" class="link">Source</a> <a href="#v:return" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:StreamS" class="def">StreamS</a> m a b <a href="src/GHC.Data.Stream.html#StreamS" class="link">Source</a> <a href="#t:StreamS" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Yield" class="def">Yield</a> a (<a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m a b)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Done" class="def">Done</a> b</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Effect" class="def">Effect</a> (m (<a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m a b))</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:StreamS">Instances</h4><details id="i:StreamS" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:StreamS:Applicative:1"></span> <a href="GHC-Prelude-Basic.html#t:Monad" title="GHC.Prelude.Basic">Monad</a> m =&gt; <a href="GHC-Utils-Monad.html#t:Applicative" title="GHC.Utils.Monad">Applicative</a> (<a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m a)</span> <a href="src/GHC.Data.Stream.html#line-72" class="link">Source</a> <a href="#t:StreamS" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:StreamS:Applicative:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Data-Stream.html">GHC.Data.Stream</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a0 -&gt; <a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m a a0 <a href="../base-4.18.2.1/src/GHC.Base.html#pure" class="link">Source</a> <a href="#v:pure" class="selflink">#</a></p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m a (a0 -&gt; b) -&gt; <a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m a a0 -&gt; <a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m a b <a href="../base-4.18.2.1/src/GHC.Base.html#%3C%2A%3E" class="link">Source</a> <a href="#v:-60--42--62-" class="selflink">#</a></p><p class="src"><a href="#v:liftA2">liftA2</a> :: (a0 -&gt; b -&gt; c) -&gt; <a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m a a0 -&gt; <a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m a b -&gt; <a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m a c <a href="../base-4.18.2.1/src/GHC.Base.html#liftA2" class="link">Source</a> <a href="#v:liftA2" class="selflink">#</a></p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m a a0 -&gt; <a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m a b -&gt; <a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m a b <a href="../base-4.18.2.1/src/GHC.Base.html#%2A%3E" class="link">Source</a> <a href="#v:-42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m a a0 -&gt; <a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m a b -&gt; <a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m a a0 <a href="../base-4.18.2.1/src/GHC.Base.html#%3C%2A" class="link">Source</a> <a href="#v:-60--42-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:StreamS:Functor:2"></span> <a href="GHC-Prelude-Basic.html#t:Functor" title="GHC.Prelude.Basic">Functor</a> m =&gt; <a href="GHC-Prelude-Basic.html#t:Functor" title="GHC.Prelude.Basic">Functor</a> (<a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m a)</span> <a href="src/GHC.Data.Stream.html#line-70" class="link">Source</a> <a href="#t:StreamS" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:StreamS:Functor:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Data-Stream.html">GHC.Data.Stream</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a0 -&gt; b) -&gt; <a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m a a0 -&gt; <a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m a b <a href="../base-4.18.2.1/src/GHC.Base.html#fmap" class="link">Source</a> <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a0 -&gt; <a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m a b -&gt; <a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m a a0 <a href="../base-4.18.2.1/src/GHC.Base.html#%3C%24" class="link">Source</a> <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:StreamS:Monad:3"></span> <a href="GHC-Prelude-Basic.html#t:Monad" title="GHC.Prelude.Basic">Monad</a> m =&gt; <a href="GHC-Prelude-Basic.html#t:Monad" title="GHC.Prelude.Basic">Monad</a> (<a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m a)</span> <a href="src/GHC.Data.Stream.html#line-76" class="link">Source</a> <a href="#t:StreamS" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:StreamS:Monad:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Data-Stream.html">GHC.Data.Stream</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> :: <a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m a a0 -&gt; (a0 -&gt; <a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m a b) -&gt; <a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m a b <a href="../base-4.18.2.1/src/GHC.Base.html#%3E%3E%3D" class="link">Source</a> <a href="#v:-62--62--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> :: <a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m a a0 -&gt; <a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m a b -&gt; <a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m a b <a href="../base-4.18.2.1/src/GHC.Base.html#%3E%3E" class="link">Source</a> <a href="#v:-62--62-" class="selflink">#</a></p><p class="src"><a href="#v:return">return</a> :: a0 -&gt; <a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m a a0 <a href="../base-4.18.2.1/src/GHC.Base.html#return" class="link">Source</a> <a href="#v:return" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:runStream" class="def">runStream</a> :: <a href="GHC-Utils-Monad.html#t:Applicative" title="GHC.Utils.Monad">Applicative</a> m =&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m r' r -&gt; <a href="GHC-Data-Stream.html#t:StreamS" title="GHC.Data.Stream">StreamS</a> m r' r <a href="src/GHC.Data.Stream.html#runStream" class="link">Source</a> <a href="#v:runStream" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:yield" class="def">yield</a> :: <a href="GHC-Prelude-Basic.html#t:Monad" title="GHC.Prelude.Basic">Monad</a> m =&gt; a -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a () <a href="src/GHC.Data.Stream.html#yield" class="link">Source</a> <a href="#v:yield" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:liftIO" class="def">liftIO</a> :: <a href="GHC-Utils-Monad.html#t:MonadIO" title="GHC.Utils.Monad">MonadIO</a> m =&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> a -&gt; m a <a href="../base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO" class="link">Source</a> <a href="#v:liftIO" class="selflink">#</a></p><div class="doc"><p>Lift a computation from the <code><a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a></code> monad.
 This allows us to run IO computations in any monadic stack, so long as it supports these kinds of operations
 (i.e. <code><a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a></code> is the base monad for the stack).</p><h3 class="subheading details-toggle-control details-toggle" data-details-id="ch:liftIO0">Example</h3><details id="ch:liftIO0"><summary class="hide-when-js-enabled">Expand</summary><pre>import Control.Monad.Trans.State -- from the &quot;transformers&quot; library

printState :: Show s =&gt; StateT s IO ()
printState = do
  state &lt;- get
  liftIO $ print state</pre><p>Had we omitted <code><code><a href="GHC-Data-Stream.html#v:liftIO" title="GHC.Data.Stream">liftIO</a></code></code>, we would have ended up with this error:</p><pre>&#8226; Couldn't match type &#8216;IO&#8217; with &#8216;StateT s IO&#8217;
 Expected type: StateT s IO ()
   Actual type: IO ()</pre><p>The important part here is the mismatch between <code>StateT s IO ()</code> and <code><code><a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a></code> ()</code>.</p><p>Luckily, we know of a function that takes an <code><code><a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a></code> a</code> and returns an <code>(m a)</code>: <code><code><a href="GHC-Data-Stream.html#v:liftIO" title="GHC.Data.Stream">liftIO</a></code></code>,
 enabling us to run the program and see the expected results:</p><pre>&gt; evalStateT printState &quot;hello&quot;
&quot;hello&quot;

&gt; evalStateT printState 3
3
</pre></details></div></div><div class="top"><p class="src"><a id="v:collect" class="def">collect</a> :: <a href="GHC-Prelude-Basic.html#t:Monad" title="GHC.Prelude.Basic">Monad</a> m =&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a () -&gt; m [a] <a href="src/GHC.Data.Stream.html#collect" class="link">Source</a> <a href="#v:collect" class="selflink">#</a></p><div class="doc"><p>Turn a Stream into an ordinary list, by demanding all the elements.</p></div></div><div class="top"><p class="src"><a id="v:consume" class="def">consume</a> :: (<a href="GHC-Prelude-Basic.html#t:Monad" title="GHC.Prelude.Basic">Monad</a> m, <a href="GHC-Prelude-Basic.html#t:Monad" title="GHC.Prelude.Basic">Monad</a> n) =&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a b -&gt; (<span class="keyword">forall</span> a. m a -&gt; n a) -&gt; (a -&gt; n ()) -&gt; n b <a href="src/GHC.Data.Stream.html#consume" class="link">Source</a> <a href="#v:consume" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:fromList" class="def">fromList</a> :: <a href="GHC-Prelude-Basic.html#t:Monad" title="GHC.Prelude.Basic">Monad</a> m =&gt; [a] -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a () <a href="src/GHC.Data.Stream.html#fromList" class="link">Source</a> <a href="#v:fromList" class="selflink">#</a></p><div class="doc"><p>Turn a list into a <code><a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a></code>, by yielding each element in turn.</p></div></div><div class="top"><p class="src"><a id="v:map" class="def">map</a> :: <a href="GHC-Prelude-Basic.html#t:Monad" title="GHC.Prelude.Basic">Monad</a> m =&gt; (a -&gt; b) -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a x -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m b x <a href="src/GHC.Data.Stream.html#map" class="link">Source</a> <a href="#v:map" class="selflink">#</a></p><div class="doc"><p>Apply a function to each element of a <code><a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a></code>, lazily</p></div></div><div class="top"><p class="src"><a id="v:mapM" class="def">mapM</a> :: <a href="GHC-Prelude-Basic.html#t:Monad" title="GHC.Prelude.Basic">Monad</a> m =&gt; (a -&gt; m b) -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a x -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m b x <a href="src/GHC.Data.Stream.html#mapM" class="link">Source</a> <a href="#v:mapM" class="selflink">#</a></p><div class="doc"><p>Apply a monadic operation to each element of a <code><a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a></code>, lazily</p></div></div><div class="top"><p class="src"><a id="v:mapAccumL_" class="def">mapAccumL_</a> :: <span class="keyword">forall</span> m a b c r. <a href="GHC-Prelude-Basic.html#t:Monad" title="GHC.Prelude.Basic">Monad</a> m =&gt; (c -&gt; a -&gt; m (c, b)) -&gt; c -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m a r -&gt; <a href="GHC-Data-Stream.html#t:Stream" title="GHC.Data.Stream">Stream</a> m b (c, r) <a href="src/GHC.Data.Stream.html#mapAccumL_" class="link">Source</a> <a href="#v:mapAccumL_" class="selflink">#</a></p><div class="doc"><p>Note this is not very efficient because it traverses the whole stream
 before rebuilding it, avoid using it if you can. mapAccumL used to
 implemented but it wasn't used anywhere in the compiler and has similar
 efficiency problems.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>