<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>GHC.StgToJS.Ids</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ghc-9.6.7: The GHC API</span><ul class="links" id="page-menu"><li><a href="src/GHC.StgToJS.Ids.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) The University of Glasgow 2001</td></tr><tr><th>License</th><td>BSD-style (see the file LICENSE)</td></tr><tr><th>Maintainer</th><td>Jeffrey Young  &lt;jeffrey.young@iohk.io&gt;
                Luite Stegeman &lt;luite.stegeman@iohk.io&gt;
                Sylvain Henry  &lt;sylvain.henry@iohk.io&gt;
                Josh Meredith  &lt;josh.meredith@iohk.io&gt;</td></tr><tr><th>Stability</th><td>experimental

  Module to deal with JS identifiers</td></tr><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">GHC.StgToJS.Ids</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Helpers for Idents</a></li><li><a href="#g:2">Helpers for variables</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc empty">&nbsp;</div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:freshUnique">freshUnique</a> :: <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> <a href="GHC-Prelude-Basic.html#t:Int" title="GHC.Prelude.Basic">Int</a></li><li class="src short"><a href="#v:freshIdent">freshIdent</a> :: <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> <a href="GHC-JS-Syntax.html#t:Ident" title="GHC.JS.Syntax">Ident</a></li><li class="src short"><a href="#v:makeIdentForId">makeIdentForId</a> :: <a href="GHC-Types-Var.html#t:Id" title="GHC.Types.Var">Id</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Prelude-Basic.html#t:Int" title="GHC.Prelude.Basic">Int</a> -&gt; <a href="GHC-StgToJS-Types.html#t:IdType" title="GHC.StgToJS.Types">IdType</a> -&gt; <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a> -&gt; <a href="GHC-JS-Syntax.html#t:Ident" title="GHC.JS.Syntax">Ident</a></li><li class="src short"><a href="#v:cachedIdentForId">cachedIdentForId</a> :: <a href="GHC-Types-Var.html#t:Id" title="GHC.Types.Var">Id</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Prelude-Basic.html#t:Int" title="GHC.Prelude.Basic">Int</a> -&gt; <a href="GHC-StgToJS-Types.html#t:IdType" title="GHC.StgToJS.Types">IdType</a> -&gt; <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> <a href="GHC-JS-Syntax.html#t:Ident" title="GHC.JS.Syntax">Ident</a></li><li class="src short"><a href="#v:identForId">identForId</a> :: <a href="GHC-Types-Var.html#t:Id" title="GHC.Types.Var">Id</a> -&gt; <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> <a href="GHC-JS-Syntax.html#t:Ident" title="GHC.JS.Syntax">Ident</a></li><li class="src short"><a href="#v:identForIdN">identForIdN</a> :: <a href="GHC-Types-Var.html#t:Id" title="GHC.Types.Var">Id</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Int" title="GHC.Prelude.Basic">Int</a> -&gt; <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> <a href="GHC-JS-Syntax.html#t:Ident" title="GHC.JS.Syntax">Ident</a></li><li class="src short"><a href="#v:identsForId">identsForId</a> :: <a href="GHC-Types-Var.html#t:Id" title="GHC.Types.Var">Id</a> -&gt; <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> [<a href="GHC-JS-Syntax.html#t:Ident" title="GHC.JS.Syntax">Ident</a>]</li><li class="src short"><a href="#v:identForEntryId">identForEntryId</a> :: <a href="GHC-Types-Var.html#t:Id" title="GHC.Types.Var">Id</a> -&gt; <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> <a href="GHC-JS-Syntax.html#t:Ident" title="GHC.JS.Syntax">Ident</a></li><li class="src short"><a href="#v:identForDataConEntryId">identForDataConEntryId</a> :: <a href="GHC-Types-Var.html#t:Id" title="GHC.Types.Var">Id</a> -&gt; <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> <a href="GHC-JS-Syntax.html#t:Ident" title="GHC.JS.Syntax">Ident</a></li><li class="src short"><a href="#v:identForDataConWorker">identForDataConWorker</a> :: <a href="GHC-Core-DataCon.html#t:DataCon" title="GHC.Core.DataCon">DataCon</a> -&gt; <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> <a href="GHC-JS-Syntax.html#t:Ident" title="GHC.JS.Syntax">Ident</a></li><li class="src short"><a href="#v:varForId">varForId</a> :: <a href="GHC-Types-Var.html#t:Id" title="GHC.Types.Var">Id</a> -&gt; <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> <a href="GHC-JS-Syntax.html#t:JExpr" title="GHC.JS.Syntax">JExpr</a></li><li class="src short"><a href="#v:varForIdN">varForIdN</a> :: <a href="GHC-Types-Var.html#t:Id" title="GHC.Types.Var">Id</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Int" title="GHC.Prelude.Basic">Int</a> -&gt; <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> <a href="GHC-JS-Syntax.html#t:JExpr" title="GHC.JS.Syntax">JExpr</a></li><li class="src short"><a href="#v:varsForId">varsForId</a> :: <a href="GHC-Types-Var.html#t:Id" title="GHC.Types.Var">Id</a> -&gt; <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> [<a href="GHC-JS-Syntax.html#t:JExpr" title="GHC.JS.Syntax">JExpr</a>]</li><li class="src short"><a href="#v:varForEntryId">varForEntryId</a> :: <a href="GHC-Types-Var.html#t:Id" title="GHC.Types.Var">Id</a> -&gt; <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> <a href="GHC-JS-Syntax.html#t:JExpr" title="GHC.JS.Syntax">JExpr</a></li><li class="src short"><a href="#v:varForDataConEntryId">varForDataConEntryId</a> :: <a href="GHC-Types-Var.html#t:Id" title="GHC.Types.Var">Id</a> -&gt; <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> <a href="GHC-JS-Syntax.html#t:JExpr" title="GHC.JS.Syntax">JExpr</a></li><li class="src short"><a href="#v:varForDataConWorker">varForDataConWorker</a> :: <a href="GHC-Core-DataCon.html#t:DataCon" title="GHC.Core.DataCon">DataCon</a> -&gt; <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> <a href="GHC-JS-Syntax.html#t:JExpr" title="GHC.JS.Syntax">JExpr</a></li><li class="src short"><a href="#v:declVarsForId">declVarsForId</a> :: <a href="GHC-Types-Var.html#t:Id" title="GHC.Types.Var">Id</a> -&gt; <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> <a href="GHC-JS-Syntax.html#t:JStat" title="GHC.JS.Syntax">JStat</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:freshUnique" class="def">freshUnique</a> :: <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> <a href="GHC-Prelude-Basic.html#t:Int" title="GHC.Prelude.Basic">Int</a> <a href="src/GHC.StgToJS.Ids.html#freshUnique" class="link">Source</a> <a href="#v:freshUnique" class="selflink">#</a></p><div class="doc"><p>Get fresh unique number</p></div></div><div class="top"><p class="src"><a id="v:freshIdent" class="def">freshIdent</a> :: <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> <a href="GHC-JS-Syntax.html#t:Ident" title="GHC.JS.Syntax">Ident</a> <a href="src/GHC.StgToJS.Ids.html#freshIdent" class="link">Source</a> <a href="#v:freshIdent" class="selflink">#</a></p><div class="doc"><p>Get fresh local Ident of the form: h$$unit:module_uniq</p></div></div><div class="top"><p class="src"><a id="v:makeIdentForId" class="def">makeIdentForId</a> :: <a href="GHC-Types-Var.html#t:Id" title="GHC.Types.Var">Id</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Prelude-Basic.html#t:Int" title="GHC.Prelude.Basic">Int</a> -&gt; <a href="GHC-StgToJS-Types.html#t:IdType" title="GHC.StgToJS.Types">IdType</a> -&gt; <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a> -&gt; <a href="GHC-JS-Syntax.html#t:Ident" title="GHC.JS.Syntax">Ident</a> <a href="src/GHC.StgToJS.Ids.html#makeIdentForId" class="link">Source</a> <a href="#v:makeIdentForId" class="selflink">#</a></p><div class="doc"><p>Generate unique Ident for the given ID (uncached!)</p><p>The ident has the following forms:</p><p>global Id: h$unit:module.name[_num][_type_suffix]
    local Id: h$$unit:module.name[_num][_type_suffix]_uniq</p><p>Note that the string is z-encoded except for &quot;_&quot; delimiters.</p><p>Optional &quot;_type_suffix&quot; can be:
  - &quot;_e&quot; for IdEntry
  - &quot;_con_e&quot; for IdConEntry</p><p>Optional &quot;_num&quot; is passed as an argument to this function. It is used for
 Haskell Ids that require several JS variables: e.g. 64-bit numbers (Word64#,
 Int64#), Addr#, StablePtr#, unboxed tuples, etc.</p></div></div><div class="top"><p class="src"><a id="v:cachedIdentForId" class="def">cachedIdentForId</a> :: <a href="GHC-Types-Var.html#t:Id" title="GHC.Types.Var">Id</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Prelude-Basic.html#t:Int" title="GHC.Prelude.Basic">Int</a> -&gt; <a href="GHC-StgToJS-Types.html#t:IdType" title="GHC.StgToJS.Types">IdType</a> -&gt; <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> <a href="GHC-JS-Syntax.html#t:Ident" title="GHC.JS.Syntax">Ident</a> <a href="src/GHC.StgToJS.Ids.html#cachedIdentForId" class="link">Source</a> <a href="#v:cachedIdentForId" class="selflink">#</a></p><div class="doc"><p>Retrieve the cached Ident for the given Id if there is one. Otherwise make
 a new one with <code><a href="GHC-StgToJS-Ids.html#v:makeIdentForId" title="GHC.StgToJS.Ids">makeIdentForId</a></code> and cache it.</p></div></div><a href="#g:1" id="g:1"><h1>Helpers for Idents</h1></a><div class="top"><p class="src"><a id="v:identForId" class="def">identForId</a> :: <a href="GHC-Types-Var.html#t:Id" title="GHC.Types.Var">Id</a> -&gt; <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> <a href="GHC-JS-Syntax.html#t:Ident" title="GHC.JS.Syntax">Ident</a> <a href="src/GHC.StgToJS.Ids.html#identForId" class="link">Source</a> <a href="#v:identForId" class="selflink">#</a></p><div class="doc"><p>Retrieve default Ident for the given Id</p></div></div><div class="top"><p class="src"><a id="v:identForIdN" class="def">identForIdN</a> :: <a href="GHC-Types-Var.html#t:Id" title="GHC.Types.Var">Id</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Int" title="GHC.Prelude.Basic">Int</a> -&gt; <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> <a href="GHC-JS-Syntax.html#t:Ident" title="GHC.JS.Syntax">Ident</a> <a href="src/GHC.StgToJS.Ids.html#identForIdN" class="link">Source</a> <a href="#v:identForIdN" class="selflink">#</a></p><div class="doc"><p>Retrieve default Ident for the given Id with sub index</p><p>Some types, Word64, Addr#, unboxed tuple have more than one corresponding JS
 var, hence we use the sub index to identify each subpart / JS variable.</p></div></div><div class="top"><p class="src"><a id="v:identsForId" class="def">identsForId</a> :: <a href="GHC-Types-Var.html#t:Id" title="GHC.Types.Var">Id</a> -&gt; <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> [<a href="GHC-JS-Syntax.html#t:Ident" title="GHC.JS.Syntax">Ident</a>] <a href="src/GHC.StgToJS.Ids.html#identsForId" class="link">Source</a> <a href="#v:identsForId" class="selflink">#</a></p><div class="doc"><p>Retrieve all the idents for the given Id.</p></div></div><div class="top"><p class="src"><a id="v:identForEntryId" class="def">identForEntryId</a> :: <a href="GHC-Types-Var.html#t:Id" title="GHC.Types.Var">Id</a> -&gt; <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> <a href="GHC-JS-Syntax.html#t:Ident" title="GHC.JS.Syntax">Ident</a> <a href="src/GHC.StgToJS.Ids.html#identForEntryId" class="link">Source</a> <a href="#v:identForEntryId" class="selflink">#</a></p><div class="doc"><p>Retrieve entry Ident for the given Id</p></div></div><div class="top"><p class="src"><a id="v:identForDataConEntryId" class="def">identForDataConEntryId</a> :: <a href="GHC-Types-Var.html#t:Id" title="GHC.Types.Var">Id</a> -&gt; <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> <a href="GHC-JS-Syntax.html#t:Ident" title="GHC.JS.Syntax">Ident</a> <a href="src/GHC.StgToJS.Ids.html#identForDataConEntryId" class="link">Source</a> <a href="#v:identForDataConEntryId" class="selflink">#</a></p><div class="doc"><p>Retrieve datacon entry Ident for the given Id</p><p>Different name than the datacon wrapper.</p></div></div><div class="top"><p class="src"><a id="v:identForDataConWorker" class="def">identForDataConWorker</a> :: <a href="GHC-Core-DataCon.html#t:DataCon" title="GHC.Core.DataCon">DataCon</a> -&gt; <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> <a href="GHC-JS-Syntax.html#t:Ident" title="GHC.JS.Syntax">Ident</a> <a href="src/GHC.StgToJS.Ids.html#identForDataConWorker" class="link">Source</a> <a href="#v:identForDataConWorker" class="selflink">#</a></p><div class="doc"><p>Retrieve datacon worker entry variable name for the given datacon</p></div></div><a href="#g:2" id="g:2"><h1>Helpers for variables</h1></a><div class="top"><p class="src"><a id="v:varForId" class="def">varForId</a> :: <a href="GHC-Types-Var.html#t:Id" title="GHC.Types.Var">Id</a> -&gt; <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> <a href="GHC-JS-Syntax.html#t:JExpr" title="GHC.JS.Syntax">JExpr</a> <a href="src/GHC.StgToJS.Ids.html#varForId" class="link">Source</a> <a href="#v:varForId" class="selflink">#</a></p><div class="doc"><p>Retrieve default variable name for the given Id</p></div></div><div class="top"><p class="src"><a id="v:varForIdN" class="def">varForIdN</a> :: <a href="GHC-Types-Var.html#t:Id" title="GHC.Types.Var">Id</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Int" title="GHC.Prelude.Basic">Int</a> -&gt; <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> <a href="GHC-JS-Syntax.html#t:JExpr" title="GHC.JS.Syntax">JExpr</a> <a href="src/GHC.StgToJS.Ids.html#varForIdN" class="link">Source</a> <a href="#v:varForIdN" class="selflink">#</a></p><div class="doc"><p>Retrieve default variable name for the given Id with sub index</p></div></div><div class="top"><p class="src"><a id="v:varsForId" class="def">varsForId</a> :: <a href="GHC-Types-Var.html#t:Id" title="GHC.Types.Var">Id</a> -&gt; <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> [<a href="GHC-JS-Syntax.html#t:JExpr" title="GHC.JS.Syntax">JExpr</a>] <a href="src/GHC.StgToJS.Ids.html#varsForId" class="link">Source</a> <a href="#v:varsForId" class="selflink">#</a></p><div class="doc"><p>Retrieve all the JS vars for the given Id</p></div></div><div class="top"><p class="src"><a id="v:varForEntryId" class="def">varForEntryId</a> :: <a href="GHC-Types-Var.html#t:Id" title="GHC.Types.Var">Id</a> -&gt; <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> <a href="GHC-JS-Syntax.html#t:JExpr" title="GHC.JS.Syntax">JExpr</a> <a href="src/GHC.StgToJS.Ids.html#varForEntryId" class="link">Source</a> <a href="#v:varForEntryId" class="selflink">#</a></p><div class="doc"><p>Retrieve entry variable name for the given Id</p></div></div><div class="top"><p class="src"><a id="v:varForDataConEntryId" class="def">varForDataConEntryId</a> :: <a href="GHC-Types-Var.html#t:Id" title="GHC.Types.Var">Id</a> -&gt; <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> <a href="GHC-JS-Syntax.html#t:JExpr" title="GHC.JS.Syntax">JExpr</a> <a href="src/GHC.StgToJS.Ids.html#varForDataConEntryId" class="link">Source</a> <a href="#v:varForDataConEntryId" class="selflink">#</a></p><div class="doc"><p>Retrieve datacon entry variable name for the given Id</p></div></div><div class="top"><p class="src"><a id="v:varForDataConWorker" class="def">varForDataConWorker</a> :: <a href="GHC-Core-DataCon.html#t:DataCon" title="GHC.Core.DataCon">DataCon</a> -&gt; <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> <a href="GHC-JS-Syntax.html#t:JExpr" title="GHC.JS.Syntax">JExpr</a> <a href="src/GHC.StgToJS.Ids.html#varForDataConWorker" class="link">Source</a> <a href="#v:varForDataConWorker" class="selflink">#</a></p><div class="doc"><p>Retrieve datacon worker entry variable name for the given datacon</p></div></div><div class="top"><p class="src"><a id="v:declVarsForId" class="def">declVarsForId</a> :: <a href="GHC-Types-Var.html#t:Id" title="GHC.Types.Var">Id</a> -&gt; <a href="GHC-StgToJS-Types.html#t:G" title="GHC.StgToJS.Types">G</a> <a href="GHC-JS-Syntax.html#t:JStat" title="GHC.JS.Syntax">JStat</a> <a href="src/GHC.StgToJS.Ids.html#declVarsForId" class="link">Source</a> <a href="#v:declVarsForId" class="selflink">#</a></p><div class="doc"><p>Declare all js vars for the id</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>