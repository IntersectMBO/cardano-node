<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>GHC.Core.Reduction</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ghc-9.6.7: The GHC API</span><ul class="links" id="page-menu"><li><a href="src/GHC.Core.Reduction.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">GHC.Core.Reduction</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Reductions</a></li><li><a href="#g:2">Rewriting type arguments</a></li></ul></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Reduction">Reduction</a> = <a href="#v:Reduction">Reduction</a> {<ul class="subs"><li><a href="#v:reductionCoercion">reductionCoercion</a> :: <a href="GHC-Core-Coercion.html#t:Coercion" title="GHC.Core.Coercion">Coercion</a></li><li><a href="#v:reductionReducedType">reductionReducedType</a> :: !<a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a></li></ul>}</li><li class="src short"><span class="keyword">type</span> <a href="#t:ReductionN">ReductionN</a> = <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:ReductionR">ReductionR</a> = <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:HetReduction">HetReduction</a> = <a href="#v:HetReduction">HetReduction</a> <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> <a href="GHC-Core-Coercion.html#t:MCoercionN" title="GHC.Core.Coercion">MCoercionN</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Reductions">Reductions</a> = <a href="#v:Reductions">Reductions</a> [<a href="GHC-Core-Coercion.html#t:Coercion" title="GHC.Core.Coercion">Coercion</a>] [<a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a>]</li><li class="src short"><a href="#v:mkReduction">mkReduction</a> :: <a href="GHC-Core-Coercion.html#t:Coercion" title="GHC.Core.Coercion">Coercion</a> -&gt; <a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></li><li class="src short"><a href="#v:mkReductions">mkReductions</a> :: [<a href="GHC-Core-Coercion.html#t:Coercion" title="GHC.Core.Coercion">Coercion</a>] -&gt; [<a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a>] -&gt; <a href="GHC-Core-Reduction.html#t:Reductions" title="GHC.Core.Reduction">Reductions</a></li><li class="src short"><a href="#v:mkHetReduction">mkHetReduction</a> :: <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> -&gt; <a href="GHC-Core-Coercion.html#t:MCoercionN" title="GHC.Core.Coercion">MCoercionN</a> -&gt; <a href="GHC-Core-Reduction.html#t:HetReduction" title="GHC.Core.Reduction">HetReduction</a></li><li class="src short"><a href="#v:coercionRedn">coercionRedn</a> :: <a href="GHC-Core-Coercion.html#t:Coercion" title="GHC.Core.Coercion">Coercion</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></li><li class="src short"><a href="#v:reductionOriginalType">reductionOriginalType</a> :: <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> -&gt; <a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a></li><li class="src short"><a href="#v:downgradeRedn">downgradeRedn</a> :: <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a> -&gt; <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></li><li class="src short"><a href="#v:mkSubRedn">mkSubRedn</a> :: <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></li><li class="src short"><a href="#v:mkTransRedn">mkTransRedn</a> :: <a href="GHC-Core-Coercion.html#t:Coercion" title="GHC.Core.Coercion">Coercion</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></li><li class="src short"><a href="#v:mkCoherenceRightRedn">mkCoherenceRightRedn</a> :: <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> -&gt; <a href="GHC-Core-Coercion.html#t:CoercionN" title="GHC.Core.Coercion">CoercionN</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></li><li class="src short"><a href="#v:mkCoherenceRightMRedn">mkCoherenceRightMRedn</a> :: <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> -&gt; <a href="GHC-Core-Coercion.html#t:MCoercionN" title="GHC.Core.Coercion">MCoercionN</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></li><li class="src short"><a href="#v:mkCastRedn1">mkCastRedn1</a> :: <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a> -&gt; <a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a> -&gt; <a href="GHC-Core-Coercion.html#t:CoercionN" title="GHC.Core.Coercion">CoercionN</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></li><li class="src short"><a href="#v:mkCastRedn2">mkCastRedn2</a> :: <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a> -&gt; <a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a> -&gt; <a href="GHC-Core-Coercion.html#t:CoercionN" title="GHC.Core.Coercion">CoercionN</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> -&gt; <a href="GHC-Core-Coercion.html#t:CoercionN" title="GHC.Core.Coercion">CoercionN</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></li><li class="src short"><a href="#v:mkReflRedn">mkReflRedn</a> :: <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a> -&gt; <a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></li><li class="src short"><a href="#v:mkGReflRightRedn">mkGReflRightRedn</a> :: <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a> -&gt; <a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a> -&gt; <a href="GHC-Core-Coercion.html#t:CoercionN" title="GHC.Core.Coercion">CoercionN</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></li><li class="src short"><a href="#v:mkGReflRightMRedn">mkGReflRightMRedn</a> :: <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a> -&gt; <a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a> -&gt; <a href="GHC-Core-Coercion.html#t:MCoercionN" title="GHC.Core.Coercion">MCoercionN</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></li><li class="src short"><a href="#v:mkGReflLeftRedn">mkGReflLeftRedn</a> :: <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a> -&gt; <a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a> -&gt; <a href="GHC-Core-Coercion.html#t:CoercionN" title="GHC.Core.Coercion">CoercionN</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></li><li class="src short"><a href="#v:mkGReflLeftMRedn">mkGReflLeftMRedn</a> :: <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a> -&gt; <a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a> -&gt; <a href="GHC-Core-Coercion.html#t:MCoercionN" title="GHC.Core.Coercion">MCoercionN</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></li><li class="src short"><a href="#v:mkAppRedn">mkAppRedn</a> :: <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></li><li class="src short"><a href="#v:mkAppRedns">mkAppRedns</a> :: <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reductions" title="GHC.Core.Reduction">Reductions</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></li><li class="src short"><a href="#v:mkFunRedn">mkFunRedn</a> :: <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a> -&gt; <a href="GHC-Types-Var.html#t:FunTyFlag" title="GHC.Types.Var">FunTyFlag</a> -&gt; <a href="GHC-Core-Reduction.html#t:ReductionN" title="GHC.Core.Reduction">ReductionN</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></li><li class="src short"><a href="#v:mkForAllRedn">mkForAllRedn</a> :: <a href="GHC-Types-Var.html#t:ForAllTyFlag" title="GHC.Types.Var">ForAllTyFlag</a> -&gt; <a href="GHC-Types-Var.html#t:TyVar" title="GHC.Types.Var">TyVar</a> -&gt; <a href="GHC-Core-Reduction.html#t:ReductionN" title="GHC.Core.Reduction">ReductionN</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></li><li class="src short"><a href="#v:mkHomoForAllRedn">mkHomoForAllRedn</a> :: [<a href="GHC-Types-Var.html#t:TyVarBinder" title="GHC.Types.Var">TyVarBinder</a>] -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></li><li class="src short"><a href="#v:mkTyConAppRedn">mkTyConAppRedn</a> :: <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a> -&gt; <a href="GHC-Core-TyCon.html#t:TyCon" title="GHC.Core.TyCon">TyCon</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reductions" title="GHC.Core.Reduction">Reductions</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></li><li class="src short"><a href="#v:mkClassPredRedn">mkClassPredRedn</a> :: <a href="GHC-Core-Class.html#t:Class" title="GHC.Core.Class">Class</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reductions" title="GHC.Core.Reduction">Reductions</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></li><li class="src short"><a href="#v:mkProofIrrelRedn">mkProofIrrelRedn</a> :: <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a> -&gt; <a href="GHC-Core-Coercion.html#t:CoercionN" title="GHC.Core.Coercion">CoercionN</a> -&gt; <a href="GHC-Core-Coercion.html#t:Coercion" title="GHC.Core.Coercion">Coercion</a> -&gt; <a href="GHC-Core-Coercion.html#t:Coercion" title="GHC.Core.Coercion">Coercion</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></li><li class="src short"><a href="#v:mkReflCoRedn">mkReflCoRedn</a> :: <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a> -&gt; <a href="GHC-Core-Coercion.html#t:Coercion" title="GHC.Core.Coercion">Coercion</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></li><li class="src short"><a href="#v:homogeniseHetRedn">homogeniseHetRedn</a> :: <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a> -&gt; <a href="GHC-Core-Reduction.html#t:HetReduction" title="GHC.Core.Reduction">HetReduction</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></li><li class="src short"><a href="#v:unzipRedns">unzipRedns</a> :: [<a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a>] -&gt; <a href="GHC-Core-Reduction.html#t:Reductions" title="GHC.Core.Reduction">Reductions</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:ArgsReductions">ArgsReductions</a> = <a href="#v:ArgsReductions">ArgsReductions</a> !<a href="GHC-Core-Reduction.html#t:Reductions" title="GHC.Core.Reduction">Reductions</a> !<a href="GHC-Core-Coercion.html#t:MCoercionN" title="GHC.Core.Coercion">MCoercionN</a></li><li class="src short"><a href="#v:simplifyArgsWorker">simplifyArgsWorker</a> :: <a href="GHC-Utils-Misc.html#t:HasDebugCallStack" title="GHC.Utils.Misc">HasDebugCallStack</a> =&gt; [<a href="GHC-Types-Var.html#t:PiTyBinder" title="GHC.Types.Var">PiTyBinder</a>] -&gt; <a href="GHC-Core-Type.html#t:Kind" title="GHC.Core.Type">Kind</a> -&gt; <a href="GHC-Types-Var-Set.html#t:TyCoVarSet" title="GHC.Types.Var.Set">TyCoVarSet</a> -&gt; <a href="GHC-Data-List-Infinite.html#t:Infinite" title="GHC.Data.List.Infinite">Infinite</a> <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a> -&gt; [<a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a>] -&gt; <a href="GHC-Core-Reduction.html#t:ArgsReductions" title="GHC.Core.Reduction">ArgsReductions</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Reductions</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Reduction" class="def">Reduction</a> <a href="src/GHC.Core.Reduction.html#Reduction" class="link">Source</a> <a href="#t:Reduction" class="selflink">#</a></p><div class="doc"><p>A <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> is the result of an operation that rewrites a type <code>ty_in</code>.
 The <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> includes the rewritten type <code>ty_out</code> and a <code><a href="GHC-Core-Coercion.html#t:Coercion" title="GHC.Core.Coercion">Coercion</a></code> <code>co</code>
 such that <code>co :: ty_in ~ ty_out</code>, where the role of the coercion is determined
 by the context. That is, the LHS type of the coercion is the original type
 <code>ty_in</code>, while its RHS type is the rewritten type <code>ty_out</code>.</p><p>A Reduction is always homogeneous, unless it is wrapped inside a <code><a href="GHC-Core-Reduction.html#t:HetReduction" title="GHC.Core.Reduction">HetReduction</a></code>,
 which separately stores the kind coercion.</p><p>See Note [The Reduction type].</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Reduction" class="def">Reduction</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:reductionCoercion" class="def">reductionCoercion</a> :: <a href="GHC-Core-Coercion.html#t:Coercion" title="GHC.Core.Coercion">Coercion</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:reductionReducedType" class="def">reductionReducedType</a> :: !<a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Reduction">Instances</h4><details id="i:Reduction" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Reduction:Outputable:1"></span> <a href="GHC-Utils-Outputable.html#t:Outputable" title="GHC.Utils.Outputable">Outputable</a> <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></span> <a href="src/GHC.Core.Reduction.html#line-164" class="link">Source</a> <a href="#t:Reduction" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Reduction:Outputable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Core-Reduction.html">GHC.Core.Reduction</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> <a href="src/GHC.Utils.Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:ReductionN" class="def">ReductionN</a> = <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> <a href="src/GHC.Core.Reduction.html#ReductionN" class="link">Source</a> <a href="#t:ReductionN" class="selflink">#</a></p><div class="doc"><p>A <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> in which the <code><a href="GHC-Core-Coercion.html#t:Coercion" title="GHC.Core.Coercion">Coercion</a></code> has <code><a href="Language-Haskell-Syntax-Basic.html#v:Nominal" title="Language.Haskell.Syntax.Basic">Nominal</a></code> role.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:ReductionR" class="def">ReductionR</a> = <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> <a href="src/GHC.Core.Reduction.html#ReductionR" class="link">Source</a> <a href="#t:ReductionR" class="selflink">#</a></p><div class="doc"><p>A <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> in which the <code><a href="GHC-Core-Coercion.html#t:Coercion" title="GHC.Core.Coercion">Coercion</a></code> has <code><a href="Language-Haskell-Syntax-Basic.html#v:Representational" title="Language.Haskell.Syntax.Basic">Representational</a></code> role.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:HetReduction" class="def">HetReduction</a> <a href="src/GHC.Core.Reduction.html#HetReduction" class="link">Source</a> <a href="#t:HetReduction" class="selflink">#</a></p><div class="doc"><p>Stores a heterogeneous reduction.</p><p>The stored kind coercion must relate the kinds of the
 stored reduction. That is, in <code>HetReduction (Reduction co xi) kco</code>,
 we must have:</p><pre> co :: ty ~ xi
kco :: typeKind ty ~ typeKind xi</pre></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:HetReduction" class="def">HetReduction</a> <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> <a href="GHC-Core-Coercion.html#t:MCoercionN" title="GHC.Core.Coercion">MCoercionN</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Reductions" class="def">Reductions</a> <a href="src/GHC.Core.Reduction.html#Reductions" class="link">Source</a> <a href="#t:Reductions" class="selflink">#</a></p><div class="doc"><p>A collection of <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code>s where the coercions and the types are stored separately.</p><p>Use <code><a href="GHC-Core-Reduction.html#v:unzipRedns" title="GHC.Core.Reduction">unzipRedns</a></code> to obtain <code><a href="GHC-Core-Reduction.html#t:Reductions" title="GHC.Core.Reduction">Reductions</a></code> from a list of <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code>s.</p><p>This datatype is used in <code><a href="GHC-Core-Reduction.html#v:mkAppRedns" title="GHC.Core.Reduction">mkAppRedns</a></code>, <code>mkClassPredRedns</code> and <code><a href="GHC-Core-Reduction.html#v:mkTyConAppRedn" title="GHC.Core.Reduction">mkTyConAppRedn</a></code>,
 which expect separate types and coercions.</p><p>Invariant: the two stored lists are of the same length,
 and the RHS type of each coercion is the corresponding type.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Reductions" class="def">Reductions</a> [<a href="GHC-Core-Coercion.html#t:Coercion" title="GHC.Core.Coercion">Coercion</a>] [<a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a>]</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:mkReduction" class="def">mkReduction</a> :: <a href="GHC-Core-Coercion.html#t:Coercion" title="GHC.Core.Coercion">Coercion</a> -&gt; <a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> <a href="src/GHC.Core.Reduction.html#mkReduction" class="link">Source</a> <a href="#v:mkReduction" class="selflink">#</a></p><div class="doc"><p>Create a <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> from a pair of a <code><a href="GHC-Core-Coercion.html#t:Coercion" title="GHC.Core.Coercion">Coercion</a></code> and a 'Type.</p><p>Pre-condition: the RHS type of the coercion matches the provided type
 (perhaps up to zonking).</p><p>Use <code><a href="GHC-Core-Reduction.html#v:coercionRedn" title="GHC.Core.Reduction">coercionRedn</a></code> when you only have the coercion.</p></div></div><div class="top"><p class="src"><a id="v:mkReductions" class="def">mkReductions</a> :: [<a href="GHC-Core-Coercion.html#t:Coercion" title="GHC.Core.Coercion">Coercion</a>] -&gt; [<a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a>] -&gt; <a href="GHC-Core-Reduction.html#t:Reductions" title="GHC.Core.Reduction">Reductions</a> <a href="src/GHC.Core.Reduction.html#mkReductions" class="link">Source</a> <a href="#v:mkReductions" class="selflink">#</a></p><div class="doc"><p>Create <code><a href="GHC-Core-Reduction.html#t:Reductions" title="GHC.Core.Reduction">Reductions</a></code> from individual lists of coercions and types.</p><p>The lists should be of the same length, and the RHS type of each coercion
 should match the specified type in the other list.</p></div></div><div class="top"><p class="src"><a id="v:mkHetReduction" class="def">mkHetReduction</a> <a href="src/GHC.Core.Reduction.html#mkHetReduction" class="link">Source</a> <a href="#v:mkHetReduction" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></td><td class="doc"><p>heterogeneous reduction</p></td></tr><tr><td class="src">-&gt; <a href="GHC-Core-Coercion.html#t:MCoercionN" title="GHC.Core.Coercion">MCoercionN</a></td><td class="doc"><p>kind coercion</p></td></tr><tr><td class="src">-&gt; <a href="GHC-Core-Reduction.html#t:HetReduction" title="GHC.Core.Reduction">HetReduction</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Create a heterogeneous reduction.</p><p>Pre-condition: the provided kind coercion (second argument)
 relates the kinds of the stored reduction.
 That is, if the coercion stored in the <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> is of the form</p><pre>co :: ty ~ xi</pre><p>Then the kind coercion supplied must be of the form:</p><pre>kco :: typeKind ty ~ typeKind xi</pre></div></div><div class="top"><p class="src"><a id="v:coercionRedn" class="def">coercionRedn</a> :: <a href="GHC-Core-Coercion.html#t:Coercion" title="GHC.Core.Coercion">Coercion</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> <a href="src/GHC.Core.Reduction.html#coercionRedn" class="link">Source</a> <a href="#v:coercionRedn" class="selflink">#</a></p><div class="doc"><p>Turn a <code><a href="GHC-Core-Coercion.html#t:Coercion" title="GHC.Core.Coercion">Coercion</a></code> into a <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code>
 by inspecting the RHS type of the coercion.</p><p>Prefer using <code><a href="GHC-Core-Reduction.html#v:mkReduction" title="GHC.Core.Reduction">mkReduction</a></code> when you already know
 the RHS type of the coercion, to avoid computing it anew.</p></div></div><div class="top"><p class="src"><a id="v:reductionOriginalType" class="def">reductionOriginalType</a> :: <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> -&gt; <a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a> <a href="src/GHC.Core.Reduction.html#reductionOriginalType" class="link">Source</a> <a href="#v:reductionOriginalType" class="selflink">#</a></p><div class="doc"><p>Get the original, unreduced type corresponding to a <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code>.</p><p>This is obtained by computing the LHS kind of the stored coercion,
 which may be slow.</p></div></div><div class="top"><p class="src"><a id="v:downgradeRedn" class="def">downgradeRedn</a> <a href="src/GHC.Core.Reduction.html#downgradeRedn" class="link">Source</a> <a href="#v:downgradeRedn" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a></td><td class="doc"><p>desired role</p></td></tr><tr><td class="src">-&gt; <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a></td><td class="doc"><p>current role</p></td></tr><tr><td class="src">-&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Downgrade the role of the coercion stored in the <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:mkSubRedn" class="def">mkSubRedn</a> :: <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> <a href="src/GHC.Core.Reduction.html#mkSubRedn" class="link">Source</a> <a href="#v:mkSubRedn" class="selflink">#</a></p><div class="doc"><p>Downgrade the role of the coercion stored in the <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code>,
 from <code><a href="Language-Haskell-Syntax-Basic.html#v:Nominal" title="Language.Haskell.Syntax.Basic">Nominal</a></code> to <code><a href="Language-Haskell-Syntax-Basic.html#v:Representational" title="Language.Haskell.Syntax.Basic">Representational</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:mkTransRedn" class="def">mkTransRedn</a> :: <a href="GHC-Core-Coercion.html#t:Coercion" title="GHC.Core.Coercion">Coercion</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> <a href="src/GHC.Core.Reduction.html#mkTransRedn" class="link">Source</a> <a href="#v:mkTransRedn" class="selflink">#</a></p><div class="doc"><p>Compose a reduction with a coercion on the left.</p><p>Pre-condition: the provided coercion's RHS type must match the LHS type
 of the coercion that is stored in the reduction.</p></div></div><div class="top"><p class="src"><a id="v:mkCoherenceRightRedn" class="def">mkCoherenceRightRedn</a> :: <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> -&gt; <a href="GHC-Core-Coercion.html#t:CoercionN" title="GHC.Core.Coercion">CoercionN</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> <a href="src/GHC.Core.Reduction.html#mkCoherenceRightRedn" class="link">Source</a> <a href="#v:mkCoherenceRightRedn" class="selflink">#</a></p><div class="doc"><p>Apply a cast to the result of a <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code>.</p><p>Given a <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> <code>ty1 ~co1~&gt; (ty2 :: k2)</code> and a kind coercion <code>kco</code>
 with LHS kind <code>k2</code>, produce a new <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> <code>ty1 ~co2~&gt; ( ty2 |&gt; kco )</code>
 of the given <code><a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a></code> (which must match the role of the coercion stored
 in the <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> argument).</p></div></div><div class="top"><p class="src"><a id="v:mkCoherenceRightMRedn" class="def">mkCoherenceRightMRedn</a> :: <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> -&gt; <a href="GHC-Core-Coercion.html#t:MCoercionN" title="GHC.Core.Coercion">MCoercionN</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> <a href="src/GHC.Core.Reduction.html#mkCoherenceRightMRedn" class="link">Source</a> <a href="#v:mkCoherenceRightMRedn" class="selflink">#</a></p><div class="doc"><p>Apply a cast to the result of a <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code>, using an <code><a href="GHC-Core-Coercion.html#t:MCoercionN" title="GHC.Core.Coercion">MCoercionN</a></code>.</p><p>Given a <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> <code>ty1 ~co1~&gt; (ty2 :: k2)</code> and a kind coercion <code>mco</code>
 with LHS kind <code>k2</code>, produce a new <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> <code>ty1 ~co2~&gt; ( ty2 |&gt; mco )</code>
 of the given <code><a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a></code> (which must match the role of the coercion stored
 in the <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> argument).</p></div></div><div class="top"><p class="src"><a id="v:mkCastRedn1" class="def">mkCastRedn1</a> <a href="src/GHC.Core.Reduction.html#mkCastRedn1" class="link">Source</a> <a href="#v:mkCastRedn1" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a></td><td class="doc"><p>original type</p></td></tr><tr><td class="src">-&gt; <a href="GHC-Core-Coercion.html#t:CoercionN" title="GHC.Core.Coercion">CoercionN</a></td><td class="doc"><p>coercion to cast with</p></td></tr><tr><td class="src">-&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></td><td class="doc"><p>rewritten type, with rewriting coercion</p></td></tr><tr><td class="src">-&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Apply a cast to a <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code>, casting both the original and the reduced type.</p><p>Given <code>cast_co</code> and <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> <code>ty ~co~&gt; xi</code>, this function returns
 the <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> <code>(ty |&gt; cast_co) ~return_co~&gt; (xi |&gt; cast_co)</code>
 of the given <code><a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a></code> (which must match the role of the coercion stored
 in the <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> argument).</p><p>Pre-condition: the <code><a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a></code> passed in is the same as the LHS type
 of the coercion stored in the <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:mkCastRedn2" class="def">mkCastRedn2</a> <a href="src/GHC.Core.Reduction.html#mkCastRedn2" class="link">Source</a> <a href="#v:mkCastRedn2" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a></td><td class="doc"><p>original type</p></td></tr><tr><td class="src">-&gt; <a href="GHC-Core-Coercion.html#t:CoercionN" title="GHC.Core.Coercion">CoercionN</a></td><td class="doc"><p>coercion to cast with on the left</p></td></tr><tr><td class="src">-&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></td><td class="doc"><p>rewritten type, with rewriting coercion</p></td></tr><tr><td class="src">-&gt; <a href="GHC-Core-Coercion.html#t:CoercionN" title="GHC.Core.Coercion">CoercionN</a></td><td class="doc"><p>coercion to cast with on the right</p></td></tr><tr><td class="src">-&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Apply casts on both sides of a <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> (of the given <code><a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a></code>).</p><p>Use <code><a href="GHC-Core-Reduction.html#v:mkCastRedn1" title="GHC.Core.Reduction">mkCastRedn1</a></code> when you want to cast both the original and reduced types
 in a <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> using the same coercion.</p><p>Pre-condition: the <code><a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a></code> passed in is the same as the LHS type
 of the coercion stored in the <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:mkReflRedn" class="def">mkReflRedn</a> :: <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a> -&gt; <a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> <a href="src/GHC.Core.Reduction.html#mkReflRedn" class="link">Source</a> <a href="#v:mkReflRedn" class="selflink">#</a></p><div class="doc"><p>The reflexive reduction.</p></div></div><div class="top"><p class="src"><a id="v:mkGReflRightRedn" class="def">mkGReflRightRedn</a> :: <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a> -&gt; <a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a> -&gt; <a href="GHC-Core-Coercion.html#t:CoercionN" title="GHC.Core.Coercion">CoercionN</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> <a href="src/GHC.Core.Reduction.html#mkGReflRightRedn" class="link">Source</a> <a href="#v:mkGReflRightRedn" class="selflink">#</a></p><div class="doc"><p>Create a <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> from a kind cast, in which
 the casted type is the rewritten type.</p><p>Given <code>ty :: k1</code>, <code>mco :: k1 ~ k2</code>,
 produces the <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> <code>ty ~res_co~&gt; (ty |&gt; mco)</code>
 at the given <code><a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:mkGReflRightMRedn" class="def">mkGReflRightMRedn</a> :: <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a> -&gt; <a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a> -&gt; <a href="GHC-Core-Coercion.html#t:MCoercionN" title="GHC.Core.Coercion">MCoercionN</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> <a href="src/GHC.Core.Reduction.html#mkGReflRightMRedn" class="link">Source</a> <a href="#v:mkGReflRightMRedn" class="selflink">#</a></p><div class="doc"><p>Create a <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> from a kind cast, in which
 the casted type is the rewritten type.</p><p>Given <code>ty :: k1</code>, <code>mco :: k1 ~ k2</code>,
 produces the <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> <code>ty ~res_co~&gt; (ty |&gt; mco)</code>
 at the given <code><a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:mkGReflLeftRedn" class="def">mkGReflLeftRedn</a> :: <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a> -&gt; <a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a> -&gt; <a href="GHC-Core-Coercion.html#t:CoercionN" title="GHC.Core.Coercion">CoercionN</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> <a href="src/GHC.Core.Reduction.html#mkGReflLeftRedn" class="link">Source</a> <a href="#v:mkGReflLeftRedn" class="selflink">#</a></p><div class="doc"><p>Create a <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> from a kind cast, in which
 the casted type is the original (non-rewritten) type.</p><p>Given <code>ty :: k1</code>, <code>mco :: k1 ~ k2</code>,
 produces the <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> <code>(ty |&gt; mco) ~res_co~&gt; ty</code>
 at the given <code><a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:mkGReflLeftMRedn" class="def">mkGReflLeftMRedn</a> :: <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a> -&gt; <a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a> -&gt; <a href="GHC-Core-Coercion.html#t:MCoercionN" title="GHC.Core.Coercion">MCoercionN</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> <a href="src/GHC.Core.Reduction.html#mkGReflLeftMRedn" class="link">Source</a> <a href="#v:mkGReflLeftMRedn" class="selflink">#</a></p><div class="doc"><p>Create a <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> from a kind cast, in which
 the casted type is the original (non-rewritten) type.</p><p>Given <code>ty :: k1</code>, <code>mco :: k1 ~ k2</code>,
 produces the <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> <code>(ty |&gt; mco) ~res_co~&gt; ty</code>
 at the given <code><a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:mkAppRedn" class="def">mkAppRedn</a> :: <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> <a href="src/GHC.Core.Reduction.html#mkAppRedn" class="link">Source</a> <a href="#v:mkAppRedn" class="selflink">#</a></p><div class="doc"><p>Apply one <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> to another.</p><p>Combines <code><a href="GHC-Core-Coercion.html#v:mkAppCo" title="GHC.Core.Coercion">mkAppCo</a></code> and <code><a href="GHC-Core-Type.html#v:mkAppTy" title="GHC.Core.Type">mkAppTy</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:mkAppRedns" class="def">mkAppRedns</a> :: <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reductions" title="GHC.Core.Reduction">Reductions</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> <a href="src/GHC.Core.Reduction.html#mkAppRedns" class="link">Source</a> <a href="#v:mkAppRedns" class="selflink">#</a></p><div class="doc"><p>Combines <code><a href="GHC-Core-Coercion.html#v:mkAppCos" title="GHC.Core.Coercion">mkAppCos</a></code> and <code><a href="GHC-Core-Type.html#v:mkAppTys" title="GHC.Core.Type">mkAppTys</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:mkFunRedn" class="def">mkFunRedn</a> <a href="src/GHC.Core.Reduction.html#mkFunRedn" class="link">Source</a> <a href="#v:mkFunRedn" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="GHC-Types-Var.html#t:FunTyFlag" title="GHC.Types.Var">FunTyFlag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="GHC-Core-Reduction.html#t:ReductionN" title="GHC.Core.Reduction">ReductionN</a></td><td class="doc"><p>multiplicity reduction</p></td></tr><tr><td class="src">-&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></td><td class="doc"><p>argument reduction</p></td></tr><tr><td class="src">-&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></td><td class="doc"><p>result reduction</p></td></tr><tr><td class="src">-&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Create a function <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code>.</p><p>Combines <code>mkFunCo</code> and <code><a href="GHC-Core-Type.html#v:mkFunTy" title="GHC.Core.Type">mkFunTy</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:mkForAllRedn" class="def">mkForAllRedn</a> <a href="src/GHC.Core.Reduction.html#mkForAllRedn" class="link">Source</a> <a href="#v:mkForAllRedn" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="GHC-Types-Var.html#t:ForAllTyFlag" title="GHC.Types.Var">ForAllTyFlag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="GHC-Types-Var.html#t:TyVar" title="GHC.Types.Var">TyVar</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="GHC-Core-Reduction.html#t:ReductionN" title="GHC.Core.Reduction">ReductionN</a></td><td class="doc"><p>kind reduction</p></td></tr><tr><td class="src">-&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></td><td class="doc"><p>body reduction</p></td></tr><tr><td class="src">-&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Create a <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> associated to a &#928; type,
 from a kind <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> and a body <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code>.</p><p>Combines <code><a href="GHC-Core-Coercion.html#v:mkForAllCo" title="GHC.Core.Coercion">mkForAllCo</a></code> and <code><a href="GHC-Core-Type.html#v:mkForAllTy" title="GHC.Core.Type">mkForAllTy</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:mkHomoForAllRedn" class="def">mkHomoForAllRedn</a> :: [<a href="GHC-Types-Var.html#t:TyVarBinder" title="GHC.Types.Var">TyVarBinder</a>] -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> <a href="src/GHC.Core.Reduction.html#mkHomoForAllRedn" class="link">Source</a> <a href="#v:mkHomoForAllRedn" class="selflink">#</a></p><div class="doc"><p>Create a <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> of a quantified type from a
 <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> of the body.</p><p>Combines <code><a href="GHC-Core-Coercion.html#v:mkHomoForAllCos" title="GHC.Core.Coercion">mkHomoForAllCos</a></code> and <code><a href="GHC-Core-Type.html#v:mkForAllTys" title="GHC.Core.Type">mkForAllTys</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:mkTyConAppRedn" class="def">mkTyConAppRedn</a> :: <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a> -&gt; <a href="GHC-Core-TyCon.html#t:TyCon" title="GHC.Core.TyCon">TyCon</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reductions" title="GHC.Core.Reduction">Reductions</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> <a href="src/GHC.Core.Reduction.html#mkTyConAppRedn" class="link">Source</a> <a href="#v:mkTyConAppRedn" class="selflink">#</a></p><div class="doc"><p><code>TyConAppCo</code> for <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code>s: combines <code><a href="GHC-Core-Coercion.html#v:mkTyConAppCo" title="GHC.Core.Coercion">mkTyConAppCo</a></code> and <code><a href="GHC-Core-Type.html#v:mkTyConApp" title="GHC.Core.Type">mkTyConApp</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:mkClassPredRedn" class="def">mkClassPredRedn</a> :: <a href="GHC-Core-Class.html#t:Class" title="GHC.Core.Class">Class</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reductions" title="GHC.Core.Reduction">Reductions</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> <a href="src/GHC.Core.Reduction.html#mkClassPredRedn" class="link">Source</a> <a href="#v:mkClassPredRedn" class="selflink">#</a></p><div class="doc"><p>Reduce the arguments of a <code><a href="GHC-Core-Class.html#t:Class" title="GHC.Core.Class">Class</a></code> <code><a href="GHC-Core-TyCon.html#t:TyCon" title="GHC.Core.TyCon">TyCon</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:mkProofIrrelRedn" class="def">mkProofIrrelRedn</a> <a href="src/GHC.Core.Reduction.html#mkProofIrrelRedn" class="link">Source</a> <a href="#v:mkProofIrrelRedn" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a></td><td class="doc"><p>role of the created coercion, &quot;r&quot;</p></td></tr><tr><td class="src">-&gt; <a href="GHC-Core-Coercion.html#t:CoercionN" title="GHC.Core.Coercion">CoercionN</a></td><td class="doc"><p>co :: phi1 ~N phi2</p></td></tr><tr><td class="src">-&gt; <a href="GHC-Core-Coercion.html#t:Coercion" title="GHC.Core.Coercion">Coercion</a></td><td class="doc"><p>g1 :: phi1</p></td></tr><tr><td class="src">-&gt; <a href="GHC-Core-Coercion.html#t:Coercion" title="GHC.Core.Coercion">Coercion</a></td><td class="doc"><p>g2 :: phi2</p></td></tr><tr><td class="src">-&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></td><td class="doc"><p>res_co :: g1 ~r g2</p></td></tr></table></div><div class="doc"><p>Create a <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> from a coercion between coercions.</p><p>Combines <code><a href="GHC-Core-Coercion.html#v:mkProofIrrelCo" title="GHC.Core.Coercion">mkProofIrrelCo</a></code> and <code><a href="GHC-Core-Type.html#v:mkCoercionTy" title="GHC.Core.Type">mkCoercionTy</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:mkReflCoRedn" class="def">mkReflCoRedn</a> :: <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a> -&gt; <a href="GHC-Core-Coercion.html#t:Coercion" title="GHC.Core.Coercion">Coercion</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> <a href="src/GHC.Core.Reduction.html#mkReflCoRedn" class="link">Source</a> <a href="#v:mkReflCoRedn" class="selflink">#</a></p><div class="doc"><p>Create a reflexive <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code> whose RHS is the given <code><a href="GHC-Core-Coercion.html#t:Coercion" title="GHC.Core.Coercion">Coercion</a></code>,
 with the specified <code><a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:homogeniseHetRedn" class="def">homogeniseHetRedn</a> :: <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a> -&gt; <a href="GHC-Core-Reduction.html#t:HetReduction" title="GHC.Core.Reduction">HetReduction</a> -&gt; <a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a> <a href="src/GHC.Core.Reduction.html#homogeniseHetRedn" class="link">Source</a> <a href="#v:homogeniseHetRedn" class="selflink">#</a></p><div class="doc"><p>Homogenise a heterogeneous reduction.</p><p>Given <code>HetReduction (Reduction co xi) kco</code>, with</p><pre> co :: ty ~ xi
kco :: typeKind(ty) ~ typeKind(xi)</pre><p>this returns the homogeneous reduction:</p><pre>hco :: ty ~ ( xi |&gt; sym kco )</pre></div></div><div class="top"><p class="src"><a id="v:unzipRedns" class="def">unzipRedns</a> :: [<a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a>] -&gt; <a href="GHC-Core-Reduction.html#t:Reductions" title="GHC.Core.Reduction">Reductions</a> <a href="src/GHC.Core.Reduction.html#unzipRedns" class="link">Source</a> <a href="#v:unzipRedns" class="selflink">#</a></p><div class="doc"><p>Obtain <code><a href="GHC-Core-Reduction.html#t:Reductions" title="GHC.Core.Reduction">Reductions</a></code> from a list of <code><a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a></code>s by unzipping.</p></div></div><a href="#g:2" id="g:2"><h1>Rewriting type arguments</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ArgsReductions" class="def">ArgsReductions</a> <a href="src/GHC.Core.Reduction.html#ArgsReductions" class="link">Source</a> <a href="#t:ArgsReductions" class="selflink">#</a></p><div class="doc"><p>Stores <code><a href="GHC-Core-Reduction.html#t:Reductions" title="GHC.Core.Reduction">Reductions</a></code> as well as a kind coercion.</p><p>Used when rewriting arguments to a type function <code>f</code>.</p><p>Invariant:
   when the stored reductions are of the form
     co_i :: ty_i ~ xi_i,
   the kind coercion is of the form
      kco :: typeKind (f ty_1 ... ty_n) ~ typeKind (f xi_1 ... xi_n)</p><p>The type function <code>f</code> depends on context.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ArgsReductions" class="def">ArgsReductions</a> !<a href="GHC-Core-Reduction.html#t:Reductions" title="GHC.Core.Reduction">Reductions</a> !<a href="GHC-Core-Coercion.html#t:MCoercionN" title="GHC.Core.Coercion">MCoercionN</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:simplifyArgsWorker" class="def">simplifyArgsWorker</a> :: <a href="GHC-Utils-Misc.html#t:HasDebugCallStack" title="GHC.Utils.Misc">HasDebugCallStack</a> =&gt; [<a href="GHC-Types-Var.html#t:PiTyBinder" title="GHC.Types.Var">PiTyBinder</a>] -&gt; <a href="GHC-Core-Type.html#t:Kind" title="GHC.Core.Type">Kind</a> -&gt; <a href="GHC-Types-Var-Set.html#t:TyCoVarSet" title="GHC.Types.Var.Set">TyCoVarSet</a> -&gt; <a href="GHC-Data-List-Infinite.html#t:Infinite" title="GHC.Data.List.Infinite">Infinite</a> <a href="Language-Haskell-Syntax-Basic.html#t:Role" title="Language.Haskell.Syntax.Basic">Role</a> -&gt; [<a href="GHC-Core-Reduction.html#t:Reduction" title="GHC.Core.Reduction">Reduction</a>] -&gt; <a href="GHC-Core-Reduction.html#t:ArgsReductions" title="GHC.Core.Reduction">ArgsReductions</a> <a href="src/GHC.Core.Reduction.html#simplifyArgsWorker" class="link">Source</a> <a href="#v:simplifyArgsWorker" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>