<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>GHC.StgToCmm.ExtCode</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ghc-9.6.6: The GHC API</span><ul class="links" id="page-menu"><li><a href="src/GHC.StgToCmm.ExtCode.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">GHC.StgToCmm.ExtCode</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Our extended FCode monad.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:CmmParse">CmmParse</a> a</li><li class="src short"><a href="#v:unEC">unEC</a> :: <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> a -&gt; <a href="GHC-Prelude-Basic.html#t:String" title="GHC.Prelude.Basic">String</a> -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:Env" title="GHC.StgToCmm.ExtCode">Env</a> -&gt; Decls -&gt; <a href="GHC-StgToCmm-Monad.html#t:FCode" title="GHC.StgToCmm.Monad">FCode</a> (Decls, a)</li><li class="src short"><span class="keyword">data</span> <a href="#t:Named">Named</a><ul class="subs"><li>= <a href="#v:VarN">VarN</a> <a href="GHC-Cmm-Expr.html#t:CmmExpr" title="GHC.Cmm.Expr">CmmExpr</a></li><li>| <a href="#v:FunN">FunN</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a></li><li>| <a href="#v:LabelN">LabelN</a> <a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a></li></ul></li><li class="src short"><span class="keyword">type</span> <a href="#t:Env">Env</a> = <a href="GHC-Types-Unique-FM.html#t:UniqFM" title="GHC.Types.Unique.FM">UniqFM</a> <a href="GHC-Data-FastString.html#t:FastString" title="GHC.Data.FastString">FastString</a> <a href="GHC-StgToCmm-ExtCode.html#t:Named" title="GHC.StgToCmm.ExtCode">Named</a></li><li class="src short"><a href="#v:loopDecls">loopDecls</a> :: <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> a -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> a</li><li class="src short"><a href="#v:getEnv">getEnv</a> :: <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> <a href="GHC-StgToCmm-ExtCode.html#t:Env" title="GHC.StgToCmm.ExtCode">Env</a></li><li class="src short"><a href="#v:withName">withName</a> :: <a href="GHC-Prelude-Basic.html#t:String" title="GHC.Prelude.Basic">String</a> -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> a -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> a</li><li class="src short"><a href="#v:getName">getName</a> :: <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> <a href="GHC-Prelude-Basic.html#t:String" title="GHC.Prelude.Basic">String</a></li><li class="src short"><a href="#v:newLocal">newLocal</a> :: <a href="GHC-Cmm-Type.html#t:CmmType" title="GHC.Cmm.Type">CmmType</a> -&gt; <a href="GHC-Data-FastString.html#t:FastString" title="GHC.Data.FastString">FastString</a> -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> <a href="GHC-Cmm-Reg.html#t:LocalReg" title="GHC.Cmm.Reg">LocalReg</a></li><li class="src short"><a href="#v:newLabel">newLabel</a> :: <a href="GHC-Data-FastString.html#t:FastString" title="GHC.Data.FastString">FastString</a> -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> <a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a></li><li class="src short"><a href="#v:newBlockId">newBlockId</a> :: <a href="GHC-Types-Unique-Supply.html#t:MonadUnique" title="GHC.Types.Unique.Supply">MonadUnique</a> m =&gt; m <a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a></li><li class="src short"><a href="#v:newFunctionName">newFunctionName</a> :: <a href="GHC-Data-FastString.html#t:FastString" title="GHC.Data.FastString">FastString</a> -&gt; <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a> -&gt; ExtCode</li><li class="src short"><a href="#v:newImport">newImport</a> :: (<a href="GHC-Data-FastString.html#t:FastString" title="GHC.Data.FastString">FastString</a>, <a href="GHC-Cmm-CLabel.html#t:CLabel" title="GHC.Cmm.CLabel">CLabel</a>) -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> ()</li><li class="src short"><a href="#v:lookupLabel">lookupLabel</a> :: <a href="GHC-Data-FastString.html#t:FastString" title="GHC.Data.FastString">FastString</a> -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> <a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a></li><li class="src short"><a href="#v:lookupName">lookupName</a> :: <a href="GHC-Data-FastString.html#t:FastString" title="GHC.Data.FastString">FastString</a> -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> <a href="GHC-Cmm-Expr.html#t:CmmExpr" title="GHC.Cmm.Expr">CmmExpr</a></li><li class="src short"><a href="#v:code">code</a> :: <a href="GHC-StgToCmm-Monad.html#t:FCode" title="GHC.StgToCmm.Monad">FCode</a> a -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> a</li><li class="src short"><a href="#v:emit">emit</a> :: <a href="GHC-Cmm-Graph.html#t:CmmAGraph" title="GHC.Cmm.Graph">CmmAGraph</a> -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> ()</li><li class="src short"><a href="#v:emitLabel">emitLabel</a> :: <a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a> -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> ()</li><li class="src short"><a href="#v:emitAssign">emitAssign</a> :: <a href="GHC-Cmm-Reg.html#t:CmmReg" title="GHC.Cmm.Reg">CmmReg</a> -&gt; <a href="GHC-Cmm-Expr.html#t:CmmExpr" title="GHC.Cmm.Expr">CmmExpr</a> -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> ()</li><li class="src short"><a href="#v:emitStore">emitStore</a> :: <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Cmm-MachOp.html#t:MemoryOrdering" title="GHC.Cmm.MachOp">MemoryOrdering</a> -&gt; <a href="GHC-Cmm-Expr.html#t:CmmExpr" title="GHC.Cmm.Expr">CmmExpr</a> -&gt; <a href="GHC-Cmm-Expr.html#t:CmmExpr" title="GHC.Cmm.Expr">CmmExpr</a> -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> ()</li><li class="src short"><a href="#v:getCode">getCode</a> :: <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> a -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> <a href="GHC-Cmm-Graph.html#t:CmmAGraph" title="GHC.Cmm.Graph">CmmAGraph</a></li><li class="src short"><a href="#v:getCodeR">getCodeR</a> :: <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> a -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> (a, <a href="GHC-Cmm-Graph.html#t:CmmAGraph" title="GHC.Cmm.Graph">CmmAGraph</a>)</li><li class="src short"><a href="#v:getCodeScoped">getCodeScoped</a> :: <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> a -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> (a, <a href="GHC-Cmm-Graph.html#t:CmmAGraphScoped" title="GHC.Cmm.Graph">CmmAGraphScoped</a>)</li><li class="src short"><a href="#v:emitOutOfLine">emitOutOfLine</a> :: <a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a> -&gt; <a href="GHC-Cmm-Graph.html#t:CmmAGraphScoped" title="GHC.Cmm.Graph">CmmAGraphScoped</a> -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> ()</li><li class="src short"><a href="#v:withUpdFrameOff">withUpdFrameOff</a> :: <a href="GHC-Cmm-Node.html#t:UpdFrameOffset" title="GHC.Cmm.Node">UpdFrameOffset</a> -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> () -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> ()</li><li class="src short"><a href="#v:getUpdFrameOff">getUpdFrameOff</a> :: <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> <a href="GHC-Cmm-Node.html#t:UpdFrameOffset" title="GHC.Cmm.Node">UpdFrameOffset</a></li><li class="src short"><a href="#v:getProfile">getProfile</a> :: <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> <a href="GHC-Platform-Profile.html#t:Profile" title="GHC.Platform.Profile">Profile</a></li><li class="src short"><a href="#v:getPlatform">getPlatform</a> :: <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> <a href="GHC-Platform.html#t:Platform" title="GHC.Platform">Platform</a></li><li class="src short"><a href="#v:getContext">getContext</a> :: <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> <a href="GHC-Utils-Outputable.html#t:SDocContext" title="GHC.Utils.Outputable">SDocContext</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:CmmParse" class="def">CmmParse</a> a <a href="src/GHC.StgToCmm.ExtCode.html#CmmParse" class="link">Source</a> <a href="#t:CmmParse" class="selflink">#</a></p><div class="doc"><p>Does a computation in the FCode monad, with a current environment
      and a list of local declarations. Returns the resulting list of declarations.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:CmmParse">Instances</h4><details id="i:CmmParse" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:CmmParse:Applicative:1"></span> <a href="GHC-Utils-Monad.html#t:Applicative" title="GHC.Utils.Monad">Applicative</a> <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a></span> <a href="src/GHC.StgToCmm.ExtCode.html#line-92" class="link">Source</a> <a href="#t:CmmParse" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:CmmParse:Applicative:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-StgToCmm-ExtCode.html">GHC.StgToCmm.ExtCode</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> a <a href="../base-4.18.2.1/src/GHC.Base.html#pure" class="link">Source</a> <a href="#v:pure" class="selflink">#</a></p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> (a -&gt; b) -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> a -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> b <a href="../base-4.18.2.1/src/GHC.Base.html#%3C%2A%3E" class="link">Source</a> <a href="#v:-60--42--62-" class="selflink">#</a></p><p class="src"><a href="#v:liftA2">liftA2</a> :: (a -&gt; b -&gt; c) -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> a -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> b -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> c <a href="../base-4.18.2.1/src/GHC.Base.html#liftA2" class="link">Source</a> <a href="#v:liftA2" class="selflink">#</a></p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> a -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> b -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> b <a href="../base-4.18.2.1/src/GHC.Base.html#%2A%3E" class="link">Source</a> <a href="#v:-42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> a -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> b -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> a <a href="../base-4.18.2.1/src/GHC.Base.html#%3C%2A" class="link">Source</a> <a href="#v:-60--42-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:CmmParse:Functor:2"></span> <a href="GHC-Prelude-Basic.html#t:Functor" title="GHC.Prelude.Basic">Functor</a> <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a></span> <a href="src/GHC.StgToCmm.ExtCode.html#line-82" class="link">Source</a> <a href="#t:CmmParse" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:CmmParse:Functor:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-StgToCmm-ExtCode.html">GHC.StgToCmm.ExtCode</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> a -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> b <a href="../base-4.18.2.1/src/GHC.Base.html#fmap" class="link">Source</a> <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> b -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> a <a href="../base-4.18.2.1/src/GHC.Base.html#%3C%24" class="link">Source</a> <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:CmmParse:Monad:3"></span> <a href="GHC-Prelude-Basic.html#t:Monad" title="GHC.Prelude.Basic">Monad</a> <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a></span> <a href="src/GHC.StgToCmm.ExtCode.html#line-96" class="link">Source</a> <a href="#t:CmmParse" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:CmmParse:Monad:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-StgToCmm-ExtCode.html">GHC.StgToCmm.ExtCode</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> :: <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> a -&gt; (a -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> b) -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> b <a href="../base-4.18.2.1/src/GHC.Base.html#%3E%3E%3D" class="link">Source</a> <a href="#v:-62--62--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> :: <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> a -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> b -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> b <a href="../base-4.18.2.1/src/GHC.Base.html#%3E%3E" class="link">Source</a> <a href="#v:-62--62-" class="selflink">#</a></p><p class="src"><a href="#v:return">return</a> :: a -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> a <a href="../base-4.18.2.1/src/GHC.Base.html#return" class="link">Source</a> <a href="#v:return" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:CmmParse:MonadUnique:4"></span> <a href="GHC-Types-Unique-Supply.html#t:MonadUnique" title="GHC.Types.Unique.Supply">MonadUnique</a> <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a></span> <a href="src/GHC.StgToCmm.ExtCode.html#line-99" class="link">Source</a> <a href="#t:CmmParse" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:CmmParse:MonadUnique:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-StgToCmm-ExtCode.html">GHC.StgToCmm.ExtCode</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getUniqueSupplyM">getUniqueSupplyM</a> :: <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> <a href="GHC-Types-Unique-Supply.html#t:UniqSupply" title="GHC.Types.Unique.Supply">UniqSupply</a> <a href="src/GHC.Types.Unique.Supply.html#getUniqueSupplyM" class="link">Source</a> <a href="#v:getUniqueSupplyM" class="selflink">#</a></p><p class="src"><a href="#v:getUniqueM">getUniqueM</a> :: <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> <a href="GHC-Types-Unique.html#t:Unique" title="GHC.Types.Unique">Unique</a> <a href="src/GHC.Types.Unique.Supply.html#getUniqueM" class="link">Source</a> <a href="#v:getUniqueM" class="selflink">#</a></p><p class="src"><a href="#v:getUniquesM">getUniquesM</a> :: <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> [<a href="GHC-Types-Unique.html#t:Unique" title="GHC.Types.Unique">Unique</a>] <a href="src/GHC.Types.Unique.Supply.html#getUniquesM" class="link">Source</a> <a href="#v:getUniquesM" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:unEC" class="def">unEC</a> :: <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> a -&gt; <a href="GHC-Prelude-Basic.html#t:String" title="GHC.Prelude.Basic">String</a> -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:Env" title="GHC.StgToCmm.ExtCode">Env</a> -&gt; Decls -&gt; <a href="GHC-StgToCmm-Monad.html#t:FCode" title="GHC.StgToCmm.Monad">FCode</a> (Decls, a) <a href="src/GHC.StgToCmm.ExtCode.html#unEC" class="link">Source</a> <a href="#v:unEC" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Named" class="def">Named</a> <a href="src/GHC.StgToCmm.ExtCode.html#Named" class="link">Source</a> <a href="#t:Named" class="selflink">#</a></p><div class="doc"><p>The environment contains variable definitions or blockids.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:VarN" class="def">VarN</a> <a href="GHC-Cmm-Expr.html#t:CmmExpr" title="GHC.Cmm.Expr">CmmExpr</a></td><td class="doc"><p>Holds CmmLit(CmmLabel ..) which gives the label type,
      eg, RtsLabel, ForeignLabel, CmmLabel etc.</p></td></tr><tr><td class="src"><a id="v:FunN" class="def">FunN</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a></td><td class="doc"><p>A function name from this unit</p></td></tr><tr><td class="src"><a id="v:LabelN" class="def">LabelN</a> <a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a></td><td class="doc"><p>A blockid of some code or data.</p></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Env" class="def">Env</a> = <a href="GHC-Types-Unique-FM.html#t:UniqFM" title="GHC.Types.Unique.FM">UniqFM</a> <a href="GHC-Data-FastString.html#t:FastString" title="GHC.Data.FastString">FastString</a> <a href="GHC-StgToCmm-ExtCode.html#t:Named" title="GHC.StgToCmm.ExtCode">Named</a> <a href="src/GHC.StgToCmm.ExtCode.html#Env" class="link">Source</a> <a href="#t:Env" class="selflink">#</a></p><div class="doc"><p>An environment of named things.</p></div></div><div class="top"><p class="src"><a id="v:loopDecls" class="def">loopDecls</a> :: <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> a -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> a <a href="src/GHC.StgToCmm.ExtCode.html#loopDecls" class="link">Source</a> <a href="#v:loopDecls" class="selflink">#</a></p><div class="doc"><p>Takes the variable declarations and imports from the monad
      and makes an environment, which is looped back into the computation.
      In this way, we can have embedded declarations that scope over the whole
      procedure, and imports that scope over the entire module.
      Discards the local declaration contained within decl'</p></div></div><div class="top"><p class="src"><a id="v:getEnv" class="def">getEnv</a> :: <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> <a href="GHC-StgToCmm-ExtCode.html#t:Env" title="GHC.StgToCmm.ExtCode">Env</a> <a href="src/GHC.StgToCmm.ExtCode.html#getEnv" class="link">Source</a> <a href="#v:getEnv" class="selflink">#</a></p><div class="doc"><p>Get the current environment from the monad.</p></div></div><div class="top"><p class="src"><a id="v:withName" class="def">withName</a> :: <a href="GHC-Prelude-Basic.html#t:String" title="GHC.Prelude.Basic">String</a> -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> a -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> a <a href="src/GHC.StgToCmm.ExtCode.html#withName" class="link">Source</a> <a href="#v:withName" class="selflink">#</a></p><div class="doc"><p>Set context name for a sub-parse</p></div></div><div class="top"><p class="src"><a id="v:getName" class="def">getName</a> :: <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> <a href="GHC-Prelude-Basic.html#t:String" title="GHC.Prelude.Basic">String</a> <a href="src/GHC.StgToCmm.ExtCode.html#getName" class="link">Source</a> <a href="#v:getName" class="selflink">#</a></p><div class="doc"><p>Get the current context name from the monad</p></div></div><div class="top"><p class="src"><a id="v:newLocal" class="def">newLocal</a> <a href="src/GHC.StgToCmm.ExtCode.html#newLocal" class="link">Source</a> <a href="#v:newLocal" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="GHC-Cmm-Type.html#t:CmmType" title="GHC.Cmm.Type">CmmType</a></td><td class="doc"><p>data type</p></td></tr><tr><td class="src">-&gt; <a href="GHC-Data-FastString.html#t:FastString" title="GHC.Data.FastString">FastString</a></td><td class="doc"><p>name of variable</p></td></tr><tr><td class="src">-&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> <a href="GHC-Cmm-Reg.html#t:LocalReg" title="GHC.Cmm.Reg">LocalReg</a></td><td class="doc"><p>register holding the value</p></td></tr></table></div><div class="doc"><p>Create a fresh local variable of a given type.</p></div></div><div class="top"><p class="src"><a id="v:newLabel" class="def">newLabel</a> :: <a href="GHC-Data-FastString.html#t:FastString" title="GHC.Data.FastString">FastString</a> -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> <a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a> <a href="src/GHC.StgToCmm.ExtCode.html#newLabel" class="link">Source</a> <a href="#v:newLabel" class="selflink">#</a></p><div class="doc"><p>Allocate a fresh label.</p></div></div><div class="top"><p class="src"><a id="v:newBlockId" class="def">newBlockId</a> :: <a href="GHC-Types-Unique-Supply.html#t:MonadUnique" title="GHC.Types.Unique.Supply">MonadUnique</a> m =&gt; m <a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a> <a href="src/GHC.Cmm.BlockId.html#newBlockId" class="link">Source</a> <a href="#v:newBlockId" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:newFunctionName" class="def">newFunctionName</a> <a href="src/GHC.StgToCmm.ExtCode.html#newFunctionName" class="link">Source</a> <a href="#v:newFunctionName" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="GHC-Data-FastString.html#t:FastString" title="GHC.Data.FastString">FastString</a></td><td class="doc"><p>name of the function</p></td></tr><tr><td class="src">-&gt; <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a></td><td class="doc"><p>package of the current module</p></td></tr><tr><td class="src">-&gt; ExtCode</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Add a local function to the environment.</p></div></div><div class="top"><p class="src"><a id="v:newImport" class="def">newImport</a> :: (<a href="GHC-Data-FastString.html#t:FastString" title="GHC.Data.FastString">FastString</a>, <a href="GHC-Cmm-CLabel.html#t:CLabel" title="GHC.Cmm.CLabel">CLabel</a>) -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> () <a href="src/GHC.StgToCmm.ExtCode.html#newImport" class="link">Source</a> <a href="#v:newImport" class="selflink">#</a></p><div class="doc"><p>Add an imported foreign label to the list of local declarations.
      If this is done at the start of the module the declaration will scope
      over the whole module.</p></div></div><div class="top"><p class="src"><a id="v:lookupLabel" class="def">lookupLabel</a> :: <a href="GHC-Data-FastString.html#t:FastString" title="GHC.Data.FastString">FastString</a> -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> <a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a> <a href="src/GHC.StgToCmm.ExtCode.html#lookupLabel" class="link">Source</a> <a href="#v:lookupLabel" class="selflink">#</a></p><div class="doc"><p>Lookup the BlockId bound to the label with this name.
      If one hasn't been bound yet, create a fresh one based on the
      Unique of the name.</p></div></div><div class="top"><p class="src"><a id="v:lookupName" class="def">lookupName</a> :: <a href="GHC-Data-FastString.html#t:FastString" title="GHC.Data.FastString">FastString</a> -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> <a href="GHC-Cmm-Expr.html#t:CmmExpr" title="GHC.Cmm.Expr">CmmExpr</a> <a href="src/GHC.StgToCmm.ExtCode.html#lookupName" class="link">Source</a> <a href="#v:lookupName" class="selflink">#</a></p><div class="doc"><p>Lookup the location of a named variable.
      Unknown names are treated as if they had been 'import'ed from the runtime system.
      This saves us a lot of bother in the RTS sources, at the expense of
      deferring some errors to link time.</p></div></div><div class="top"><p class="src"><a id="v:code" class="def">code</a> :: <a href="GHC-StgToCmm-Monad.html#t:FCode" title="GHC.StgToCmm.Monad">FCode</a> a -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> a <a href="src/GHC.StgToCmm.ExtCode.html#code" class="link">Source</a> <a href="#v:code" class="selflink">#</a></p><div class="doc"><p>Lift an FCode computation into the CmmParse monad</p></div></div><div class="top"><p class="src"><a id="v:emit" class="def">emit</a> :: <a href="GHC-Cmm-Graph.html#t:CmmAGraph" title="GHC.Cmm.Graph">CmmAGraph</a> -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> () <a href="src/GHC.StgToCmm.ExtCode.html#emit" class="link">Source</a> <a href="#v:emit" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:emitLabel" class="def">emitLabel</a> :: <a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a> -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> () <a href="src/GHC.StgToCmm.ExtCode.html#emitLabel" class="link">Source</a> <a href="#v:emitLabel" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:emitAssign" class="def">emitAssign</a> :: <a href="GHC-Cmm-Reg.html#t:CmmReg" title="GHC.Cmm.Reg">CmmReg</a> -&gt; <a href="GHC-Cmm-Expr.html#t:CmmExpr" title="GHC.Cmm.Expr">CmmExpr</a> -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> () <a href="src/GHC.StgToCmm.ExtCode.html#emitAssign" class="link">Source</a> <a href="#v:emitAssign" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:emitStore" class="def">emitStore</a> :: <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Cmm-MachOp.html#t:MemoryOrdering" title="GHC.Cmm.MachOp">MemoryOrdering</a> -&gt; <a href="GHC-Cmm-Expr.html#t:CmmExpr" title="GHC.Cmm.Expr">CmmExpr</a> -&gt; <a href="GHC-Cmm-Expr.html#t:CmmExpr" title="GHC.Cmm.Expr">CmmExpr</a> -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> () <a href="src/GHC.StgToCmm.ExtCode.html#emitStore" class="link">Source</a> <a href="#v:emitStore" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getCode" class="def">getCode</a> :: <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> a -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> <a href="GHC-Cmm-Graph.html#t:CmmAGraph" title="GHC.Cmm.Graph">CmmAGraph</a> <a href="src/GHC.StgToCmm.ExtCode.html#getCode" class="link">Source</a> <a href="#v:getCode" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getCodeR" class="def">getCodeR</a> :: <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> a -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> (a, <a href="GHC-Cmm-Graph.html#t:CmmAGraph" title="GHC.Cmm.Graph">CmmAGraph</a>) <a href="src/GHC.StgToCmm.ExtCode.html#getCodeR" class="link">Source</a> <a href="#v:getCodeR" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getCodeScoped" class="def">getCodeScoped</a> :: <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> a -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> (a, <a href="GHC-Cmm-Graph.html#t:CmmAGraphScoped" title="GHC.Cmm.Graph">CmmAGraphScoped</a>) <a href="src/GHC.StgToCmm.ExtCode.html#getCodeScoped" class="link">Source</a> <a href="#v:getCodeScoped" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:emitOutOfLine" class="def">emitOutOfLine</a> :: <a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a> -&gt; <a href="GHC-Cmm-Graph.html#t:CmmAGraphScoped" title="GHC.Cmm.Graph">CmmAGraphScoped</a> -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> () <a href="src/GHC.StgToCmm.ExtCode.html#emitOutOfLine" class="link">Source</a> <a href="#v:emitOutOfLine" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:withUpdFrameOff" class="def">withUpdFrameOff</a> :: <a href="GHC-Cmm-Node.html#t:UpdFrameOffset" title="GHC.Cmm.Node">UpdFrameOffset</a> -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> () -&gt; <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> () <a href="src/GHC.StgToCmm.ExtCode.html#withUpdFrameOff" class="link">Source</a> <a href="#v:withUpdFrameOff" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getUpdFrameOff" class="def">getUpdFrameOff</a> :: <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> <a href="GHC-Cmm-Node.html#t:UpdFrameOffset" title="GHC.Cmm.Node">UpdFrameOffset</a> <a href="src/GHC.StgToCmm.ExtCode.html#getUpdFrameOff" class="link">Source</a> <a href="#v:getUpdFrameOff" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getProfile" class="def">getProfile</a> :: <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> <a href="GHC-Platform-Profile.html#t:Profile" title="GHC.Platform.Profile">Profile</a> <a href="src/GHC.StgToCmm.ExtCode.html#getProfile" class="link">Source</a> <a href="#v:getProfile" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getPlatform" class="def">getPlatform</a> :: <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> <a href="GHC-Platform.html#t:Platform" title="GHC.Platform">Platform</a> <a href="src/GHC.StgToCmm.ExtCode.html#getPlatform" class="link">Source</a> <a href="#v:getPlatform" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getContext" class="def">getContext</a> :: <a href="GHC-StgToCmm-ExtCode.html#t:CmmParse" title="GHC.StgToCmm.ExtCode">CmmParse</a> <a href="GHC-Utils-Outputable.html#t:SDocContext" title="GHC.Utils.Outputable">SDocContext</a> <a href="src/GHC.StgToCmm.ExtCode.html#getContext" class="link">Source</a> <a href="#v:getContext" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>