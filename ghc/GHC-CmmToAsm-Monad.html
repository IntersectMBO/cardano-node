<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>GHC.CmmToAsm.Monad</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ghc-9.6.7: The GHC API</span><ul class="links" id="page-menu"><li><a href="src/GHC.CmmToAsm.Monad.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">GHC.CmmToAsm.Monad</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">64-bit registers on 32-bit architectures</a></li></ul></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:NcgImpl">NcgImpl</a> statics instr jumpDest = <a href="#v:NcgImpl">NcgImpl</a> {<ul class="subs"><li><a href="#v:ncgConfig">ncgConfig</a> :: !<a href="GHC-CmmToAsm-Config.html#t:NCGConfig" title="GHC.CmmToAsm.Config">NCGConfig</a></li><li><a href="#v:cmmTopCodeGen">cmmTopCodeGen</a> :: <a href="GHC-Cmm.html#t:RawCmmDecl" title="GHC.Cmm">RawCmmDecl</a> -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> [<a href="GHC-CmmToAsm-Types.html#t:NatCmmDecl" title="GHC.CmmToAsm.Types">NatCmmDecl</a> statics instr]</li><li><a href="#v:generateJumpTableForInstr">generateJumpTableForInstr</a> :: instr -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> (<a href="GHC-CmmToAsm-Types.html#t:NatCmmDecl" title="GHC.CmmToAsm.Types">NatCmmDecl</a> statics instr)</li><li><a href="#v:getJumpDestBlockId">getJumpDestBlockId</a> :: jumpDest -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a></li><li><a href="#v:canShortcut">canShortcut</a> :: instr -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> jumpDest</li><li><a href="#v:shortcutStatics">shortcutStatics</a> :: (<a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> jumpDest) -&gt; statics -&gt; statics</li><li><a href="#v:shortcutJump">shortcutJump</a> :: (<a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> jumpDest) -&gt; instr -&gt; instr</li><li><a href="#v:pprNatCmmDeclS">pprNatCmmDeclS</a> :: <a href="GHC-CmmToAsm-Types.html#t:NatCmmDecl" title="GHC.CmmToAsm.Types">NatCmmDecl</a> statics instr -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a></li><li><a href="#v:pprNatCmmDeclH">pprNatCmmDeclH</a> :: <a href="GHC-CmmToAsm-Types.html#t:NatCmmDecl" title="GHC.CmmToAsm.Types">NatCmmDecl</a> statics instr -&gt; <a href="GHC-Utils-Outputable.html#t:HDoc" title="GHC.Utils.Outputable">HDoc</a></li><li><a href="#v:maxSpillSlots">maxSpillSlots</a> :: <a href="GHC-Prelude-Basic.html#t:Int" title="GHC.Prelude.Basic">Int</a></li><li><a href="#v:allocatableRegs">allocatableRegs</a> :: [<a href="GHC-Platform-Reg.html#t:RealReg" title="GHC.Platform.Reg">RealReg</a>]</li><li><a href="#v:ncgAllocMoreStack">ncgAllocMoreStack</a> :: <a href="GHC-Prelude-Basic.html#t:Int" title="GHC.Prelude.Basic">Int</a> -&gt; <a href="GHC-CmmToAsm-Types.html#t:NatCmmDecl" title="GHC.CmmToAsm.Types">NatCmmDecl</a> statics instr -&gt; <a href="GHC-Types-Unique-Supply.html#t:UniqSM" title="GHC.Types.Unique.Supply">UniqSM</a> (<a href="GHC-CmmToAsm-Types.html#t:NatCmmDecl" title="GHC.CmmToAsm.Types">NatCmmDecl</a> statics instr, [(<a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a>, <a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a>)])</li><li><a href="#v:ncgMakeFarBranches">ncgMakeFarBranches</a> :: <a href="GHC-Platform.html#t:Platform" title="GHC.Platform">Platform</a> -&gt; <a href="GHC-Cmm-Dataflow-Label.html#t:LabelMap" title="GHC.Cmm.Dataflow.Label">LabelMap</a> <a href="GHC-Cmm.html#t:RawCmmStatics" title="GHC.Cmm">RawCmmStatics</a> -&gt; [<a href="GHC-CmmToAsm-Types.html#t:NatBasicBlock" title="GHC.CmmToAsm.Types">NatBasicBlock</a> instr] -&gt; <a href="GHC-Types-Unique-Supply.html#t:UniqSM" title="GHC.Types.Unique.Supply">UniqSM</a> [<a href="GHC-CmmToAsm-Types.html#t:NatBasicBlock" title="GHC.CmmToAsm.Types">NatBasicBlock</a> instr]</li><li><a href="#v:extractUnwindPoints">extractUnwindPoints</a> :: [instr] -&gt; [<a href="GHC-Cmm-DebugBlock.html#t:UnwindPoint" title="GHC.Cmm.DebugBlock">UnwindPoint</a>]</li><li><a href="#v:invertCondBranches">invertCondBranches</a> :: <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-CmmToAsm-CFG.html#t:CFG" title="GHC.CmmToAsm.CFG">CFG</a> -&gt; <a href="GHC-Cmm-Dataflow-Label.html#t:LabelMap" title="GHC.Cmm.Dataflow.Label">LabelMap</a> <a href="GHC-Cmm.html#t:RawCmmStatics" title="GHC.Cmm">RawCmmStatics</a> -&gt; [<a href="GHC-CmmToAsm-Types.html#t:NatBasicBlock" title="GHC.CmmToAsm.Types">NatBasicBlock</a> instr] -&gt; [<a href="GHC-CmmToAsm-Types.html#t:NatBasicBlock" title="GHC.CmmToAsm.Types">NatBasicBlock</a> instr]</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:NatM_State">NatM_State</a> = <a href="#v:NatM_State">NatM_State</a> {<ul class="subs"><li><a href="#v:natm_us">natm_us</a> :: <a href="GHC-Types-Unique-Supply.html#t:UniqSupply" title="GHC.Types.Unique.Supply">UniqSupply</a></li><li><a href="#v:natm_delta">natm_delta</a> :: <a href="GHC-Prelude-Basic.html#t:Int" title="GHC.Prelude.Basic">Int</a></li><li><a href="#v:natm_imports">natm_imports</a> :: [<a href="GHC-Cmm-CLabel.html#t:CLabel" title="GHC.Cmm.CLabel">CLabel</a>]</li><li><a href="#v:natm_pic">natm_pic</a> :: <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Platform-Reg.html#t:Reg" title="GHC.Platform.Reg">Reg</a></li><li><a href="#v:natm_config">natm_config</a> :: <a href="GHC-CmmToAsm-Config.html#t:NCGConfig" title="GHC.CmmToAsm.Config">NCGConfig</a></li><li><a href="#v:natm_fileid">natm_fileid</a> :: <a href="GHC-CmmToAsm-Monad.html#t:DwarfFiles" title="GHC.CmmToAsm.Monad">DwarfFiles</a></li><li><a href="#v:natm_debug_map">natm_debug_map</a> :: <a href="GHC-Cmm-Dataflow-Label.html#t:LabelMap" title="GHC.Cmm.Dataflow.Label">LabelMap</a> <a href="GHC-Cmm-DebugBlock.html#t:DebugBlock" title="GHC.Cmm.DebugBlock">DebugBlock</a></li><li><a href="#v:natm_cfg">natm_cfg</a> :: <a href="GHC-CmmToAsm-CFG.html#t:CFG" title="GHC.CmmToAsm.CFG">CFG</a></li></ul>}</li><li class="src short"><a href="#v:mkNatM_State">mkNatM_State</a> :: <a href="GHC-Types-Unique-Supply.html#t:UniqSupply" title="GHC.Types.Unique.Supply">UniqSupply</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Int" title="GHC.Prelude.Basic">Int</a> -&gt; <a href="GHC-CmmToAsm-Config.html#t:NCGConfig" title="GHC.CmmToAsm.Config">NCGConfig</a> -&gt; <a href="GHC-CmmToAsm-Monad.html#t:DwarfFiles" title="GHC.CmmToAsm.Monad">DwarfFiles</a> -&gt; <a href="GHC-Cmm-Dataflow-Label.html#t:LabelMap" title="GHC.Cmm.Dataflow.Label">LabelMap</a> <a href="GHC-Cmm-DebugBlock.html#t:DebugBlock" title="GHC.Cmm.DebugBlock">DebugBlock</a> -&gt; <a href="GHC-CmmToAsm-CFG.html#t:CFG" title="GHC.CmmToAsm.CFG">CFG</a> -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM_State" title="GHC.CmmToAsm.Monad">NatM_State</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:NatM">NatM</a> a</li><li class="src short"><a href="#v:initNat">initNat</a> :: <a href="GHC-CmmToAsm-Monad.html#t:NatM_State" title="GHC.CmmToAsm.Monad">NatM_State</a> -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> a -&gt; (a, <a href="GHC-CmmToAsm-Monad.html#t:NatM_State" title="GHC.CmmToAsm.Monad">NatM_State</a>)</li><li class="src short"><a href="#v:addImportNat">addImportNat</a> :: <a href="GHC-Cmm-CLabel.html#t:CLabel" title="GHC.Cmm.CLabel">CLabel</a> -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> ()</li><li class="src short"><a href="#v:addNodeBetweenNat">addNodeBetweenNat</a> :: <a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a> -&gt; <a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a> -&gt; <a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a> -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> ()</li><li class="src short"><a href="#v:addImmediateSuccessorNat">addImmediateSuccessorNat</a> :: <a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a> -&gt; <a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a> -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> ()</li><li class="src short"><a href="#v:updateCfgNat">updateCfgNat</a> :: (<a href="GHC-CmmToAsm-CFG.html#t:CFG" title="GHC.CmmToAsm.CFG">CFG</a> -&gt; <a href="GHC-CmmToAsm-CFG.html#t:CFG" title="GHC.CmmToAsm.CFG">CFG</a>) -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> ()</li><li class="src short"><a href="#v:getUniqueNat">getUniqueNat</a> :: <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> <a href="GHC-Types-Unique.html#t:Unique" title="GHC.Types.Unique">Unique</a></li><li class="src short"><a href="#v:setDeltaNat">setDeltaNat</a> :: <a href="GHC-Prelude-Basic.html#t:Int" title="GHC.Prelude.Basic">Int</a> -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> ()</li><li class="src short"><a href="#v:getConfig">getConfig</a> :: <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> <a href="GHC-CmmToAsm-Config.html#t:NCGConfig" title="GHC.CmmToAsm.Config">NCGConfig</a></li><li class="src short"><a href="#v:getPlatform">getPlatform</a> :: <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> <a href="GHC-Platform.html#t:Platform" title="GHC.Platform">Platform</a></li><li class="src short"><a href="#v:getDeltaNat">getDeltaNat</a> :: <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> <a href="GHC-Prelude-Basic.html#t:Int" title="GHC.Prelude.Basic">Int</a></li><li class="src short"><a href="#v:getThisModuleNat">getThisModuleNat</a> :: <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a></li><li class="src short"><a href="#v:getBlockIdNat">getBlockIdNat</a> :: <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> <a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a></li><li class="src short"><a href="#v:getNewLabelNat">getNewLabelNat</a> :: <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> <a href="GHC-Cmm-CLabel.html#t:CLabel" title="GHC.Cmm.CLabel">CLabel</a></li><li class="src short"><a href="#v:getNewRegNat">getNewRegNat</a> :: <a href="GHC-CmmToAsm-Format.html#t:Format" title="GHC.CmmToAsm.Format">Format</a> -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> <a href="GHC-Platform-Reg.html#t:Reg" title="GHC.Platform.Reg">Reg</a></li><li class="src short"><a href="#v:getPicBaseMaybeNat">getPicBaseMaybeNat</a> :: <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> (<a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Platform-Reg.html#t:Reg" title="GHC.Platform.Reg">Reg</a>)</li><li class="src short"><a href="#v:getPicBaseNat">getPicBaseNat</a> :: <a href="GHC-CmmToAsm-Format.html#t:Format" title="GHC.CmmToAsm.Format">Format</a> -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> <a href="GHC-Platform-Reg.html#t:Reg" title="GHC.Platform.Reg">Reg</a></li><li class="src short"><a href="#v:getCfgWeights">getCfgWeights</a> :: <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> <a href="GHC-CmmToAsm-CFG-Weight.html#t:Weights" title="GHC.CmmToAsm.CFG.Weight">Weights</a></li><li class="src short"><a href="#v:getFileId">getFileId</a> :: <a href="GHC-Data-FastString.html#t:FastString" title="GHC.Data.FastString">FastString</a> -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> <a href="GHC-Prelude-Basic.html#t:Int" title="GHC.Prelude.Basic">Int</a></li><li class="src short"><a href="#v:getDebugBlock">getDebugBlock</a> :: <a href="GHC-Cmm-Dataflow-Label.html#t:Label" title="GHC.Cmm.Dataflow.Label">Label</a> -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> (<a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Cmm-DebugBlock.html#t:DebugBlock" title="GHC.Cmm.DebugBlock">DebugBlock</a>)</li><li class="src short"><span class="keyword">type</span> <a href="#t:DwarfFiles">DwarfFiles</a> = <a href="GHC-Types-Unique-FM.html#t:UniqFM" title="GHC.Types.Unique.FM">UniqFM</a> <a href="GHC-Data-FastString.html#t:FastString" title="GHC.Data.FastString">FastString</a> (<a href="GHC-Data-FastString.html#t:FastString" title="GHC.Data.FastString">FastString</a>, <a href="GHC-Prelude-Basic.html#t:Int" title="GHC.Prelude.Basic">Int</a>)</li><li class="src short"><span class="keyword">data</span> <a href="#t:Reg64">Reg64</a> = <a href="#v:Reg64">Reg64</a> !<a href="GHC-Platform-Reg.html#t:Reg" title="GHC.Platform.Reg">Reg</a> !<a href="GHC-Platform-Reg.html#t:Reg" title="GHC.Platform.Reg">Reg</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:RegCode64">RegCode64</a> code = <a href="#v:RegCode64">RegCode64</a> code !<a href="GHC-Platform-Reg.html#t:Reg" title="GHC.Platform.Reg">Reg</a> !<a href="GHC-Platform-Reg.html#t:Reg" title="GHC.Platform.Reg">Reg</a></li><li class="src short"><a href="#v:getNewReg64">getNewReg64</a> :: <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> <a href="GHC-CmmToAsm-Monad.html#t:Reg64" title="GHC.CmmToAsm.Monad">Reg64</a></li><li class="src short"><a href="#v:localReg64">localReg64</a> :: <a href="GHC-Utils-Misc.html#t:HasDebugCallStack" title="GHC.Utils.Misc">HasDebugCallStack</a> =&gt; <a href="GHC-Cmm-Reg.html#t:LocalReg" title="GHC.Cmm.Reg">LocalReg</a> -&gt; <a href="GHC-CmmToAsm-Monad.html#t:Reg64" title="GHC.CmmToAsm.Monad">Reg64</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:NcgImpl" class="def">NcgImpl</a> statics instr jumpDest <a href="src/GHC.CmmToAsm.Monad.html#NcgImpl" class="link">Source</a> <a href="#t:NcgImpl" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:NcgImpl" class="def">NcgImpl</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:ncgConfig" class="def">ncgConfig</a> :: !<a href="GHC-CmmToAsm-Config.html#t:NCGConfig" title="GHC.CmmToAsm.Config">NCGConfig</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:cmmTopCodeGen" class="def">cmmTopCodeGen</a> :: <a href="GHC-Cmm.html#t:RawCmmDecl" title="GHC.Cmm">RawCmmDecl</a> -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> [<a href="GHC-CmmToAsm-Types.html#t:NatCmmDecl" title="GHC.CmmToAsm.Types">NatCmmDecl</a> statics instr]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:generateJumpTableForInstr" class="def">generateJumpTableForInstr</a> :: instr -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> (<a href="GHC-CmmToAsm-Types.html#t:NatCmmDecl" title="GHC.CmmToAsm.Types">NatCmmDecl</a> statics instr)</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:getJumpDestBlockId" class="def">getJumpDestBlockId</a> :: jumpDest -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:canShortcut" class="def">canShortcut</a> :: instr -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> jumpDest</dfn><div class="doc"><p>Does this jump always jump to a single destination and is shortcutable?</p><p>We use this to determine shortcutable instructions - See Note [What is shortcutting]
 Note that if we return a destination here we *most* support the relevant shortcutting in
 shortcutStatics for jump tables and shortcutJump for the instructions itself.</p></div></li><li><dfn class="src"><a id="v:shortcutStatics" class="def">shortcutStatics</a> :: (<a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> jumpDest) -&gt; statics -&gt; statics</dfn><div class="doc"><p>Replace references to blockIds with other destinations - used to update jump tables.</p></div></li><li><dfn class="src"><a id="v:shortcutJump" class="def">shortcutJump</a> :: (<a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> jumpDest) -&gt; instr -&gt; instr</dfn><div class="doc"><p>Change the jump destination(s) of an instruction.</p></div></li><li><dfn class="src"><a id="v:pprNatCmmDeclS" class="def">pprNatCmmDeclS</a> :: <a href="GHC-CmmToAsm-Types.html#t:NatCmmDecl" title="GHC.CmmToAsm.Types">NatCmmDecl</a> statics instr -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a></dfn><div class="doc"><p><code><a href="GHC-Unit-Types.html#t:GenModule" title="GHC.Unit.Types">GenModule</a></code> is only for printing internal labels. See Note [Internal proc
 labels] in CLabel.</p></div></li><li><dfn class="src"><a id="v:pprNatCmmDeclH" class="def">pprNatCmmDeclH</a> :: <a href="GHC-CmmToAsm-Types.html#t:NatCmmDecl" title="GHC.CmmToAsm.Types">NatCmmDecl</a> statics instr -&gt; <a href="GHC-Utils-Outputable.html#t:HDoc" title="GHC.Utils.Outputable">HDoc</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:maxSpillSlots" class="def">maxSpillSlots</a> :: <a href="GHC-Prelude-Basic.html#t:Int" title="GHC.Prelude.Basic">Int</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:allocatableRegs" class="def">allocatableRegs</a> :: [<a href="GHC-Platform-Reg.html#t:RealReg" title="GHC.Platform.Reg">RealReg</a>]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ncgAllocMoreStack" class="def">ncgAllocMoreStack</a> :: <a href="GHC-Prelude-Basic.html#t:Int" title="GHC.Prelude.Basic">Int</a> -&gt; <a href="GHC-CmmToAsm-Types.html#t:NatCmmDecl" title="GHC.CmmToAsm.Types">NatCmmDecl</a> statics instr -&gt; <a href="GHC-Types-Unique-Supply.html#t:UniqSM" title="GHC.Types.Unique.Supply">UniqSM</a> (<a href="GHC-CmmToAsm-Types.html#t:NatCmmDecl" title="GHC.CmmToAsm.Types">NatCmmDecl</a> statics instr, [(<a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a>, <a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a>)])</dfn><div class="doc"><p>The list of block ids records the redirected jumps to allow us to update
 the CFG.</p></div></li><li><dfn class="src"><a id="v:ncgMakeFarBranches" class="def">ncgMakeFarBranches</a> :: <a href="GHC-Platform.html#t:Platform" title="GHC.Platform">Platform</a> -&gt; <a href="GHC-Cmm-Dataflow-Label.html#t:LabelMap" title="GHC.Cmm.Dataflow.Label">LabelMap</a> <a href="GHC-Cmm.html#t:RawCmmStatics" title="GHC.Cmm">RawCmmStatics</a> -&gt; [<a href="GHC-CmmToAsm-Types.html#t:NatBasicBlock" title="GHC.CmmToAsm.Types">NatBasicBlock</a> instr] -&gt; <a href="GHC-Types-Unique-Supply.html#t:UniqSM" title="GHC.Types.Unique.Supply">UniqSM</a> [<a href="GHC-CmmToAsm-Types.html#t:NatBasicBlock" title="GHC.CmmToAsm.Types">NatBasicBlock</a> instr]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:extractUnwindPoints" class="def">extractUnwindPoints</a> :: [instr] -&gt; [<a href="GHC-Cmm-DebugBlock.html#t:UnwindPoint" title="GHC.Cmm.DebugBlock">UnwindPoint</a>]</dfn><div class="doc"><p>given the instruction sequence of a block, produce a list of
 the block's <code><a href="GHC-Cmm-DebugBlock.html#t:UnwindPoint" title="GHC.Cmm.DebugBlock">UnwindPoint</a></code>s
 See Note [What is this unwinding business?] in <a href="GHC-Cmm-DebugBlock.html">GHC.Cmm.DebugBlock</a>
 and Note [Unwinding information in the NCG] in this module.</p></div></li><li><dfn class="src"><a id="v:invertCondBranches" class="def">invertCondBranches</a> :: <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-CmmToAsm-CFG.html#t:CFG" title="GHC.CmmToAsm.CFG">CFG</a> -&gt; <a href="GHC-Cmm-Dataflow-Label.html#t:LabelMap" title="GHC.Cmm.Dataflow.Label">LabelMap</a> <a href="GHC-Cmm.html#t:RawCmmStatics" title="GHC.Cmm">RawCmmStatics</a> -&gt; [<a href="GHC-CmmToAsm-Types.html#t:NatBasicBlock" title="GHC.CmmToAsm.Types">NatBasicBlock</a> instr] -&gt; [<a href="GHC-CmmToAsm-Types.html#t:NatBasicBlock" title="GHC.CmmToAsm.Types">NatBasicBlock</a> instr]</dfn><div class="doc"><p>Turn the sequence of <code>jcc l1; jmp l2</code> into <code>jncc l2; &lt;block_l1&gt;</code>
 when possible.</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:NatM_State" class="def">NatM_State</a> <a href="src/GHC.CmmToAsm.Monad.html#NatM_State" class="link">Source</a> <a href="#t:NatM_State" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:NatM_State" class="def">NatM_State</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:natm_us" class="def">natm_us</a> :: <a href="GHC-Types-Unique-Supply.html#t:UniqSupply" title="GHC.Types.Unique.Supply">UniqSupply</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:natm_delta" class="def">natm_delta</a> :: <a href="GHC-Prelude-Basic.html#t:Int" title="GHC.Prelude.Basic">Int</a></dfn><div class="doc"><p>Stack offset for unwinding information</p></div></li><li><dfn class="src"><a id="v:natm_imports" class="def">natm_imports</a> :: [<a href="GHC-Cmm-CLabel.html#t:CLabel" title="GHC.Cmm.CLabel">CLabel</a>]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:natm_pic" class="def">natm_pic</a> :: <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Platform-Reg.html#t:Reg" title="GHC.Platform.Reg">Reg</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:natm_config" class="def">natm_config</a> :: <a href="GHC-CmmToAsm-Config.html#t:NCGConfig" title="GHC.CmmToAsm.Config">NCGConfig</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:natm_fileid" class="def">natm_fileid</a> :: <a href="GHC-CmmToAsm-Monad.html#t:DwarfFiles" title="GHC.CmmToAsm.Monad">DwarfFiles</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:natm_debug_map" class="def">natm_debug_map</a> :: <a href="GHC-Cmm-Dataflow-Label.html#t:LabelMap" title="GHC.Cmm.Dataflow.Label">LabelMap</a> <a href="GHC-Cmm-DebugBlock.html#t:DebugBlock" title="GHC.Cmm.DebugBlock">DebugBlock</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:natm_cfg" class="def">natm_cfg</a> :: <a href="GHC-CmmToAsm-CFG.html#t:CFG" title="GHC.CmmToAsm.CFG">CFG</a></dfn><div class="doc"><p>Having a CFG with additional information is essential for some
 operations. However we can't reconstruct all information once we
 generated instructions. So instead we update the CFG as we go.</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:mkNatM_State" class="def">mkNatM_State</a> :: <a href="GHC-Types-Unique-Supply.html#t:UniqSupply" title="GHC.Types.Unique.Supply">UniqSupply</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Int" title="GHC.Prelude.Basic">Int</a> -&gt; <a href="GHC-CmmToAsm-Config.html#t:NCGConfig" title="GHC.CmmToAsm.Config">NCGConfig</a> -&gt; <a href="GHC-CmmToAsm-Monad.html#t:DwarfFiles" title="GHC.CmmToAsm.Monad">DwarfFiles</a> -&gt; <a href="GHC-Cmm-Dataflow-Label.html#t:LabelMap" title="GHC.Cmm.Dataflow.Label">LabelMap</a> <a href="GHC-Cmm-DebugBlock.html#t:DebugBlock" title="GHC.Cmm.DebugBlock">DebugBlock</a> -&gt; <a href="GHC-CmmToAsm-CFG.html#t:CFG" title="GHC.CmmToAsm.CFG">CFG</a> -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM_State" title="GHC.CmmToAsm.Monad">NatM_State</a> <a href="src/GHC.CmmToAsm.Monad.html#mkNatM_State" class="link">Source</a> <a href="#v:mkNatM_State" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:NatM" class="def">NatM</a> a <a href="src/GHC.CmmToAsm.Monad.html#NatM" class="link">Source</a> <a href="#t:NatM" class="selflink">#</a></p><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:NatM">Instances</h4><details id="i:NatM" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:NatM:Applicative:1"></span> <a href="GHC-Utils-Monad.html#t:Applicative" title="GHC.Utils.Monad">Applicative</a> <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a></span> <a href="src/GHC.CmmToAsm.Monad.html#line-186" class="link">Source</a> <a href="#t:NatM" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:NatM:Applicative:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-CmmToAsm-Monad.html">GHC.CmmToAsm.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> a <a href="../base-4.18.3.0/src/GHC.Base.html#pure" class="link">Source</a> <a href="#v:pure" class="selflink">#</a></p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> (a -&gt; b) -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> a -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> b <a href="../base-4.18.3.0/src/GHC.Base.html#%3C%2A%3E" class="link">Source</a> <a href="#v:-60--42--62-" class="selflink">#</a></p><p class="src"><a href="#v:liftA2">liftA2</a> :: (a -&gt; b -&gt; c) -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> a -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> b -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> c <a href="../base-4.18.3.0/src/GHC.Base.html#liftA2" class="link">Source</a> <a href="#v:liftA2" class="selflink">#</a></p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> a -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> b -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> b <a href="../base-4.18.3.0/src/GHC.Base.html#%2A%3E" class="link">Source</a> <a href="#v:-42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> a -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> b -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> a <a href="../base-4.18.3.0/src/GHC.Base.html#%3C%2A" class="link">Source</a> <a href="#v:-60--42-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:NatM:Functor:2"></span> <a href="GHC-Prelude-Basic.html#t:Functor" title="GHC.Prelude.Basic">Functor</a> <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a></span> <a href="src/GHC.CmmToAsm.Monad.html#line-185" class="link">Source</a> <a href="#t:NatM" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:NatM:Functor:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-CmmToAsm-Monad.html">GHC.CmmToAsm.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> a -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> b <a href="../base-4.18.3.0/src/GHC.Base.html#fmap" class="link">Source</a> <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> b -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> a <a href="../base-4.18.3.0/src/GHC.Base.html#%3C%24" class="link">Source</a> <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:NatM:Monad:3"></span> <a href="GHC-Prelude-Basic.html#t:Monad" title="GHC.Prelude.Basic">Monad</a> <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a></span> <a href="src/GHC.CmmToAsm.Monad.html#line-186" class="link">Source</a> <a href="#t:NatM" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:NatM:Monad:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-CmmToAsm-Monad.html">GHC.CmmToAsm.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> :: <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> a -&gt; (a -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> b) -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> b <a href="../base-4.18.3.0/src/GHC.Base.html#%3E%3E%3D" class="link">Source</a> <a href="#v:-62--62--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> :: <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> a -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> b -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> b <a href="../base-4.18.3.0/src/GHC.Base.html#%3E%3E" class="link">Source</a> <a href="#v:-62--62-" class="selflink">#</a></p><p class="src"><a href="#v:return">return</a> :: a -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> a <a href="../base-4.18.3.0/src/GHC.Base.html#return" class="link">Source</a> <a href="#v:return" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:NatM:CmmMakeDynamicReferenceM:4"></span> <a href="GHC-CmmToAsm-PIC.html#t:CmmMakeDynamicReferenceM" title="GHC.CmmToAsm.PIC">CmmMakeDynamicReferenceM</a> <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a></span> <a href="src/GHC.CmmToAsm.PIC.html#line-99" class="link">Source</a> <a href="#t:CmmMakeDynamicReferenceM" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:NatM:CmmMakeDynamicReferenceM:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-CmmToAsm-PIC.html">GHC.CmmToAsm.PIC</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:addImport">addImport</a> :: <a href="GHC-Cmm-CLabel.html#t:CLabel" title="GHC.Cmm.CLabel">CLabel</a> -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> () <a href="src/GHC.CmmToAsm.PIC.html#addImport" class="link">Source</a> <a href="#v:addImport" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:NatM:MonadUnique:5"></span> <a href="GHC-Types-Unique-Supply.html#t:MonadUnique" title="GHC.Types.Unique.Supply">MonadUnique</a> <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a></span> <a href="src/GHC.CmmToAsm.Monad.html#line-214" class="link">Source</a> <a href="#t:NatM" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:NatM:MonadUnique:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-CmmToAsm-Monad.html">GHC.CmmToAsm.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getUniqueSupplyM">getUniqueSupplyM</a> :: <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> <a href="GHC-Types-Unique-Supply.html#t:UniqSupply" title="GHC.Types.Unique.Supply">UniqSupply</a> <a href="src/GHC.Types.Unique.Supply.html#getUniqueSupplyM" class="link">Source</a> <a href="#v:getUniqueSupplyM" class="selflink">#</a></p><p class="src"><a href="#v:getUniqueM">getUniqueM</a> :: <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> <a href="GHC-Types-Unique.html#t:Unique" title="GHC.Types.Unique">Unique</a> <a href="src/GHC.Types.Unique.Supply.html#getUniqueM" class="link">Source</a> <a href="#v:getUniqueM" class="selflink">#</a></p><p class="src"><a href="#v:getUniquesM">getUniquesM</a> :: <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> [<a href="GHC-Types-Unique.html#t:Unique" title="GHC.Types.Unique">Unique</a>] <a href="src/GHC.Types.Unique.Supply.html#getUniquesM" class="link">Source</a> <a href="#v:getUniquesM" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:NatM:HasModule:6"></span> <a href="GHC-Unit-Module.html#t:HasModule" title="GHC.Unit.Module">HasModule</a> <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a></span> <a href="src/GHC.CmmToAsm.Monad.html#line-241" class="link">Source</a> <a href="#t:NatM" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:NatM:HasModule:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-CmmToAsm-Monad.html">GHC.CmmToAsm.Monad</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getModule">getModule</a> :: <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a> <a href="src/GHC.Unit.Module.html#getModule" class="link">Source</a> <a href="#v:getModule" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:initNat" class="def">initNat</a> :: <a href="GHC-CmmToAsm-Monad.html#t:NatM_State" title="GHC.CmmToAsm.Monad">NatM_State</a> -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> a -&gt; (a, <a href="GHC-CmmToAsm-Monad.html#t:NatM_State" title="GHC.CmmToAsm.Monad">NatM_State</a>) <a href="src/GHC.CmmToAsm.Monad.html#initNat" class="link">Source</a> <a href="#v:initNat" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:addImportNat" class="def">addImportNat</a> :: <a href="GHC-Cmm-CLabel.html#t:CLabel" title="GHC.Cmm.CLabel">CLabel</a> -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> () <a href="src/GHC.CmmToAsm.Monad.html#addImportNat" class="link">Source</a> <a href="#v:addImportNat" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:addNodeBetweenNat" class="def">addNodeBetweenNat</a> :: <a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a> -&gt; <a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a> -&gt; <a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a> -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> () <a href="src/GHC.CmmToAsm.Monad.html#addNodeBetweenNat" class="link">Source</a> <a href="#v:addNodeBetweenNat" class="selflink">#</a></p><div class="doc"><p>Record that we added a block between <code>from</code> and <code>old</code>.</p></div></div><div class="top"><p class="src"><a id="v:addImmediateSuccessorNat" class="def">addImmediateSuccessorNat</a> :: <a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a> -&gt; <a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a> -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> () <a href="src/GHC.CmmToAsm.Monad.html#addImmediateSuccessorNat" class="link">Source</a> <a href="#v:addImmediateSuccessorNat" class="selflink">#</a></p><div class="doc"><p>Place <code><a href="GHC-Prelude-Basic.html#v:succ" title="GHC.Prelude.Basic">succ</a></code> after <code>block</code> and change any edges
   block -&gt; X to <code><a href="GHC-Prelude-Basic.html#v:succ" title="GHC.Prelude.Basic">succ</a></code> -&gt; X</p></div></div><div class="top"><p class="src"><a id="v:updateCfgNat" class="def">updateCfgNat</a> :: (<a href="GHC-CmmToAsm-CFG.html#t:CFG" title="GHC.CmmToAsm.CFG">CFG</a> -&gt; <a href="GHC-CmmToAsm-CFG.html#t:CFG" title="GHC.CmmToAsm.CFG">CFG</a>) -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> () <a href="src/GHC.CmmToAsm.Monad.html#updateCfgNat" class="link">Source</a> <a href="#v:updateCfgNat" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getUniqueNat" class="def">getUniqueNat</a> :: <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> <a href="GHC-Types-Unique.html#t:Unique" title="GHC.Types.Unique">Unique</a> <a href="src/GHC.CmmToAsm.Monad.html#getUniqueNat" class="link">Source</a> <a href="#v:getUniqueNat" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:setDeltaNat" class="def">setDeltaNat</a> :: <a href="GHC-Prelude-Basic.html#t:Int" title="GHC.Prelude.Basic">Int</a> -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> () <a href="src/GHC.CmmToAsm.Monad.html#setDeltaNat" class="link">Source</a> <a href="#v:setDeltaNat" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getConfig" class="def">getConfig</a> :: <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> <a href="GHC-CmmToAsm-Config.html#t:NCGConfig" title="GHC.CmmToAsm.Config">NCGConfig</a> <a href="src/GHC.CmmToAsm.Monad.html#getConfig" class="link">Source</a> <a href="#v:getConfig" class="selflink">#</a></p><div class="doc"><p>Get native code generator configuration</p></div></div><div class="top"><p class="src"><a id="v:getPlatform" class="def">getPlatform</a> :: <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> <a href="GHC-Platform.html#t:Platform" title="GHC.Platform">Platform</a> <a href="src/GHC.CmmToAsm.Monad.html#getPlatform" class="link">Source</a> <a href="#v:getPlatform" class="selflink">#</a></p><div class="doc"><p>Get target platform from native code generator configuration</p></div></div><div class="top"><p class="src"><a id="v:getDeltaNat" class="def">getDeltaNat</a> :: <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> <a href="GHC-Prelude-Basic.html#t:Int" title="GHC.Prelude.Basic">Int</a> <a href="src/GHC.CmmToAsm.Monad.html#getDeltaNat" class="link">Source</a> <a href="#v:getDeltaNat" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getThisModuleNat" class="def">getThisModuleNat</a> :: <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a> <a href="src/GHC.CmmToAsm.Monad.html#getThisModuleNat" class="link">Source</a> <a href="#v:getThisModuleNat" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getBlockIdNat" class="def">getBlockIdNat</a> :: <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> <a href="GHC-Cmm-BlockId.html#t:BlockId" title="GHC.Cmm.BlockId">BlockId</a> <a href="src/GHC.CmmToAsm.Monad.html#getBlockIdNat" class="link">Source</a> <a href="#v:getBlockIdNat" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getNewLabelNat" class="def">getNewLabelNat</a> :: <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> <a href="GHC-Cmm-CLabel.html#t:CLabel" title="GHC.Cmm.CLabel">CLabel</a> <a href="src/GHC.CmmToAsm.Monad.html#getNewLabelNat" class="link">Source</a> <a href="#v:getNewLabelNat" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getNewRegNat" class="def">getNewRegNat</a> :: <a href="GHC-CmmToAsm-Format.html#t:Format" title="GHC.CmmToAsm.Format">Format</a> -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> <a href="GHC-Platform-Reg.html#t:Reg" title="GHC.Platform.Reg">Reg</a> <a href="src/GHC.CmmToAsm.Monad.html#getNewRegNat" class="link">Source</a> <a href="#v:getNewRegNat" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getPicBaseMaybeNat" class="def">getPicBaseMaybeNat</a> :: <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> (<a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Platform-Reg.html#t:Reg" title="GHC.Platform.Reg">Reg</a>) <a href="src/GHC.CmmToAsm.Monad.html#getPicBaseMaybeNat" class="link">Source</a> <a href="#v:getPicBaseMaybeNat" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getPicBaseNat" class="def">getPicBaseNat</a> :: <a href="GHC-CmmToAsm-Format.html#t:Format" title="GHC.CmmToAsm.Format">Format</a> -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> <a href="GHC-Platform-Reg.html#t:Reg" title="GHC.Platform.Reg">Reg</a> <a href="src/GHC.CmmToAsm.Monad.html#getPicBaseNat" class="link">Source</a> <a href="#v:getPicBaseNat" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getCfgWeights" class="def">getCfgWeights</a> :: <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> <a href="GHC-CmmToAsm-CFG-Weight.html#t:Weights" title="GHC.CmmToAsm.CFG.Weight">Weights</a> <a href="src/GHC.CmmToAsm.Monad.html#getCfgWeights" class="link">Source</a> <a href="#v:getCfgWeights" class="selflink">#</a></p><div class="doc"><p>Get CFG edge weights</p></div></div><div class="top"><p class="src"><a id="v:getFileId" class="def">getFileId</a> :: <a href="GHC-Data-FastString.html#t:FastString" title="GHC.Data.FastString">FastString</a> -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> <a href="GHC-Prelude-Basic.html#t:Int" title="GHC.Prelude.Basic">Int</a> <a href="src/GHC.CmmToAsm.Monad.html#getFileId" class="link">Source</a> <a href="#v:getFileId" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getDebugBlock" class="def">getDebugBlock</a> :: <a href="GHC-Cmm-Dataflow-Label.html#t:Label" title="GHC.Cmm.Dataflow.Label">Label</a> -&gt; <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> (<a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Cmm-DebugBlock.html#t:DebugBlock" title="GHC.Cmm.DebugBlock">DebugBlock</a>) <a href="src/GHC.CmmToAsm.Monad.html#getDebugBlock" class="link">Source</a> <a href="#v:getDebugBlock" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:DwarfFiles" class="def">DwarfFiles</a> = <a href="GHC-Types-Unique-FM.html#t:UniqFM" title="GHC.Types.Unique.FM">UniqFM</a> <a href="GHC-Data-FastString.html#t:FastString" title="GHC.Data.FastString">FastString</a> (<a href="GHC-Data-FastString.html#t:FastString" title="GHC.Data.FastString">FastString</a>, <a href="GHC-Prelude-Basic.html#t:Int" title="GHC.Prelude.Basic">Int</a>) <a href="src/GHC.CmmToAsm.Monad.html#DwarfFiles" class="link">Source</a> <a href="#t:DwarfFiles" class="selflink">#</a></p></div><a href="#g:1" id="g:1"><h1>64-bit registers on 32-bit architectures</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Reg64" class="def">Reg64</a> <a href="src/GHC.CmmToAsm.Monad.html#Reg64" class="link">Source</a> <a href="#t:Reg64" class="selflink">#</a></p><div class="doc"><p>Two 32-bit regs used as a single virtual 64-bit register</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Reg64" class="def">Reg64</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src">!<a href="GHC-Platform-Reg.html#t:Reg" title="GHC.Platform.Reg">Reg</a></dfn><div class="doc"><p>Higher part</p></div></li><li><dfn class="src">!<a href="GHC-Platform-Reg.html#t:Reg" title="GHC.Platform.Reg">Reg</a></dfn><div class="doc"><p>Lower part</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:RegCode64" class="def">RegCode64</a> code <a href="src/GHC.CmmToAsm.Monad.html#RegCode64" class="link">Source</a> <a href="#t:RegCode64" class="selflink">#</a></p><div class="doc"><p>Two 32-bit regs used as a single virtual 64-bit register
 and the code to set them appropriately</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:RegCode64" class="def">RegCode64</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src">code</dfn><div class="doc"><p>Code to initialize the registers</p></div></li><li><dfn class="src">!<a href="GHC-Platform-Reg.html#t:Reg" title="GHC.Platform.Reg">Reg</a></dfn><div class="doc"><p>Higher part</p></div></li><li><dfn class="src">!<a href="GHC-Platform-Reg.html#t:Reg" title="GHC.Platform.Reg">Reg</a></dfn><div class="doc"><p>Lower part</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:getNewReg64" class="def">getNewReg64</a> :: <a href="GHC-CmmToAsm-Monad.html#t:NatM" title="GHC.CmmToAsm.Monad">NatM</a> <a href="GHC-CmmToAsm-Monad.html#t:Reg64" title="GHC.CmmToAsm.Monad">Reg64</a> <a href="src/GHC.CmmToAsm.Monad.html#getNewReg64" class="link">Source</a> <a href="#v:getNewReg64" class="selflink">#</a></p><div class="doc"><p>Return a virtual 64-bit register</p></div></div><div class="top"><p class="src"><a id="v:localReg64" class="def">localReg64</a> :: <a href="GHC-Utils-Misc.html#t:HasDebugCallStack" title="GHC.Utils.Misc">HasDebugCallStack</a> =&gt; <a href="GHC-Cmm-Reg.html#t:LocalReg" title="GHC.Cmm.Reg">LocalReg</a> -&gt; <a href="GHC-CmmToAsm-Monad.html#t:Reg64" title="GHC.CmmToAsm.Monad">Reg64</a> <a href="src/GHC.CmmToAsm.Monad.html#localReg64" class="link">Source</a> <a href="#v:localReg64" class="selflink">#</a></p><div class="doc"><p>Convert a 64-bit LocalReg into two virtual 32-bit regs.</p><p>Used to handle 64-bit &quot;registers&quot; on 32-bit architectures</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>