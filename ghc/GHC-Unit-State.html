<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>GHC.Unit.State</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ghc-9.6.7: The GHC API</span><ul class="links" id="page-menu"><li><a href="src/GHC.Unit.State.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">GHC.Unit.State</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Reading the package config, and processing cmdline args</a></li><li><a href="#g:2">Querying the package config</a></li><li><a href="#g:3">Module hole substitution</a></li><li><a href="#g:4">Pretty-printing</a></li><li><a href="#g:5">Utils</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Unit manipulation</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short">module <a href="GHC-Unit-Info.html">GHC.Unit.Info</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:UnitState">UnitState</a> = <a href="#v:UnitState">UnitState</a> {<ul class="subs"><li><a href="#v:unitInfoMap">unitInfoMap</a> :: <a href="GHC-Unit-State.html#t:UnitInfoMap" title="GHC.Unit.State">UnitInfoMap</a></li><li><a href="#v:preloadClosure">preloadClosure</a> :: <a href="GHC-Unit-State.html#t:PreloadUnitClosure" title="GHC.Unit.State">PreloadUnitClosure</a></li><li><a href="#v:packageNameMap">packageNameMap</a> :: <a href="GHC-Types-Unique-FM.html#t:UniqFM" title="GHC.Types.Unique.FM">UniqFM</a> <a href="GHC-Unit-Info.html#t:PackageName" title="GHC.Unit.Info">PackageName</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a></li><li><a href="#v:wireMap">wireMap</a> :: <a href="../containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a></li><li><a href="#v:unwireMap">unwireMap</a> :: <a href="../containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a></li><li><a href="#v:preloadUnits">preloadUnits</a> :: [<a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>]</li><li><a href="#v:explicitUnits">explicitUnits</a> :: [(<a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a>, <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Driver-Session.html#t:PackageArg" title="GHC.Driver.Session">PackageArg</a>)]</li><li><a href="#v:homeUnitDepends">homeUnitDepends</a> :: [<a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>]</li><li><a href="#v:moduleNameProvidersMap">moduleNameProvidersMap</a> :: !ModuleNameProvidersMap</li><li><a href="#v:pluginModuleNameProvidersMap">pluginModuleNameProvidersMap</a> :: !ModuleNameProvidersMap</li><li><a href="#v:requirementContext">requirementContext</a> :: <a href="../containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a> [<a href="GHC-Unit-Types.html#t:InstantiatedModule" title="GHC.Unit.Types">InstantiatedModule</a>]</li><li><a href="#v:allowVirtualUnits">allowVirtualUnits</a> :: !<a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a></li></ul>}</li><li class="src short"><span class="keyword">type</span> <a href="#t:PreloadUnitClosure">PreloadUnitClosure</a> = <a href="GHC-Types-Unique-Set.html#t:UniqSet" title="GHC.Types.Unique.Set">UniqSet</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:UnitDatabase">UnitDatabase</a> unit = <a href="#v:UnitDatabase">UnitDatabase</a> {<ul class="subs"><li><a href="#v:unitDatabasePath">unitDatabasePath</a> :: <a href="GHC-Prelude-Basic.html#t:FilePath" title="GHC.Prelude.Basic">FilePath</a></li><li><a href="#v:unitDatabaseUnits">unitDatabaseUnits</a> :: [<a href="GHC-Unit-Info.html#t:GenUnitInfo" title="GHC.Unit.Info">GenUnitInfo</a> unit]</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:UnitErr">UnitErr</a><ul class="subs"><li>= <a href="#v:CloseUnitErr">CloseUnitErr</a> !<a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a> !(<a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>)</li><li>| <a href="#v:PackageFlagErr">PackageFlagErr</a> !<a href="GHC-Driver-Session.html#t:PackageFlag" title="GHC.Driver.Session">PackageFlag</a> ![(<a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a>, <a href="GHC-Unit-State.html#t:UnusableUnitReason" title="GHC.Unit.State">UnusableUnitReason</a>)]</li><li>| <a href="#v:TrustFlagErr">TrustFlagErr</a> !<a href="GHC-Driver-Session.html#t:TrustFlag" title="GHC.Driver.Session">TrustFlag</a> ![(<a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a>, <a href="GHC-Unit-State.html#t:UnusableUnitReason" title="GHC.Unit.State">UnusableUnitReason</a>)]</li></ul></li><li class="src short"><a href="#v:emptyUnitState">emptyUnitState</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a></li><li class="src short"><a href="#v:initUnits">initUnits</a> :: <a href="GHC-Utils-Logger.html#t:Logger" title="GHC.Utils.Logger">Logger</a> -&gt; <a href="GHC-Driver-Session.html#t:DynFlags" title="GHC.Driver.Session">DynFlags</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> [<a href="GHC-Unit-State.html#t:UnitDatabase" title="GHC.Unit.State">UnitDatabase</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>] -&gt; <a href="../containers-0.6.7/Data-Set.html#t:Set" title="Data.Set">Set</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> ([<a href="GHC-Unit-State.html#t:UnitDatabase" title="GHC.Unit.State">UnitDatabase</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>], <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a>, <a href="GHC-Unit-Home.html#t:HomeUnit" title="GHC.Unit.Home">HomeUnit</a>, <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Platform-Constants.html#t:PlatformConstants" title="GHC.Platform.Constants">PlatformConstants</a>)</li><li class="src short"><a href="#v:readUnitDatabases">readUnitDatabases</a> :: <a href="GHC-Utils-Logger.html#t:Logger" title="GHC.Utils.Logger">Logger</a> -&gt; UnitConfig -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> [<a href="GHC-Unit-State.html#t:UnitDatabase" title="GHC.Unit.State">UnitDatabase</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>]</li><li class="src short"><a href="#v:readUnitDatabase">readUnitDatabase</a> :: <a href="GHC-Utils-Logger.html#t:Logger" title="GHC.Utils.Logger">Logger</a> -&gt; UnitConfig -&gt; <a href="GHC-Prelude-Basic.html#t:FilePath" title="GHC.Prelude.Basic">FilePath</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> (<a href="GHC-Unit-State.html#t:UnitDatabase" title="GHC.Unit.State">UnitDatabase</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>)</li><li class="src short"><a href="#v:getUnitDbRefs">getUnitDbRefs</a> :: UnitConfig -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> [<a href="GHC-Driver-Session.html#t:PkgDbRef" title="GHC.Driver.Session">PkgDbRef</a>]</li><li class="src short"><a href="#v:resolveUnitDatabase">resolveUnitDatabase</a> :: UnitConfig -&gt; <a href="GHC-Driver-Session.html#t:PkgDbRef" title="GHC.Driver.Session">PkgDbRef</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> (<a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Prelude-Basic.html#t:FilePath" title="GHC.Prelude.Basic">FilePath</a>)</li><li class="src short"><a href="#v:listUnitInfo">listUnitInfo</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; [<a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a>]</li><li class="src short"><span class="keyword">type</span> <a href="#t:UnitInfoMap">UnitInfoMap</a> = <a href="../containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a> <a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a></li><li class="src short"><a href="#v:lookupUnit">lookupUnit</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a></li><li class="src short"><a href="#v:lookupUnit-39-">lookupUnit'</a> :: <a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a> -&gt; <a href="GHC-Unit-State.html#t:UnitInfoMap" title="GHC.Unit.State">UnitInfoMap</a> -&gt; <a href="GHC-Unit-State.html#t:PreloadUnitClosure" title="GHC.Unit.State">PreloadUnitClosure</a> -&gt; <a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a></li><li class="src short"><a href="#v:unsafeLookupUnit">unsafeLookupUnit</a> :: <a href="GHC-Utils-Misc.html#t:HasDebugCallStack" title="GHC.Utils.Misc">HasDebugCallStack</a> =&gt; <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a> -&gt; <a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a></li><li class="src short"><a href="#v:lookupUnitId">lookupUnitId</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a></li><li class="src short"><a href="#v:lookupUnitId-39-">lookupUnitId'</a> :: <a href="GHC-Unit-State.html#t:UnitInfoMap" title="GHC.Unit.State">UnitInfoMap</a> -&gt; <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a></li><li class="src short"><a href="#v:unsafeLookupUnitId">unsafeLookupUnitId</a> :: <a href="GHC-Utils-Misc.html#t:HasDebugCallStack" title="GHC.Utils.Misc">HasDebugCallStack</a> =&gt; <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a> -&gt; <a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a></li><li class="src short"><a href="#v:lookupPackageName">lookupPackageName</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Unit-Info.html#t:PackageName" title="GHC.Unit.Info">PackageName</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a></li><li class="src short"><a href="#v:resolvePackageImport">resolvePackageImport</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a> -&gt; <a href="GHC-Unit-Info.html#t:PackageName" title="GHC.Unit.Info">PackageName</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a></li><li class="src short"><a href="#v:improveUnit">improveUnit</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a> -&gt; <a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a></li><li class="src short"><a href="#v:searchPackageId">searchPackageId</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Unit-Info.html#t:PackageId" title="GHC.Unit.Info">PackageId</a> -&gt; [<a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a>]</li><li class="src short"><a href="#v:listVisibleModuleNames">listVisibleModuleNames</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; [<a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a>]</li><li class="src short"><a href="#v:lookupModuleInAllUnits">lookupModuleInAllUnits</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a> -&gt; [(<a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a>, <a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a>)]</li><li class="src short"><a href="#v:lookupModuleWithSuggestions">lookupModuleWithSuggestions</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a> -&gt; <a href="GHC-Types-PkgQual.html#t:PkgQual" title="GHC.Types.PkgQual">PkgQual</a> -&gt; <a href="GHC-Unit-State.html#t:LookupResult" title="GHC.Unit.State">LookupResult</a></li><li class="src short"><a href="#v:lookupModulePackage">lookupModulePackage</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a> -&gt; <a href="GHC-Types-PkgQual.html#t:PkgQual" title="GHC.Types.PkgQual">PkgQual</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> [<a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a>]</li><li class="src short"><a href="#v:lookupPluginModuleWithSuggestions">lookupPluginModuleWithSuggestions</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a> -&gt; <a href="GHC-Types-PkgQual.html#t:PkgQual" title="GHC.Types.PkgQual">PkgQual</a> -&gt; <a href="GHC-Unit-State.html#t:LookupResult" title="GHC.Unit.State">LookupResult</a></li><li class="src short"><a href="#v:requirementMerges">requirementMerges</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a> -&gt; [<a href="GHC-Unit-Types.html#t:InstantiatedModule" title="GHC.Unit.Types">InstantiatedModule</a>]</li><li class="src short"><span class="keyword">data</span> <a href="#t:LookupResult">LookupResult</a><ul class="subs"><li>= <a href="#v:LookupFound">LookupFound</a> <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a> (<a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a>, <a href="GHC-Unit-State.html#t:ModuleOrigin" title="GHC.Unit.State">ModuleOrigin</a>)</li><li>| <a href="#v:LookupMultiple">LookupMultiple</a> [(<a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a>, <a href="GHC-Unit-State.html#t:ModuleOrigin" title="GHC.Unit.State">ModuleOrigin</a>)]</li><li>| <a href="#v:LookupHidden">LookupHidden</a> [(<a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a>, <a href="GHC-Unit-State.html#t:ModuleOrigin" title="GHC.Unit.State">ModuleOrigin</a>)] [(<a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a>, <a href="GHC-Unit-State.html#t:ModuleOrigin" title="GHC.Unit.State">ModuleOrigin</a>)]</li><li>| <a href="#v:LookupUnusable">LookupUnusable</a> [(<a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a>, <a href="GHC-Unit-State.html#t:ModuleOrigin" title="GHC.Unit.State">ModuleOrigin</a>)]</li><li>| <a href="#v:LookupNotFound">LookupNotFound</a> [<a href="GHC-Unit-State.html#t:ModuleSuggestion" title="GHC.Unit.State">ModuleSuggestion</a>]</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:ModuleSuggestion">ModuleSuggestion</a><ul class="subs"><li>= <a href="#v:SuggestVisible">SuggestVisible</a> <a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a> <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a> <a href="GHC-Unit-State.html#t:ModuleOrigin" title="GHC.Unit.State">ModuleOrigin</a></li><li>| <a href="#v:SuggestHidden">SuggestHidden</a> <a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a> <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a> <a href="GHC-Unit-State.html#t:ModuleOrigin" title="GHC.Unit.State">ModuleOrigin</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:ModuleOrigin">ModuleOrigin</a><ul class="subs"><li>= <a href="#v:ModHidden">ModHidden</a></li><li>| <a href="#v:ModUnusable">ModUnusable</a> !<a href="GHC-Unit-State.html#t:UnusableUnit" title="GHC.Unit.State">UnusableUnit</a></li><li>| <a href="#v:ModOrigin">ModOrigin</a> { <ul class="subs"><li><a href="#v:fromOrigUnit">fromOrigUnit</a> :: <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a></li><li><a href="#v:fromExposedReexport">fromExposedReexport</a> :: [<a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a>]</li><li><a href="#v:fromHiddenReexport">fromHiddenReexport</a> :: [<a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a>]</li><li><a href="#v:fromPackageFlag">fromPackageFlag</a> :: <a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a></li></ul> }</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:UnusableUnit">UnusableUnit</a> = <a href="#v:UnusableUnit">UnusableUnit</a> {<ul class="subs"><li><a href="#v:uuUnit">uuUnit</a> :: !<a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a></li><li><a href="#v:uuReason">uuReason</a> :: !<a href="GHC-Unit-State.html#t:UnusableUnitReason" title="GHC.Unit.State">UnusableUnitReason</a></li><li><a href="#v:uuIsReexport">uuIsReexport</a> :: !<a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:UnusableUnitReason">UnusableUnitReason</a><ul class="subs"><li>= <a href="#v:IgnoredWithFlag">IgnoredWithFlag</a></li><li>| <a href="#v:BrokenDependencies">BrokenDependencies</a> [<a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>]</li><li>| <a href="#v:CyclicDependencies">CyclicDependencies</a> [<a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>]</li><li>| <a href="#v:IgnoredDependencies">IgnoredDependencies</a> [<a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>]</li><li>| <a href="#v:ShadowedDependencies">ShadowedDependencies</a> [<a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>]</li></ul></li><li class="src short"><a href="#v:pprReason">pprReason</a> :: <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> -&gt; <a href="GHC-Unit-State.html#t:UnusableUnitReason" title="GHC.Unit.State">UnusableUnitReason</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a></li><li class="src short"><a href="#v:closeUnitDeps">closeUnitDeps</a> :: <a href="GHC-Unit-State.html#t:UnitInfoMap" title="GHC.Unit.State">UnitInfoMap</a> -&gt; [(<a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>, <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>)] -&gt; <a href="GHC-Data-Maybe.html#t:MaybeErr" title="GHC.Data.Maybe">MaybeErr</a> <a href="GHC-Unit-State.html#t:UnitErr" title="GHC.Unit.State">UnitErr</a> [<a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>]</li><li class="src short"><a href="#v:closeUnitDeps-39-">closeUnitDeps'</a> :: <a href="GHC-Unit-State.html#t:UnitInfoMap" title="GHC.Unit.State">UnitInfoMap</a> -&gt; [<a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>] -&gt; [(<a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>, <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>)] -&gt; <a href="GHC-Data-Maybe.html#t:MaybeErr" title="GHC.Data.Maybe">MaybeErr</a> <a href="GHC-Unit-State.html#t:UnitErr" title="GHC.Unit.State">UnitErr</a> [<a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>]</li><li class="src short"><a href="#v:mayThrowUnitErr">mayThrowUnitErr</a> :: <a href="GHC-Data-Maybe.html#t:MaybeErr" title="GHC.Data.Maybe">MaybeErr</a> <a href="GHC-Unit-State.html#t:UnitErr" title="GHC.Unit.State">UnitErr</a> a -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> a</li><li class="src short"><span class="keyword">type</span> <a href="#t:ShHoleSubst">ShHoleSubst</a> = <a href="GHC-Unit-Module-Env.html#t:ModuleNameEnv" title="GHC.Unit.Module.Env">ModuleNameEnv</a> <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a></li><li class="src short"><a href="#v:renameHoleUnit">renameHoleUnit</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Unit-State.html#t:ShHoleSubst" title="GHC.Unit.State">ShHoleSubst</a> -&gt; <a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a> -&gt; <a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a></li><li class="src short"><a href="#v:renameHoleModule">renameHoleModule</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Unit-State.html#t:ShHoleSubst" title="GHC.Unit.State">ShHoleSubst</a> -&gt; <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a> -&gt; <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a></li><li class="src short"><a href="#v:renameHoleUnit-39-">renameHoleUnit'</a> :: <a href="GHC-Unit-State.html#t:UnitInfoMap" title="GHC.Unit.State">UnitInfoMap</a> -&gt; <a href="GHC-Unit-State.html#t:PreloadUnitClosure" title="GHC.Unit.State">PreloadUnitClosure</a> -&gt; <a href="GHC-Unit-State.html#t:ShHoleSubst" title="GHC.Unit.State">ShHoleSubst</a> -&gt; <a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a> -&gt; <a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a></li><li class="src short"><a href="#v:renameHoleModule-39-">renameHoleModule'</a> :: <a href="GHC-Unit-State.html#t:UnitInfoMap" title="GHC.Unit.State">UnitInfoMap</a> -&gt; <a href="GHC-Unit-State.html#t:PreloadUnitClosure" title="GHC.Unit.State">PreloadUnitClosure</a> -&gt; <a href="GHC-Unit-State.html#t:ShHoleSubst" title="GHC.Unit.State">ShHoleSubst</a> -&gt; <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a> -&gt; <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a></li><li class="src short"><a href="#v:instUnitToUnit">instUnitToUnit</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Unit-Types.html#t:InstantiatedUnit" title="GHC.Unit.Types">InstantiatedUnit</a> -&gt; <a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a></li><li class="src short"><a href="#v:instModuleToModule">instModuleToModule</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Unit-Types.html#t:InstantiatedModule" title="GHC.Unit.Types">InstantiatedModule</a> -&gt; <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a></li><li class="src short"><a href="#v:pprFlag">pprFlag</a> :: <a href="GHC-Driver-Session.html#t:PackageFlag" title="GHC.Driver.Session">PackageFlag</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a></li><li class="src short"><a href="#v:pprUnits">pprUnits</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a></li><li class="src short"><a href="#v:pprUnitsSimple">pprUnitsSimple</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a></li><li class="src short"><a href="#v:pprUnitIdForUser">pprUnitIdForUser</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a></li><li class="src short"><a href="#v:pprUnitInfoForUser">pprUnitInfoForUser</a> :: <a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a></li><li class="src short"><a href="#v:pprModuleMap">pprModuleMap</a> :: ModuleNameProvidersMap -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a></li><li class="src short"><a href="#v:pprWithUnitState">pprWithUnitState</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a></li><li class="src short"><a href="#v:unwireUnit">unwireUnit</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a> -&gt; <a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a></li><li class="src short"><a href="#v:implicitPackageDeps">implicitPackageDeps</a> :: <a href="GHC-Driver-Session.html#t:DynFlags" title="GHC.Driver.Session">DynFlags</a> -&gt; [<a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>]</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src">module <a href="GHC-Unit-Info.html">GHC.Unit.Info</a></p></div><a href="#g:1" id="g:1"><h1>Reading the package config, and processing cmdline args</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:UnitState" class="def">UnitState</a> <a href="src/GHC.Unit.State.html#UnitState" class="link">Source</a> <a href="#t:UnitState" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:UnitState" class="def">UnitState</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:unitInfoMap" class="def">unitInfoMap</a> :: <a href="GHC-Unit-State.html#t:UnitInfoMap" title="GHC.Unit.State">UnitInfoMap</a></dfn><div class="doc"><p>A mapping of <code><a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a></code> to <code><a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a></code>.  This list is adjusted
 so that only valid units are here.  <code><a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a></code> reflects
 what was stored *on disk*, except for the <code>trusted</code> flag, which
 is adjusted at runtime.  (In particular, some units in this map
 may have the <code>exposed</code> flag be <code><a href="GHC-Prelude-Basic.html#v:False" title="GHC.Prelude.Basic">False</a></code>.)</p></div></li><li><dfn class="src"><a id="v:preloadClosure" class="def">preloadClosure</a> :: <a href="GHC-Unit-State.html#t:PreloadUnitClosure" title="GHC.Unit.State">PreloadUnitClosure</a></dfn><div class="doc"><p>The set of transitively reachable units according
 to the explicitly provided command line arguments.
 A fully instantiated VirtUnit may only be replaced by a RealUnit from
 this set.
 See Note [VirtUnit to RealUnit improvement]</p></div></li><li><dfn class="src"><a id="v:packageNameMap" class="def">packageNameMap</a> :: <a href="GHC-Types-Unique-FM.html#t:UniqFM" title="GHC.Types.Unique.FM">UniqFM</a> <a href="GHC-Unit-Info.html#t:PackageName" title="GHC.Unit.Info">PackageName</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a></dfn><div class="doc"><p>A mapping of <code><a href="GHC-Unit-Info.html#t:PackageName" title="GHC.Unit.Info">PackageName</a></code> to <code><a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a></code>. If several units have the same
 package name (e.g. different instantiations), then we return one of them...
 This is used when users refer to packages in Backpack includes.
 And also to resolve package qualifiers with the PackageImports extension.</p></div></li><li><dfn class="src"><a id="v:wireMap" class="def">wireMap</a> :: <a href="../containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a></dfn><div class="doc"><p>A mapping from database unit keys to wired in unit ids.</p></div></li><li><dfn class="src"><a id="v:unwireMap" class="def">unwireMap</a> :: <a href="../containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a></dfn><div class="doc"><p>A mapping from wired in unit ids to unit keys from the database.</p></div></li><li><dfn class="src"><a id="v:preloadUnits" class="def">preloadUnits</a> :: [<a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>]</dfn><div class="doc"><p>The units we're going to link in eagerly.  This list
 should be in reverse dependency order; that is, a unit
 is always mentioned before the units it depends on.</p></div></li><li><dfn class="src"><a id="v:explicitUnits" class="def">explicitUnits</a> :: [(<a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a>, <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Driver-Session.html#t:PackageArg" title="GHC.Driver.Session">PackageArg</a>)]</dfn><div class="doc"><p>Units which we explicitly depend on (from a command line flag).
 We'll use this to generate version macros and the unused packages warning. The
 original flag which was used to bring the unit into scope is recorded for the
 -Wunused-packages warning.</p></div></li><li><dfn class="src"><a id="v:homeUnitDepends" class="def">homeUnitDepends</a> :: [<a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:moduleNameProvidersMap" class="def">moduleNameProvidersMap</a> :: !ModuleNameProvidersMap</dfn><div class="doc"><p>This is a full map from <code><a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a></code> to all modules which may possibly
 be providing it.  These providers may be hidden (but we'll still want
 to report them in error messages), or it may be an ambiguous import.</p></div></li><li><dfn class="src"><a id="v:pluginModuleNameProvidersMap" class="def">pluginModuleNameProvidersMap</a> :: !ModuleNameProvidersMap</dfn><div class="doc"><p>A map, like <code><a href="GHC-Unit-State.html#v:moduleNameProvidersMap" title="GHC.Unit.State">moduleNameProvidersMap</a></code>, but controlling plugin visibility.</p></div></li><li><dfn class="src"><a id="v:requirementContext" class="def">requirementContext</a> :: <a href="../containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a> [<a href="GHC-Unit-Types.html#t:InstantiatedModule" title="GHC.Unit.Types">InstantiatedModule</a>]</dfn><div class="doc"><p>A map saying, for each requirement, what interfaces must be merged
 together when we use them.  For example, if our dependencies
 are <code>p[A=&lt;A&gt;]</code> and <code>q[A=&lt;A&gt;,B=r[C=&lt;A&gt;]:B]</code>, then the interfaces
 to merge for A are <code>p[A=&lt;A&gt;]:A</code>, <code>q[A=&lt;A&gt;,B=r[C=&lt;A&gt;]:B]:A</code>
 and <code>r[C=&lt;A&gt;]:C</code>.</p><p>There's an entry in this map for each hole in our home library.</p></div></li><li><dfn class="src"><a id="v:allowVirtualUnits" class="def">allowVirtualUnits</a> :: !<a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a></dfn><div class="doc"><p>Indicate if we can instantiate units on-the-fly.</p><p>This should only be true when we are type-checking an indefinite unit.
 See Note [About units] in GHC.Unit.</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:PreloadUnitClosure" class="def">PreloadUnitClosure</a> = <a href="GHC-Types-Unique-Set.html#t:UniqSet" title="GHC.Types.Unique.Set">UniqSet</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a> <a href="src/GHC.Unit.State.html#PreloadUnitClosure" class="link">Source</a> <a href="#t:PreloadUnitClosure" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:UnitDatabase" class="def">UnitDatabase</a> unit <a href="src/GHC.Unit.State.html#UnitDatabase" class="link">Source</a> <a href="#t:UnitDatabase" class="selflink">#</a></p><div class="doc"><p>Unit database</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:UnitDatabase" class="def">UnitDatabase</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:unitDatabasePath" class="def">unitDatabasePath</a> :: <a href="GHC-Prelude-Basic.html#t:FilePath" title="GHC.Prelude.Basic">FilePath</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:unitDatabaseUnits" class="def">unitDatabaseUnits</a> :: [<a href="GHC-Unit-Info.html#t:GenUnitInfo" title="GHC.Unit.Info">GenUnitInfo</a> unit]</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:UnitDatabase">Instances</h4><details id="i:UnitDatabase" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UnitDatabase:Outputable:1"></span> <a href="GHC-Utils-Outputable.html#t:Outputable" title="GHC.Utils.Outputable">Outputable</a> u =&gt; <a href="GHC-Utils-Outputable.html#t:Outputable" title="GHC.Utils.Outputable">Outputable</a> (<a href="GHC-Unit-State.html#t:UnitDatabase" title="GHC.Unit.State">UnitDatabase</a> u)</span> <a href="src/GHC.Unit.State.html#line-509" class="link">Source</a> <a href="#t:UnitDatabase" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UnitDatabase:Outputable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Unit-State.html">GHC.Unit.State</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="GHC-Unit-State.html#t:UnitDatabase" title="GHC.Unit.State">UnitDatabase</a> u -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> <a href="src/GHC.Utils.Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:UnitErr" class="def">UnitErr</a> <a href="src/GHC.Unit.State.html#UnitErr" class="link">Source</a> <a href="#t:UnitErr" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:CloseUnitErr" class="def">CloseUnitErr</a> !<a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a> !(<a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:PackageFlagErr" class="def">PackageFlagErr</a> !<a href="GHC-Driver-Session.html#t:PackageFlag" title="GHC.Driver.Session">PackageFlag</a> ![(<a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a>, <a href="GHC-Unit-State.html#t:UnusableUnitReason" title="GHC.Unit.State">UnusableUnitReason</a>)]</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:TrustFlagErr" class="def">TrustFlagErr</a> !<a href="GHC-Driver-Session.html#t:TrustFlag" title="GHC.Driver.Session">TrustFlag</a> ![(<a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a>, <a href="GHC-Unit-State.html#t:UnusableUnitReason" title="GHC.Unit.State">UnusableUnitReason</a>)]</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:UnitErr">Instances</h4><details id="i:UnitErr" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UnitErr:Outputable:1"></span> <a href="GHC-Utils-Outputable.html#t:Outputable" title="GHC.Utils.Outputable">Outputable</a> <a href="GHC-Unit-State.html#t:UnitErr" title="GHC.Unit.State">UnitErr</a></span> <a href="src/GHC.Unit.State.html#line-2074" class="link">Source</a> <a href="#t:UnitErr" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UnitErr:Outputable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Unit-State.html">GHC.Unit.State</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="GHC-Unit-State.html#t:UnitErr" title="GHC.Unit.State">UnitErr</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> <a href="src/GHC.Utils.Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:emptyUnitState" class="def">emptyUnitState</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> <a href="src/GHC.Unit.State.html#emptyUnitState" class="link">Source</a> <a href="#v:emptyUnitState" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:initUnits" class="def">initUnits</a> :: <a href="GHC-Utils-Logger.html#t:Logger" title="GHC.Utils.Logger">Logger</a> -&gt; <a href="GHC-Driver-Session.html#t:DynFlags" title="GHC.Driver.Session">DynFlags</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> [<a href="GHC-Unit-State.html#t:UnitDatabase" title="GHC.Unit.State">UnitDatabase</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>] -&gt; <a href="../containers-0.6.7/Data-Set.html#t:Set" title="Data.Set">Set</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> ([<a href="GHC-Unit-State.html#t:UnitDatabase" title="GHC.Unit.State">UnitDatabase</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>], <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a>, <a href="GHC-Unit-Home.html#t:HomeUnit" title="GHC.Unit.Home">HomeUnit</a>, <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Platform-Constants.html#t:PlatformConstants" title="GHC.Platform.Constants">PlatformConstants</a>) <a href="src/GHC.Unit.State.html#initUnits" class="link">Source</a> <a href="#v:initUnits" class="selflink">#</a></p><div class="doc"><p>Read the unit database files, and sets up various internal tables of
 unit information, according to the unit-related flags on the
 command-line (<code>-package</code>, <code>-hide-package</code> etc.)</p><p><code><a href="GHC-Unit-State.html#v:initUnits" title="GHC.Unit.State">initUnits</a></code> can be called again subsequently after updating the
 <code><a href="GHC-Driver-Session.html#v:packageFlags" title="GHC.Driver.Session">packageFlags</a></code> field of the <code><a href="GHC-Driver-Session.html#t:DynFlags" title="GHC.Driver.Session">DynFlags</a></code>, and it will update the
 <code>unitState</code> in <code><a href="GHC-Driver-Session.html#t:DynFlags" title="GHC.Driver.Session">DynFlags</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:readUnitDatabases" class="def">readUnitDatabases</a> :: <a href="GHC-Utils-Logger.html#t:Logger" title="GHC.Utils.Logger">Logger</a> -&gt; UnitConfig -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> [<a href="GHC-Unit-State.html#t:UnitDatabase" title="GHC.Unit.State">UnitDatabase</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>] <a href="src/GHC.Unit.State.html#readUnitDatabases" class="link">Source</a> <a href="#v:readUnitDatabases" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:readUnitDatabase" class="def">readUnitDatabase</a> :: <a href="GHC-Utils-Logger.html#t:Logger" title="GHC.Utils.Logger">Logger</a> -&gt; UnitConfig -&gt; <a href="GHC-Prelude-Basic.html#t:FilePath" title="GHC.Prelude.Basic">FilePath</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> (<a href="GHC-Unit-State.html#t:UnitDatabase" title="GHC.Unit.State">UnitDatabase</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>) <a href="src/GHC.Unit.State.html#readUnitDatabase" class="link">Source</a> <a href="#v:readUnitDatabase" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:getUnitDbRefs" class="def">getUnitDbRefs</a> :: UnitConfig -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> [<a href="GHC-Driver-Session.html#t:PkgDbRef" title="GHC.Driver.Session">PkgDbRef</a>] <a href="src/GHC.Unit.State.html#getUnitDbRefs" class="link">Source</a> <a href="#v:getUnitDbRefs" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:resolveUnitDatabase" class="def">resolveUnitDatabase</a> :: UnitConfig -&gt; <a href="GHC-Driver-Session.html#t:PkgDbRef" title="GHC.Driver.Session">PkgDbRef</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> (<a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Prelude-Basic.html#t:FilePath" title="GHC.Prelude.Basic">FilePath</a>) <a href="src/GHC.Unit.State.html#resolveUnitDatabase" class="link">Source</a> <a href="#v:resolveUnitDatabase" class="selflink">#</a></p><div class="doc"><p>Return the path of a package database from a <code><a href="GHC-Driver-Session.html#t:PkgDbRef" title="GHC.Driver.Session">PkgDbRef</a></code>. Return <code><a href="GHC-Prelude-Basic.html#v:Nothing" title="GHC.Prelude.Basic">Nothing</a></code>
 when the user database filepath is expected but the latter doesn't exist.</p><p>NB: This logic is reimplemented in Cabal, so if you change it,
 make sure you update Cabal. (Or, better yet, dump it in the
 compiler info so Cabal can use the info.)</p></div></div><div class="top"><p class="src"><a id="v:listUnitInfo" class="def">listUnitInfo</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; [<a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a>] <a href="src/GHC.Unit.State.html#listUnitInfo" class="link">Source</a> <a href="#v:listUnitInfo" class="selflink">#</a></p><div class="doc"><p>Get a list of entries from the unit database.  NB: be careful with
 this function, although all units in this map are &quot;visible&quot;, this
 does not imply that the exposed-modules of the unit are available
 (they may have been thinned or renamed).</p></div></div><a href="#g:2" id="g:2"><h1>Querying the package config</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:UnitInfoMap" class="def">UnitInfoMap</a> = <a href="../containers-0.6.7/Data-Map-Strict.html#t:Map" title="Data.Map.Strict">Map</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a> <a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a> <a href="src/GHC.Unit.State.html#UnitInfoMap" class="link">Source</a> <a href="#t:UnitInfoMap" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:lookupUnit" class="def">lookupUnit</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a> <a href="src/GHC.Unit.State.html#lookupUnit" class="link">Source</a> <a href="#v:lookupUnit" class="selflink">#</a></p><div class="doc"><p>Find the unit we know about with the given unit, if any</p></div></div><div class="top"><p class="src"><a id="v:lookupUnit-39-" class="def">lookupUnit'</a> :: <a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a> -&gt; <a href="GHC-Unit-State.html#t:UnitInfoMap" title="GHC.Unit.State">UnitInfoMap</a> -&gt; <a href="GHC-Unit-State.html#t:PreloadUnitClosure" title="GHC.Unit.State">PreloadUnitClosure</a> -&gt; <a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a> <a href="src/GHC.Unit.State.html#lookupUnit%27" class="link">Source</a> <a href="#v:lookupUnit-39-" class="selflink">#</a></p><div class="doc"><p>A more specialized interface, which doesn't require a <code><a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a></code> (so it
 can be used while we're initializing <code><a href="GHC-Driver-Session.html#t:DynFlags" title="GHC.Driver.Session">DynFlags</a></code>)</p><p>Parameters:
    * a boolean specifying whether or not to look for on-the-fly renamed interfaces
    * a <code><a href="GHC-Unit-State.html#t:UnitInfoMap" title="GHC.Unit.State">UnitInfoMap</a></code>
    * a <code><a href="GHC-Unit-State.html#t:PreloadUnitClosure" title="GHC.Unit.State">PreloadUnitClosure</a></code></p></div></div><div class="top"><p class="src"><a id="v:unsafeLookupUnit" class="def">unsafeLookupUnit</a> :: <a href="GHC-Utils-Misc.html#t:HasDebugCallStack" title="GHC.Utils.Misc">HasDebugCallStack</a> =&gt; <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a> -&gt; <a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a> <a href="src/GHC.Unit.State.html#unsafeLookupUnit" class="link">Source</a> <a href="#v:unsafeLookupUnit" class="selflink">#</a></p><div class="doc"><p>Looks up the given unit in the unit state, panicking if it is not found</p></div></div><div class="top"><p class="src"><a id="v:lookupUnitId" class="def">lookupUnitId</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a> <a href="src/GHC.Unit.State.html#lookupUnitId" class="link">Source</a> <a href="#v:lookupUnitId" class="selflink">#</a></p><div class="doc"><p>Find the unit we know about with the given unit id, if any</p></div></div><div class="top"><p class="src"><a id="v:lookupUnitId-39-" class="def">lookupUnitId'</a> :: <a href="GHC-Unit-State.html#t:UnitInfoMap" title="GHC.Unit.State">UnitInfoMap</a> -&gt; <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a> <a href="src/GHC.Unit.State.html#lookupUnitId%27" class="link">Source</a> <a href="#v:lookupUnitId-39-" class="selflink">#</a></p><div class="doc"><p>Find the unit we know about with the given unit id, if any</p></div></div><div class="top"><p class="src"><a id="v:unsafeLookupUnitId" class="def">unsafeLookupUnitId</a> :: <a href="GHC-Utils-Misc.html#t:HasDebugCallStack" title="GHC.Utils.Misc">HasDebugCallStack</a> =&gt; <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a> -&gt; <a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a> <a href="src/GHC.Unit.State.html#unsafeLookupUnitId" class="link">Source</a> <a href="#v:unsafeLookupUnitId" class="selflink">#</a></p><div class="doc"><p>Looks up the given unit id in the unit state, panicking if it is not found</p></div></div><div class="top"><p class="src"><a id="v:lookupPackageName" class="def">lookupPackageName</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Unit-Info.html#t:PackageName" title="GHC.Unit.Info">PackageName</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a> <a href="src/GHC.Unit.State.html#lookupPackageName" class="link">Source</a> <a href="#v:lookupPackageName" class="selflink">#</a></p><div class="doc"><p>Find the unit we know about with the given package name (e.g. <code>foo</code>), if any
 (NB: there might be a locally defined unit name which overrides this)
 This function is unsafe to use in general because it doesn't respect package
 visibility.</p></div></div><div class="top"><p class="src"><a id="v:resolvePackageImport" class="def">resolvePackageImport</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a> -&gt; <a href="GHC-Unit-Info.html#t:PackageName" title="GHC.Unit.Info">PackageName</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a> <a href="src/GHC.Unit.State.html#resolvePackageImport" class="link">Source</a> <a href="#v:resolvePackageImport" class="selflink">#</a></p><div class="doc"><p>Find the UnitId which an import qualified by a package import comes from.
 Compared to <code><a href="GHC-Unit-State.html#v:lookupPackageName" title="GHC.Unit.State">lookupPackageName</a></code>, this function correctly accounts for visibility,
 renaming and thinning.</p></div></div><div class="top"><p class="src"><a id="v:improveUnit" class="def">improveUnit</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a> -&gt; <a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a> <a href="src/GHC.Unit.State.html#improveUnit" class="link">Source</a> <a href="#v:improveUnit" class="selflink">#</a></p><div class="doc"><p>Given a fully instantiated <code><a href="GHC-Unit-Types.html#t:GenInstantiatedUnit" title="GHC.Unit.Types">GenInstantiatedUnit</a></code>, improve it into a
 <code><a href="GHC-Unit-Types.html#v:RealUnit" title="GHC.Unit.Types">RealUnit</a></code> if we can find it in the package database.</p></div></div><div class="top"><p class="src"><a id="v:searchPackageId" class="def">searchPackageId</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Unit-Info.html#t:PackageId" title="GHC.Unit.Info">PackageId</a> -&gt; [<a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a>] <a href="src/GHC.Unit.State.html#searchPackageId" class="link">Source</a> <a href="#v:searchPackageId" class="selflink">#</a></p><div class="doc"><p>Search for units with a given package ID (e.g. &quot;foo-0.1&quot;)</p></div></div><div class="top"><p class="src"><a id="v:listVisibleModuleNames" class="def">listVisibleModuleNames</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; [<a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a>] <a href="src/GHC.Unit.State.html#listVisibleModuleNames" class="link">Source</a> <a href="#v:listVisibleModuleNames" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:lookupModuleInAllUnits" class="def">lookupModuleInAllUnits</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a> -&gt; [(<a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a>, <a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a>)] <a href="src/GHC.Unit.State.html#lookupModuleInAllUnits" class="link">Source</a> <a href="#v:lookupModuleInAllUnits" class="selflink">#</a></p><div class="doc"><p>Takes a <code><a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a></code>, and if the module is in any package returns
 list of modules which take that name.</p></div></div><div class="top"><p class="src"><a id="v:lookupModuleWithSuggestions" class="def">lookupModuleWithSuggestions</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a> -&gt; <a href="GHC-Types-PkgQual.html#t:PkgQual" title="GHC.Types.PkgQual">PkgQual</a> -&gt; <a href="GHC-Unit-State.html#t:LookupResult" title="GHC.Unit.State">LookupResult</a> <a href="src/GHC.Unit.State.html#lookupModuleWithSuggestions" class="link">Source</a> <a href="#v:lookupModuleWithSuggestions" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:lookupModulePackage" class="def">lookupModulePackage</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a> -&gt; <a href="GHC-Types-PkgQual.html#t:PkgQual" title="GHC.Types.PkgQual">PkgQual</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> [<a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a>] <a href="src/GHC.Unit.State.html#lookupModulePackage" class="link">Source</a> <a href="#v:lookupModulePackage" class="selflink">#</a></p><div class="doc"><p>The package which the module **appears** to come from, this could be
 the one which reexports the module from it's original package. This function
 is currently only used for -Wunused-packages</p></div></div><div class="top"><p class="src"><a id="v:lookupPluginModuleWithSuggestions" class="def">lookupPluginModuleWithSuggestions</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a> -&gt; <a href="GHC-Types-PkgQual.html#t:PkgQual" title="GHC.Types.PkgQual">PkgQual</a> -&gt; <a href="GHC-Unit-State.html#t:LookupResult" title="GHC.Unit.State">LookupResult</a> <a href="src/GHC.Unit.State.html#lookupPluginModuleWithSuggestions" class="link">Source</a> <a href="#v:lookupPluginModuleWithSuggestions" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:requirementMerges" class="def">requirementMerges</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a> -&gt; [<a href="GHC-Unit-Types.html#t:InstantiatedModule" title="GHC.Unit.Types">InstantiatedModule</a>] <a href="src/GHC.Unit.State.html#requirementMerges" class="link">Source</a> <a href="#v:requirementMerges" class="selflink">#</a></p><div class="doc"><p>Return this list of requirement interfaces that need to be merged
 to form <code>mod_name</code>, or <code>[]</code> if this is not a requirement.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:LookupResult" class="def">LookupResult</a> <a href="src/GHC.Unit.State.html#LookupResult" class="link">Source</a> <a href="#t:LookupResult" class="selflink">#</a></p><div class="doc"><p>The result of performing a lookup</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:LookupFound" class="def">LookupFound</a> <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a> (<a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a>, <a href="GHC-Unit-State.html#t:ModuleOrigin" title="GHC.Unit.State">ModuleOrigin</a>)</td><td class="doc"><p>Found the module uniquely, nothing else to do</p></td></tr><tr><td class="src"><a id="v:LookupMultiple" class="def">LookupMultiple</a> [(<a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a>, <a href="GHC-Unit-State.html#t:ModuleOrigin" title="GHC.Unit.State">ModuleOrigin</a>)]</td><td class="doc"><p>Multiple modules with the same name in scope</p></td></tr><tr><td class="src"><a id="v:LookupHidden" class="def">LookupHidden</a> [(<a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a>, <a href="GHC-Unit-State.html#t:ModuleOrigin" title="GHC.Unit.State">ModuleOrigin</a>)] [(<a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a>, <a href="GHC-Unit-State.html#t:ModuleOrigin" title="GHC.Unit.State">ModuleOrigin</a>)]</td><td class="doc"><p>No modules found, but there were some hidden ones with
 an exact name match.  First is due to package hidden, second
 is due to module being hidden</p></td></tr><tr><td class="src"><a id="v:LookupUnusable" class="def">LookupUnusable</a> [(<a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a>, <a href="GHC-Unit-State.html#t:ModuleOrigin" title="GHC.Unit.State">ModuleOrigin</a>)]</td><td class="doc"><p>No modules found, but there were some unusable ones with
 an exact name match</p></td></tr><tr><td class="src"><a id="v:LookupNotFound" class="def">LookupNotFound</a> [<a href="GHC-Unit-State.html#t:ModuleSuggestion" title="GHC.Unit.State">ModuleSuggestion</a>]</td><td class="doc"><p>Nothing found, here are some suggested different names</p></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ModuleSuggestion" class="def">ModuleSuggestion</a> <a href="src/GHC.Unit.State.html#ModuleSuggestion" class="link">Source</a> <a href="#t:ModuleSuggestion" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:SuggestVisible" class="def">SuggestVisible</a> <a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a> <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a> <a href="GHC-Unit-State.html#t:ModuleOrigin" title="GHC.Unit.State">ModuleOrigin</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:SuggestHidden" class="def">SuggestHidden</a> <a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a> <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a> <a href="GHC-Unit-State.html#t:ModuleOrigin" title="GHC.Unit.State">ModuleOrigin</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ModuleOrigin" class="def">ModuleOrigin</a> <a href="src/GHC.Unit.State.html#ModuleOrigin" class="link">Source</a> <a href="#t:ModuleOrigin" class="selflink">#</a></p><div class="doc"><p>Given a module name, there may be multiple ways it came into scope,
 possibly simultaneously.  This data type tracks all the possible ways
 it could have come into scope.  Warning: don't use the record functions,
 they're partial!</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ModHidden" class="def">ModHidden</a></td><td class="doc"><p>Module is hidden, and thus never will be available for import.
 (But maybe the user didn't realize), so we'll still keep track
 of these modules.)</p></td></tr><tr><td class="src"><a id="v:ModUnusable" class="def">ModUnusable</a> !<a href="GHC-Unit-State.html#t:UnusableUnit" title="GHC.Unit.State">UnusableUnit</a></td><td class="doc"><p>Module is unavailable because the unit is unusable.</p></td></tr><tr><td class="src"><a id="v:ModOrigin" class="def">ModOrigin</a></td><td class="doc"><p>Module is public, and could have come from some places.</p></td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:fromOrigUnit" class="def">fromOrigUnit</a> :: <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a></dfn><div class="doc"><p><code>Just False</code> means that this module is in
 someone's <code>exported-modules</code> list, but that package is hidden;
 <code>Just True</code> means that it is available; <code>Nothing</code> means neither
 applies.</p></div></li><li><dfn class="src"><a id="v:fromExposedReexport" class="def">fromExposedReexport</a> :: [<a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a>]</dfn><div class="doc"><p>Is the module available from a reexport of an exposed package?
 There could be multiple.</p></div></li><li><dfn class="src"><a id="v:fromHiddenReexport" class="def">fromHiddenReexport</a> :: [<a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a>]</dfn><div class="doc"><p>Is the module available from a reexport of a hidden package?</p></div></li><li><dfn class="src"><a id="v:fromPackageFlag" class="def">fromPackageFlag</a> :: <a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a></dfn><div class="doc"><p>Did the module export come from a package flag? (ToDo: track
 more information.</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:ModuleOrigin">Instances</h4><details id="i:ModuleOrigin" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ModuleOrigin:Monoid:1"></span> <a href="GHC-Prelude-Basic.html#t:Monoid" title="GHC.Prelude.Basic">Monoid</a> <a href="GHC-Unit-State.html#t:ModuleOrigin" title="GHC.Unit.State">ModuleOrigin</a></span> <a href="src/GHC.Unit.State.html#line-254" class="link">Source</a> <a href="#t:ModuleOrigin" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ModuleOrigin:Monoid:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Unit-State.html">GHC.Unit.State</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mempty">mempty</a> :: <a href="GHC-Unit-State.html#t:ModuleOrigin" title="GHC.Unit.State">ModuleOrigin</a> <a href="../base-4.18.3.0/src/GHC.Base.html#mempty" class="link">Source</a> <a href="#v:mempty" class="selflink">#</a></p><p class="src"><a href="#v:mappend">mappend</a> :: <a href="GHC-Unit-State.html#t:ModuleOrigin" title="GHC.Unit.State">ModuleOrigin</a> -&gt; <a href="GHC-Unit-State.html#t:ModuleOrigin" title="GHC.Unit.State">ModuleOrigin</a> -&gt; <a href="GHC-Unit-State.html#t:ModuleOrigin" title="GHC.Unit.State">ModuleOrigin</a> <a href="../base-4.18.3.0/src/GHC.Base.html#mappend" class="link">Source</a> <a href="#v:mappend" class="selflink">#</a></p><p class="src"><a href="#v:mconcat">mconcat</a> :: [<a href="GHC-Unit-State.html#t:ModuleOrigin" title="GHC.Unit.State">ModuleOrigin</a>] -&gt; <a href="GHC-Unit-State.html#t:ModuleOrigin" title="GHC.Unit.State">ModuleOrigin</a> <a href="../base-4.18.3.0/src/GHC.Base.html#mconcat" class="link">Source</a> <a href="#v:mconcat" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ModuleOrigin:Semigroup:2"></span> <a href="GHC-Prelude-Basic.html#t:Semigroup" title="GHC.Prelude.Basic">Semigroup</a> <a href="GHC-Unit-State.html#t:ModuleOrigin" title="GHC.Unit.State">ModuleOrigin</a></span> <a href="src/GHC.Unit.State.html#line-241" class="link">Source</a> <a href="#t:ModuleOrigin" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ModuleOrigin:Semigroup:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Unit-State.html">GHC.Unit.State</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> :: <a href="GHC-Unit-State.html#t:ModuleOrigin" title="GHC.Unit.State">ModuleOrigin</a> -&gt; <a href="GHC-Unit-State.html#t:ModuleOrigin" title="GHC.Unit.State">ModuleOrigin</a> -&gt; <a href="GHC-Unit-State.html#t:ModuleOrigin" title="GHC.Unit.State">ModuleOrigin</a> <a href="../base-4.18.3.0/src/GHC.Base.html#%3C%3E" class="link">Source</a> <a href="#v:-60--62-" class="selflink">#</a></p><p class="src"><a href="#v:sconcat">sconcat</a> :: <a href="../base-4.18.3.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="GHC-Unit-State.html#t:ModuleOrigin" title="GHC.Unit.State">ModuleOrigin</a> -&gt; <a href="GHC-Unit-State.html#t:ModuleOrigin" title="GHC.Unit.State">ModuleOrigin</a> <a href="../base-4.18.3.0/src/GHC.Base.html#sconcat" class="link">Source</a> <a href="#v:sconcat" class="selflink">#</a></p><p class="src"><a href="#v:stimes">stimes</a> :: <a href="GHC-Prelude-Basic.html#t:Integral" title="GHC.Prelude.Basic">Integral</a> b =&gt; b -&gt; <a href="GHC-Unit-State.html#t:ModuleOrigin" title="GHC.Unit.State">ModuleOrigin</a> -&gt; <a href="GHC-Unit-State.html#t:ModuleOrigin" title="GHC.Unit.State">ModuleOrigin</a> <a href="../base-4.18.3.0/src/GHC.Base.html#stimes" class="link">Source</a> <a href="#v:stimes" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:ModuleOrigin:Outputable:3"></span> <a href="GHC-Utils-Outputable.html#t:Outputable" title="GHC.Utils.Outputable">Outputable</a> <a href="GHC-Unit-State.html#t:ModuleOrigin" title="GHC.Unit.State">ModuleOrigin</a></span> <a href="src/GHC.Unit.State.html#line-206" class="link">Source</a> <a href="#t:ModuleOrigin" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:ModuleOrigin:Outputable:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Unit-State.html">GHC.Unit.State</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="GHC-Unit-State.html#t:ModuleOrigin" title="GHC.Unit.State">ModuleOrigin</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> <a href="src/GHC.Utils.Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:UnusableUnit" class="def">UnusableUnit</a> <a href="src/GHC.Unit.State.html#UnusableUnit" class="link">Source</a> <a href="#t:UnusableUnit" class="selflink">#</a></p><div class="doc"><p>A unusable unit module origin</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:UnusableUnit" class="def">UnusableUnit</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:uuUnit" class="def">uuUnit</a> :: !<a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a></dfn><div class="doc"><p>Unusable unit</p></div></li><li><dfn class="src"><a id="v:uuReason" class="def">uuReason</a> :: !<a href="GHC-Unit-State.html#t:UnusableUnitReason" title="GHC.Unit.State">UnusableUnitReason</a></dfn><div class="doc"><p>Reason</p></div></li><li><dfn class="src"><a id="v:uuIsReexport" class="def">uuIsReexport</a> :: !<a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a></dfn><div class="doc"><p>Is the &quot;module&quot; a reexport?</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:UnusableUnitReason" class="def">UnusableUnitReason</a> <a href="src/GHC.Unit.State.html#UnusableUnitReason" class="link">Source</a> <a href="#t:UnusableUnitReason" class="selflink">#</a></p><div class="doc"><p>The reason why a unit is unusable.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:IgnoredWithFlag" class="def">IgnoredWithFlag</a></td><td class="doc"><p>We ignored it explicitly using <code>-ignore-package</code>.</p></td></tr><tr><td class="src"><a id="v:BrokenDependencies" class="def">BrokenDependencies</a> [<a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>]</td><td class="doc"><p>This unit transitively depends on a unit that was never present
 in any of the provided databases.</p></td></tr><tr><td class="src"><a id="v:CyclicDependencies" class="def">CyclicDependencies</a> [<a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>]</td><td class="doc"><p>This unit transitively depends on a unit involved in a cycle.
 Note that the list of <code><a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a></code> reports the direct dependencies
 of this unit that (transitively) depended on the cycle, and not
 the actual cycle itself (which we report separately at high verbosity.)</p></td></tr><tr><td class="src"><a id="v:IgnoredDependencies" class="def">IgnoredDependencies</a> [<a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>]</td><td class="doc"><p>This unit transitively depends on a unit which was ignored.</p></td></tr><tr><td class="src"><a id="v:ShadowedDependencies" class="def">ShadowedDependencies</a> [<a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>]</td><td class="doc"><p>This unit transitively depends on a unit which was
 shadowed by an ABI-incompatible unit.</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:UnusableUnitReason">Instances</h4><details id="i:UnusableUnitReason" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:UnusableUnitReason:Outputable:1"></span> <a href="GHC-Utils-Outputable.html#t:Outputable" title="GHC.Utils.Outputable">Outputable</a> <a href="GHC-Unit-State.html#t:UnusableUnitReason" title="GHC.Unit.State">UnusableUnitReason</a></span> <a href="src/GHC.Unit.State.html#line-1241" class="link">Source</a> <a href="#t:UnusableUnitReason" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:UnusableUnitReason:Outputable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Unit-State.html">GHC.Unit.State</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="GHC-Unit-State.html#t:UnusableUnitReason" title="GHC.Unit.State">UnusableUnitReason</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> <a href="src/GHC.Utils.Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:pprReason" class="def">pprReason</a> :: <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> -&gt; <a href="GHC-Unit-State.html#t:UnusableUnitReason" title="GHC.Unit.State">UnusableUnitReason</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> <a href="src/GHC.Unit.State.html#pprReason" class="link">Source</a> <a href="#v:pprReason" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:closeUnitDeps" class="def">closeUnitDeps</a> :: <a href="GHC-Unit-State.html#t:UnitInfoMap" title="GHC.Unit.State">UnitInfoMap</a> -&gt; [(<a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>, <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>)] -&gt; <a href="GHC-Data-Maybe.html#t:MaybeErr" title="GHC.Data.Maybe">MaybeErr</a> <a href="GHC-Unit-State.html#t:UnitErr" title="GHC.Unit.State">UnitErr</a> [<a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>] <a href="src/GHC.Unit.State.html#closeUnitDeps" class="link">Source</a> <a href="#v:closeUnitDeps" class="selflink">#</a></p><div class="doc"><p>Takes a list of UnitIds (and their &quot;parent&quot; dependency, used for error
 messages), and returns the list with dependencies included, in reverse
 dependency order (a units appears before those it depends on).</p></div></div><div class="top"><p class="src"><a id="v:closeUnitDeps-39-" class="def">closeUnitDeps'</a> :: <a href="GHC-Unit-State.html#t:UnitInfoMap" title="GHC.Unit.State">UnitInfoMap</a> -&gt; [<a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>] -&gt; [(<a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>, <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>)] -&gt; <a href="GHC-Data-Maybe.html#t:MaybeErr" title="GHC.Data.Maybe">MaybeErr</a> <a href="GHC-Unit-State.html#t:UnitErr" title="GHC.Unit.State">UnitErr</a> [<a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>] <a href="src/GHC.Unit.State.html#closeUnitDeps%27" class="link">Source</a> <a href="#v:closeUnitDeps-39-" class="selflink">#</a></p><div class="doc"><p>Similar to closeUnitDeps but takes a list of already loaded units as an
 additional argument.</p></div></div><div class="top"><p class="src"><a id="v:mayThrowUnitErr" class="def">mayThrowUnitErr</a> :: <a href="GHC-Data-Maybe.html#t:MaybeErr" title="GHC.Data.Maybe">MaybeErr</a> <a href="GHC-Unit-State.html#t:UnitErr" title="GHC.Unit.State">UnitErr</a> a -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> a <a href="src/GHC.Unit.State.html#mayThrowUnitErr" class="link">Source</a> <a href="#v:mayThrowUnitErr" class="selflink">#</a></p></div><a href="#g:3" id="g:3"><h1>Module hole substitution</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:ShHoleSubst" class="def">ShHoleSubst</a> = <a href="GHC-Unit-Module-Env.html#t:ModuleNameEnv" title="GHC.Unit.Module.Env">ModuleNameEnv</a> <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a> <a href="src/GHC.Unit.State.html#ShHoleSubst" class="link">Source</a> <a href="#t:ShHoleSubst" class="selflink">#</a></p><div class="doc"><p>Substitution on module variables, mapping module names to module
 identifiers.</p></div></div><div class="top"><p class="src"><a id="v:renameHoleUnit" class="def">renameHoleUnit</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Unit-State.html#t:ShHoleSubst" title="GHC.Unit.State">ShHoleSubst</a> -&gt; <a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a> -&gt; <a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a> <a href="src/GHC.Unit.State.html#renameHoleUnit" class="link">Source</a> <a href="#v:renameHoleUnit" class="selflink">#</a></p><div class="doc"><p>Substitutes holes in a <code><a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a></code>, suitable for renaming when
 an include occurs; see Note [Representation of module/name variables].</p><p><code>p[A=&lt;A&gt;]</code> maps to <code>p[A=&lt;B&gt;]</code> with <code>A=&lt;B&gt;</code>.</p></div></div><div class="top"><p class="src"><a id="v:renameHoleModule" class="def">renameHoleModule</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Unit-State.html#t:ShHoleSubst" title="GHC.Unit.State">ShHoleSubst</a> -&gt; <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a> -&gt; <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a> <a href="src/GHC.Unit.State.html#renameHoleModule" class="link">Source</a> <a href="#v:renameHoleModule" class="selflink">#</a></p><div class="doc"><p>Substitutes holes in a <code><a href="GHC-Unit-Types.html#t:GenModule" title="GHC.Unit.Types">GenModule</a></code>.  NOT suitable for being called
 directly on a <code>nameModule</code>, see Note [Representation of module/name variables].
 <code>p[A=&lt;A&gt;]:B</code> maps to <code>p[A=q():A]:B</code> with <code>A=q():A</code>;
 similarly, <code>&lt;A&gt;</code> maps to <code>q():A</code>.</p></div></div><div class="top"><p class="src"><a id="v:renameHoleUnit-39-" class="def">renameHoleUnit'</a> :: <a href="GHC-Unit-State.html#t:UnitInfoMap" title="GHC.Unit.State">UnitInfoMap</a> -&gt; <a href="GHC-Unit-State.html#t:PreloadUnitClosure" title="GHC.Unit.State">PreloadUnitClosure</a> -&gt; <a href="GHC-Unit-State.html#t:ShHoleSubst" title="GHC.Unit.State">ShHoleSubst</a> -&gt; <a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a> -&gt; <a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a> <a href="src/GHC.Unit.State.html#renameHoleUnit%27" class="link">Source</a> <a href="#v:renameHoleUnit-39-" class="selflink">#</a></p><div class="doc"><p>Like 'renameHoleUnit, but requires only <code>ClosureUnitInfoMap</code>
 so it can be used by <a href="GHC-Unit-State.html">GHC.Unit.State</a>.</p></div></div><div class="top"><p class="src"><a id="v:renameHoleModule-39-" class="def">renameHoleModule'</a> :: <a href="GHC-Unit-State.html#t:UnitInfoMap" title="GHC.Unit.State">UnitInfoMap</a> -&gt; <a href="GHC-Unit-State.html#t:PreloadUnitClosure" title="GHC.Unit.State">PreloadUnitClosure</a> -&gt; <a href="GHC-Unit-State.html#t:ShHoleSubst" title="GHC.Unit.State">ShHoleSubst</a> -&gt; <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a> -&gt; <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a> <a href="src/GHC.Unit.State.html#renameHoleModule%27" class="link">Source</a> <a href="#v:renameHoleModule-39-" class="selflink">#</a></p><div class="doc"><p>Like <code><a href="GHC-Unit-State.html#v:renameHoleModule" title="GHC.Unit.State">renameHoleModule</a></code>, but requires only <code>ClosureUnitInfoMap</code>
 so it can be used by <a href="GHC-Unit-State.html">GHC.Unit.State</a>.</p></div></div><div class="top"><p class="src"><a id="v:instUnitToUnit" class="def">instUnitToUnit</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Unit-Types.html#t:InstantiatedUnit" title="GHC.Unit.Types">InstantiatedUnit</a> -&gt; <a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a> <a href="src/GHC.Unit.State.html#instUnitToUnit" class="link">Source</a> <a href="#v:instUnitToUnit" class="selflink">#</a></p><div class="doc"><p>Check the database to see if we already have an installed unit that
 corresponds to the given <code><a href="GHC-Unit-Types.html#t:GenInstantiatedUnit" title="GHC.Unit.Types">GenInstantiatedUnit</a></code>.</p><p>Return a <code><a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a></code> which either wraps the <code><a href="GHC-Unit-Types.html#t:GenInstantiatedUnit" title="GHC.Unit.Types">GenInstantiatedUnit</a></code> unchanged or
 references a matching installed unit.</p><p>See Note [VirtUnit to RealUnit improvement]</p></div></div><div class="top"><p class="src"><a id="v:instModuleToModule" class="def">instModuleToModule</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Unit-Types.html#t:InstantiatedModule" title="GHC.Unit.Types">InstantiatedModule</a> -&gt; <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a> <a href="src/GHC.Unit.State.html#instModuleToModule" class="link">Source</a> <a href="#v:instModuleToModule" class="selflink">#</a></p><div class="doc"><p>Injects an <code><a href="GHC-Unit-Types.html#t:InstantiatedModule" title="GHC.Unit.Types">InstantiatedModule</a></code> to <code><a href="GHC-Unit-Types.html#t:GenModule" title="GHC.Unit.Types">GenModule</a></code> (see also
 <code><a href="GHC-Unit-State.html#v:instUnitToUnit" title="GHC.Unit.State">instUnitToUnit</a></code>.</p></div></div><a href="#g:4" id="g:4"><h1>Pretty-printing</h1></a><div class="top"><p class="src"><a id="v:pprFlag" class="def">pprFlag</a> :: <a href="GHC-Driver-Session.html#t:PackageFlag" title="GHC.Driver.Session">PackageFlag</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> <a href="src/GHC.Unit.State.html#pprFlag" class="link">Source</a> <a href="#v:pprFlag" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:pprUnits" class="def">pprUnits</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> <a href="src/GHC.Unit.State.html#pprUnits" class="link">Source</a> <a href="#v:pprUnits" class="selflink">#</a></p><div class="doc"><p>Show (very verbose) package info</p></div></div><div class="top"><p class="src"><a id="v:pprUnitsSimple" class="def">pprUnitsSimple</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> <a href="src/GHC.Unit.State.html#pprUnitsSimple" class="link">Source</a> <a href="#v:pprUnitsSimple" class="selflink">#</a></p><div class="doc"><p>Show simplified unit info.</p><p>The idea is to only print package id, and any information that might
 be different from the package databases (exposure, trust)</p></div></div><div class="top"><p class="src"><a id="v:pprUnitIdForUser" class="def">pprUnitIdForUser</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> <a href="src/GHC.Unit.State.html#pprUnitIdForUser" class="link">Source</a> <a href="#v:pprUnitIdForUser" class="selflink">#</a></p><div class="doc"><p>Pretty-print a UnitId for the user.</p><p>Cabal packages may contain several components (programs, libraries, etc.).
 As far as GHC is concerned, installed package components (&quot;units&quot;) are
 identified by an opaque UnitId string provided by Cabal. As the string
 contains a hash, we don't want to display it to users so GHC queries the
 database to retrieve some infos about the original source package (name,
 version, component name).</p><p>Instead we want to display: packagename-version[:componentname]</p><p>Component name is only displayed if it isn't the default library</p><p>To do this we need to query a unit database.</p></div></div><div class="top"><p class="src"><a id="v:pprUnitInfoForUser" class="def">pprUnitInfoForUser</a> :: <a href="GHC-Unit-Info.html#t:UnitInfo" title="GHC.Unit.Info">UnitInfo</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> <a href="src/GHC.Unit.State.html#pprUnitInfoForUser" class="link">Source</a> <a href="#v:pprUnitInfoForUser" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:pprModuleMap" class="def">pprModuleMap</a> :: ModuleNameProvidersMap -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> <a href="src/GHC.Unit.State.html#pprModuleMap" class="link">Source</a> <a href="#v:pprModuleMap" class="selflink">#</a></p><div class="doc"><p>Show the mapping of modules to where they come from.</p></div></div><div class="top"><p class="src"><a id="v:pprWithUnitState" class="def">pprWithUnitState</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> <a href="src/GHC.Unit.State.html#pprWithUnitState" class="link">Source</a> <a href="#v:pprWithUnitState" class="selflink">#</a></p><div class="doc"><p>Print unit-ids with UnitInfo found in the given UnitState</p></div></div><a href="#g:5" id="g:5"><h1>Utils</h1></a><div class="top"><p class="src"><a id="v:unwireUnit" class="def">unwireUnit</a> :: <a href="GHC-Unit-State.html#t:UnitState" title="GHC.Unit.State">UnitState</a> -&gt; <a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a> -&gt; <a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a> <a href="src/GHC.Unit.State.html#unwireUnit" class="link">Source</a> <a href="#v:unwireUnit" class="selflink">#</a></p><div class="doc"><p>Given a wired-in <code><a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a></code>, &quot;unwire&quot; it into the <code><a href="GHC-Unit-Types.html#t:Unit" title="GHC.Unit.Types">Unit</a></code>
 that it was recorded as in the package database.</p></div></div><div class="top"><p class="src"><a id="v:implicitPackageDeps" class="def">implicitPackageDeps</a> :: <a href="GHC-Driver-Session.html#t:DynFlags" title="GHC.Driver.Session">DynFlags</a> -&gt; [<a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>] <a href="src/GHC.Unit.State.html#implicitPackageDeps" class="link">Source</a> <a href="#v:implicitPackageDeps" class="selflink">#</a></p><div class="doc"><p>Add package dependencies on the wired-in packages we use</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>