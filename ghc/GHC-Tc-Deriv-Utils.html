<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>GHC.Tc.Deriv.Utils</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ghc-9.6.7: The GHC API</span><ul class="links" id="page-menu"><li><a href="src/GHC.Tc.Deriv.Utils.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">GHC.Tc.Deriv.Utils</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Error-checking and other utilities for <code>deriving</code> clauses or declarations.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">type</span> <a href="#t:DerivM">DerivM</a> = <a href="../transformers-0.6.1.0/Control-Monad-Trans-Reader.html#t:ReaderT" title="Control.Monad.Trans.Reader">ReaderT</a> <a href="GHC-Tc-Deriv-Utils.html#t:DerivEnv" title="GHC.Tc.Deriv.Utils">DerivEnv</a> <a href="GHC-Tc-Types.html#t:TcRn" title="GHC.Tc.Types">TcRn</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:DerivEnv">DerivEnv</a> = <a href="#v:DerivEnv">DerivEnv</a> {<ul class="subs"><li><a href="#v:denv_overlap_mode">denv_overlap_mode</a> :: <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Types-Basic.html#t:OverlapMode" title="GHC.Types.Basic">OverlapMode</a></li><li><a href="#v:denv_tvs">denv_tvs</a> :: [<a href="GHC-Types-Var.html#t:TyVar" title="GHC.Types.Var">TyVar</a>]</li><li><a href="#v:denv_cls">denv_cls</a> :: <a href="GHC-Core-Class.html#t:Class" title="GHC.Core.Class">Class</a></li><li><a href="#v:denv_inst_tys">denv_inst_tys</a> :: [<a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a>]</li><li><a href="#v:denv_ctxt">denv_ctxt</a> :: <a href="GHC-Tc-Deriv-Utils.html#t:DerivContext" title="GHC.Tc.Deriv.Utils">DerivContext</a></li><li><a href="#v:denv_skol_info">denv_skol_info</a> :: <a href="GHC-Tc-Types-Origin.html#t:SkolemInfo" title="GHC.Tc.Types.Origin">SkolemInfo</a></li><li><a href="#v:denv_strat">denv_strat</a> :: <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> (<a href="Language-Haskell-Syntax-Decls.html#t:DerivStrategy" title="Language.Haskell.Syntax.Decls">DerivStrategy</a> <a href="GHC-Hs-Extension.html#t:GhcTc" title="GHC.Hs.Extension">GhcTc</a>)</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:DerivSpec">DerivSpec</a> theta = <a href="#v:DS">DS</a> {<ul class="subs"><li><a href="#v:ds_loc">ds_loc</a> :: <a href="GHC-Types-SrcLoc.html#t:SrcSpan" title="GHC.Types.SrcLoc">SrcSpan</a></li><li><a href="#v:ds_name">ds_name</a> :: <a href="GHC-Types-Name.html#t:Name" title="GHC.Types.Name">Name</a></li><li><a href="#v:ds_tvs">ds_tvs</a> :: [<a href="GHC-Types-Var.html#t:TyVar" title="GHC.Types.Var">TyVar</a>]</li><li><a href="#v:ds_theta">ds_theta</a> :: theta</li><li><a href="#v:ds_cls">ds_cls</a> :: <a href="GHC-Core-Class.html#t:Class" title="GHC.Core.Class">Class</a></li><li><a href="#v:ds_tys">ds_tys</a> :: [<a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a>]</li><li><a href="#v:ds_skol_info">ds_skol_info</a> :: <a href="GHC-Tc-Types-Origin.html#t:SkolemInfo" title="GHC.Tc.Types.Origin">SkolemInfo</a></li><li><a href="#v:ds_user_ctxt">ds_user_ctxt</a> :: <a href="GHC-Tc-Types-Origin.html#t:UserTypeCtxt" title="GHC.Tc.Types.Origin">UserTypeCtxt</a></li><li><a href="#v:ds_overlap">ds_overlap</a> :: <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Types-Basic.html#t:OverlapMode" title="GHC.Types.Basic">OverlapMode</a></li><li><a href="#v:ds_standalone_wildcard">ds_standalone_wildcard</a> :: <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Types-SrcLoc.html#t:SrcSpan" title="GHC.Types.SrcLoc">SrcSpan</a></li><li><a href="#v:ds_mechanism">ds_mechanism</a> :: <a href="GHC-Tc-Deriv-Utils.html#t:DerivSpecMechanism" title="GHC.Tc.Deriv.Utils">DerivSpecMechanism</a></li></ul>}</li><li class="src short"><a href="#v:pprDerivSpec">pprDerivSpec</a> :: <a href="GHC-Utils-Outputable.html#t:Outputable" title="GHC.Utils.Outputable">Outputable</a> theta =&gt; <a href="GHC-Tc-Deriv-Utils.html#t:DerivSpec" title="GHC.Tc.Deriv.Utils">DerivSpec</a> theta -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a></li><li class="src short"><a href="#v:setDerivSpecTheta">setDerivSpecTheta</a> :: theta' -&gt; <a href="GHC-Tc-Deriv-Utils.html#t:DerivSpec" title="GHC.Tc.Deriv.Utils">DerivSpec</a> theta -&gt; <a href="GHC-Tc-Deriv-Utils.html#t:DerivSpec" title="GHC.Tc.Deriv.Utils">DerivSpec</a> theta'</li><li class="src short"><a href="#v:zonkDerivSpec">zonkDerivSpec</a> :: <a href="GHC-Tc-Deriv-Utils.html#t:DerivSpec" title="GHC.Tc.Deriv.Utils">DerivSpec</a> <a href="GHC-Core-Type.html#t:ThetaType" title="GHC.Core.Type">ThetaType</a> -&gt; <a href="GHC-Tc-Types.html#t:TcM" title="GHC.Tc.Types">TcM</a> (<a href="GHC-Tc-Deriv-Utils.html#t:DerivSpec" title="GHC.Tc.Deriv.Utils">DerivSpec</a> <a href="GHC-Core-Type.html#t:ThetaType" title="GHC.Core.Type">ThetaType</a>)</li><li class="src short"><span class="keyword">data</span> <a href="#t:DerivSpecMechanism">DerivSpecMechanism</a><ul class="subs"><li>= <a href="#v:DerivSpecStock">DerivSpecStock</a> { <ul class="subs"><li><a href="#v:dsm_stock_dit">dsm_stock_dit</a> :: <a href="GHC-Tc-Deriv-Generate.html#t:DerivInstTys" title="GHC.Tc.Deriv.Generate">DerivInstTys</a></li><li><a href="#v:dsm_stock_gen_fns">dsm_stock_gen_fns</a> :: <a href="GHC-Tc-Deriv-Utils.html#t:StockGenFns" title="GHC.Tc.Deriv.Utils">StockGenFns</a></li></ul> }</li><li>| <a href="#v:DerivSpecNewtype">DerivSpecNewtype</a> { <ul class="subs"><li><a href="#v:dsm_newtype_dit">dsm_newtype_dit</a> :: <a href="GHC-Tc-Deriv-Generate.html#t:DerivInstTys" title="GHC.Tc.Deriv.Generate">DerivInstTys</a></li><li><a href="#v:dsm_newtype_rep_ty">dsm_newtype_rep_ty</a> :: <a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a></li></ul> }</li><li>| <a href="#v:DerivSpecAnyClass">DerivSpecAnyClass</a></li><li>| <a href="#v:DerivSpecVia">DerivSpecVia</a> { <ul class="subs"><li><a href="#v:dsm_via_cls_tys">dsm_via_cls_tys</a> :: [<a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a>]</li><li><a href="#v:dsm_via_inst_ty">dsm_via_inst_ty</a> :: <a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a></li><li><a href="#v:dsm_via_ty">dsm_via_ty</a> :: <a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a></li></ul> }</li></ul></li><li class="src short"><a href="#v:derivSpecMechanismToStrategy">derivSpecMechanismToStrategy</a> :: <a href="GHC-Tc-Deriv-Utils.html#t:DerivSpecMechanism" title="GHC.Tc.Deriv.Utils">DerivSpecMechanism</a> -&gt; <a href="Language-Haskell-Syntax-Decls.html#t:DerivStrategy" title="Language.Haskell.Syntax.Decls">DerivStrategy</a> <a href="GHC-Hs-Extension.html#t:GhcTc" title="GHC.Hs.Extension">GhcTc</a></li><li class="src short"><a href="#v:isDerivSpecStock">isDerivSpecStock</a> :: <a href="GHC-Tc-Deriv-Utils.html#t:DerivSpecMechanism" title="GHC.Tc.Deriv.Utils">DerivSpecMechanism</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a></li><li class="src short"><a href="#v:isDerivSpecNewtype">isDerivSpecNewtype</a> :: <a href="GHC-Tc-Deriv-Utils.html#t:DerivSpecMechanism" title="GHC.Tc.Deriv.Utils">DerivSpecMechanism</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a></li><li class="src short"><a href="#v:isDerivSpecAnyClass">isDerivSpecAnyClass</a> :: <a href="GHC-Tc-Deriv-Utils.html#t:DerivSpecMechanism" title="GHC.Tc.Deriv.Utils">DerivSpecMechanism</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a></li><li class="src short"><a href="#v:isDerivSpecVia">isDerivSpecVia</a> :: <a href="GHC-Tc-Deriv-Utils.html#t:DerivSpecMechanism" title="GHC.Tc.Deriv.Utils">DerivSpecMechanism</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a></li><li class="src short"><a href="#v:zonkDerivSpecMechanism">zonkDerivSpecMechanism</a> :: <a href="GHC-Tc-Utils-Zonk.html#t:ZonkEnv" title="GHC.Tc.Utils.Zonk">ZonkEnv</a> -&gt; <a href="GHC-Tc-Deriv-Utils.html#t:DerivSpecMechanism" title="GHC.Tc.Deriv.Utils">DerivSpecMechanism</a> -&gt; <a href="GHC-Tc-Types.html#t:TcM" title="GHC.Tc.Types">TcM</a> <a href="GHC-Tc-Deriv-Utils.html#t:DerivSpecMechanism" title="GHC.Tc.Deriv.Utils">DerivSpecMechanism</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:DerivContext">DerivContext</a><ul class="subs"><li>= <a href="#v:InferContext">InferContext</a> (<a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Types-SrcLoc.html#t:SrcSpan" title="GHC.Types.SrcLoc">SrcSpan</a>)</li><li>| <a href="#v:SupplyContext">SupplyContext</a> <a href="GHC-Core-Type.html#t:ThetaType" title="GHC.Core.Type">ThetaType</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:OriginativeDerivStatus">OriginativeDerivStatus</a><ul class="subs"><li>= <a href="#v:CanDeriveStock">CanDeriveStock</a> <a href="GHC-Tc-Deriv-Utils.html#t:StockGenFns" title="GHC.Tc.Deriv.Utils">StockGenFns</a></li><li>| <a href="#v:StockClassError">StockClassError</a> !<a href="GHC-Tc-Errors-Types.html#t:DeriveInstanceErrReason" title="GHC.Tc.Errors.Types">DeriveInstanceErrReason</a></li><li>| <a href="#v:CanDeriveAnyClass">CanDeriveAnyClass</a></li><li>| <a href="#v:NonDerivableClass">NonDerivableClass</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:StockGenFns">StockGenFns</a> = <a href="#v:StockGenFns">StockGenFns</a> {<ul class="subs"><li><a href="#v:stock_gen_binds">stock_gen_binds</a> :: <a href="GHC-Types-SrcLoc.html#t:SrcSpan" title="GHC.Types.SrcLoc">SrcSpan</a> -&gt; <a href="GHC-Tc-Deriv-Generate.html#t:DerivInstTys" title="GHC.Tc.Deriv.Generate">DerivInstTys</a> -&gt; <a href="GHC-Tc-Types.html#t:TcM" title="GHC.Tc.Types">TcM</a> (<a href="Language-Haskell-Syntax-Binds.html#t:LHsBinds" title="Language.Haskell.Syntax.Binds">LHsBinds</a> <a href="GHC-Hs-Extension.html#t:GhcPs" title="GHC.Hs.Extension">GhcPs</a>, [<a href="Language-Haskell-Syntax-Binds.html#t:LSig" title="Language.Haskell.Syntax.Binds">LSig</a> <a href="GHC-Hs-Extension.html#t:GhcPs" title="GHC.Hs.Extension">GhcPs</a>], <a href="GHC-Data-Bag.html#t:Bag" title="GHC.Data.Bag">Bag</a> <a href="GHC-Tc-Deriv-Generate.html#t:AuxBindSpec" title="GHC.Tc.Deriv.Generate">AuxBindSpec</a>, [<a href="GHC-Types-Name.html#t:Name" title="GHC.Types.Name">Name</a>])</li><li><a href="#v:stock_gen_fam_insts">stock_gen_fam_insts</a> :: <a href="GHC-Types-SrcLoc.html#t:SrcSpan" title="GHC.Types.SrcLoc">SrcSpan</a> -&gt; <a href="GHC-Tc-Deriv-Generate.html#t:DerivInstTys" title="GHC.Tc.Deriv.Generate">DerivInstTys</a> -&gt; <a href="GHC-Tc-Types.html#t:TcM" title="GHC.Tc.Types">TcM</a> [<a href="GHC-Core-FamInstEnv.html#t:FamInst" title="GHC.Core.FamInstEnv">FamInst</a>]</li></ul>}</li><li class="src short"><a href="#v:isStandaloneDeriv">isStandaloneDeriv</a> :: <a href="GHC-Tc-Deriv-Utils.html#t:DerivM" title="GHC.Tc.Deriv.Utils">DerivM</a> <a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a></li><li class="src short"><a href="#v:isStandaloneWildcardDeriv">isStandaloneWildcardDeriv</a> :: <a href="GHC-Tc-Deriv-Utils.html#t:DerivM" title="GHC.Tc.Deriv.Utils">DerivM</a> <a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a></li><li class="src short"><a href="#v:askDerivUserTypeCtxt">askDerivUserTypeCtxt</a> :: <a href="GHC-Tc-Deriv-Utils.html#t:DerivM" title="GHC.Tc.Deriv.Utils">DerivM</a> <a href="GHC-Tc-Types-Origin.html#t:UserTypeCtxt" title="GHC.Tc.Types.Origin">UserTypeCtxt</a></li><li class="src short"><a href="#v:mkDerivOrigin">mkDerivOrigin</a> :: <a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a> -&gt; <a href="GHC-Tc-Types-Origin.html#t:CtOrigin" title="GHC.Tc.Types.Origin">CtOrigin</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:PredSpec">PredSpec</a><ul class="subs"><li>= <a href="#v:SimplePredSpec">SimplePredSpec</a> { <ul class="subs"><li><a href="#v:sps_pred">sps_pred</a> :: <a href="GHC-Tc-Utils-TcType.html#t:TcPredType" title="GHC.Tc.Utils.TcType">TcPredType</a></li><li><a href="#v:sps_origin">sps_origin</a> :: <a href="GHC-Tc-Types-Origin.html#t:CtOrigin" title="GHC.Tc.Types.Origin">CtOrigin</a></li><li><a href="#v:sps_type_or_kind">sps_type_or_kind</a> :: <a href="GHC-Types-Basic.html#t:TypeOrKind" title="GHC.Types.Basic">TypeOrKind</a></li></ul> }</li><li>| <a href="#v:SubTypePredSpec">SubTypePredSpec</a> { <ul class="subs"><li><a href="#v:stps_ty_actual">stps_ty_actual</a> :: <a href="GHC-Tc-Utils-TcType.html#t:TcSigmaType" title="GHC.Tc.Utils.TcType">TcSigmaType</a></li><li><a href="#v:stps_ty_expected">stps_ty_expected</a> :: <a href="GHC-Tc-Utils-TcType.html#t:TcSigmaType" title="GHC.Tc.Utils.TcType">TcSigmaType</a></li><li><a href="#v:stps_origin">stps_origin</a> :: <a href="GHC-Tc-Types-Origin.html#t:CtOrigin" title="GHC.Tc.Types.Origin">CtOrigin</a></li></ul> }</li></ul></li><li class="src short"><span class="keyword">type</span> <a href="#t:ThetaSpec">ThetaSpec</a> = [<a href="GHC-Tc-Deriv-Utils.html#t:PredSpec" title="GHC.Tc.Deriv.Utils">PredSpec</a>]</li><li class="src short"><a href="#v:mkDirectThetaSpec">mkDirectThetaSpec</a> :: <a href="GHC-Tc-Types-Origin.html#t:CtOrigin" title="GHC.Tc.Types.Origin">CtOrigin</a> -&gt; <a href="GHC-Types-Basic.html#t:TypeOrKind" title="GHC.Types.Basic">TypeOrKind</a> -&gt; <a href="GHC-Core-Type.html#t:ThetaType" title="GHC.Core.Type">ThetaType</a> -&gt; <a href="GHC-Tc-Deriv-Utils.html#t:ThetaSpec" title="GHC.Tc.Deriv.Utils">ThetaSpec</a></li><li class="src short"><a href="#v:substPredSpec">substPredSpec</a> :: <a href="GHC-Utils-Misc.html#t:HasCallStack" title="GHC.Utils.Misc">HasCallStack</a> =&gt; <a href="GHC-Core-TyCo-Subst.html#t:Subst" title="GHC.Core.TyCo.Subst">Subst</a> -&gt; <a href="GHC-Tc-Deriv-Utils.html#t:PredSpec" title="GHC.Tc.Deriv.Utils">PredSpec</a> -&gt; <a href="GHC-Tc-Deriv-Utils.html#t:PredSpec" title="GHC.Tc.Deriv.Utils">PredSpec</a></li><li class="src short"><a href="#v:captureThetaSpecConstraints">captureThetaSpecConstraints</a> :: <a href="GHC-Tc-Types-Origin.html#t:UserTypeCtxt" title="GHC.Tc.Types.Origin">UserTypeCtxt</a> -&gt; <a href="GHC-Tc-Deriv-Utils.html#t:ThetaSpec" title="GHC.Tc.Deriv.Utils">ThetaSpec</a> -&gt; <a href="GHC-Tc-Types.html#t:TcM" title="GHC.Tc.Types">TcM</a> (<a href="GHC-Tc-Utils-TcType.html#t:TcLevel" title="GHC.Tc.Utils.TcType">TcLevel</a>, <a href="GHC-Tc-Types-Constraint.html#t:WantedConstraints" title="GHC.Tc.Types.Constraint">WantedConstraints</a>)</li><li class="src short"><a href="#v:checkOriginativeSideConditions">checkOriginativeSideConditions</a> :: <a href="GHC-Tc-Deriv-Generate.html#t:DerivInstTys" title="GHC.Tc.Deriv.Generate">DerivInstTys</a> -&gt; <a href="GHC-Tc-Deriv-Utils.html#t:DerivM" title="GHC.Tc.Deriv.Utils">DerivM</a> <a href="GHC-Tc-Deriv-Utils.html#t:OriginativeDerivStatus" title="GHC.Tc.Deriv.Utils">OriginativeDerivStatus</a></li><li class="src short"><a href="#v:hasStockDeriving">hasStockDeriving</a> :: <a href="GHC-Core-Class.html#t:Class" title="GHC.Core.Class">Class</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Tc-Deriv-Utils.html#t:StockGenFns" title="GHC.Tc.Deriv.Utils">StockGenFns</a></li><li class="src short"><a href="#v:std_class_via_coercible">std_class_via_coercible</a> :: <a href="GHC-Core-Class.html#t:Class" title="GHC.Core.Class">Class</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a></li><li class="src short"><a href="#v:non_coercible_class">non_coercible_class</a> :: <a href="GHC-Core-Class.html#t:Class" title="GHC.Core.Class">Class</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a></li><li class="src short"><a href="#v:newDerivClsInst">newDerivClsInst</a> :: <a href="GHC-Tc-Deriv-Utils.html#t:DerivSpec" title="GHC.Tc.Deriv.Utils">DerivSpec</a> <a href="GHC-Core-Type.html#t:ThetaType" title="GHC.Core.Type">ThetaType</a> -&gt; <a href="GHC-Tc-Types.html#t:TcM" title="GHC.Tc.Types">TcM</a> <a href="GHC-Core-InstEnv.html#t:ClsInst" title="GHC.Core.InstEnv">ClsInst</a></li><li class="src short"><a href="#v:extendLocalInstEnv">extendLocalInstEnv</a> :: [<a href="GHC-Core-InstEnv.html#t:ClsInst" title="GHC.Core.InstEnv">ClsInst</a>] -&gt; <a href="GHC-Tc-Types.html#t:TcM" title="GHC.Tc.Types">TcM</a> a -&gt; <a href="GHC-Tc-Types.html#t:TcM" title="GHC.Tc.Types">TcM</a> a</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:DerivM" class="def">DerivM</a> = <a href="../transformers-0.6.1.0/Control-Monad-Trans-Reader.html#t:ReaderT" title="Control.Monad.Trans.Reader">ReaderT</a> <a href="GHC-Tc-Deriv-Utils.html#t:DerivEnv" title="GHC.Tc.Deriv.Utils">DerivEnv</a> <a href="GHC-Tc-Types.html#t:TcRn" title="GHC.Tc.Types">TcRn</a> <a href="src/GHC.Tc.Deriv.Utils.html#DerivM" class="link">Source</a> <a href="#t:DerivM" class="selflink">#</a></p><div class="doc"><p>To avoid having to manually plumb everything in <code><a href="GHC-Tc-Deriv-Utils.html#t:DerivEnv" title="GHC.Tc.Deriv.Utils">DerivEnv</a></code> throughout
 various functions in <a href="GHC-Tc-Deriv.html">GHC.Tc.Deriv</a> and <a href="GHC-Tc-Deriv-Infer.html">GHC.Tc.Deriv.Infer</a>, we use <code><a href="GHC-Tc-Deriv-Utils.html#t:DerivM" title="GHC.Tc.Deriv.Utils">DerivM</a></code>, which
 is a simple reader around <code><a href="GHC-Tc-Types.html#t:TcRn" title="GHC.Tc.Types">TcRn</a></code>.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DerivEnv" class="def">DerivEnv</a> <a href="src/GHC.Tc.Deriv.Utils.html#DerivEnv" class="link">Source</a> <a href="#t:DerivEnv" class="selflink">#</a></p><div class="doc"><p>Contains all of the information known about a derived instance when
 determining what its <code>EarlyDerivSpec</code> should be.
 See <code>Note [DerivEnv and DerivSpecMechanism]</code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DerivEnv" class="def">DerivEnv</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:denv_overlap_mode" class="def">denv_overlap_mode</a> :: <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Types-Basic.html#t:OverlapMode" title="GHC.Types.Basic">OverlapMode</a></dfn><div class="doc"><p>Is this an overlapping instance?</p></div></li><li><dfn class="src"><a id="v:denv_tvs" class="def">denv_tvs</a> :: [<a href="GHC-Types-Var.html#t:TyVar" title="GHC.Types.Var">TyVar</a>]</dfn><div class="doc"><p>Universally quantified type variables in the instance. If the
   <code>denv_ctxt</code> is <code><a href="GHC-Tc-Deriv-Utils.html#v:InferContext" title="GHC.Tc.Deriv.Utils">InferContext</a></code>, these will be <code><a href="GHC-Types-Var.html#t:TcTyVar" title="GHC.Types.Var">TcTyVar</a></code> skolems.
   If the <code>denv_ctxt</code> is <code><a href="GHC-Tc-Deriv-Utils.html#v:SupplyContext" title="GHC.Tc.Deriv.Utils">SupplyContext</a></code>, these will be ordinary <code><a href="GHC-Types-Var.html#t:TyVar" title="GHC.Types.Var">TyVar</a></code>s.
   See <code>Note [Overlap and deriving]</code> in <a href="GHC-Tc-Deriv-Infer.html">GHC.Tc.Deriv.Infer</a>.</p><p>All type variables that appear in the <code><a href="GHC-Tc-Deriv-Utils.html#v:denv_inst_tys" title="GHC.Tc.Deriv.Utils">denv_inst_tys</a></code>, <code><a href="GHC-Tc-Deriv-Utils.html#v:denv_ctxt" title="GHC.Tc.Deriv.Utils">denv_ctxt</a></code>,
   <code><a href="GHC-Tc-Deriv-Utils.html#v:denv_skol_info" title="GHC.Tc.Deriv.Utils">denv_skol_info</a></code>, and <code><a href="GHC-Tc-Deriv-Utils.html#v:denv_strat" title="GHC.Tc.Deriv.Utils">denv_strat</a></code> should come from <code><a href="GHC-Tc-Deriv-Utils.html#v:denv_tvs" title="GHC.Tc.Deriv.Utils">denv_tvs</a></code>.</p></div></li><li><dfn class="src"><a id="v:denv_cls" class="def">denv_cls</a> :: <a href="GHC-Core-Class.html#t:Class" title="GHC.Core.Class">Class</a></dfn><div class="doc"><p>Class for which we need to derive an instance</p></div></li><li><dfn class="src"><a id="v:denv_inst_tys" class="def">denv_inst_tys</a> :: [<a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a>]</dfn><div class="doc"><p>All arguments to <code><a href="GHC-Tc-Deriv-Utils.html#v:denv_cls" title="GHC.Tc.Deriv.Utils">denv_cls</a></code> in the derived instance.</p></div></li><li><dfn class="src"><a id="v:denv_ctxt" class="def">denv_ctxt</a> :: <a href="GHC-Tc-Deriv-Utils.html#t:DerivContext" title="GHC.Tc.Deriv.Utils">DerivContext</a></dfn><div class="doc"><p><code><code><a href="GHC-Tc-Deriv-Utils.html#v:SupplyContext" title="GHC.Tc.Deriv.Utils">SupplyContext</a></code> theta</code> for standalone deriving (where <code>theta</code> is the
   context of the instance).
   <code><a href="GHC-Tc-Deriv-Utils.html#v:InferContext" title="GHC.Tc.Deriv.Utils">InferContext</a></code> for <code>deriving</code> clauses, or for standalone deriving that
   uses a wildcard constraint.
   See <code>Note [Inferring the instance context]</code>.</p></div></li><li><dfn class="src"><a id="v:denv_skol_info" class="def">denv_skol_info</a> :: <a href="GHC-Tc-Types-Origin.html#t:SkolemInfo" title="GHC.Tc.Types.Origin">SkolemInfo</a></dfn><div class="doc"><p>The <code><a href="GHC-Tc-Types-Origin.html#t:SkolemInfo" title="GHC.Tc.Types.Origin">SkolemInfo</a></code> used to skolemise the <code>denv_tvs</code> in the case where
   the <code><a href="GHC-Tc-Deriv-Utils.html#v:denv_ctxt" title="GHC.Tc.Deriv.Utils">denv_ctxt</a></code> is <code><a href="GHC-Tc-Deriv-Utils.html#v:InferContext" title="GHC.Tc.Deriv.Utils">InferContext</a></code>.</p></div></li><li><dfn class="src"><a id="v:denv_strat" class="def">denv_strat</a> :: <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> (<a href="Language-Haskell-Syntax-Decls.html#t:DerivStrategy" title="Language.Haskell.Syntax.Decls">DerivStrategy</a> <a href="GHC-Hs-Extension.html#t:GhcTc" title="GHC.Hs.Extension">GhcTc</a>)</dfn><div class="doc"><p><code><a href="GHC-Prelude-Basic.html#v:Just" title="GHC.Prelude.Basic">Just</a></code> if user requests a particular deriving strategy.
   Otherwise, <code><a href="GHC-Prelude-Basic.html#v:Nothing" title="GHC.Prelude.Basic">Nothing</a></code>.</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:DerivEnv">Instances</h4><details id="i:DerivEnv" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DerivEnv:Outputable:1"></span> <a href="GHC-Utils-Outputable.html#t:Outputable" title="GHC.Utils.Outputable">Outputable</a> <a href="GHC-Tc-Deriv-Utils.html#t:DerivEnv" title="GHC.Tc.Deriv.Utils">DerivEnv</a></span> <a href="src/GHC.Tc.Deriv.Utils.html#line-149" class="link">Source</a> <a href="#t:DerivEnv" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DerivEnv:Outputable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Tc-Deriv-Utils.html">GHC.Tc.Deriv.Utils</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="GHC-Tc-Deriv-Utils.html#t:DerivEnv" title="GHC.Tc.Deriv.Utils">DerivEnv</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> <a href="src/GHC.Utils.Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DerivSpec" class="def">DerivSpec</a> theta <a href="src/GHC.Tc.Deriv.Utils.html#DerivSpec" class="link">Source</a> <a href="#t:DerivSpec" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DS" class="def">DS</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:ds_loc" class="def">ds_loc</a> :: <a href="GHC-Types-SrcLoc.html#t:SrcSpan" title="GHC.Types.SrcLoc">SrcSpan</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ds_name" class="def">ds_name</a> :: <a href="GHC-Types-Name.html#t:Name" title="GHC.Types.Name">Name</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ds_tvs" class="def">ds_tvs</a> :: [<a href="GHC-Types-Var.html#t:TyVar" title="GHC.Types.Var">TyVar</a>]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ds_theta" class="def">ds_theta</a> :: theta</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ds_cls" class="def">ds_cls</a> :: <a href="GHC-Core-Class.html#t:Class" title="GHC.Core.Class">Class</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ds_tys" class="def">ds_tys</a> :: [<a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a>]</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ds_skol_info" class="def">ds_skol_info</a> :: <a href="GHC-Tc-Types-Origin.html#t:SkolemInfo" title="GHC.Tc.Types.Origin">SkolemInfo</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ds_user_ctxt" class="def">ds_user_ctxt</a> :: <a href="GHC-Tc-Types-Origin.html#t:UserTypeCtxt" title="GHC.Tc.Types.Origin">UserTypeCtxt</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ds_overlap" class="def">ds_overlap</a> :: <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Types-Basic.html#t:OverlapMode" title="GHC.Types.Basic">OverlapMode</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ds_standalone_wildcard" class="def">ds_standalone_wildcard</a> :: <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Types-SrcLoc.html#t:SrcSpan" title="GHC.Types.SrcLoc">SrcSpan</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ds_mechanism" class="def">ds_mechanism</a> :: <a href="GHC-Tc-Deriv-Utils.html#t:DerivSpecMechanism" title="GHC.Tc.Deriv.Utils">DerivSpecMechanism</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:DerivSpec">Instances</h4><details id="i:DerivSpec" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DerivSpec:Outputable:1"></span> <a href="GHC-Utils-Outputable.html#t:Outputable" title="GHC.Utils.Outputable">Outputable</a> theta =&gt; <a href="GHC-Utils-Outputable.html#t:Outputable" title="GHC.Utils.Outputable">Outputable</a> (<a href="GHC-Tc-Deriv-Utils.html#t:DerivSpec" title="GHC.Tc.Deriv.Utils">DerivSpec</a> theta)</span> <a href="src/GHC.Tc.Deriv.Utils.html#line-226" class="link">Source</a> <a href="#t:DerivSpec" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DerivSpec:Outputable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Tc-Deriv-Utils.html">GHC.Tc.Deriv.Utils</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="GHC-Tc-Deriv-Utils.html#t:DerivSpec" title="GHC.Tc.Deriv.Utils">DerivSpec</a> theta -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> <a href="src/GHC.Utils.Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:pprDerivSpec" class="def">pprDerivSpec</a> :: <a href="GHC-Utils-Outputable.html#t:Outputable" title="GHC.Utils.Outputable">Outputable</a> theta =&gt; <a href="GHC-Tc-Deriv-Utils.html#t:DerivSpec" title="GHC.Tc.Deriv.Utils">DerivSpec</a> theta -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> <a href="src/GHC.Tc.Deriv.Utils.html#pprDerivSpec" class="link">Source</a> <a href="#v:pprDerivSpec" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:setDerivSpecTheta" class="def">setDerivSpecTheta</a> :: theta' -&gt; <a href="GHC-Tc-Deriv-Utils.html#t:DerivSpec" title="GHC.Tc.Deriv.Utils">DerivSpec</a> theta -&gt; <a href="GHC-Tc-Deriv-Utils.html#t:DerivSpec" title="GHC.Tc.Deriv.Utils">DerivSpec</a> theta' <a href="src/GHC.Tc.Deriv.Utils.html#setDerivSpecTheta" class="link">Source</a> <a href="#v:setDerivSpecTheta" class="selflink">#</a></p><div class="doc"><p>Set the <code><a href="GHC-Tc-Deriv-Utils.html#v:ds_theta" title="GHC.Tc.Deriv.Utils">ds_theta</a></code> in a <code><a href="GHC-Tc-Deriv-Utils.html#t:DerivSpec" title="GHC.Tc.Deriv.Utils">DerivSpec</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:zonkDerivSpec" class="def">zonkDerivSpec</a> :: <a href="GHC-Tc-Deriv-Utils.html#t:DerivSpec" title="GHC.Tc.Deriv.Utils">DerivSpec</a> <a href="GHC-Core-Type.html#t:ThetaType" title="GHC.Core.Type">ThetaType</a> -&gt; <a href="GHC-Tc-Types.html#t:TcM" title="GHC.Tc.Types">TcM</a> (<a href="GHC-Tc-Deriv-Utils.html#t:DerivSpec" title="GHC.Tc.Deriv.Utils">DerivSpec</a> <a href="GHC-Core-Type.html#t:ThetaType" title="GHC.Core.Type">ThetaType</a>) <a href="src/GHC.Tc.Deriv.Utils.html#zonkDerivSpec" class="link">Source</a> <a href="#v:zonkDerivSpec" class="selflink">#</a></p><div class="doc"><p>Zonk the <code><a href="GHC-Types-Var.html#t:TcTyVar" title="GHC.Types.Var">TcTyVar</a></code>s in a <code><a href="GHC-Tc-Deriv-Utils.html#t:DerivSpec" title="GHC.Tc.Deriv.Utils">DerivSpec</a></code> to <code><a href="GHC-Types-Var.html#t:TyVar" title="GHC.Types.Var">TyVar</a></code>s.
 See <code>Note [What is zonking?]</code> in <a href="GHC-Tc-Utils-TcMType.html">GHC.Tc.Utils.TcMType</a>.</p><p>This is only used in the final zonking step when inferring
 the context for a derived instance.
 See <code>Note [Overlap and deriving]</code> in <a href="GHC-Tc-Deriv-Infer.html">GHC.Tc.Deriv.Infer</a>.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DerivSpecMechanism" class="def">DerivSpecMechanism</a> <a href="src/GHC.Tc.Deriv.Utils.html#DerivSpecMechanism" class="link">Source</a> <a href="#t:DerivSpecMechanism" class="selflink">#</a></p><div class="doc"><p>What action to take in order to derive a class instance.
 See <code>Note [DerivEnv and DerivSpecMechanism]</code>, as well as
 <code>Note [Deriving strategies]</code> in <a href="GHC-Tc-Deriv.html">GHC.Tc.Deriv</a>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DerivSpecStock" class="def">DerivSpecStock</a></td><td class="doc"><p>&quot;Standard&quot; classes</p></td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:dsm_stock_dit" class="def">dsm_stock_dit</a> :: <a href="GHC-Tc-Deriv-Generate.html#t:DerivInstTys" title="GHC.Tc.Deriv.Generate">DerivInstTys</a></dfn><div class="doc"><p>Information about the arguments to the class in the derived
 instance, including what type constructor the last argument is
 headed by. See <code>Note [DerivEnv and DerivSpecMechanism]</code>.</p></div></li><li><dfn class="src"><a id="v:dsm_stock_gen_fns" class="def">dsm_stock_gen_fns</a> :: <a href="GHC-Tc-Deriv-Utils.html#t:StockGenFns" title="GHC.Tc.Deriv.Utils">StockGenFns</a></dfn><div class="doc"><p>How to generate the instance bindings and associated type family
 instances.</p></div></li></ul></div></td></tr><tr><td class="src"><a id="v:DerivSpecNewtype" class="def">DerivSpecNewtype</a></td><td class="doc"><pre>GeneralizedNewtypeDeriving</pre></td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:dsm_newtype_dit" class="def">dsm_newtype_dit</a> :: <a href="GHC-Tc-Deriv-Generate.html#t:DerivInstTys" title="GHC.Tc.Deriv.Generate">DerivInstTys</a></dfn><div class="doc"><p>Information about the arguments to the class in the derived
 instance, including what type constructor the last argument is
 headed by. See <code>Note [DerivEnv and DerivSpecMechanism]</code>.</p></div></li><li><dfn class="src"><a id="v:dsm_newtype_rep_ty" class="def">dsm_newtype_rep_ty</a> :: <a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a></dfn><div class="doc"><p>The newtype rep type.</p></div></li></ul></div></td></tr><tr><td class="src"><a id="v:DerivSpecAnyClass" class="def">DerivSpecAnyClass</a></td><td class="doc"><pre>DeriveAnyClass</pre></td></tr><tr><td class="src"><a id="v:DerivSpecVia" class="def">DerivSpecVia</a></td><td class="doc"><pre>DerivingVia</pre></td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:dsm_via_cls_tys" class="def">dsm_via_cls_tys</a> :: [<a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a>]</dfn><div class="doc"><p>All arguments to the class besides the last one.</p></div></li><li><dfn class="src"><a id="v:dsm_via_inst_ty" class="def">dsm_via_inst_ty</a> :: <a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a></dfn><div class="doc"><p>The last argument to the class.</p></div></li><li><dfn class="src"><a id="v:dsm_via_ty" class="def">dsm_via_ty</a> :: <a href="GHC-Core-Type.html#t:Type" title="GHC.Core.Type">Type</a></dfn><div class="doc"><p>The <code>via</code> type</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:DerivSpecMechanism">Instances</h4><details id="i:DerivSpecMechanism" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DerivSpecMechanism:Outputable:1"></span> <a href="GHC-Utils-Outputable.html#t:Outputable" title="GHC.Utils.Outputable">Outputable</a> <a href="GHC-Tc-Deriv-Utils.html#t:DerivSpecMechanism" title="GHC.Tc.Deriv.Utils">DerivSpecMechanism</a></span> <a href="src/GHC.Tc.Deriv.Utils.html#line-348" class="link">Source</a> <a href="#t:DerivSpecMechanism" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DerivSpecMechanism:Outputable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Tc-Deriv-Utils.html">GHC.Tc.Deriv.Utils</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="GHC-Tc-Deriv-Utils.html#t:DerivSpecMechanism" title="GHC.Tc.Deriv.Utils">DerivSpecMechanism</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> <a href="src/GHC.Utils.Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:derivSpecMechanismToStrategy" class="def">derivSpecMechanismToStrategy</a> :: <a href="GHC-Tc-Deriv-Utils.html#t:DerivSpecMechanism" title="GHC.Tc.Deriv.Utils">DerivSpecMechanism</a> -&gt; <a href="Language-Haskell-Syntax-Decls.html#t:DerivStrategy" title="Language.Haskell.Syntax.Decls">DerivStrategy</a> <a href="GHC-Hs-Extension.html#t:GhcTc" title="GHC.Hs.Extension">GhcTc</a> <a href="src/GHC.Tc.Deriv.Utils.html#derivSpecMechanismToStrategy" class="link">Source</a> <a href="#v:derivSpecMechanismToStrategy" class="selflink">#</a></p><div class="doc"><p>Convert a <code><a href="GHC-Tc-Deriv-Utils.html#t:DerivSpecMechanism" title="GHC.Tc.Deriv.Utils">DerivSpecMechanism</a></code> to its corresponding <code><a href="Language-Haskell-Syntax-Decls.html#t:DerivStrategy" title="Language.Haskell.Syntax.Decls">DerivStrategy</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:isDerivSpecStock" class="def">isDerivSpecStock</a> :: <a href="GHC-Tc-Deriv-Utils.html#t:DerivSpecMechanism" title="GHC.Tc.Deriv.Utils">DerivSpecMechanism</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a> <a href="src/GHC.Tc.Deriv.Utils.html#isDerivSpecStock" class="link">Source</a> <a href="#v:isDerivSpecStock" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:isDerivSpecNewtype" class="def">isDerivSpecNewtype</a> :: <a href="GHC-Tc-Deriv-Utils.html#t:DerivSpecMechanism" title="GHC.Tc.Deriv.Utils">DerivSpecMechanism</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a> <a href="src/GHC.Tc.Deriv.Utils.html#isDerivSpecNewtype" class="link">Source</a> <a href="#v:isDerivSpecNewtype" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:isDerivSpecAnyClass" class="def">isDerivSpecAnyClass</a> :: <a href="GHC-Tc-Deriv-Utils.html#t:DerivSpecMechanism" title="GHC.Tc.Deriv.Utils">DerivSpecMechanism</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a> <a href="src/GHC.Tc.Deriv.Utils.html#isDerivSpecAnyClass" class="link">Source</a> <a href="#v:isDerivSpecAnyClass" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:isDerivSpecVia" class="def">isDerivSpecVia</a> :: <a href="GHC-Tc-Deriv-Utils.html#t:DerivSpecMechanism" title="GHC.Tc.Deriv.Utils">DerivSpecMechanism</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a> <a href="src/GHC.Tc.Deriv.Utils.html#isDerivSpecVia" class="link">Source</a> <a href="#v:isDerivSpecVia" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:zonkDerivSpecMechanism" class="def">zonkDerivSpecMechanism</a> :: <a href="GHC-Tc-Utils-Zonk.html#t:ZonkEnv" title="GHC.Tc.Utils.Zonk">ZonkEnv</a> -&gt; <a href="GHC-Tc-Deriv-Utils.html#t:DerivSpecMechanism" title="GHC.Tc.Deriv.Utils">DerivSpecMechanism</a> -&gt; <a href="GHC-Tc-Types.html#t:TcM" title="GHC.Tc.Types">TcM</a> <a href="GHC-Tc-Deriv-Utils.html#t:DerivSpecMechanism" title="GHC.Tc.Deriv.Utils">DerivSpecMechanism</a> <a href="src/GHC.Tc.Deriv.Utils.html#zonkDerivSpecMechanism" class="link">Source</a> <a href="#v:zonkDerivSpecMechanism" class="selflink">#</a></p><div class="doc"><p>Zonk the <code><a href="GHC-Types-Var.html#t:TcTyVar" title="GHC.Types.Var">TcTyVar</a></code>s in a <code><a href="GHC-Tc-Deriv-Utils.html#t:DerivSpecMechanism" title="GHC.Tc.Deriv.Utils">DerivSpecMechanism</a></code> to <code><a href="GHC-Types-Var.html#t:TyVar" title="GHC.Types.Var">TyVar</a></code>s.
 See <code>Note [What is zonking?]</code> in <a href="GHC-Tc-Utils-TcMType.html">GHC.Tc.Utils.TcMType</a>.</p><p>This is only used in the final zonking step when inferring
 the context for a derived instance.
 See <code>Note [Overlap and deriving]</code> in <a href="GHC-Tc-Deriv-Infer.html">GHC.Tc.Deriv.Infer</a>.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DerivContext" class="def">DerivContext</a> <a href="src/GHC.Tc.Deriv.Utils.html#DerivContext" class="link">Source</a> <a href="#t:DerivContext" class="selflink">#</a></p><div class="doc"><p>Whether GHC is processing a <code>deriving</code> clause or a standalone deriving
 declaration.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:InferContext" class="def">InferContext</a> (<a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Types-SrcLoc.html#t:SrcSpan" title="GHC.Types.SrcLoc">SrcSpan</a>)</td><td class="doc"><p><code>'InferContext mb_wildcard</code> is either:</p><ul><li>A <code>deriving</code> clause (in which case
   <code>mb_wildcard</code> is <code><a href="GHC-Prelude-Basic.html#v:Nothing" title="GHC.Prelude.Basic">Nothing</a></code>).</li><li>A standalone deriving declaration with
   an extra-constraints wildcard as the
   context (in which case <code>mb_wildcard</code> is
   <code><code><a href="GHC-Prelude-Basic.html#v:Just" title="GHC.Prelude.Basic">Just</a></code> loc</code>, where <code>loc</code> is the location
   of the wildcard.</li></ul><p>GHC should infer the context.</p></td></tr><tr><td class="src"><a id="v:SupplyContext" class="def">SupplyContext</a> <a href="GHC-Core-Type.html#t:ThetaType" title="GHC.Core.Type">ThetaType</a></td><td class="doc"><p><code><code><a href="GHC-Tc-Deriv-Utils.html#v:SupplyContext" title="GHC.Tc.Deriv.Utils">SupplyContext</a></code> theta</code> is a standalone
 deriving declaration, where <code>theta</code> is the
 context supplied by the user.</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:DerivContext">Instances</h4><details id="i:DerivContext" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:DerivContext:Outputable:1"></span> <a href="GHC-Utils-Outputable.html#t:Outputable" title="GHC.Utils.Outputable">Outputable</a> <a href="GHC-Tc-Deriv-Utils.html#t:DerivContext" title="GHC.Tc.Deriv.Utils">DerivContext</a></span> <a href="src/GHC.Tc.Deriv.Utils.html#line-483" class="link">Source</a> <a href="#t:DerivContext" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:DerivContext:Outputable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Tc-Deriv-Utils.html">GHC.Tc.Deriv.Utils</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="GHC-Tc-Deriv-Utils.html#t:DerivContext" title="GHC.Tc.Deriv.Utils">DerivContext</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> <a href="src/GHC.Utils.Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:OriginativeDerivStatus" class="def">OriginativeDerivStatus</a> <a href="src/GHC.Tc.Deriv.Utils.html#OriginativeDerivStatus" class="link">Source</a> <a href="#t:OriginativeDerivStatus" class="selflink">#</a></p><div class="doc"><p>Records whether a particular class can be derived by way of an
 <em>originative</em> deriving strategy (i.e., <code>stock</code> or <code>anyclass</code>).</p><p>See <code>Note [Deriving strategies]</code> in <a href="GHC-Tc-Deriv.html">GHC.Tc.Deriv</a>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:CanDeriveStock" class="def">CanDeriveStock</a> <a href="GHC-Tc-Deriv-Utils.html#t:StockGenFns" title="GHC.Tc.Deriv.Utils">StockGenFns</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:StockClassError" class="def">StockClassError</a> !<a href="GHC-Tc-Errors-Types.html#t:DeriveInstanceErrReason" title="GHC.Tc.Errors.Types">DeriveInstanceErrReason</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:CanDeriveAnyClass" class="def">CanDeriveAnyClass</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:NonDerivableClass" class="def">NonDerivableClass</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:StockGenFns" class="def">StockGenFns</a> <a href="src/GHC.Tc.Deriv.Utils.html#StockGenFns" class="link">Source</a> <a href="#t:StockGenFns" class="selflink">#</a></p><div class="doc"><p>Describes how to generate instance bindings (<code><a href="GHC-Tc-Deriv-Utils.html#v:stock_gen_binds" title="GHC.Tc.Deriv.Utils">stock_gen_binds</a></code>) and
 associated type family instances (<code><a href="GHC-Tc-Deriv-Utils.html#v:stock_gen_fam_insts" title="GHC.Tc.Deriv.Utils">stock_gen_fam_insts</a></code>) for a particular
 stock-derived instance.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:StockGenFns" class="def">StockGenFns</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:stock_gen_binds" class="def">stock_gen_binds</a> :: <a href="GHC-Types-SrcLoc.html#t:SrcSpan" title="GHC.Types.SrcLoc">SrcSpan</a> -&gt; <a href="GHC-Tc-Deriv-Generate.html#t:DerivInstTys" title="GHC.Tc.Deriv.Generate">DerivInstTys</a> -&gt; <a href="GHC-Tc-Types.html#t:TcM" title="GHC.Tc.Types">TcM</a> (<a href="Language-Haskell-Syntax-Binds.html#t:LHsBinds" title="Language.Haskell.Syntax.Binds">LHsBinds</a> <a href="GHC-Hs-Extension.html#t:GhcPs" title="GHC.Hs.Extension">GhcPs</a>, [<a href="Language-Haskell-Syntax-Binds.html#t:LSig" title="Language.Haskell.Syntax.Binds">LSig</a> <a href="GHC-Hs-Extension.html#t:GhcPs" title="GHC.Hs.Extension">GhcPs</a>], <a href="GHC-Data-Bag.html#t:Bag" title="GHC.Data.Bag">Bag</a> <a href="GHC-Tc-Deriv-Generate.html#t:AuxBindSpec" title="GHC.Tc.Deriv.Generate">AuxBindSpec</a>, [<a href="GHC-Types-Name.html#t:Name" title="GHC.Types.Name">Name</a>])</dfn><div class="doc"><p>Describes how to generate instance bindings for a stock-derived
 instance.</p><p>This function takes two arguments:</p><ol><li value="1"><code><a href="GHC-Types-SrcLoc.html#t:SrcSpan" title="GHC.Types.SrcLoc">SrcSpan</a></code>: the source location where the instance is being derived.
    This will eventually be instantiated with the <code><a href="GHC-Tc-Deriv-Utils.html#v:ds_loc" title="GHC.Tc.Deriv.Utils">ds_loc</a></code> field of a
    <code><a href="GHC-Tc-Deriv-Utils.html#t:DerivSpec" title="GHC.Tc.Deriv.Utils">DerivSpec</a></code>.</li><li value="2"><code><a href="GHC-Tc-Deriv-Generate.html#t:DerivInstTys" title="GHC.Tc.Deriv.Generate">DerivInstTys</a></code>: information about the argument types to which a
    class is applied in a derived instance. This will eventually be
    instantiated with the <code><a href="GHC-Tc-Deriv-Utils.html#v:dsm_stock_dit" title="GHC.Tc.Deriv.Utils">dsm_stock_dit</a></code> field of a
    <code><a href="GHC-Tc-Deriv-Utils.html#t:DerivSpecMechanism" title="GHC.Tc.Deriv.Utils">DerivSpecMechanism</a></code>.</li></ol><p>This function returns four things:</p><ol><li value="1"><code><code><a href="Language-Haskell-Syntax-Binds.html#t:LHsBinds" title="Language.Haskell.Syntax.Binds">LHsBinds</a></code> <code><a href="GHC-Hs-Extension.html#t:GhcPass" title="GHC.Hs.Extension">GhcPass</a></code></code>: The derived instance's function bindings
    (e.g., <code>compare (T x) (T y) = compare x y</code>)</li><li value="2"><code>[<code><a href="Language-Haskell-Syntax-Binds.html#t:LSig" title="Language.Haskell.Syntax.Binds">LSig</a></code> <code><a href="GHC-Hs-Extension.html#t:GhcPass" title="GHC.Hs.Extension">GhcPass</a></code>]</code>: A list of instance specific signatures/pragmas.
    Most likely <code>INLINE</code> pragmas for class methods.</li><li value="3"><code><code><a href="GHC-Data-Bag.html#t:Bag" title="GHC.Data.Bag">Bag</a></code> <code><a href="GHC-Tc-Deriv-Generate.html#t:AuxBindSpec" title="GHC.Tc.Deriv.Generate">AuxBindSpec</a></code></code>: Auxiliary bindings needed to support the
    derived instance. As examples, derived <code><a href="GHC-Prelude-Basic.html#t:Eq" title="GHC.Prelude.Basic">Eq</a></code> and <code><a href="GHC-Prelude-Basic.html#t:Ord" title="GHC.Prelude.Basic">Ord</a></code> instances
    sometimes require top-level <code>con2tag</code> functions.
    See <code>Note [Auxiliary binders]</code> in <a href="GHC-Tc-Deriv-Generate.html">GHC.Tc.Deriv.Generate</a>.</li><li value="4"><code>[<code><a href="GHC-Types-Name.html#t:Name" title="GHC.Types.Name">Name</a></code>]</code>: A list of Names for which <code>-Wunused-binds</code> should be
    suppressed. This is used to suppress unused warnings for record
    selectors when deriving <code><a href="GHC-Prelude-Basic.html#t:Read" title="GHC.Prelude.Basic">Read</a></code>, <code><a href="GHC-Prelude-Basic.html#t:Show" title="GHC.Prelude.Basic">Show</a></code>, or <code>Generic</code>.
    See <code>Note [Deriving and unused record selectors]</code>.</li></ol></div></li><li><dfn class="src"><a id="v:stock_gen_fam_insts" class="def">stock_gen_fam_insts</a> :: <a href="GHC-Types-SrcLoc.html#t:SrcSpan" title="GHC.Types.SrcLoc">SrcSpan</a> -&gt; <a href="GHC-Tc-Deriv-Generate.html#t:DerivInstTys" title="GHC.Tc.Deriv.Generate">DerivInstTys</a> -&gt; <a href="GHC-Tc-Types.html#t:TcM" title="GHC.Tc.Types">TcM</a> [<a href="GHC-Core-FamInstEnv.html#t:FamInst" title="GHC.Core.FamInstEnv">FamInst</a>]</dfn><div class="doc"><p>Describes how to generate associated type family instances for a
 stock-derived instance. This function takes the same arguments as the
 <code><a href="GHC-Tc-Deriv-Utils.html#v:stock_gen_binds" title="GHC.Tc.Deriv.Utils">stock_gen_binds</a></code> function but returns a list of <code><a href="GHC-Core-FamInstEnv.html#t:FamInst" title="GHC.Core.FamInstEnv">FamInst</a></code>s instead.
 Generating type family instances is done separately from
 <code><a href="GHC-Tc-Deriv-Utils.html#v:stock_gen_binds" title="GHC.Tc.Deriv.Utils">stock_gen_binds</a></code> since the type family instances must be generated
 before the instance bindings can be typechecked. See
 <code>Note [Staging of tcDeriving]</code> in <a href="GHC-Tc-Deriv.html">GHC.Tc.Deriv</a>.</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:isStandaloneDeriv" class="def">isStandaloneDeriv</a> :: <a href="GHC-Tc-Deriv-Utils.html#t:DerivM" title="GHC.Tc.Deriv.Utils">DerivM</a> <a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a> <a href="src/GHC.Tc.Deriv.Utils.html#isStandaloneDeriv" class="link">Source</a> <a href="#v:isStandaloneDeriv" class="selflink">#</a></p><div class="doc"><p>Is GHC processing a standalone deriving declaration?</p></div></div><div class="top"><p class="src"><a id="v:isStandaloneWildcardDeriv" class="def">isStandaloneWildcardDeriv</a> :: <a href="GHC-Tc-Deriv-Utils.html#t:DerivM" title="GHC.Tc.Deriv.Utils">DerivM</a> <a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a> <a href="src/GHC.Tc.Deriv.Utils.html#isStandaloneWildcardDeriv" class="link">Source</a> <a href="#v:isStandaloneWildcardDeriv" class="selflink">#</a></p><div class="doc"><p>Is GHC processing a standalone deriving declaration with an
 extra-constraints wildcard as the context?
 (e.g., <code>deriving instance _ =&gt; Eq (Foo a)</code>)</p></div></div><div class="top"><p class="src"><a id="v:askDerivUserTypeCtxt" class="def">askDerivUserTypeCtxt</a> :: <a href="GHC-Tc-Deriv-Utils.html#t:DerivM" title="GHC.Tc.Deriv.Utils">DerivM</a> <a href="GHC-Tc-Types-Origin.html#t:UserTypeCtxt" title="GHC.Tc.Types.Origin">UserTypeCtxt</a> <a href="src/GHC.Tc.Deriv.Utils.html#askDerivUserTypeCtxt" class="link">Source</a> <a href="#v:askDerivUserTypeCtxt" class="selflink">#</a></p><div class="doc"><p>Return <code><a href="GHC-Tc-Types-Origin.html#v:InstDeclCtxt" title="GHC.Tc.Types.Origin">InstDeclCtxt</a></code> if processing with a standalone <code>deriving</code>
 declaration or <code><a href="GHC-Tc-Types-Origin.html#v:DerivClauseCtxt" title="GHC.Tc.Types.Origin">DerivClauseCtxt</a></code> if processing a <code>deriving</code> clause.</p></div></div><div class="top"><p class="src"><a id="v:mkDerivOrigin" class="def">mkDerivOrigin</a> :: <a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a> -&gt; <a href="GHC-Tc-Types-Origin.html#t:CtOrigin" title="GHC.Tc.Types.Origin">CtOrigin</a> <a href="src/GHC.Tc.Deriv.Utils.html#mkDerivOrigin" class="link">Source</a> <a href="#v:mkDerivOrigin" class="selflink">#</a></p><div class="doc"><p><code><code><a href="GHC-Tc-Deriv-Utils.html#v:mkDerivOrigin" title="GHC.Tc.Deriv.Utils">mkDerivOrigin</a></code> wc</code> returns <code><a href="GHC-Tc-Types-Origin.html#v:StandAloneDerivOrigin" title="GHC.Tc.Types.Origin">StandAloneDerivOrigin</a></code> if <code>wc</code> is <code><a href="GHC-Prelude-Basic.html#v:True" title="GHC.Prelude.Basic">True</a></code>,
 and <code><a href="GHC-Tc-Types-Origin.html#v:DerivClauseOrigin" title="GHC.Tc.Types.Origin">DerivClauseOrigin</a></code> if <code>wc</code> is <code><a href="GHC-Prelude-Basic.html#v:False" title="GHC.Prelude.Basic">False</a></code>. Useful for error-reporting.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PredSpec" class="def">PredSpec</a> <a href="src/GHC.Tc.Deriv.Utils.html#PredSpec" class="link">Source</a> <a href="#t:PredSpec" class="selflink">#</a></p><div class="doc"><p>A <code><a href="GHC-Tc-Deriv-Utils.html#t:PredSpec" title="GHC.Tc.Deriv.Utils">PredSpec</a></code> specifies a constraint to emitted when inferring the
 instance context for a derived instance in <code><a href="GHC-Tc-Deriv.html#v:simplifyInfer" title="GHC.Tc.Deriv">simplifyInfer</a></code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:SimplePredSpec" class="def">SimplePredSpec</a></td><td class="doc"><p>An ordinary <code><a href="GHC-Tc-Deriv-Utils.html#t:PredSpec" title="GHC.Tc.Deriv.Utils">PredSpec</a></code> that directly stores a <code><a href="GHC-Core-Type.html#t:PredType" title="GHC.Core.Type">PredType</a></code>, which
 will be emitted as a wanted constraint in the constraint solving
 machinery. This is the simple case, as there are no skolems,
 metavariables, or given constraints involved.</p></td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:sps_pred" class="def">sps_pred</a> :: <a href="GHC-Tc-Utils-TcType.html#t:TcPredType" title="GHC.Tc.Utils.TcType">TcPredType</a></dfn><div class="doc"><p>The constraint to emit as a wanted</p></div></li><li><dfn class="src"><a id="v:sps_origin" class="def">sps_origin</a> :: <a href="GHC-Tc-Types-Origin.html#t:CtOrigin" title="GHC.Tc.Types.Origin">CtOrigin</a></dfn><div class="doc"><p>The origin of the constraint</p></div></li><li><dfn class="src"><a id="v:sps_type_or_kind" class="def">sps_type_or_kind</a> :: <a href="GHC-Types-Basic.html#t:TypeOrKind" title="GHC.Types.Basic">TypeOrKind</a></dfn><div class="doc"><p>Whether the constraint is a type or kind</p></div></li></ul></div></td></tr><tr><td class="src"><a id="v:SubTypePredSpec" class="def">SubTypePredSpec</a></td><td class="doc"><p>A special <code><a href="GHC-Tc-Deriv-Utils.html#t:PredSpec" title="GHC.Tc.Deriv.Utils">PredSpec</a></code> that is only used by <code>DeriveAnyClass</code>. This
 will check if <code>stps_ty_actual</code> is a subtype of (i.e., more polymorphic
 than) <code>stps_ty_expected</code> in the constraint solving machinery, emitting an
 implication constraint as a side effect. For more details on how this
 works, see <code>Note [Gathering and simplifying constraints for DeriveAnyClass]</code>
 in <a href="GHC-Tc-Deriv-Infer.html">GHC.Tc.Deriv.Infer</a>.</p></td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:stps_ty_actual" class="def">stps_ty_actual</a> :: <a href="GHC-Tc-Utils-TcType.html#t:TcSigmaType" title="GHC.Tc.Utils.TcType">TcSigmaType</a></dfn><div class="doc"><p>The actual type. In the context of <code>DeriveAnyClass</code>, this is the
 default method type signature.</p></div></li><li><dfn class="src"><a id="v:stps_ty_expected" class="def">stps_ty_expected</a> :: <a href="GHC-Tc-Utils-TcType.html#t:TcSigmaType" title="GHC.Tc.Utils.TcType">TcSigmaType</a></dfn><div class="doc"><p>The expected type. In the context of <code>DeriveAnyClass</code>, this is the
 original method type signature.</p></div></li><li><dfn class="src"><a id="v:stps_origin" class="def">stps_origin</a> :: <a href="GHC-Tc-Types-Origin.html#t:CtOrigin" title="GHC.Tc.Types.Origin">CtOrigin</a></dfn><div class="doc"><p>The origin of the constraint</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:PredSpec">Instances</h4><details id="i:PredSpec" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:PredSpec:Outputable:1"></span> <a href="GHC-Utils-Outputable.html#t:Outputable" title="GHC.Utils.Outputable">Outputable</a> <a href="GHC-Tc-Deriv-Utils.html#t:PredSpec" title="GHC.Tc.Deriv.Utils">PredSpec</a></span> <a href="src/GHC.Tc.Deriv.Utils.html#line-626" class="link">Source</a> <a href="#t:PredSpec" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:PredSpec:Outputable:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Tc-Deriv-Utils.html">GHC.Tc.Deriv.Utils</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="GHC-Tc-Deriv-Utils.html#t:PredSpec" title="GHC.Tc.Deriv.Utils">PredSpec</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> <a href="src/GHC.Utils.Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:ThetaSpec" class="def">ThetaSpec</a> = [<a href="GHC-Tc-Deriv-Utils.html#t:PredSpec" title="GHC.Tc.Deriv.Utils">PredSpec</a>] <a href="src/GHC.Tc.Deriv.Utils.html#ThetaSpec" class="link">Source</a> <a href="#t:ThetaSpec" class="selflink">#</a></p><div class="doc"><p>A list of <code><a href="GHC-Tc-Deriv-Utils.html#t:PredSpec" title="GHC.Tc.Deriv.Utils">PredSpec</a></code> constraints to simplify when inferring a
 derived instance's context. For the <code>stock</code>, <code>newtype</code>, and <code>via</code> deriving
 strategies, these will consist of <code><a href="GHC-Tc-Deriv-Utils.html#v:SimplePredSpec" title="GHC.Tc.Deriv.Utils">SimplePredSpec</a></code>s, and for
 <code>DeriveAnyClass</code>, these will consist of <code><a href="GHC-Tc-Deriv-Utils.html#v:SubTypePredSpec" title="GHC.Tc.Deriv.Utils">SubTypePredSpec</a></code>s. Here is an
 example to illustrate the latter:</p><pre>class Foo a where
  bar :: forall b. Ix b =&gt; a -&gt; b -&gt; String
  default bar :: forall y. (Show a, Ix y) =&gt; a -&gt; y -&gt; String
  bar x y = show x ++ show (range (y, y))

  baz :: Eq a =&gt; a -&gt; a -&gt; Bool
  default baz :: Ord a =&gt; a -&gt; a -&gt; Bool
  baz x y = compare x y == EQ

data Quux q = Quux deriving anyclass Foo
</pre><p>Then it would generate two <code><a href="GHC-Tc-Deriv-Utils.html#v:SubTypePredSpec" title="GHC.Tc.Deriv.Utils">SubTypePredSpec</a></code>s, one for each method:</p><pre>[ SubTypePredSpec
    { stps_ty_actual   = forall y. (Show (Quux q), Ix y) =&gt; Quux q -&gt; y -&gt; String
    , stps_ty_expected = forall b.                (Ix b) =&gt; Quux q -&gt; b -&gt; String
    , stps_ty_origin   = DerivClauseCtxt
    }
, SubTypePredSpec
    { stps_ty_actual   = Ord (Quux q) =&gt; Quux q -&gt; Quux q -&gt; Bool
    , stps_ty_expected = Eq  (Quux q) =&gt; Quux q -&gt; Quux q -&gt; Bool
    , stps_ty_origin   = DerivClauseCtxt
    }
]
</pre><p>(Note that the type variable <code>q</code> is bound by the data type <code>Quux</code>, and thus
 appears free in the <code><a href="GHC-Tc-Deriv-Utils.html#v:stps_ty_actual" title="GHC.Tc.Deriv.Utils">stps_ty_actual</a></code>s and <code><a href="GHC-Tc-Deriv-Utils.html#v:stps_ty_expected" title="GHC.Tc.Deriv.Utils">stps_ty_expected</a></code>s.)</p><p>See <code>Note [Gathering and simplifying constraints for DeriveAnyClass]</code>
 in <a href="GHC-Tc-Deriv-Infer.html">GHC.Tc.Deriv.Infer</a> for an explanation of how these <code><a href="GHC-Tc-Deriv-Utils.html#v:SubTypePredSpec" title="GHC.Tc.Deriv.Utils">SubTypePredSpec</a></code>s
 are used to compute implication constraints.</p></div></div><div class="top"><p class="src"><a id="v:mkDirectThetaSpec" class="def">mkDirectThetaSpec</a> :: <a href="GHC-Tc-Types-Origin.html#t:CtOrigin" title="GHC.Tc.Types.Origin">CtOrigin</a> -&gt; <a href="GHC-Types-Basic.html#t:TypeOrKind" title="GHC.Types.Basic">TypeOrKind</a> -&gt; <a href="GHC-Core-Type.html#t:ThetaType" title="GHC.Core.Type">ThetaType</a> -&gt; <a href="GHC-Tc-Deriv-Utils.html#t:ThetaSpec" title="GHC.Tc.Deriv.Utils">ThetaSpec</a> <a href="src/GHC.Tc.Deriv.Utils.html#mkDirectThetaSpec" class="link">Source</a> <a href="#v:mkDirectThetaSpec" class="selflink">#</a></p><div class="doc"><p>Build a list of <code><a href="GHC-Tc-Deriv-Utils.html#v:SimplePredSpec" title="GHC.Tc.Deriv.Utils">SimplePredSpec</a></code>s, using the supplied <code><a href="GHC-Tc-Types-Origin.html#t:CtOrigin" title="GHC.Tc.Types.Origin">CtOrigin</a></code> and
 <code><a href="GHC-Types-Basic.html#t:TypeOrKind" title="GHC.Types.Basic">TypeOrKind</a></code> values for each <code><a href="GHC-Core-Type.html#t:PredType" title="GHC.Core.Type">PredType</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:substPredSpec" class="def">substPredSpec</a> :: <a href="GHC-Utils-Misc.html#t:HasCallStack" title="GHC.Utils.Misc">HasCallStack</a> =&gt; <a href="GHC-Core-TyCo-Subst.html#t:Subst" title="GHC.Core.TyCo.Subst">Subst</a> -&gt; <a href="GHC-Tc-Deriv-Utils.html#t:PredSpec" title="GHC.Tc.Deriv.Utils">PredSpec</a> -&gt; <a href="GHC-Tc-Deriv-Utils.html#t:PredSpec" title="GHC.Tc.Deriv.Utils">PredSpec</a> <a href="src/GHC.Tc.Deriv.Utils.html#substPredSpec" class="link">Source</a> <a href="#v:substPredSpec" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:captureThetaSpecConstraints" class="def">captureThetaSpecConstraints</a> <a href="src/GHC.Tc.Deriv.Utils.html#captureThetaSpecConstraints" class="link">Source</a> <a href="#v:captureThetaSpecConstraints" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="GHC-Tc-Types-Origin.html#t:UserTypeCtxt" title="GHC.Tc.Types.Origin">UserTypeCtxt</a></td><td class="doc"><p>Used to inform error messages as to whether
 we are in a <code>deriving</code> clause or a standalone
 <code>deriving</code> declaration</p></td></tr><tr><td class="src">-&gt; <a href="GHC-Tc-Deriv-Utils.html#t:ThetaSpec" title="GHC.Tc.Deriv.Utils">ThetaSpec</a></td><td class="doc"><p>The specs from which constraints will be created</p></td></tr><tr><td class="src">-&gt; <a href="GHC-Tc-Types.html#t:TcM" title="GHC.Tc.Types">TcM</a> (<a href="GHC-Tc-Utils-TcType.html#t:TcLevel" title="GHC.Tc.Utils.TcType">TcLevel</a>, <a href="GHC-Tc-Types-Constraint.html#t:WantedConstraints" title="GHC.Tc.Types.Constraint">WantedConstraints</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Capture wanted constraints from a <code><a href="GHC-Tc-Deriv-Utils.html#t:ThetaSpec" title="GHC.Tc.Deriv.Utils">ThetaSpec</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:checkOriginativeSideConditions" class="def">checkOriginativeSideConditions</a> :: <a href="GHC-Tc-Deriv-Generate.html#t:DerivInstTys" title="GHC.Tc.Deriv.Generate">DerivInstTys</a> -&gt; <a href="GHC-Tc-Deriv-Utils.html#t:DerivM" title="GHC.Tc.Deriv.Utils">DerivM</a> <a href="GHC-Tc-Deriv-Utils.html#t:OriginativeDerivStatus" title="GHC.Tc.Deriv.Utils">OriginativeDerivStatus</a> <a href="src/GHC.Tc.Deriv.Utils.html#checkOriginativeSideConditions" class="link">Source</a> <a href="#v:checkOriginativeSideConditions" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:hasStockDeriving" class="def">hasStockDeriving</a> :: <a href="GHC-Core-Class.html#t:Class" title="GHC.Core.Class">Class</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Tc-Deriv-Utils.html#t:StockGenFns" title="GHC.Tc.Deriv.Utils">StockGenFns</a> <a href="src/GHC.Tc.Deriv.Utils.html#hasStockDeriving" class="link">Source</a> <a href="#v:hasStockDeriving" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:std_class_via_coercible" class="def">std_class_via_coercible</a> :: <a href="GHC-Core-Class.html#t:Class" title="GHC.Core.Class">Class</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a> <a href="src/GHC.Tc.Deriv.Utils.html#std_class_via_coercible" class="link">Source</a> <a href="#v:std_class_via_coercible" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:non_coercible_class" class="def">non_coercible_class</a> :: <a href="GHC-Core-Class.html#t:Class" title="GHC.Core.Class">Class</a> -&gt; <a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a> <a href="src/GHC.Tc.Deriv.Utils.html#non_coercible_class" class="link">Source</a> <a href="#v:non_coercible_class" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:newDerivClsInst" class="def">newDerivClsInst</a> :: <a href="GHC-Tc-Deriv-Utils.html#t:DerivSpec" title="GHC.Tc.Deriv.Utils">DerivSpec</a> <a href="GHC-Core-Type.html#t:ThetaType" title="GHC.Core.Type">ThetaType</a> -&gt; <a href="GHC-Tc-Types.html#t:TcM" title="GHC.Tc.Types">TcM</a> <a href="GHC-Core-InstEnv.html#t:ClsInst" title="GHC.Core.InstEnv">ClsInst</a> <a href="src/GHC.Tc.Deriv.Utils.html#newDerivClsInst" class="link">Source</a> <a href="#v:newDerivClsInst" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:extendLocalInstEnv" class="def">extendLocalInstEnv</a> :: [<a href="GHC-Core-InstEnv.html#t:ClsInst" title="GHC.Core.InstEnv">ClsInst</a>] -&gt; <a href="GHC-Tc-Types.html#t:TcM" title="GHC.Tc.Types">TcM</a> a -&gt; <a href="GHC-Tc-Types.html#t:TcM" title="GHC.Tc.Types">TcM</a> a <a href="src/GHC.Tc.Deriv.Utils.html#extendLocalInstEnv" class="link">Source</a> <a href="#v:extendLocalInstEnv" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>