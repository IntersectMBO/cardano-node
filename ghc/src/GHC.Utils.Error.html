<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE BangPatterns    #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DeriveFunctor   #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes      #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE ViewPatterns    #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-comment">{-
(c) The AQUA Project, Glasgow University, 1994-1998

\section[ErrsUtils]{Utilities for error reporting}
-}</span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">GHC.Utils.Error</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-14"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Basic types</span></span><span>
</span><span id="line-15"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#Validity%27"><span class="hs-identifier">Validity'</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#Validity"><span class="hs-identifier">Validity</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#andValid"><span class="hs-identifier">andValid</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#allValid"><span class="hs-identifier">allValid</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#getInvalids"><span class="hs-identifier">getInvalids</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>        </span><span class="annot"><a href="GHC.Types.Error.html#Severity"><span class="hs-identifier">Severity</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Messages</span></span><span>
</span><span id="line-19"></span><span>        </span><span class="annot"><a href="GHC.Types.Error.html#Diagnostic"><span class="hs-identifier">Diagnostic</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>        </span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier">MsgEnvelope</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>        </span><span class="annot"><a href="GHC.Types.Error.html#MessageClass"><span class="hs-identifier">MessageClass</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>        </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier">SDoc</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>        </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier">DecoratedSDoc</span></a></span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#unDecorated"><span class="hs-identifier">unDecorated</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>        </span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier">Messages</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>        </span><span class="annot"><a href="GHC.Types.Error.html#mkMessages"><span class="hs-identifier">mkMessages</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#unionMessages"><span class="hs-identifier">unionMessages</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>        </span><span class="annot"><a href="GHC.Types.Error.html#errorsFound"><span class="hs-identifier">errorsFound</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#isEmptyMessages"><span class="hs-identifier">isEmptyMessages</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>
</span><span id="line-28"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Formatting</span></span><span>
</span><span id="line-29"></span><span>        </span><span class="annot"><a href="GHC.Types.Error.html#pprMessageBag"><span class="hs-identifier">pprMessageBag</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#pprMsgEnvelopeBagWithLoc"><span class="hs-identifier">pprMsgEnvelopeBagWithLoc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#pprMsgEnvelopeBagWithLocDefault"><span class="hs-identifier">pprMsgEnvelopeBagWithLocDefault</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#pprMessages"><span class="hs-identifier">pprMessages</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#pprLocMsgEnvelope"><span class="hs-identifier">pprLocMsgEnvelope</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#pprLocMsgEnvelopeDefault"><span class="hs-identifier">pprLocMsgEnvelopeDefault</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#formatBulleted"><span class="hs-identifier">formatBulleted</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>
</span><span id="line-34"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Construction</span></span><span>
</span><span id="line-35"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#DiagOpts"><span class="hs-identifier">DiagOpts</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#diag_wopt"><span class="hs-identifier">diag_wopt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#diag_fatal_wopt"><span class="hs-identifier">diag_fatal_wopt</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>        </span><span class="annot"><a href="GHC.Types.Error.html#emptyMessages"><span class="hs-identifier">emptyMessages</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#mkDecorated"><span class="hs-identifier">mkDecorated</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#mkLocMessage"><span class="hs-identifier">mkLocMessage</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#mkMsgEnvelope"><span class="hs-identifier">mkMsgEnvelope</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#mkPlainMsgEnvelope"><span class="hs-identifier">mkPlainMsgEnvelope</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier">mkPlainErrorMsgEnvelope</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#mkErrorMsgEnvelope"><span class="hs-identifier">mkErrorMsgEnvelope</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#mkMCDiagnostic"><span class="hs-identifier">mkMCDiagnostic</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#errorDiagnostic"><span class="hs-identifier">errorDiagnostic</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#diagReasonSeverity"><span class="hs-identifier">diagReasonSeverity</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span>        </span><span class="annot"><a href="GHC.Types.Error.html#mkPlainError"><span class="hs-identifier">mkPlainError</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>        </span><span class="annot"><a href="GHC.Types.Error.html#mkPlainDiagnostic"><span class="hs-identifier">mkPlainDiagnostic</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>        </span><span class="annot"><a href="GHC.Types.Error.html#mkDecoratedError"><span class="hs-identifier">mkDecoratedError</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>        </span><span class="annot"><a href="GHC.Types.Error.html#mkDecoratedDiagnostic"><span class="hs-identifier">mkDecoratedDiagnostic</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>        </span><span class="annot"><a href="GHC.Types.Error.html#noHints"><span class="hs-identifier">noHints</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Utilities</span></span><span>
</span><span id="line-48"></span><span>        </span><span class="annot"><a href="GHC.Types.Error.html#getCaretDiagnostic"><span class="hs-identifier">getCaretDiagnostic</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Issuing messages during compilation</span></span><span>
</span><span id="line-51"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#putMsg"><span class="hs-identifier">putMsg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#printInfoForUser"><span class="hs-identifier">printInfoForUser</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#printOutputForUser"><span class="hs-identifier">printOutputForUser</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#logInfo"><span class="hs-identifier">logInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#logOutput"><span class="hs-identifier">logOutput</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#errorMsg"><span class="hs-identifier">errorMsg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#fatalErrorMsg"><span class="hs-identifier">fatalErrorMsg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#compilationProgressMsg"><span class="hs-identifier">compilationProgressMsg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#showPass"><span class="hs-identifier">showPass</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-57"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#withTiming"><span class="hs-identifier">withTiming</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#withTimingSilent"><span class="hs-identifier">withTimingSilent</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#debugTraceMsg"><span class="hs-identifier">debugTraceMsg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#ghcExit"><span class="hs-identifier">ghcExit</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#prettyPrintGhcErrors"><span class="hs-identifier">prettyPrintGhcErrors</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#traceCmd"><span class="hs-identifier">traceCmd</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#traceSystoolCommand"><span class="hs-identifier">traceSystoolCommand</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span>        </span><span class="annot"><a href="GHC.Utils.Error.html#sortMsgBag"><span class="hs-identifier">sortMsgBag</span></a></span><span>
</span><span id="line-65"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-66"></span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.Flags.html"><span class="hs-identifier">GHC.Driver.Flags</span></a></span><span>
</span><span id="line-70"></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html"><span class="hs-identifier">GHC.Data.Bag</span></a></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="GHC.Data.EnumSet.html"><span class="hs-identifier">GHC.Data.EnumSet</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">EnumSet</span></span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.EnumSet.html"><span class="hs-identifier">GHC.Data.EnumSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.EnumSet.html#EnumSet"><span class="hs-identifier">EnumSet</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Exception.html"><span class="hs-identifier">GHC.Utils.Exception</span></a></span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Outputable</span></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.Plain.html"><span class="hs-identifier">GHC.Utils.Panic.Plain</span></a></span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html"><span class="hs-identifier">GHC.Utils.Logger</span></a></span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Error.html"><span class="hs-identifier">GHC.Types.Error</span></a></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html"><span class="hs-identifier">GHC.Types.SrcLoc</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SrcLoc</span></span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/System.Exit.html#/System.Exit.html"><span class="hs-identifier">System.Exit</span></a></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.IO.Exception.html#ExitCode/GHC.IO.Exception.html#ExitCode"><span class="hs-identifier">ExitCode</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/System.Exit.html#exitWith/System.Exit.html#exitWith"><span class="hs-identifier">exitWith</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/Data.List.html#/Data.List.html"><span class="hs-identifier">Data.List</span></a></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/Data.OldList.html#sortBy/Data.OldList.html#sortBy"><span class="hs-identifier">sortBy</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/Data.Function.html#/Data.Function.html"><span class="hs-identifier">Data.Function</span></a></span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/Debug.Trace.html#/Debug.Trace.html"><span class="hs-identifier">Debug.Trace</span></a></span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/Control.Monad.html#/Control.Monad.html"><span class="hs-identifier">Control.Monad</span></a></span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/Control.Monad.IO.Class.html#/Control.Monad.IO.Class.html"><span class="hs-identifier">Control.Monad.IO.Class</span></a></span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../exceptions-0.10.7/src/Control.Monad.Catch.html#/Control.Monad.Catch.html"><span class="hs-identifier">Control.Monad.Catch</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">MC</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../exceptions-0.10.7/src/Control.Monad.Catch.html#handle/Control.Monad.Catch.html#handle"><span class="hs-identifier">handle</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Conc.html#/GHC.Conc.html"><span class="hs-identifier">GHC.Conc</span></a></span><span>         </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Conc.Sync.html#getAllocationCounter/GHC.Conc.Sync.html#getAllocationCounter"><span class="hs-identifier">getAllocationCounter</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/System.CPUTime.html#/System.CPUTime.html"><span class="hs-identifier">System.CPUTime</span></a></span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span class="hs-keyword">data</span><span> </span><span id="DiagOpts"><span class="annot"><a href="GHC.Utils.Error.html#DiagOpts"><span class="hs-identifier hs-var">DiagOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="DiagOpts"><span class="annot"><a href="GHC.Utils.Error.html#DiagOpts"><span class="hs-identifier hs-var">DiagOpts</span></a></span></span><span>
</span><span id="line-94"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="diag_warning_flags"><span class="annot"><span class="annottext">DiagOpts -&gt; EnumSet WarningFlag
</span><a href="GHC.Utils.Error.html#diag_warning_flags"><span class="hs-identifier hs-var hs-var">diag_warning_flags</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.EnumSet.html#EnumSet"><span class="hs-identifier hs-type">EnumSet</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Flags.html#WarningFlag"><span class="hs-identifier hs-type">WarningFlag</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-comment">-- ^ Enabled warnings</span></span><span>
</span><span id="line-95"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="diag_fatal_warning_flags"><span class="annot"><span class="annottext">DiagOpts -&gt; EnumSet WarningFlag
</span><a href="GHC.Utils.Error.html#diag_fatal_warning_flags"><span class="hs-identifier hs-var hs-var">diag_fatal_warning_flags</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.EnumSet.html#EnumSet"><span class="hs-identifier hs-type">EnumSet</span></a></span><span> </span><span class="annot"><a href="GHC.Driver.Flags.html#WarningFlag"><span class="hs-identifier hs-type">WarningFlag</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-comment">-- ^ Fatal warnings</span></span><span>
</span><span id="line-96"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="diag_warn_is_error"><span class="annot"><span class="annottext">DiagOpts -&gt; Bool
</span><a href="GHC.Utils.Error.html#diag_warn_is_error"><span class="hs-identifier hs-var hs-var">diag_warn_is_error</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>                  </span><span class="annot"><span class="hs-comment">-- ^ Treat warnings as errors</span></span><span>
</span><span id="line-97"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="diag_reverse_errors"><span class="annot"><span class="annottext">DiagOpts -&gt; Bool
</span><a href="GHC.Utils.Error.html#diag_reverse_errors"><span class="hs-identifier hs-var hs-var">diag_reverse_errors</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>                  </span><span class="annot"><span class="hs-comment">-- ^ Reverse error reporting order</span></span><span>
</span><span id="line-98"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="diag_max_errors"><span class="annot"><span class="annottext">DiagOpts -&gt; Maybe Int
</span><a href="GHC.Utils.Error.html#diag_max_errors"><span class="hs-identifier hs-var hs-var">diag_max_errors</span></a></span></span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span>           </span><span class="annot"><span class="hs-comment">-- ^ Max reported error count</span></span><span>
</span><span id="line-99"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="diag_ppr_ctx"><span class="annot"><span class="annottext">DiagOpts -&gt; SDocContext
</span><a href="GHC.Utils.Error.html#diag_ppr_ctx"><span class="hs-identifier hs-var hs-var">diag_ppr_ctx</span></a></span></span><span>             </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Utils.Outputable.html#SDocContext"><span class="hs-identifier hs-type">SDocContext</span></a></span><span>           </span><span class="annot"><span class="hs-comment">-- ^ Error printing context</span></span><span>
</span><span id="line-100"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span class="annot"><a href="GHC.Utils.Error.html#diag_wopt"><span class="hs-identifier hs-type">diag_wopt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Flags.html#WarningFlag"><span class="hs-identifier hs-type">WarningFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#DiagOpts"><span class="hs-identifier hs-type">DiagOpts</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-103"></span><span id="diag_wopt"><span class="annot"><span class="annottext">diag_wopt :: WarningFlag -&gt; DiagOpts -&gt; Bool
</span><a href="GHC.Utils.Error.html#diag_wopt"><span class="hs-identifier hs-var hs-var">diag_wopt</span></a></span></span><span> </span><span id="local-6989586621681587165"><span class="annot"><span class="annottext">WarningFlag
</span><a href="#local-6989586621681587165"><span class="hs-identifier hs-var">wflag</span></a></span></span><span> </span><span id="local-6989586621681587166"><span class="annot"><span class="annottext">DiagOpts
</span><a href="#local-6989586621681587166"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="#local-6989586621681587165"><span class="hs-identifier hs-var">wflag</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag -&gt; EnumSet WarningFlag -&gt; Bool
forall a. Enum a =&gt; a -&gt; EnumSet a -&gt; Bool
</span><a href="GHC.Data.EnumSet.html#member"><span class="hs-operator hs-var">`EnumSet.member`</span></a></span><span> </span><span class="annot"><span class="annottext">DiagOpts -&gt; EnumSet WarningFlag
</span><a href="GHC.Utils.Error.html#diag_warning_flags"><span class="hs-identifier hs-var">diag_warning_flags</span></a></span><span> </span><span class="annot"><span class="annottext">DiagOpts
</span><a href="#local-6989586621681587166"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span class="annot"><a href="GHC.Utils.Error.html#diag_fatal_wopt"><span class="hs-identifier hs-type">diag_fatal_wopt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Flags.html#WarningFlag"><span class="hs-identifier hs-type">WarningFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#DiagOpts"><span class="hs-identifier hs-type">DiagOpts</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-106"></span><span id="diag_fatal_wopt"><span class="annot"><span class="annottext">diag_fatal_wopt :: WarningFlag -&gt; DiagOpts -&gt; Bool
</span><a href="GHC.Utils.Error.html#diag_fatal_wopt"><span class="hs-identifier hs-var hs-var">diag_fatal_wopt</span></a></span></span><span> </span><span id="local-6989586621681587168"><span class="annot"><span class="annottext">WarningFlag
</span><a href="#local-6989586621681587168"><span class="hs-identifier hs-var">wflag</span></a></span></span><span> </span><span id="local-6989586621681587169"><span class="annot"><span class="annottext">DiagOpts
</span><a href="#local-6989586621681587169"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="#local-6989586621681587168"><span class="hs-identifier hs-var">wflag</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag -&gt; EnumSet WarningFlag -&gt; Bool
forall a. Enum a =&gt; a -&gt; EnumSet a -&gt; Bool
</span><a href="GHC.Data.EnumSet.html#member"><span class="hs-operator hs-var">`EnumSet.member`</span></a></span><span> </span><span class="annot"><span class="annottext">DiagOpts -&gt; EnumSet WarningFlag
</span><a href="GHC.Utils.Error.html#diag_fatal_warning_flags"><span class="hs-identifier hs-var">diag_fatal_warning_flags</span></a></span><span> </span><span class="annot"><span class="annottext">DiagOpts
</span><a href="#local-6989586621681587169"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-107"></span><span>
</span><span id="line-108"></span><span class="hs-comment">-- | Computes the /right/ 'Severity' for the input 'DiagnosticReason' out of</span><span>
</span><span id="line-109"></span><span class="hs-comment">-- the 'DiagOpts. This function /has/ to be called when a diagnostic is constructed,</span><span>
</span><span id="line-110"></span><span class="hs-comment">-- i.e. with a 'DiagOpts \&quot;snapshot\&quot; taken as close as possible to where a</span><span>
</span><span id="line-111"></span><span class="hs-comment">-- particular diagnostic message is built, otherwise the computed 'Severity' might</span><span>
</span><span id="line-112"></span><span class="hs-comment">-- not be correct, due to the mutable nature of the 'DynFlags' in GHC.</span><span>
</span><span id="line-113"></span><span class="annot"><a href="GHC.Utils.Error.html#diagReasonSeverity"><span class="hs-identifier hs-type">diagReasonSeverity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#DiagOpts"><span class="hs-identifier hs-type">DiagOpts</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticReason"><span class="hs-identifier hs-type">DiagnosticReason</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Severity"><span class="hs-identifier hs-type">Severity</span></a></span><span>
</span><span id="line-114"></span><span id="diagReasonSeverity"><span class="annot"><span class="annottext">diagReasonSeverity :: DiagOpts -&gt; DiagnosticReason -&gt; Severity
</span><a href="GHC.Utils.Error.html#diagReasonSeverity"><span class="hs-identifier hs-var hs-var">diagReasonSeverity</span></a></span></span><span> </span><span id="local-6989586621681587170"><span class="annot"><span class="annottext">DiagOpts
</span><a href="#local-6989586621681587170"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621681587171"><span class="annot"><span class="annottext">DiagnosticReason
</span><a href="#local-6989586621681587171"><span class="hs-identifier hs-var">reason</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DiagnosticReason
</span><a href="#local-6989586621681587171"><span class="hs-identifier hs-var">reason</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-115"></span><span>  </span><span class="annot"><a href="GHC.Types.Error.html#WarningWithFlag"><span class="hs-identifier hs-type">WarningWithFlag</span></a></span><span> </span><span id="local-6989586621681587173"><span class="annot"><span class="annottext">WarningFlag
</span><a href="#local-6989586621681587173"><span class="hs-identifier hs-var">wflag</span></a></span></span><span>
</span><span id="line-116"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WarningFlag -&gt; DiagOpts -&gt; Bool
</span><a href="GHC.Utils.Error.html#diag_wopt"><span class="hs-identifier hs-var">diag_wopt</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="#local-6989586621681587173"><span class="hs-identifier hs-var">wflag</span></a></span><span> </span><span class="annot"><span class="annottext">DiagOpts
</span><a href="#local-6989586621681587170"><span class="hs-identifier hs-var">opts</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevIgnore"><span class="hs-identifier hs-var">SevIgnore</span></a></span><span>
</span><span id="line-117"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">WarningFlag -&gt; DiagOpts -&gt; Bool
</span><a href="GHC.Utils.Error.html#diag_fatal_wopt"><span class="hs-identifier hs-var">diag_fatal_wopt</span></a></span><span> </span><span class="annot"><span class="annottext">WarningFlag
</span><a href="#local-6989586621681587173"><span class="hs-identifier hs-var">wflag</span></a></span><span> </span><span class="annot"><span class="annottext">DiagOpts
</span><a href="#local-6989586621681587170"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevError"><span class="hs-identifier hs-var">SevError</span></a></span><span>
</span><span id="line-118"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevWarning"><span class="hs-identifier hs-var">SevWarning</span></a></span><span>
</span><span id="line-119"></span><span>  </span><span class="annot"><span class="annottext">DiagnosticReason
</span><a href="GHC.Types.Error.html#WarningWithoutFlag"><span class="hs-identifier hs-var">WarningWithoutFlag</span></a></span><span>
</span><span id="line-120"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">DiagOpts -&gt; Bool
</span><a href="GHC.Utils.Error.html#diag_warn_is_error"><span class="hs-identifier hs-var">diag_warn_is_error</span></a></span><span> </span><span class="annot"><span class="annottext">DiagOpts
</span><a href="#local-6989586621681587170"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevError"><span class="hs-identifier hs-var">SevError</span></a></span><span>
</span><span id="line-121"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevWarning"><span class="hs-identifier hs-var">SevWarning</span></a></span><span>
</span><span id="line-122"></span><span>  </span><span class="annot"><span class="annottext">DiagnosticReason
</span><a href="GHC.Types.Error.html#ErrorWithoutFlag"><span class="hs-identifier hs-var">ErrorWithoutFlag</span></a></span><span>
</span><span id="line-123"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevError"><span class="hs-identifier hs-var">SevError</span></a></span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span class="hs-comment">-- | Make a 'MessageClass' for a given 'DiagnosticReason', consulting the</span><span>
</span><span id="line-127"></span><span class="hs-comment">-- 'DiagOpts.</span><span>
</span><span id="line-128"></span><span class="annot"><a href="GHC.Utils.Error.html#mkMCDiagnostic"><span class="hs-identifier hs-type">mkMCDiagnostic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#DiagOpts"><span class="hs-identifier hs-type">DiagOpts</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticReason"><span class="hs-identifier hs-type">DiagnosticReason</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticCode"><span class="hs-identifier hs-type">DiagnosticCode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#MessageClass"><span class="hs-identifier hs-type">MessageClass</span></a></span><span>
</span><span id="line-129"></span><span id="mkMCDiagnostic"><span class="annot"><span class="annottext">mkMCDiagnostic :: DiagOpts
-&gt; DiagnosticReason -&gt; Maybe DiagnosticCode -&gt; MessageClass
</span><a href="GHC.Utils.Error.html#mkMCDiagnostic"><span class="hs-identifier hs-var hs-var">mkMCDiagnostic</span></a></span></span><span> </span><span id="local-6989586621681587180"><span class="annot"><span class="annottext">DiagOpts
</span><a href="#local-6989586621681587180"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621681587181"><span class="annot"><span class="annottext">DiagnosticReason
</span><a href="#local-6989586621681587181"><span class="hs-identifier hs-var">reason</span></a></span></span><span> </span><span id="local-6989586621681587182"><span class="annot"><span class="annottext">Maybe DiagnosticCode
</span><a href="#local-6989586621681587182"><span class="hs-identifier hs-var">code</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Severity
-&gt; DiagnosticReason -&gt; Maybe DiagnosticCode -&gt; MessageClass
</span><a href="GHC.Types.Error.html#MCDiagnostic"><span class="hs-identifier hs-var">MCDiagnostic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DiagOpts -&gt; DiagnosticReason -&gt; Severity
</span><a href="GHC.Utils.Error.html#diagReasonSeverity"><span class="hs-identifier hs-var">diagReasonSeverity</span></a></span><span> </span><span class="annot"><span class="annottext">DiagOpts
</span><a href="#local-6989586621681587180"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">DiagnosticReason
</span><a href="#local-6989586621681587181"><span class="hs-identifier hs-var">reason</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">DiagnosticReason
</span><a href="#local-6989586621681587181"><span class="hs-identifier hs-var">reason</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe DiagnosticCode
</span><a href="#local-6989586621681587182"><span class="hs-identifier hs-var">code</span></a></span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span class="hs-comment">-- | Varation of 'mkMCDiagnostic' which can be used when we are /sure/ the</span><span>
</span><span id="line-132"></span><span class="hs-comment">-- input 'DiagnosticReason' /is/ 'ErrorWithoutFlag' and there is no diagnostic code.</span><span>
</span><span id="line-133"></span><span class="annot"><a href="GHC.Utils.Error.html#errorDiagnostic"><span class="hs-identifier hs-type">errorDiagnostic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#MessageClass"><span class="hs-identifier hs-type">MessageClass</span></a></span><span>
</span><span id="line-134"></span><span id="errorDiagnostic"><span class="annot"><span class="annottext">errorDiagnostic :: MessageClass
</span><a href="GHC.Utils.Error.html#errorDiagnostic"><span class="hs-identifier hs-var hs-var">errorDiagnostic</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Severity
-&gt; DiagnosticReason -&gt; Maybe DiagnosticCode -&gt; MessageClass
</span><a href="GHC.Types.Error.html#MCDiagnostic"><span class="hs-identifier hs-var">MCDiagnostic</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevError"><span class="hs-identifier hs-var">SevError</span></a></span><span> </span><span class="annot"><span class="annottext">DiagnosticReason
</span><a href="GHC.Types.Error.html#ErrorWithoutFlag"><span class="hs-identifier hs-var">ErrorWithoutFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe DiagnosticCode
forall a. Maybe a
</span><a href="../../base-4.18.2.1/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span class="hs-comment">--</span><span>
</span><span id="line-137"></span><span class="hs-comment">-- Creating MsgEnvelope(s)</span><span>
</span><span id="line-138"></span><span class="hs-comment">--</span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span id="local-6989586621681586937"><span class="annot"><a href="GHC.Utils.Error.html#mk_msg_envelope"><span class="hs-identifier hs-type">mk_msg_envelope</span></a></span><span>
</span><span id="line-141"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Diagnostic"><span class="hs-identifier hs-type">Diagnostic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681586937"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-142"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Severity"><span class="hs-identifier hs-type">Severity</span></a></span><span>
</span><span id="line-143"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-144"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#NamePprCtx"><span class="hs-identifier hs-type">NamePprCtx</span></a></span><span>
</span><span id="line-145"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681586937"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-146"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681586937"><span class="hs-identifier hs-type">e</span></a></span></span><span>
</span><span id="line-147"></span><span id="mk_msg_envelope"><span class="annot"><span class="annottext">mk_msg_envelope :: forall e.
Diagnostic e =&gt;
Severity -&gt; SrcSpan -&gt; NamePprCtx -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mk_msg_envelope"><span class="hs-identifier hs-var hs-var">mk_msg_envelope</span></a></span></span><span> </span><span id="local-6989586621681587186"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621681587186"><span class="hs-identifier hs-var">severity</span></a></span></span><span> </span><span id="local-6989586621681587187"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681587187"><span class="hs-identifier hs-var">locn</span></a></span></span><span> </span><span id="local-6989586621681587188"><span class="annot"><span class="annottext">NamePprCtx
</span><a href="#local-6989586621681587188"><span class="hs-identifier hs-var">name_ppr_ctx</span></a></span></span><span> </span><span id="local-6989586621681587189"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621681587189"><span class="hs-identifier hs-var">err</span></a></span></span><span>
</span><span id="line-148"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">errMsgSpan :: SrcSpan
</span><a href="GHC.Types.Error.html#errMsgSpan"><span class="hs-identifier hs-var">errMsgSpan</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681587187"><span class="hs-identifier hs-var">locn</span></a></span><span>
</span><span id="line-149"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">errMsgContext :: NamePprCtx
</span><a href="GHC.Types.Error.html#errMsgContext"><span class="hs-identifier hs-var">errMsgContext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NamePprCtx
</span><a href="#local-6989586621681587188"><span class="hs-identifier hs-var">name_ppr_ctx</span></a></span><span>
</span><span id="line-150"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">errMsgDiagnostic :: e
</span><a href="GHC.Types.Error.html#errMsgDiagnostic"><span class="hs-identifier hs-var">errMsgDiagnostic</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621681587189"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-151"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">errMsgSeverity :: Severity
</span><a href="GHC.Types.Error.html#errMsgSeverity"><span class="hs-identifier hs-var">errMsgSeverity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621681587186"><span class="hs-identifier hs-var">severity</span></a></span><span>
</span><span id="line-152"></span><span>               </span><span class="hs-special">}</span><span>
</span><span id="line-153"></span><span>
</span><span id="line-154"></span><span class="hs-comment">-- | Wrap a 'Diagnostic' in a 'MsgEnvelope', recording its location.</span><span>
</span><span id="line-155"></span><span class="hs-comment">-- If you know your 'Diagnostic' is an error, consider using 'mkErrorMsgEnvelope',</span><span>
</span><span id="line-156"></span><span class="hs-comment">-- which does not require looking at the 'DiagOpts'</span><span>
</span><span id="line-157"></span><span id="local-6989586621681586943"><span class="annot"><a href="GHC.Utils.Error.html#mkMsgEnvelope"><span class="hs-identifier hs-type">mkMsgEnvelope</span></a></span><span>
</span><span id="line-158"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Diagnostic"><span class="hs-identifier hs-type">Diagnostic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681586943"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-159"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#DiagOpts"><span class="hs-identifier hs-type">DiagOpts</span></a></span><span>
</span><span id="line-160"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-161"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#NamePprCtx"><span class="hs-identifier hs-type">NamePprCtx</span></a></span><span>
</span><span id="line-162"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681586943"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-163"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681586943"><span class="hs-identifier hs-type">e</span></a></span></span><span>
</span><span id="line-164"></span><span id="mkMsgEnvelope"><span class="annot"><span class="annottext">mkMsgEnvelope :: forall e.
Diagnostic e =&gt;
DiagOpts -&gt; SrcSpan -&gt; NamePprCtx -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkMsgEnvelope"><span class="hs-identifier hs-var hs-var">mkMsgEnvelope</span></a></span></span><span> </span><span id="local-6989586621681587198"><span class="annot"><span class="annottext">DiagOpts
</span><a href="#local-6989586621681587198"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621681587199"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681587199"><span class="hs-identifier hs-var">locn</span></a></span></span><span> </span><span id="local-6989586621681587200"><span class="annot"><span class="annottext">NamePprCtx
</span><a href="#local-6989586621681587200"><span class="hs-identifier hs-var">name_ppr_ctx</span></a></span></span><span> </span><span id="local-6989586621681587201"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621681587201"><span class="hs-identifier hs-var">err</span></a></span></span><span>
</span><span id="line-165"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Severity -&gt; SrcSpan -&gt; NamePprCtx -&gt; e -&gt; MsgEnvelope e
forall e.
Diagnostic e =&gt;
Severity -&gt; SrcSpan -&gt; NamePprCtx -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mk_msg_envelope"><span class="hs-identifier hs-var">mk_msg_envelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DiagOpts -&gt; DiagnosticReason -&gt; Severity
</span><a href="GHC.Utils.Error.html#diagReasonSeverity"><span class="hs-identifier hs-var">diagReasonSeverity</span></a></span><span> </span><span class="annot"><span class="annottext">DiagOpts
</span><a href="#local-6989586621681587198"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">e -&gt; DiagnosticReason
forall a. Diagnostic a =&gt; a -&gt; DiagnosticReason
</span><a href="GHC.Types.Error.html#diagnosticReason"><span class="hs-identifier hs-var">diagnosticReason</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621681587201"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681587199"><span class="hs-identifier hs-var">locn</span></a></span><span> </span><span class="annot"><span class="annottext">NamePprCtx
</span><a href="#local-6989586621681587200"><span class="hs-identifier hs-var">name_ppr_ctx</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621681587201"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-166"></span><span>
</span><span id="line-167"></span><span class="hs-comment">-- | Wrap a 'Diagnostic' in a 'MsgEnvelope', recording its location.</span><span>
</span><span id="line-168"></span><span class="hs-comment">-- Precondition: the diagnostic is, in fact, an error. That is,</span><span>
</span><span id="line-169"></span><span class="hs-comment">-- @diagnosticReason msg == ErrorWithoutFlag@.</span><span>
</span><span id="line-170"></span><span id="local-6989586621681586946"><span class="annot"><a href="GHC.Utils.Error.html#mkErrorMsgEnvelope"><span class="hs-identifier hs-type">mkErrorMsgEnvelope</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Diagnostic"><span class="hs-identifier hs-type">Diagnostic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681586946"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-171"></span><span>                   </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-172"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#NamePprCtx"><span class="hs-identifier hs-type">NamePprCtx</span></a></span><span>
</span><span id="line-173"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681586946"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-174"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681586946"><span class="hs-identifier hs-type">e</span></a></span></span><span>
</span><span id="line-175"></span><span id="mkErrorMsgEnvelope"><span class="annot"><span class="annottext">mkErrorMsgEnvelope :: forall e.
Diagnostic e =&gt;
SrcSpan -&gt; NamePprCtx -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkErrorMsgEnvelope"><span class="hs-identifier hs-var hs-var">mkErrorMsgEnvelope</span></a></span></span><span> </span><span id="local-6989586621681587210"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681587210"><span class="hs-identifier hs-var">locn</span></a></span></span><span> </span><span id="local-6989586621681587211"><span class="annot"><span class="annottext">NamePprCtx
</span><a href="#local-6989586621681587211"><span class="hs-identifier hs-var">name_ppr_ctx</span></a></span></span><span> </span><span id="local-6989586621681587212"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621681587212"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-176"></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; MsgEnvelope e -&gt; MsgEnvelope e
forall a. HasCallStack =&gt; Bool -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#assert"><span class="hs-identifier hs-var">assert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">e -&gt; DiagnosticReason
forall a. Diagnostic a =&gt; a -&gt; DiagnosticReason
</span><a href="GHC.Types.Error.html#diagnosticReason"><span class="hs-identifier hs-var">diagnosticReason</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621681587212"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="annot"><span class="annottext">DiagnosticReason -&gt; DiagnosticReason -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">DiagnosticReason
</span><a href="GHC.Types.Error.html#ErrorWithoutFlag"><span class="hs-identifier hs-var">ErrorWithoutFlag</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope e -&gt; MsgEnvelope e) -&gt; MsgEnvelope e -&gt; MsgEnvelope e
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Severity -&gt; SrcSpan -&gt; NamePprCtx -&gt; e -&gt; MsgEnvelope e
forall e.
Diagnostic e =&gt;
Severity -&gt; SrcSpan -&gt; NamePprCtx -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mk_msg_envelope"><span class="hs-identifier hs-var">mk_msg_envelope</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevError"><span class="hs-identifier hs-var">SevError</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681587210"><span class="hs-identifier hs-var">locn</span></a></span><span> </span><span class="annot"><span class="annottext">NamePprCtx
</span><a href="#local-6989586621681587211"><span class="hs-identifier hs-var">name_ppr_ctx</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621681587212"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span class="annot"><span class="hs-comment">-- | Variant that doesn't care about qualified/unqualified names.</span></span><span>
</span><span id="line-179"></span><span id="local-6989586621681586954"><span class="annot"><a href="GHC.Utils.Error.html#mkPlainMsgEnvelope"><span class="hs-identifier hs-type">mkPlainMsgEnvelope</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Diagnostic"><span class="hs-identifier hs-type">Diagnostic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681586954"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-180"></span><span>                   </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#DiagOpts"><span class="hs-identifier hs-type">DiagOpts</span></a></span><span>
</span><span id="line-181"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-182"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681586954"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-183"></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681586954"><span class="hs-identifier hs-type">e</span></a></span></span><span>
</span><span id="line-184"></span><span id="mkPlainMsgEnvelope"><span class="annot"><span class="annottext">mkPlainMsgEnvelope :: forall e. Diagnostic e =&gt; DiagOpts -&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainMsgEnvelope"><span class="hs-identifier hs-var hs-var">mkPlainMsgEnvelope</span></a></span></span><span> </span><span id="local-6989586621681587216"><span class="annot"><span class="annottext">DiagOpts
</span><a href="#local-6989586621681587216"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span id="local-6989586621681587217"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681587217"><span class="hs-identifier hs-var">locn</span></a></span></span><span> </span><span id="local-6989586621681587218"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621681587218"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-185"></span><span>  </span><span class="annot"><span class="annottext">DiagOpts -&gt; SrcSpan -&gt; NamePprCtx -&gt; e -&gt; MsgEnvelope e
forall e.
Diagnostic e =&gt;
DiagOpts -&gt; SrcSpan -&gt; NamePprCtx -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkMsgEnvelope"><span class="hs-identifier hs-var">mkMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">DiagOpts
</span><a href="#local-6989586621681587216"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681587217"><span class="hs-identifier hs-var">locn</span></a></span><span> </span><span class="annot"><span class="annottext">NamePprCtx
</span><a href="GHC.Utils.Outputable.html#alwaysQualify"><span class="hs-identifier hs-var">alwaysQualify</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621681587218"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span class="hs-comment">-- | Variant of 'mkPlainMsgEnvelope' which can be used when we are /sure/ we</span><span>
</span><span id="line-188"></span><span class="hs-comment">-- are constructing a diagnostic with a 'ErrorWithoutFlag' reason.</span><span>
</span><span id="line-189"></span><span id="local-6989586621681586956"><span class="annot"><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-type">mkPlainErrorMsgEnvelope</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Diagnostic"><span class="hs-identifier hs-type">Diagnostic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681586956"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-190"></span><span>                        </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-191"></span><span>                        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681586956"><span class="hs-identifier hs-type">e</span></a></span><span>
</span><span id="line-192"></span><span>                        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681586956"><span class="hs-identifier hs-type">e</span></a></span></span><span>
</span><span id="line-193"></span><span id="mkPlainErrorMsgEnvelope"><span class="annot"><span class="annottext">mkPlainErrorMsgEnvelope :: forall e. Diagnostic e =&gt; SrcSpan -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mkPlainErrorMsgEnvelope"><span class="hs-identifier hs-var hs-var">mkPlainErrorMsgEnvelope</span></a></span></span><span> </span><span id="local-6989586621681587222"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681587222"><span class="hs-identifier hs-var">locn</span></a></span></span><span> </span><span id="local-6989586621681587223"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621681587223"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-194"></span><span>  </span><span class="annot"><span class="annottext">Severity -&gt; SrcSpan -&gt; NamePprCtx -&gt; e -&gt; MsgEnvelope e
forall e.
Diagnostic e =&gt;
Severity -&gt; SrcSpan -&gt; NamePprCtx -&gt; e -&gt; MsgEnvelope e
</span><a href="GHC.Utils.Error.html#mk_msg_envelope"><span class="hs-identifier hs-var">mk_msg_envelope</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="GHC.Types.Error.html#SevError"><span class="hs-identifier hs-var">SevError</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681587222"><span class="hs-identifier hs-var">locn</span></a></span><span> </span><span class="annot"><span class="annottext">NamePprCtx
</span><a href="GHC.Utils.Outputable.html#alwaysQualify"><span class="hs-identifier hs-var">alwaysQualify</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621681587223"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-195"></span><span>
</span><span id="line-196"></span><span class="hs-comment">-------------------------</span><span>
</span><span id="line-197"></span><span class="hs-keyword">data</span><span> </span><span id="Validity%27"><span class="annot"><a href="GHC.Utils.Error.html#Validity%27"><span class="hs-identifier hs-var">Validity'</span></a></span></span><span> </span><span id="local-6989586621681586968"><span class="annot"><a href="#local-6989586621681586968"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-198"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="IsValid"><span class="annot"><a href="GHC.Utils.Error.html#IsValid"><span class="hs-identifier hs-var">IsValid</span></a></span></span><span>      </span><span class="annot"><span class="hs-comment">-- ^ Everything is fine</span></span><span>
</span><span id="line-199"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NotValid"><span class="annot"><a href="GHC.Utils.Error.html#NotValid"><span class="hs-identifier hs-var">NotValid</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621681586968"><span class="hs-identifier hs-type">a</span></a></span><span>   </span><span class="annot"><span class="hs-comment">-- ^ A problem, and some indication of why</span></span><span>
</span><span id="line-200"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621681587227"><span id="local-6989586621681587229"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; Validity' a -&gt; Validity' b)
-&gt; (forall a b. a -&gt; Validity' b -&gt; Validity' a)
-&gt; Functor Validity'
forall a b. a -&gt; Validity' b -&gt; Validity' a
forall a b. (a -&gt; b) -&gt; Validity' a -&gt; Validity' b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall a b. (a -&gt; b) -&gt; Validity' a -&gt; Validity' b
fmap :: forall a b. (a -&gt; b) -&gt; Validity' a -&gt; Validity' b
$c&lt;$ :: forall a b. a -&gt; Validity' b -&gt; Validity' a
&lt;$ :: forall a b. a -&gt; Validity' b -&gt; Validity' a
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#Functor/GHC.Base.html#Functor"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></a></span></span></span><span>
</span><span id="line-201"></span><span>
</span><span id="line-202"></span><span class="annot"><span class="hs-comment">-- | Monomorphic version of @Validity'@ specialised for 'SDoc's.</span></span><span>
</span><span id="line-203"></span><span class="hs-keyword">type</span><span> </span><span id="Validity"><span class="annot"><a href="GHC.Utils.Error.html#Validity"><span class="hs-identifier hs-var">Validity</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#Validity%27"><span class="hs-identifier hs-type">Validity'</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-204"></span><span>
</span><span id="line-205"></span><span id="local-6989586621681586964"><span class="annot"><a href="GHC.Utils.Error.html#andValid"><span class="hs-identifier hs-type">andValid</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#Validity%27"><span class="hs-identifier hs-type">Validity'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681586964"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#Validity%27"><span class="hs-identifier hs-type">Validity'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681586964"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#Validity%27"><span class="hs-identifier hs-type">Validity'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681586964"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-206"></span><span id="andValid"><span class="annot"><span class="annottext">andValid :: forall a. Validity' a -&gt; Validity' a -&gt; Validity' a
</span><a href="GHC.Utils.Error.html#andValid"><span class="hs-identifier hs-var hs-var">andValid</span></a></span></span><span> </span><span class="annot"><span class="annottext">Validity' a
</span><a href="GHC.Utils.Error.html#IsValid"><span class="hs-identifier hs-var">IsValid</span></a></span><span> </span><span id="local-6989586621681587232"><span class="annot"><span class="annottext">Validity' a
</span><a href="#local-6989586621681587232"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Validity' a
</span><a href="#local-6989586621681587232"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-207"></span><span class="annot"><a href="GHC.Utils.Error.html#andValid"><span class="hs-identifier hs-var">andValid</span></a></span><span> </span><span id="local-6989586621681587233"><span class="annot"><span class="annottext">Validity' a
</span><a href="#local-6989586621681587233"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">Validity' a
</span><span class="hs-identifier">_</span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Validity' a
</span><a href="#local-6989586621681587233"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span class="annot"><span class="hs-comment">-- | If they aren't all valid, return the first</span></span><span>
</span><span id="line-210"></span><span id="local-6989586621681586966"><span class="annot"><a href="GHC.Utils.Error.html#allValid"><span class="hs-identifier hs-type">allValid</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Utils.Error.html#Validity%27"><span class="hs-identifier hs-type">Validity'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681586966"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#Validity%27"><span class="hs-identifier hs-type">Validity'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681586966"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-211"></span><span id="allValid"><span class="annot"><span class="annottext">allValid :: forall a. [Validity' a] -&gt; Validity' a
</span><a href="GHC.Utils.Error.html#allValid"><span class="hs-identifier hs-var hs-var">allValid</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Validity' a
forall a. Validity' a
</span><a href="GHC.Utils.Error.html#IsValid"><span class="hs-identifier hs-var">IsValid</span></a></span><span>
</span><span id="line-212"></span><span class="annot"><a href="GHC.Utils.Error.html#allValid"><span class="hs-identifier hs-var">allValid</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681587234"><span class="annot"><span class="annottext">Validity' a
</span><a href="#local-6989586621681587234"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681587235"><span class="annot"><span class="annottext">[Validity' a]
</span><a href="#local-6989586621681587235"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Validity' a
</span><a href="#local-6989586621681587234"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Validity' a -&gt; Validity' a -&gt; Validity' a
forall a. Validity' a -&gt; Validity' a -&gt; Validity' a
</span><a href="GHC.Utils.Error.html#andValid"><span class="hs-operator hs-var">`andValid`</span></a></span><span> </span><span class="annot"><span class="annottext">[Validity' a] -&gt; Validity' a
forall a. [Validity' a] -&gt; Validity' a
</span><a href="GHC.Utils.Error.html#allValid"><span class="hs-identifier hs-var">allValid</span></a></span><span> </span><span class="annot"><span class="annottext">[Validity' a]
</span><a href="#local-6989586621681587235"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span id="local-6989586621681586969"><span class="annot"><a href="GHC.Utils.Error.html#getInvalids"><span class="hs-identifier hs-type">getInvalids</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Utils.Error.html#Validity%27"><span class="hs-identifier hs-type">Validity'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681586969"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621681586969"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-215"></span><span id="getInvalids"><span class="annot"><span class="annottext">getInvalids :: forall a. [Validity' a] -&gt; [a]
</span><a href="GHC.Utils.Error.html#getInvalids"><span class="hs-identifier hs-var hs-var">getInvalids</span></a></span></span><span> </span><span id="local-6989586621681587236"><span class="annot"><span class="annottext">[Validity' a]
</span><a href="#local-6989586621681587236"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681587237"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#NotValid"><span class="hs-identifier hs-type">NotValid</span></a></span><span> </span><span id="local-6989586621681587237"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681587237"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Validity' a]
</span><a href="#local-6989586621681587236"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-218"></span><span class="hs-comment">-- Collecting up messages for later ordering and printing.</span><span>
</span><span id="line-219"></span><span>
</span><span id="line-220"></span><span class="hs-comment">----------------</span><span>
</span><span id="line-221"></span><span class="annot"><span class="hs-comment">-- | Formats the input list of structured document, where each element of the list gets a bullet.</span></span><span>
</span><span id="line-222"></span><span class="annot"><a href="GHC.Utils.Error.html#formatBulleted"><span class="hs-identifier hs-type">formatBulleted</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDocContext"><span class="hs-identifier hs-type">SDocContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DecoratedSDoc"><span class="hs-identifier hs-type">DecoratedSDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-223"></span><span id="formatBulleted"><span class="annot"><span class="annottext">formatBulleted :: SDocContext -&gt; DecoratedSDoc -&gt; SDoc
</span><a href="GHC.Utils.Error.html#formatBulleted"><span class="hs-identifier hs-var hs-var">formatBulleted</span></a></span></span><span> </span><span id="local-6989586621681587238"><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681587238"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DecoratedSDoc -&gt; [SDoc]
</span><a href="GHC.Types.Error.html#unDecorated"><span class="hs-identifier hs-var">unDecorated</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621681587239"><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681587239"><span class="hs-identifier hs-var">docs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-224"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681587240"><span class="hs-identifier hs-var">msgs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-225"></span><span>        </span><span class="hs-special">[</span><span class="hs-special">]</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">Outputable.empty</span></a></span><span>
</span><span id="line-226"></span><span>        </span><span class="hs-special">[</span><span id="local-6989586621681587242"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587242"><span class="hs-identifier hs-var">msg</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587242"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-227"></span><span>        </span><span class="annot"><span class="annottext">[SDoc]
</span><span class="hs-identifier">_</span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="annot"><span class="annottext">([SDoc] -&gt; SDoc) -&gt; [SDoc] -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; SDoc) -&gt; [SDoc] -&gt; [SDoc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="#local-6989586621681587244"><span class="hs-identifier hs-var">starred</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681587240"><span class="hs-identifier hs-var">msgs</span></a></span><span>
</span><span id="line-228"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-229"></span><span>    </span><span id="local-6989586621681587240"><span class="annot"><span class="annottext">msgs :: [SDoc]
</span><a href="#local-6989586621681587240"><span class="hs-identifier hs-var hs-var">msgs</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; Bool) -&gt; [SDoc] -&gt; [SDoc]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.2.1/src/GHC.List.html#filter/GHC.List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; (SDoc -&gt; Bool) -&gt; SDoc -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext -&gt; SDoc -&gt; Bool
</span><a href="GHC.Utils.Outputable.html#isEmpty"><span class="hs-identifier hs-var">Outputable.isEmpty</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681587238"><span class="hs-identifier hs-var">ctx</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[SDoc]
</span><a href="#local-6989586621681587239"><span class="hs-identifier hs-var">docs</span></a></span><span>
</span><span id="line-230"></span><span>    </span><span id="local-6989586621681587244"><span class="annot"><span class="annottext">starred :: SDoc -&gt; SDoc
</span><a href="#local-6989586621681587244"><span class="hs-identifier hs-var hs-var">starred</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#bullet"><span class="hs-identifier hs-var">bullet</span></a></span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-231"></span><span>
</span><span id="line-232"></span><span id="local-6989586621681586981"><span class="annot"><a href="GHC.Utils.Error.html#pprMessages"><span class="hs-identifier hs-type">pprMessages</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Diagnostic"><span class="hs-identifier hs-type">Diagnostic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681586981"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticOpts"><span class="hs-identifier hs-type">DiagnosticOpts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681586981"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Messages"><span class="hs-identifier hs-type">Messages</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681586981"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span></span><span>
</span><span id="line-233"></span><span id="pprMessages"><span class="annot"><span class="annottext">pprMessages :: forall e. Diagnostic e =&gt; DiagnosticOpts e -&gt; Messages e -&gt; SDoc
</span><a href="GHC.Utils.Error.html#pprMessages"><span class="hs-identifier hs-var hs-var">pprMessages</span></a></span></span><span> </span><span id="local-6989586621681587253"><span class="annot"><span class="annottext">DiagnosticOpts e
</span><a href="#local-6989586621681587253"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="annot"><span class="annottext">([SDoc] -&gt; SDoc) -&gt; (Messages e -&gt; [SDoc]) -&gt; Messages e -&gt; SDoc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">DiagnosticOpts e -&gt; Bag (MsgEnvelope e) -&gt; [SDoc]
forall e.
Diagnostic e =&gt;
DiagnosticOpts e -&gt; Bag (MsgEnvelope e) -&gt; [SDoc]
</span><a href="GHC.Utils.Error.html#pprMsgEnvelopeBagWithLoc"><span class="hs-identifier hs-var">pprMsgEnvelopeBagWithLoc</span></a></span><span> </span><span class="annot"><span class="annottext">DiagnosticOpts e
</span><a href="#local-6989586621681587253"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">(Bag (MsgEnvelope e) -&gt; [SDoc])
-&gt; (Messages e -&gt; Bag (MsgEnvelope e)) -&gt; Messages e -&gt; [SDoc]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Messages e -&gt; Bag (MsgEnvelope e)
forall e. Messages e -&gt; Bag (MsgEnvelope e)
</span><a href="GHC.Types.Error.html#getMessages"><span class="hs-identifier hs-var">getMessages</span></a></span><span>
</span><span id="line-234"></span><span>
</span><span id="line-235"></span><span id="local-6989586621681586986"><span class="annot"><a href="GHC.Utils.Error.html#pprMsgEnvelopeBagWithLoc"><span class="hs-identifier hs-type">pprMsgEnvelopeBagWithLoc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Diagnostic"><span class="hs-identifier hs-type">Diagnostic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681586986"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticOpts"><span class="hs-identifier hs-type">DiagnosticOpts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681586986"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681586986"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-236"></span><span id="pprMsgEnvelopeBagWithLoc"><span class="annot"><span class="annottext">pprMsgEnvelopeBagWithLoc :: forall e.
Diagnostic e =&gt;
DiagnosticOpts e -&gt; Bag (MsgEnvelope e) -&gt; [SDoc]
</span><a href="GHC.Utils.Error.html#pprMsgEnvelopeBagWithLoc"><span class="hs-identifier hs-var hs-var">pprMsgEnvelopeBagWithLoc</span></a></span></span><span> </span><span id="local-6989586621681587257"><span class="annot"><span class="annottext">DiagnosticOpts e
</span><a href="#local-6989586621681587257"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621681587258"><span class="annot"><span class="annottext">Bag (MsgEnvelope e)
</span><a href="#local-6989586621681587258"><span class="hs-identifier hs-var">bag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">DiagnosticOpts e -&gt; MsgEnvelope e -&gt; SDoc
forall e. Diagnostic e =&gt; DiagnosticOpts e -&gt; MsgEnvelope e -&gt; SDoc
</span><a href="GHC.Utils.Error.html#pprLocMsgEnvelope"><span class="hs-identifier hs-var">pprLocMsgEnvelope</span></a></span><span> </span><span class="annot"><span class="annottext">DiagnosticOpts e
</span><a href="#local-6989586621681587257"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e
</span><a href="#local-6989586621681587259"><span class="hs-identifier hs-var">item</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621681587259"><span class="annot"><span class="annottext">MsgEnvelope e
</span><a href="#local-6989586621681587259"><span class="hs-identifier hs-var">item</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe DiagOpts -&gt; Bag (MsgEnvelope e) -&gt; [MsgEnvelope e]
forall e. Maybe DiagOpts -&gt; Bag (MsgEnvelope e) -&gt; [MsgEnvelope e]
</span><a href="GHC.Utils.Error.html#sortMsgBag"><span class="hs-identifier hs-var">sortMsgBag</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe DiagOpts
forall a. Maybe a
</span><a href="../../base-4.18.2.1/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">Bag (MsgEnvelope e)
</span><a href="#local-6989586621681587258"><span class="hs-identifier hs-var">bag</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-237"></span><span>
</span><span id="line-238"></span><span class="hs-comment">-- | Print the messages with the suitable default configuration, usually not what you want but sometimes you don't really</span><span>
</span><span id="line-239"></span><span class="hs-comment">-- care about what the configuration is (for example, if the message is in a panic).</span><span>
</span><span id="line-240"></span><span class="annot"><a href="GHC.Utils.Error.html#pprMsgEnvelopeBagWithLocDefault"><span class="hs-identifier hs-type">pprMsgEnvelopeBagWithLocDefault</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621681586991"><span class="annot"><a href="#local-6989586621681586991"><span class="hs-identifier hs-type">e</span></a></span></span><span> </span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Diagnostic"><span class="hs-identifier hs-type">Diagnostic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681586991"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681586991"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-241"></span><span id="pprMsgEnvelopeBagWithLocDefault"><span class="annot"><span class="annottext">pprMsgEnvelopeBagWithLocDefault :: forall e. Diagnostic e =&gt; Bag (MsgEnvelope e) -&gt; [SDoc]
</span><a href="GHC.Utils.Error.html#pprMsgEnvelopeBagWithLocDefault"><span class="hs-identifier hs-var hs-var">pprMsgEnvelopeBagWithLocDefault</span></a></span></span><span> </span><span id="local-6989586621681587262"><span class="annot"><span class="annottext">Bag (MsgEnvelope e)
</span><a href="#local-6989586621681587262"><span class="hs-identifier hs-var">bag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e -&gt; SDoc
forall e. Diagnostic e =&gt; MsgEnvelope e -&gt; SDoc
</span><a href="GHC.Utils.Error.html#pprLocMsgEnvelopeDefault"><span class="hs-identifier hs-var">pprLocMsgEnvelopeDefault</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e
</span><a href="#local-6989586621681587263"><span class="hs-identifier hs-var">item</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621681587263"><span class="annot"><span class="annottext">MsgEnvelope e
</span><a href="#local-6989586621681587263"><span class="hs-identifier hs-var">item</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe DiagOpts -&gt; Bag (MsgEnvelope e) -&gt; [MsgEnvelope e]
forall e. Maybe DiagOpts -&gt; Bag (MsgEnvelope e) -&gt; [MsgEnvelope e]
</span><a href="GHC.Utils.Error.html#sortMsgBag"><span class="hs-identifier hs-var">sortMsgBag</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe DiagOpts
forall a. Maybe a
</span><a href="../../base-4.18.2.1/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">Bag (MsgEnvelope e)
</span><a href="#local-6989586621681587262"><span class="hs-identifier hs-var">bag</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span class="annot"><a href="GHC.Utils.Error.html#pprLocMsgEnvelopeDefault"><span class="hs-identifier hs-type">pprLocMsgEnvelopeDefault</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621681586993"><span class="annot"><a href="#local-6989586621681586993"><span class="hs-identifier hs-type">e</span></a></span></span><span> </span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Diagnostic"><span class="hs-identifier hs-type">Diagnostic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681586993"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681586993"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-244"></span><span id="pprLocMsgEnvelopeDefault"><span class="annot"><span class="annottext">pprLocMsgEnvelopeDefault :: forall e. Diagnostic e =&gt; MsgEnvelope e -&gt; SDoc
</span><a href="GHC.Utils.Error.html#pprLocMsgEnvelopeDefault"><span class="hs-identifier hs-var hs-var">pprLocMsgEnvelopeDefault</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DiagnosticOpts e -&gt; MsgEnvelope e -&gt; SDoc
forall e. Diagnostic e =&gt; DiagnosticOpts e -&gt; MsgEnvelope e -&gt; SDoc
</span><a href="GHC.Utils.Error.html#pprLocMsgEnvelope"><span class="hs-identifier hs-var">pprLocMsgEnvelope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Diagnostic a =&gt; DiagnosticOpts a
</span><a href="GHC.Types.Error.html#defaultDiagnosticOpts"><span class="hs-identifier hs-var">defaultDiagnosticOpts</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621681586993"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-245"></span><span>
</span><span id="line-246"></span><span id="local-6989586621681586989"><span class="annot"><a href="GHC.Utils.Error.html#pprLocMsgEnvelope"><span class="hs-identifier hs-type">pprLocMsgEnvelope</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#Diagnostic"><span class="hs-identifier hs-type">Diagnostic</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681586989"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#DiagnosticOpts"><span class="hs-identifier hs-type">DiagnosticOpts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681586989"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681586989"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span></span><span>
</span><span id="line-247"></span><span id="pprLocMsgEnvelope"><span class="annot"><span class="annottext">pprLocMsgEnvelope :: forall e. Diagnostic e =&gt; DiagnosticOpts e -&gt; MsgEnvelope e -&gt; SDoc
</span><a href="GHC.Utils.Error.html#pprLocMsgEnvelope"><span class="hs-identifier hs-var hs-var">pprLocMsgEnvelope</span></a></span></span><span> </span><span id="local-6989586621681587272"><span class="annot"><span class="annottext">DiagnosticOpts e
</span><a href="#local-6989586621681587272"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">errMsgSpan :: forall e. MsgEnvelope e -&gt; SrcSpan
</span><a href="GHC.Types.Error.html#errMsgSpan"><span class="hs-identifier hs-var">errMsgSpan</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681587273"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681587273"><span class="hs-identifier hs-var">s</span></a></span></span><span>
</span><span id="line-248"></span><span>                               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">errMsgDiagnostic :: forall e. MsgEnvelope e -&gt; e
</span><a href="GHC.Types.Error.html#errMsgDiagnostic"><span class="hs-identifier hs-var">errMsgDiagnostic</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681587274"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621681587274"><span class="hs-identifier hs-var">e</span></a></span></span><span>
</span><span id="line-249"></span><span>                               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">errMsgSeverity :: forall e. MsgEnvelope e -&gt; Severity
</span><a href="GHC.Types.Error.html#errMsgSeverity"><span class="hs-identifier hs-var">errMsgSeverity</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681587275"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621681587275"><span class="hs-identifier hs-var">sev</span></a></span></span><span>
</span><span id="line-250"></span><span>                               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">errMsgContext :: forall e. MsgEnvelope e -&gt; NamePprCtx
</span><a href="GHC.Types.Error.html#errMsgContext"><span class="hs-identifier hs-var">errMsgContext</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681587276"><span class="annot"><span class="annottext">NamePprCtx
</span><a href="#local-6989586621681587276"><span class="hs-identifier hs-var">name_ppr_ctx</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-251"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SDocContext -&gt; SDoc) -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#sdocWithContext"><span class="hs-identifier hs-var">sdocWithContext</span></a></span><span> </span><span class="annot"><span class="annottext">((SDocContext -&gt; SDoc) -&gt; SDoc) -&gt; (SDocContext -&gt; SDoc) -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681587278"><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681587278"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-252"></span><span>    </span><span class="annot"><span class="annottext">NamePprCtx -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#withErrStyle"><span class="hs-identifier hs-var">withErrStyle</span></a></span><span> </span><span class="annot"><span class="annottext">NamePprCtx
</span><a href="#local-6989586621681587276"><span class="hs-identifier hs-var">name_ppr_ctx</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; SDoc) -&gt; SDoc -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-253"></span><span>      </span><span class="annot"><span class="annottext">MessageClass -&gt; SrcSpan -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Types.Error.html#mkLocMessage"><span class="hs-identifier hs-var">mkLocMessage</span></a></span><span>
</span><span id="line-254"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Severity
-&gt; DiagnosticReason -&gt; Maybe DiagnosticCode -&gt; MessageClass
</span><a href="GHC.Types.Error.html#MCDiagnostic"><span class="hs-identifier hs-var">MCDiagnostic</span></a></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621681587275"><span class="hs-identifier hs-var">sev</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">e -&gt; DiagnosticReason
forall a. Diagnostic a =&gt; a -&gt; DiagnosticReason
</span><a href="GHC.Types.Error.html#diagnosticReason"><span class="hs-identifier hs-var">diagnosticReason</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621681587274"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">e -&gt; Maybe DiagnosticCode
forall a. Diagnostic a =&gt; a -&gt; Maybe DiagnosticCode
</span><a href="GHC.Types.Error.html#diagnosticCode"><span class="hs-identifier hs-var">diagnosticCode</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621681587274"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-255"></span><span>        </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681587273"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-256"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDocContext -&gt; DecoratedSDoc -&gt; SDoc
</span><a href="GHC.Utils.Error.html#formatBulleted"><span class="hs-identifier hs-var">formatBulleted</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681587278"><span class="hs-identifier hs-var">ctx</span></a></span><span> </span><span class="annot"><span class="annottext">(DecoratedSDoc -&gt; SDoc) -&gt; DecoratedSDoc -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DiagnosticOpts e -&gt; e -&gt; DecoratedSDoc
forall a. Diagnostic a =&gt; DiagnosticOpts a -&gt; a -&gt; DecoratedSDoc
</span><a href="GHC.Types.Error.html#diagnosticMessage"><span class="hs-identifier hs-var">diagnosticMessage</span></a></span><span> </span><span class="annot"><span class="annottext">DiagnosticOpts e
</span><a href="#local-6989586621681587272"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621681587274"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-257"></span><span>
</span><span id="line-258"></span><span id="local-6989586621681586990"><span class="annot"><a href="GHC.Utils.Error.html#sortMsgBag"><span class="hs-identifier hs-type">sortMsgBag</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#DiagOpts"><span class="hs-identifier hs-type">DiagOpts</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681586990"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Error.html#MsgEnvelope"><span class="hs-identifier hs-type">MsgEnvelope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681586990"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-259"></span><span id="sortMsgBag"><span class="annot"><span class="annottext">sortMsgBag :: forall e. Maybe DiagOpts -&gt; Bag (MsgEnvelope e) -&gt; [MsgEnvelope e]
</span><a href="GHC.Utils.Error.html#sortMsgBag"><span class="hs-identifier hs-var hs-var">sortMsgBag</span></a></span></span><span> </span><span id="local-6989586621681587282"><span class="annot"><span class="annottext">Maybe DiagOpts
</span><a href="#local-6989586621681587282"><span class="hs-identifier hs-var">mopts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[MsgEnvelope e] -&gt; [MsgEnvelope e]
</span><a href="#local-6989586621681587283"><span class="hs-identifier hs-var">maybeLimit</span></a></span><span> </span><span class="annot"><span class="annottext">([MsgEnvelope e] -&gt; [MsgEnvelope e])
-&gt; (Bag (MsgEnvelope e) -&gt; [MsgEnvelope e])
-&gt; Bag (MsgEnvelope e)
-&gt; [MsgEnvelope e]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(MsgEnvelope e -&gt; MsgEnvelope e -&gt; Ordering)
-&gt; [MsgEnvelope e] -&gt; [MsgEnvelope e]
forall a. (a -&gt; a -&gt; Ordering) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.2.1/src/Data.OldList.html#sortBy/Data.OldList.html#sortBy"><span class="hs-identifier hs-var">sortBy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpan -&gt; Ordering
</span><a href="#local-6989586621681587284"><span class="hs-identifier hs-var">cmp</span></a></span><span> </span><span class="annot"><span class="annottext">(SrcSpan -&gt; SrcSpan -&gt; Ordering)
-&gt; (MsgEnvelope e -&gt; SrcSpan)
-&gt; MsgEnvelope e
-&gt; MsgEnvelope e
-&gt; Ordering
forall b c a. (b -&gt; b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; a -&gt; c
</span><a href="../../base-4.18.2.1/src/Data.Function.html#on/Data.Function.html#on"><span class="hs-operator hs-var">`on`</span></a></span><span> </span><span class="annot"><span class="annottext">MsgEnvelope e -&gt; SrcSpan
forall e. MsgEnvelope e -&gt; SrcSpan
</span><a href="GHC.Types.Error.html#errMsgSpan"><span class="hs-identifier hs-var">errMsgSpan</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([MsgEnvelope e] -&gt; [MsgEnvelope e])
-&gt; (Bag (MsgEnvelope e) -&gt; [MsgEnvelope e])
-&gt; Bag (MsgEnvelope e)
-&gt; [MsgEnvelope e]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Bag (MsgEnvelope e) -&gt; [MsgEnvelope e]
forall a. Bag a -&gt; [a]
</span><a href="GHC.Data.Bag.html#bagToList"><span class="hs-identifier hs-var">bagToList</span></a></span><span>
</span><span id="line-260"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-261"></span><span>    </span><span id="local-6989586621681587284"><span class="annot"><span class="annottext">cmp :: SrcSpan -&gt; SrcSpan -&gt; Ordering
</span><a href="#local-6989586621681587284"><span class="hs-identifier hs-var hs-var">cmp</span></a></span></span><span>
</span><span id="line-262"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681587287"><span class="annot"><span class="annottext">DiagOpts
</span><a href="#local-6989586621681587287"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe DiagOpts
</span><a href="#local-6989586621681587282"><span class="hs-identifier hs-var">mopts</span></a></span><span>
</span><span id="line-263"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DiagOpts -&gt; Bool
</span><a href="GHC.Utils.Error.html#diag_reverse_errors"><span class="hs-identifier hs-var">diag_reverse_errors</span></a></span><span> </span><span class="annot"><span class="annottext">DiagOpts
</span><a href="#local-6989586621681587287"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-264"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpan -&gt; Ordering
</span><a href="GHC.Types.SrcLoc.html#rightmost_smallest"><span class="hs-identifier hs-var">SrcLoc.rightmost_smallest</span></a></span><span>
</span><span id="line-265"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-266"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpan -&gt; Ordering
</span><a href="GHC.Types.SrcLoc.html#leftmost_smallest"><span class="hs-identifier hs-var">SrcLoc.leftmost_smallest</span></a></span><span>
</span><span id="line-267"></span><span>    </span><span id="local-6989586621681587283"><span class="annot"><span class="annottext">maybeLimit :: [MsgEnvelope e] -&gt; [MsgEnvelope e]
</span><a href="#local-6989586621681587283"><span class="hs-identifier hs-var hs-var">maybeLimit</span></a></span></span><span>
</span><span id="line-268"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681587290"><span class="annot"><span class="annottext">DiagOpts
</span><a href="#local-6989586621681587290"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe DiagOpts
</span><a href="#local-6989586621681587282"><span class="hs-identifier hs-var">mopts</span></a></span><span>
</span><span id="line-269"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681587291"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681587291"><span class="hs-identifier hs-var">err_limit</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DiagOpts -&gt; Maybe Int
</span><a href="GHC.Utils.Error.html#diag_max_errors"><span class="hs-identifier hs-var">diag_max_errors</span></a></span><span> </span><span class="annot"><span class="annottext">DiagOpts
</span><a href="#local-6989586621681587290"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-270"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [MsgEnvelope e] -&gt; [MsgEnvelope e]
forall a. Int -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.2.1/src/GHC.List.html#take/GHC.List.html#take"><span class="hs-identifier hs-var">take</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681587291"><span class="hs-identifier hs-var">err_limit</span></a></span><span>
</span><span id="line-271"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-272"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[MsgEnvelope e] -&gt; [MsgEnvelope e]
forall a. a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#id/GHC.Base.html#id"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-273"></span><span>
</span><span id="line-274"></span><span class="annot"><a href="GHC.Utils.Error.html#ghcExit"><span class="hs-identifier hs-type">ghcExit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-275"></span><span id="ghcExit"><span class="annot"><span class="annottext">ghcExit :: Logger -&gt; Int -&gt; IO ()
</span><a href="GHC.Utils.Error.html#ghcExit"><span class="hs-identifier hs-var hs-var">ghcExit</span></a></span></span><span> </span><span id="local-6989586621681587294"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587294"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681587295"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681587295"><span class="hs-identifier hs-var">val</span></a></span></span><span>
</span><span id="line-276"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681587295"><span class="hs-identifier hs-var">val</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExitCode -&gt; IO ()
forall a. ExitCode -&gt; IO a
</span><a href="../../base-4.18.2.1/src/System.Exit.html#exitWith/System.Exit.html#exitWith"><span class="hs-identifier hs-var">exitWith</span></a></span><span> </span><span class="annot"><span class="annottext">ExitCode
</span><a href="../../base-4.18.2.1/src/GHC.IO.Exception.html#ExitSuccess/GHC.IO.Exception.html#ExitSuccess"><span class="hs-identifier hs-var">ExitSuccess</span></a></span><span>
</span><span id="line-277"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#errorMsg"><span class="hs-identifier hs-var">errorMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587294"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\nCompilation had errors\n\n&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-278"></span><span>                   </span><span class="annot"><span class="annottext">ExitCode -&gt; IO ()
forall a. ExitCode -&gt; IO a
</span><a href="../../base-4.18.2.1/src/System.Exit.html#exitWith/System.Exit.html#exitWith"><span class="hs-identifier hs-var">exitWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; ExitCode
</span><a href="../../base-4.18.2.1/src/GHC.IO.Exception.html#ExitFailure/GHC.IO.Exception.html#ExitFailure"><span class="hs-identifier hs-var">ExitFailure</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681587295"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-279"></span><span>
</span><span id="line-280"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-281"></span><span class="hs-comment">-- Outputting messages from the compiler</span><span>
</span><span id="line-282"></span><span>
</span><span id="line-283"></span><span class="annot"><a href="GHC.Utils.Error.html#errorMsg"><span class="hs-identifier hs-type">errorMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-284"></span><span id="errorMsg"><span class="annot"><span class="annottext">errorMsg :: Logger -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#errorMsg"><span class="hs-identifier hs-var hs-var">errorMsg</span></a></span></span><span> </span><span id="local-6989586621681587299"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587299"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681587300"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587300"><span class="hs-identifier hs-var">msg</span></a></span></span><span>
</span><span id="line-285"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; MessageClass -&gt; SrcSpan -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Logger.html#logMsg"><span class="hs-identifier hs-var">logMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587299"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">MessageClass
</span><a href="GHC.Utils.Error.html#errorDiagnostic"><span class="hs-identifier hs-var">errorDiagnostic</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="GHC.Types.SrcLoc.html#noSrcSpan"><span class="hs-identifier hs-var">noSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; IO ()) -&gt; SDoc -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-286"></span><span>     </span><span class="annot"><span class="annottext">PprStyle -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#withPprStyle"><span class="hs-identifier hs-var">withPprStyle</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle
</span><a href="GHC.Utils.Outputable.html#defaultErrStyle"><span class="hs-identifier hs-var">defaultErrStyle</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587300"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-287"></span><span>
</span><span id="line-288"></span><span class="annot"><a href="GHC.Utils.Error.html#fatalErrorMsg"><span class="hs-identifier hs-type">fatalErrorMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-289"></span><span id="fatalErrorMsg"><span class="annot"><span class="annottext">fatalErrorMsg :: Logger -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#fatalErrorMsg"><span class="hs-identifier hs-var hs-var">fatalErrorMsg</span></a></span></span><span> </span><span id="local-6989586621681587305"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587305"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681587306"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587306"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-290"></span><span>    </span><span class="annot"><span class="annottext">Logger -&gt; MessageClass -&gt; SrcSpan -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Logger.html#logMsg"><span class="hs-identifier hs-var">logMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587305"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">MessageClass
</span><a href="GHC.Types.Error.html#MCFatal"><span class="hs-identifier hs-var">MCFatal</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="GHC.Types.SrcLoc.html#noSrcSpan"><span class="hs-identifier hs-var">noSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; IO ()) -&gt; SDoc -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#withPprStyle"><span class="hs-identifier hs-var">withPprStyle</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle
</span><a href="GHC.Utils.Outputable.html#defaultErrStyle"><span class="hs-identifier hs-var">defaultErrStyle</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587306"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-291"></span><span>
</span><span id="line-292"></span><span class="annot"><a href="GHC.Utils.Error.html#compilationProgressMsg"><span class="hs-identifier hs-type">compilationProgressMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-293"></span><span id="compilationProgressMsg"><span class="annot"><span class="annottext">compilationProgressMsg :: Logger -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#compilationProgressMsg"><span class="hs-identifier hs-var hs-var">compilationProgressMsg</span></a></span></span><span> </span><span id="local-6989586621681587308"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587308"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681587309"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587309"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-294"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681587310"><span class="annot"><span class="annottext">logflags :: LogFlags
</span><a href="#local-6989586621681587310"><span class="hs-identifier hs-var hs-var">logflags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; LogFlags
</span><a href="GHC.Utils.Logger.html#logFlags"><span class="hs-identifier hs-var">logFlags</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587308"><span class="hs-identifier hs-var">logger</span></a></span><span>
</span><span id="line-295"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681587312"><span class="annot"><span class="annottext">str :: String
</span><a href="#local-6989586621681587312"><span class="hs-identifier hs-var hs-var">str</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDocContext -&gt; SDoc -&gt; String
</span><a href="GHC.Utils.Outputable.html#renderWithContext"><span class="hs-identifier hs-var">renderWithContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LogFlags -&gt; SDocContext
</span><a href="GHC.Utils.Logger.html#log_default_user_context"><span class="hs-identifier hs-var">log_default_user_context</span></a></span><span> </span><span class="annot"><span class="annottext">LogFlags
</span><a href="#local-6989586621681587310"><span class="hs-identifier hs-var">logflags</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC progress: &quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587309"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-296"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><a href="../../base-4.18.2.1/src/Debug.Trace.html#traceEventIO/Debug.Trace.html#traceEventIO"><span class="hs-identifier hs-var">traceEventIO</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681587312"><span class="hs-identifier hs-var">str</span></a></span><span>
</span><span id="line-297"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#when/GHC.Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Logger -&gt; Int -&gt; Bool
</span><a href="GHC.Utils.Logger.html#logVerbAtLeast"><span class="hs-identifier hs-var">logVerbAtLeast</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587308"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-298"></span><span>    </span><span class="annot"><span class="annottext">Logger -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#logOutput"><span class="hs-identifier hs-var">logOutput</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587308"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; IO ()) -&gt; SDoc -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#withPprStyle"><span class="hs-identifier hs-var">withPprStyle</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle
</span><a href="GHC.Utils.Outputable.html#defaultUserStyle"><span class="hs-identifier hs-var">defaultUserStyle</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587309"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-299"></span><span>
</span><span id="line-300"></span><span class="annot"><a href="GHC.Utils.Error.html#showPass"><span class="hs-identifier hs-type">showPass</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Base.html#String/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-301"></span><span id="showPass"><span class="annot"><span class="annottext">showPass :: Logger -&gt; String -&gt; IO ()
</span><a href="GHC.Utils.Error.html#showPass"><span class="hs-identifier hs-var hs-var">showPass</span></a></span></span><span> </span><span id="local-6989586621681587320"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587320"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681587321"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681587321"><span class="hs-identifier hs-var">what</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-302"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#when/GHC.Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Logger -&gt; Int -&gt; Bool
</span><a href="GHC.Utils.Logger.html#logVerbAtLeast"><span class="hs-identifier hs-var">logVerbAtLeast</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587320"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-303"></span><span>    </span><span class="annot"><span class="annottext">Logger -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#logInfo"><span class="hs-identifier hs-var">logInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587320"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; IO ()) -&gt; SDoc -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#withPprStyle"><span class="hs-identifier hs-var">withPprStyle</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle
</span><a href="GHC.Utils.Outputable.html#defaultUserStyle"><span class="hs-identifier hs-var">defaultUserStyle</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;***&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681587321"><span class="hs-identifier hs-var">what</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-304"></span><span>
</span><span id="line-305"></span><span class="hs-keyword">data</span><span> </span><span id="PrintTimings"><span class="annot"><a href="GHC.Utils.Error.html#PrintTimings"><span class="hs-identifier hs-var">PrintTimings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PrintTimings"><span class="annot"><a href="GHC.Utils.Error.html#PrintTimings"><span class="hs-identifier hs-var">PrintTimings</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="DontPrintTimings"><span class="annot"><a href="GHC.Utils.Error.html#DontPrintTimings"><span class="hs-identifier hs-var">DontPrintTimings</span></a></span></span><span>
</span><span id="line-306"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681587326"><span id="local-6989586621681587328"><span class="annot"><span class="annottext">PrintTimings -&gt; PrintTimings -&gt; Bool
(PrintTimings -&gt; PrintTimings -&gt; Bool)
-&gt; (PrintTimings -&gt; PrintTimings -&gt; Bool) -&gt; Eq PrintTimings
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: PrintTimings -&gt; PrintTimings -&gt; Bool
== :: PrintTimings -&gt; PrintTimings -&gt; Bool
$c/= :: PrintTimings -&gt; PrintTimings -&gt; Bool
/= :: PrintTimings -&gt; PrintTimings -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681587333"><span id="local-6989586621681587335"><span id="local-6989586621681587339"><span class="annot"><span class="annottext">Int -&gt; PrintTimings -&gt; ShowS
[PrintTimings] -&gt; ShowS
PrintTimings -&gt; String
(Int -&gt; PrintTimings -&gt; ShowS)
-&gt; (PrintTimings -&gt; String)
-&gt; ([PrintTimings] -&gt; ShowS)
-&gt; Show PrintTimings
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; PrintTimings -&gt; ShowS
showsPrec :: Int -&gt; PrintTimings -&gt; ShowS
$cshow :: PrintTimings -&gt; String
show :: PrintTimings -&gt; String
$cshowList :: [PrintTimings] -&gt; ShowS
showList :: [PrintTimings] -&gt; ShowS
</span><a href="../../base-4.18.2.1/src/GHC.Show.html#Show/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-307"></span><span>
</span><span id="line-308"></span><span class="hs-comment">-- | Time a compilation phase.</span><span>
</span><span id="line-309"></span><span class="hs-comment">--</span><span>
</span><span id="line-310"></span><span class="hs-comment">-- When timings are enabled (e.g. with the @-v2@ flag), the allocations</span><span>
</span><span id="line-311"></span><span class="hs-comment">-- and CPU time used by the phase will be reported to stderr. Consider</span><span>
</span><span id="line-312"></span><span class="hs-comment">-- a typical usage:</span><span>
</span><span id="line-313"></span><span class="hs-comment">-- @withTiming getDynFlags (text &quot;simplify&quot;) force PrintTimings pass@.</span><span>
</span><span id="line-314"></span><span class="hs-comment">-- When timings are enabled the following costs are included in the</span><span>
</span><span id="line-315"></span><span class="hs-comment">-- produced accounting,</span><span>
</span><span id="line-316"></span><span class="hs-comment">--</span><span>
</span><span id="line-317"></span><span class="hs-comment">--  - The cost of executing @pass@ to a result @r@ in WHNF</span><span>
</span><span id="line-318"></span><span class="hs-comment">--  - The cost of evaluating @force r@ to WHNF (e.g. @()@)</span><span>
</span><span id="line-319"></span><span class="hs-comment">--</span><span>
</span><span id="line-320"></span><span class="hs-comment">-- The choice of the @force@ function depends upon the amount of forcing</span><span>
</span><span id="line-321"></span><span class="hs-comment">-- desired; the goal here is to ensure that the cost of evaluating the result</span><span>
</span><span id="line-322"></span><span class="hs-comment">-- is, to the greatest extent possible, included in the accounting provided by</span><span>
</span><span id="line-323"></span><span class="hs-comment">-- 'withTiming'. Often the pass already sufficiently forces its result during</span><span>
</span><span id="line-324"></span><span class="hs-comment">-- construction; in this case @const ()@ is a reasonable choice.</span><span>
</span><span id="line-325"></span><span class="hs-comment">-- In other cases, it is necessary to evaluate the result to normal form, in</span><span>
</span><span id="line-326"></span><span class="hs-comment">-- which case something like @Control.DeepSeq.rnf@ is appropriate.</span><span>
</span><span id="line-327"></span><span class="hs-comment">--</span><span>
</span><span id="line-328"></span><span class="hs-comment">-- To avoid adversely affecting compiler performance when timings are not</span><span>
</span><span id="line-329"></span><span class="hs-comment">-- requested, the result is only forced when timings are enabled.</span><span>
</span><span id="line-330"></span><span class="hs-comment">--</span><span>
</span><span id="line-331"></span><span class="hs-comment">-- See Note [withTiming] for more.</span><span>
</span><span id="line-332"></span><span id="local-6989586621681587018"><span id="local-6989586621681587020"><span class="annot"><a href="GHC.Utils.Error.html#withTiming"><span class="hs-identifier hs-type">withTiming</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/Control.Monad.IO.Class.html#MonadIO/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681587018"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-333"></span><span>           </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span>
</span><span id="line-334"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>         </span><span class="annot"><span class="hs-comment">-- ^ The name of the phase</span></span><span>
</span><span id="line-335"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681587020"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>    </span><span class="hs-comment">-- ^ A function to force the result</span><span>
</span><span id="line-336"></span><span>                           </span><span class="hs-comment">-- (often either @const ()@ or 'rnf')</span><span>
</span><span id="line-337"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681587018"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681587020"><span class="hs-identifier hs-type">a</span></a></span><span>          </span><span class="annot"><span class="hs-comment">-- ^ The body of the phase to be timed</span></span><span>
</span><span id="line-338"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681587018"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681587020"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-339"></span><span id="withTiming"><span class="annot"><span class="annottext">withTiming :: forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Logger -&gt; SDoc -&gt; (a -&gt; ()) -&gt; m a -&gt; m a
</span><a href="GHC.Utils.Error.html#withTiming"><span class="hs-identifier hs-var hs-var">withTiming</span></a></span></span><span> </span><span id="local-6989586621681587344"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587344"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681587345"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587345"><span class="hs-identifier hs-var">what</span></a></span></span><span> </span><span id="local-6989586621681587346"><span class="annot"><span class="annottext">a -&gt; ()
</span><a href="#local-6989586621681587346"><span class="hs-identifier hs-var">force</span></a></span></span><span> </span><span id="local-6989586621681587347"><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621681587347"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-340"></span><span>  </span><span class="annot"><span class="annottext">Logger -&gt; SDoc -&gt; (a -&gt; ()) -&gt; PrintTimings -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Logger -&gt; SDoc -&gt; (a -&gt; ()) -&gt; PrintTimings -&gt; m a -&gt; m a
</span><a href="GHC.Utils.Error.html#withTiming%27"><span class="hs-identifier hs-var">withTiming'</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587344"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587345"><span class="hs-identifier hs-var">what</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; ()
</span><a href="#local-6989586621681587346"><span class="hs-identifier hs-var">force</span></a></span><span> </span><span class="annot"><span class="annottext">PrintTimings
</span><a href="GHC.Utils.Error.html#PrintTimings"><span class="hs-identifier hs-var">PrintTimings</span></a></span><span> </span><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621681587347"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-341"></span><span>
</span><span id="line-342"></span><span class="hs-comment">-- | Same as 'withTiming', but doesn't print timings in the</span><span>
</span><span id="line-343"></span><span class="hs-comment">--   console (when given @-vN@, @N &gt;= 2@ or @-ddump-timings@).</span><span>
</span><span id="line-344"></span><span class="hs-comment">--</span><span>
</span><span id="line-345"></span><span class="hs-comment">--   See Note [withTiming] for more.</span><span>
</span><span id="line-346"></span><span id="local-6989586621681587349"><span id="local-6989586621681587350"><span class="annot"><a href="GHC.Utils.Error.html#withTimingSilent"><span class="hs-identifier hs-type">withTimingSilent</span></a></span><span>
</span><span id="line-347"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/Control.Monad.IO.Class.html#MonadIO/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681587349"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-348"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span>
</span><span id="line-349"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>       </span><span class="annot"><span class="hs-comment">-- ^ The name of the phase</span></span><span>
</span><span id="line-350"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681587350"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- ^ A function to force the result</span><span>
</span><span id="line-351"></span><span>                </span><span class="hs-comment">-- (often either @const ()@ or 'rnf')</span><span>
</span><span id="line-352"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681587349"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681587350"><span class="hs-identifier hs-type">a</span></a></span><span>        </span><span class="annot"><span class="hs-comment">-- ^ The body of the phase to be timed</span></span><span>
</span><span id="line-353"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681587349"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681587350"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-354"></span><span id="withTimingSilent"><span class="annot"><span class="annottext">withTimingSilent :: forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Logger -&gt; SDoc -&gt; (a -&gt; ()) -&gt; m a -&gt; m a
</span><a href="GHC.Utils.Error.html#withTimingSilent"><span class="hs-identifier hs-var hs-var">withTimingSilent</span></a></span></span><span> </span><span id="local-6989586621681587353"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587353"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681587354"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587354"><span class="hs-identifier hs-var">what</span></a></span></span><span> </span><span id="local-6989586621681587355"><span class="annot"><span class="annottext">a -&gt; ()
</span><a href="#local-6989586621681587355"><span class="hs-identifier hs-var">force</span></a></span></span><span> </span><span id="local-6989586621681587356"><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621681587356"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-355"></span><span>  </span><span class="annot"><span class="annottext">Logger -&gt; SDoc -&gt; (a -&gt; ()) -&gt; PrintTimings -&gt; m a -&gt; m a
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Logger -&gt; SDoc -&gt; (a -&gt; ()) -&gt; PrintTimings -&gt; m a -&gt; m a
</span><a href="GHC.Utils.Error.html#withTiming%27"><span class="hs-identifier hs-var">withTiming'</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587353"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587354"><span class="hs-identifier hs-var">what</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; ()
</span><a href="#local-6989586621681587355"><span class="hs-identifier hs-var">force</span></a></span><span> </span><span class="annot"><span class="annottext">PrintTimings
</span><a href="GHC.Utils.Error.html#DontPrintTimings"><span class="hs-identifier hs-var">DontPrintTimings</span></a></span><span> </span><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621681587356"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-356"></span><span>
</span><span id="line-357"></span><span class="annot"><span class="hs-comment">-- | Worker for 'withTiming' and 'withTimingSilent'.</span></span><span>
</span><span id="line-358"></span><span id="local-6989586621681587023"><span id="local-6989586621681587024"><span class="annot"><a href="GHC.Utils.Error.html#withTiming%27"><span class="hs-identifier hs-type">withTiming'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/Control.Monad.IO.Class.html#MonadIO/Control.Monad.IO.Class.html#MonadIO"><span class="hs-identifier hs-type">MonadIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681587023"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-359"></span><span>            </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span>
</span><span id="line-360"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>         </span><span class="annot"><span class="hs-comment">-- ^ The name of the phase</span></span><span>
</span><span id="line-361"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681587024"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>    </span><span class="hs-comment">-- ^ A function to force the result</span><span>
</span><span id="line-362"></span><span>                            </span><span class="hs-comment">-- (often either @const ()@ or 'rnf')</span><span>
</span><span id="line-363"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#PrintTimings"><span class="hs-identifier hs-type">PrintTimings</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Whether to print the timings</span></span><span>
</span><span id="line-364"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681587023"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681587024"><span class="hs-identifier hs-type">a</span></a></span><span>          </span><span class="annot"><span class="hs-comment">-- ^ The body of the phase to be timed</span></span><span>
</span><span id="line-365"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681587023"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681587024"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-366"></span><span id="withTiming%27"><span class="annot"><span class="annottext">withTiming' :: forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Logger -&gt; SDoc -&gt; (a -&gt; ()) -&gt; PrintTimings -&gt; m a -&gt; m a
</span><a href="GHC.Utils.Error.html#withTiming%27"><span class="hs-identifier hs-var hs-var">withTiming'</span></a></span></span><span> </span><span id="local-6989586621681587444"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587444"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681587445"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587445"><span class="hs-identifier hs-var">what</span></a></span></span><span> </span><span id="local-6989586621681587446"><span class="annot"><span class="annottext">a -&gt; ()
</span><a href="#local-6989586621681587446"><span class="hs-identifier hs-var">force_result</span></a></span></span><span> </span><span id="local-6989586621681587447"><span class="annot"><span class="annottext">PrintTimings
</span><a href="#local-6989586621681587447"><span class="hs-identifier hs-var">prtimings</span></a></span></span><span> </span><span id="local-6989586621681587448"><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621681587448"><span class="hs-identifier hs-var">action</span></a></span></span><span>
</span><span id="line-367"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; Int -&gt; Bool
</span><a href="GHC.Utils.Logger.html#logVerbAtLeast"><span class="hs-identifier hs-var">logVerbAtLeast</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587444"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Logger -&gt; DumpFlag -&gt; Bool
</span><a href="GHC.Utils.Logger.html#logHasDumpFlag"><span class="hs-identifier hs-var">logHasDumpFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587444"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DumpFlag
</span><a href="GHC.Driver.Flags.html#Opt_D_dump_timings"><span class="hs-identifier hs-var">Opt_D_dump_timings</span></a></span><span>
</span><span id="line-368"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; m ()
</span><a href="#local-6989586621681587452"><span class="hs-identifier hs-var">whenPrintTimings</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; m ()) -&gt; IO () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-369"></span><span>              </span><span class="annot"><span class="annottext">Logger -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#logInfo"><span class="hs-identifier hs-var">logInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587444"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; IO ()) -&gt; SDoc -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#withPprStyle"><span class="hs-identifier hs-var">withPprStyle</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle
</span><a href="GHC.Utils.Outputable.html#defaultUserStyle"><span class="hs-identifier hs-var">defaultUserStyle</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; SDoc) -&gt; SDoc -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-370"></span><span>                </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;***&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587445"><span class="hs-identifier hs-var">what</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span>
</span><span id="line-371"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681587453"><span class="annot"><span class="annottext">ctx :: SDocContext
</span><a href="#local-6989586621681587453"><span class="hs-identifier hs-var hs-var">ctx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LogFlags -&gt; SDocContext
</span><a href="GHC.Utils.Logger.html#log_default_user_context"><span class="hs-identifier hs-var">log_default_user_context</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Logger -&gt; LogFlags
</span><a href="GHC.Utils.Logger.html#logFlags"><span class="hs-identifier hs-var">logFlags</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587444"><span class="hs-identifier hs-var">logger</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-372"></span><span>            </span><span id="local-6989586621681587454"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621681587454"><span class="hs-identifier hs-var">alloc0</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO Int64 -&gt; m Int64
forall a. IO a -&gt; m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">IO Int64
</span><a href="../../base-4.18.2.1/src/GHC.Conc.Sync.html#getAllocationCounter/GHC.Conc.Sync.html#getAllocationCounter"><span class="hs-identifier hs-var">getAllocationCounter</span></a></span><span>
</span><span id="line-373"></span><span>            </span><span id="local-6989586621681587456"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681587456"><span class="hs-identifier hs-var">start</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO Integer -&gt; m Integer
forall a. IO a -&gt; m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">IO Integer
</span><a href="../../base-4.18.2.1/src/System.CPUTime.html#getCPUTime/System.CPUTime.html#getCPUTime"><span class="hs-identifier hs-var">getCPUTime</span></a></span><span>
</span><span id="line-374"></span><span>            </span><span class="annot"><span class="annottext">SDocContext -&gt; SDoc -&gt; m ()
</span><a href="#local-6989586621681587458"><span class="hs-identifier hs-var">eventBegins</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681587453"><span class="hs-identifier hs-var">ctx</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587445"><span class="hs-identifier hs-var">what</span></a></span><span>
</span><span id="line-375"></span><span>            </span><span class="annot"><span class="annottext">Int64 -&gt; m ()
forall {m :: * -&gt; *} {a}. (MonadIO m, Show a) =&gt; a -&gt; m ()
</span><a href="#local-6989586621681587459"><span class="hs-identifier hs-var">recordAllocs</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621681587454"><span class="hs-identifier hs-var">alloc0</span></a></span><span>
</span><span id="line-376"></span><span>            </span><span class="hs-glyph">!</span><span id="local-6989586621681587460"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681587460"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621681587448"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-377"></span><span>            </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">() -&gt; m ()
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#pure/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(() -&gt; m ()) -&gt; () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; ()
</span><a href="#local-6989586621681587446"><span class="hs-identifier hs-var">force_result</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681587460"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-378"></span><span>            </span><span class="annot"><span class="annottext">SDocContext -&gt; SDoc -&gt; m ()
</span><a href="#local-6989586621681587461"><span class="hs-identifier hs-var">eventEnds</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681587453"><span class="hs-identifier hs-var">ctx</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587445"><span class="hs-identifier hs-var">what</span></a></span><span>
</span><span id="line-379"></span><span>            </span><span id="local-6989586621681587462"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681587462"><span class="hs-identifier hs-var">end</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO Integer -&gt; m Integer
forall a. IO a -&gt; m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">IO Integer
</span><a href="../../base-4.18.2.1/src/System.CPUTime.html#getCPUTime/System.CPUTime.html#getCPUTime"><span class="hs-identifier hs-var">getCPUTime</span></a></span><span>
</span><span id="line-380"></span><span>            </span><span id="local-6989586621681587463"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621681587463"><span class="hs-identifier hs-var">alloc1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO Int64 -&gt; m Int64
forall a. IO a -&gt; m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">IO Int64
</span><a href="../../base-4.18.2.1/src/GHC.Conc.Sync.html#getAllocationCounter/GHC.Conc.Sync.html#getAllocationCounter"><span class="hs-identifier hs-var">getAllocationCounter</span></a></span><span>
</span><span id="line-381"></span><span>            </span><span class="annot"><span class="annottext">Int64 -&gt; m ()
forall {m :: * -&gt; *} {a}. (MonadIO m, Show a) =&gt; a -&gt; m ()
</span><a href="#local-6989586621681587459"><span class="hs-identifier hs-var">recordAllocs</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621681587463"><span class="hs-identifier hs-var">alloc1</span></a></span><span>
</span><span id="line-382"></span><span>            </span><span class="hs-comment">-- recall that allocation counter counts down</span><span>
</span><span id="line-383"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681587464"><span class="annot"><span class="annottext">alloc :: Int64
</span><a href="#local-6989586621681587464"><span class="hs-identifier hs-var hs-var">alloc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621681587454"><span class="hs-identifier hs-var">alloc0</span></a></span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; Int64 -&gt; Int64
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#-/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621681587463"><span class="hs-identifier hs-var">alloc1</span></a></span><span>
</span><span id="line-384"></span><span>                </span><span id="local-6989586621681587465"><span class="annot"><span class="annottext">time :: Double
</span><a href="#local-6989586621681587465"><span class="hs-identifier hs-var hs-var">time</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Double
forall a b. (Real a, Fractional b) =&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Real.html#realToFrac/GHC.Real.html#realToFrac"><span class="hs-identifier hs-var">realToFrac</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681587462"><span class="hs-identifier hs-var">end</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#-/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681587456"><span class="hs-identifier hs-var">start</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Double -&gt; Double -&gt; Double
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#%2A/GHC.Num.html#%2A"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">1e-9</span></span><span>
</span><span id="line-385"></span><span>
</span><span id="line-386"></span><span>            </span><span class="annot"><span class="annottext">Bool -&gt; m () -&gt; m ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#when/GHC.Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Logger -&gt; Int -&gt; Bool
</span><a href="GHC.Utils.Logger.html#logVerbAtLeast"><span class="hs-identifier hs-var">logVerbAtLeast</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587444"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">PrintTimings
</span><a href="#local-6989586621681587447"><span class="hs-identifier hs-var">prtimings</span></a></span><span> </span><span class="annot"><span class="annottext">PrintTimings -&gt; PrintTimings -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">PrintTimings
</span><a href="GHC.Utils.Error.html#PrintTimings"><span class="hs-identifier hs-var">PrintTimings</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-387"></span><span>                </span><span class="annot"><span class="annottext">(m () -&gt; m ()) -&gt; m () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; m ()
forall a. IO a -&gt; m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; m ()) -&gt; IO () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Logger -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#logInfo"><span class="hs-identifier hs-var">logInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587444"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; IO ()) -&gt; SDoc -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#withPprStyle"><span class="hs-identifier hs-var">withPprStyle</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle
</span><a href="GHC.Utils.Outputable.html#defaultUserStyle"><span class="hs-identifier hs-var">defaultUserStyle</span></a></span><span>
</span><span id="line-388"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;!!!&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587445"><span class="hs-identifier hs-var">what</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;finished in&quot;</span></span><span>
</span><span id="line-389"></span><span>                     </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Double -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#doublePrec"><span class="hs-identifier hs-var">doublePrec</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621681587465"><span class="hs-identifier hs-var">time</span></a></span><span>
</span><span id="line-390"></span><span>                     </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;milliseconds&quot;</span></span><span>
</span><span id="line-391"></span><span>                     </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#comma"><span class="hs-identifier hs-var">comma</span></a></span><span>
</span><span id="line-392"></span><span>                     </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;allocated&quot;</span></span><span>
</span><span id="line-393"></span><span>                     </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Double -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#doublePrec"><span class="hs-identifier hs-var">doublePrec</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int64 -&gt; Double
forall a b. (Real a, Fractional b) =&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Real.html#realToFrac/GHC.Real.html#realToFrac"><span class="hs-identifier hs-var">realToFrac</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621681587464"><span class="hs-identifier hs-var">alloc</span></a></span><span> </span><span class="annot"><span class="annottext">Double -&gt; Double -&gt; Double
forall a. Fractional a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Real.html#%2F/GHC.Real.html#%2F"><span class="hs-operator hs-var">/</span></a></span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">1024</span></span><span> </span><span class="annot"><span class="annottext">Double -&gt; Double -&gt; Double
forall a. Fractional a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Real.html#%2F/GHC.Real.html#%2F"><span class="hs-operator hs-var">/</span></a></span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">1024</span></span><span class="hs-special">)</span><span>
</span><span id="line-394"></span><span>                     </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;megabytes&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-395"></span><span>
</span><span id="line-396"></span><span>            </span><span class="annot"><span class="annottext">IO () -&gt; m ()
</span><a href="#local-6989586621681587452"><span class="hs-identifier hs-var">whenPrintTimings</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; m ()) -&gt; IO () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-397"></span><span>                </span><span class="annot"><span class="annottext">Logger -&gt; DumpFlag -&gt; String -&gt; DumpFormat -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Logger.html#putDumpFileMaybe"><span class="hs-identifier hs-var">putDumpFileMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587444"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">DumpFlag
</span><a href="GHC.Driver.Flags.html#Opt_D_dump_timings"><span class="hs-identifier hs-var">Opt_D_dump_timings</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">DumpFormat
</span><a href="GHC.Utils.Logger.html#FormatText"><span class="hs-identifier hs-var">FormatText</span></a></span><span>
</span><span id="line-398"></span><span>                    </span><span class="annot"><span class="annottext">(SDoc -&gt; IO ()) -&gt; SDoc -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; SDoc) -&gt; String -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext -&gt; SDoc -&gt; String
</span><a href="GHC.Utils.Outputable.html#showSDocOneLine"><span class="hs-identifier hs-var">showSDocOneLine</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681587453"><span class="hs-identifier hs-var">ctx</span></a></span><span>
</span><span id="line-399"></span><span>                    </span><span class="annot"><span class="annottext">(SDoc -&gt; String) -&gt; SDoc -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsLine doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587445"><span class="hs-identifier hs-var">what</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span>
</span><span id="line-400"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;alloc=&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621681587464"><span class="hs-identifier hs-var">alloc</span></a></span><span>
</span><span id="line-401"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;time=&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Double -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#doublePrec"><span class="hs-identifier hs-var">doublePrec</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621681587465"><span class="hs-identifier hs-var">time</span></a></span><span>
</span><span id="line-402"></span><span>                           </span><span class="hs-special">]</span><span>
</span><span id="line-403"></span><span>            </span><span class="annot"><span class="annottext">a -&gt; m a
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#pure/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681587460"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-404"></span><span>     </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621681587448"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-405"></span><span>
</span><span id="line-406"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681587452"><span class="annot"><span class="annottext">whenPrintTimings :: IO () -&gt; m ()
</span><a href="#local-6989586621681587452"><span class="hs-identifier hs-var hs-var">whenPrintTimings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; m ()
forall a. IO a -&gt; m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; m ()) -&gt; (IO () -&gt; IO ()) -&gt; IO () -&gt; m ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#when/GHC.Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrintTimings
</span><a href="#local-6989586621681587447"><span class="hs-identifier hs-var">prtimings</span></a></span><span> </span><span class="annot"><span class="annottext">PrintTimings -&gt; PrintTimings -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">PrintTimings
</span><a href="GHC.Utils.Error.html#PrintTimings"><span class="hs-identifier hs-var">PrintTimings</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-407"></span><span>
</span><span id="line-408"></span><span>          </span><span id="local-6989586621681587459"><span class="annot"><span class="annottext">recordAllocs :: a -&gt; m ()
</span><a href="#local-6989586621681587459"><span class="hs-identifier hs-var hs-var">recordAllocs</span></a></span></span><span> </span><span id="local-6989586621681587487"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681587487"><span class="hs-identifier hs-var">alloc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-409"></span><span>            </span><span class="annot"><span class="annottext">IO () -&gt; m ()
forall a. IO a -&gt; m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; m ()) -&gt; IO () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><a href="../../base-4.18.2.1/src/Debug.Trace.html#traceMarkerIO/Debug.Trace.html#traceMarkerIO"><span class="hs-identifier hs-var">traceMarkerIO</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; IO ()) -&gt; String -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC:allocs:&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../base-4.18.2.1/src/GHC.Show.html#show/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681587487"><span class="hs-identifier hs-var">alloc</span></a></span><span>
</span><span id="line-410"></span><span>
</span><span id="line-411"></span><span>          </span><span id="local-6989586621681587458"><span class="annot"><span class="annottext">eventBegins :: SDocContext -&gt; SDoc -&gt; m ()
</span><a href="#local-6989586621681587458"><span class="hs-identifier hs-var hs-var">eventBegins</span></a></span></span><span> </span><span id="local-6989586621681587490"><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681587490"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span id="local-6989586621681587491"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587491"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-412"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681587492"><span class="annot"><span class="annottext">doc :: String
</span><a href="#local-6989586621681587492"><span class="hs-identifier hs-var hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDocContext -&gt; SDoc -&gt; String
</span><a href="#local-6989586621681587493"><span class="hs-identifier hs-var">eventBeginsDoc</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681587490"><span class="hs-identifier hs-var">ctx</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587491"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-413"></span><span>            </span><span class="annot"><span class="annottext">IO () -&gt; m ()
</span><a href="#local-6989586621681587452"><span class="hs-identifier hs-var">whenPrintTimings</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; m ()) -&gt; IO () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><a href="../../base-4.18.2.1/src/Debug.Trace.html#traceMarkerIO/Debug.Trace.html#traceMarkerIO"><span class="hs-identifier hs-var">traceMarkerIO</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681587492"><span class="hs-identifier hs-var">doc</span></a></span><span>
</span><span id="line-414"></span><span>            </span><span class="annot"><span class="annottext">IO () -&gt; m ()
forall a. IO a -&gt; m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; m ()) -&gt; IO () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><a href="../../base-4.18.2.1/src/Debug.Trace.html#traceEventIO/Debug.Trace.html#traceEventIO"><span class="hs-identifier hs-var">traceEventIO</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681587492"><span class="hs-identifier hs-var">doc</span></a></span><span>
</span><span id="line-415"></span><span>
</span><span id="line-416"></span><span>          </span><span id="local-6989586621681587461"><span class="annot"><span class="annottext">eventEnds :: SDocContext -&gt; SDoc -&gt; m ()
</span><a href="#local-6989586621681587461"><span class="hs-identifier hs-var hs-var">eventEnds</span></a></span></span><span> </span><span id="local-6989586621681587494"><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681587494"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span id="local-6989586621681587495"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587495"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-417"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681587496"><span class="annot"><span class="annottext">doc :: String
</span><a href="#local-6989586621681587496"><span class="hs-identifier hs-var hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDocContext -&gt; SDoc -&gt; String
</span><a href="#local-6989586621681587497"><span class="hs-identifier hs-var">eventEndsDoc</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681587494"><span class="hs-identifier hs-var">ctx</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587495"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-418"></span><span>            </span><span class="annot"><span class="annottext">IO () -&gt; m ()
</span><a href="#local-6989586621681587452"><span class="hs-identifier hs-var">whenPrintTimings</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; m ()) -&gt; IO () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><a href="../../base-4.18.2.1/src/Debug.Trace.html#traceMarkerIO/Debug.Trace.html#traceMarkerIO"><span class="hs-identifier hs-var">traceMarkerIO</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681587496"><span class="hs-identifier hs-var">doc</span></a></span><span>
</span><span id="line-419"></span><span>            </span><span class="annot"><span class="annottext">IO () -&gt; m ()
forall a. IO a -&gt; m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; m ()) -&gt; IO () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ()
</span><a href="../../base-4.18.2.1/src/Debug.Trace.html#traceEventIO/Debug.Trace.html#traceEventIO"><span class="hs-identifier hs-var">traceEventIO</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681587496"><span class="hs-identifier hs-var">doc</span></a></span><span>
</span><span id="line-420"></span><span>
</span><span id="line-421"></span><span>          </span><span id="local-6989586621681587493"><span class="annot"><span class="annottext">eventBeginsDoc :: SDocContext -&gt; SDoc -&gt; String
</span><a href="#local-6989586621681587493"><span class="hs-identifier hs-var hs-var">eventBeginsDoc</span></a></span></span><span> </span><span id="local-6989586621681587500"><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681587500"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span id="local-6989586621681587501"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587501"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDocContext -&gt; SDoc -&gt; String
</span><a href="GHC.Utils.Outputable.html#showSDocOneLine"><span class="hs-identifier hs-var">showSDocOneLine</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681587500"><span class="hs-identifier hs-var">ctx</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; String) -&gt; SDoc -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC:started:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587501"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-422"></span><span>          </span><span id="local-6989586621681587497"><span class="annot"><span class="annottext">eventEndsDoc :: SDocContext -&gt; SDoc -&gt; String
</span><a href="#local-6989586621681587497"><span class="hs-identifier hs-var hs-var">eventEndsDoc</span></a></span></span><span>   </span><span id="local-6989586621681587504"><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681587504"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span id="local-6989586621681587505"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587505"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDocContext -&gt; SDoc -&gt; String
</span><a href="GHC.Utils.Outputable.html#showSDocOneLine"><span class="hs-identifier hs-var">showSDocOneLine</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681587504"><span class="hs-identifier hs-var">ctx</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; String) -&gt; SDoc -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC:finished:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587505"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-423"></span><span>
</span><span id="line-424"></span><span class="annot"><a href="GHC.Utils.Error.html#debugTraceMsg"><span class="hs-identifier hs-type">debugTraceMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-425"></span><span id="debugTraceMsg"><span class="annot"><span class="annottext">debugTraceMsg :: Logger -&gt; Int -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#debugTraceMsg"><span class="hs-identifier hs-var hs-var">debugTraceMsg</span></a></span></span><span> </span><span id="local-6989586621681587506"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587506"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681587507"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681587507"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span id="local-6989586621681587508"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587508"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-426"></span><span>   </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#when/GHC.Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LogFlags -&gt; Int
</span><a href="GHC.Utils.Logger.html#log_verbosity"><span class="hs-identifier hs-var">log_verbosity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Logger -&gt; LogFlags
</span><a href="GHC.Utils.Logger.html#logFlags"><span class="hs-identifier hs-var">logFlags</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587506"><span class="hs-identifier hs-var">logger</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681587507"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-427"></span><span>      </span><span class="annot"><span class="annottext">Logger -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#logInfo"><span class="hs-identifier hs-var">logInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587506"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PprStyle -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#withPprStyle"><span class="hs-identifier hs-var">withPprStyle</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle
</span><a href="GHC.Utils.Outputable.html#defaultDumpStyle"><span class="hs-identifier hs-var">defaultDumpStyle</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587508"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-428"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="GHC.Utils.Error.html#debugTraceMsg"><span class="hs-pragma hs-type">debugTraceMsg</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>  </span><span class="hs-comment">-- see Note [INLINE conditional tracing utilities]</span><span>
</span><span id="line-429"></span><span>
</span><span id="line-430"></span><span class="annot"><a href="GHC.Utils.Error.html#putMsg"><span class="hs-identifier hs-type">putMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-431"></span><span id="putMsg"><span class="annot"><span class="annottext">putMsg :: Logger -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#putMsg"><span class="hs-identifier hs-var hs-var">putMsg</span></a></span></span><span> </span><span id="local-6989586621681587511"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587511"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681587512"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587512"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#logInfo"><span class="hs-identifier hs-var">logInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587511"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PprStyle -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#withPprStyle"><span class="hs-identifier hs-var">withPprStyle</span></a></span><span> </span><span class="annot"><span class="annottext">PprStyle
</span><a href="GHC.Utils.Outputable.html#defaultUserStyle"><span class="hs-identifier hs-var">defaultUserStyle</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587512"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-432"></span><span>
</span><span id="line-433"></span><span class="annot"><a href="GHC.Utils.Error.html#printInfoForUser"><span class="hs-identifier hs-type">printInfoForUser</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#NamePprCtx"><span class="hs-identifier hs-type">NamePprCtx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-434"></span><span id="printInfoForUser"><span class="annot"><span class="annottext">printInfoForUser :: Logger -&gt; NamePprCtx -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#printInfoForUser"><span class="hs-identifier hs-var hs-var">printInfoForUser</span></a></span></span><span> </span><span id="local-6989586621681587513"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587513"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681587514"><span class="annot"><span class="annottext">NamePprCtx
</span><a href="#local-6989586621681587514"><span class="hs-identifier hs-var">name_ppr_ctx</span></a></span></span><span> </span><span id="local-6989586621681587515"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587515"><span class="hs-identifier hs-var">msg</span></a></span></span><span>
</span><span id="line-435"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#logInfo"><span class="hs-identifier hs-var">logInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587513"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamePprCtx -&gt; Depth -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#withUserStyle"><span class="hs-identifier hs-var">withUserStyle</span></a></span><span> </span><span class="annot"><span class="annottext">NamePprCtx
</span><a href="#local-6989586621681587514"><span class="hs-identifier hs-var">name_ppr_ctx</span></a></span><span> </span><span class="annot"><span class="annottext">Depth
</span><a href="GHC.Utils.Outputable.html#AllTheWay"><span class="hs-identifier hs-var">AllTheWay</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587515"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-436"></span><span>
</span><span id="line-437"></span><span class="annot"><a href="GHC.Utils.Error.html#printOutputForUser"><span class="hs-identifier hs-type">printOutputForUser</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#NamePprCtx"><span class="hs-identifier hs-type">NamePprCtx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-438"></span><span id="printOutputForUser"><span class="annot"><span class="annottext">printOutputForUser :: Logger -&gt; NamePprCtx -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#printOutputForUser"><span class="hs-identifier hs-var hs-var">printOutputForUser</span></a></span></span><span> </span><span id="local-6989586621681587518"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587518"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681587519"><span class="annot"><span class="annottext">NamePprCtx
</span><a href="#local-6989586621681587519"><span class="hs-identifier hs-var">name_ppr_ctx</span></a></span></span><span> </span><span id="local-6989586621681587520"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587520"><span class="hs-identifier hs-var">msg</span></a></span></span><span>
</span><span id="line-439"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#logOutput"><span class="hs-identifier hs-var">logOutput</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587518"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamePprCtx -&gt; Depth -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#withUserStyle"><span class="hs-identifier hs-var">withUserStyle</span></a></span><span> </span><span class="annot"><span class="annottext">NamePprCtx
</span><a href="#local-6989586621681587519"><span class="hs-identifier hs-var">name_ppr_ctx</span></a></span><span> </span><span class="annot"><span class="annottext">Depth
</span><a href="GHC.Utils.Outputable.html#AllTheWay"><span class="hs-identifier hs-var">AllTheWay</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587520"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-440"></span><span>
</span><span id="line-441"></span><span class="annot"><a href="GHC.Utils.Error.html#logInfo"><span class="hs-identifier hs-type">logInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-442"></span><span id="logInfo"><span class="annot"><span class="annottext">logInfo :: Logger -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#logInfo"><span class="hs-identifier hs-var hs-var">logInfo</span></a></span></span><span> </span><span id="local-6989586621681587521"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587521"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681587522"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587522"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; MessageClass -&gt; SrcSpan -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Logger.html#logMsg"><span class="hs-identifier hs-var">logMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587521"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">MessageClass
</span><a href="GHC.Types.Error.html#MCInfo"><span class="hs-identifier hs-var">MCInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="GHC.Types.SrcLoc.html#noSrcSpan"><span class="hs-identifier hs-var">noSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587522"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-443"></span><span>
</span><span id="line-444"></span><span class="annot"><span class="hs-comment">-- | Like 'logInfo' but with 'SevOutput' rather then 'SevInfo'</span></span><span>
</span><span id="line-445"></span><span class="annot"><a href="GHC.Utils.Error.html#logOutput"><span class="hs-identifier hs-type">logOutput</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-446"></span><span id="logOutput"><span class="annot"><span class="annottext">logOutput :: Logger -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#logOutput"><span class="hs-identifier hs-var hs-var">logOutput</span></a></span></span><span> </span><span id="local-6989586621681587524"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587524"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681587525"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587525"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; MessageClass -&gt; SrcSpan -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Logger.html#logMsg"><span class="hs-identifier hs-var">logMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587524"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">MessageClass
</span><a href="GHC.Types.Error.html#MCOutput"><span class="hs-identifier hs-var">MCOutput</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="GHC.Types.SrcLoc.html#noSrcSpan"><span class="hs-identifier hs-var">noSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587525"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-447"></span><span>
</span><span id="line-448"></span><span>
</span><span id="line-449"></span><span id="local-6989586621681587047"><span id="local-6989586621681587049"><span class="annot"><a href="GHC.Utils.Error.html#prettyPrintGhcErrors"><span class="hs-identifier hs-type">prettyPrintGhcErrors</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Exception.html#ExceptionMonad"><span class="hs-identifier hs-type">ExceptionMonad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681587047"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681587047"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681587049"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681587047"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681587049"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-450"></span><span id="prettyPrintGhcErrors"><span class="annot"><span class="annottext">prettyPrintGhcErrors :: forall (m :: * -&gt; *) a. ExceptionMonad m =&gt; Logger -&gt; m a -&gt; m a
</span><a href="GHC.Utils.Error.html#prettyPrintGhcErrors"><span class="hs-identifier hs-var hs-var">prettyPrintGhcErrors</span></a></span></span><span> </span><span id="local-6989586621681587546"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587546"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-451"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681587547"><span class="annot"><span class="annottext">ctx :: SDocContext
</span><a href="#local-6989586621681587547"><span class="hs-identifier hs-var hs-var">ctx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LogFlags -&gt; SDocContext
</span><a href="GHC.Utils.Logger.html#log_default_user_context"><span class="hs-identifier hs-var">log_default_user_context</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Logger -&gt; LogFlags
</span><a href="GHC.Utils.Logger.html#logFlags"><span class="hs-identifier hs-var">logFlags</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587546"><span class="hs-identifier hs-var">logger</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-452"></span><span>  </span><span class="annot"><span class="annottext">(GhcException -&gt; m a) -&gt; m a -&gt; m a
forall (m :: * -&gt; *) e a.
(HasCallStack, MonadCatch m, Exception e) =&gt;
(e -&gt; m a) -&gt; m a -&gt; m a
</span><a href="../../exceptions-0.10.7/src/Control.Monad.Catch.html#handle/Control.Monad.Catch.html#handle"><span class="hs-identifier hs-var">MC.handle</span></a></span><span> </span><span class="annot"><span class="annottext">((GhcException -&gt; m a) -&gt; m a -&gt; m a)
-&gt; (GhcException -&gt; m a) -&gt; m a -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681587548"><span class="annot"><span class="annottext">GhcException
</span><a href="#local-6989586621681587548"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">GhcException
</span><a href="#local-6989586621681587548"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-453"></span><span>    </span><span class="annot"><a href="GHC.Utils.Panic.html#PprPanic"><span class="hs-identifier hs-type">PprPanic</span></a></span><span> </span><span id="local-6989586621681587550"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681587550"><span class="hs-identifier hs-var">str</span></a></span></span><span> </span><span id="local-6989586621681587551"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587551"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-454"></span><span>        </span><span class="annot"><span class="annottext">SDocContext -&gt; (String -&gt; m a) -&gt; SDoc -&gt; SDoc -&gt; m a
forall a. SDocContext -&gt; (String -&gt; a) -&gt; SDoc -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Outputable.html#pprDebugAndThen"><span class="hs-identifier hs-var">pprDebugAndThen</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681587547"><span class="hs-identifier hs-var">ctx</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; m a
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681587550"><span class="hs-identifier hs-var">str</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587551"><span class="hs-identifier hs-var">doc</span></a></span><span>
</span><span id="line-455"></span><span>    </span><span class="annot"><a href="GHC.Utils.Panic.html#PprSorry"><span class="hs-identifier hs-type">PprSorry</span></a></span><span> </span><span id="local-6989586621681587555"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681587555"><span class="hs-identifier hs-var">str</span></a></span></span><span> </span><span id="local-6989586621681587556"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587556"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-456"></span><span>        </span><span class="annot"><span class="annottext">SDocContext -&gt; (String -&gt; m a) -&gt; SDoc -&gt; SDoc -&gt; m a
forall a. SDocContext -&gt; (String -&gt; a) -&gt; SDoc -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Outputable.html#pprDebugAndThen"><span class="hs-identifier hs-var">pprDebugAndThen</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681587547"><span class="hs-identifier hs-var">ctx</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; m a
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#sorry"><span class="hs-identifier hs-var">sorry</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681587555"><span class="hs-identifier hs-var">str</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587556"><span class="hs-identifier hs-var">doc</span></a></span><span>
</span><span id="line-457"></span><span>    </span><span class="annot"><a href="GHC.Utils.Panic.html#PprProgramError"><span class="hs-identifier hs-type">PprProgramError</span></a></span><span> </span><span id="local-6989586621681587559"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681587559"><span class="hs-identifier hs-var">str</span></a></span></span><span> </span><span id="local-6989586621681587560"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587560"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-458"></span><span>        </span><span class="annot"><span class="annottext">SDocContext -&gt; (String -&gt; m a) -&gt; SDoc -&gt; SDoc -&gt; m a
forall a. SDocContext -&gt; (String -&gt; a) -&gt; SDoc -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Outputable.html#pprDebugAndThen"><span class="hs-identifier hs-var">pprDebugAndThen</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext
</span><a href="#local-6989586621681587547"><span class="hs-identifier hs-var">ctx</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; m a
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#pgmError"><span class="hs-identifier hs-var">pgmError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681587559"><span class="hs-identifier hs-var">str</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587560"><span class="hs-identifier hs-var">doc</span></a></span><span>
</span><span id="line-459"></span><span>    </span><span class="annot"><span class="annottext">GhcException
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO a -&gt; m a
forall a. IO a -&gt; m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../../base-4.18.2.1/src/Control.Monad.IO.Class.html#liftIO/Control.Monad.IO.Class.html#liftIO"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO a -&gt; m a) -&gt; IO a -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">GhcException -&gt; IO a
forall e a. Exception e =&gt; e -&gt; IO a
</span><a href="../../base-4.18.2.1/src/GHC.IO.html#throwIO/GHC.IO.html#throwIO"><span class="hs-identifier hs-var">throwIO</span></a></span><span> </span><span class="annot"><span class="annottext">GhcException
</span><a href="#local-6989586621681587548"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-460"></span><span>
</span><span id="line-461"></span><span class="annot"><span class="hs-comment">-- | Trace a command (when verbosity level &gt;= 3)</span></span><span>
</span><span id="line-462"></span><span id="local-6989586621681587065"><span class="annot"><a href="GHC.Utils.Error.html#traceCmd"><span class="hs-identifier hs-type">traceCmd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Base.html#String/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Base.html#String/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621681587065"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621681587065"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-463"></span><span id="traceCmd"><span class="annot"><span class="annottext">traceCmd :: forall a. Logger -&gt; String -&gt; String -&gt; IO a -&gt; IO a
</span><a href="GHC.Utils.Error.html#traceCmd"><span class="hs-identifier hs-var hs-var">traceCmd</span></a></span></span><span> </span><span id="local-6989586621681587577"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587577"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681587578"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681587578"><span class="hs-identifier hs-var">phase_name</span></a></span></span><span> </span><span id="local-6989586621681587579"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681587579"><span class="hs-identifier hs-var">cmd_line</span></a></span></span><span> </span><span id="local-6989586621681587580"><span class="annot"><span class="annottext">IO a
</span><a href="#local-6989586621681587580"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-464"></span><span>  </span><span class="annot"><span class="annottext">Logger -&gt; String -&gt; IO ()
</span><a href="GHC.Utils.Error.html#showPass"><span class="hs-identifier hs-var">showPass</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587577"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681587578"><span class="hs-identifier hs-var">phase_name</span></a></span><span>
</span><span id="line-465"></span><span>  </span><span class="hs-keyword">let</span><span>
</span><span id="line-466"></span><span>    </span><span id="local-6989586621681587581"><span class="annot"><span class="annottext">cmd_doc :: SDoc
</span><a href="#local-6989586621681587581"><span class="hs-identifier hs-var hs-var">cmd_doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681587579"><span class="hs-identifier hs-var">cmd_line</span></a></span><span>
</span><span id="line-467"></span><span>    </span><span id="local-6989586621681587582"><span class="annot"><span class="annottext">handle_exn :: IOException -&gt; IO a
</span><a href="#local-6989586621681587582"><span class="hs-identifier hs-var hs-var">handle_exn</span></a></span></span><span> </span><span id="local-6989586621681587583"><span class="annot"><span class="annottext">IOException
</span><a href="#local-6989586621681587583"><span class="hs-identifier hs-var">exn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-468"></span><span>      </span><span class="annot"><span class="annottext">Logger -&gt; Int -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#debugTraceMsg"><span class="hs-identifier hs-var">debugTraceMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587577"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; SDoc
forall doc. IsLine doc =&gt; Char -&gt; doc
</span><a href="GHC.Utils.Outputable.html#char"><span class="hs-identifier hs-var">char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\n'</span></span><span class="hs-special">)</span><span>
</span><span id="line-469"></span><span>      </span><span class="annot"><span class="annottext">Logger -&gt; Int -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#debugTraceMsg"><span class="hs-identifier hs-var">debugTraceMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587577"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Failed:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587581"><span class="hs-identifier hs-var">cmd_doc</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IOException -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../base-4.18.2.1/src/GHC.Show.html#show/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">IOException
</span><a href="#local-6989586621681587583"><span class="hs-identifier hs-var">exn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-470"></span><span>      </span><span class="annot"><span class="annottext">GhcException -&gt; IO a
forall a. GhcException -&gt; IO a
</span><a href="GHC.Utils.Panic.html#throwGhcExceptionIO"><span class="hs-identifier hs-var">throwGhcExceptionIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; GhcException
</span><a href="GHC.Utils.Panic.html#ProgramError"><span class="hs-identifier hs-var">ProgramError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IOException -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../base-4.18.2.1/src/GHC.Show.html#show/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">IOException
</span><a href="#local-6989586621681587583"><span class="hs-identifier hs-var">exn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-471"></span><span>  </span><span class="annot"><span class="annottext">Logger -&gt; Int -&gt; SDoc -&gt; IO ()
</span><a href="GHC.Utils.Error.html#debugTraceMsg"><span class="hs-identifier hs-var">debugTraceMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587577"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681587581"><span class="hs-identifier hs-var">cmd_doc</span></a></span><span>
</span><span id="line-472"></span><span>  </span><span class="annot"><span class="annottext">Logger -&gt; IO ()
</span><a href="GHC.Utils.Logger.html#loggerTraceFlush"><span class="hs-identifier hs-var">loggerTraceFlush</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587577"><span class="hs-identifier hs-var">logger</span></a></span><span>
</span><span id="line-473"></span><span>   </span><span class="hs-comment">-- And run it!</span><span>
</span><span id="line-474"></span><span>  </span><span class="annot"><span class="annottext">IO a
</span><a href="#local-6989586621681587580"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="annot"><span class="annottext">IO a -&gt; (IOException -&gt; IO a) -&gt; IO a
forall a. IO a -&gt; (IOException -&gt; IO a) -&gt; IO a
</span><a href="GHC.Utils.Exception.html#catchIO"><span class="hs-operator hs-var">`catchIO`</span></a></span><span> </span><span class="annot"><span class="annottext">IOException -&gt; IO a
</span><a href="#local-6989586621681587582"><span class="hs-identifier hs-var">handle_exn</span></a></span><span>
</span><span id="line-475"></span><span>
</span><span id="line-476"></span><span>
</span><span id="line-477"></span><span class="annot"><span class="hs-comment">-- * Tracing utility</span></span><span>
</span><span id="line-478"></span><span>
</span><span id="line-479"></span><span class="hs-comment">-- | Record in the eventlog when the given tool command starts</span><span>
</span><span id="line-480"></span><span class="hs-comment">--   and finishes, prepending the given 'String' with</span><span>
</span><span id="line-481"></span><span class="hs-comment">--   \&quot;systool:\&quot;, to easily be able to collect and process</span><span>
</span><span id="line-482"></span><span class="hs-comment">--   all the systool events.</span><span>
</span><span id="line-483"></span><span class="hs-comment">--</span><span>
</span><span id="line-484"></span><span class="hs-comment">--   For those events to show up in the eventlog, you need</span><span>
</span><span id="line-485"></span><span class="hs-comment">--   to run GHC with @-v2@ or @-ddump-timings@.</span><span>
</span><span id="line-486"></span><span id="local-6989586621681587070"><span class="annot"><a href="GHC.Utils.Error.html#traceSystoolCommand"><span class="hs-identifier hs-type">traceSystoolCommand</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Logger.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Base.html#String/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621681587070"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621681587070"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-487"></span><span id="traceSystoolCommand"><span class="annot"><span class="annottext">traceSystoolCommand :: forall a. Logger -&gt; String -&gt; IO a -&gt; IO a
</span><a href="GHC.Utils.Error.html#traceSystoolCommand"><span class="hs-identifier hs-var hs-var">traceSystoolCommand</span></a></span></span><span> </span><span id="local-6989586621681587594"><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587594"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621681587595"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681587595"><span class="hs-identifier hs-var">tool</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Logger -&gt; SDoc -&gt; (a -&gt; ()) -&gt; IO a -&gt; IO a
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Logger -&gt; SDoc -&gt; (a -&gt; ()) -&gt; m a -&gt; m a
</span><a href="GHC.Utils.Error.html#withTiming"><span class="hs-identifier hs-var">withTiming</span></a></span><span> </span><span class="annot"><span class="annottext">Logger
</span><a href="#local-6989586621681587594"><span class="hs-identifier hs-var">logger</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;systool:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681587595"><span class="hs-identifier hs-var">tool</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; a -&gt; ()
forall a b. a -&gt; b -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#const/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-488"></span><span>
</span><span id="line-489"></span><span>
</span><span id="line-490"></span><span class="hs-comment">{- Note [withTiming]
~~~~~~~~~~~~~~~~~~~~

For reference:

  withTiming
    :: MonadIO
    =&gt; m DynFlags   -- how to get the DynFlags
    -&gt; SDoc         -- label for the computation we're timing
    -&gt; (a -&gt; ())    -- how to evaluate the result
    -&gt; PrintTimings -- whether to report the timings when passed
                    -- -v2 or -ddump-timings
    -&gt; m a          -- computation we're timing
    -&gt; m a

withTiming lets you run an action while:

(1) measuring the CPU time it took and reporting that on stderr
    (when PrintTimings is passed),
(2) emitting start/stop events to GHC's event log, with the label
    given as an argument.

Evaluation of the result
------------------------

'withTiming' takes as an argument a function of type 'a -&gt; ()', whose purpose is
to evaluate the result &quot;sufficiently&quot;. A given pass might return an 'm a' for
some monad 'm' and result type 'a', but where the 'a' is complex enough
that evaluating it to WHNF barely scratches its surface and leaves many
complex and time-consuming computations unevaluated. Those would only be
forced by the next pass, and the time needed to evaluate them would be
mis-attributed to that next pass. A more appropriate function would be
one that deeply evaluates the result, so as to assign the time spent doing it
to the pass we're timing.

Note: as hinted at above, the time spent evaluating the application of the
forcing function to the result is included in the timings reported by
'withTiming'.

How we use it
-------------

We measure the time and allocations of various passes in GHC's pipeline by just
wrapping the whole pass with 'withTiming'. This also materializes by having
a label for each pass in the eventlog, where each pass is executed in one go,
during a continuous time window.

However, from STG onwards, the pipeline uses streams to emit groups of
STG/Cmm/etc declarations one at a time, and process them until we get to
assembly code generation. This means that the execution of those last few passes
is interleaved and that we cannot measure how long they take by just wrapping
the whole thing with 'withTiming'. Instead we wrap the processing of each
individual stream element, all along the codegen pipeline, using the appropriate
label for the pass to which this processing belongs. That generates a lot more
data but allows us to get fine-grained timings about all the passes and we can
easily compute totals with tools like ghc-events-analyze (see below).


Producing an eventlog for GHC
-----------------------------

You can produce an eventlog when compiling, for instance, hello.hs by simply
running:

  If GHC was built by Hadrian:
  $ _build/stage1/bin/ghc -ddump-timings hello.hs -o hello +RTS -l

  If GHC was built with Make:
  $ inplace/bin/ghc-stage2 -ddump-timing hello.hs -o hello +RTS -l

You could alternatively use -v&lt;N&gt; (with N &gt;= 2) instead of -ddump-timings,
to ask GHC to report timings (on stderr and the eventlog).

This will write the eventlog to ./ghc.eventlog in both cases. You can then
visualize it or look at the totals for each label by using ghc-events-analyze,
threadscope or any other eventlog consumer. Illustrating with
ghc-events-analyze:

  $ ghc-events-analyze --timed --timed-txt --totals \
                       --start &quot;GHC:started:&quot; --stop &quot;GHC:finished:&quot; \
                       ghc.eventlog

This produces ghc.timed.txt (all event timestamps), ghc.timed.svg (visualisation
of the execution through the various labels) and ghc.totals.txt (total time
spent in each label).

-}</span><span>
</span><span id="line-577"></span></pre></body></html>