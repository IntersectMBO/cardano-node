<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances  #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE GADTs              #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase         #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE StandaloneDeriving #-}</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-comment">-- | This module coverage checks pattern matches. It finds</span><span>
</span><span id="line-8"></span><span class="hs-comment">--</span><span>
</span><span id="line-9"></span><span class="hs-comment">--     * Uncovered patterns, certifying non-exhaustivity</span><span>
</span><span id="line-10"></span><span class="hs-comment">--     * Redundant equations</span><span>
</span><span id="line-11"></span><span class="hs-comment">--     * Equations with an inaccessible right-hand-side</span><span>
</span><span id="line-12"></span><span class="hs-comment">--</span><span>
</span><span id="line-13"></span><span class="hs-comment">-- The algorithm is based on the paper</span><span>
</span><span id="line-14"></span><span class="hs-comment">-- [Lower Your Guards: A Compositional Pattern-Match Coverage Checker&quot;](https://dl.acm.org/doi/abs/10.1145/3408989)</span><span>
</span><span id="line-15"></span><span class="hs-comment">--</span><span>
</span><span id="line-16"></span><span class="hs-comment">-- There is an overview Figure 2 in there that's probably helpful.</span><span>
</span><span id="line-17"></span><span class="hs-comment">-- Here is an overview of how it's implemented, which follows the structure of</span><span>
</span><span id="line-18"></span><span class="hs-comment">-- the entry points such as 'pmcMatches':</span><span>
</span><span id="line-19"></span><span class="hs-comment">--</span><span>
</span><span id="line-20"></span><span class="hs-comment">--  1. Desugar source syntax (like 'LMatch') to guard tree variants (like</span><span>
</span><span id="line-21"></span><span class="hs-comment">--     'GrdMatch'), with one of the desugaring functions (like 'desugarMatch').</span><span>
</span><span id="line-22"></span><span class="hs-comment">--     See &quot;GHC.HsToCore.Pmc.Desugar&quot;.</span><span>
</span><span id="line-23"></span><span class="hs-comment">--     Follows Section 3.1 in the paper.</span><span>
</span><span id="line-24"></span><span class="hs-comment">--  2. Coverage check guard trees (with a function like 'checkMatch') to get a</span><span>
</span><span id="line-25"></span><span class="hs-comment">--     'CheckResult'. See &quot;GHC.HsToCore.Pmc.Check&quot;.</span><span>
</span><span id="line-26"></span><span class="hs-comment">--     The normalised refinement types 'Nabla' are tested for inhabitants by</span><span>
</span><span id="line-27"></span><span class="hs-comment">--     &quot;GHC.HsToCore.Pmc.Solver&quot;.</span><span>
</span><span id="line-28"></span><span class="hs-comment">--  3. Collect redundancy information into a 'CIRB' with a function such</span><span>
</span><span id="line-29"></span><span class="hs-comment">--     as 'cirbsMatch'. Follows the R function from Figure 6 of the paper.</span><span>
</span><span id="line-30"></span><span class="hs-comment">--  4. Format and report uncovered patterns and redundant equations ('CIRB')</span><span>
</span><span id="line-31"></span><span class="hs-comment">--     with 'formatReportWarnings'. Basically job of the G function, plus proper</span><span>
</span><span id="line-32"></span><span class="hs-comment">--     pretty printing of the warnings (Section 5.4 of the paper).</span><span>
</span><span id="line-33"></span><span class="hs-comment">--  5. Return 'Nablas' reaching syntactic sub-components for</span><span>
</span><span id="line-34"></span><span class="hs-comment">--     Note [Long-distance information]. Collected by functions such as</span><span>
</span><span id="line-35"></span><span class="hs-comment">--     'ldiMatch'. See Section 4.1 of the paper.</span><span>
</span><span id="line-36"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">GHC.HsToCore.Pmc</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-37"></span><span>        </span><span class="hs-comment">-- Checking and printing</span><span>
</span><span id="line-38"></span><span>        </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#pmcPatBind"><span class="hs-identifier">pmcPatBind</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#pmcMatches"><span class="hs-identifier">pmcMatches</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#pmcGRHSs"><span class="hs-identifier">pmcGRHSs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>        </span><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html#isMatchContextPmChecked"><span class="hs-identifier">isMatchContextPmChecked</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span>        </span><span class="hs-comment">-- See Note [Long-distance information]</span><span>
</span><span id="line-42"></span><span>        </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#addTyCs"><span class="hs-identifier">addTyCs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#addCoreScrutTmCs"><span class="hs-identifier">addCoreScrutTmCs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#addHsScrutTmCs"><span class="hs-identifier">addHsScrutTmCs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#getLdiNablas"><span class="hs-identifier">getLdiNablas</span></a></span><span>
</span><span id="line-43"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.HsToCore.Errors.Types.html"><span class="hs-identifier">GHC.HsToCore.Errors.Types</span></a></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html"><span class="hs-identifier">GHC.HsToCore.Pmc.Types</span></a></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Utils.html"><span class="hs-identifier">GHC.HsToCore.Pmc.Utils</span></a></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Desugar.html"><span class="hs-identifier">GHC.HsToCore.Pmc.Desugar</span></a></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Check.html"><span class="hs-identifier">GHC.HsToCore.Pmc.Check</span></a></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.html"><span class="hs-identifier">GHC.HsToCore.Pmc.Solver</span></a></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html"><span class="hs-identifier">GHC.Types.Basic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Basic.html#Origin"><span class="hs-identifier">Origin</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.html"><span class="hs-identifier">GHC.Core</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier">CoreExpr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html"><span class="hs-identifier">GHC.Driver.Session</span></a></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Hs.html"><span class="hs-identifier">GHC.Hs</span></a></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Id.html"><span class="hs-identifier">GHC.Types.Id</span></a></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html"><span class="hs-identifier">GHC.Types.SrcLoc</span></a></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.html"><span class="hs-identifier">GHC.Types.Var</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier">EvVar</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html"><span class="hs-identifier">GHC.Tc.Utils.TcType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#evVarPred"><span class="hs-identifier">evVarPred</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html"><span class="hs-identifier">GHC.Tc.Utils.Monad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Utils.Monad.html#updTopFlags"><span class="hs-identifier">updTopFlags</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><a href="GHC.HsToCore.Expr.html"><span class="hs-identifier">GHC.HsToCore.Expr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Expr.html#dsLExpr"><span class="hs-identifier">dsLExpr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.HsToCore.Monad.html"><span class="hs-identifier">GHC.HsToCore.Monad</span></a></span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html"><span class="hs-identifier">GHC.Data.Bag</span></a></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.IOEnv.html"><span class="hs-identifier">GHC.Data.IOEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.IOEnv.html#unsafeInterleaveM"><span class="hs-identifier">unsafeInterleaveM</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html"><span class="hs-identifier">GHC.Data.OrdList</span></a></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Monad.html"><span class="hs-identifier">GHC.Utils.Monad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Monad.html#mapMaybeM"><span class="hs-identifier">mapMaybeM</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Control.Monad.html#/Control.Monad.html"><span class="hs-identifier">Control.Monad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#when/GHC.Base.html#when"><span class="hs-identifier">when</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Foldable.html#forM_/Data.Foldable.html#forM_"><span class="hs-identifier">forM_</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Semigroup.html#/Data.Semigroup.html"><span class="hs-identifier">Data.Semigroup</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Semi</span></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.List.NonEmpty.html#/Data.List.NonEmpty.html"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#NonEmpty/GHC.Base.html#NonEmpty"><span class="hs-identifier">NonEmpty</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.List.NonEmpty.html#/Data.List.NonEmpty.html"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NE</span></span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Coerce.html#/Data.Coerce.html"><span class="hs-identifier">Data.Coerce</span></a></span><span>
</span><span id="line-77"></span><span>
</span><span id="line-78"></span><span class="hs-comment">--</span><span>
</span><span id="line-79"></span><span class="annot"><span class="hs-comment">-- * Exported entry points to the checker</span></span><span>
</span><span id="line-80"></span><span class="hs-comment">--</span><span>
</span><span id="line-81"></span><span>
</span><span id="line-82"></span><span class="hs-comment">-- | A non-empty delta that is initialised from the ambient refinement type</span><span>
</span><span id="line-83"></span><span class="hs-comment">-- capturing long-distance information, or the trivially habitable 'Nablas' if</span><span>
</span><span id="line-84"></span><span class="hs-comment">-- the former is uninhabited.</span><span>
</span><span id="line-85"></span><span class="hs-comment">-- See Note [Recovering from unsatisfiable pattern-matching constraints].</span><span>
</span><span id="line-86"></span><span class="annot"><a href="GHC.HsToCore.Pmc.html#getLdiNablas"><span class="hs-identifier hs-type">getLdiNablas</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Types.html#DsM"><span class="hs-identifier hs-type">DsM</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#Nablas"><span class="hs-identifier hs-type">Nablas</span></a></span><span>
</span><span id="line-87"></span><span id="getLdiNablas"><span class="annot"><span class="annottext">getLdiNablas :: DsM Nablas
</span><a href="GHC.HsToCore.Pmc.html#getLdiNablas"><span class="hs-identifier hs-var hs-var">getLdiNablas</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-88"></span><span>  </span><span id="local-6989586621682082468"><span class="annot"><span class="annottext">Nablas
</span><a href="#local-6989586621682082468"><span class="hs-identifier hs-var">nablas</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DsM Nablas
</span><a href="GHC.HsToCore.Monad.html#getPmNablas"><span class="hs-identifier hs-var">getPmNablas</span></a></span><span>
</span><span id="line-89"></span><span>  </span><span class="annot"><span class="annottext">Nablas -&gt; DsM Bool
</span><a href="GHC.HsToCore.Pmc.Solver.html#isInhabited"><span class="hs-identifier hs-var">isInhabited</span></a></span><span> </span><span class="annot"><span class="annottext">Nablas
</span><a href="#local-6989586621682082468"><span class="hs-identifier hs-var">nablas</span></a></span><span> </span><span class="annot"><span class="annottext">DsM Bool -&gt; (Bool -&gt; DsM Nablas) -&gt; DsM Nablas
forall a b.
IOEnv (Env DsGblEnv DsLclEnv) a
-&gt; (a -&gt; IOEnv (Env DsGblEnv DsLclEnv) b)
-&gt; IOEnv (Env DsGblEnv DsLclEnv) b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%3E%3E%3D/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-90"></span><span>    </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Nablas -&gt; DsM Nablas
forall a. a -&gt; IOEnv (Env DsGblEnv DsLclEnv) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#pure/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Nablas
</span><a href="#local-6989586621682082468"><span class="hs-identifier hs-var">nablas</span></a></span><span>
</span><span id="line-91"></span><span>    </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Nablas -&gt; DsM Nablas
forall a. a -&gt; IOEnv (Env DsGblEnv DsLclEnv) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#pure/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Nablas
</span><a href="GHC.HsToCore.Pmc.Solver.Types.html#initNablas"><span class="hs-identifier hs-var">initNablas</span></a></span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span class="hs-comment">-- | We need to call the Hs desugarer to get the Core of a let-binding or where</span><span>
</span><span id="line-94"></span><span class="hs-comment">-- clause. We don't want to run the coverage checker when doing so! Efficiency</span><span>
</span><span id="line-95"></span><span class="hs-comment">-- is one concern, but also a lack of properly set up long-distance information</span><span>
</span><span id="line-96"></span><span class="hs-comment">-- might trigger warnings that we normally wouldn't emit.</span><span>
</span><span id="line-97"></span><span id="local-6989586621682082168"><span class="annot"><a href="GHC.HsToCore.Pmc.html#noCheckDs"><span class="hs-identifier hs-type">noCheckDs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Types.html#DsM"><span class="hs-identifier hs-type">DsM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682082168"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Types.html#DsM"><span class="hs-identifier hs-type">DsM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682082168"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-98"></span><span id="noCheckDs"><span class="annot"><span class="annottext">noCheckDs :: forall a. DsM a -&gt; DsM a
</span><a href="GHC.HsToCore.Pmc.html#noCheckDs"><span class="hs-identifier hs-var hs-var">noCheckDs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(DynFlags -&gt; DynFlags)
-&gt; TcRnIf DsGblEnv DsLclEnv a -&gt; TcRnIf DsGblEnv DsLclEnv a
forall gbl lcl a.
(DynFlags -&gt; DynFlags) -&gt; TcRnIf gbl lcl a -&gt; TcRnIf gbl lcl a
</span><a href="GHC.Tc.Utils.Monad.html#updTopFlags"><span class="hs-identifier hs-var">updTopFlags</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682082474"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682082474"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(DynFlags -&gt; WarningFlag -&gt; DynFlags)
-&gt; DynFlags -&gt; [WarningFlag] -&gt; DynFlags
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#foldl%27/Data.Foldable.html#foldl%27"><span class="hs-identifier hs-var">foldl'</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; WarningFlag -&gt; DynFlags
</span><a href="GHC.Driver.Session.html#wopt_unset"><span class="hs-identifier hs-var">wopt_unset</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682082474"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">[WarningFlag]
</span><a href="GHC.HsToCore.Pmc.Utils.html#allPmCheckWarnings"><span class="hs-identifier hs-var">allPmCheckWarnings</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span class="annot"><span class="hs-comment">-- | Check a pattern binding (let, where) for exhaustiveness.</span></span><span>
</span><span id="line-101"></span><span class="annot"><a href="GHC.HsToCore.Pmc.html#pmcPatBind"><span class="hs-identifier hs-type">pmcPatBind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Monad.html#DsMatchContext"><span class="hs-identifier hs-type">DsMatchContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Types.html#DsM"><span class="hs-identifier hs-type">DsM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span class="hs-comment">-- See Note [pmcPatBind only checks PatBindRhs]</span><span>
</span><span id="line-103"></span><span id="pmcPatBind"><span class="annot"><span class="annottext">pmcPatBind :: DsMatchContext -&gt; Id -&gt; Pat GhcTc -&gt; DsM ()
</span><a href="GHC.HsToCore.Pmc.html#pmcPatBind"><span class="hs-identifier hs-var hs-var">pmcPatBind</span></a></span></span><span> </span><span id="local-6989586621682082478"><span class="annot"><span class="annottext">ctxt :: DsMatchContext
</span><a href="#local-6989586621682082478"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Monad.html#DsMatchContext"><span class="hs-identifier hs-type">DsMatchContext</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContext GhcRn
</span><a href="Language.Haskell.Syntax.Expr.html#PatBindRhs"><span class="hs-identifier hs-var">PatBindRhs</span></a></span><span> </span><span id="local-6989586621682082481"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682082481"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682082482"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682082482"><span class="hs-identifier hs-var">var</span></a></span></span><span> </span><span id="local-6989586621682082483"><span class="annot"><span class="annottext">Pat GhcTc
</span><a href="#local-6989586621682082483"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-104"></span><span>  </span><span class="hs-glyph">!</span><span id="local-6989586621682082484"><span class="annot"><span class="annottext">Nablas
</span><a href="#local-6989586621682082484"><span class="hs-identifier hs-var">missing</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DsM Nablas
</span><a href="GHC.HsToCore.Pmc.html#getLdiNablas"><span class="hs-identifier hs-var">getLdiNablas</span></a></span><span>
</span><span id="line-105"></span><span>  </span><span id="local-6989586621682082485"><span class="annot"><span class="annottext">PmPatBind Pre
</span><a href="#local-6989586621682082485"><span class="hs-identifier hs-var">pat_bind</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DsM (PmPatBind Pre) -&gt; DsM (PmPatBind Pre)
forall a. DsM a -&gt; DsM a
</span><a href="GHC.HsToCore.Pmc.html#noCheckDs"><span class="hs-identifier hs-var">noCheckDs</span></a></span><span> </span><span class="annot"><span class="annottext">(DsM (PmPatBind Pre) -&gt; DsM (PmPatBind Pre))
-&gt; DsM (PmPatBind Pre) -&gt; DsM (PmPatBind Pre)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; Id -&gt; Pat GhcTc -&gt; DsM (PmPatBind Pre)
</span><a href="GHC.HsToCore.Pmc.Desugar.html#desugarPatBind"><span class="hs-identifier hs-var">desugarPatBind</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682082481"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682082482"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcTc
</span><a href="#local-6989586621682082483"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-106"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; DsM ()
</span><a href="GHC.HsToCore.Pmc.Utils.html#tracePm"><span class="hs-identifier hs-var">tracePm</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;pmcPatBind {&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">DsMatchContext -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">DsMatchContext
</span><a href="#local-6989586621682082478"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Id -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682082482"><span class="hs-identifier hs-var">var</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Pat GhcTc -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcTc
</span><a href="#local-6989586621682082483"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PmPatBind Pre -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">PmPatBind Pre
</span><a href="#local-6989586621682082485"><span class="hs-identifier hs-var">pat_bind</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Nablas -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Nablas
</span><a href="#local-6989586621682082484"><span class="hs-identifier hs-var">missing</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-107"></span><span>  </span><span id="local-6989586621682082490"><span class="annot"><span class="annottext">CheckResult (PmPatBind Post)
</span><a href="#local-6989586621682082490"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CheckAction (PmPatBind Post)
-&gt; Nablas -&gt; DsM (CheckResult (PmPatBind Post))
forall a. CheckAction a -&gt; Nablas -&gt; DsM (CheckResult a)
</span><a href="GHC.HsToCore.Pmc.Check.html#unCA"><span class="hs-identifier hs-var">unCA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PmPatBind Pre -&gt; CheckAction (PmPatBind Post)
</span><a href="GHC.HsToCore.Pmc.Check.html#checkPatBind"><span class="hs-identifier hs-var">checkPatBind</span></a></span><span> </span><span class="annot"><span class="annottext">PmPatBind Pre
</span><a href="#local-6989586621682082485"><span class="hs-identifier hs-var">pat_bind</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Nablas
</span><a href="#local-6989586621682082484"><span class="hs-identifier hs-var">missing</span></a></span><span>
</span><span id="line-108"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; DsM ()
</span><a href="GHC.HsToCore.Pmc.Utils.html#tracePm"><span class="hs-identifier hs-var">tracePm</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;}: &quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nablas -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CheckResult (PmPatBind Post) -&gt; Nablas
forall a. CheckResult a -&gt; Nablas
</span><a href="GHC.HsToCore.Pmc.Types.html#cr_uncov"><span class="hs-identifier hs-var">cr_uncov</span></a></span><span> </span><span class="annot"><span class="annottext">CheckResult (PmPatBind Post)
</span><a href="#local-6989586621682082490"><span class="hs-identifier hs-var">result</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-109"></span><span>  </span><span class="annot"><span class="annottext">FormatReportWarningsMode (PmPatBind Post)
-&gt; DsMatchContext -&gt; [Id] -&gt; CheckResult (PmPatBind Post) -&gt; DsM ()
forall ann.
FormatReportWarningsMode ann
-&gt; DsMatchContext -&gt; [Id] -&gt; CheckResult ann -&gt; DsM ()
</span><a href="GHC.HsToCore.Pmc.html#formatReportWarnings"><span class="hs-identifier hs-var">formatReportWarnings</span></a></span><span> </span><span class="annot"><span class="annottext">FormatReportWarningsMode (PmPatBind Post)
</span><a href="GHC.HsToCore.Pmc.html#ReportPatBind"><span class="hs-identifier hs-var">ReportPatBind</span></a></span><span> </span><span class="annot"><span class="annottext">DsMatchContext
</span><a href="#local-6989586621682082478"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682082482"><span class="hs-identifier hs-var">var</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">CheckResult (PmPatBind Post)
</span><a href="#local-6989586621682082490"><span class="hs-identifier hs-var">result</span></a></span><span>
</span><span id="line-110"></span><span class="annot"><a href="GHC.HsToCore.Pmc.html#pmcPatBind"><span class="hs-identifier hs-var">pmcPatBind</span></a></span><span> </span><span class="annot"><span class="annottext">DsMatchContext
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Id
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Pat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; DsM ()
forall a. a -&gt; IOEnv (Env DsGblEnv DsLclEnv) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#pure/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span class="hs-comment">-- | Exhaustive for guard matches, is used for guards in pattern bindings and</span><span>
</span><span id="line-113"></span><span class="hs-comment">-- in @MultiIf@ expressions. Returns the 'Nablas' covered by the RHSs.</span><span>
</span><span id="line-114"></span><span class="annot"><a href="GHC.HsToCore.Pmc.html#pmcGRHSs"><span class="hs-identifier hs-type">pmcGRHSs</span></a></span><span>
</span><span id="line-115"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsMatchContext"><span class="hs-identifier hs-type">HsMatchContext</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>         </span><span class="annot"><span class="hs-comment">-- ^ Match context, for warning messages</span></span><span>
</span><span id="line-116"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHSs"><span class="hs-identifier hs-type">GRHSs</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>  </span><span class="annot"><span class="hs-comment">-- ^ The GRHSs to check</span></span><span>
</span><span id="line-117"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Types.html#DsM"><span class="hs-identifier hs-type">DsM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#NonEmpty/GHC.Base.html#NonEmpty"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#Nablas"><span class="hs-identifier hs-type">Nablas</span></a></span><span class="hs-special">)</span><span>        </span><span class="hs-comment">-- ^ Covered 'Nablas' for each RHS, for long</span><span>
</span><span id="line-118"></span><span>                                  </span><span class="hs-comment">--   distance info</span><span>
</span><span id="line-119"></span><span id="pmcGRHSs"><span class="annot"><span class="annottext">pmcGRHSs :: HsMatchContext GhcRn
-&gt; GRHSs GhcTc (LHsExpr GhcTc) -&gt; DsM (NonEmpty Nablas)
</span><a href="GHC.HsToCore.Pmc.html#pmcGRHSs"><span class="hs-identifier hs-var hs-var">pmcGRHSs</span></a></span></span><span> </span><span id="local-6989586621682082495"><span class="annot"><span class="annottext">HsMatchContext GhcRn
</span><a href="#local-6989586621682082495"><span class="hs-identifier hs-var">hs_ctxt</span></a></span></span><span> </span><span id="local-6989586621682082496"><span class="annot"><span class="annottext">guards :: GRHSs GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621682082496"><span class="hs-identifier hs-var">guards</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#GRHSs"><span class="hs-identifier hs-type">GRHSs</span></a></span><span> </span><span class="annot"><span class="annottext">XCGRHSs GhcTc (LHsExpr GhcTc)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682082498"><span class="annot"><span class="annottext">[LGRHS GhcTc (LHsExpr GhcTc)]
</span><a href="#local-6989586621682082498"><span class="hs-identifier hs-var">grhss</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsLocalBinds GhcTc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-120"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682082499"><span class="annot"><span class="annottext">combined_loc :: SrcSpan
</span><a href="#local-6989586621682082499"><span class="hs-identifier hs-var hs-var">combined_loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SrcSpan -&gt; SrcSpan -&gt; SrcSpan) -&gt; [SrcSpan] -&gt; SrcSpan
forall a. (a -&gt; a -&gt; a) -&gt; [a] -&gt; a
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; a -&gt; a) -&gt; t a -&gt; a
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#foldl1/Data.Foldable.html#foldl1"><span class="hs-identifier hs-var">foldl1</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#combineSrcSpans"><span class="hs-identifier hs-var">combineSrcSpans</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(GenLocated
   (SrcSpanAnn' (EpAnn NoEpAnns))
   (GRHS GhcTc (GenLocated SrcSpanAnnA (HsExpr GhcTc)))
 -&gt; SrcSpan)
-&gt; [GenLocated
      (SrcSpanAnn' (EpAnn NoEpAnns))
      (GRHS GhcTc (GenLocated SrcSpanAnnA (HsExpr GhcTc)))]
-&gt; [SrcSpan]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated
  (SrcSpanAnn' (EpAnn NoEpAnns))
  (GRHS GhcTc (GenLocated SrcSpanAnnA (HsExpr GhcTc)))
-&gt; SrcSpan
forall a e. GenLocated (SrcSpanAnn' a) e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">[LGRHS GhcTc (LHsExpr GhcTc)]
[GenLocated
   (SrcSpanAnn' (EpAnn NoEpAnns))
   (GRHS GhcTc (GenLocated SrcSpanAnnA (HsExpr GhcTc)))]
</span><a href="#local-6989586621682082498"><span class="hs-identifier hs-var">grhss</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-121"></span><span>      </span><span id="local-6989586621682082503"><span class="annot"><span class="annottext">ctxt :: DsMatchContext
</span><a href="#local-6989586621682082503"><span class="hs-identifier hs-var hs-var">ctxt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsMatchContext GhcRn -&gt; SrcSpan -&gt; DsMatchContext
</span><a href="GHC.HsToCore.Monad.html#DsMatchContext"><span class="hs-identifier hs-var">DsMatchContext</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContext GhcRn
</span><a href="#local-6989586621682082495"><span class="hs-identifier hs-var">hs_ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682082499"><span class="hs-identifier hs-var">combined_loc</span></a></span><span>
</span><span id="line-122"></span><span>  </span><span class="hs-glyph">!</span><span id="local-6989586621682082504"><span class="annot"><span class="annottext">Nablas
</span><a href="#local-6989586621682082504"><span class="hs-identifier hs-var">missing</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DsM Nablas
</span><a href="GHC.HsToCore.Pmc.html#getLdiNablas"><span class="hs-identifier hs-var">getLdiNablas</span></a></span><span>
</span><span id="line-123"></span><span>  </span><span id="local-6989586621682082505"><span class="annot"><span class="annottext">PmGRHSs Pre
</span><a href="#local-6989586621682082505"><span class="hs-identifier hs-var">matches</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DsM (PmGRHSs Pre) -&gt; DsM (PmGRHSs Pre)
forall a. DsM a -&gt; DsM a
</span><a href="GHC.HsToCore.Pmc.html#noCheckDs"><span class="hs-identifier hs-var">noCheckDs</span></a></span><span> </span><span class="annot"><span class="annottext">(DsM (PmGRHSs Pre) -&gt; DsM (PmGRHSs Pre))
-&gt; DsM (PmGRHSs Pre) -&gt; DsM (PmGRHSs Pre)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SDoc -&gt; GRHSs GhcTc (LHsExpr GhcTc) -&gt; DsM (PmGRHSs Pre)
</span><a href="GHC.HsToCore.Pmc.Desugar.html#desugarGRHSs"><span class="hs-identifier hs-var">desugarGRHSs</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682082499"><span class="hs-identifier hs-var">combined_loc</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span> </span><span class="annot"><span class="annottext">GRHSs GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621682082496"><span class="hs-identifier hs-var">guards</span></a></span><span>
</span><span id="line-124"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; DsM ()
</span><a href="GHC.HsToCore.Pmc.Utils.html#tracePm"><span class="hs-identifier hs-var">tracePm</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;pmcGRHSs&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">DsMatchContext -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">DsMatchContext
</span><a href="#local-6989586621682082503"><span class="hs-identifier hs-var">ctxt</span></a></span><span>
</span><span id="line-125"></span><span>                                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Guards:&quot;</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-126"></span><span>                                </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span>
</span><span id="line-127"></span><span>                                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsMatchContext GhcRn
-&gt; GRHSs GhcTc (GenLocated SrcSpanAnnA (HsExpr GhcTc)) -&gt; SDoc
forall (idR :: Pass) body passL.
(OutputableBndrId idR, Outputable body) =&gt;
HsMatchContext passL -&gt; GRHSs (GhcPass idR) body -&gt; SDoc
</span><a href="GHC.Hs.Expr.html#pprGRHSs"><span class="hs-identifier hs-var">pprGRHSs</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContext GhcRn
</span><a href="#local-6989586621682082495"><span class="hs-identifier hs-var">hs_ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">GRHSs GhcTc (LHsExpr GhcTc)
GRHSs GhcTc (GenLocated SrcSpanAnnA (HsExpr GhcTc))
</span><a href="#local-6989586621682082496"><span class="hs-identifier hs-var">guards</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">Nablas -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Nablas
</span><a href="#local-6989586621682082504"><span class="hs-identifier hs-var">missing</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-128"></span><span>  </span><span id="local-6989586621682082512"><span class="annot"><span class="annottext">CheckResult (PmGRHSs Post)
</span><a href="#local-6989586621682082512"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CheckAction (PmGRHSs Post)
-&gt; Nablas -&gt; DsM (CheckResult (PmGRHSs Post))
forall a. CheckAction a -&gt; Nablas -&gt; DsM (CheckResult a)
</span><a href="GHC.HsToCore.Pmc.Check.html#unCA"><span class="hs-identifier hs-var">unCA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PmGRHSs Pre -&gt; CheckAction (PmGRHSs Post)
</span><a href="GHC.HsToCore.Pmc.Check.html#checkGRHSs"><span class="hs-identifier hs-var">checkGRHSs</span></a></span><span> </span><span class="annot"><span class="annottext">PmGRHSs Pre
</span><a href="#local-6989586621682082505"><span class="hs-identifier hs-var">matches</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Nablas
</span><a href="#local-6989586621682082504"><span class="hs-identifier hs-var">missing</span></a></span><span>
</span><span id="line-129"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; DsM ()
</span><a href="GHC.HsToCore.Pmc.Utils.html#tracePm"><span class="hs-identifier hs-var">tracePm</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;}: &quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nablas -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CheckResult (PmGRHSs Post) -&gt; Nablas
forall a. CheckResult a -&gt; Nablas
</span><a href="GHC.HsToCore.Pmc.Types.html#cr_uncov"><span class="hs-identifier hs-var">cr_uncov</span></a></span><span> </span><span class="annot"><span class="annottext">CheckResult (PmGRHSs Post)
</span><a href="#local-6989586621682082512"><span class="hs-identifier hs-var">result</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span>  </span><span class="annot"><span class="annottext">FormatReportWarningsMode (PmGRHSs Post)
-&gt; DsMatchContext -&gt; [Id] -&gt; CheckResult (PmGRHSs Post) -&gt; DsM ()
forall ann.
FormatReportWarningsMode ann
-&gt; DsMatchContext -&gt; [Id] -&gt; CheckResult ann -&gt; DsM ()
</span><a href="GHC.HsToCore.Pmc.html#formatReportWarnings"><span class="hs-identifier hs-var">formatReportWarnings</span></a></span><span> </span><span class="annot"><span class="annottext">FormatReportWarningsMode (PmGRHSs Post)
</span><a href="GHC.HsToCore.Pmc.html#ReportGRHSs"><span class="hs-identifier hs-var">ReportGRHSs</span></a></span><span> </span><span class="annot"><span class="annottext">DsMatchContext
</span><a href="#local-6989586621682082503"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">CheckResult (PmGRHSs Post)
</span><a href="#local-6989586621682082512"><span class="hs-identifier hs-var">result</span></a></span><span>
</span><span id="line-131"></span><span>  </span><span class="annot"><span class="annottext">NonEmpty Nablas -&gt; DsM (NonEmpty Nablas)
forall a. a -&gt; IOEnv (Env DsGblEnv DsLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PmGRHSs Post -&gt; NonEmpty Nablas
</span><a href="GHC.HsToCore.Pmc.html#ldiGRHSs"><span class="hs-identifier hs-var">ldiGRHSs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CheckResult (PmGRHSs Post) -&gt; PmGRHSs Post
forall a. CheckResult a -&gt; a
</span><a href="GHC.HsToCore.Pmc.Types.html#cr_ret"><span class="hs-identifier hs-var">cr_ret</span></a></span><span> </span><span class="annot"><span class="annottext">CheckResult (PmGRHSs Post)
</span><a href="#local-6989586621682082512"><span class="hs-identifier hs-var">result</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span>
</span><span id="line-133"></span><span class="hs-comment">-- | Check a list of syntactic 'Match'es (part of case, functions, etc.), each</span><span>
</span><span id="line-134"></span><span class="hs-comment">-- with a 'Pat' and one or more 'GRHSs':</span><span>
</span><span id="line-135"></span><span class="hs-comment">--</span><span>
</span><span id="line-136"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-137"></span><span class="hs-comment">--   f x y | x == y    = 1   -- match on x and y with two guarded RHSs</span><span>
</span><span id="line-138"></span><span class="hs-comment">--         | otherwise = 2</span><span>
</span><span id="line-139"></span><span class="hs-comment">--   f _ _             = 3   -- clause with a single, un-guarded RHS</span><span>
</span><span id="line-140"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-141"></span><span class="hs-comment">--</span><span>
</span><span id="line-142"></span><span class="hs-comment">-- Returns one non-empty 'Nablas' for 1.) each pattern of a 'Match' and 2.)</span><span>
</span><span id="line-143"></span><span class="hs-comment">-- each of a 'Match'es 'GRHS' for Note [Long-distance information].</span><span>
</span><span id="line-144"></span><span class="hs-comment">--</span><span>
</span><span id="line-145"></span><span class="hs-comment">-- Special case: When there are /no matches/, then the function assumes it</span><span>
</span><span id="line-146"></span><span class="hs-comment">-- checks an @-XEmptyCase@ with only a single match variable.</span><span>
</span><span id="line-147"></span><span class="hs-comment">-- See Note [Checking EmptyCase].</span><span>
</span><span id="line-148"></span><span class="annot"><a href="GHC.HsToCore.Pmc.html#pmcMatches"><span class="hs-identifier hs-type">pmcMatches</span></a></span><span>
</span><span id="line-149"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Monad.html#DsMatchContext"><span class="hs-identifier hs-type">DsMatchContext</span></a></span><span>                  </span><span class="annot"><span class="hs-comment">-- ^ Match context, for warnings messages</span></span><span>
</span><span id="line-150"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span>                            </span><span class="annot"><span class="hs-comment">-- ^ Match variables, i.e. x and y above</span></span><span>
</span><span id="line-151"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LMatch"><span class="hs-identifier hs-type">LMatch</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>  </span><span class="annot"><span class="hs-comment">-- ^ List of matches</span></span><span>
</span><span id="line-152"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Types.html#DsM"><span class="hs-identifier hs-type">DsM</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#Nablas"><span class="hs-identifier hs-type">Nablas</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#NonEmpty/GHC.Base.html#NonEmpty"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#Nablas"><span class="hs-identifier hs-type">Nablas</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- ^ One covered 'Nablas' per Match and</span><span>
</span><span id="line-153"></span><span>                                     </span><span class="hs-comment">--   GRHS, for long distance info.</span><span>
</span><span id="line-154"></span><span id="pmcMatches"><span class="annot"><span class="annottext">pmcMatches :: DsMatchContext
-&gt; [Id]
-&gt; [LMatch GhcTc (LHsExpr GhcTc)]
-&gt; DsM [(Nablas, NonEmpty Nablas)]
</span><a href="GHC.HsToCore.Pmc.html#pmcMatches"><span class="hs-identifier hs-var hs-var">pmcMatches</span></a></span></span><span> </span><span id="local-6989586621682082519"><span class="annot"><span class="annottext">DsMatchContext
</span><a href="#local-6989586621682082519"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621682082520"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682082520"><span class="hs-identifier hs-var">vars</span></a></span></span><span> </span><span id="local-6989586621682082521"><span class="annot"><span class="annottext">[LMatch GhcTc (LHsExpr GhcTc)]
</span><a href="#local-6989586621682082521"><span class="hs-identifier hs-var">matches</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-pragma">{-# SCC</span><span> </span><span class="hs-pragma">&quot;pmcMatches&quot;</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-155"></span><span>  </span><span class="hs-comment">-- We have to force @missing@ before printing out the trace message,</span><span>
</span><span id="line-156"></span><span>  </span><span class="hs-comment">-- otherwise we get interleaved output from the solver. This function</span><span>
</span><span id="line-157"></span><span>  </span><span class="hs-comment">-- should be strict in @missing@ anyway!</span><span>
</span><span id="line-158"></span><span>  </span><span class="hs-glyph">!</span><span id="local-6989586621682082522"><span class="annot"><span class="annottext">Nablas
</span><a href="#local-6989586621682082522"><span class="hs-identifier hs-var">missing</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DsM Nablas
</span><a href="GHC.HsToCore.Pmc.html#getLdiNablas"><span class="hs-identifier hs-var">getLdiNablas</span></a></span><span>
</span><span id="line-159"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; DsM ()
</span><a href="GHC.HsToCore.Pmc.Utils.html#tracePm"><span class="hs-identifier hs-var">tracePm</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;pmcMatches {&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; DsM ()) -&gt; SDoc -&gt; DsM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-160"></span><span>          </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">DsMatchContext -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">DsMatchContext
</span><a href="#local-6989586621682082519"><span class="hs-identifier hs-var">ctxt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Id] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682082520"><span class="hs-identifier hs-var">vars</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Matches:&quot;</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span>               </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span>
</span><span id="line-162"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(GenLocated
   SrcSpanAnnA (Match GhcTc (GenLocated SrcSpanAnnA (HsExpr GhcTc)))
 -&gt; SDoc)
-&gt; [GenLocated
      SrcSpanAnnA (Match GhcTc (GenLocated SrcSpanAnnA (HsExpr GhcTc)))]
-&gt; [SDoc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated
  SrcSpanAnnA (Match GhcTc (GenLocated SrcSpanAnnA (HsExpr GhcTc)))
-&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[LMatch GhcTc (LHsExpr GhcTc)]
[GenLocated
   SrcSpanAnnA (Match GhcTc (GenLocated SrcSpanAnnA (HsExpr GhcTc)))]
</span><a href="#local-6989586621682082521"><span class="hs-identifier hs-var">matches</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">Nablas -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Nablas
</span><a href="#local-6989586621682082522"><span class="hs-identifier hs-var">missing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-163"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA (Match GhcTc (GenLocated SrcSpanAnnA (HsExpr GhcTc)))]
-&gt; Maybe
     (NonEmpty
        (GenLocated
           SrcSpanAnnA (Match GhcTc (GenLocated SrcSpanAnnA (HsExpr GhcTc)))))
forall a. [a] -&gt; Maybe (NonEmpty a)
</span><a href="../../base-4.18.3.0/src/Data.List.NonEmpty.html#nonEmpty/Data.List.NonEmpty.html#nonEmpty"><span class="hs-identifier hs-var">NE.nonEmpty</span></a></span><span> </span><span class="annot"><span class="annottext">[LMatch GhcTc (LHsExpr GhcTc)]
[GenLocated
   SrcSpanAnnA (Match GhcTc (GenLocated SrcSpanAnnA (HsExpr GhcTc)))]
</span><a href="#local-6989586621682082521"><span class="hs-identifier hs-var">matches</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-164"></span><span>    </span><span class="annot"><span class="annottext">Maybe
  (NonEmpty
     (GenLocated
        SrcSpanAnnA (Match GhcTc (GenLocated SrcSpanAnnA (HsExpr GhcTc)))))
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-165"></span><span>      </span><span class="hs-comment">-- This must be an -XEmptyCase. See Note [Checking EmptyCase]</span><span>
</span><span id="line-166"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682082524"><span class="annot"><span class="annottext">var :: Id
</span><a href="#local-6989586621682082524"><span class="hs-identifier hs-var hs-var">var</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Id] -&gt; Id
forall a. [a] -&gt; a
</span><a href="GHC.Utils.Misc.html#only"><span class="hs-identifier hs-var">only</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682082520"><span class="hs-identifier hs-var">vars</span></a></span><span>
</span><span id="line-167"></span><span>      </span><span id="local-6989586621682082526"><span class="annot"><span class="annottext">PmEmptyCase
</span><a href="#local-6989586621682082526"><span class="hs-identifier hs-var">empty_case</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DsM PmEmptyCase -&gt; DsM PmEmptyCase
forall a. DsM a -&gt; DsM a
</span><a href="GHC.HsToCore.Pmc.html#noCheckDs"><span class="hs-identifier hs-var">noCheckDs</span></a></span><span> </span><span class="annot"><span class="annottext">(DsM PmEmptyCase -&gt; DsM PmEmptyCase)
-&gt; DsM PmEmptyCase -&gt; DsM PmEmptyCase
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; DsM PmEmptyCase
</span><a href="GHC.HsToCore.Pmc.Desugar.html#desugarEmptyCase"><span class="hs-identifier hs-var">desugarEmptyCase</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682082524"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-168"></span><span>      </span><span id="local-6989586621682082528"><span class="annot"><span class="annottext">CheckResult PmEmptyCase
</span><a href="#local-6989586621682082528"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CheckAction PmEmptyCase -&gt; Nablas -&gt; DsM (CheckResult PmEmptyCase)
forall a. CheckAction a -&gt; Nablas -&gt; DsM (CheckResult a)
</span><a href="GHC.HsToCore.Pmc.Check.html#unCA"><span class="hs-identifier hs-var">unCA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PmEmptyCase -&gt; CheckAction PmEmptyCase
</span><a href="GHC.HsToCore.Pmc.Check.html#checkEmptyCase"><span class="hs-identifier hs-var">checkEmptyCase</span></a></span><span> </span><span class="annot"><span class="annottext">PmEmptyCase
</span><a href="#local-6989586621682082526"><span class="hs-identifier hs-var">empty_case</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Nablas
</span><a href="#local-6989586621682082522"><span class="hs-identifier hs-var">missing</span></a></span><span>
</span><span id="line-169"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; DsM ()
</span><a href="GHC.HsToCore.Pmc.Utils.html#tracePm"><span class="hs-identifier hs-var">tracePm</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;}: &quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nablas -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CheckResult PmEmptyCase -&gt; Nablas
forall a. CheckResult a -&gt; Nablas
</span><a href="GHC.HsToCore.Pmc.Types.html#cr_uncov"><span class="hs-identifier hs-var">cr_uncov</span></a></span><span> </span><span class="annot"><span class="annottext">CheckResult PmEmptyCase
</span><a href="#local-6989586621682082528"><span class="hs-identifier hs-var">result</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-170"></span><span>      </span><span class="annot"><span class="annottext">FormatReportWarningsMode PmEmptyCase
-&gt; DsMatchContext -&gt; [Id] -&gt; CheckResult PmEmptyCase -&gt; DsM ()
forall ann.
FormatReportWarningsMode ann
-&gt; DsMatchContext -&gt; [Id] -&gt; CheckResult ann -&gt; DsM ()
</span><a href="GHC.HsToCore.Pmc.html#formatReportWarnings"><span class="hs-identifier hs-var">formatReportWarnings</span></a></span><span> </span><span class="annot"><span class="annottext">FormatReportWarningsMode PmEmptyCase
</span><a href="GHC.HsToCore.Pmc.html#ReportEmptyCase"><span class="hs-identifier hs-var">ReportEmptyCase</span></a></span><span> </span><span class="annot"><span class="annottext">DsMatchContext
</span><a href="#local-6989586621682082519"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682082520"><span class="hs-identifier hs-var">vars</span></a></span><span> </span><span class="annot"><span class="annottext">CheckResult PmEmptyCase
</span><a href="#local-6989586621682082528"><span class="hs-identifier hs-var">result</span></a></span><span>
</span><span id="line-171"></span><span>      </span><span class="annot"><span class="annottext">[(Nablas, NonEmpty Nablas)] -&gt; DsM [(Nablas, NonEmpty Nablas)]
forall a. a -&gt; IOEnv (Env DsGblEnv DsLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-172"></span><span>    </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621682082531"><span class="annot"><span class="annottext">NonEmpty
  (GenLocated
     SrcSpanAnnA (Match GhcTc (GenLocated SrcSpanAnnA (HsExpr GhcTc))))
</span><a href="#local-6989586621682082531"><span class="hs-identifier hs-var">matches</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-173"></span><span>      </span><span id="local-6989586621682082532"><span class="annot"><span class="annottext">PmMatchGroup Pre
</span><a href="#local-6989586621682082532"><span class="hs-identifier hs-var">matches</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-pragma">{-# SCC</span><span> </span><span class="hs-pragma">&quot;desugarMatches&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-174"></span><span>                 </span><span class="annot"><span class="annottext">DsM (PmMatchGroup Pre) -&gt; DsM (PmMatchGroup Pre)
forall a. DsM a -&gt; DsM a
</span><a href="GHC.HsToCore.Pmc.html#noCheckDs"><span class="hs-identifier hs-var">noCheckDs</span></a></span><span> </span><span class="annot"><span class="annottext">(DsM (PmMatchGroup Pre) -&gt; DsM (PmMatchGroup Pre))
-&gt; DsM (PmMatchGroup Pre) -&gt; DsM (PmMatchGroup Pre)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
-&gt; NonEmpty (LMatch GhcTc (LHsExpr GhcTc))
-&gt; DsM (PmMatchGroup Pre)
</span><a href="GHC.HsToCore.Pmc.Desugar.html#desugarMatches"><span class="hs-identifier hs-var">desugarMatches</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682082520"><span class="hs-identifier hs-var">vars</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (LMatch GhcTc (LHsExpr GhcTc))
NonEmpty
  (GenLocated
     SrcSpanAnnA (Match GhcTc (GenLocated SrcSpanAnnA (HsExpr GhcTc))))
</span><a href="#local-6989586621682082531"><span class="hs-identifier hs-var">matches</span></a></span><span>
</span><span id="line-175"></span><span>      </span><span id="local-6989586621682082534"><span class="annot"><span class="annottext">CheckResult (PmMatchGroup Post)
</span><a href="#local-6989586621682082534"><span class="hs-identifier hs-var">result</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-pragma">{-# SCC</span><span> </span><span class="hs-pragma">&quot;checkMatchGroup&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-176"></span><span>                 </span><span class="annot"><span class="annottext">CheckAction (PmMatchGroup Post)
-&gt; Nablas -&gt; DsM (CheckResult (PmMatchGroup Post))
forall a. CheckAction a -&gt; Nablas -&gt; DsM (CheckResult a)
</span><a href="GHC.HsToCore.Pmc.Check.html#unCA"><span class="hs-identifier hs-var">unCA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PmMatchGroup Pre -&gt; CheckAction (PmMatchGroup Post)
</span><a href="GHC.HsToCore.Pmc.Check.html#checkMatchGroup"><span class="hs-identifier hs-var">checkMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">PmMatchGroup Pre
</span><a href="#local-6989586621682082532"><span class="hs-identifier hs-var">matches</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Nablas
</span><a href="#local-6989586621682082522"><span class="hs-identifier hs-var">missing</span></a></span><span>
</span><span id="line-177"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; DsM ()
</span><a href="GHC.HsToCore.Pmc.Utils.html#tracePm"><span class="hs-identifier hs-var">tracePm</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;}: &quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Nablas -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CheckResult (PmMatchGroup Post) -&gt; Nablas
forall a. CheckResult a -&gt; Nablas
</span><a href="GHC.HsToCore.Pmc.Types.html#cr_uncov"><span class="hs-identifier hs-var">cr_uncov</span></a></span><span> </span><span class="annot"><span class="annottext">CheckResult (PmMatchGroup Post)
</span><a href="#local-6989586621682082534"><span class="hs-identifier hs-var">result</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-178"></span><span>      </span><span class="hs-pragma">{-# SCC</span><span> </span><span class="hs-pragma">&quot;formatReportWarnings&quot;</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><span class="annottext">FormatReportWarningsMode (PmMatchGroup Post)
-&gt; DsMatchContext
-&gt; [Id]
-&gt; CheckResult (PmMatchGroup Post)
-&gt; DsM ()
forall ann.
FormatReportWarningsMode ann
-&gt; DsMatchContext -&gt; [Id] -&gt; CheckResult ann -&gt; DsM ()
</span><a href="GHC.HsToCore.Pmc.html#formatReportWarnings"><span class="hs-identifier hs-var">formatReportWarnings</span></a></span><span> </span><span class="annot"><span class="annottext">FormatReportWarningsMode (PmMatchGroup Post)
</span><a href="GHC.HsToCore.Pmc.html#ReportMatchGroup"><span class="hs-identifier hs-var">ReportMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">DsMatchContext
</span><a href="#local-6989586621682082519"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682082520"><span class="hs-identifier hs-var">vars</span></a></span><span> </span><span class="annot"><span class="annottext">CheckResult (PmMatchGroup Post)
</span><a href="#local-6989586621682082534"><span class="hs-identifier hs-var">result</span></a></span><span>
</span><span id="line-179"></span><span>      </span><span class="annot"><span class="annottext">[(Nablas, NonEmpty Nablas)] -&gt; DsM [(Nablas, NonEmpty Nablas)]
forall a. a -&gt; IOEnv (Env DsGblEnv DsLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty (Nablas, NonEmpty Nablas) -&gt; [(Nablas, NonEmpty Nablas)]
forall a. NonEmpty a -&gt; [a]
</span><a href="../../base-4.18.3.0/src/Data.List.NonEmpty.html#toList/Data.List.NonEmpty.html#toList"><span class="hs-identifier hs-var">NE.toList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PmMatchGroup Post -&gt; NonEmpty (Nablas, NonEmpty Nablas)
</span><a href="GHC.HsToCore.Pmc.html#ldiMatchGroup"><span class="hs-identifier hs-var">ldiMatchGroup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CheckResult (PmMatchGroup Post) -&gt; PmMatchGroup Post
forall a. CheckResult a -&gt; a
</span><a href="GHC.HsToCore.Pmc.Types.html#cr_ret"><span class="hs-identifier hs-var">cr_ret</span></a></span><span> </span><span class="annot"><span class="annottext">CheckResult (PmMatchGroup Post)
</span><a href="#local-6989586621682082534"><span class="hs-identifier hs-var">result</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-180"></span><span>
</span><span id="line-181"></span><span class="hs-comment">{- Note [pmcPatBind only checks PatBindRhs]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
@pmcPatBind@'s sole purpose is to check vanilla pattern bindings, like
@x :: Int; Just x = e@, which is in a @PatBindRhs@ context.
But its caller is also called for individual pattern guards in a @StmtCtxt@.
For example, both pattern guards in @f x y | True &lt;- x, False &lt;- y = ...@ will
go through this function. It makes no sense to do coverage checking there:
  * Pattern guards may well fail. Fall-through is not an unrecoverable panic,
    but rather behavior the programmer expects, so inexhaustivity should not be
    reported.
  * Redundancy is already reported for the whole GRHS via one of the other
    exported coverage checking functions. Also reporting individual redundant
    guards is... redundant. See #17646.
Note that we can't just omit checking of @StmtCtxt@ altogether (by adjusting
'isMatchContextPmChecked'), because that affects the other checking functions,
too.
-}</span><span>
</span><span id="line-198"></span><span>
</span><span id="line-199"></span><span class="hs-comment">--</span><span>
</span><span id="line-200"></span><span class="annot"><span class="hs-comment">-- * Collecting long-distance information</span></span><span>
</span><span id="line-201"></span><span class="hs-comment">--</span><span>
</span><span id="line-202"></span><span>
</span><span id="line-203"></span><span class="annot"><a href="GHC.HsToCore.Pmc.html#ldiMatchGroup"><span class="hs-identifier hs-type">ldiMatchGroup</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#PmMatchGroup"><span class="hs-identifier hs-type">PmMatchGroup</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#Post"><span class="hs-identifier hs-type">Post</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#NonEmpty/GHC.Base.html#NonEmpty"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#Nablas"><span class="hs-identifier hs-type">Nablas</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#NonEmpty/GHC.Base.html#NonEmpty"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#Nablas"><span class="hs-identifier hs-type">Nablas</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-204"></span><span id="ldiMatchGroup"><span class="annot"><span class="annottext">ldiMatchGroup :: PmMatchGroup Post -&gt; NonEmpty (Nablas, NonEmpty Nablas)
</span><a href="GHC.HsToCore.Pmc.html#ldiMatchGroup"><span class="hs-identifier hs-var hs-var">ldiMatchGroup</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#PmMatchGroup"><span class="hs-identifier hs-type">PmMatchGroup</span></a></span><span> </span><span id="local-6989586621682082540"><span class="annot"><span class="annottext">NonEmpty (PmMatch Post)
</span><a href="#local-6989586621682082540"><span class="hs-identifier hs-var">matches</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PmMatch Post -&gt; (Nablas, NonEmpty Nablas)
</span><a href="GHC.HsToCore.Pmc.html#ldiMatch"><span class="hs-identifier hs-var">ldiMatch</span></a></span><span> </span><span class="annot"><span class="annottext">(PmMatch Post -&gt; (Nablas, NonEmpty Nablas))
-&gt; NonEmpty (PmMatch Post) -&gt; NonEmpty (Nablas, NonEmpty Nablas)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/Data.Functor.html#%3C%24%3E/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (PmMatch Post)
</span><a href="#local-6989586621682082540"><span class="hs-identifier hs-var">matches</span></a></span><span>
</span><span id="line-205"></span><span>
</span><span id="line-206"></span><span class="annot"><a href="GHC.HsToCore.Pmc.html#ldiMatch"><span class="hs-identifier hs-type">ldiMatch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#PmMatch"><span class="hs-identifier hs-type">PmMatch</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#Post"><span class="hs-identifier hs-type">Post</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#Nablas"><span class="hs-identifier hs-type">Nablas</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#NonEmpty/GHC.Base.html#NonEmpty"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#Nablas"><span class="hs-identifier hs-type">Nablas</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-207"></span><span id="ldiMatch"><span class="annot"><span class="annottext">ldiMatch :: PmMatch Post -&gt; (Nablas, NonEmpty Nablas)
</span><a href="GHC.HsToCore.Pmc.html#ldiMatch"><span class="hs-identifier hs-var hs-var">ldiMatch</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#PmMatch"><span class="hs-identifier hs-type">PmMatch</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pm_pats :: forall p. PmMatch p -&gt; p
</span><a href="GHC.HsToCore.Pmc.Types.html#pm_pats"><span class="hs-identifier hs-var">pm_pats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682082544"><span class="annot"><span class="annottext">Post
</span><a href="#local-6989586621682082544"><span class="hs-identifier hs-var">red</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pm_grhss :: forall p. PmMatch p -&gt; PmGRHSs p
</span><a href="GHC.HsToCore.Pmc.Types.html#pm_grhss"><span class="hs-identifier hs-var">pm_grhss</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682082546"><span class="annot"><span class="annottext">PmGRHSs Post
</span><a href="#local-6989586621682082546"><span class="hs-identifier hs-var">grhss</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-208"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Post -&gt; Nablas
</span><a href="GHC.HsToCore.Pmc.Types.html#rs_cov"><span class="hs-identifier hs-var">rs_cov</span></a></span><span> </span><span class="annot"><span class="annottext">Post
</span><a href="#local-6989586621682082544"><span class="hs-identifier hs-var">red</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PmGRHSs Post -&gt; NonEmpty Nablas
</span><a href="GHC.HsToCore.Pmc.html#ldiGRHSs"><span class="hs-identifier hs-var">ldiGRHSs</span></a></span><span> </span><span class="annot"><span class="annottext">PmGRHSs Post
</span><a href="#local-6989586621682082546"><span class="hs-identifier hs-var">grhss</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-209"></span><span>
</span><span id="line-210"></span><span class="annot"><a href="GHC.HsToCore.Pmc.html#ldiGRHSs"><span class="hs-identifier hs-type">ldiGRHSs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#PmGRHSs"><span class="hs-identifier hs-type">PmGRHSs</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#Post"><span class="hs-identifier hs-type">Post</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#NonEmpty/GHC.Base.html#NonEmpty"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#Nablas"><span class="hs-identifier hs-type">Nablas</span></a></span><span>
</span><span id="line-211"></span><span id="ldiGRHSs"><span class="annot"><span class="annottext">ldiGRHSs :: PmGRHSs Post -&gt; NonEmpty Nablas
</span><a href="GHC.HsToCore.Pmc.html#ldiGRHSs"><span class="hs-identifier hs-var hs-var">ldiGRHSs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#PmGRHSs"><span class="hs-identifier hs-type">PmGRHSs</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pgs_grhss :: forall p. PmGRHSs p -&gt; NonEmpty (PmGRHS p)
</span><a href="GHC.HsToCore.Pmc.Types.html#pgs_grhss"><span class="hs-identifier hs-var">pgs_grhss</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682082550"><span class="annot"><span class="annottext">NonEmpty (PmGRHS Post)
</span><a href="#local-6989586621682082550"><span class="hs-identifier hs-var">grhss</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PmGRHS Post -&gt; Nablas
</span><a href="GHC.HsToCore.Pmc.html#ldiGRHS"><span class="hs-identifier hs-var">ldiGRHS</span></a></span><span> </span><span class="annot"><span class="annottext">(PmGRHS Post -&gt; Nablas)
-&gt; NonEmpty (PmGRHS Post) -&gt; NonEmpty Nablas
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/Data.Functor.html#%3C%24%3E/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (PmGRHS Post)
</span><a href="#local-6989586621682082550"><span class="hs-identifier hs-var">grhss</span></a></span><span>
</span><span id="line-212"></span><span>
</span><span id="line-213"></span><span class="annot"><a href="GHC.HsToCore.Pmc.html#ldiGRHS"><span class="hs-identifier hs-type">ldiGRHS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#PmGRHS"><span class="hs-identifier hs-type">PmGRHS</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#Post"><span class="hs-identifier hs-type">Post</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#Nablas"><span class="hs-identifier hs-type">Nablas</span></a></span><span>
</span><span id="line-214"></span><span id="ldiGRHS"><span class="annot"><span class="annottext">ldiGRHS :: PmGRHS Post -&gt; Nablas
</span><a href="GHC.HsToCore.Pmc.html#ldiGRHS"><span class="hs-identifier hs-var hs-var">ldiGRHS</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#PmGRHS"><span class="hs-identifier hs-type">PmGRHS</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pg_grds :: forall p. PmGRHS p -&gt; p
</span><a href="GHC.HsToCore.Pmc.Types.html#pg_grds"><span class="hs-identifier hs-var">pg_grds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682082554"><span class="annot"><span class="annottext">Post
</span><a href="#local-6989586621682082554"><span class="hs-identifier hs-var">red</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Post -&gt; Nablas
</span><a href="GHC.HsToCore.Pmc.Types.html#rs_cov"><span class="hs-identifier hs-var">rs_cov</span></a></span><span> </span><span class="annot"><span class="annottext">Post
</span><a href="#local-6989586621682082554"><span class="hs-identifier hs-var">red</span></a></span><span>
</span><span id="line-215"></span><span>
</span><span id="line-216"></span><span class="hs-comment">--</span><span>
</span><span id="line-217"></span><span class="annot"><span class="hs-comment">-- * Collecting redundancy information</span></span><span>
</span><span id="line-218"></span><span class="hs-comment">--</span><span>
</span><span id="line-219"></span><span>
</span><span id="line-220"></span><span class="hs-comment">-- | The result of redundancy checking:</span><span>
</span><span id="line-221"></span><span class="hs-comment">--    * RHSs classified as /C/overed, /I/naccessible and /R/edundant</span><span>
</span><span id="line-222"></span><span class="hs-comment">--    * And redundant /B/ang patterns. See Note [Dead bang patterns].</span><span>
</span><span id="line-223"></span><span class="hs-keyword">data</span><span> </span><span id="CIRB"><span class="annot"><a href="GHC.HsToCore.Pmc.html#CIRB"><span class="hs-identifier hs-var">CIRB</span></a></span></span><span>
</span><span id="line-224"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="CIRB"><span class="annot"><a href="GHC.HsToCore.Pmc.html#CIRB"><span class="hs-identifier hs-var">CIRB</span></a></span></span><span>
</span><span id="line-225"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="cirb_cov"><span class="annot"><span class="annottext">CIRB -&gt; OrdList SrcInfo
</span><a href="GHC.HsToCore.Pmc.html#cirb_cov"><span class="hs-identifier hs-var hs-var">cirb_cov</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.OrdList.html#OrdList"><span class="hs-identifier hs-type">OrdList</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#SrcInfo"><span class="hs-identifier hs-type">SrcInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-comment">-- ^ Covered clauses</span></span><span>
</span><span id="line-226"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="cirb_inacc"><span class="annot"><span class="annottext">CIRB -&gt; OrdList SrcInfo
</span><a href="GHC.HsToCore.Pmc.html#cirb_inacc"><span class="hs-identifier hs-var hs-var">cirb_inacc</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.OrdList.html#OrdList"><span class="hs-identifier hs-type">OrdList</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#SrcInfo"><span class="hs-identifier hs-type">SrcInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-comment">-- ^ Inaccessible clauses</span></span><span>
</span><span id="line-227"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="cirb_red"><span class="annot"><span class="annottext">CIRB -&gt; OrdList SrcInfo
</span><a href="GHC.HsToCore.Pmc.html#cirb_red"><span class="hs-identifier hs-var hs-var">cirb_red</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.OrdList.html#OrdList"><span class="hs-identifier hs-type">OrdList</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#SrcInfo"><span class="hs-identifier hs-type">SrcInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-comment">-- ^ Redundant clauses</span></span><span>
</span><span id="line-228"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="cirb_bangs"><span class="annot"><span class="annottext">CIRB -&gt; OrdList SrcInfo
</span><a href="GHC.HsToCore.Pmc.html#cirb_bangs"><span class="hs-identifier hs-var hs-var">cirb_bangs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.OrdList.html#OrdList"><span class="hs-identifier hs-type">OrdList</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#SrcInfo"><span class="hs-identifier hs-type">SrcInfo</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-comment">-- ^ Redundant bang patterns</span></span><span>
</span><span id="line-229"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-230"></span><span>
</span><span id="line-231"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682082561"><span id="local-6989586621682082564"><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#Semigroup/GHC.Base.html#Semigroup"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#CIRB"><span class="hs-identifier hs-type">CIRB</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-232"></span><span>  </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#CIRB"><span class="hs-identifier hs-type">CIRB</span></a></span><span> </span><span id="local-6989586621682082569"><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082569"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621682082570"><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082570"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621682082571"><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082571"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621682082572"><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082572"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621682082573"><span class="annot"><span class="annottext">&lt;&gt; :: CIRB -&gt; CIRB -&gt; CIRB
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%3C%3E/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></a></span></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#CIRB"><span class="hs-identifier hs-type">CIRB</span></a></span><span> </span><span id="local-6989586621682082574"><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082574"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621682082575"><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082575"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621682082576"><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082576"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621682082577"><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082577"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo
-&gt; OrdList SrcInfo -&gt; OrdList SrcInfo -&gt; OrdList SrcInfo -&gt; CIRB
</span><a href="GHC.HsToCore.Pmc.html#CIRB"><span class="hs-identifier hs-var">CIRB</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082569"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo -&gt; OrdList SrcInfo -&gt; OrdList SrcInfo
</span><a href="#local-6989586621682082578"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082574"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082570"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo -&gt; OrdList SrcInfo -&gt; OrdList SrcInfo
</span><a href="#local-6989586621682082578"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082575"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082571"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo -&gt; OrdList SrcInfo -&gt; OrdList SrcInfo
</span><a href="#local-6989586621682082578"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082576"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082572"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo -&gt; OrdList SrcInfo -&gt; OrdList SrcInfo
</span><a href="#local-6989586621682082578"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082577"><span class="hs-identifier hs-var">h</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-233"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621682082578"><span class="annot"><span class="annottext">&lt;&gt; :: OrdList SrcInfo -&gt; OrdList SrcInfo -&gt; OrdList SrcInfo
</span><a href="#local-6989586621682082578"><span class="hs-operator hs-var hs-var">(&lt;&gt;)</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo -&gt; OrdList SrcInfo -&gt; OrdList SrcInfo
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%3C%3E/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">(Semi.&lt;&gt;)</span></a></span><span>
</span><span id="line-234"></span><span>
</span><span id="line-235"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621682082584"><span id="local-6989586621682082587"><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#Monoid/GHC.Base.html#Monoid"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#CIRB"><span class="hs-identifier hs-type">CIRB</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-236"></span><span>  </span><span id="local-6989586621682082595"><span class="annot"><span class="annottext">mempty :: CIRB
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mempty/GHC.Base.html#mempty"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo
-&gt; OrdList SrcInfo -&gt; OrdList SrcInfo -&gt; OrdList SrcInfo -&gt; CIRB
</span><a href="GHC.HsToCore.Pmc.html#CIRB"><span class="hs-identifier hs-var">CIRB</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo
forall a. Monoid a =&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mempty/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo
forall a. Monoid a =&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mempty/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo
forall a. Monoid a =&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mempty/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo
forall a. Monoid a =&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mempty/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-237"></span><span>
</span><span id="line-238"></span><span class="hs-comment">-- See Note [Determining inaccessible clauses]</span><span>
</span><span id="line-239"></span><span class="annot"><a href="GHC.HsToCore.Pmc.html#ensureOneNotRedundant"><span class="hs-identifier hs-type">ensureOneNotRedundant</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#CIRB"><span class="hs-identifier hs-type">CIRB</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#CIRB"><span class="hs-identifier hs-type">CIRB</span></a></span><span>
</span><span id="line-240"></span><span id="ensureOneNotRedundant"><span class="annot"><span class="annottext">ensureOneNotRedundant :: CIRB -&gt; CIRB
</span><a href="GHC.HsToCore.Pmc.html#ensureOneNotRedundant"><span class="hs-identifier hs-var hs-var">ensureOneNotRedundant</span></a></span></span><span> </span><span id="local-6989586621682082597"><span class="annot"><span class="annottext">CIRB
</span><a href="#local-6989586621682082597"><span class="hs-identifier hs-var">ci</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CIRB
</span><a href="#local-6989586621682082597"><span class="hs-identifier hs-var">ci</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-241"></span><span>  </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#CIRB"><span class="hs-identifier hs-type">CIRB</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cirb_cov :: CIRB -&gt; OrdList SrcInfo
</span><a href="GHC.HsToCore.Pmc.html#cirb_cov"><span class="hs-identifier hs-var">cirb_cov</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="GHC.Data.OrdList.html#NilOL"><span class="hs-identifier hs-var">NilOL</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cirb_inacc :: CIRB -&gt; OrdList SrcInfo
</span><a href="GHC.HsToCore.Pmc.html#cirb_inacc"><span class="hs-identifier hs-var">cirb_inacc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="GHC.Data.OrdList.html#NilOL"><span class="hs-identifier hs-var">NilOL</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cirb_red :: CIRB -&gt; OrdList SrcInfo
</span><a href="GHC.HsToCore.Pmc.html#cirb_red"><span class="hs-identifier hs-var">cirb_red</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#ConsOL"><span class="hs-identifier hs-type">ConsOL</span></a></span><span> </span><span id="local-6989586621682082600"><span class="annot"><span class="annottext">SrcInfo
</span><a href="#local-6989586621682082600"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621682082601"><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082601"><span class="hs-identifier hs-var">rs</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-242"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CIRB
</span><a href="#local-6989586621682082597"><span class="hs-identifier hs-var">ci</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#cirb_inacc"><span class="hs-identifier hs-var">cirb_inacc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-type">unitOL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682082600"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#cirb_red"><span class="hs-identifier hs-var">cirb_red</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621682082601"><span class="hs-identifier hs-type">rs</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-243"></span><span>  </span><span class="annot"><span class="annottext">CIRB
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CIRB
</span><a href="#local-6989586621682082597"><span class="hs-identifier hs-var">ci</span></a></span><span>
</span><span id="line-244"></span><span>
</span><span id="line-245"></span><span class="hs-comment">-- | Only adds the redundant bangs to the @CIRB@ if there is at least one</span><span>
</span><span id="line-246"></span><span class="hs-comment">-- non-redundant 'SrcInfo'. There is no point in remembering a redundant bang</span><span>
</span><span id="line-247"></span><span class="hs-comment">-- if the whole match is redundant!</span><span>
</span><span id="line-248"></span><span class="annot"><a href="GHC.HsToCore.Pmc.html#addRedundantBangs"><span class="hs-identifier hs-type">addRedundantBangs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#OrdList"><span class="hs-identifier hs-type">OrdList</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#SrcInfo"><span class="hs-identifier hs-type">SrcInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#CIRB"><span class="hs-identifier hs-type">CIRB</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#CIRB"><span class="hs-identifier hs-type">CIRB</span></a></span><span>
</span><span id="line-249"></span><span id="addRedundantBangs"><span class="annot"><span class="annottext">addRedundantBangs :: OrdList SrcInfo -&gt; CIRB -&gt; CIRB
</span><a href="GHC.HsToCore.Pmc.html#addRedundantBangs"><span class="hs-identifier hs-var hs-var">addRedundantBangs</span></a></span></span><span> </span><span id="local-6989586621682082605"><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082605"><span class="hs-identifier hs-var">_red_bangs</span></a></span></span><span> </span><span id="local-6989586621682082606"><span class="annot"><span class="annottext">cirb :: CIRB
</span><a href="#local-6989586621682082606"><span class="hs-identifier hs-var">cirb</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.HsToCore.Pmc.html#CIRB"><span class="hs-identifier hs-type">CIRB</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cirb_cov :: CIRB -&gt; OrdList SrcInfo
</span><a href="GHC.HsToCore.Pmc.html#cirb_cov"><span class="hs-identifier hs-var">cirb_cov</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="GHC.Data.OrdList.html#NilOL"><span class="hs-identifier hs-var">NilOL</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cirb_inacc :: CIRB -&gt; OrdList SrcInfo
</span><a href="GHC.HsToCore.Pmc.html#cirb_inacc"><span class="hs-identifier hs-var">cirb_inacc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="GHC.Data.OrdList.html#NilOL"><span class="hs-identifier hs-var">NilOL</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-250"></span><span>  </span><span class="annot"><span class="annottext">CIRB
</span><a href="#local-6989586621682082606"><span class="hs-identifier hs-var">cirb</span></a></span><span>
</span><span id="line-251"></span><span class="annot"><a href="GHC.HsToCore.Pmc.html#addRedundantBangs"><span class="hs-identifier hs-var">addRedundantBangs</span></a></span><span> </span><span id="local-6989586621682082607"><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082607"><span class="hs-identifier hs-var">red_bangs</span></a></span></span><span>  </span><span id="local-6989586621682082608"><span class="annot"><span class="annottext">CIRB
</span><a href="#local-6989586621682082608"><span class="hs-identifier hs-var">cirb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-252"></span><span>  </span><span class="annot"><span class="annottext">CIRB
</span><a href="#local-6989586621682082608"><span class="hs-identifier hs-var">cirb</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#cirb_bangs"><span class="hs-identifier hs-var">cirb_bangs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#cirb_bangs"><span class="hs-identifier hs-var">cirb_bangs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682082608"><span class="hs-identifier hs-type">cirb</span></a></span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#%3C%3E/GHC.Base.html#%3C%3E"><span class="hs-operator hs-type">Semi.&lt;&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682082607"><span class="hs-identifier hs-type">red_bangs</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="hs-comment">-- | Checks the 'Nablas' in a 'RedSets' for inhabitants and returns</span><span>
</span><span id="line-255"></span><span class="hs-comment">--    1. Whether the Covered set was inhabited</span><span>
</span><span id="line-256"></span><span class="hs-comment">--    2. Whether the Diverging set was inhabited</span><span>
</span><span id="line-257"></span><span class="hs-comment">--    3. All source bangs whose 'Nablas' were empty, which means they are</span><span>
</span><span id="line-258"></span><span class="hs-comment">--       redundant.</span><span>
</span><span id="line-259"></span><span class="annot"><a href="GHC.HsToCore.Pmc.html#testRedSets"><span class="hs-identifier hs-type">testRedSets</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#RedSets"><span class="hs-identifier hs-type">RedSets</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Types.html#DsM"><span class="hs-identifier hs-type">DsM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#OrdList"><span class="hs-identifier hs-type">OrdList</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#SrcInfo"><span class="hs-identifier hs-type">SrcInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-260"></span><span id="testRedSets"><span class="annot"><span class="annottext">testRedSets :: Post -&gt; DsM (Bool, Bool, OrdList SrcInfo)
</span><a href="GHC.HsToCore.Pmc.html#testRedSets"><span class="hs-identifier hs-var hs-var">testRedSets</span></a></span></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#RedSets"><span class="hs-identifier hs-type">RedSets</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rs_cov :: Post -&gt; Nablas
</span><a href="GHC.HsToCore.Pmc.Types.html#rs_cov"><span class="hs-identifier hs-var">rs_cov</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682082612"><span class="annot"><span class="annottext">Nablas
</span><a href="#local-6989586621682082612"><span class="hs-identifier hs-var">cov</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rs_div :: Post -&gt; Nablas
</span><a href="GHC.HsToCore.Pmc.Types.html#rs_div"><span class="hs-identifier hs-var">rs_div</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682082614"><span class="annot"><span class="annottext">Nablas
</span><a href="#local-6989586621682082614"><span class="hs-identifier hs-var">div</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rs_bangs :: Post -&gt; OrdList (Nablas, SrcInfo)
</span><a href="GHC.HsToCore.Pmc.Types.html#rs_bangs"><span class="hs-identifier hs-var">rs_bangs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682082616"><span class="annot"><span class="annottext">OrdList (Nablas, SrcInfo)
</span><a href="#local-6989586621682082616"><span class="hs-identifier hs-var">bangs</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-261"></span><span>  </span><span id="local-6989586621682082617"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682082617"><span class="hs-identifier hs-var">is_covered</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Nablas -&gt; DsM Bool
</span><a href="GHC.HsToCore.Pmc.Solver.html#isInhabited"><span class="hs-identifier hs-var">isInhabited</span></a></span><span> </span><span class="annot"><span class="annottext">Nablas
</span><a href="#local-6989586621682082612"><span class="hs-identifier hs-var">cov</span></a></span><span>
</span><span id="line-262"></span><span>  </span><span id="local-6989586621682082618"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682082618"><span class="hs-identifier hs-var">may_diverge</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Nablas -&gt; DsM Bool
</span><a href="GHC.HsToCore.Pmc.Solver.html#isInhabited"><span class="hs-identifier hs-var">isInhabited</span></a></span><span> </span><span class="annot"><span class="annottext">Nablas
</span><a href="#local-6989586621682082614"><span class="hs-identifier hs-var">div</span></a></span><span>
</span><span id="line-263"></span><span>  </span><span id="local-6989586621682082619"><span class="annot"><span class="annottext">[SrcInfo]
</span><a href="#local-6989586621682082619"><span class="hs-identifier hs-var">red_bangs</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(((Nablas, SrcInfo)
  -&gt; IOEnv (Env DsGblEnv DsLclEnv) (Maybe SrcInfo))
 -&gt; [(Nablas, SrcInfo)] -&gt; IOEnv (Env DsGblEnv DsLclEnv) [SrcInfo])
-&gt; [(Nablas, SrcInfo)]
-&gt; ((Nablas, SrcInfo)
    -&gt; IOEnv (Env DsGblEnv DsLclEnv) (Maybe SrcInfo))
-&gt; IOEnv (Env DsGblEnv DsLclEnv) [SrcInfo]
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#flip/GHC.Base.html#flip"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">((Nablas, SrcInfo)
 -&gt; IOEnv (Env DsGblEnv DsLclEnv) (Maybe SrcInfo))
-&gt; [(Nablas, SrcInfo)] -&gt; IOEnv (Env DsGblEnv DsLclEnv) [SrcInfo]
forall (m :: * -&gt; *) a b.
Applicative m =&gt;
(a -&gt; m (Maybe b)) -&gt; [a] -&gt; m [b]
</span><a href="GHC.Utils.Monad.html#mapMaybeM"><span class="hs-identifier hs-var">mapMaybeM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OrdList (Nablas, SrcInfo) -&gt; [(Nablas, SrcInfo)]
forall a. OrdList a -&gt; [a]
</span><a href="GHC.Data.OrdList.html#fromOL"><span class="hs-identifier hs-var">fromOL</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList (Nablas, SrcInfo)
</span><a href="#local-6989586621682082616"><span class="hs-identifier hs-var">bangs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(((Nablas, SrcInfo)
  -&gt; IOEnv (Env DsGblEnv DsLclEnv) (Maybe SrcInfo))
 -&gt; IOEnv (Env DsGblEnv DsLclEnv) [SrcInfo])
-&gt; ((Nablas, SrcInfo)
    -&gt; IOEnv (Env DsGblEnv DsLclEnv) (Maybe SrcInfo))
-&gt; IOEnv (Env DsGblEnv DsLclEnv) [SrcInfo]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621682082622"><span class="annot"><span class="annottext">Nablas
</span><a href="#local-6989586621682082622"><span class="hs-identifier hs-var">nablas</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682082623"><span class="annot"><span class="annottext">SrcInfo
</span><a href="#local-6989586621682082623"><span class="hs-identifier hs-var">bang</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-264"></span><span>    </span><span class="annot"><span class="annottext">Nablas -&gt; DsM Bool
</span><a href="GHC.HsToCore.Pmc.Solver.html#isInhabited"><span class="hs-identifier hs-var">isInhabited</span></a></span><span> </span><span class="annot"><span class="annottext">Nablas
</span><a href="#local-6989586621682082622"><span class="hs-identifier hs-var">nablas</span></a></span><span> </span><span class="annot"><span class="annottext">DsM Bool
-&gt; (Bool -&gt; IOEnv (Env DsGblEnv DsLclEnv) (Maybe SrcInfo))
-&gt; IOEnv (Env DsGblEnv DsLclEnv) (Maybe SrcInfo)
forall a b.
IOEnv (Env DsGblEnv DsLclEnv) a
-&gt; (a -&gt; IOEnv (Env DsGblEnv DsLclEnv) b)
-&gt; IOEnv (Env DsGblEnv DsLclEnv) b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%3E%3E%3D/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-265"></span><span>      </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe SrcInfo -&gt; IOEnv (Env DsGblEnv DsLclEnv) (Maybe SrcInfo)
forall a. a -&gt; IOEnv (Env DsGblEnv DsLclEnv) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#pure/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SrcInfo
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-266"></span><span>      </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe SrcInfo -&gt; IOEnv (Env DsGblEnv DsLclEnv) (Maybe SrcInfo)
forall a. a -&gt; IOEnv (Env DsGblEnv DsLclEnv) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#pure/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcInfo -&gt; Maybe SrcInfo
forall a. a -&gt; Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">SrcInfo
</span><a href="#local-6989586621682082623"><span class="hs-identifier hs-var">bang</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-267"></span><span>  </span><span class="annot"><span class="annottext">(Bool, Bool, OrdList SrcInfo) -&gt; DsM (Bool, Bool, OrdList SrcInfo)
forall a. a -&gt; IOEnv (Env DsGblEnv DsLclEnv) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#pure/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682082617"><span class="hs-identifier hs-var">is_covered</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682082618"><span class="hs-identifier hs-var">may_diverge</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[SrcInfo] -&gt; OrdList SrcInfo
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="annot"><span class="annottext">[SrcInfo]
</span><a href="#local-6989586621682082619"><span class="hs-identifier hs-var">red_bangs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-268"></span><span>
</span><span id="line-269"></span><span class="annot"><a href="GHC.HsToCore.Pmc.html#cirbsMatchGroup"><span class="hs-identifier hs-type">cirbsMatchGroup</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#PmMatchGroup"><span class="hs-identifier hs-type">PmMatchGroup</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#Post"><span class="hs-identifier hs-type">Post</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Types.html#DsM"><span class="hs-identifier hs-type">DsM</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#CIRB"><span class="hs-identifier hs-type">CIRB</span></a></span><span>
</span><span id="line-270"></span><span id="cirbsMatchGroup"><span class="annot"><span class="annottext">cirbsMatchGroup :: PmMatchGroup Post -&gt; DsM CIRB
</span><a href="GHC.HsToCore.Pmc.html#cirbsMatchGroup"><span class="hs-identifier hs-var hs-var">cirbsMatchGroup</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#PmMatchGroup"><span class="hs-identifier hs-type">PmMatchGroup</span></a></span><span> </span><span id="local-6989586621682082626"><span class="annot"><span class="annottext">NonEmpty (PmMatch Post)
</span><a href="#local-6989586621682082626"><span class="hs-identifier hs-var">matches</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-271"></span><span>  </span><span class="annot"><span class="annottext">NonEmpty CIRB -&gt; CIRB
forall a. Semigroup a =&gt; NonEmpty a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#sconcat/GHC.Base.html#sconcat"><span class="hs-identifier hs-var">Semi.sconcat</span></a></span><span> </span><span class="annot"><span class="annottext">(NonEmpty CIRB -&gt; CIRB)
-&gt; IOEnv (Env DsGblEnv DsLclEnv) (NonEmpty CIRB) -&gt; DsM CIRB
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/Data.Functor.html#%3C%24%3E/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(PmMatch Post -&gt; DsM CIRB)
-&gt; NonEmpty (PmMatch Post)
-&gt; IOEnv (Env DsGblEnv DsLclEnv) (NonEmpty CIRB)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; NonEmpty a -&gt; f (NonEmpty b)
</span><a href="../../base-4.18.3.0/src/Data.Traversable.html#traverse/Data.Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="annot"><span class="annottext">PmMatch Post -&gt; DsM CIRB
</span><a href="GHC.HsToCore.Pmc.html#cirbsMatch"><span class="hs-identifier hs-var">cirbsMatch</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (PmMatch Post)
</span><a href="#local-6989586621682082626"><span class="hs-identifier hs-var">matches</span></a></span><span>
</span><span id="line-272"></span><span>
</span><span id="line-273"></span><span class="annot"><a href="GHC.HsToCore.Pmc.html#cirbsMatch"><span class="hs-identifier hs-type">cirbsMatch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#PmMatch"><span class="hs-identifier hs-type">PmMatch</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#Post"><span class="hs-identifier hs-type">Post</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Types.html#DsM"><span class="hs-identifier hs-type">DsM</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#CIRB"><span class="hs-identifier hs-type">CIRB</span></a></span><span>
</span><span id="line-274"></span><span id="cirbsMatch"><span class="annot"><span class="annottext">cirbsMatch :: PmMatch Post -&gt; DsM CIRB
</span><a href="GHC.HsToCore.Pmc.html#cirbsMatch"><span class="hs-identifier hs-var hs-var">cirbsMatch</span></a></span></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#PmMatch"><span class="hs-identifier hs-type">PmMatch</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pm_pats :: forall p. PmMatch p -&gt; p
</span><a href="GHC.HsToCore.Pmc.Types.html#pm_pats"><span class="hs-identifier hs-var">pm_pats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682082629"><span class="annot"><span class="annottext">Post
</span><a href="#local-6989586621682082629"><span class="hs-identifier hs-var">red</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pm_grhss :: forall p. PmMatch p -&gt; PmGRHSs p
</span><a href="GHC.HsToCore.Pmc.Types.html#pm_grhss"><span class="hs-identifier hs-var">pm_grhss</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682082630"><span class="annot"><span class="annottext">PmGRHSs Post
</span><a href="#local-6989586621682082630"><span class="hs-identifier hs-var">grhss</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-275"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621682082631"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682082631"><span class="hs-identifier hs-var">_is_covered</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682082632"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682082632"><span class="hs-identifier hs-var">may_diverge</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682082633"><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082633"><span class="hs-identifier hs-var">red_bangs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Post -&gt; DsM (Bool, Bool, OrdList SrcInfo)
</span><a href="GHC.HsToCore.Pmc.html#testRedSets"><span class="hs-identifier hs-var">testRedSets</span></a></span><span> </span><span class="annot"><span class="annottext">Post
</span><a href="#local-6989586621682082629"><span class="hs-identifier hs-var">red</span></a></span><span>
</span><span id="line-276"></span><span>  </span><span class="hs-comment">-- Don't look at is_covered: If it is True, all children are redundant anyway,</span><span>
</span><span id="line-277"></span><span>  </span><span class="hs-comment">-- unless there is a 'considerAccessible', which may break that rule</span><span>
</span><span id="line-278"></span><span>  </span><span class="hs-comment">-- intentionally. See Note [considerAccessible] in &quot;GHC.HsToCore.Pmc.Check&quot;.</span><span>
</span><span id="line-279"></span><span>  </span><span id="local-6989586621682082634"><span class="annot"><span class="annottext">CIRB
</span><a href="#local-6989586621682082634"><span class="hs-identifier hs-var">cirb</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">PmGRHSs Post -&gt; DsM CIRB
</span><a href="GHC.HsToCore.Pmc.html#cirbsGRHSs"><span class="hs-identifier hs-var">cirbsGRHSs</span></a></span><span> </span><span class="annot"><span class="annottext">PmGRHSs Post
</span><a href="#local-6989586621682082630"><span class="hs-identifier hs-var">grhss</span></a></span><span>
</span><span id="line-280"></span><span>  </span><span class="annot"><span class="annottext">CIRB -&gt; DsM CIRB
forall a. a -&gt; IOEnv (Env DsGblEnv DsLclEnv) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#pure/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">(CIRB -&gt; DsM CIRB) -&gt; CIRB -&gt; DsM CIRB
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo -&gt; CIRB -&gt; CIRB
</span><a href="GHC.HsToCore.Pmc.html#addRedundantBangs"><span class="hs-identifier hs-var">addRedundantBangs</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082633"><span class="hs-identifier hs-var">red_bangs</span></a></span><span>
</span><span id="line-281"></span><span>       </span><span class="hs-comment">-- See Note [Determining inaccessible clauses]</span><span>
</span><span id="line-282"></span><span>       </span><span class="annot"><span class="annottext">(CIRB -&gt; CIRB) -&gt; CIRB -&gt; CIRB
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; (CIRB -&gt; CIRB) -&gt; CIRB -&gt; CIRB
forall a. Bool -&gt; (a -&gt; a) -&gt; a -&gt; a
</span><a href="GHC.Utils.Misc.html#applyWhen"><span class="hs-identifier hs-var">applyWhen</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682082632"><span class="hs-identifier hs-var">may_diverge</span></a></span><span> </span><span class="annot"><span class="annottext">CIRB -&gt; CIRB
</span><a href="GHC.HsToCore.Pmc.html#ensureOneNotRedundant"><span class="hs-identifier hs-var">ensureOneNotRedundant</span></a></span><span>
</span><span id="line-283"></span><span>       </span><span class="annot"><span class="annottext">(CIRB -&gt; CIRB) -&gt; CIRB -&gt; CIRB
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CIRB
</span><a href="#local-6989586621682082634"><span class="hs-identifier hs-var">cirb</span></a></span><span>
</span><span id="line-284"></span><span>
</span><span id="line-285"></span><span class="annot"><a href="GHC.HsToCore.Pmc.html#cirbsGRHSs"><span class="hs-identifier hs-type">cirbsGRHSs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#PmGRHSs"><span class="hs-identifier hs-type">PmGRHSs</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#Post"><span class="hs-identifier hs-type">Post</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Types.html#DsM"><span class="hs-identifier hs-type">DsM</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#CIRB"><span class="hs-identifier hs-type">CIRB</span></a></span><span>
</span><span id="line-286"></span><span id="cirbsGRHSs"><span class="annot"><span class="annottext">cirbsGRHSs :: PmGRHSs Post -&gt; DsM CIRB
</span><a href="GHC.HsToCore.Pmc.html#cirbsGRHSs"><span class="hs-identifier hs-var hs-var">cirbsGRHSs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#PmGRHSs"><span class="hs-identifier hs-type">PmGRHSs</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pgs_grhss :: forall p. PmGRHSs p -&gt; NonEmpty (PmGRHS p)
</span><a href="GHC.HsToCore.Pmc.Types.html#pgs_grhss"><span class="hs-identifier hs-var">pgs_grhss</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682082637"><span class="annot"><span class="annottext">NonEmpty (PmGRHS Post)
</span><a href="#local-6989586621682082637"><span class="hs-identifier hs-var">grhss</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmpty CIRB -&gt; CIRB
forall a. Semigroup a =&gt; NonEmpty a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#sconcat/GHC.Base.html#sconcat"><span class="hs-identifier hs-var">Semi.sconcat</span></a></span><span> </span><span class="annot"><span class="annottext">(NonEmpty CIRB -&gt; CIRB)
-&gt; IOEnv (Env DsGblEnv DsLclEnv) (NonEmpty CIRB) -&gt; DsM CIRB
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/Data.Functor.html#%3C%24%3E/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(PmGRHS Post -&gt; DsM CIRB)
-&gt; NonEmpty (PmGRHS Post)
-&gt; IOEnv (Env DsGblEnv DsLclEnv) (NonEmpty CIRB)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; NonEmpty a -&gt; f (NonEmpty b)
</span><a href="../../base-4.18.3.0/src/Data.Traversable.html#traverse/Data.Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="annot"><span class="annottext">PmGRHS Post -&gt; DsM CIRB
</span><a href="GHC.HsToCore.Pmc.html#cirbsGRHS"><span class="hs-identifier hs-var">cirbsGRHS</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (PmGRHS Post)
</span><a href="#local-6989586621682082637"><span class="hs-identifier hs-var">grhss</span></a></span><span>
</span><span id="line-287"></span><span>
</span><span id="line-288"></span><span class="annot"><a href="GHC.HsToCore.Pmc.html#cirbsGRHS"><span class="hs-identifier hs-type">cirbsGRHS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#PmGRHS"><span class="hs-identifier hs-type">PmGRHS</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#Post"><span class="hs-identifier hs-type">Post</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Types.html#DsM"><span class="hs-identifier hs-type">DsM</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#CIRB"><span class="hs-identifier hs-type">CIRB</span></a></span><span>
</span><span id="line-289"></span><span id="cirbsGRHS"><span class="annot"><span class="annottext">cirbsGRHS :: PmGRHS Post -&gt; DsM CIRB
</span><a href="GHC.HsToCore.Pmc.html#cirbsGRHS"><span class="hs-identifier hs-var hs-var">cirbsGRHS</span></a></span></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#PmGRHS"><span class="hs-identifier hs-type">PmGRHS</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pg_grds :: forall p. PmGRHS p -&gt; p
</span><a href="GHC.HsToCore.Pmc.Types.html#pg_grds"><span class="hs-identifier hs-var">pg_grds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682082639"><span class="annot"><span class="annottext">Post
</span><a href="#local-6989586621682082639"><span class="hs-identifier hs-var">red</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">pg_rhs :: forall p. PmGRHS p -&gt; SrcInfo
</span><a href="GHC.HsToCore.Pmc.Types.html#pg_rhs"><span class="hs-identifier hs-var">pg_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682082641"><span class="annot"><span class="annottext">SrcInfo
</span><a href="#local-6989586621682082641"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-290"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621682082642"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682082642"><span class="hs-identifier hs-var">is_covered</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682082643"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682082643"><span class="hs-identifier hs-var">may_diverge</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682082644"><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082644"><span class="hs-identifier hs-var">red_bangs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Post -&gt; DsM (Bool, Bool, OrdList SrcInfo)
</span><a href="GHC.HsToCore.Pmc.html#testRedSets"><span class="hs-identifier hs-var">testRedSets</span></a></span><span> </span><span class="annot"><span class="annottext">Post
</span><a href="#local-6989586621682082639"><span class="hs-identifier hs-var">red</span></a></span><span>
</span><span id="line-291"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682082645"><span class="annot"><span class="annottext">cirb :: CIRB
</span><a href="#local-6989586621682082645"><span class="hs-identifier hs-var hs-var">cirb</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682082642"><span class="hs-identifier hs-var">is_covered</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CIRB
forall a. Monoid a =&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mempty/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#cirb_cov"><span class="hs-identifier hs-var">cirb_cov</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-type">unitOL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682082641"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-292"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682082643"><span class="hs-identifier hs-var">may_diverge</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CIRB
forall a. Monoid a =&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mempty/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#cirb_inacc"><span class="hs-identifier hs-var">cirb_inacc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-type">unitOL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682082641"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-293"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CIRB
forall a. Monoid a =&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mempty/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#cirb_red"><span class="hs-identifier hs-var">cirb_red</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-type">unitOL</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682082641"><span class="hs-identifier hs-type">info</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-294"></span><span>  </span><span class="annot"><span class="annottext">CIRB -&gt; DsM CIRB
forall a. a -&gt; IOEnv (Env DsGblEnv DsLclEnv) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#pure/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OrdList SrcInfo -&gt; CIRB -&gt; CIRB
</span><a href="GHC.HsToCore.Pmc.html#addRedundantBangs"><span class="hs-identifier hs-var">addRedundantBangs</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082644"><span class="hs-identifier hs-var">red_bangs</span></a></span><span> </span><span class="annot"><span class="annottext">CIRB
</span><a href="#local-6989586621682082645"><span class="hs-identifier hs-var">cirb</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-295"></span><span>
</span><span id="line-296"></span><span class="annot"><a href="GHC.HsToCore.Pmc.html#cirbsEmptyCase"><span class="hs-identifier hs-type">cirbsEmptyCase</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#PmEmptyCase"><span class="hs-identifier hs-type">PmEmptyCase</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Types.html#DsM"><span class="hs-identifier hs-type">DsM</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#CIRB"><span class="hs-identifier hs-type">CIRB</span></a></span><span>
</span><span id="line-297"></span><span id="cirbsEmptyCase"><span class="annot"><span class="annottext">cirbsEmptyCase :: PmEmptyCase -&gt; DsM CIRB
</span><a href="GHC.HsToCore.Pmc.html#cirbsEmptyCase"><span class="hs-identifier hs-var hs-var">cirbsEmptyCase</span></a></span></span><span> </span><span class="annot"><span class="annottext">PmEmptyCase
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CIRB -&gt; DsM CIRB
forall a. a -&gt; IOEnv (Env DsGblEnv DsLclEnv) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#pure/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">CIRB
forall a. Monoid a =&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mempty/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-298"></span><span>
</span><span id="line-299"></span><span class="annot"><a href="GHC.HsToCore.Pmc.html#cirbsPatBind"><span class="hs-identifier hs-type">cirbsPatBind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#PmPatBind"><span class="hs-identifier hs-type">PmPatBind</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#Post"><span class="hs-identifier hs-type">Post</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Types.html#DsM"><span class="hs-identifier hs-type">DsM</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#CIRB"><span class="hs-identifier hs-type">CIRB</span></a></span><span>
</span><span id="line-300"></span><span id="cirbsPatBind"><span class="annot"><span class="annottext">cirbsPatBind :: PmPatBind Post -&gt; DsM CIRB
</span><a href="GHC.HsToCore.Pmc.html#cirbsPatBind"><span class="hs-identifier hs-var hs-var">cirbsPatBind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PmGRHS Post -&gt; DsM CIRB) -&gt; PmPatBind Post -&gt; DsM CIRB
forall a b. Coercible a b =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">coerce</span></span><span> </span><span class="annot"><span class="annottext">PmGRHS Post -&gt; DsM CIRB
</span><a href="GHC.HsToCore.Pmc.html#cirbsGRHS"><span class="hs-identifier hs-var">cirbsGRHS</span></a></span><span>
</span><span id="line-301"></span><span>
</span><span id="line-302"></span><span class="hs-comment">{- Note [Determining inaccessible clauses]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Consider
  f _  True = ()
  f () True = ()
  f _  _    = ()
Is f's second clause redundant? The perhaps surprising answer is, no, it isn't!
@f (error &quot;boom&quot;) False@ will force the error with clause 2, but will return
() if it was deleted, so clearly not redundant. Yet for now combination of
arguments we can ever reach clause 2's RHS, so we say it has inaccessible RHS
(as opposed to being completely redundant).

We detect an inaccessible RHS simply by pretending it's redundant, until we see
-}</span><span>
</span><span id="line-316"></span><span>
</span><span id="line-317"></span><span class="hs-comment">--</span><span>
</span><span id="line-318"></span><span class="annot"><span class="hs-comment">-- * Formatting and reporting warnings</span></span><span>
</span><span id="line-319"></span><span class="hs-comment">--</span><span>
</span><span id="line-320"></span><span>
</span><span id="line-321"></span><span class="hs-comment">-- | A datatype to accommodate the different call sites of</span><span>
</span><span id="line-322"></span><span class="hs-comment">-- 'formatReportWarnings'. Used for extracting 'CIRB's from a concrete 'ann'</span><span>
</span><span id="line-323"></span><span class="hs-comment">-- through 'collectInMode'. Since this is only possible for a couple of</span><span>
</span><span id="line-324"></span><span class="hs-comment">-- well-known 'ann's, this is a GADT.</span><span>
</span><span id="line-325"></span><span class="hs-keyword">data</span><span> </span><span id="FormatReportWarningsMode"><span class="annot"><a href="GHC.HsToCore.Pmc.html#FormatReportWarningsMode"><span class="hs-identifier hs-var">FormatReportWarningsMode</span></a></span></span><span> </span><span id="local-6989586621682082650"><span class="annot"><a href="#local-6989586621682082650"><span class="hs-identifier hs-type">ann</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-326"></span><span>  </span><span id="ReportPatBind"><span class="annot"><a href="GHC.HsToCore.Pmc.html#ReportPatBind"><span class="hs-identifier hs-var">ReportPatBind</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#FormatReportWarningsMode"><span class="hs-identifier hs-type">FormatReportWarningsMode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#PmPatBind"><span class="hs-identifier hs-type">PmPatBind</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#Post"><span class="hs-identifier hs-type">Post</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-327"></span><span>  </span><span id="ReportGRHSs"><span class="annot"><a href="GHC.HsToCore.Pmc.html#ReportGRHSs"><span class="hs-identifier hs-var">ReportGRHSs</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#FormatReportWarningsMode"><span class="hs-identifier hs-type">FormatReportWarningsMode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#PmGRHSs"><span class="hs-identifier hs-type">PmGRHSs</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#Post"><span class="hs-identifier hs-type">Post</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-328"></span><span>  </span><span id="ReportMatchGroup"><span class="annot"><a href="GHC.HsToCore.Pmc.html#ReportMatchGroup"><span class="hs-identifier hs-var">ReportMatchGroup</span></a></span></span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#FormatReportWarningsMode"><span class="hs-identifier hs-type">FormatReportWarningsMode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#PmMatchGroup"><span class="hs-identifier hs-type">PmMatchGroup</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#Post"><span class="hs-identifier hs-type">Post</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-329"></span><span>  </span><span id="ReportEmptyCase"><span class="annot"><a href="GHC.HsToCore.Pmc.html#ReportEmptyCase"><span class="hs-identifier hs-var">ReportEmptyCase</span></a></span></span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#FormatReportWarningsMode"><span class="hs-identifier hs-type">FormatReportWarningsMode</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#PmEmptyCase"><span class="hs-identifier hs-type">PmEmptyCase</span></a></span><span>
</span><span id="line-330"></span><span>
</span><span id="line-331"></span><span id="local-6989586621682082249"><span id="local-6989586621682082652"><span id="local-6989586621682082654"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.html#FormatReportWarningsMode"><span class="hs-identifier hs-type">FormatReportWarningsMode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682082249"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-332"></span><span>
</span><span id="line-333"></span><span class="hs-comment">-- | A function collecting 'CIRB's for each of the different</span><span>
</span><span id="line-334"></span><span class="hs-comment">-- 'FormatReportWarningsMode's.</span><span>
</span><span id="line-335"></span><span id="local-6989586621682082250"><span class="annot"><a href="GHC.HsToCore.Pmc.html#collectInMode"><span class="hs-identifier hs-type">collectInMode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#FormatReportWarningsMode"><span class="hs-identifier hs-type">FormatReportWarningsMode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682082250"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621682082250"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Types.html#DsM"><span class="hs-identifier hs-type">DsM</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#CIRB"><span class="hs-identifier hs-type">CIRB</span></a></span></span><span>
</span><span id="line-336"></span><span id="collectInMode"><span class="annot"><span class="annottext">collectInMode :: forall ann. FormatReportWarningsMode ann -&gt; ann -&gt; DsM CIRB
</span><a href="GHC.HsToCore.Pmc.html#collectInMode"><span class="hs-identifier hs-var hs-var">collectInMode</span></a></span></span><span> </span><span class="annot"><span class="annottext">FormatReportWarningsMode ann
</span><a href="GHC.HsToCore.Pmc.html#ReportPatBind"><span class="hs-identifier hs-var">ReportPatBind</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ann -&gt; DsM CIRB
PmPatBind Post -&gt; DsM CIRB
</span><a href="GHC.HsToCore.Pmc.html#cirbsPatBind"><span class="hs-identifier hs-var">cirbsPatBind</span></a></span><span>
</span><span id="line-337"></span><span class="annot"><a href="GHC.HsToCore.Pmc.html#collectInMode"><span class="hs-identifier hs-var">collectInMode</span></a></span><span> </span><span class="annot"><span class="annottext">FormatReportWarningsMode ann
</span><a href="GHC.HsToCore.Pmc.html#ReportGRHSs"><span class="hs-identifier hs-var">ReportGRHSs</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ann -&gt; DsM CIRB
PmGRHSs Post -&gt; DsM CIRB
</span><a href="GHC.HsToCore.Pmc.html#cirbsGRHSs"><span class="hs-identifier hs-var">cirbsGRHSs</span></a></span><span>
</span><span id="line-338"></span><span class="annot"><a href="GHC.HsToCore.Pmc.html#collectInMode"><span class="hs-identifier hs-var">collectInMode</span></a></span><span> </span><span class="annot"><span class="annottext">FormatReportWarningsMode ann
</span><a href="GHC.HsToCore.Pmc.html#ReportMatchGroup"><span class="hs-identifier hs-var">ReportMatchGroup</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ann -&gt; DsM CIRB
PmMatchGroup Post -&gt; DsM CIRB
</span><a href="GHC.HsToCore.Pmc.html#cirbsMatchGroup"><span class="hs-identifier hs-var">cirbsMatchGroup</span></a></span><span>
</span><span id="line-339"></span><span class="annot"><a href="GHC.HsToCore.Pmc.html#collectInMode"><span class="hs-identifier hs-var">collectInMode</span></a></span><span> </span><span class="annot"><span class="annottext">FormatReportWarningsMode ann
</span><a href="GHC.HsToCore.Pmc.html#ReportEmptyCase"><span class="hs-identifier hs-var">ReportEmptyCase</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ann -&gt; DsM CIRB
PmEmptyCase -&gt; DsM CIRB
</span><a href="GHC.HsToCore.Pmc.html#cirbsEmptyCase"><span class="hs-identifier hs-var">cirbsEmptyCase</span></a></span><span>
</span><span id="line-340"></span><span>
</span><span id="line-341"></span><span class="hs-comment">-- | Given a 'FormatReportWarningsMode', this function will emit warnings</span><span>
</span><span id="line-342"></span><span class="hs-comment">-- for a 'CheckResult'.</span><span>
</span><span id="line-343"></span><span id="local-6989586621682082192"><span class="annot"><a href="GHC.HsToCore.Pmc.html#formatReportWarnings"><span class="hs-identifier hs-type">formatReportWarnings</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#FormatReportWarningsMode"><span class="hs-identifier hs-type">FormatReportWarningsMode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682082192"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Monad.html#DsMatchContext"><span class="hs-identifier hs-type">DsMatchContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#CheckResult"><span class="hs-identifier hs-type">CheckResult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682082192"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Types.html#DsM"><span class="hs-identifier hs-type">DsM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-344"></span><span id="formatReportWarnings"><span class="annot"><span class="annottext">formatReportWarnings :: forall ann.
FormatReportWarningsMode ann
-&gt; DsMatchContext -&gt; [Id] -&gt; CheckResult ann -&gt; DsM ()
</span><a href="GHC.HsToCore.Pmc.html#formatReportWarnings"><span class="hs-identifier hs-var hs-var">formatReportWarnings</span></a></span></span><span> </span><span id="local-6989586621682082668"><span class="annot"><span class="annottext">FormatReportWarningsMode ann
</span><a href="#local-6989586621682082668"><span class="hs-identifier hs-var">report_mode</span></a></span></span><span> </span><span id="local-6989586621682082669"><span class="annot"><span class="annottext">DsMatchContext
</span><a href="#local-6989586621682082669"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span id="local-6989586621682082670"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682082670"><span class="hs-identifier hs-var">vars</span></a></span></span><span> </span><span id="local-6989586621682082671"><span class="annot"><span class="annottext">cr :: CheckResult ann
</span><a href="#local-6989586621682082671"><span class="hs-identifier hs-var">cr</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#CheckResult"><span class="hs-identifier hs-type">CheckResult</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cr_ret :: forall a. CheckResult a -&gt; a
</span><a href="GHC.HsToCore.Pmc.Types.html#cr_ret"><span class="hs-identifier hs-var">cr_ret</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682082672"><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621682082672"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-345"></span><span>  </span><span id="local-6989586621682082673"><span class="annot"><span class="annottext">CIRB
</span><a href="#local-6989586621682082673"><span class="hs-identifier hs-var">cov_info</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FormatReportWarningsMode ann -&gt; ann -&gt; DsM CIRB
forall ann. FormatReportWarningsMode ann -&gt; ann -&gt; DsM CIRB
</span><a href="GHC.HsToCore.Pmc.html#collectInMode"><span class="hs-identifier hs-var">collectInMode</span></a></span><span> </span><span class="annot"><span class="annottext">FormatReportWarningsMode ann
</span><a href="#local-6989586621682082668"><span class="hs-identifier hs-var">report_mode</span></a></span><span> </span><span class="annot"><span class="annottext">ann
</span><a href="#local-6989586621682082672"><span class="hs-identifier hs-var">ann</span></a></span><span>
</span><span id="line-346"></span><span>  </span><span id="local-6989586621682082674"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682082674"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IOEnv (Env DsGblEnv DsLclEnv) DynFlags
forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-347"></span><span>  </span><span class="annot"><span class="annottext">DynFlags
-&gt; FormatReportWarningsMode ann
-&gt; DsMatchContext
-&gt; [Id]
-&gt; CheckResult CIRB
-&gt; DsM ()
forall ann.
DynFlags
-&gt; FormatReportWarningsMode ann
-&gt; DsMatchContext
-&gt; [Id]
-&gt; CheckResult CIRB
-&gt; DsM ()
</span><a href="GHC.HsToCore.Pmc.html#reportWarnings"><span class="hs-identifier hs-var">reportWarnings</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682082674"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">FormatReportWarningsMode ann
</span><a href="#local-6989586621682082668"><span class="hs-identifier hs-var">report_mode</span></a></span><span> </span><span class="annot"><span class="annottext">DsMatchContext
</span><a href="#local-6989586621682082669"><span class="hs-identifier hs-var">ctx</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682082670"><span class="hs-identifier hs-var">vars</span></a></span><span> </span><span class="annot"><span class="annottext">CheckResult ann
</span><a href="#local-6989586621682082671"><span class="hs-identifier hs-var">cr</span></a></span><span class="hs-special">{</span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#cr_ret"><span class="hs-identifier hs-var">cr_ret</span></a></span><span class="hs-glyph">=</span><span class="annot"><a href="#local-6989586621682082673"><span class="hs-identifier hs-type">cov_info</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-348"></span><span>
</span><span id="line-349"></span><span class="hs-comment">-- | Issue all the warnings</span><span>
</span><span id="line-350"></span><span class="hs-comment">-- (redundancy, inaccessibility, exhaustiveness, redundant bangs).</span><span>
</span><span id="line-351"></span><span id="local-6989586621682082259"><span class="annot"><a href="GHC.HsToCore.Pmc.html#reportWarnings"><span class="hs-identifier hs-type">reportWarnings</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#DynFlags"><span class="hs-identifier hs-type">DynFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#FormatReportWarningsMode"><span class="hs-identifier hs-type">FormatReportWarningsMode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682082259"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Monad.html#DsMatchContext"><span class="hs-identifier hs-type">DsMatchContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#CheckResult"><span class="hs-identifier hs-type">CheckResult</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#CIRB"><span class="hs-identifier hs-type">CIRB</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Types.html#DsM"><span class="hs-identifier hs-type">DsM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-352"></span><span id="reportWarnings"><span class="annot"><span class="annottext">reportWarnings :: forall ann.
DynFlags
-&gt; FormatReportWarningsMode ann
-&gt; DsMatchContext
-&gt; [Id]
-&gt; CheckResult CIRB
-&gt; DsM ()
</span><a href="GHC.HsToCore.Pmc.html#reportWarnings"><span class="hs-identifier hs-var hs-var">reportWarnings</span></a></span></span><span> </span><span id="local-6989586621682082703"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682082703"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span id="local-6989586621682082704"><span class="annot"><span class="annottext">FormatReportWarningsMode ann
</span><a href="#local-6989586621682082704"><span class="hs-identifier hs-var">report_mode</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Monad.html#DsMatchContext"><span class="hs-identifier hs-type">DsMatchContext</span></a></span><span> </span><span id="local-6989586621682082705"><span class="annot"><span class="annottext">HsMatchContext GhcRn
</span><a href="#local-6989586621682082705"><span class="hs-identifier hs-var">kind</span></a></span></span><span> </span><span id="local-6989586621682082706"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682082706"><span class="hs-identifier hs-var">loc</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682082707"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682082707"><span class="hs-identifier hs-var">vars</span></a></span></span><span>
</span><span id="line-353"></span><span>  </span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#CheckResult"><span class="hs-identifier hs-type">CheckResult</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cr_ret :: forall a. CheckResult a -&gt; a
</span><a href="GHC.HsToCore.Pmc.Types.html#cr_ret"><span class="hs-identifier hs-var">cr_ret</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.html#CIRB"><span class="hs-identifier hs-type">CIRB</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cirb_inacc :: CIRB -&gt; OrdList SrcInfo
</span><a href="GHC.HsToCore.Pmc.html#cirb_inacc"><span class="hs-identifier hs-var">cirb_inacc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682082708"><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082708"><span class="hs-identifier hs-var">inaccessible_rhss</span></a></span></span><span>
</span><span id="line-354"></span><span>                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cirb_red :: CIRB -&gt; OrdList SrcInfo
</span><a href="GHC.HsToCore.Pmc.html#cirb_red"><span class="hs-identifier hs-var">cirb_red</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682082709"><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082709"><span class="hs-identifier hs-var">redundant_rhss</span></a></span></span><span>
</span><span id="line-355"></span><span>                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cirb_bangs :: CIRB -&gt; OrdList SrcInfo
</span><a href="GHC.HsToCore.Pmc.html#cirb_bangs"><span class="hs-identifier hs-var">cirb_bangs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682082710"><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082710"><span class="hs-identifier hs-var">redundant_bangs</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-356"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cr_uncov :: forall a. CheckResult a -&gt; Nablas
</span><a href="GHC.HsToCore.Pmc.Types.html#cr_uncov"><span class="hs-identifier hs-var">cr_uncov</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682082711"><span class="annot"><span class="annottext">Nablas
</span><a href="#local-6989586621682082711"><span class="hs-identifier hs-var">uncovered</span></a></span></span><span>
</span><span id="line-357"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cr_approx :: forall a. CheckResult a -&gt; Precision
</span><a href="GHC.HsToCore.Pmc.Types.html#cr_approx"><span class="hs-identifier hs-var">cr_approx</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682082713"><span class="annot"><span class="annottext">Precision
</span><a href="#local-6989586621682082713"><span class="hs-identifier hs-var">precision</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-358"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; DsM () -&gt; DsM ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#when/GHC.Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682082714"><span class="hs-identifier hs-var">flag_i</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682082716"><span class="hs-identifier hs-var">flag_u</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682082717"><span class="hs-identifier hs-var">flag_b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(DsM () -&gt; DsM ()) -&gt; DsM () -&gt; DsM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-359"></span><span>      </span><span id="local-6989586621682082718"><span class="annot"><span class="annottext">[Nabla]
</span><a href="#local-6989586621682082718"><span class="hs-identifier hs-var">unc_examples</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenerateInhabitingPatternsMode
-&gt; [Id] -&gt; Int -&gt; Nablas -&gt; DsM [Nabla]
</span><a href="GHC.HsToCore.Pmc.html#getNFirstUncovered"><span class="hs-identifier hs-var">getNFirstUncovered</span></a></span><span> </span><span class="annot"><span class="annottext">GenerateInhabitingPatternsMode
</span><a href="#local-6989586621682082720"><span class="hs-identifier hs-var">gen_mode</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682082707"><span class="hs-identifier hs-var">vars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682082721"><span class="hs-identifier hs-var">maxPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Nablas
</span><a href="#local-6989586621682082711"><span class="hs-identifier hs-var">uncovered</span></a></span><span>
</span><span id="line-360"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682082723"><span class="annot"><span class="annottext">exists_r :: Bool
</span><a href="#local-6989586621682082723"><span class="hs-identifier hs-var hs-var">exists_r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682082714"><span class="hs-identifier hs-var">flag_i</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo -&gt; Bool
forall (f :: * -&gt; *) a. Foldable f =&gt; f a -&gt; Bool
</span><a href="GHC.Utils.Misc.html#notNull"><span class="hs-identifier hs-var">notNull</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082709"><span class="hs-identifier hs-var">redundant_rhss</span></a></span><span>
</span><span id="line-361"></span><span>          </span><span id="local-6989586621682082726"><span class="annot"><span class="annottext">exists_i :: Bool
</span><a href="#local-6989586621682082726"><span class="hs-identifier hs-var hs-var">exists_i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682082714"><span class="hs-identifier hs-var">flag_i</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo -&gt; Bool
forall (f :: * -&gt; *) a. Foldable f =&gt; f a -&gt; Bool
</span><a href="GHC.Utils.Misc.html#notNull"><span class="hs-identifier hs-var">notNull</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082708"><span class="hs-identifier hs-var">inaccessible_rhss</span></a></span><span>
</span><span id="line-362"></span><span>          </span><span id="local-6989586621682082727"><span class="annot"><span class="annottext">exists_u :: Bool
</span><a href="#local-6989586621682082727"><span class="hs-identifier hs-var hs-var">exists_u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682082716"><span class="hs-identifier hs-var">flag_u</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">[Nabla] -&gt; Bool
forall (f :: * -&gt; *) a. Foldable f =&gt; f a -&gt; Bool
</span><a href="GHC.Utils.Misc.html#notNull"><span class="hs-identifier hs-var">notNull</span></a></span><span> </span><span class="annot"><span class="annottext">[Nabla]
</span><a href="#local-6989586621682082718"><span class="hs-identifier hs-var">unc_examples</span></a></span><span>
</span><span id="line-363"></span><span>          </span><span id="local-6989586621682082728"><span class="annot"><span class="annottext">exists_b :: Bool
</span><a href="#local-6989586621682082728"><span class="hs-identifier hs-var hs-var">exists_b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682082717"><span class="hs-identifier hs-var">flag_b</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo -&gt; Bool
forall (f :: * -&gt; *) a. Foldable f =&gt; f a -&gt; Bool
</span><a href="GHC.Utils.Misc.html#notNull"><span class="hs-identifier hs-var">notNull</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082710"><span class="hs-identifier hs-var">redundant_bangs</span></a></span><span>
</span><span id="line-364"></span><span>          </span><span id="local-6989586621682082729"><span class="annot"><span class="annottext">approx :: Bool
</span><a href="#local-6989586621682082729"><span class="hs-identifier hs-var hs-var">approx</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Precision
</span><a href="#local-6989586621682082713"><span class="hs-identifier hs-var">precision</span></a></span><span> </span><span class="annot"><span class="annottext">Precision -&gt; Precision -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Precision
</span><a href="GHC.HsToCore.Pmc.Types.html#Approximate"><span class="hs-identifier hs-var">Approximate</span></a></span><span>
</span><span id="line-365"></span><span>
</span><span id="line-366"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; DsM () -&gt; DsM ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#when/GHC.Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682082729"><span class="hs-identifier hs-var">approx</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682082727"><span class="hs-identifier hs-var">exists_u</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682082726"><span class="hs-identifier hs-var">exists_i</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(DsM () -&gt; DsM ()) -&gt; DsM () -&gt; DsM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-367"></span><span>        </span><span class="annot"><span class="annottext">SrcSpan -&gt; DsM () -&gt; DsM ()
forall a. SrcSpan -&gt; DsM a -&gt; DsM a
</span><a href="GHC.HsToCore.Monad.html#putSrcSpanDs"><span class="hs-identifier hs-var">putSrcSpanDs</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682082706"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DsMessage -&gt; DsM ()
</span><a href="GHC.HsToCore.Monad.html#diagnosticDs"><span class="hs-identifier hs-var">diagnosticDs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; DsMessage
</span><a href="GHC.HsToCore.Errors.Types.html#DsMaxPmCheckModelsReached"><span class="hs-identifier hs-var">DsMaxPmCheckModelsReached</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; Int
</span><a href="GHC.Driver.Session.html#maxPmCheckModels"><span class="hs-identifier hs-var">maxPmCheckModels</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682082703"><span class="hs-identifier hs-var">dflags</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-368"></span><span>
</span><span id="line-369"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; DsM () -&gt; DsM ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#when/GHC.Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682082728"><span class="hs-identifier hs-var">exists_b</span></a></span><span> </span><span class="annot"><span class="annottext">(DsM () -&gt; DsM ()) -&gt; DsM () -&gt; DsM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo -&gt; (SrcInfo -&gt; DsM ()) -&gt; DsM ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#forM_/Data.Foldable.html#forM_"><span class="hs-identifier hs-var">forM_</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082710"><span class="hs-identifier hs-var">redundant_bangs</span></a></span><span> </span><span class="annot"><span class="annottext">((SrcInfo -&gt; DsM ()) -&gt; DsM ()) -&gt; (SrcInfo -&gt; DsM ()) -&gt; DsM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#SrcInfo"><span class="hs-identifier hs-type">SrcInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682082736"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682082736"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682082737"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682082737"><span class="hs-identifier hs-var">q</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-370"></span><span>        </span><span class="annot"><span class="annottext">SrcSpan -&gt; DsM () -&gt; DsM ()
forall a. SrcSpan -&gt; DsM a -&gt; DsM a
</span><a href="GHC.HsToCore.Monad.html#putSrcSpanDs"><span class="hs-identifier hs-var">putSrcSpanDs</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682082736"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DsMessage -&gt; DsM ()
</span><a href="GHC.HsToCore.Monad.html#diagnosticDs"><span class="hs-identifier hs-var">diagnosticDs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsMatchContext GhcRn -&gt; SDoc -&gt; DsMessage
</span><a href="GHC.HsToCore.Errors.Types.html#DsRedundantBangPatterns"><span class="hs-identifier hs-var">DsRedundantBangPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContext GhcRn
</span><a href="#local-6989586621682082705"><span class="hs-identifier hs-var">kind</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682082737"><span class="hs-identifier hs-var">q</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-371"></span><span>
</span><span id="line-372"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; DsM () -&gt; DsM ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#when/GHC.Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682082723"><span class="hs-identifier hs-var">exists_r</span></a></span><span> </span><span class="annot"><span class="annottext">(DsM () -&gt; DsM ()) -&gt; DsM () -&gt; DsM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo -&gt; (SrcInfo -&gt; DsM ()) -&gt; DsM ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#forM_/Data.Foldable.html#forM_"><span class="hs-identifier hs-var">forM_</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082709"><span class="hs-identifier hs-var">redundant_rhss</span></a></span><span> </span><span class="annot"><span class="annottext">((SrcInfo -&gt; DsM ()) -&gt; DsM ()) -&gt; (SrcInfo -&gt; DsM ()) -&gt; DsM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#SrcInfo"><span class="hs-identifier hs-type">SrcInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682082739"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682082739"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682082740"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682082740"><span class="hs-identifier hs-var">q</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-373"></span><span>        </span><span class="annot"><span class="annottext">SrcSpan -&gt; DsM () -&gt; DsM ()
forall a. SrcSpan -&gt; DsM a -&gt; DsM a
</span><a href="GHC.HsToCore.Monad.html#putSrcSpanDs"><span class="hs-identifier hs-var">putSrcSpanDs</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682082739"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DsMessage -&gt; DsM ()
</span><a href="GHC.HsToCore.Monad.html#diagnosticDs"><span class="hs-identifier hs-var">diagnosticDs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsMatchContext GhcRn -&gt; SDoc -&gt; DsMessage
</span><a href="GHC.HsToCore.Errors.Types.html#DsOverlappingPatterns"><span class="hs-identifier hs-var">DsOverlappingPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContext GhcRn
</span><a href="#local-6989586621682082705"><span class="hs-identifier hs-var">kind</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682082740"><span class="hs-identifier hs-var">q</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-374"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; DsM () -&gt; DsM ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#when/GHC.Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682082726"><span class="hs-identifier hs-var">exists_i</span></a></span><span> </span><span class="annot"><span class="annottext">(DsM () -&gt; DsM ()) -&gt; DsM () -&gt; DsM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo -&gt; (SrcInfo -&gt; DsM ()) -&gt; DsM ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#forM_/Data.Foldable.html#forM_"><span class="hs-identifier hs-var">forM_</span></a></span><span> </span><span class="annot"><span class="annottext">OrdList SrcInfo
</span><a href="#local-6989586621682082708"><span class="hs-identifier hs-var">inaccessible_rhss</span></a></span><span> </span><span class="annot"><span class="annottext">((SrcInfo -&gt; DsM ()) -&gt; DsM ()) -&gt; (SrcInfo -&gt; DsM ()) -&gt; DsM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Types.html#SrcInfo"><span class="hs-identifier hs-type">SrcInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682082742"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682082742"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682082743"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682082743"><span class="hs-identifier hs-var">q</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-375"></span><span>        </span><span class="annot"><span class="annottext">SrcSpan -&gt; DsM () -&gt; DsM ()
forall a. SrcSpan -&gt; DsM a -&gt; DsM a
</span><a href="GHC.HsToCore.Monad.html#putSrcSpanDs"><span class="hs-identifier hs-var">putSrcSpanDs</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682082742"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DsMessage -&gt; DsM ()
</span><a href="GHC.HsToCore.Monad.html#diagnosticDs"><span class="hs-identifier hs-var">diagnosticDs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsMatchContext GhcRn -&gt; SDoc -&gt; DsMessage
</span><a href="GHC.HsToCore.Errors.Types.html#DsInaccessibleRhs"><span class="hs-identifier hs-var">DsInaccessibleRhs</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContext GhcRn
</span><a href="#local-6989586621682082705"><span class="hs-identifier hs-var">kind</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682082743"><span class="hs-identifier hs-var">q</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-376"></span><span>
</span><span id="line-377"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; DsM () -&gt; DsM ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#when/GHC.Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682082727"><span class="hs-identifier hs-var">exists_u</span></a></span><span> </span><span class="annot"><span class="annottext">(DsM () -&gt; DsM ()) -&gt; DsM () -&gt; DsM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-378"></span><span>        </span><span class="annot"><span class="annottext">SrcSpan -&gt; DsM () -&gt; DsM ()
forall a. SrcSpan -&gt; DsM a -&gt; DsM a
</span><a href="GHC.HsToCore.Monad.html#putSrcSpanDs"><span class="hs-identifier hs-var">putSrcSpanDs</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682082706"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DsMessage -&gt; DsM ()
</span><a href="GHC.HsToCore.Monad.html#diagnosticDs"><span class="hs-identifier hs-var">diagnosticDs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsMatchContext GhcRn
-&gt; ExhaustivityCheckType -&gt; Int -&gt; [Id] -&gt; [Nabla] -&gt; DsMessage
</span><a href="GHC.HsToCore.Errors.Types.html#DsNonExhaustivePatterns"><span class="hs-identifier hs-var">DsNonExhaustivePatterns</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContext GhcRn
</span><a href="#local-6989586621682082705"><span class="hs-identifier hs-var">kind</span></a></span><span> </span><span class="annot"><span class="annottext">ExhaustivityCheckType
</span><a href="#local-6989586621682082746"><span class="hs-identifier hs-var">check_type</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682082721"><span class="hs-identifier hs-var">maxPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682082707"><span class="hs-identifier hs-var">vars</span></a></span><span> </span><span class="annot"><span class="annottext">[Nabla]
</span><a href="#local-6989586621682082718"><span class="hs-identifier hs-var">unc_examples</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-379"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-380"></span><span>    </span><span id="local-6989586621682082714"><span class="annot"><span class="annottext">flag_i :: Bool
</span><a href="#local-6989586621682082714"><span class="hs-identifier hs-var hs-var">flag_i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; HsMatchContext GhcRn -&gt; Bool
forall id. DynFlags -&gt; HsMatchContext id -&gt; Bool
</span><a href="GHC.HsToCore.Pmc.Utils.html#overlapping"><span class="hs-identifier hs-var">overlapping</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682082703"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContext GhcRn
</span><a href="#local-6989586621682082705"><span class="hs-identifier hs-var">kind</span></a></span><span>
</span><span id="line-381"></span><span>    </span><span id="local-6989586621682082716"><span class="annot"><span class="annottext">flag_u :: Bool
</span><a href="#local-6989586621682082716"><span class="hs-identifier hs-var hs-var">flag_u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; HsMatchContext GhcRn -&gt; Bool
forall id. DynFlags -&gt; HsMatchContext id -&gt; Bool
</span><a href="GHC.HsToCore.Pmc.Utils.html#exhaustive"><span class="hs-identifier hs-var">exhaustive</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682082703"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContext GhcRn
</span><a href="#local-6989586621682082705"><span class="hs-identifier hs-var">kind</span></a></span><span>
</span><span id="line-382"></span><span>    </span><span id="local-6989586621682082717"><span class="annot"><span class="annottext">flag_b :: Bool
</span><a href="#local-6989586621682082717"><span class="hs-identifier hs-var hs-var">flag_b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; Bool
</span><a href="GHC.HsToCore.Pmc.Utils.html#redundantBang"><span class="hs-identifier hs-var">redundantBang</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682082703"><span class="hs-identifier hs-var">dflags</span></a></span><span>
</span><span id="line-383"></span><span>    </span><span id="local-6989586621682082746"><span class="annot"><span class="annottext">check_type :: ExhaustivityCheckType
</span><a href="#local-6989586621682082746"><span class="hs-identifier hs-var hs-var">check_type</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe WarningFlag -&gt; ExhaustivityCheckType
</span><a href="GHC.HsToCore.Errors.Types.html#ExhaustivityCheckType"><span class="hs-identifier hs-var">ExhaustivityCheckType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsMatchContext GhcRn -&gt; Maybe WarningFlag
forall id. HsMatchContext id -&gt; Maybe WarningFlag
</span><a href="GHC.HsToCore.Pmc.Utils.html#exhaustiveWarningFlag"><span class="hs-identifier hs-var">exhaustiveWarningFlag</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContext GhcRn
</span><a href="#local-6989586621682082705"><span class="hs-identifier hs-var">kind</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-384"></span><span>    </span><span id="local-6989586621682082720"><span class="annot"><span class="annottext">gen_mode :: GenerateInhabitingPatternsMode
</span><a href="#local-6989586621682082720"><span class="hs-identifier hs-var hs-var">gen_mode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">FormatReportWarningsMode ann
</span><a href="#local-6989586621682082704"><span class="hs-identifier hs-var">report_mode</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-comment">-- See Note [Case split inhabiting patterns]</span><span>
</span><span id="line-385"></span><span>      </span><span class="annot"><span class="annottext">FormatReportWarningsMode ann
</span><a href="GHC.HsToCore.Pmc.html#ReportEmptyCase"><span class="hs-identifier hs-var">ReportEmptyCase</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GenerateInhabitingPatternsMode
</span><a href="GHC.HsToCore.Pmc.Solver.html#CaseSplitTopLevel"><span class="hs-identifier hs-var">CaseSplitTopLevel</span></a></span><span>
</span><span id="line-386"></span><span>      </span><span class="annot"><span class="annottext">FormatReportWarningsMode ann
</span><span class="hs-identifier">_</span></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GenerateInhabitingPatternsMode
</span><a href="GHC.HsToCore.Pmc.Solver.html#MinimalCover"><span class="hs-identifier hs-var">MinimalCover</span></a></span><span>
</span><span id="line-387"></span><span>
</span><span id="line-388"></span><span>    </span><span id="local-6989586621682082721"><span class="annot"><span class="annottext">maxPatterns :: Int
</span><a href="#local-6989586621682082721"><span class="hs-identifier hs-var hs-var">maxPatterns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; Int
</span><a href="GHC.Driver.Session.html#maxUncoveredPatterns"><span class="hs-identifier hs-var">maxUncoveredPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682082703"><span class="hs-identifier hs-var">dflags</span></a></span><span>
</span><span id="line-389"></span><span>
</span><span id="line-390"></span><span class="annot"><a href="GHC.HsToCore.Pmc.html#getNFirstUncovered"><span class="hs-identifier hs-type">getNFirstUncovered</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.html#GenerateInhabitingPatternsMode"><span class="hs-identifier hs-type">GenerateInhabitingPatternsMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#Nablas"><span class="hs-identifier hs-type">Nablas</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Types.html#DsM"><span class="hs-identifier hs-type">DsM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#Nabla"><span class="hs-identifier hs-type">Nabla</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-391"></span><span id="getNFirstUncovered"><span class="annot"><span class="annottext">getNFirstUncovered :: GenerateInhabitingPatternsMode
-&gt; [Id] -&gt; Int -&gt; Nablas -&gt; DsM [Nabla]
</span><a href="GHC.HsToCore.Pmc.html#getNFirstUncovered"><span class="hs-identifier hs-var hs-var">getNFirstUncovered</span></a></span></span><span> </span><span id="local-6989586621682082756"><span class="annot"><span class="annottext">GenerateInhabitingPatternsMode
</span><a href="#local-6989586621682082756"><span class="hs-identifier hs-var">mode</span></a></span></span><span> </span><span id="local-6989586621682082757"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682082757"><span class="hs-identifier hs-var">vars</span></a></span></span><span> </span><span id="local-6989586621682082758"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682082758"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#MkNablas"><span class="hs-identifier hs-type">MkNablas</span></a></span><span> </span><span id="local-6989586621682082760"><span class="annot"><span class="annottext">Bag Nabla
</span><a href="#local-6989586621682082760"><span class="hs-identifier hs-var">nablas</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Nabla] -&gt; DsM [Nabla]
</span><a href="#local-6989586621682082761"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682082758"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bag Nabla -&gt; [Nabla]
forall a. Bag a -&gt; [a]
</span><a href="GHC.Data.Bag.html#bagToList"><span class="hs-identifier hs-var">bagToList</span></a></span><span> </span><span class="annot"><span class="annottext">Bag Nabla
</span><a href="#local-6989586621682082760"><span class="hs-identifier hs-var">nablas</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-392"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-393"></span><span>    </span><span id="local-6989586621682082761"><span class="annot"><span class="annottext">go :: Int -&gt; [Nabla] -&gt; DsM [Nabla]
</span><a href="#local-6989586621682082761"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">[Nabla]
</span><span class="hs-identifier">_</span></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Nabla] -&gt; DsM [Nabla]
forall a. a -&gt; IOEnv (Env DsGblEnv DsLclEnv) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#pure/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-394"></span><span>    </span><span class="annot"><a href="#local-6989586621682082761"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Nabla] -&gt; DsM [Nabla]
forall a. a -&gt; IOEnv (Env DsGblEnv DsLclEnv) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#pure/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-395"></span><span>    </span><span class="annot"><a href="#local-6989586621682082761"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621682082763"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682082763"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682082764"><span class="annot"><span class="annottext">Nabla
</span><a href="#local-6989586621682082764"><span class="hs-identifier hs-var">nabla</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682082765"><span class="annot"><span class="annottext">[Nabla]
</span><a href="#local-6989586621682082765"><span class="hs-identifier hs-var">nablas</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-396"></span><span>      </span><span id="local-6989586621682082766"><span class="annot"><span class="annottext">[Nabla]
</span><a href="#local-6989586621682082766"><span class="hs-identifier hs-var">front</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenerateInhabitingPatternsMode
-&gt; [Id] -&gt; Int -&gt; Nabla -&gt; DsM [Nabla]
</span><a href="GHC.HsToCore.Pmc.Solver.html#generateInhabitingPatterns"><span class="hs-identifier hs-var">generateInhabitingPatterns</span></a></span><span> </span><span class="annot"><span class="annottext">GenerateInhabitingPatternsMode
</span><a href="#local-6989586621682082756"><span class="hs-identifier hs-var">mode</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682082757"><span class="hs-identifier hs-var">vars</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682082763"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Nabla
</span><a href="#local-6989586621682082764"><span class="hs-identifier hs-var">nabla</span></a></span><span>
</span><span id="line-397"></span><span>      </span><span id="local-6989586621682082768"><span class="annot"><span class="annottext">[Nabla]
</span><a href="#local-6989586621682082768"><span class="hs-identifier hs-var">back</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Nabla] -&gt; DsM [Nabla]
</span><a href="#local-6989586621682082761"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682082763"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#-/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">[Nabla] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#length/Data.Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[Nabla]
</span><a href="#local-6989586621682082766"><span class="hs-identifier hs-var">front</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Nabla]
</span><a href="#local-6989586621682082765"><span class="hs-identifier hs-var">nablas</span></a></span><span>
</span><span id="line-398"></span><span>      </span><span class="annot"><span class="annottext">[Nabla] -&gt; DsM [Nabla]
forall a. a -&gt; IOEnv (Env DsGblEnv DsLclEnv) a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#pure/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Nabla]
</span><a href="#local-6989586621682082766"><span class="hs-identifier hs-var">front</span></a></span><span> </span><span class="annot"><span class="annottext">[Nabla] -&gt; [Nabla] -&gt; [Nabla]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Nabla]
</span><a href="#local-6989586621682082768"><span class="hs-identifier hs-var">back</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-399"></span><span>
</span><span id="line-400"></span><span class="hs-comment">--</span><span>
</span><span id="line-401"></span><span class="annot"><span class="hs-comment">-- * Adding external long-distance information</span></span><span>
</span><span id="line-402"></span><span class="hs-comment">--</span><span>
</span><span id="line-403"></span><span>
</span><span id="line-404"></span><span class="hs-comment">-- | Locally update 'dsl_nablas' with the given action, but defer evaluation</span><span>
</span><span id="line-405"></span><span class="hs-comment">-- with 'unsafeInterleaveM' in order not to do unnecessary work.</span><span>
</span><span id="line-406"></span><span id="local-6989586621682082282"><span class="annot"><a href="GHC.HsToCore.Pmc.html#locallyExtendPmNablas"><span class="hs-identifier hs-type">locallyExtendPmNablas</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#Nablas"><span class="hs-identifier hs-type">Nablas</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Types.html#DsM"><span class="hs-identifier hs-type">DsM</span></a></span><span> </span><span class="annot"><a href="GHC.HsToCore.Pmc.Solver.Types.html#Nablas"><span class="hs-identifier hs-type">Nablas</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Types.html#DsM"><span class="hs-identifier hs-type">DsM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682082282"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Types.html#DsM"><span class="hs-identifier hs-type">DsM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682082282"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-407"></span><span id="locallyExtendPmNablas"><span class="annot"><span class="annottext">locallyExtendPmNablas :: forall a. (Nablas -&gt; DsM Nablas) -&gt; DsM a -&gt; DsM a
</span><a href="GHC.HsToCore.Pmc.html#locallyExtendPmNablas"><span class="hs-identifier hs-var hs-var">locallyExtendPmNablas</span></a></span></span><span> </span><span id="local-6989586621682082773"><span class="annot"><span class="annottext">Nablas -&gt; DsM Nablas
</span><a href="#local-6989586621682082773"><span class="hs-identifier hs-var">ext</span></a></span></span><span> </span><span id="local-6989586621682082774"><span class="annot"><span class="annottext">DsM a
</span><a href="#local-6989586621682082774"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-408"></span><span>  </span><span id="local-6989586621682082775"><span class="annot"><span class="annottext">Nablas
</span><a href="#local-6989586621682082775"><span class="hs-identifier hs-var">nablas</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DsM Nablas
</span><a href="GHC.HsToCore.Pmc.html#getLdiNablas"><span class="hs-identifier hs-var">getLdiNablas</span></a></span><span>
</span><span id="line-409"></span><span>  </span><span id="local-6989586621682082776"><span class="annot"><span class="annottext">Nablas
</span><a href="#local-6989586621682082776"><span class="hs-identifier hs-var">nablas'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DsM Nablas -&gt; DsM Nablas
forall env a. IOEnv env a -&gt; IOEnv env a
</span><a href="GHC.Data.IOEnv.html#unsafeInterleaveM"><span class="hs-identifier hs-var">unsafeInterleaveM</span></a></span><span> </span><span class="annot"><span class="annottext">(DsM Nablas -&gt; DsM Nablas) -&gt; DsM Nablas -&gt; DsM Nablas
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Nablas -&gt; DsM Nablas
</span><a href="#local-6989586621682082773"><span class="hs-identifier hs-var">ext</span></a></span><span> </span><span class="annot"><span class="annottext">Nablas
</span><a href="#local-6989586621682082775"><span class="hs-identifier hs-var">nablas</span></a></span><span>
</span><span id="line-410"></span><span>  </span><span class="annot"><span class="annottext">Nablas -&gt; DsM a -&gt; DsM a
forall a. Nablas -&gt; DsM a -&gt; DsM a
</span><a href="GHC.HsToCore.Monad.html#updPmNablas"><span class="hs-identifier hs-var">updPmNablas</span></a></span><span> </span><span class="annot"><span class="annottext">Nablas
</span><a href="#local-6989586621682082776"><span class="hs-identifier hs-var">nablas'</span></a></span><span> </span><span class="annot"><span class="annottext">DsM a
</span><a href="#local-6989586621682082774"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-411"></span><span>
</span><span id="line-412"></span><span class="hs-comment">-- | Add in-scope type constraints if the coverage checker might run and then</span><span>
</span><span id="line-413"></span><span class="hs-comment">-- run the given action.</span><span>
</span><span id="line-414"></span><span id="local-6989586621682082288"><span class="annot"><a href="GHC.HsToCore.Pmc.html#addTyCs"><span class="hs-identifier hs-type">addTyCs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Origin"><span class="hs-identifier hs-type">Origin</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html#Bag"><span class="hs-identifier hs-type">Bag</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Types.html#DsM"><span class="hs-identifier hs-type">DsM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682082288"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Types.html#DsM"><span class="hs-identifier hs-type">DsM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682082288"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-415"></span><span id="addTyCs"><span class="annot"><span class="annottext">addTyCs :: forall a. Origin -&gt; Bag Id -&gt; DsM a -&gt; DsM a
</span><a href="GHC.HsToCore.Pmc.html#addTyCs"><span class="hs-identifier hs-var hs-var">addTyCs</span></a></span></span><span> </span><span id="local-6989586621682082783"><span class="annot"><span class="annottext">Origin
</span><a href="#local-6989586621682082783"><span class="hs-identifier hs-var">origin</span></a></span></span><span> </span><span id="local-6989586621682082784"><span class="annot"><span class="annottext">Bag Id
</span><a href="#local-6989586621682082784"><span class="hs-identifier hs-var">ev_vars</span></a></span></span><span> </span><span id="local-6989586621682082785"><span class="annot"><span class="annottext">DsM a
</span><a href="#local-6989586621682082785"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-416"></span><span>  </span><span id="local-6989586621682082786"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682082786"><span class="hs-identifier hs-var">dflags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IOEnv (Env DsGblEnv DsLclEnv) DynFlags
forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-417"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; (DsM a -&gt; DsM a) -&gt; DsM a -&gt; DsM a
forall a. Bool -&gt; (a -&gt; a) -&gt; a -&gt; a
</span><a href="GHC.Utils.Misc.html#applyWhen"><span class="hs-identifier hs-var">applyWhen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DynFlags -&gt; Origin -&gt; Bool
</span><a href="GHC.HsToCore.Pmc.Utils.html#needToRunPmCheck"><span class="hs-identifier hs-var">needToRunPmCheck</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682082786"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="#local-6989586621682082783"><span class="hs-identifier hs-var">origin</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-418"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Nablas -&gt; DsM Nablas) -&gt; DsM a -&gt; DsM a
forall a. (Nablas -&gt; DsM Nablas) -&gt; DsM a -&gt; DsM a
</span><a href="GHC.HsToCore.Pmc.html#locallyExtendPmNablas"><span class="hs-identifier hs-var">locallyExtendPmNablas</span></a></span><span> </span><span class="annot"><span class="annottext">((Nablas -&gt; DsM Nablas) -&gt; DsM a -&gt; DsM a)
-&gt; (Nablas -&gt; DsM Nablas) -&gt; DsM a -&gt; DsM a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682082788"><span class="annot"><span class="annottext">Nablas
</span><a href="#local-6989586621682082788"><span class="hs-identifier hs-var">nablas</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-419"></span><span>              </span><span class="annot"><span class="annottext">Nablas -&gt; PhiCts -&gt; DsM Nablas
</span><a href="GHC.HsToCore.Pmc.Solver.html#addPhiCtsNablas"><span class="hs-identifier hs-var">addPhiCtsNablas</span></a></span><span> </span><span class="annot"><span class="annottext">Nablas
</span><a href="#local-6989586621682082788"><span class="hs-identifier hs-var">nablas</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PredType -&gt; PhiCt
</span><a href="GHC.HsToCore.Pmc.Solver.html#PhiTyCt"><span class="hs-identifier hs-var">PhiTyCt</span></a></span><span> </span><span class="annot"><span class="annottext">(PredType -&gt; PhiCt) -&gt; (Id -&gt; PredType) -&gt; Id -&gt; PhiCt
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; PredType
</span><a href="GHC.Tc.Utils.TcType.html#evVarPred"><span class="hs-identifier hs-var">evVarPred</span></a></span><span> </span><span class="annot"><span class="annottext">(Id -&gt; PhiCt) -&gt; Bag Id -&gt; PhiCts
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/Data.Functor.html#%3C%24%3E/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Bag Id
</span><a href="#local-6989586621682082784"><span class="hs-identifier hs-var">ev_vars</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-420"></span><span>            </span><span class="annot"><span class="annottext">DsM a
</span><a href="#local-6989586621682082785"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-421"></span><span>
</span><span id="line-422"></span><span class="hs-comment">-- | Add equalities for the 'CoreExpr' scrutinees to the local 'DsM' environment,</span><span>
</span><span id="line-423"></span><span class="hs-comment">-- e.g. when checking a case expression:</span><span>
</span><span id="line-424"></span><span class="hs-comment">--     case e of x { matches }</span><span>
</span><span id="line-425"></span><span class="hs-comment">-- When checking matches we record that (x ~ e) where x is the initial</span><span>
</span><span id="line-426"></span><span class="hs-comment">-- uncovered. All matches will have to satisfy this equality.</span><span>
</span><span id="line-427"></span><span class="hs-comment">-- This is also used for the Arrows \cases command, where these equalities have</span><span>
</span><span id="line-428"></span><span class="hs-comment">-- to be added for multiple scrutinees rather than just one.</span><span>
</span><span id="line-429"></span><span id="local-6989586621682082297"><span class="annot"><a href="GHC.HsToCore.Pmc.html#addCoreScrutTmCs"><span class="hs-identifier hs-type">addCoreScrutTmCs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.html#CoreExpr"><span class="hs-identifier hs-type">CoreExpr</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Types.html#DsM"><span class="hs-identifier hs-type">DsM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682082297"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Types.html#DsM"><span class="hs-identifier hs-type">DsM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682082297"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-430"></span><span id="addCoreScrutTmCs"><span class="annot"><span class="annottext">addCoreScrutTmCs :: forall a. [CoreExpr] -&gt; [Id] -&gt; DsM a -&gt; DsM a
</span><a href="GHC.HsToCore.Pmc.html#addCoreScrutTmCs"><span class="hs-identifier hs-var hs-var">addCoreScrutTmCs</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>         </span><span class="annot"><span class="annottext">[Id]
</span><span class="hs-identifier">_</span></span><span>      </span><span id="local-6989586621682082794"><span class="annot"><span class="annottext">DsM a
</span><a href="#local-6989586621682082794"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DsM a
</span><a href="#local-6989586621682082794"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-431"></span><span class="annot"><a href="GHC.HsToCore.Pmc.html#addCoreScrutTmCs"><span class="hs-identifier hs-var">addCoreScrutTmCs</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682082795"><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682082795"><span class="hs-identifier hs-var">scr</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682082796"><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621682082796"><span class="hs-identifier hs-var">scrs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682082797"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682082797"><span class="hs-identifier hs-var">x</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621682082798"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682082798"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682082799"><span class="annot"><span class="annottext">DsM a
</span><a href="#local-6989586621682082799"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-432"></span><span>  </span><span class="annot"><span class="annottext">((Nablas -&gt; DsM Nablas) -&gt; DsM a -&gt; DsM a)
-&gt; DsM a -&gt; (Nablas -&gt; DsM Nablas) -&gt; DsM a
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#flip/GHC.Base.html#flip"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">(Nablas -&gt; DsM Nablas) -&gt; DsM a -&gt; DsM a
forall a. (Nablas -&gt; DsM Nablas) -&gt; DsM a -&gt; DsM a
</span><a href="GHC.HsToCore.Pmc.html#locallyExtendPmNablas"><span class="hs-identifier hs-var">locallyExtendPmNablas</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[CoreExpr] -&gt; [Id] -&gt; DsM a -&gt; DsM a
forall a. [CoreExpr] -&gt; [Id] -&gt; DsM a -&gt; DsM a
</span><a href="GHC.HsToCore.Pmc.html#addCoreScrutTmCs"><span class="hs-identifier hs-var">addCoreScrutTmCs</span></a></span><span> </span><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621682082796"><span class="hs-identifier hs-var">scrs</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682082798"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">DsM a
</span><a href="#local-6989586621682082799"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Nablas -&gt; DsM Nablas) -&gt; DsM a)
-&gt; (Nablas -&gt; DsM Nablas) -&gt; DsM a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621682082800"><span class="annot"><span class="annottext">Nablas
</span><a href="#local-6989586621682082800"><span class="hs-identifier hs-var">nablas</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-433"></span><span>    </span><span class="annot"><span class="annottext">Nablas -&gt; PhiCts -&gt; DsM Nablas
</span><a href="GHC.HsToCore.Pmc.Solver.html#addPhiCtsNablas"><span class="hs-identifier hs-var">addPhiCtsNablas</span></a></span><span> </span><span class="annot"><span class="annottext">Nablas
</span><a href="#local-6989586621682082800"><span class="hs-identifier hs-var">nablas</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PhiCt -&gt; PhiCts
forall a. a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#unitBag"><span class="hs-identifier hs-var">unitBag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; CoreExpr -&gt; PhiCt
</span><a href="GHC.HsToCore.Pmc.Solver.html#PhiCoreCt"><span class="hs-identifier hs-var">PhiCoreCt</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682082797"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CoreExpr
</span><a href="#local-6989586621682082795"><span class="hs-identifier hs-var">scr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-434"></span><span class="annot"><a href="GHC.HsToCore.Pmc.html#addCoreScrutTmCs"><span class="hs-identifier hs-var">addCoreScrutTmCs</span></a></span><span> </span><span class="annot"><span class="annottext">[CoreExpr]
</span><span class="hs-identifier">_</span></span><span>   </span><span class="annot"><span class="annottext">[Id]
</span><span class="hs-identifier">_</span></span><span>   </span><span class="annot"><span class="annottext">DsM a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; DsM a
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;addCoreScrutTmCs: numbers of scrutinees and match ids differ&quot;</span></span><span>
</span><span id="line-435"></span><span>
</span><span id="line-436"></span><span class="annot"><span class="hs-comment">-- | 'addCoreScrutTmCs', but desugars the 'LHsExpr's first.</span></span><span>
</span><span id="line-437"></span><span id="local-6989586621682082302"><span class="annot"><a href="GHC.HsToCore.Pmc.html#addHsScrutTmCs"><span class="hs-identifier hs-type">addHsScrutTmCs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Types.html#DsM"><span class="hs-identifier hs-type">DsM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682082302"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.HsToCore.Types.html#DsM"><span class="hs-identifier hs-type">DsM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682082302"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-438"></span><span id="addHsScrutTmCs"><span class="annot"><span class="annottext">addHsScrutTmCs :: forall a. [LHsExpr GhcTc] -&gt; [Id] -&gt; DsM a -&gt; DsM a
</span><a href="GHC.HsToCore.Pmc.html#addHsScrutTmCs"><span class="hs-identifier hs-var hs-var">addHsScrutTmCs</span></a></span></span><span> </span><span id="local-6989586621682082808"><span class="annot"><span class="annottext">[LHsExpr GhcTc]
</span><a href="#local-6989586621682082808"><span class="hs-identifier hs-var">scrs</span></a></span></span><span> </span><span id="local-6989586621682082809"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682082809"><span class="hs-identifier hs-var">vars</span></a></span></span><span> </span><span id="local-6989586621682082810"><span class="annot"><span class="annottext">DsM a
</span><a href="#local-6989586621682082810"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-439"></span><span>  </span><span id="local-6989586621682082811"><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621682082811"><span class="hs-identifier hs-var">scr_es</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsExpr GhcTc)
 -&gt; IOEnv (Env DsGblEnv DsLclEnv) CoreExpr)
-&gt; [GenLocated SrcSpanAnnA (HsExpr GhcTc)]
-&gt; IOEnv (Env DsGblEnv DsLclEnv) [CoreExpr]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><a href="../../base-4.18.3.0/src/Data.Traversable.html#traverse/Data.Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc -&gt; IOEnv (Env DsGblEnv DsLclEnv) CoreExpr
GenLocated SrcSpanAnnA (HsExpr GhcTc)
-&gt; IOEnv (Env DsGblEnv DsLclEnv) CoreExpr
</span><a href="GHC.HsToCore.Expr.html#dsLExpr"><span class="hs-identifier hs-var">dsLExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsExpr GhcTc]
[GenLocated SrcSpanAnnA (HsExpr GhcTc)]
</span><a href="#local-6989586621682082808"><span class="hs-identifier hs-var">scrs</span></a></span><span>
</span><span id="line-440"></span><span>  </span><span class="annot"><span class="annottext">[CoreExpr] -&gt; [Id] -&gt; DsM a -&gt; DsM a
forall a. [CoreExpr] -&gt; [Id] -&gt; DsM a -&gt; DsM a
</span><a href="GHC.HsToCore.Pmc.html#addCoreScrutTmCs"><span class="hs-identifier hs-var">addCoreScrutTmCs</span></a></span><span> </span><span class="annot"><span class="annottext">[CoreExpr]
</span><a href="#local-6989586621682082811"><span class="hs-identifier hs-var">scr_es</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682082809"><span class="hs-identifier hs-var">vars</span></a></span><span> </span><span class="annot"><span class="annottext">DsM a
</span><a href="#local-6989586621682082810"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-441"></span><span>
</span><span id="line-442"></span><span class="hs-comment">{- Note [Long-distance information]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Consider

  data Color = R | G | B
  f :: Color -&gt; Int
  f R = &#8230;
  f c = &#8230; (case c of
          G -&gt; True
          B -&gt; False) &#8230;

Humans can make the &quot;long-distance connection&quot; between the outer pattern match
and the nested case pattern match to see that the inner pattern match is
exhaustive: @c@ can't be @R@ anymore because it was matched in the first clause
of @f@.

To achieve similar reasoning in the coverage checker, we keep track of the set
of values that can reach a particular program point (often loosely referred to
as &quot;Covered set&quot;) in 'GHC.HsToCore.Monad.dsl_nablas'.
We fill that set with Covered Nablas returned by the exported checking
functions, which the call sites put into place with
'GHC.HsToCore.Monad.updPmNablas'.
Call sites also extend this set with facts from type-constraint dictionaries,
case scrutinees, etc. with the exported functions 'addTyCs', 'addCoreScrutTmCs'
and 'addHsScrutTmCs'.

Note [Recovering from unsatisfiable pattern-matching constraints]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Consider the following code (see #12957 and #15450):

  f :: Int ~ Bool =&gt; ()
  f = case True of { False -&gt; () }

We want to warn that the pattern-matching in `f` is non-exhaustive. But GHC
used not to do this; in fact, it would warn that the match was /redundant/!
This is because the constraint (Int ~ Bool) in `f` is unsatisfiable, and the
coverage checker deems any matches with unsatisfiable constraint sets to be
unreachable.

We make sure to always start from an inhabited 'Nablas' by calling
'getLdiNablas', which falls back to the trivially inhabited 'Nablas' if the
long-distance info returned by 'GHC.HsToCore.Monad.getPmNablas' is empty.
-}</span><span>
</span><span id="line-485"></span></pre></body></html>