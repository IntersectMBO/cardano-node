<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span id="local-6989586621681608776"><span id="local-6989586621681608777"></span></span><span class="hs-comment">-- (c) The University of Glasgow 2006</span><span>
</span><span id="line-2"></span><span class="hs-comment">-- (c) The GRASP/AQUA Project, Glasgow University, 1998</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE MagicHash #-}</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="annot"><span class="hs-comment">-- | Type equality and comparison</span></span><span>
</span><span id="line-8"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">GHC.Core.TyCo.Compare</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-9"></span><span>
</span><span id="line-10"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Type comparison</span></span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqType"><span class="hs-identifier">eqType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqTypeX"><span class="hs-identifier">eqTypeX</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqTypes"><span class="hs-identifier">eqTypes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#nonDetCmpType"><span class="hs-identifier">nonDetCmpType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTypes"><span class="hs-identifier">nonDetCmpTypes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTypeX"><span class="hs-identifier">nonDetCmpTypeX</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTypesX"><span class="hs-identifier">nonDetCmpTypesX</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTc"><span class="hs-identifier">nonDetCmpTc</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqVarBndrs"><span class="hs-identifier">eqVarBndrs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#pickyEqType"><span class="hs-identifier">pickyEqType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#tcEqType"><span class="hs-identifier">tcEqType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#tcEqKind"><span class="hs-identifier">tcEqKind</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#tcEqTypeNoKindCheck"><span class="hs-identifier">tcEqTypeNoKindCheck</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#tcEqTypeVis"><span class="hs-identifier">tcEqTypeVis</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#tcEqTyConApps"><span class="hs-identifier">tcEqTyConApps</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span>   </span><span class="annot"><span class="hs-comment">-- * Visiblity comparision</span></span><span>
</span><span id="line-19"></span><span>   </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqForAllVis"><span class="hs-identifier">eqForAllVis</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#cmpForAllVis"><span class="hs-identifier">cmpForAllVis</span></a></span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span>   </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-24"></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Type.html"><span class="hs-identifier">GHC.Core.Type</span></a></span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier">typeKind</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Type.html#coreView"><span class="hs-identifier">coreView</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Type.html#tcSplitAppTyNoView_maybe"><span class="hs-identifier">tcSplitAppTyNoView_maybe</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Type.html#splitAppTyNoView_maybe"><span class="hs-identifier">splitAppTyNoView_maybe</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html"><span class="hs-identifier">GHC.Core.TyCo.Rep</span></a></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.FVs.html"><span class="hs-identifier">GHC.Core.TyCo.FVs</span></a></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html"><span class="hs-identifier">GHC.Core.TyCon</span></a></span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.html"><span class="hs-identifier">GHC.Types.Var</span></a></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.html"><span class="hs-identifier">GHC.Types.Unique</span></a></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html"><span class="hs-identifier">GHC.Types.Var.Env</span></a></span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#/GHC.Base.html"><span class="hs-identifier">GHC.Base</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">reallyUnsafePtrEquality#</span></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Semigroup.html#/Data.Semigroup.html"><span class="hs-identifier">Data.Semigroup</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">S</span></span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span class="hs-comment">{- GHC.Core.TyCo.Compare overview
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
This module implements type equality and comparison

It uses a few functions from GHC.Core.Type, notably `typeKind`,
so it currently sits &quot;on top of&quot; GHC.Core.Type.
-}</span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span class="annot"><span class="hs-comment">{- *********************************************************************
*                                                                      *
            Type equality
*                                                                      *
********************************************************************* -}</span></span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span class="hs-comment">{- Note [Computing equality on types]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
This module implements type equality, notably `eqType`. This is
&quot;definitional equality&quot; or just &quot;equality&quot; for short.

There are several places within GHC that depend on the precise choice of
definitional equality used. If we change that definition, all these places
must be updated. This Note merely serves as a place for all these places
to refer to, so searching for references to this Note will find every place
that needs to be updated.

* See Note [Non-trivial definitional equality] in GHC.Core.TyCo.Rep.

* See Historical Note [Typechecker equality vs definitional equality]
  below

Note [Type comparisons using object pointer comparisons]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Quite often we substitute the type from a definition site into
occurances without a change. This means for code like:
    \x -&gt; (x,x,x)
The type of every `x` will often be represented by a single object
in the heap. We can take advantage of this by shortcutting the equality
check if two types are represented by the same pointer under the hood.
In some cases this reduces compiler allocations by ~2%.
-}</span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span>
</span><span id="line-85"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#tcEqKind"><span class="hs-identifier hs-type">tcEqKind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Kind"><span class="hs-identifier hs-type">Kind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Kind"><span class="hs-identifier hs-type">Kind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-86"></span><span id="tcEqKind"><span class="annot"><span class="annottext">tcEqKind :: (() :: Constraint) =&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#tcEqKind"><span class="hs-identifier hs-var hs-var">tcEqKind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Type -&gt; Type -&gt; Bool
Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#tcEqType"><span class="hs-identifier hs-var">tcEqType</span></a></span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#tcEqType"><span class="hs-identifier hs-type">tcEqType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-89"></span><span class="hs-comment">-- ^ tcEqType implements typechecker equality</span><span>
</span><span id="line-90"></span><span class="hs-comment">-- It behaves just like eqType, but is implemented</span><span>
</span><span id="line-91"></span><span class="hs-comment">-- differently (for now)</span><span>
</span><span id="line-92"></span><span id="tcEqType"><span class="annot"><span class="annottext">tcEqType :: (() :: Constraint) =&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#tcEqType"><span class="hs-identifier hs-var hs-var">tcEqType</span></a></span></span><span> </span><span id="local-6989586621681608837"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608837"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621681608838"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608838"><span class="hs-identifier hs-var">ty2</span></a></span></span><span>
</span><span id="line-93"></span><span>  </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#tcEqTypeNoSyns"><span class="hs-identifier hs-var">tcEqTypeNoSyns</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608840"><span class="hs-identifier hs-var">ki1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608841"><span class="hs-identifier hs-var">ki2</span></a></span><span>
</span><span id="line-94"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#tcEqTypeNoSyns"><span class="hs-identifier hs-var">tcEqTypeNoSyns</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608837"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608838"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-95"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-96"></span><span>    </span><span id="local-6989586621681608840"><span class="annot"><span class="annottext">ki1 :: Type
</span><a href="#local-6989586621681608840"><span class="hs-identifier hs-var hs-var">ki1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Type -&gt; Type
Type -&gt; Type
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608837"><span class="hs-identifier hs-var">ty1</span></a></span><span>
</span><span id="line-97"></span><span>    </span><span id="local-6989586621681608841"><span class="annot"><span class="annottext">ki2 :: Type
</span><a href="#local-6989586621681608841"><span class="hs-identifier hs-var hs-var">ki2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Type -&gt; Type
Type -&gt; Type
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608838"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-98"></span><span>
</span><span id="line-99"></span><span class="hs-comment">-- | Just like 'tcEqType', but will return True for types of different kinds</span><span>
</span><span id="line-100"></span><span class="hs-comment">-- as long as their non-coercion structure is identical.</span><span>
</span><span id="line-101"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#tcEqTypeNoKindCheck"><span class="hs-identifier hs-type">tcEqTypeNoKindCheck</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-102"></span><span id="tcEqTypeNoKindCheck"><span class="annot"><span class="annottext">tcEqTypeNoKindCheck :: Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#tcEqTypeNoKindCheck"><span class="hs-identifier hs-var hs-var">tcEqTypeNoKindCheck</span></a></span></span><span> </span><span id="local-6989586621681608843"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608843"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621681608844"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608844"><span class="hs-identifier hs-var">ty2</span></a></span></span><span>
</span><span id="line-103"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#tcEqTypeNoSyns"><span class="hs-identifier hs-var">tcEqTypeNoSyns</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608843"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608844"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span class="hs-comment">-- | Check whether two TyConApps are the same; if the number of arguments</span><span>
</span><span id="line-106"></span><span class="hs-comment">-- are different, just checks the common prefix of arguments.</span><span>
</span><span id="line-107"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#tcEqTyConApps"><span class="hs-identifier hs-type">tcEqTyConApps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-108"></span><span id="tcEqTyConApps"><span class="annot"><span class="annottext">tcEqTyConApps :: TyCon -&gt; [Type] -&gt; TyCon -&gt; [Type] -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#tcEqTyConApps"><span class="hs-identifier hs-var hs-var">tcEqTyConApps</span></a></span></span><span> </span><span id="local-6989586621681608845"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681608845"><span class="hs-identifier hs-var">tc1</span></a></span></span><span> </span><span id="local-6989586621681608846"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681608846"><span class="hs-identifier hs-var">args1</span></a></span></span><span> </span><span id="local-6989586621681608847"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681608847"><span class="hs-identifier hs-var">tc2</span></a></span></span><span> </span><span id="local-6989586621681608848"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681608848"><span class="hs-identifier hs-var">args2</span></a></span></span><span>
</span><span id="line-109"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681608845"><span class="hs-identifier hs-var">tc1</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681608847"><span class="hs-identifier hs-var">tc2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span>
</span><span id="line-110"></span><span>    </span><span class="annot"><span class="annottext">[Bool] -&gt; Bool
forall (t :: * -&gt; *). Foldable t =&gt; t Bool -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#and/Data.Foldable.html#and"><span class="hs-identifier hs-var">and</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Type -&gt; Type -&gt; Bool) -&gt; [Type] -&gt; [Type] -&gt; [Bool]
forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><a href="../../base-4.18.3.0/src/GHC.List.html#zipWith/GHC.List.html#zipWith"><span class="hs-identifier hs-var">zipWith</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#tcEqTypeNoKindCheck"><span class="hs-identifier hs-var">tcEqTypeNoKindCheck</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681608846"><span class="hs-identifier hs-var">args1</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681608848"><span class="hs-identifier hs-var">args2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-111"></span><span>    </span><span class="hs-comment">-- No kind check necessary: if both arguments are well typed, then</span><span>
</span><span id="line-112"></span><span>    </span><span class="hs-comment">-- any difference in the kinds of later arguments would show up</span><span>
</span><span id="line-113"></span><span>    </span><span class="hs-comment">-- as differences in earlier (dependent) arguments</span><span>
</span><span id="line-114"></span><span>
</span><span id="line-115"></span><span class="hs-comment">{-
Note [Specialising tc_eq_type]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The type equality predicates in Type are hit pretty hard during typechecking.
Consequently we take pains to ensure that these paths are compiled to
efficient, minimally-allocating code.

To this end we place an INLINE on tc_eq_type, ensuring that it is inlined into
its publicly-visible interfaces (e.g. tcEqType). In addition to eliminating
some dynamic branches, this allows the simplifier to eliminate the closure
allocations that would otherwise be necessary to capture the two boolean &quot;mode&quot;
flags. This reduces allocations by a good fraction of a percent when compiling
Cabal.

See #19226.
-}</span><span>
</span><span id="line-131"></span><span>
</span><span id="line-132"></span><span class="hs-comment">-- | Type equality comparing both visible and invisible arguments and expanding</span><span>
</span><span id="line-133"></span><span class="hs-comment">-- type synonyms.</span><span>
</span><span id="line-134"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#tcEqTypeNoSyns"><span class="hs-identifier hs-type">tcEqTypeNoSyns</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-135"></span><span id="tcEqTypeNoSyns"><span class="annot"><span class="annottext">tcEqTypeNoSyns :: Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#tcEqTypeNoSyns"><span class="hs-identifier hs-var hs-var">tcEqTypeNoSyns</span></a></span></span><span> </span><span id="local-6989586621681608851"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608851"><span class="hs-identifier hs-var">ta</span></a></span></span><span> </span><span id="local-6989586621681608852"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608852"><span class="hs-identifier hs-var">tb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#tc_eq_type"><span class="hs-identifier hs-var">tc_eq_type</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608851"><span class="hs-identifier hs-var">ta</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608852"><span class="hs-identifier hs-var">tb</span></a></span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span class="hs-comment">-- | Like 'tcEqType', but returns True if the /visible/ part of the types</span><span>
</span><span id="line-138"></span><span class="hs-comment">-- are equal, even if they are really unequal (in the invisible bits)</span><span>
</span><span id="line-139"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#tcEqTypeVis"><span class="hs-identifier hs-type">tcEqTypeVis</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-140"></span><span id="tcEqTypeVis"><span class="annot"><span class="annottext">tcEqTypeVis :: Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#tcEqTypeVis"><span class="hs-identifier hs-var hs-var">tcEqTypeVis</span></a></span></span><span> </span><span id="local-6989586621681608854"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608854"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621681608855"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608855"><span class="hs-identifier hs-var">ty2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#tc_eq_type"><span class="hs-identifier hs-var">tc_eq_type</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608854"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608855"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-141"></span><span>
</span><span id="line-142"></span><span class="annot"><span class="hs-comment">-- | Like 'pickyEqTypeVis', but returns a Bool for convenience</span></span><span>
</span><span id="line-143"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#pickyEqType"><span class="hs-identifier hs-type">pickyEqType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-144"></span><span class="hs-comment">-- Check when two types _look_ the same, _including_ synonyms.</span><span>
</span><span id="line-145"></span><span class="hs-comment">-- So (pickyEqType String [Char]) returns False</span><span>
</span><span id="line-146"></span><span class="hs-comment">-- This ignores kinds and coercions, because this is used only for printing.</span><span>
</span><span id="line-147"></span><span id="pickyEqType"><span class="annot"><span class="annottext">pickyEqType :: Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#pickyEqType"><span class="hs-identifier hs-var hs-var">pickyEqType</span></a></span></span><span> </span><span id="local-6989586621681608856"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608856"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621681608857"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608857"><span class="hs-identifier hs-var">ty2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#tc_eq_type"><span class="hs-identifier hs-var">tc_eq_type</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608856"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608857"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-148"></span><span>
</span><span id="line-149"></span><span class="annot"><span class="hs-comment">-- | Real worker for 'tcEqType'. No kind check!</span></span><span>
</span><span id="line-150"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#tc_eq_type"><span class="hs-identifier hs-type">tc_eq_type</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>          </span><span class="annot"><span class="hs-comment">-- ^ True &lt;=&gt; do not expand type synonyms</span></span><span>
</span><span id="line-151"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>          </span><span class="annot"><span class="hs-comment">-- ^ True &lt;=&gt; compare visible args only</span></span><span>
</span><span id="line-152"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-153"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-154"></span><span class="hs-comment">-- Flags False, False is the usual setting for tc_eq_type</span><span>
</span><span id="line-155"></span><span class="hs-comment">-- See Note [Computing equality on types] in Type</span><span>
</span><span id="line-156"></span><span id="tc_eq_type"><span class="annot"><span class="annottext">tc_eq_type :: Bool -&gt; Bool -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#tc_eq_type"><span class="hs-identifier hs-var hs-var">tc_eq_type</span></a></span></span><span> </span><span id="local-6989586621681608858"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681608858"><span class="hs-identifier hs-var">keep_syns</span></a></span></span><span> </span><span id="local-6989586621681608859"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681608859"><span class="hs-identifier hs-var">vis_only</span></a></span></span><span> </span><span id="local-6989586621681608860"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608860"><span class="hs-identifier hs-var">orig_ty1</span></a></span></span><span> </span><span id="local-6989586621681608861"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608861"><span class="hs-identifier hs-var">orig_ty2</span></a></span></span><span>
</span><span id="line-157"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621681608862"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608863"><span class="hs-identifier hs-var">orig_env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608860"><span class="hs-identifier hs-var">orig_ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608861"><span class="hs-identifier hs-var">orig_ty2</span></a></span><span>
</span><span id="line-158"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-159"></span><span>    </span><span class="annot"><a href="#local-6989586621681608862"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#RnEnv2"><span class="hs-identifier hs-type">RnEnv2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-160"></span><span>    </span><span class="hs-comment">-- See Note [Comparing nullary type synonyms] in GHC.Core.Type.</span><span>
</span><span id="line-161"></span><span>    </span><span id="local-6989586621681608862"><span class="annot"><span class="annottext">go :: RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621681608862"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span id="local-6989586621681608865"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681608865"><span class="hs-identifier hs-var">tc1</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span id="local-6989586621681608866"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681608866"><span class="hs-identifier hs-var">tc2</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-162"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681608865"><span class="hs-identifier hs-var">tc1</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681608866"><span class="hs-identifier hs-var">tc2</span></a></span><span>
</span><span id="line-163"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-164"></span><span>
</span><span id="line-165"></span><span>    </span><span class="annot"><a href="#local-6989586621681608862"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681608867"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608867"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681608868"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608868"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681608869"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608869"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681608858"><span class="hs-identifier hs-var">keep_syns</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681608871"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608871"><span class="hs-identifier hs-var">t1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe Type
</span><a href="GHC.Core.Type.html#coreView"><span class="hs-identifier hs-var">coreView</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608868"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621681608862"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608867"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608871"><span class="hs-identifier hs-var">t1'</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608869"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-166"></span><span>    </span><span class="annot"><a href="#local-6989586621681608862"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681608872"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608872"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681608873"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608873"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681608874"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608874"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681608858"><span class="hs-identifier hs-var">keep_syns</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681608875"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608875"><span class="hs-identifier hs-var">t2'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe Type
</span><a href="GHC.Core.Type.html#coreView"><span class="hs-identifier hs-var">coreView</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608874"><span class="hs-identifier hs-var">t2</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621681608862"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608872"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608873"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608875"><span class="hs-identifier hs-var">t2'</span></a></span><span>
</span><span id="line-167"></span><span>
</span><span id="line-168"></span><span>    </span><span class="annot"><a href="#local-6989586621681608862"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681608876"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608876"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyVarTy"><span class="hs-identifier hs-type">TyVarTy</span></a></span><span> </span><span id="local-6989586621681608878"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681608878"><span class="hs-identifier hs-var">tv1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyVarTy"><span class="hs-identifier hs-type">TyVarTy</span></a></span><span> </span><span id="local-6989586621681608879"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681608879"><span class="hs-identifier hs-var">tv2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-169"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Var -&gt; Var
</span><a href="GHC.Types.Var.Env.html#rnOccL"><span class="hs-identifier hs-var">rnOccL</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608876"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681608878"><span class="hs-identifier hs-var">tv1</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; Var -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Var -&gt; Var
</span><a href="GHC.Types.Var.Env.html#rnOccR"><span class="hs-identifier hs-var">rnOccR</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608876"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681608879"><span class="hs-identifier hs-var">tv2</span></a></span><span>
</span><span id="line-170"></span><span>
</span><span id="line-171"></span><span>    </span><span class="annot"><a href="#local-6989586621681608862"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#LitTy"><span class="hs-identifier hs-type">LitTy</span></a></span><span> </span><span id="local-6989586621681608883"><span class="annot"><span class="annottext">TyLit
</span><a href="#local-6989586621681608883"><span class="hs-identifier hs-var">lit1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#LitTy"><span class="hs-identifier hs-type">LitTy</span></a></span><span> </span><span id="local-6989586621681608884"><span class="annot"><span class="annottext">TyLit
</span><a href="#local-6989586621681608884"><span class="hs-identifier hs-var">lit2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-172"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyLit
</span><a href="#local-6989586621681608883"><span class="hs-identifier hs-var">lit1</span></a></span><span> </span><span class="annot"><span class="annottext">TyLit -&gt; TyLit -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyLit
</span><a href="#local-6989586621681608884"><span class="hs-identifier hs-var">lit2</span></a></span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span>    </span><span class="annot"><a href="#local-6989586621681608862"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681608885"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608885"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ForAllTy"><span class="hs-identifier hs-type">ForAllTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-type">Bndr</span></a></span><span> </span><span id="local-6989586621681608888"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681608888"><span class="hs-identifier hs-var">tv1</span></a></span></span><span> </span><span id="local-6989586621681608889"><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="#local-6989586621681608889"><span class="hs-identifier hs-var">vis1</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681608890"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608890"><span class="hs-identifier hs-var">ty1</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-175"></span><span>           </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ForAllTy"><span class="hs-identifier hs-type">ForAllTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-type">Bndr</span></a></span><span> </span><span id="local-6989586621681608891"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681608891"><span class="hs-identifier hs-var">tv2</span></a></span></span><span> </span><span id="local-6989586621681608892"><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="#local-6989586621681608892"><span class="hs-identifier hs-var">vis2</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681608893"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608893"><span class="hs-identifier hs-var">ty2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-176"></span><span>      </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="#local-6989586621681608889"><span class="hs-identifier hs-var">vis1</span></a></span><span> </span><span class="annot"><span class="annottext">ForAllTyFlag -&gt; ForAllTyFlag -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eqForAllVis"><span class="hs-operator hs-var">`eqForAllVis`</span></a></span><span> </span><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="#local-6989586621681608892"><span class="hs-identifier hs-var">vis2</span></a></span><span>
</span><span id="line-177"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681608859"><span class="hs-identifier hs-var">vis_only</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621681608862"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608885"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Type
</span><a href="GHC.Types.Var.html#varType"><span class="hs-identifier hs-var">varType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681608888"><span class="hs-identifier hs-var">tv1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Type
</span><a href="GHC.Types.Var.html#varType"><span class="hs-identifier hs-var">varType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681608891"><span class="hs-identifier hs-var">tv2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-178"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621681608862"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnEnv2 -&gt; Var -&gt; Var -&gt; RnEnv2
</span><a href="GHC.Types.Var.Env.html#rnBndr2"><span class="hs-identifier hs-var">rnBndr2</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608885"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681608888"><span class="hs-identifier hs-var">tv1</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681608891"><span class="hs-identifier hs-var">tv2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608890"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608893"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-179"></span><span>
</span><span id="line-180"></span><span>    </span><span class="hs-comment">-- Make sure we handle all FunTy cases since falling through to the</span><span>
</span><span id="line-181"></span><span>    </span><span class="hs-comment">-- AppTy case means that tcSplitAppTyNoView_maybe may see an unzonked</span><span>
</span><span id="line-182"></span><span>    </span><span class="hs-comment">-- kind variable, which causes things to blow up.</span><span>
</span><span id="line-183"></span><span>    </span><span class="hs-comment">-- See Note [Equality on FunTys] in GHC.Core.TyCo.Rep: we must check</span><span>
</span><span id="line-184"></span><span>    </span><span class="hs-comment">-- kinds here</span><span>
</span><span id="line-185"></span><span>    </span><span class="annot"><a href="#local-6989586621681608862"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681608897"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608897"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunTy"><span class="hs-identifier hs-type">FunTy</span></a></span><span> </span><span class="annot"><span class="annottext">FunTyFlag
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681608899"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608899"><span class="hs-identifier hs-var">w1</span></a></span></span><span> </span><span id="local-6989586621681608900"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608900"><span class="hs-identifier hs-var">arg1</span></a></span></span><span> </span><span id="local-6989586621681608901"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608901"><span class="hs-identifier hs-var">res1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunTy"><span class="hs-identifier hs-type">FunTy</span></a></span><span> </span><span class="annot"><span class="annottext">FunTyFlag
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681608902"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608902"><span class="hs-identifier hs-var">w2</span></a></span></span><span> </span><span id="local-6989586621681608903"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608903"><span class="hs-identifier hs-var">arg2</span></a></span></span><span> </span><span id="local-6989586621681608904"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608904"><span class="hs-identifier hs-var">res2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-186"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681608905"><span class="hs-identifier hs-var">kinds_eq</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621681608862"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608897"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608900"><span class="hs-identifier hs-var">arg1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608903"><span class="hs-identifier hs-var">arg2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621681608862"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608897"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608901"><span class="hs-identifier hs-var">res1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608904"><span class="hs-identifier hs-var">res2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621681608862"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608897"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608899"><span class="hs-identifier hs-var">w1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608902"><span class="hs-identifier hs-var">w2</span></a></span><span>
</span><span id="line-187"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-188"></span><span>        </span><span id="local-6989586621681608905"><span class="annot"><span class="annottext">kinds_eq :: Bool
</span><a href="#local-6989586621681608905"><span class="hs-identifier hs-var hs-var">kinds_eq</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681608859"><span class="hs-identifier hs-var">vis_only</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-189"></span><span>                 </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621681608862"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608897"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Type -&gt; Type
Type -&gt; Type
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608900"><span class="hs-identifier hs-var">arg1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Type -&gt; Type
Type -&gt; Type
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608903"><span class="hs-identifier hs-var">arg2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span>
</span><span id="line-190"></span><span>                               </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621681608862"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608897"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Type -&gt; Type
Type -&gt; Type
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608901"><span class="hs-identifier hs-var">res1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Type -&gt; Type
Type -&gt; Type
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608904"><span class="hs-identifier hs-var">res2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-191"></span><span>
</span><span id="line-192"></span><span>      </span><span class="hs-comment">-- See Note [Equality on AppTys] in GHC.Core.Type</span><span>
</span><span id="line-193"></span><span>    </span><span class="annot"><a href="#local-6989586621681608862"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681608906"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608906"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AppTy"><span class="hs-identifier hs-type">AppTy</span></a></span><span> </span><span id="local-6989586621681608908"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608908"><span class="hs-identifier hs-var">s1</span></a></span></span><span> </span><span id="local-6989586621681608909"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608909"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="hs-special">)</span><span>        </span><span id="local-6989586621681608910"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608910"><span class="hs-identifier hs-var">ty2</span></a></span></span><span>
</span><span id="line-194"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681608911"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608911"><span class="hs-identifier hs-var">s2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681608912"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608912"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe (Type, Type)
</span><a href="GHC.Core.Type.html#tcSplitAppTyNoView_maybe"><span class="hs-identifier hs-var">tcSplitAppTyNoView_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608910"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-195"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621681608862"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608906"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608908"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608911"><span class="hs-identifier hs-var">s2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621681608862"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608906"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608909"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608912"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-196"></span><span>    </span><span class="annot"><a href="#local-6989586621681608862"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681608913"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608913"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681608914"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608914"><span class="hs-identifier hs-var">ty1</span></a></span></span><span>                  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AppTy"><span class="hs-identifier hs-type">AppTy</span></a></span><span> </span><span id="local-6989586621681608915"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608915"><span class="hs-identifier hs-var">s2</span></a></span></span><span> </span><span id="local-6989586621681608916"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608916"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681608917"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608917"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681608918"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608918"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe (Type, Type)
</span><a href="GHC.Core.Type.html#tcSplitAppTyNoView_maybe"><span class="hs-identifier hs-var">tcSplitAppTyNoView_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608914"><span class="hs-identifier hs-var">ty1</span></a></span><span>
</span><span id="line-198"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621681608862"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608913"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608917"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608915"><span class="hs-identifier hs-var">s2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621681608862"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608913"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608918"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608916"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-199"></span><span>
</span><span id="line-200"></span><span>    </span><span class="annot"><a href="#local-6989586621681608862"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681608919"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608919"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span id="local-6989586621681608920"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681608920"><span class="hs-identifier hs-var">tc1</span></a></span></span><span> </span><span id="local-6989586621681608921"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681608921"><span class="hs-identifier hs-var">ts1</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span id="local-6989586621681608922"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681608922"><span class="hs-identifier hs-var">tc2</span></a></span></span><span> </span><span id="local-6989586621681608923"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681608923"><span class="hs-identifier hs-var">ts2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-201"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681608920"><span class="hs-identifier hs-var">tc1</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681608922"><span class="hs-identifier hs-var">tc2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; [Bool] -&gt; [Type] -&gt; [Type] -&gt; Bool
</span><a href="#local-6989586621681608924"><span class="hs-identifier hs-var">gos</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608919"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; [Bool]
</span><a href="#local-6989586621681608925"><span class="hs-identifier hs-var">tc_vis</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681608920"><span class="hs-identifier hs-var">tc1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681608921"><span class="hs-identifier hs-var">ts1</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681608923"><span class="hs-identifier hs-var">ts2</span></a></span><span>
</span><span id="line-202"></span><span>
</span><span id="line-203"></span><span>    </span><span class="annot"><a href="#local-6989586621681608862"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681608926"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608926"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CastTy"><span class="hs-identifier hs-type">CastTy</span></a></span><span> </span><span id="local-6989586621681608928"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608928"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span id="local-6989586621681608929"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608929"><span class="hs-identifier hs-var">t2</span></a></span></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621681608862"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608926"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608928"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608929"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-204"></span><span>    </span><span class="annot"><a href="#local-6989586621681608862"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681608930"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608930"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681608931"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608931"><span class="hs-identifier hs-var">t1</span></a></span></span><span>              </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CastTy"><span class="hs-identifier hs-type">CastTy</span></a></span><span> </span><span id="local-6989586621681608932"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608932"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621681608862"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608930"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608931"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608932"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-205"></span><span>    </span><span class="annot"><a href="#local-6989586621681608862"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionTy"><span class="hs-identifier hs-type">CoercionTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionTy"><span class="hs-identifier hs-type">CoercionTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-206"></span><span>
</span><span id="line-207"></span><span>    </span><span class="annot"><a href="#local-6989586621681608862"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span>    </span><span id="local-6989586621681608924"><span class="annot"><span class="annottext">gos :: RnEnv2 -&gt; [Bool] -&gt; [Type] -&gt; [Type] -&gt; Bool
</span><a href="#local-6989586621681608924"><span class="hs-identifier hs-var hs-var">gos</span></a></span></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span>   </span><span class="annot"><span class="annottext">[Bool]
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-special">[</span><span class="hs-special">]</span><span>       </span><span class="hs-special">[</span><span class="hs-special">]</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-210"></span><span>    </span><span class="annot"><a href="#local-6989586621681608924"><span class="hs-identifier hs-var">gos</span></a></span><span> </span><span id="local-6989586621681608934"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608934"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681608935"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681608935"><span class="hs-identifier hs-var">ig</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681608936"><span class="annot"><span class="annottext">[Bool]
</span><a href="#local-6989586621681608936"><span class="hs-identifier hs-var">igs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681608937"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608937"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681608938"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681608938"><span class="hs-identifier hs-var">ts1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681608939"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608939"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681608940"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681608940"><span class="hs-identifier hs-var">ts2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681608935"><span class="hs-identifier hs-var">ig</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="#local-6989586621681608862"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608934"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608937"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608939"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-211"></span><span>                                      </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; [Bool] -&gt; [Type] -&gt; [Type] -&gt; Bool
</span><a href="#local-6989586621681608924"><span class="hs-identifier hs-var">gos</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608934"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[Bool]
</span><a href="#local-6989586621681608936"><span class="hs-identifier hs-var">igs</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681608938"><span class="hs-identifier hs-var">ts1</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681608940"><span class="hs-identifier hs-var">ts2</span></a></span><span>
</span><span id="line-212"></span><span>    </span><span class="annot"><a href="#local-6989586621681608924"><span class="hs-identifier hs-var">gos</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Bool]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span>    </span><span class="annot"><a href="#local-6989586621681608925"><span class="hs-identifier hs-type">tc_vis</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">]</span><span>  </span><span class="hs-comment">-- True for the fields we should ignore</span><span>
</span><span id="line-215"></span><span>    </span><span id="local-6989586621681608925"><span class="annot"><span class="annottext">tc_vis :: TyCon -&gt; [Bool]
</span><a href="#local-6989586621681608925"><span class="hs-identifier hs-var hs-var">tc_vis</span></a></span></span><span> </span><span id="local-6989586621681608941"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681608941"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681608859"><span class="hs-identifier hs-var">vis_only</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Bool]
</span><a href="#local-6989586621681608942"><span class="hs-identifier hs-var">inviss</span></a></span><span> </span><span class="annot"><span class="annottext">[Bool] -&gt; [Bool] -&gt; [Bool]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; [Bool]
forall a. a -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.List.html#repeat/GHC.List.html#repeat"><span class="hs-identifier hs-var">repeat</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>    </span><span class="hs-comment">-- Ignore invisibles</span><span>
</span><span id="line-216"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; [Bool]
forall a. a -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.List.html#repeat/GHC.List.html#repeat"><span class="hs-identifier hs-var">repeat</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>              </span><span class="hs-comment">-- Ignore nothing</span><span>
</span><span id="line-217"></span><span>       </span><span class="hs-comment">-- The repeat False is necessary because tycons</span><span>
</span><span id="line-218"></span><span>       </span><span class="hs-comment">-- can legitimately be oversaturated</span><span>
</span><span id="line-219"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-220"></span><span>        </span><span id="local-6989586621681608944"><span class="annot"><span class="annottext">bndrs :: [TyConBinder]
</span><a href="#local-6989586621681608944"><span class="hs-identifier hs-var hs-var">bndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; [TyConBinder]
</span><a href="GHC.Core.TyCon.html#tyConBinders"><span class="hs-identifier hs-var">tyConBinders</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681608941"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-221"></span><span>        </span><span id="local-6989586621681608942"><span class="annot"><span class="annottext">inviss :: [Bool]
</span><a href="#local-6989586621681608942"><span class="hs-identifier hs-var hs-var">inviss</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TyConBinder -&gt; Bool) -&gt; [TyConBinder] -&gt; [Bool]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">TyConBinder -&gt; Bool
forall tv. VarBndr tv TyConBndrVis -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isInvisibleTyConBinder"><span class="hs-identifier hs-var">isInvisibleTyConBinder</span></a></span><span> </span><span class="annot"><span class="annottext">[TyConBinder]
</span><a href="#local-6989586621681608944"><span class="hs-identifier hs-var">bndrs</span></a></span><span>
</span><span id="line-222"></span><span>
</span><span id="line-223"></span><span>    </span><span id="local-6989586621681608863"><span class="annot"><span class="annottext">orig_env :: RnEnv2
</span><a href="#local-6989586621681608863"><span class="hs-identifier hs-var hs-var">orig_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InScopeSet -&gt; RnEnv2
</span><a href="GHC.Types.Var.Env.html#mkRnEnv2"><span class="hs-identifier hs-var">mkRnEnv2</span></a></span><span> </span><span class="annot"><span class="annottext">(InScopeSet -&gt; RnEnv2) -&gt; InScopeSet -&gt; RnEnv2
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">VarSet -&gt; InScopeSet
</span><a href="GHC.Types.Var.Env.html#mkInScopeSet"><span class="hs-identifier hs-var">mkInScopeSet</span></a></span><span> </span><span class="annot"><span class="annottext">(VarSet -&gt; InScopeSet) -&gt; VarSet -&gt; InScopeSet
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Type] -&gt; VarSet
</span><a href="GHC.Core.TyCo.FVs.html#tyCoVarsOfTypes"><span class="hs-identifier hs-var">tyCoVarsOfTypes</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608860"><span class="hs-identifier hs-var">orig_ty1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608861"><span class="hs-identifier hs-var">orig_ty2</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-224"></span><span>
</span><span id="line-225"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#tc_eq_type"><span class="hs-pragma hs-type">tc_eq_type</span></a></span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="hs-comment">-- See Note [Specialising tc_eq_type].</span><span>
</span><span id="line-226"></span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span class="hs-comment">-- | Do these denote the same level of visibility? 'Required'</span><span>
</span><span id="line-229"></span><span class="hs-comment">-- arguments are visible, others are not. So this function</span><span>
</span><span id="line-230"></span><span class="hs-comment">-- equates 'Specified' and 'Inferred'. Used for printing.</span><span>
</span><span id="line-231"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqForAllVis"><span class="hs-identifier hs-type">eqForAllVis</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#ForAllTyFlag"><span class="hs-identifier hs-type">ForAllTyFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#ForAllTyFlag"><span class="hs-identifier hs-type">ForAllTyFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-232"></span><span class="hs-comment">-- See Note [ForAllTy and type equality]</span><span>
</span><span id="line-233"></span><span class="hs-comment">-- If you change this, see IMPORTANT NOTE in the above Note</span><span>
</span><span id="line-234"></span><span id="eqForAllVis"><span class="annot"><span class="annottext">eqForAllVis :: ForAllTyFlag -&gt; ForAllTyFlag -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eqForAllVis"><span class="hs-identifier hs-var hs-var">eqForAllVis</span></a></span></span><span> </span><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="GHC.Types.Var.html#Required"><span class="hs-identifier hs-var">Required</span></a></span><span>      </span><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="GHC.Types.Var.html#Required"><span class="hs-identifier hs-var">Required</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-235"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqForAllVis"><span class="hs-identifier hs-var">eqForAllVis</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Invisible"><span class="hs-identifier hs-type">Invisible</span></a></span><span> </span><span class="annot"><span class="annottext">Specificity
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Invisible"><span class="hs-identifier hs-type">Invisible</span></a></span><span> </span><span class="annot"><span class="annottext">Specificity
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-236"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqForAllVis"><span class="hs-identifier hs-var">eqForAllVis</span></a></span><span> </span><span class="annot"><span class="annottext">ForAllTyFlag
</span><span class="hs-identifier">_</span></span><span>             </span><span class="annot"><span class="annottext">ForAllTyFlag
</span><span class="hs-identifier">_</span></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-237"></span><span>
</span><span id="line-238"></span><span class="hs-comment">-- | Do these denote the same level of visibility? 'Required'</span><span>
</span><span id="line-239"></span><span class="hs-comment">-- arguments are visible, others are not. So this function</span><span>
</span><span id="line-240"></span><span class="hs-comment">-- equates 'Specified' and 'Inferred'. Used for printing.</span><span>
</span><span id="line-241"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#cmpForAllVis"><span class="hs-identifier hs-type">cmpForAllVis</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#ForAllTyFlag"><span class="hs-identifier hs-type">ForAllTyFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#ForAllTyFlag"><span class="hs-identifier hs-type">ForAllTyFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ordering</span></span><span>
</span><span id="line-242"></span><span class="hs-comment">-- See Note [ForAllTy and type equality]</span><span>
</span><span id="line-243"></span><span class="hs-comment">-- If you change this, see IMPORTANT NOTE in the above Note</span><span>
</span><span id="line-244"></span><span id="cmpForAllVis"><span class="annot"><span class="annottext">cmpForAllVis :: ForAllTyFlag -&gt; ForAllTyFlag -&gt; Ordering
</span><a href="GHC.Core.TyCo.Compare.html#cmpForAllVis"><span class="hs-identifier hs-var hs-var">cmpForAllVis</span></a></span></span><span> </span><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="GHC.Types.Var.html#Required"><span class="hs-identifier hs-var">Required</span></a></span><span>      </span><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="GHC.Types.Var.html#Required"><span class="hs-identifier hs-var">Required</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span>
</span><span id="line-245"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#cmpForAllVis"><span class="hs-identifier hs-var">cmpForAllVis</span></a></span><span> </span><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="GHC.Types.Var.html#Required"><span class="hs-identifier hs-var">Required</span></a></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Invisible"><span class="hs-identifier hs-type">Invisible</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span>
</span><span id="line-246"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#cmpForAllVis"><span class="hs-identifier hs-var">cmpForAllVis</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Invisible"><span class="hs-identifier hs-type">Invisible</span></a></span><span> </span><span class="annot"><span class="annottext">Specificity
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="GHC.Types.Var.html#Required"><span class="hs-identifier hs-var">Required</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-247"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#cmpForAllVis"><span class="hs-identifier hs-var">cmpForAllVis</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Invisible"><span class="hs-identifier hs-type">Invisible</span></a></span><span> </span><span class="annot"><span class="annottext">Specificity
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Invisible"><span class="hs-identifier hs-type">Invisible</span></a></span><span> </span><span class="annot"><span class="annottext">Specificity
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span>
</span><span id="line-248"></span><span>
</span><span id="line-249"></span><span>
</span><span id="line-250"></span><span class="hs-comment">{- Note [ForAllTy and type equality]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
When we compare (ForAllTy (Bndr tv1 vis1) ty1)
         and    (ForAllTy (Bndr tv2 vis2) ty2)
what should we do about `vis1` vs `vis2`.

First, we always compare with `eqForAllVis` and `cmpForAllVis`.
But what decision do we make?

Should GHC type-check the following program (adapted from #15740)?

  {-# LANGUAGE PolyKinds, ... #-}
  data D a
  type family F :: forall k. k -&gt; Type
  type instance F = D

Due to the way F is declared, any instance of F must have a right-hand side
whose kind is equal to `forall k. k -&gt; Type`. The kind of D is
`forall {k}. k -&gt; Type`, which is very close, but technically uses distinct
Core:

  -----------------------------------------------------------
  | Source Haskell    | Core                                |
  -----------------------------------------------------------
  | forall  k.  &lt;...&gt; | ForAllTy (Bndr k Specified) (&lt;...&gt;) |
  | forall {k}. &lt;...&gt; | ForAllTy (Bndr k Inferred)  (&lt;...&gt;) |
  -----------------------------------------------------------

We could deem these kinds to be unequal, but that would imply rejecting
programs like the one above. Whether a kind variable binder ends up being
specified or inferred can be somewhat subtle, however, especially for kinds
that aren't explicitly written out in the source code (like in D above).

For now, we decide

    the specified/inferred status of an invisible type variable binder
    does not affect GHC's notion of equality.

That is, we have the following:

  --------------------------------------------------
  | Type 1            | Type 2            | Equal? |
  --------------------|-----------------------------
  | forall k. &lt;...&gt;   | forall k. &lt;...&gt;   | Yes    |
  |                   | forall {k}. &lt;...&gt; | Yes    |
  |                   | forall k -&gt; &lt;...&gt; | No     |
  --------------------------------------------------
  | forall {k}. &lt;...&gt; | forall k. &lt;...&gt;   | Yes    |
  |                   | forall {k}. &lt;...&gt; | Yes    |
  |                   | forall k -&gt; &lt;...&gt; | No     |
  --------------------------------------------------
  | forall k -&gt; &lt;...&gt; | forall k. &lt;...&gt;   | No     |
  |                   | forall {k}. &lt;...&gt; | No     |
  |                   | forall k -&gt; &lt;...&gt; | Yes    |
  --------------------------------------------------

IMPORTANT NOTE: if we want to change this decision, ForAllCo will need to carry
visiblity (by taking a ForAllTyBinder rathre than a TyCoVar), so that
coercionLKind/RKind build forall types that match (are equal to) the desired
ones.  Otherwise we get an infinite loop in the solver via canEqCanLHSHetero.
Examples: T16946, T15079.

Historical Note [Typechecker equality vs definitional equality]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
This Note describes some history, in case there are vesitges of this
history lying around in the code.

Summary: prior to summer 2022, GHC had have two notions of equality
over Core types.  But now there is only one: definitional equality,
or just equality for short.

The old setup was:

* Definitional equality, as implemented by GHC.Core.Type.eqType.
  See Note [Non-trivial definitional equality] in GHC.Core.TyCo.Rep.

* Typechecker equality, as implemented by tcEqType.
  GHC.Tc.Solver.Canonical.canEqNC also respects typechecker equality.

Typechecker equality implied definitional equality: if two types are equal
according to typechecker equality, then they are also equal according to
definitional equality. The converse is not always true, as typechecker equality
is more finer-grained than definitional equality in two places:

* Constraint vs Type.  Definitional equality equated Type and
  Constraint, but typechecker treats them as distinct types.

* Unlike definitional equality, which does not care about the ForAllTyFlag of a
  ForAllTy, typechecker equality treats Required type variable binders as
  distinct from Invisible type variable binders.
  See Note [ForAllTy and type equality]


************************************************************************
*                                                                      *
                Comparison for types
        (We don't use instances so that we know where it happens)
*                                                                      *
************************************************************************

Note [Equality on AppTys]
~~~~~~~~~~~~~~~~~~~~~~~~~
In our cast-ignoring equality, we want to say that the following two
are equal:

  (Maybe |&gt; co) (Int |&gt; co')   ~?       Maybe Int

But the left is an AppTy while the right is a TyConApp. The solution is
to use splitAppTyNoView_maybe to break up the TyConApp into its pieces and
then continue. Easy to do, but also easy to forget to do.

Note [Comparing nullary type synonyms]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Consider the task of testing equality between two 'Type's of the form

  TyConApp tc []

where @tc@ is a type synonym. A naive way to perform this comparison these
would first expand the synonym and then compare the resulting expansions.

However, this is obviously wasteful and the RHS of @tc@ may be large; it is
much better to rather compare the TyCons directly. Consequently, before
expanding type synonyms in type comparisons we first look for a nullary
TyConApp and simply compare the TyCons if we find one. Of course, if we find
that the TyCons are *not* equal then we still need to perform the expansion as
their RHSs may still be equal.

We perform this optimisation in a number of places:

 * GHC.Core.Types.eqType
 * GHC.Core.Types.nonDetCmpType
 * GHC.Core.Unify.unify_ty
 * TcCanonical.can_eq_nc'
 * TcUnify.uType

This optimisation is especially helpful for the ubiquitous GHC.Types.Type,
since GHC prefers to use the type synonym over @TYPE 'LiftedRep@ applications
whenever possible. See Note [Using synonyms to compress types] in
GHC.Core.Type for details.

-}</span><span>
</span><span id="line-391"></span><span>
</span><span id="line-392"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqType"><span class="hs-identifier hs-type">eqType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-393"></span><span class="hs-comment">-- ^ Type equality on source types. Does not look through @newtypes@,</span><span>
</span><span id="line-394"></span><span class="hs-comment">-- 'PredType's or type families, but it does look through type synonyms.</span><span>
</span><span id="line-395"></span><span class="hs-comment">-- This first checks that the kinds of the types are equal and then</span><span>
</span><span id="line-396"></span><span class="hs-comment">-- checks whether the types are equal, ignoring casts and coercions.</span><span>
</span><span id="line-397"></span><span class="hs-comment">-- (The kind check is a recursive call, but since all kinds have type</span><span>
</span><span id="line-398"></span><span class="hs-comment">-- @Type@, there is no need to check the types of kinds.)</span><span>
</span><span id="line-399"></span><span class="hs-comment">-- See also Note [Non-trivial definitional equality] in &quot;GHC.Core.TyCo.Rep&quot;.</span><span>
</span><span id="line-400"></span><span id="eqType"><span class="annot"><span class="annottext">eqType :: Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eqType"><span class="hs-identifier hs-var hs-var">eqType</span></a></span></span><span> </span><span id="local-6989586621681608955"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608955"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681608956"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608956"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering -&gt; Bool
</span><a href="GHC.Utils.Misc.html#isEqual"><span class="hs-identifier hs-var">isEqual</span></a></span><span> </span><span class="annot"><span class="annottext">(Ordering -&gt; Bool) -&gt; Ordering -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Ordering
</span><a href="GHC.Core.TyCo.Compare.html#nonDetCmpType"><span class="hs-identifier hs-var">nonDetCmpType</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608955"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608956"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-401"></span><span>  </span><span class="hs-comment">-- It's OK to use nonDetCmpType here and eqType is deterministic,</span><span>
</span><span id="line-402"></span><span>  </span><span class="hs-comment">-- nonDetCmpType does equality deterministically</span><span>
</span><span id="line-403"></span><span>
</span><span id="line-404"></span><span class="annot"><span class="hs-comment">-- | Compare types with respect to a (presumably) non-empty 'RnEnv2'.</span></span><span>
</span><span id="line-405"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqTypeX"><span class="hs-identifier hs-type">eqTypeX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#RnEnv2"><span class="hs-identifier hs-type">RnEnv2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-406"></span><span id="eqTypeX"><span class="annot"><span class="annottext">eqTypeX :: RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eqTypeX"><span class="hs-identifier hs-var hs-var">eqTypeX</span></a></span></span><span> </span><span id="local-6989586621681608958"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608958"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681608959"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608959"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681608960"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608960"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering -&gt; Bool
</span><a href="GHC.Utils.Misc.html#isEqual"><span class="hs-identifier hs-var">isEqual</span></a></span><span> </span><span class="annot"><span class="annottext">(Ordering -&gt; Bool) -&gt; Ordering -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Ordering
</span><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTypeX"><span class="hs-identifier hs-var">nonDetCmpTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608958"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608959"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608960"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-407"></span><span>  </span><span class="hs-comment">-- It's OK to use nonDetCmpType here and eqTypeX is deterministic,</span><span>
</span><span id="line-408"></span><span>  </span><span class="hs-comment">-- nonDetCmpTypeX does equality deterministically</span><span>
</span><span id="line-409"></span><span>
</span><span id="line-410"></span><span class="hs-comment">-- | Type equality on lists of types, looking through type synonyms</span><span>
</span><span id="line-411"></span><span class="hs-comment">-- but not newtypes.</span><span>
</span><span id="line-412"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqTypes"><span class="hs-identifier hs-type">eqTypes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-413"></span><span id="eqTypes"><span class="annot"><span class="annottext">eqTypes :: [Type] -&gt; [Type] -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eqTypes"><span class="hs-identifier hs-var hs-var">eqTypes</span></a></span></span><span> </span><span id="local-6989586621681608961"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681608961"><span class="hs-identifier hs-var">tys1</span></a></span></span><span> </span><span id="local-6989586621681608962"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681608962"><span class="hs-identifier hs-var">tys2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering -&gt; Bool
</span><a href="GHC.Utils.Misc.html#isEqual"><span class="hs-identifier hs-var">isEqual</span></a></span><span> </span><span class="annot"><span class="annottext">(Ordering -&gt; Bool) -&gt; Ordering -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Type] -&gt; [Type] -&gt; Ordering
</span><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTypes"><span class="hs-identifier hs-var">nonDetCmpTypes</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681608961"><span class="hs-identifier hs-var">tys1</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681608962"><span class="hs-identifier hs-var">tys2</span></a></span><span>
</span><span id="line-414"></span><span>  </span><span class="hs-comment">-- It's OK to use nonDetCmpType here and eqTypes is deterministic,</span><span>
</span><span id="line-415"></span><span>  </span><span class="hs-comment">-- nonDetCmpTypes does equality deterministically</span><span>
</span><span id="line-416"></span><span>
</span><span id="line-417"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqVarBndrs"><span class="hs-identifier hs-type">eqVarBndrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#RnEnv2"><span class="hs-identifier hs-type">RnEnv2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#RnEnv2"><span class="hs-identifier hs-type">RnEnv2</span></a></span><span>
</span><span id="line-418"></span><span class="hs-comment">-- Check that the var lists are the same length</span><span>
</span><span id="line-419"></span><span class="hs-comment">-- and have matching kinds; if so, extend the RnEnv2</span><span>
</span><span id="line-420"></span><span class="hs-comment">-- Returns Nothing if they don't match</span><span>
</span><span id="line-421"></span><span id="eqVarBndrs"><span class="annot"><span class="annottext">eqVarBndrs :: RnEnv2 -&gt; [Var] -&gt; [Var] -&gt; Maybe RnEnv2
</span><a href="GHC.Core.TyCo.Compare.html#eqVarBndrs"><span class="hs-identifier hs-var hs-var">eqVarBndrs</span></a></span></span><span> </span><span id="local-6989586621681608963"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608963"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-422"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Maybe RnEnv2
forall a. a -&gt; Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608963"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-423"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqVarBndrs"><span class="hs-identifier hs-var">eqVarBndrs</span></a></span><span> </span><span id="local-6989586621681608964"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608964"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681608965"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681608965"><span class="hs-identifier hs-var">tv1</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681608966"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681608966"><span class="hs-identifier hs-var">tvs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681608967"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681608967"><span class="hs-identifier hs-var">tv2</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681608968"><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681608968"><span class="hs-identifier hs-var">tvs2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-424"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eqTypeX"><span class="hs-identifier hs-var">eqTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608964"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Type
</span><a href="GHC.Types.Var.html#varType"><span class="hs-identifier hs-var">varType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681608965"><span class="hs-identifier hs-var">tv1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Type
</span><a href="GHC.Types.Var.html#varType"><span class="hs-identifier hs-var">varType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681608967"><span class="hs-identifier hs-var">tv2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-425"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; [Var] -&gt; [Var] -&gt; Maybe RnEnv2
</span><a href="GHC.Core.TyCo.Compare.html#eqVarBndrs"><span class="hs-identifier hs-var">eqVarBndrs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnEnv2 -&gt; Var -&gt; Var -&gt; RnEnv2
</span><a href="GHC.Types.Var.Env.html#rnBndr2"><span class="hs-identifier hs-var">rnBndr2</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608964"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681608965"><span class="hs-identifier hs-var">tv1</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681608967"><span class="hs-identifier hs-var">tv2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681608966"><span class="hs-identifier hs-var">tvs1</span></a></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><a href="#local-6989586621681608968"><span class="hs-identifier hs-var">tvs2</span></a></span><span>
</span><span id="line-426"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqVarBndrs"><span class="hs-identifier hs-var">eqVarBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Var]
</span><span class="hs-identifier">_</span></span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe RnEnv2
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-427"></span><span>
</span><span id="line-428"></span><span class="hs-comment">-- Now here comes the real worker</span><span>
</span><span id="line-429"></span><span>
</span><span id="line-430"></span><span class="hs-comment">{-
Note [nonDetCmpType nondeterminism]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
nonDetCmpType is implemented in terms of nonDetCmpTypeX. nonDetCmpTypeX
uses nonDetCmpTc which compares TyCons by their Unique value. Using Uniques for
ordering leads to nondeterminism. We hit the same problem in the TyVarTy case,
comparing type variables is nondeterministic, note the call to nonDetCmpVar in
nonDetCmpTypeX.
See Note [Unique Determinism] for more details.
-}</span><span>
</span><span id="line-440"></span><span>
</span><span id="line-441"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#nonDetCmpType"><span class="hs-identifier hs-type">nonDetCmpType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ordering</span></span><span>
</span><span id="line-442"></span><span id="nonDetCmpType"><span class="annot"><span class="annottext">nonDetCmpType :: Type -&gt; Type -&gt; Ordering
</span><a href="GHC.Core.TyCo.Compare.html#nonDetCmpType"><span class="hs-identifier hs-var hs-var">nonDetCmpType</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621681608969"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608969"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621681608970"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608970"><span class="hs-identifier hs-var">t2</span></a></span></span><span>
</span><span id="line-443"></span><span>  </span><span class="hs-comment">-- See Note [Type comparisons using object pointer comparisons]</span><span>
</span><span id="line-444"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int#
</span><span class="hs-number">1#</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Int#
forall a b. a -&gt; b -&gt; Int#
</span><span class="hs-identifier hs-var">reallyUnsafePtrEquality#</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608969"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608970"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-445"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span>
</span><span id="line-446"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#nonDetCmpType"><span class="hs-identifier hs-var">nonDetCmpType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span id="local-6989586621681608971"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681608971"><span class="hs-identifier hs-var">tc1</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span id="local-6989586621681608972"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681608972"><span class="hs-identifier hs-var">tc2</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681608971"><span class="hs-identifier hs-var">tc1</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681608972"><span class="hs-identifier hs-var">tc2</span></a></span><span>
</span><span id="line-447"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span>
</span><span id="line-448"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#nonDetCmpType"><span class="hs-identifier hs-var">nonDetCmpType</span></a></span><span> </span><span id="local-6989586621681608973"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608973"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681608974"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608974"><span class="hs-identifier hs-var">t2</span></a></span></span><span>
</span><span id="line-449"></span><span>  </span><span class="hs-comment">-- we know k1 and k2 have the same kind, because they both have kind *.</span><span>
</span><span id="line-450"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Ordering
</span><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTypeX"><span class="hs-identifier hs-var">nonDetCmpTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608975"><span class="hs-identifier hs-var">rn_env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608973"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608974"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-451"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-452"></span><span>    </span><span id="local-6989586621681608975"><span class="annot"><span class="annottext">rn_env :: RnEnv2
</span><a href="#local-6989586621681608975"><span class="hs-identifier hs-var hs-var">rn_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InScopeSet -&gt; RnEnv2
</span><a href="GHC.Types.Var.Env.html#mkRnEnv2"><span class="hs-identifier hs-var">mkRnEnv2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VarSet -&gt; InScopeSet
</span><a href="GHC.Types.Var.Env.html#mkInScopeSet"><span class="hs-identifier hs-var">mkInScopeSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Type] -&gt; VarSet
</span><a href="GHC.Core.TyCo.FVs.html#tyCoVarsOfTypes"><span class="hs-identifier hs-var">tyCoVarsOfTypes</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608973"><span class="hs-identifier hs-var">t1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681608974"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-453"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#nonDetCmpType"><span class="hs-pragma hs-type">nonDetCmpType</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-454"></span><span>
</span><span id="line-455"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTypes"><span class="hs-identifier hs-type">nonDetCmpTypes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ordering</span></span><span>
</span><span id="line-456"></span><span id="nonDetCmpTypes"><span class="annot"><span class="annottext">nonDetCmpTypes :: [Type] -&gt; [Type] -&gt; Ordering
</span><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTypes"><span class="hs-identifier hs-var hs-var">nonDetCmpTypes</span></a></span></span><span> </span><span id="local-6989586621681608976"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681608976"><span class="hs-identifier hs-var">ts1</span></a></span></span><span> </span><span id="local-6989586621681608977"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681608977"><span class="hs-identifier hs-var">ts2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; [Type] -&gt; [Type] -&gt; Ordering
</span><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTypesX"><span class="hs-identifier hs-var">nonDetCmpTypesX</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681608978"><span class="hs-identifier hs-var">rn_env</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681608976"><span class="hs-identifier hs-var">ts1</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681608977"><span class="hs-identifier hs-var">ts2</span></a></span><span>
</span><span id="line-457"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-458"></span><span>    </span><span id="local-6989586621681608978"><span class="annot"><span class="annottext">rn_env :: RnEnv2
</span><a href="#local-6989586621681608978"><span class="hs-identifier hs-var hs-var">rn_env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InScopeSet -&gt; RnEnv2
</span><a href="GHC.Types.Var.Env.html#mkRnEnv2"><span class="hs-identifier hs-var">mkRnEnv2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VarSet -&gt; InScopeSet
</span><a href="GHC.Types.Var.Env.html#mkInScopeSet"><span class="hs-identifier hs-var">mkInScopeSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Type] -&gt; VarSet
</span><a href="GHC.Core.TyCo.FVs.html#tyCoVarsOfTypes"><span class="hs-identifier hs-var">tyCoVarsOfTypes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681608976"><span class="hs-identifier hs-var">ts1</span></a></span><span> </span><span class="annot"><span class="annottext">[Type] -&gt; [Type] -&gt; [Type]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681608977"><span class="hs-identifier hs-var">ts2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-459"></span><span>
</span><span id="line-460"></span><span class="hs-comment">-- | An ordering relation between two 'Type's (known below as @t1 :: k1@</span><span>
</span><span id="line-461"></span><span class="hs-comment">-- and @t2 :: k2@)</span><span>
</span><span id="line-462"></span><span class="hs-keyword">data</span><span> </span><span id="TypeOrdering"><span class="annot"><a href="GHC.Core.TyCo.Compare.html#TypeOrdering"><span class="hs-identifier hs-var">TypeOrdering</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TLT"><span class="annot"><a href="GHC.Core.TyCo.Compare.html#TLT"><span class="hs-identifier hs-var">TLT</span></a></span></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ @t1 &lt; t2@</span></span><span>
</span><span id="line-463"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span id="TEQ"><span class="annot"><a href="GHC.Core.TyCo.Compare.html#TEQ"><span class="hs-identifier hs-var">TEQ</span></a></span></span><span>  </span><span class="hs-comment">-- ^ @t1 ~ t2@ and there are no casts in either,</span><span>
</span><span id="line-464"></span><span>                         </span><span class="hs-comment">-- therefore we can conclude @k1 ~ k2@</span><span>
</span><span id="line-465"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span id="TEQX"><span class="annot"><a href="GHC.Core.TyCo.Compare.html#TEQX"><span class="hs-identifier hs-var">TEQX</span></a></span></span><span> </span><span class="hs-comment">-- ^ @t1 ~ t2@ yet one of the types contains a cast so</span><span>
</span><span id="line-466"></span><span>                         </span><span class="hs-comment">-- they may differ in kind.</span><span>
</span><span id="line-467"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span id="TGT"><span class="annot"><a href="GHC.Core.TyCo.Compare.html#TGT"><span class="hs-identifier hs-var">TGT</span></a></span></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ @t1 &gt; t2@</span></span><span>
</span><span id="line-468"></span><span>                  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681608984"><span id="local-6989586621681608986"><span class="annot"><span class="annottext">TypeOrdering -&gt; TypeOrdering -&gt; Bool
(TypeOrdering -&gt; TypeOrdering -&gt; Bool)
-&gt; (TypeOrdering -&gt; TypeOrdering -&gt; Bool) -&gt; Eq TypeOrdering
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: TypeOrdering -&gt; TypeOrdering -&gt; Bool
== :: TypeOrdering -&gt; TypeOrdering -&gt; Bool
$c/= :: TypeOrdering -&gt; TypeOrdering -&gt; Bool
/= :: TypeOrdering -&gt; TypeOrdering -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681608993"><span id="local-6989586621681608995"><span id="local-6989586621681608997"><span id="local-6989586621681609001"><span id="local-6989586621681609004"><span id="local-6989586621681609007"><span id="local-6989586621681609010"><span class="annot"><span class="annottext">Eq TypeOrdering
Eq TypeOrdering =&gt;
(TypeOrdering -&gt; TypeOrdering -&gt; Ordering)
-&gt; (TypeOrdering -&gt; TypeOrdering -&gt; Bool)
-&gt; (TypeOrdering -&gt; TypeOrdering -&gt; Bool)
-&gt; (TypeOrdering -&gt; TypeOrdering -&gt; Bool)
-&gt; (TypeOrdering -&gt; TypeOrdering -&gt; Bool)
-&gt; (TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering)
-&gt; (TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering)
-&gt; Ord TypeOrdering
TypeOrdering -&gt; TypeOrdering -&gt; Bool
TypeOrdering -&gt; TypeOrdering -&gt; Ordering
TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: TypeOrdering -&gt; TypeOrdering -&gt; Ordering
compare :: TypeOrdering -&gt; TypeOrdering -&gt; Ordering
$c&lt; :: TypeOrdering -&gt; TypeOrdering -&gt; Bool
&lt; :: TypeOrdering -&gt; TypeOrdering -&gt; Bool
$c&lt;= :: TypeOrdering -&gt; TypeOrdering -&gt; Bool
&lt;= :: TypeOrdering -&gt; TypeOrdering -&gt; Bool
$c&gt; :: TypeOrdering -&gt; TypeOrdering -&gt; Bool
&gt; :: TypeOrdering -&gt; TypeOrdering -&gt; Bool
$c&gt;= :: TypeOrdering -&gt; TypeOrdering -&gt; Bool
&gt;= :: TypeOrdering -&gt; TypeOrdering -&gt; Bool
$cmax :: TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering
max :: TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering
$cmin :: TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering
min :: TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681609014"><span id="local-6989586621681609022"><span id="local-6989586621681609028"><span id="local-6989586621681609037"><span id="local-6989586621681609039"><span id="local-6989586621681609043"><span id="local-6989586621681609047"><span id="local-6989586621681609051"><span class="annot"><span class="annottext">Int -&gt; TypeOrdering
TypeOrdering -&gt; Int
TypeOrdering -&gt; [TypeOrdering]
TypeOrdering -&gt; TypeOrdering
TypeOrdering -&gt; TypeOrdering -&gt; [TypeOrdering]
TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering -&gt; [TypeOrdering]
(TypeOrdering -&gt; TypeOrdering)
-&gt; (TypeOrdering -&gt; TypeOrdering)
-&gt; (Int -&gt; TypeOrdering)
-&gt; (TypeOrdering -&gt; Int)
-&gt; (TypeOrdering -&gt; [TypeOrdering])
-&gt; (TypeOrdering -&gt; TypeOrdering -&gt; [TypeOrdering])
-&gt; (TypeOrdering -&gt; TypeOrdering -&gt; [TypeOrdering])
-&gt; (TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering -&gt; [TypeOrdering])
-&gt; Enum TypeOrdering
forall a.
(a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (Int -&gt; a)
-&gt; (a -&gt; Int)
-&gt; (a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; a -&gt; [a])
-&gt; Enum a
$csucc :: TypeOrdering -&gt; TypeOrdering
succ :: TypeOrdering -&gt; TypeOrdering
$cpred :: TypeOrdering -&gt; TypeOrdering
pred :: TypeOrdering -&gt; TypeOrdering
$ctoEnum :: Int -&gt; TypeOrdering
toEnum :: Int -&gt; TypeOrdering
$cfromEnum :: TypeOrdering -&gt; Int
fromEnum :: TypeOrdering -&gt; Int
$cenumFrom :: TypeOrdering -&gt; [TypeOrdering]
enumFrom :: TypeOrdering -&gt; [TypeOrdering]
$cenumFromThen :: TypeOrdering -&gt; TypeOrdering -&gt; [TypeOrdering]
enumFromThen :: TypeOrdering -&gt; TypeOrdering -&gt; [TypeOrdering]
$cenumFromTo :: TypeOrdering -&gt; TypeOrdering -&gt; [TypeOrdering]
enumFromTo :: TypeOrdering -&gt; TypeOrdering -&gt; [TypeOrdering]
$cenumFromThenTo :: TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering -&gt; [TypeOrdering]
enumFromThenTo :: TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering -&gt; [TypeOrdering]
</span><a href="../../base-4.18.3.0/src/GHC.Enum.html#Enum/GHC.Enum.html#Enum"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Enum</span></a></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681609055"><span id="local-6989586621681609057"><span class="annot"><span class="annottext">TypeOrdering
TypeOrdering -&gt; TypeOrdering -&gt; Bounded TypeOrdering
forall a. a -&gt; a -&gt; Bounded a
$cminBound :: TypeOrdering
minBound :: TypeOrdering
$cmaxBound :: TypeOrdering
maxBound :: TypeOrdering
</span><a href="../../base-4.18.3.0/src/GHC.Enum.html#Bounded/GHC.Enum.html#Bounded"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Bounded</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-469"></span><span>
</span><span id="line-470"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTypeX"><span class="hs-identifier hs-type">nonDetCmpTypeX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#RnEnv2"><span class="hs-identifier hs-type">RnEnv2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ordering</span></span><span>  </span><span class="hs-comment">-- Main workhorse</span><span>
</span><span id="line-471"></span><span>    </span><span class="hs-comment">-- See Note [Non-trivial definitional equality] in GHC.Core.TyCo.Rep</span><span>
</span><span id="line-472"></span><span>    </span><span class="hs-comment">-- See Note [Computing equality on types]</span><span>
</span><span id="line-473"></span><span id="nonDetCmpTypeX"><span class="annot"><span class="annottext">nonDetCmpTypeX :: RnEnv2 -&gt; Type -&gt; Type -&gt; Ordering
</span><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTypeX"><span class="hs-identifier hs-var hs-var">nonDetCmpTypeX</span></a></span></span><span> </span><span id="local-6989586621681609060"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609060"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681609061"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609061"><span class="hs-identifier hs-var">orig_t1</span></a></span></span><span> </span><span id="local-6989586621681609062"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609062"><span class="hs-identifier hs-var">orig_t2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-474"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; TypeOrdering
</span><a href="#local-6989586621681609063"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609060"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609061"><span class="hs-identifier hs-var">orig_t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609062"><span class="hs-identifier hs-var">orig_t2</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-475"></span><span>      </span><span class="hs-comment">-- If there are casts then we also need to do a comparison of</span><span>
</span><span id="line-476"></span><span>      </span><span class="hs-comment">-- the kinds of the types being compared</span><span>
</span><span id="line-477"></span><span>      </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TEQX"><span class="hs-identifier hs-var">TEQX</span></a></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TypeOrdering -&gt; Ordering
</span><a href="#local-6989586621681609064"><span class="hs-identifier hs-var">toOrdering</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeOrdering -&gt; Ordering) -&gt; TypeOrdering -&gt; Ordering
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; TypeOrdering
</span><a href="#local-6989586621681609063"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609060"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609065"><span class="hs-identifier hs-var">k1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609066"><span class="hs-identifier hs-var">k2</span></a></span><span>
</span><span id="line-478"></span><span>      </span><span id="local-6989586621681609067"><span class="annot"><span class="annottext">TypeOrdering
</span><a href="#local-6989586621681609067"><span class="hs-identifier hs-var">ty_ordering</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TypeOrdering -&gt; Ordering
</span><a href="#local-6989586621681609064"><span class="hs-identifier hs-var">toOrdering</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="#local-6989586621681609067"><span class="hs-identifier hs-var">ty_ordering</span></a></span><span>
</span><span id="line-479"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-480"></span><span>    </span><span id="local-6989586621681609065"><span class="annot"><span class="annottext">k1 :: Type
</span><a href="#local-6989586621681609065"><span class="hs-identifier hs-var hs-var">k1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Type -&gt; Type
Type -&gt; Type
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609061"><span class="hs-identifier hs-var">orig_t1</span></a></span><span>
</span><span id="line-481"></span><span>    </span><span id="local-6989586621681609066"><span class="annot"><span class="annottext">k2 :: Type
</span><a href="#local-6989586621681609066"><span class="hs-identifier hs-var hs-var">k2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Type -&gt; Type
Type -&gt; Type
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609062"><span class="hs-identifier hs-var">orig_t2</span></a></span><span>
</span><span id="line-482"></span><span>
</span><span id="line-483"></span><span>    </span><span class="annot"><a href="#local-6989586621681609064"><span class="hs-identifier hs-type">toOrdering</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#TypeOrdering"><span class="hs-identifier hs-type">TypeOrdering</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ordering</span></span><span>
</span><span id="line-484"></span><span>    </span><span id="local-6989586621681609064"><span class="annot"><span class="annottext">toOrdering :: TypeOrdering -&gt; Ordering
</span><a href="#local-6989586621681609064"><span class="hs-identifier hs-var hs-var">toOrdering</span></a></span></span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TLT"><span class="hs-identifier hs-var">TLT</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span>
</span><span id="line-485"></span><span>    </span><span class="annot"><a href="#local-6989586621681609064"><span class="hs-identifier hs-var">toOrdering</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TEQ"><span class="hs-identifier hs-var">TEQ</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span>
</span><span id="line-486"></span><span>    </span><span class="annot"><a href="#local-6989586621681609064"><span class="hs-identifier hs-var">toOrdering</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TEQX"><span class="hs-identifier hs-var">TEQX</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span>
</span><span id="line-487"></span><span>    </span><span class="annot"><a href="#local-6989586621681609064"><span class="hs-identifier hs-var">toOrdering</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TGT"><span class="hs-identifier hs-var">TGT</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-488"></span><span>
</span><span id="line-489"></span><span>    </span><span class="annot"><a href="#local-6989586621681609068"><span class="hs-identifier hs-type">liftOrdering</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ordering</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#TypeOrdering"><span class="hs-identifier hs-type">TypeOrdering</span></a></span><span>
</span><span id="line-490"></span><span>    </span><span id="local-6989586621681609068"><span class="annot"><span class="annottext">liftOrdering :: Ordering -&gt; TypeOrdering
</span><a href="#local-6989586621681609068"><span class="hs-identifier hs-var hs-var">liftOrdering</span></a></span></span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TLT"><span class="hs-identifier hs-var">TLT</span></a></span><span>
</span><span id="line-491"></span><span>    </span><span class="annot"><a href="#local-6989586621681609068"><span class="hs-identifier hs-var">liftOrdering</span></a></span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TEQ"><span class="hs-identifier hs-var">TEQ</span></a></span><span>
</span><span id="line-492"></span><span>    </span><span class="annot"><a href="#local-6989586621681609068"><span class="hs-identifier hs-var">liftOrdering</span></a></span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TGT"><span class="hs-identifier hs-var">TGT</span></a></span><span>
</span><span id="line-493"></span><span>
</span><span id="line-494"></span><span>    </span><span class="annot"><a href="#local-6989586621681609069"><span class="hs-identifier hs-type">thenCmpTy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#TypeOrdering"><span class="hs-identifier hs-type">TypeOrdering</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#TypeOrdering"><span class="hs-identifier hs-type">TypeOrdering</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#TypeOrdering"><span class="hs-identifier hs-type">TypeOrdering</span></a></span><span>
</span><span id="line-495"></span><span>    </span><span id="local-6989586621681609069"><span class="annot"><span class="annottext">thenCmpTy :: TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering
</span><a href="#local-6989586621681609069"><span class="hs-identifier hs-var hs-var">thenCmpTy</span></a></span></span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TEQ"><span class="hs-identifier hs-var">TEQ</span></a></span><span>  </span><span id="local-6989586621681609070"><span class="annot"><span class="annottext">TypeOrdering
</span><a href="#local-6989586621681609070"><span class="hs-identifier hs-var">rel</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="#local-6989586621681609070"><span class="hs-identifier hs-var">rel</span></a></span><span>
</span><span id="line-496"></span><span>    </span><span class="annot"><a href="#local-6989586621681609069"><span class="hs-identifier hs-var">thenCmpTy</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TEQX"><span class="hs-identifier hs-var">TEQX</span></a></span><span> </span><span id="local-6989586621681609071"><span class="annot"><span class="annottext">TypeOrdering
</span><a href="#local-6989586621681609071"><span class="hs-identifier hs-var">rel</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrdering -&gt; TypeOrdering
</span><a href="#local-6989586621681609072"><span class="hs-identifier hs-var">hasCast</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="#local-6989586621681609071"><span class="hs-identifier hs-var">rel</span></a></span><span>
</span><span id="line-497"></span><span>    </span><span class="annot"><a href="#local-6989586621681609069"><span class="hs-identifier hs-var">thenCmpTy</span></a></span><span> </span><span id="local-6989586621681609073"><span class="annot"><span class="annottext">TypeOrdering
</span><a href="#local-6989586621681609073"><span class="hs-identifier hs-var">rel</span></a></span></span><span>  </span><span class="annot"><span class="annottext">TypeOrdering
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="#local-6989586621681609073"><span class="hs-identifier hs-var">rel</span></a></span><span>
</span><span id="line-498"></span><span>
</span><span id="line-499"></span><span>    </span><span class="annot"><a href="#local-6989586621681609072"><span class="hs-identifier hs-type">hasCast</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#TypeOrdering"><span class="hs-identifier hs-type">TypeOrdering</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#TypeOrdering"><span class="hs-identifier hs-type">TypeOrdering</span></a></span><span>
</span><span id="line-500"></span><span>    </span><span id="local-6989586621681609072"><span class="annot"><span class="annottext">hasCast :: TypeOrdering -&gt; TypeOrdering
</span><a href="#local-6989586621681609072"><span class="hs-identifier hs-var hs-var">hasCast</span></a></span></span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TEQ"><span class="hs-identifier hs-var">TEQ</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TEQX"><span class="hs-identifier hs-var">TEQX</span></a></span><span>
</span><span id="line-501"></span><span>    </span><span class="annot"><a href="#local-6989586621681609072"><span class="hs-identifier hs-var">hasCast</span></a></span><span> </span><span id="local-6989586621681609074"><span class="annot"><span class="annottext">TypeOrdering
</span><a href="#local-6989586621681609074"><span class="hs-identifier hs-var">rel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="#local-6989586621681609074"><span class="hs-identifier hs-var">rel</span></a></span><span>
</span><span id="line-502"></span><span>
</span><span id="line-503"></span><span>    </span><span class="hs-comment">-- Returns both the resulting ordering relation between</span><span>
</span><span id="line-504"></span><span>    </span><span class="hs-comment">-- the two types and whether either contains a cast.</span><span>
</span><span id="line-505"></span><span>    </span><span class="annot"><a href="#local-6989586621681609063"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#RnEnv2"><span class="hs-identifier hs-type">RnEnv2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#TypeOrdering"><span class="hs-identifier hs-type">TypeOrdering</span></a></span><span>
</span><span id="line-506"></span><span>    </span><span class="hs-comment">-- See Note [Comparing nullary type synonyms].</span><span>
</span><span id="line-507"></span><span>    </span><span id="local-6989586621681609063"><span class="annot"><span class="annottext">go :: RnEnv2 -&gt; Type -&gt; Type -&gt; TypeOrdering
</span><a href="#local-6989586621681609063"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span id="local-6989586621681609075"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681609075"><span class="hs-identifier hs-var">tc1</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span id="local-6989586621681609076"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681609076"><span class="hs-identifier hs-var">tc2</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-508"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681609075"><span class="hs-identifier hs-var">tc1</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681609076"><span class="hs-identifier hs-var">tc2</span></a></span><span>
</span><span id="line-509"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TEQ"><span class="hs-identifier hs-var">TEQ</span></a></span><span>
</span><span id="line-510"></span><span>    </span><span class="annot"><a href="#local-6989586621681609063"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681609077"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609077"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681609078"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609078"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681609079"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609079"><span class="hs-identifier hs-var">t2</span></a></span></span><span>
</span><span id="line-511"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681609080"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609080"><span class="hs-identifier hs-var">t1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe Type
</span><a href="GHC.Core.Type.html#coreView"><span class="hs-identifier hs-var">coreView</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609078"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; TypeOrdering
</span><a href="#local-6989586621681609063"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609077"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609080"><span class="hs-identifier hs-var">t1'</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609079"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-512"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681609081"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609081"><span class="hs-identifier hs-var">t2'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Maybe Type
</span><a href="GHC.Core.Type.html#coreView"><span class="hs-identifier hs-var">coreView</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609079"><span class="hs-identifier hs-var">t2</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; TypeOrdering
</span><a href="#local-6989586621681609063"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609077"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609078"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609081"><span class="hs-identifier hs-var">t2'</span></a></span><span>
</span><span id="line-513"></span><span>
</span><span id="line-514"></span><span>    </span><span class="annot"><a href="#local-6989586621681609063"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681609082"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609082"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyVarTy"><span class="hs-identifier hs-type">TyVarTy</span></a></span><span> </span><span id="local-6989586621681609083"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681609083"><span class="hs-identifier hs-var">tv1</span></a></span></span><span class="hs-special">)</span><span>       </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyVarTy"><span class="hs-identifier hs-type">TyVarTy</span></a></span><span> </span><span id="local-6989586621681609084"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681609084"><span class="hs-identifier hs-var">tv2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-515"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering -&gt; TypeOrdering
</span><a href="#local-6989586621681609068"><span class="hs-identifier hs-var">liftOrdering</span></a></span><span> </span><span class="annot"><span class="annottext">(Ordering -&gt; TypeOrdering) -&gt; Ordering -&gt; TypeOrdering
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Var -&gt; Var
</span><a href="GHC.Types.Var.Env.html#rnOccL"><span class="hs-identifier hs-var">rnOccL</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609082"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681609083"><span class="hs-identifier hs-var">tv1</span></a></span><span> </span><span class="annot"><span class="annottext">Var -&gt; Var -&gt; Ordering
</span><a href="GHC.Types.Var.html#nonDetCmpVar"><span class="hs-operator hs-var">`nonDetCmpVar`</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Var -&gt; Var
</span><a href="GHC.Types.Var.Env.html#rnOccR"><span class="hs-identifier hs-var">rnOccR</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609082"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681609084"><span class="hs-identifier hs-var">tv2</span></a></span><span>
</span><span id="line-516"></span><span>    </span><span class="annot"><a href="#local-6989586621681609063"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681609086"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609086"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ForAllTy"><span class="hs-identifier hs-type">ForAllTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-type">Bndr</span></a></span><span> </span><span id="local-6989586621681609087"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681609087"><span class="hs-identifier hs-var">tv1</span></a></span></span><span> </span><span id="local-6989586621681609088"><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="#local-6989586621681609088"><span class="hs-identifier hs-var">vis1</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681609089"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609089"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ForAllTy"><span class="hs-identifier hs-type">ForAllTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-type">Bndr</span></a></span><span> </span><span id="local-6989586621681609090"><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681609090"><span class="hs-identifier hs-var">tv2</span></a></span></span><span> </span><span id="local-6989586621681609091"><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="#local-6989586621681609091"><span class="hs-identifier hs-var">vis2</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681609092"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609092"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-517"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering -&gt; TypeOrdering
</span><a href="#local-6989586621681609068"><span class="hs-identifier hs-var">liftOrdering</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="#local-6989586621681609088"><span class="hs-identifier hs-var">vis1</span></a></span><span> </span><span class="annot"><span class="annottext">ForAllTyFlag -&gt; ForAllTyFlag -&gt; Ordering
</span><a href="GHC.Core.TyCo.Compare.html#cmpForAllVis"><span class="hs-operator hs-var">`cmpForAllVis`</span></a></span><span> </span><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="#local-6989586621681609091"><span class="hs-identifier hs-var">vis2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-518"></span><span>        </span><span class="annot"><span class="annottext">TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering
</span><a href="#local-6989586621681609069"><span class="hs-operator hs-var">`thenCmpTy`</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; TypeOrdering
</span><a href="#local-6989586621681609063"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609086"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Type
</span><a href="GHC.Types.Var.html#varType"><span class="hs-identifier hs-var">varType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681609087"><span class="hs-identifier hs-var">tv1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Var -&gt; Type
</span><a href="GHC.Types.Var.html#varType"><span class="hs-identifier hs-var">varType</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681609090"><span class="hs-identifier hs-var">tv2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-519"></span><span>        </span><span class="annot"><span class="annottext">TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering
</span><a href="#local-6989586621681609069"><span class="hs-operator hs-var">`thenCmpTy`</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; TypeOrdering
</span><a href="#local-6989586621681609063"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnEnv2 -&gt; Var -&gt; Var -&gt; RnEnv2
</span><a href="GHC.Types.Var.Env.html#rnBndr2"><span class="hs-identifier hs-var">rnBndr2</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609086"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681609087"><span class="hs-identifier hs-var">tv1</span></a></span><span> </span><span class="annot"><span class="annottext">Var
</span><a href="#local-6989586621681609090"><span class="hs-identifier hs-var">tv2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609089"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609092"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-520"></span><span>
</span><span id="line-521"></span><span>        </span><span class="hs-comment">-- See Note [Equality on AppTys]</span><span>
</span><span id="line-522"></span><span>    </span><span class="annot"><a href="#local-6989586621681609063"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681609093"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609093"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AppTy"><span class="hs-identifier hs-type">AppTy</span></a></span><span> </span><span id="local-6989586621681609094"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609094"><span class="hs-identifier hs-var">s1</span></a></span></span><span> </span><span id="local-6989586621681609095"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609095"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681609096"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609096"><span class="hs-identifier hs-var">ty2</span></a></span></span><span>
</span><span id="line-523"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681609097"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609097"><span class="hs-identifier hs-var">s2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681609098"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609098"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Type -&gt; Maybe (Type, Type)
Type -&gt; Maybe (Type, Type)
</span><a href="GHC.Core.Type.html#splitAppTyNoView_maybe"><span class="hs-identifier hs-var">splitAppTyNoView_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609096"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-524"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; TypeOrdering
</span><a href="#local-6989586621681609063"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609093"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609094"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609097"><span class="hs-identifier hs-var">s2</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering
</span><a href="#local-6989586621681609069"><span class="hs-operator hs-var">`thenCmpTy`</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; TypeOrdering
</span><a href="#local-6989586621681609063"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609093"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609095"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609098"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-525"></span><span>    </span><span class="annot"><a href="#local-6989586621681609063"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681609099"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609099"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681609100"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609100"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AppTy"><span class="hs-identifier hs-type">AppTy</span></a></span><span> </span><span id="local-6989586621681609101"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609101"><span class="hs-identifier hs-var">s2</span></a></span></span><span> </span><span id="local-6989586621681609102"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609102"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-526"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681609103"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609103"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681609104"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609104"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Type -&gt; Maybe (Type, Type)
Type -&gt; Maybe (Type, Type)
</span><a href="GHC.Core.Type.html#splitAppTyNoView_maybe"><span class="hs-identifier hs-var">splitAppTyNoView_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609100"><span class="hs-identifier hs-var">ty1</span></a></span><span>
</span><span id="line-527"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; TypeOrdering
</span><a href="#local-6989586621681609063"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609099"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609103"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609101"><span class="hs-identifier hs-var">s2</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering
</span><a href="#local-6989586621681609069"><span class="hs-operator hs-var">`thenCmpTy`</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; TypeOrdering
</span><a href="#local-6989586621681609063"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609099"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609104"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609102"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-528"></span><span>
</span><span id="line-529"></span><span>    </span><span class="annot"><a href="#local-6989586621681609063"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681609105"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609105"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunTy"><span class="hs-identifier hs-type">FunTy</span></a></span><span> </span><span class="annot"><span class="annottext">FunTyFlag
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681609106"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609106"><span class="hs-identifier hs-var">w1</span></a></span></span><span> </span><span id="local-6989586621681609107"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609107"><span class="hs-identifier hs-var">s1</span></a></span></span><span> </span><span id="local-6989586621681609108"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609108"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunTy"><span class="hs-identifier hs-type">FunTy</span></a></span><span> </span><span class="annot"><span class="annottext">FunTyFlag
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681609109"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609109"><span class="hs-identifier hs-var">w2</span></a></span></span><span> </span><span id="local-6989586621681609110"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609110"><span class="hs-identifier hs-var">s2</span></a></span></span><span> </span><span id="local-6989586621681609111"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609111"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-530"></span><span>        </span><span class="hs-comment">-- NB: nonDepCmpTypeX does the kind check requested by</span><span>
</span><span id="line-531"></span><span>        </span><span class="hs-comment">-- Note [Equality on FunTys] in GHC.Core.TyCo.Rep</span><span>
</span><span id="line-532"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering -&gt; TypeOrdering
</span><a href="#local-6989586621681609068"><span class="hs-identifier hs-var">liftOrdering</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Ordering
</span><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTypeX"><span class="hs-identifier hs-var">nonDetCmpTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609105"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609107"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609110"><span class="hs-identifier hs-var">s2</span></a></span><span> </span><span class="annot"><span class="annottext">Ordering -&gt; Ordering -&gt; Ordering
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%3C%3E/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">S.&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Ordering
</span><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTypeX"><span class="hs-identifier hs-var">nonDetCmpTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609105"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609108"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609111"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-533"></span><span>          </span><span class="annot"><span class="annottext">TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering
</span><a href="#local-6989586621681609069"><span class="hs-operator hs-var">`thenCmpTy`</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; TypeOrdering
</span><a href="#local-6989586621681609063"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609105"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609106"><span class="hs-identifier hs-var">w1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609109"><span class="hs-identifier hs-var">w2</span></a></span><span>
</span><span id="line-534"></span><span>        </span><span class="hs-comment">-- Comparing multiplicities last because the test is usually true</span><span>
</span><span id="line-535"></span><span>
</span><span id="line-536"></span><span>    </span><span class="annot"><a href="#local-6989586621681609063"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681609112"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609112"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span id="local-6989586621681609113"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681609113"><span class="hs-identifier hs-var">tc1</span></a></span></span><span> </span><span id="local-6989586621681609114"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681609114"><span class="hs-identifier hs-var">tys1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span id="local-6989586621681609115"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681609115"><span class="hs-identifier hs-var">tc2</span></a></span></span><span> </span><span id="local-6989586621681609116"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681609116"><span class="hs-identifier hs-var">tys2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-537"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering -&gt; TypeOrdering
</span><a href="#local-6989586621681609068"><span class="hs-identifier hs-var">liftOrdering</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681609113"><span class="hs-identifier hs-var">tc1</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Ordering
</span><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTc"><span class="hs-operator hs-var">`nonDetCmpTc`</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681609115"><span class="hs-identifier hs-var">tc2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering
</span><a href="#local-6989586621681609069"><span class="hs-operator hs-var">`thenCmpTy`</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; [Type] -&gt; [Type] -&gt; TypeOrdering
</span><a href="#local-6989586621681609117"><span class="hs-identifier hs-var">gos</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609112"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681609114"><span class="hs-identifier hs-var">tys1</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681609116"><span class="hs-identifier hs-var">tys2</span></a></span><span>
</span><span id="line-538"></span><span>
</span><span id="line-539"></span><span>    </span><span class="annot"><a href="#local-6989586621681609063"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#LitTy"><span class="hs-identifier hs-type">LitTy</span></a></span><span> </span><span id="local-6989586621681609118"><span class="annot"><span class="annottext">TyLit
</span><a href="#local-6989586621681609118"><span class="hs-identifier hs-var">l1</span></a></span></span><span class="hs-special">)</span><span>          </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#LitTy"><span class="hs-identifier hs-type">LitTy</span></a></span><span> </span><span id="local-6989586621681609119"><span class="annot"><span class="annottext">TyLit
</span><a href="#local-6989586621681609119"><span class="hs-identifier hs-var">l2</span></a></span></span><span class="hs-special">)</span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering -&gt; TypeOrdering
</span><a href="#local-6989586621681609068"><span class="hs-identifier hs-var">liftOrdering</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyLit -&gt; TyLit -&gt; Ordering
</span><a href="GHC.Core.TyCo.Rep.html#nonDetCmpTyLit"><span class="hs-identifier hs-var">nonDetCmpTyLit</span></a></span><span> </span><span class="annot"><span class="annottext">TyLit
</span><a href="#local-6989586621681609118"><span class="hs-identifier hs-var">l1</span></a></span><span> </span><span class="annot"><span class="annottext">TyLit
</span><a href="#local-6989586621681609119"><span class="hs-identifier hs-var">l2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-540"></span><span>    </span><span class="annot"><a href="#local-6989586621681609063"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681609121"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609121"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CastTy"><span class="hs-identifier hs-type">CastTy</span></a></span><span> </span><span id="local-6989586621681609122"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609122"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>       </span><span id="local-6989586621681609123"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609123"><span class="hs-identifier hs-var">t2</span></a></span></span><span>                  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrdering -&gt; TypeOrdering
</span><a href="#local-6989586621681609072"><span class="hs-identifier hs-var">hasCast</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeOrdering -&gt; TypeOrdering) -&gt; TypeOrdering -&gt; TypeOrdering
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; TypeOrdering
</span><a href="#local-6989586621681609063"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609121"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609122"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609123"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-541"></span><span>    </span><span class="annot"><a href="#local-6989586621681609063"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681609124"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609124"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681609125"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609125"><span class="hs-identifier hs-var">t1</span></a></span></span><span>                  </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CastTy"><span class="hs-identifier hs-type">CastTy</span></a></span><span> </span><span id="local-6989586621681609126"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609126"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrdering -&gt; TypeOrdering
</span><a href="#local-6989586621681609072"><span class="hs-identifier hs-var">hasCast</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeOrdering -&gt; TypeOrdering) -&gt; TypeOrdering -&gt; TypeOrdering
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; TypeOrdering
</span><a href="#local-6989586621681609063"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609124"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609125"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609126"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-542"></span><span>
</span><span id="line-543"></span><span>    </span><span class="annot"><a href="#local-6989586621681609063"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionTy"><span class="hs-identifier hs-type">CoercionTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionTy"><span class="hs-identifier hs-type">CoercionTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TEQ"><span class="hs-identifier hs-var">TEQ</span></a></span><span>
</span><span id="line-544"></span><span>
</span><span id="line-545"></span><span>        </span><span class="hs-comment">-- Deal with the rest: TyVarTy &lt; CoercionTy &lt; AppTy &lt; LitTy &lt; TyConApp &lt; ForAllTy</span><span>
</span><span id="line-546"></span><span>    </span><span class="annot"><a href="#local-6989586621681609063"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681609127"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609127"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621681609128"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609128"><span class="hs-identifier hs-var">ty2</span></a></span></span><span>
</span><span id="line-547"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering -&gt; TypeOrdering
</span><a href="#local-6989586621681609068"><span class="hs-identifier hs-var">liftOrdering</span></a></span><span> </span><span class="annot"><span class="annottext">(Ordering -&gt; TypeOrdering) -&gt; Ordering -&gt; TypeOrdering
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Int
</span><a href="#local-6989586621681609129"><span class="hs-identifier hs-var">get_rank</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609127"><span class="hs-identifier hs-var">ty1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-operator hs-var">`compare`</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Int
</span><a href="#local-6989586621681609129"><span class="hs-identifier hs-var">get_rank</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609128"><span class="hs-identifier hs-var">ty2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-548"></span><span>      </span><span class="hs-keyword">where</span><span> </span><span class="annot"><a href="#local-6989586621681609129"><span class="hs-identifier hs-type">get_rank</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-549"></span><span>            </span><span id="local-6989586621681609129"><span class="annot"><span class="annottext">get_rank :: Type -&gt; Int
</span><a href="#local-6989586621681609129"><span class="hs-identifier hs-var hs-var">get_rank</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CastTy"><span class="hs-identifier hs-type">CastTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-550"></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; Int
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;nonDetCmpTypeX.get_rank&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Type] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609127"><span class="hs-identifier hs-var">ty1</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609128"><span class="hs-identifier hs-var">ty2</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-551"></span><span>            </span><span class="annot"><a href="#local-6989586621681609129"><span class="hs-identifier hs-var">get_rank</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyVarTy"><span class="hs-identifier hs-type">TyVarTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-552"></span><span>            </span><span class="annot"><a href="#local-6989586621681609129"><span class="hs-identifier hs-var">get_rank</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionTy"><span class="hs-identifier hs-type">CoercionTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-553"></span><span>            </span><span class="annot"><a href="#local-6989586621681609129"><span class="hs-identifier hs-var">get_rank</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AppTy"><span class="hs-identifier hs-type">AppTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span>
</span><span id="line-554"></span><span>            </span><span class="annot"><a href="#local-6989586621681609129"><span class="hs-identifier hs-var">get_rank</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#LitTy"><span class="hs-identifier hs-type">LitTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span>
</span><span id="line-555"></span><span>            </span><span class="annot"><a href="#local-6989586621681609129"><span class="hs-identifier hs-var">get_rank</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">5</span></span><span>
</span><span id="line-556"></span><span>            </span><span class="annot"><a href="#local-6989586621681609129"><span class="hs-identifier hs-var">get_rank</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunTy"><span class="hs-identifier hs-type">FunTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">6</span></span><span>
</span><span id="line-557"></span><span>            </span><span class="annot"><a href="#local-6989586621681609129"><span class="hs-identifier hs-var">get_rank</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ForAllTy"><span class="hs-identifier hs-type">ForAllTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">7</span></span><span>
</span><span id="line-558"></span><span>
</span><span id="line-559"></span><span>    </span><span class="annot"><a href="#local-6989586621681609117"><span class="hs-identifier hs-type">gos</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#RnEnv2"><span class="hs-identifier hs-type">RnEnv2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#TypeOrdering"><span class="hs-identifier hs-type">TypeOrdering</span></a></span><span>
</span><span id="line-560"></span><span>    </span><span id="local-6989586621681609117"><span class="annot"><span class="annottext">gos :: RnEnv2 -&gt; [Type] -&gt; [Type] -&gt; TypeOrdering
</span><a href="#local-6989586621681609117"><span class="hs-identifier hs-var hs-var">gos</span></a></span></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">[</span><span class="hs-special">]</span><span>         </span><span class="hs-special">[</span><span class="hs-special">]</span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TEQ"><span class="hs-identifier hs-var">TEQ</span></a></span><span>
</span><span id="line-561"></span><span>    </span><span class="annot"><a href="#local-6989586621681609117"><span class="hs-identifier hs-var">gos</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">[</span><span class="hs-special">]</span><span>         </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TLT"><span class="hs-identifier hs-var">TLT</span></a></span><span>
</span><span id="line-562"></span><span>    </span><span class="annot"><a href="#local-6989586621681609117"><span class="hs-identifier hs-var">gos</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span>   </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-special">[</span><span class="hs-special">]</span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrdering
</span><a href="GHC.Core.TyCo.Compare.html#TGT"><span class="hs-identifier hs-var">TGT</span></a></span><span>
</span><span id="line-563"></span><span>    </span><span class="annot"><a href="#local-6989586621681609117"><span class="hs-identifier hs-var">gos</span></a></span><span> </span><span id="local-6989586621681609133"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609133"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681609134"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609134"><span class="hs-identifier hs-var">ty1</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681609135"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681609135"><span class="hs-identifier hs-var">tys1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681609136"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609136"><span class="hs-identifier hs-var">ty2</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681609137"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681609137"><span class="hs-identifier hs-var">tys2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; TypeOrdering
</span><a href="#local-6989586621681609063"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609133"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609134"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609136"><span class="hs-identifier hs-var">ty2</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrdering -&gt; TypeOrdering -&gt; TypeOrdering
</span><a href="#local-6989586621681609069"><span class="hs-operator hs-var">`thenCmpTy`</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; [Type] -&gt; [Type] -&gt; TypeOrdering
</span><a href="#local-6989586621681609117"><span class="hs-identifier hs-var">gos</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609133"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681609135"><span class="hs-identifier hs-var">tys1</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681609137"><span class="hs-identifier hs-var">tys2</span></a></span><span>
</span><span id="line-564"></span><span>
</span><span id="line-565"></span><span class="hs-comment">-------------</span><span>
</span><span id="line-566"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTypesX"><span class="hs-identifier hs-type">nonDetCmpTypesX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#RnEnv2"><span class="hs-identifier hs-type">RnEnv2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ordering</span></span><span>
</span><span id="line-567"></span><span id="nonDetCmpTypesX"><span class="annot"><span class="annottext">nonDetCmpTypesX :: RnEnv2 -&gt; [Type] -&gt; [Type] -&gt; Ordering
</span><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTypesX"><span class="hs-identifier hs-var hs-var">nonDetCmpTypesX</span></a></span></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">[</span><span class="hs-special">]</span><span>        </span><span class="hs-special">[</span><span class="hs-special">]</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span>
</span><span id="line-568"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTypesX"><span class="hs-identifier hs-var">nonDetCmpTypesX</span></a></span><span> </span><span id="local-6989586621681609138"><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609138"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681609139"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609139"><span class="hs-identifier hs-var">t1</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681609140"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681609140"><span class="hs-identifier hs-var">tys1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681609141"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609141"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681609142"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681609142"><span class="hs-identifier hs-var">tys2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RnEnv2 -&gt; Type -&gt; Type -&gt; Ordering
</span><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTypeX"><span class="hs-identifier hs-var">nonDetCmpTypeX</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609138"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609139"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681609141"><span class="hs-identifier hs-var">t2</span></a></span><span> </span><span class="annot"><span class="annottext">Ordering -&gt; Ordering -&gt; Ordering
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%3C%3E/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">S.&lt;&gt;</span></a></span><span>
</span><span id="line-569"></span><span>                                          </span><span class="annot"><span class="annottext">RnEnv2 -&gt; [Type] -&gt; [Type] -&gt; Ordering
</span><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTypesX"><span class="hs-identifier hs-var">nonDetCmpTypesX</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><a href="#local-6989586621681609138"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681609140"><span class="hs-identifier hs-var">tys1</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681609142"><span class="hs-identifier hs-var">tys2</span></a></span><span>
</span><span id="line-570"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTypesX"><span class="hs-identifier hs-var">nonDetCmpTypesX</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">[</span><span class="hs-special">]</span><span>        </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span>
</span><span id="line-571"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTypesX"><span class="hs-identifier hs-var">nonDetCmpTypesX</span></a></span><span> </span><span class="annot"><span class="annottext">RnEnv2
</span><span class="hs-identifier">_</span></span><span>   </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-special">[</span><span class="hs-special">]</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-572"></span><span>
</span><span id="line-573"></span><span class="hs-comment">-------------</span><span>
</span><span id="line-574"></span><span class="hs-comment">-- | Compare two 'TyCon's.</span><span>
</span><span id="line-575"></span><span class="hs-comment">-- See Note [nonDetCmpType nondeterminism]</span><span>
</span><span id="line-576"></span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTc"><span class="hs-identifier hs-type">nonDetCmpTc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ordering</span></span><span>
</span><span id="line-577"></span><span id="nonDetCmpTc"><span class="annot"><span class="annottext">nonDetCmpTc :: TyCon -&gt; TyCon -&gt; Ordering
</span><a href="GHC.Core.TyCo.Compare.html#nonDetCmpTc"><span class="hs-identifier hs-var hs-var">nonDetCmpTc</span></a></span></span><span> </span><span id="local-6989586621681609143"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681609143"><span class="hs-identifier hs-var">tc1</span></a></span></span><span> </span><span id="local-6989586621681609144"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681609144"><span class="hs-identifier hs-var">tc2</span></a></span></span><span>
</span><span id="line-578"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621681609145"><span class="hs-identifier hs-var">u1</span></a></span><span> </span><span class="annot"><span class="annottext">Unique -&gt; Unique -&gt; Ordering
</span><a href="GHC.Types.Unique.html#nonDetCmpUnique"><span class="hs-operator hs-var">`nonDetCmpUnique`</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621681609147"><span class="hs-identifier hs-var">u2</span></a></span><span>
</span><span id="line-579"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-580"></span><span>    </span><span id="local-6989586621681609145"><span class="annot"><span class="annottext">u1 :: Unique
</span><a href="#local-6989586621681609145"><span class="hs-identifier hs-var hs-var">u1</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Unique
</span><a href="GHC.Core.TyCon.html#tyConUnique"><span class="hs-identifier hs-var">tyConUnique</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681609143"><span class="hs-identifier hs-var">tc1</span></a></span><span>
</span><span id="line-581"></span><span>    </span><span id="local-6989586621681609147"><span class="annot"><span class="annottext">u2 :: Unique
</span><a href="#local-6989586621681609147"><span class="hs-identifier hs-var hs-var">u2</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Unique
</span><a href="GHC.Core.TyCon.html#tyConUnique"><span class="hs-identifier hs-var">tyConUnique</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681609144"><span class="hs-identifier hs-var">tc2</span></a></span><span>
</span><span id="line-582"></span><span>
</span><span id="line-583"></span><span>
</span><span id="line-584"></span><span>
</span><span id="line-585"></span></pre></body></html>