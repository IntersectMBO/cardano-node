<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="annot"><span class="hs-comment">-- | Dependencies and Usage of a module</span></span><span>
</span><span id="line-2"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">GHC.Unit.Module.Deps</span><span>
</span><span id="line-3"></span><span>   </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#Dependencies"><span class="hs-identifier">Dependencies</span></a></span><span>
</span><span id="line-4"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#mkDependencies"><span class="hs-identifier">mkDependencies</span></a></span><span>
</span><span id="line-5"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#noDependencies"><span class="hs-identifier">noDependencies</span></a></span><span>
</span><span id="line-6"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#dep_direct_mods"><span class="hs-identifier">dep_direct_mods</span></a></span><span>
</span><span id="line-7"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#dep_direct_pkgs"><span class="hs-identifier">dep_direct_pkgs</span></a></span><span>
</span><span id="line-8"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#dep_sig_mods"><span class="hs-identifier">dep_sig_mods</span></a></span><span>
</span><span id="line-9"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#dep_trusted_pkgs"><span class="hs-identifier">dep_trusted_pkgs</span></a></span><span>
</span><span id="line-10"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#dep_orphs"><span class="hs-identifier">dep_orphs</span></a></span><span>
</span><span id="line-11"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#dep_plugin_pkgs"><span class="hs-identifier">dep_plugin_pkgs</span></a></span><span>
</span><span id="line-12"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#dep_finsts"><span class="hs-identifier">dep_finsts</span></a></span><span>
</span><span id="line-13"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#dep_boot_mods"><span class="hs-identifier">dep_boot_mods</span></a></span><span>
</span><span id="line-14"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#dep_orphs_update"><span class="hs-identifier">dep_orphs_update</span></a></span><span>
</span><span id="line-15"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#dep_finsts_update"><span class="hs-identifier">dep_finsts_update</span></a></span><span>
</span><span id="line-16"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#pprDeps"><span class="hs-identifier">pprDeps</span></a></span><span>
</span><span id="line-17"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#Usage"><span class="hs-identifier">Usage</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#ImportAvails"><span class="hs-identifier">ImportAvails</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span>   </span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span class="hs-keyword">where</span><span>
</span><span id="line-21"></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SafeHaskell.html"><span class="hs-identifier">GHC.Types.SafeHaskell</span></a></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.html"><span class="hs-identifier">GHC.Types.Name</span></a></span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Imported.html"><span class="hs-identifier">GHC.Unit.Module.Imported</span></a></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Module.html"><span class="hs-identifier">GHC.Unit.Module</span></a></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Home.html"><span class="hs-identifier">GHC.Unit.Home</span></a></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.State.html"><span class="hs-identifier">GHC.Unit.State</span></a></span><span>
</span><span id="line-31"></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Fingerprint.html"><span class="hs-identifier">GHC.Utils.Fingerprint</span></a></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Binary.html"><span class="hs-identifier">GHC.Utils.Binary</span></a></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span>
</span><span id="line-35"></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.List.html#/Data.List.html"><span class="hs-identifier">Data.List</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.18.3.0/src/Data.OldList.html#sortBy/Data.OldList.html#sortBy"><span class="hs-identifier">sortBy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.OldList.html#sort/Data.OldList.html#sort"><span class="hs-identifier">sort</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.OldList.html#partition/Data.OldList.html#partition"><span class="hs-identifier">partition</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../containers-0.6.7/src/Data.Set.html#/Data.Set.html"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../containers-0.6.7/src/Data.Set.Internal.html#Set/Data.Set.Internal.html#Set"><span class="hs-identifier">Set</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../containers-0.6.7/src/Data.Set.html#/Data.Set.html"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Bifunctor.html#/Data.Bifunctor.html"><span class="hs-identifier">Data.Bifunctor</span></a></span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span class="hs-comment">-- | Dependency information about ALL modules and packages below this one</span><span>
</span><span id="line-42"></span><span class="hs-comment">-- in the import hierarchy. This is the serialisable version of `ImportAvails`.</span><span>
</span><span id="line-43"></span><span class="hs-comment">--</span><span>
</span><span id="line-44"></span><span class="hs-comment">-- Invariant: the dependencies of a module @M@ never includes @M@.</span><span>
</span><span id="line-45"></span><span class="hs-comment">--</span><span>
</span><span id="line-46"></span><span class="hs-comment">-- Invariant: none of the lists contain duplicates.</span><span>
</span><span id="line-47"></span><span class="hs-comment">--</span><span>
</span><span id="line-48"></span><span class="hs-comment">-- Invariant: lists are ordered canonically (e.g. using stableModuleCmp)</span><span>
</span><span id="line-49"></span><span class="hs-comment">--</span><span>
</span><span id="line-50"></span><span class="hs-comment">-- See Note [Transitive Information in Dependencies]</span><span>
</span><span id="line-51"></span><span class="hs-keyword">data</span><span> </span><span id="Dependencies"><span class="annot"><a href="GHC.Unit.Module.Deps.html#Dependencies"><span class="hs-identifier hs-var">Dependencies</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Deps"><span class="annot"><a href="GHC.Unit.Module.Deps.html#Deps"><span class="hs-identifier hs-var">Deps</span></a></span></span><span>
</span><span id="line-52"></span><span>   </span><span class="hs-special">{</span><span> </span><span id="dep_direct_mods"><span class="annot"><span class="annottext">Dependencies -&gt; Set (UnitId, GenWithIsBoot ModuleName)
</span><a href="GHC.Unit.Module.Deps.html#dep_direct_mods"><span class="hs-identifier hs-var hs-var">dep_direct_mods</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../containers-0.6.7/src/Data.Set.Internal.html#Set/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#ModuleNameWithIsBoot"><span class="hs-identifier hs-type">ModuleNameWithIsBoot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span>      </span><span class="hs-comment">-- ^ All home-package modules which are directly imported by this one.</span><span>
</span><span id="line-54"></span><span>      </span><span class="hs-comment">-- This may include modules from other units when using multiple home units</span><span>
</span><span id="line-55"></span><span>
</span><span id="line-56"></span><span>   </span><span class="hs-special">,</span><span> </span><span id="dep_direct_pkgs"><span class="annot"><span class="annottext">Dependencies -&gt; Set UnitId
</span><a href="GHC.Unit.Module.Deps.html#dep_direct_pkgs"><span class="hs-identifier hs-var hs-var">dep_direct_pkgs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../containers-0.6.7/src/Data.Set.Internal.html#Set/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span>
</span><span id="line-57"></span><span>      </span><span class="hs-comment">-- ^ All packages directly imported by this module</span><span>
</span><span id="line-58"></span><span>      </span><span class="hs-comment">-- I.e. packages to which this module's direct imports belong.</span><span>
</span><span id="line-59"></span><span>      </span><span class="hs-comment">-- Does not include other home units when using multiple home units.</span><span>
</span><span id="line-60"></span><span>      </span><span class="hs-comment">-- Modules from these units will go in `dep_direct_mods`</span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span>   </span><span class="hs-special">,</span><span> </span><span id="dep_plugin_pkgs"><span class="annot"><span class="annottext">Dependencies -&gt; Set UnitId
</span><a href="GHC.Unit.Module.Deps.html#dep_plugin_pkgs"><span class="hs-identifier hs-var hs-var">dep_plugin_pkgs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../containers-0.6.7/src/Data.Set.Internal.html#Set/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span>
</span><span id="line-63"></span><span>      </span><span class="annot"><span class="hs-comment">-- ^ All units needed for plugins</span></span><span>
</span><span id="line-64"></span><span>
</span><span id="line-65"></span><span>    </span><span class="hs-comment">------------------------------------</span><span>
</span><span id="line-66"></span><span>    </span><span class="hs-comment">-- Transitive information below here</span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span>   </span><span class="hs-special">,</span><span> </span><span id="dep_sig_mods"><span class="annot"><span class="annottext">Dependencies -&gt; [ModuleName]
</span><a href="GHC.Unit.Module.Deps.html#dep_sig_mods"><span class="hs-identifier hs-var hs-var">dep_sig_mods</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-69"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Transitive closure of hsig files in the home package</span></span><span>
</span><span id="line-70"></span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span>   </span><span class="hs-special">,</span><span> </span><span id="dep_trusted_pkgs"><span class="annot"><span class="annottext">Dependencies -&gt; Set UnitId
</span><a href="GHC.Unit.Module.Deps.html#dep_trusted_pkgs"><span class="hs-identifier hs-var hs-var">dep_trusted_pkgs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../containers-0.6.7/src/Data.Set.Internal.html#Set/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span>
</span><span id="line-73"></span><span>      </span><span class="hs-comment">-- Packages which we are required to trust</span><span>
</span><span id="line-74"></span><span>      </span><span class="hs-comment">-- when the module is imported as a safe import</span><span>
</span><span id="line-75"></span><span>      </span><span class="hs-comment">-- (Safe Haskell). See Note [Tracking Trust Transitively] in GHC.Rename.Names</span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span>   </span><span class="hs-special">,</span><span> </span><span id="dep_boot_mods"><span class="annot"><span class="annottext">Dependencies -&gt; Set (UnitId, GenWithIsBoot ModuleName)
</span><a href="GHC.Unit.Module.Deps.html#dep_boot_mods"><span class="hs-identifier hs-var hs-var">dep_boot_mods</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../containers-0.6.7/src/Data.Set.Internal.html#Set/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#ModuleNameWithIsBoot"><span class="hs-identifier hs-type">ModuleNameWithIsBoot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span>      </span><span class="hs-comment">-- ^ All modules which have boot files below this one, and whether we</span><span>
</span><span id="line-79"></span><span>      </span><span class="hs-comment">-- should use the boot file or not.</span><span>
</span><span id="line-80"></span><span>      </span><span class="hs-comment">-- This information is only used to populate the eps_is_boot field.</span><span>
</span><span id="line-81"></span><span>      </span><span class="hs-comment">-- See Note [Structure of dep_boot_mods]</span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span>   </span><span class="hs-special">,</span><span> </span><span id="dep_orphs"><span class="annot"><span class="annottext">Dependencies -&gt; [Module]
</span><a href="GHC.Unit.Module.Deps.html#dep_orphs"><span class="hs-identifier hs-var hs-var">dep_orphs</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-84"></span><span>      </span><span class="hs-comment">-- ^ Transitive closure of orphan modules (whether</span><span>
</span><span id="line-85"></span><span>      </span><span class="hs-comment">-- home or external pkg).</span><span>
</span><span id="line-86"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-87"></span><span>      </span><span class="hs-comment">-- (Possible optimization: don't include family</span><span>
</span><span id="line-88"></span><span>      </span><span class="hs-comment">-- instance orphans as they are anyway included in</span><span>
</span><span id="line-89"></span><span>      </span><span class="hs-comment">-- 'dep_finsts'.  But then be careful about code</span><span>
</span><span id="line-90"></span><span>      </span><span class="hs-comment">-- which relies on dep_orphs having the complete list!)</span><span>
</span><span id="line-91"></span><span>      </span><span class="hs-comment">-- This does NOT include us, unlike 'imp_orphs'.</span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span>   </span><span class="hs-special">,</span><span> </span><span id="dep_finsts"><span class="annot"><span class="annottext">Dependencies -&gt; [Module]
</span><a href="GHC.Unit.Module.Deps.html#dep_finsts"><span class="hs-identifier hs-var hs-var">dep_finsts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-94"></span><span>      </span><span class="hs-comment">-- ^ Transitive closure of depended upon modules which</span><span>
</span><span id="line-95"></span><span>      </span><span class="hs-comment">-- contain family instances (whether home or external).</span><span>
</span><span id="line-96"></span><span>      </span><span class="hs-comment">-- This is used by 'checkFamInstConsistency'.  This</span><span>
</span><span id="line-97"></span><span>      </span><span class="hs-comment">-- does NOT include us, unlike 'imp_finsts'. See Note</span><span>
</span><span id="line-98"></span><span>      </span><span class="hs-comment">-- [The type family instance consistency story].</span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span>   </span><span class="hs-special">}</span><span>
</span><span id="line-101"></span><span>   </span><span class="hs-keyword">deriving</span><span class="hs-special">(</span><span> </span><span id="local-6989586621681681381"><span id="local-6989586621681681395"><span class="annot"><span class="annottext">Dependencies -&gt; Dependencies -&gt; Bool
(Dependencies -&gt; Dependencies -&gt; Bool)
-&gt; (Dependencies -&gt; Dependencies -&gt; Bool) -&gt; Eq Dependencies
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: Dependencies -&gt; Dependencies -&gt; Bool
== :: Dependencies -&gt; Dependencies -&gt; Bool
$c/= :: Dependencies -&gt; Dependencies -&gt; Bool
/= :: Dependencies -&gt; Dependencies -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span>        </span><span class="hs-comment">-- Equality used only for old/new comparison in GHC.Iface.Recomp.addFingerprints</span><span>
</span><span id="line-103"></span><span>        </span><span class="hs-comment">-- See 'GHC.Tc.Utils.ImportAvails' for details on dependencies.</span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span>
</span><span id="line-106"></span><span class="hs-comment">-- | Extract information from the rename and typecheck phases to produce</span><span>
</span><span id="line-107"></span><span class="hs-comment">-- a dependencies information for the module being compiled.</span><span>
</span><span id="line-108"></span><span class="hs-comment">--</span><span>
</span><span id="line-109"></span><span class="hs-comment">-- The fourth argument is a list of plugin modules.</span><span>
</span><span id="line-110"></span><span class="annot"><a href="GHC.Unit.Module.Deps.html#mkDependencies"><span class="hs-identifier hs-type">mkDependencies</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Home.html#HomeUnit"><span class="hs-identifier hs-type">HomeUnit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#ImportAvails"><span class="hs-identifier hs-type">ImportAvails</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#Dependencies"><span class="hs-identifier hs-type">Dependencies</span></a></span><span>
</span><span id="line-111"></span><span id="mkDependencies"><span class="annot"><span class="annottext">mkDependencies :: HomeUnit -&gt; Module -&gt; ImportAvails -&gt; [Module] -&gt; Dependencies
</span><a href="GHC.Unit.Module.Deps.html#mkDependencies"><span class="hs-identifier hs-var hs-var">mkDependencies</span></a></span></span><span> </span><span id="local-6989586621681681403"><span class="annot"><span class="annottext">HomeUnit
</span><a href="#local-6989586621681681403"><span class="hs-identifier hs-var">home_unit</span></a></span></span><span> </span><span id="local-6989586621681681404"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681681404"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span id="local-6989586621681681405"><span class="annot"><span class="annottext">ImportAvails
</span><a href="#local-6989586621681681405"><span class="hs-identifier hs-var">imports</span></a></span></span><span> </span><span id="local-6989586621681681406"><span class="annot"><span class="annottext">[Module]
</span><a href="#local-6989586621681681406"><span class="hs-identifier hs-var">plugin_mods</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-112"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681681407"><span class="annot"><span class="annottext">[Module]
</span><a href="#local-6989586621681681407"><span class="hs-identifier hs-var">home_plugins</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681681408"><span class="annot"><span class="annottext">[Module]
</span><a href="#local-6989586621681681408"><span class="hs-identifier hs-var">external_plugins</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Module -&gt; Bool) -&gt; [Module] -&gt; ([Module], [Module])
forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><a href="../../base-4.18.3.0/src/Data.OldList.html#partition/Data.OldList.html#partition"><span class="hs-identifier hs-var">partition</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HomeUnit -&gt; GenUnit UnitId -&gt; Bool
</span><a href="GHC.Unit.Home.html#isHomeUnit"><span class="hs-identifier hs-var">isHomeUnit</span></a></span><span> </span><span class="annot"><span class="annottext">HomeUnit
</span><a href="#local-6989586621681681403"><span class="hs-identifier hs-var">home_unit</span></a></span><span> </span><span class="annot"><span class="annottext">(GenUnit UnitId -&gt; Bool)
-&gt; (Module -&gt; GenUnit UnitId) -&gt; Module -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Module -&gt; GenUnit UnitId
forall unit. GenModule unit -&gt; unit
</span><a href="GHC.Unit.Types.html#moduleUnit"><span class="hs-identifier hs-var">moduleUnit</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Module]
</span><a href="#local-6989586621681681406"><span class="hs-identifier hs-var">plugin_mods</span></a></span><span>
</span><span id="line-113"></span><span>      </span><span id="local-6989586621681681412"><span class="annot"><span class="annottext">plugin_units :: Set UnitId
</span><a href="#local-6989586621681681412"><span class="hs-identifier hs-var hs-var">plugin_units</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[UnitId] -&gt; Set UnitId
forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="../../containers-0.6.7/src/Data.Set.Internal.html#fromList/Data.Set.Internal.html#fromList"><span class="hs-identifier hs-var">Set.fromList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Module -&gt; UnitId) -&gt; [Module] -&gt; [UnitId]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenUnit UnitId -&gt; UnitId
</span><a href="GHC.Unit.Types.html#toUnitId"><span class="hs-identifier hs-var">toUnitId</span></a></span><span> </span><span class="annot"><span class="annottext">(GenUnit UnitId -&gt; UnitId)
-&gt; (Module -&gt; GenUnit UnitId) -&gt; Module -&gt; UnitId
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Module -&gt; GenUnit UnitId
forall unit. GenModule unit -&gt; unit
</span><a href="GHC.Unit.Types.html#moduleUnit"><span class="hs-identifier hs-var">moduleUnit</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Module]
</span><a href="#local-6989586621681681408"><span class="hs-identifier hs-var">external_plugins</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-114"></span><span>      </span><span id="local-6989586621681681415"><span class="annot"><span class="annottext">all_direct_mods :: InstalledModuleEnv (GenWithIsBoot ModuleName)
</span><a href="#local-6989586621681681415"><span class="hs-identifier hs-var hs-var">all_direct_mods</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(InstalledModule
 -&gt; InstalledModuleEnv (GenWithIsBoot ModuleName)
 -&gt; InstalledModuleEnv (GenWithIsBoot ModuleName))
-&gt; InstalledModuleEnv (GenWithIsBoot ModuleName)
-&gt; [InstalledModule]
-&gt; InstalledModuleEnv (GenWithIsBoot ModuleName)
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#foldr/Data.Foldable.html#foldr"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681681417"><span class="annot"><span class="annottext">InstalledModule
</span><a href="#local-6989586621681681417"><span class="hs-identifier hs-var">mn</span></a></span></span><span> </span><span id="local-6989586621681681418"><span class="annot"><span class="annottext">InstalledModuleEnv (GenWithIsBoot ModuleName)
</span><a href="#local-6989586621681681418"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">InstalledModuleEnv (GenWithIsBoot ModuleName)
-&gt; InstalledModule
-&gt; GenWithIsBoot ModuleName
-&gt; InstalledModuleEnv (GenWithIsBoot ModuleName)
forall a.
InstalledModuleEnv a
-&gt; InstalledModule -&gt; a -&gt; InstalledModuleEnv a
</span><a href="GHC.Unit.Module.Env.html#extendInstalledModuleEnv"><span class="hs-identifier hs-var">extendInstalledModuleEnv</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledModuleEnv (GenWithIsBoot ModuleName)
</span><a href="#local-6989586621681681418"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledModule
</span><a href="#local-6989586621681681417"><span class="hs-identifier hs-var">mn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModuleName -&gt; IsBootInterface -&gt; GenWithIsBoot ModuleName
forall mod. mod -&gt; IsBootInterface -&gt; GenWithIsBoot mod
</span><a href="GHC.Unit.Types.html#GWIB"><span class="hs-identifier hs-var">GWIB</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InstalledModule -&gt; ModuleName
forall unit. GenModule unit -&gt; ModuleName
</span><a href="GHC.Unit.Types.html#moduleName"><span class="hs-identifier hs-var">moduleName</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledModule
</span><a href="#local-6989586621681681417"><span class="hs-identifier hs-var">mn</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="Language.Haskell.Syntax.ImpExp.html#NotBoot"><span class="hs-identifier hs-var">NotBoot</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-115"></span><span>                              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ImportAvails -&gt; InstalledModuleEnv (GenWithIsBoot ModuleName)
</span><a href="GHC.Unit.Module.Deps.html#imp_direct_dep_mods"><span class="hs-identifier hs-var">imp_direct_dep_mods</span></a></span><span> </span><span class="annot"><span class="annottext">ImportAvails
</span><a href="#local-6989586621681681405"><span class="hs-identifier hs-var">imports</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span>                              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Module -&gt; InstalledModule) -&gt; [Module] -&gt; [InstalledModule]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(GenUnit UnitId -&gt; UnitId) -&gt; Module -&gt; InstalledModule
forall a b. (a -&gt; b) -&gt; GenModule a -&gt; GenModule b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#fmap/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">GenUnit UnitId -&gt; UnitId
</span><a href="GHC.Unit.Types.html#toUnitId"><span class="hs-identifier hs-var">toUnitId</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Module]
</span><a href="#local-6989586621681681407"><span class="hs-identifier hs-var">home_plugins</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span>      </span><span id="local-6989586621681681430"><span class="annot"><span class="annottext">modDepsElts :: InstalledModuleEnv (GenWithIsBoot ModuleName)
-&gt; Set (InstalledModule, GenWithIsBoot ModuleName)
</span><a href="#local-6989586621681681430"><span class="hs-identifier hs-var hs-var">modDepsElts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(InstalledModule, GenWithIsBoot ModuleName)]
-&gt; Set (InstalledModule, GenWithIsBoot ModuleName)
forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="../../containers-0.6.7/src/Data.Set.Internal.html#fromList/Data.Set.Internal.html#fromList"><span class="hs-identifier hs-var">Set.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">([(InstalledModule, GenWithIsBoot ModuleName)]
 -&gt; Set (InstalledModule, GenWithIsBoot ModuleName))
-&gt; (InstalledModuleEnv (GenWithIsBoot ModuleName)
    -&gt; [(InstalledModule, GenWithIsBoot ModuleName)])
-&gt; InstalledModuleEnv (GenWithIsBoot ModuleName)
-&gt; Set (InstalledModule, GenWithIsBoot ModuleName)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledModuleEnv (GenWithIsBoot ModuleName)
-&gt; [(InstalledModule, GenWithIsBoot ModuleName)]
forall a. InstalledModuleEnv a -&gt; [(InstalledModule, a)]
</span><a href="GHC.Unit.Module.Env.html#installedModuleEnvElts"><span class="hs-identifier hs-var">installedModuleEnvElts</span></a></span><span>
</span><span id="line-119"></span><span>        </span><span class="hs-comment">-- It's OK to use nonDetEltsUFM here because sorting by module names</span><span>
</span><span id="line-120"></span><span>        </span><span class="hs-comment">-- restores determinism</span><span>
</span><span id="line-121"></span><span>
</span><span id="line-122"></span><span>      </span><span id="local-6989586621681681432"><span class="annot"><span class="annottext">direct_mods :: Set (UnitId, GenWithIsBoot ModuleName)
</span><a href="#local-6989586621681681432"><span class="hs-identifier hs-var hs-var">direct_mods</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(InstalledModule -&gt; UnitId)
-&gt; (InstalledModule, GenWithIsBoot ModuleName)
-&gt; (UnitId, GenWithIsBoot ModuleName)
forall a b c. (a -&gt; b) -&gt; (a, c) -&gt; (b, c)
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><a href="../../base-4.18.3.0/src/Data.Bifunctor.html#first/Data.Bifunctor.html#first"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledModule -&gt; UnitId
forall unit. GenModule unit -&gt; unit
</span><a href="GHC.Unit.Types.html#moduleUnit"><span class="hs-identifier hs-var">moduleUnit</span></a></span><span> </span><span class="annot"><span class="annottext">((InstalledModule, GenWithIsBoot ModuleName)
 -&gt; (UnitId, GenWithIsBoot ModuleName))
-&gt; Set (InstalledModule, GenWithIsBoot ModuleName)
-&gt; Set (UnitId, GenWithIsBoot ModuleName)
forall b a. Ord b =&gt; (a -&gt; b) -&gt; Set a -&gt; Set b
</span><a href="../../containers-0.6.7/src/Data.Set.Internal.html#map/Data.Set.Internal.html#map"><span class="hs-operator hs-var">`Set.map`</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledModuleEnv (GenWithIsBoot ModuleName)
-&gt; Set (InstalledModule, GenWithIsBoot ModuleName)
</span><a href="#local-6989586621681681430"><span class="hs-identifier hs-var">modDepsElts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InstalledModuleEnv (GenWithIsBoot ModuleName)
-&gt; InstalledModule -&gt; InstalledModuleEnv (GenWithIsBoot ModuleName)
forall a.
InstalledModuleEnv a -&gt; InstalledModule -&gt; InstalledModuleEnv a
</span><a href="GHC.Unit.Module.Env.html#delInstalledModuleEnv"><span class="hs-identifier hs-var">delInstalledModuleEnv</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledModuleEnv (GenWithIsBoot ModuleName)
</span><a href="#local-6989586621681681415"><span class="hs-identifier hs-var">all_direct_mods</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenUnit UnitId -&gt; UnitId
</span><a href="GHC.Unit.Types.html#toUnitId"><span class="hs-identifier hs-var">toUnitId</span></a></span><span> </span><span class="annot"><span class="annottext">(GenUnit UnitId -&gt; UnitId) -&gt; Module -&gt; InstalledModule
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/Data.Functor.html#%3C%24%3E/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681681404"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-123"></span><span>            </span><span class="hs-comment">-- M.hi-boot can be in the imp_dep_mods, but we must remove</span><span>
</span><span id="line-124"></span><span>            </span><span class="hs-comment">-- it before recording the modules on which this one depends!</span><span>
</span><span id="line-125"></span><span>            </span><span class="hs-comment">-- (We want to retain M.hi-boot in imp_dep_mods so that</span><span>
</span><span id="line-126"></span><span>            </span><span class="hs-comment">--  loadHiBootInterface can see if M's direct imports depend</span><span>
</span><span id="line-127"></span><span>            </span><span class="hs-comment">--  on M.hi-boot, and hence that we should do the hi-boot consistency</span><span>
</span><span id="line-128"></span><span>            </span><span class="hs-comment">--  check.)</span><span>
</span><span id="line-129"></span><span>
</span><span id="line-130"></span><span>      </span><span id="local-6989586621681681437"><span class="annot"><span class="annottext">dep_orphs :: [Module]
</span><a href="#local-6989586621681681437"><span class="hs-identifier hs-var hs-var">dep_orphs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Module -&gt; Bool) -&gt; [Module] -&gt; [Module]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.List.html#filter/GHC.List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Module -&gt; Module -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681681404"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ImportAvails -&gt; [Module]
</span><a href="GHC.Unit.Module.Deps.html#imp_orphs"><span class="hs-identifier hs-var">imp_orphs</span></a></span><span> </span><span class="annot"><span class="annottext">ImportAvails
</span><a href="#local-6989586621681681405"><span class="hs-identifier hs-var">imports</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-131"></span><span>            </span><span class="hs-comment">-- We must also remove self-references from imp_orphs. See</span><span>
</span><span id="line-132"></span><span>            </span><span class="hs-comment">-- Note [Module self-dependency]</span><span>
</span><span id="line-133"></span><span>
</span><span id="line-134"></span><span>      </span><span id="local-6989586621681681439"><span class="annot"><span class="annottext">direct_pkgs :: Set UnitId
</span><a href="#local-6989586621681681439"><span class="hs-identifier hs-var hs-var">direct_pkgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImportAvails -&gt; Set UnitId
</span><a href="GHC.Unit.Module.Deps.html#imp_dep_direct_pkgs"><span class="hs-identifier hs-var">imp_dep_direct_pkgs</span></a></span><span> </span><span class="annot"><span class="annottext">ImportAvails
</span><a href="#local-6989586621681681405"><span class="hs-identifier hs-var">imports</span></a></span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span>      </span><span class="hs-comment">-- Set the packages required to be Safe according to Safe Haskell.</span><span>
</span><span id="line-137"></span><span>      </span><span class="hs-comment">-- See Note [Tracking Trust Transitively] in GHC.Rename.Names</span><span>
</span><span id="line-138"></span><span>      </span><span id="local-6989586621681681441"><span class="annot"><span class="annottext">trust_pkgs :: Set UnitId
</span><a href="#local-6989586621681681441"><span class="hs-identifier hs-var hs-var">trust_pkgs</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImportAvails -&gt; Set UnitId
</span><a href="GHC.Unit.Module.Deps.html#imp_trust_pkgs"><span class="hs-identifier hs-var">imp_trust_pkgs</span></a></span><span> </span><span class="annot"><span class="annottext">ImportAvails
</span><a href="#local-6989586621681681405"><span class="hs-identifier hs-var">imports</span></a></span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span>      </span><span class="hs-comment">-- If there's a non-boot import, then it shadows the boot import</span><span>
</span><span id="line-141"></span><span>      </span><span class="hs-comment">-- coming from the dependencies</span><span>
</span><span id="line-142"></span><span>      </span><span id="local-6989586621681681443"><span class="annot"><span class="annottext">source_mods :: Set (UnitId, GenWithIsBoot ModuleName)
</span><a href="#local-6989586621681681443"><span class="hs-identifier hs-var hs-var">source_mods</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(InstalledModule -&gt; UnitId)
-&gt; (InstalledModule, GenWithIsBoot ModuleName)
-&gt; (UnitId, GenWithIsBoot ModuleName)
forall a b c. (a -&gt; b) -&gt; (a, c) -&gt; (b, c)
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><a href="../../base-4.18.3.0/src/Data.Bifunctor.html#first/Data.Bifunctor.html#first"><span class="hs-identifier hs-var">first</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledModule -&gt; UnitId
forall unit. GenModule unit -&gt; unit
</span><a href="GHC.Unit.Types.html#moduleUnit"><span class="hs-identifier hs-var">moduleUnit</span></a></span><span> </span><span class="annot"><span class="annottext">((InstalledModule, GenWithIsBoot ModuleName)
 -&gt; (UnitId, GenWithIsBoot ModuleName))
-&gt; Set (InstalledModule, GenWithIsBoot ModuleName)
-&gt; Set (UnitId, GenWithIsBoot ModuleName)
forall b a. Ord b =&gt; (a -&gt; b) -&gt; Set a -&gt; Set b
</span><a href="../../containers-0.6.7/src/Data.Set.Internal.html#map/Data.Set.Internal.html#map"><span class="hs-operator hs-var">`Set.map`</span></a></span><span> </span><span class="annot"><span class="annottext">InstalledModuleEnv (GenWithIsBoot ModuleName)
-&gt; Set (InstalledModule, GenWithIsBoot ModuleName)
</span><a href="#local-6989586621681681430"><span class="hs-identifier hs-var">modDepsElts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ImportAvails -&gt; InstalledModuleEnv (GenWithIsBoot ModuleName)
</span><a href="GHC.Unit.Module.Deps.html#imp_boot_mods"><span class="hs-identifier hs-var">imp_boot_mods</span></a></span><span> </span><span class="annot"><span class="annottext">ImportAvails
</span><a href="#local-6989586621681681405"><span class="hs-identifier hs-var">imports</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span>
</span><span id="line-144"></span><span>      </span><span id="local-6989586621681681445"><span class="annot"><span class="annottext">sig_mods :: [ModuleName]
</span><a href="#local-6989586621681681445"><span class="hs-identifier hs-var hs-var">sig_mods</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ModuleName -&gt; Bool) -&gt; [ModuleName] -&gt; [ModuleName]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.List.html#filter/GHC.List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ModuleName -&gt; ModuleName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Module -&gt; ModuleName
forall unit. GenModule unit -&gt; ModuleName
</span><a href="GHC.Unit.Types.html#moduleName"><span class="hs-identifier hs-var">moduleName</span></a></span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681681404"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([ModuleName] -&gt; [ModuleName]) -&gt; [ModuleName] -&gt; [ModuleName]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ImportAvails -&gt; [ModuleName]
</span><a href="GHC.Unit.Module.Deps.html#imp_sig_mods"><span class="hs-identifier hs-var">imp_sig_mods</span></a></span><span> </span><span class="annot"><span class="annottext">ImportAvails
</span><a href="#local-6989586621681681405"><span class="hs-identifier hs-var">imports</span></a></span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span>  </span><span class="hs-keyword">in</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#Deps"><span class="hs-identifier hs-type">Deps</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dep_direct_mods :: Set (UnitId, GenWithIsBoot ModuleName)
</span><a href="GHC.Unit.Module.Deps.html#dep_direct_mods"><span class="hs-identifier hs-var">dep_direct_mods</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set (UnitId, GenWithIsBoot ModuleName)
</span><a href="#local-6989586621681681432"><span class="hs-identifier hs-var">direct_mods</span></a></span><span>
</span><span id="line-147"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dep_direct_pkgs :: Set UnitId
</span><a href="GHC.Unit.Module.Deps.html#dep_direct_pkgs"><span class="hs-identifier hs-var">dep_direct_pkgs</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set UnitId
</span><a href="#local-6989586621681681439"><span class="hs-identifier hs-var">direct_pkgs</span></a></span><span>
</span><span id="line-148"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dep_plugin_pkgs :: Set UnitId
</span><a href="GHC.Unit.Module.Deps.html#dep_plugin_pkgs"><span class="hs-identifier hs-var">dep_plugin_pkgs</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set UnitId
</span><a href="#local-6989586621681681412"><span class="hs-identifier hs-var">plugin_units</span></a></span><span>
</span><span id="line-149"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dep_sig_mods :: [ModuleName]
</span><a href="GHC.Unit.Module.Deps.html#dep_sig_mods"><span class="hs-identifier hs-var">dep_sig_mods</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ModuleName] -&gt; [ModuleName]
forall a. Ord a =&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/Data.OldList.html#sort/Data.OldList.html#sort"><span class="hs-identifier hs-var">sort</span></a></span><span> </span><span class="annot"><span class="annottext">[ModuleName]
</span><a href="#local-6989586621681681445"><span class="hs-identifier hs-var">sig_mods</span></a></span><span>
</span><span id="line-150"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dep_trusted_pkgs :: Set UnitId
</span><a href="GHC.Unit.Module.Deps.html#dep_trusted_pkgs"><span class="hs-identifier hs-var">dep_trusted_pkgs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set UnitId
</span><a href="#local-6989586621681681441"><span class="hs-identifier hs-var">trust_pkgs</span></a></span><span>
</span><span id="line-151"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dep_boot_mods :: Set (UnitId, GenWithIsBoot ModuleName)
</span><a href="GHC.Unit.Module.Deps.html#dep_boot_mods"><span class="hs-identifier hs-var">dep_boot_mods</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set (UnitId, GenWithIsBoot ModuleName)
</span><a href="#local-6989586621681681443"><span class="hs-identifier hs-var">source_mods</span></a></span><span>
</span><span id="line-152"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dep_orphs :: [Module]
</span><a href="GHC.Unit.Module.Deps.html#dep_orphs"><span class="hs-identifier hs-var">dep_orphs</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Module -&gt; Module -&gt; Ordering) -&gt; [Module] -&gt; [Module]
forall a. (a -&gt; a -&gt; Ordering) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/Data.OldList.html#sortBy/Data.OldList.html#sortBy"><span class="hs-identifier hs-var">sortBy</span></a></span><span> </span><span class="annot"><span class="annottext">Module -&gt; Module -&gt; Ordering
</span><a href="GHC.Unit.Module.html#stableModuleCmp"><span class="hs-identifier hs-var">stableModuleCmp</span></a></span><span> </span><span class="annot"><span class="annottext">[Module]
</span><a href="#local-6989586621681681437"><span class="hs-identifier hs-var">dep_orphs</span></a></span><span>
</span><span id="line-153"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dep_finsts :: [Module]
</span><a href="GHC.Unit.Module.Deps.html#dep_finsts"><span class="hs-identifier hs-var">dep_finsts</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Module -&gt; Module -&gt; Ordering) -&gt; [Module] -&gt; [Module]
forall a. (a -&gt; a -&gt; Ordering) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/Data.OldList.html#sortBy/Data.OldList.html#sortBy"><span class="hs-identifier hs-var">sortBy</span></a></span><span> </span><span class="annot"><span class="annottext">Module -&gt; Module -&gt; Ordering
</span><a href="GHC.Unit.Module.html#stableModuleCmp"><span class="hs-identifier hs-var">stableModuleCmp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ImportAvails -&gt; [Module]
</span><a href="GHC.Unit.Module.Deps.html#imp_finsts"><span class="hs-identifier hs-var">imp_finsts</span></a></span><span> </span><span class="annot"><span class="annottext">ImportAvails
</span><a href="#local-6989586621681681405"><span class="hs-identifier hs-var">imports</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-154"></span><span>            </span><span class="hs-comment">-- sort to get into canonical order</span><span>
</span><span id="line-155"></span><span>            </span><span class="hs-comment">-- NB. remember to use lexicographic ordering</span><span>
</span><span id="line-156"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-157"></span><span>
</span><span id="line-158"></span><span class="annot"><span class="hs-comment">-- | Update module dependencies containing orphans (used by Backpack)</span></span><span>
</span><span id="line-159"></span><span id="local-6989586621681681246"><span class="annot"><a href="GHC.Unit.Module.Deps.html#dep_orphs_update"><span class="hs-identifier hs-type">dep_orphs_update</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#Monad/GHC.Base.html#Monad"><span class="hs-identifier hs-type">Monad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681681246"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#Dependencies"><span class="hs-identifier hs-type">Dependencies</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681681246"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681681246"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#Dependencies"><span class="hs-identifier hs-type">Dependencies</span></a></span></span><span>
</span><span id="line-160"></span><span id="dep_orphs_update"><span class="annot"><span class="annottext">dep_orphs_update :: forall (m :: * -&gt; *).
Monad m =&gt;
Dependencies -&gt; ([Module] -&gt; m [Module]) -&gt; m Dependencies
</span><a href="GHC.Unit.Module.Deps.html#dep_orphs_update"><span class="hs-identifier hs-var hs-var">dep_orphs_update</span></a></span></span><span> </span><span id="local-6989586621681681453"><span class="annot"><span class="annottext">Dependencies
</span><a href="#local-6989586621681681453"><span class="hs-identifier hs-var">deps</span></a></span></span><span> </span><span id="local-6989586621681681454"><span class="annot"><span class="annottext">[Module] -&gt; m [Module]
</span><a href="#local-6989586621681681454"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-161"></span><span>  </span><span id="local-6989586621681681455"><span class="annot"><span class="annottext">[Module]
</span><a href="#local-6989586621681681455"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Module] -&gt; m [Module]
</span><a href="#local-6989586621681681454"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dependencies -&gt; [Module]
</span><a href="GHC.Unit.Module.Deps.html#dep_orphs"><span class="hs-identifier hs-var">dep_orphs</span></a></span><span> </span><span class="annot"><span class="annottext">Dependencies
</span><a href="#local-6989586621681681453"><span class="hs-identifier hs-var">deps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-162"></span><span>  </span><span class="annot"><span class="annottext">Dependencies -&gt; m Dependencies
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#pure/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dependencies
</span><a href="#local-6989586621681681453"><span class="hs-identifier hs-var">deps</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#dep_orphs"><span class="hs-identifier hs-var">dep_orphs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.OldList.html#sortBy/Data.OldList.html#sortBy"><span class="hs-identifier hs-type">sortBy</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.html#stableModuleCmp"><span class="hs-identifier hs-type">stableModuleCmp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681681455"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span class="annot"><span class="hs-comment">-- | Update module dependencies containing family instances (used by Backpack)</span></span><span>
</span><span id="line-165"></span><span id="local-6989586621681681456"><span class="annot"><a href="GHC.Unit.Module.Deps.html#dep_finsts_update"><span class="hs-identifier hs-type">dep_finsts_update</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#Monad/GHC.Base.html#Monad"><span class="hs-identifier hs-type">Monad</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681681456"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#Dependencies"><span class="hs-identifier hs-type">Dependencies</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681681456"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681681456"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#Dependencies"><span class="hs-identifier hs-type">Dependencies</span></a></span></span><span>
</span><span id="line-166"></span><span id="dep_finsts_update"><span class="annot"><span class="annottext">dep_finsts_update :: forall (m :: * -&gt; *).
Monad m =&gt;
Dependencies -&gt; ([Module] -&gt; m [Module]) -&gt; m Dependencies
</span><a href="GHC.Unit.Module.Deps.html#dep_finsts_update"><span class="hs-identifier hs-var hs-var">dep_finsts_update</span></a></span></span><span> </span><span id="local-6989586621681681461"><span class="annot"><span class="annottext">Dependencies
</span><a href="#local-6989586621681681461"><span class="hs-identifier hs-var">deps</span></a></span></span><span> </span><span id="local-6989586621681681462"><span class="annot"><span class="annottext">[Module] -&gt; m [Module]
</span><a href="#local-6989586621681681462"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-167"></span><span>  </span><span id="local-6989586621681681463"><span class="annot"><span class="annottext">[Module]
</span><a href="#local-6989586621681681463"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Module] -&gt; m [Module]
</span><a href="#local-6989586621681681462"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dependencies -&gt; [Module]
</span><a href="GHC.Unit.Module.Deps.html#dep_finsts"><span class="hs-identifier hs-var">dep_finsts</span></a></span><span> </span><span class="annot"><span class="annottext">Dependencies
</span><a href="#local-6989586621681681461"><span class="hs-identifier hs-var">deps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-168"></span><span>  </span><span class="annot"><span class="annottext">Dependencies -&gt; m Dependencies
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#pure/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dependencies
</span><a href="#local-6989586621681681461"><span class="hs-identifier hs-var">deps</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#dep_finsts"><span class="hs-identifier hs-var">dep_finsts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.OldList.html#sortBy/Data.OldList.html#sortBy"><span class="hs-identifier hs-type">sortBy</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.html#stableModuleCmp"><span class="hs-identifier hs-type">stableModuleCmp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681681463"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span>
</span><span id="line-171"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681681466"><span class="annot"><a href="GHC.Utils.Binary.html#Binary"><span class="hs-identifier hs-type">Binary</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#Dependencies"><span class="hs-identifier hs-type">Dependencies</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-172"></span><span>    </span><span id="local-6989586621681681501"><span class="annot"><span class="annottext">put_ :: BinHandle -&gt; Dependencies -&gt; IO ()
</span><a href="#local-6989586621681681501"><span class="hs-identifier hs-var hs-var hs-var hs-var">put_</span></a></span></span><span> </span><span id="local-6989586621681681503"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681503"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span id="local-6989586621681681504"><span class="annot"><span class="annottext">Dependencies
</span><a href="#local-6989586621681681504"><span class="hs-identifier hs-var">deps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; Set (UnitId, GenWithIsBoot ModuleName) -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681503"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dependencies -&gt; Set (UnitId, GenWithIsBoot ModuleName)
</span><a href="GHC.Unit.Module.Deps.html#dep_direct_mods"><span class="hs-identifier hs-var">dep_direct_mods</span></a></span><span> </span><span class="annot"><span class="annottext">Dependencies
</span><a href="#local-6989586621681681504"><span class="hs-identifier hs-var">deps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-173"></span><span>                      </span><span class="annot"><span class="annottext">BinHandle -&gt; Set UnitId -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681503"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dependencies -&gt; Set UnitId
</span><a href="GHC.Unit.Module.Deps.html#dep_direct_pkgs"><span class="hs-identifier hs-var">dep_direct_pkgs</span></a></span><span> </span><span class="annot"><span class="annottext">Dependencies
</span><a href="#local-6989586621681681504"><span class="hs-identifier hs-var">deps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-174"></span><span>                      </span><span class="annot"><span class="annottext">BinHandle -&gt; Set UnitId -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681503"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dependencies -&gt; Set UnitId
</span><a href="GHC.Unit.Module.Deps.html#dep_plugin_pkgs"><span class="hs-identifier hs-var">dep_plugin_pkgs</span></a></span><span> </span><span class="annot"><span class="annottext">Dependencies
</span><a href="#local-6989586621681681504"><span class="hs-identifier hs-var">deps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-175"></span><span>                      </span><span class="annot"><span class="annottext">BinHandle -&gt; Set UnitId -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681503"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dependencies -&gt; Set UnitId
</span><a href="GHC.Unit.Module.Deps.html#dep_trusted_pkgs"><span class="hs-identifier hs-var">dep_trusted_pkgs</span></a></span><span> </span><span class="annot"><span class="annottext">Dependencies
</span><a href="#local-6989586621681681504"><span class="hs-identifier hs-var">deps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-176"></span><span>                      </span><span class="annot"><span class="annottext">BinHandle -&gt; [ModuleName] -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681503"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dependencies -&gt; [ModuleName]
</span><a href="GHC.Unit.Module.Deps.html#dep_sig_mods"><span class="hs-identifier hs-var">dep_sig_mods</span></a></span><span> </span><span class="annot"><span class="annottext">Dependencies
</span><a href="#local-6989586621681681504"><span class="hs-identifier hs-var">deps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-177"></span><span>                      </span><span class="annot"><span class="annottext">BinHandle -&gt; Set (UnitId, GenWithIsBoot ModuleName) -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681503"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dependencies -&gt; Set (UnitId, GenWithIsBoot ModuleName)
</span><a href="GHC.Unit.Module.Deps.html#dep_boot_mods"><span class="hs-identifier hs-var">dep_boot_mods</span></a></span><span> </span><span class="annot"><span class="annottext">Dependencies
</span><a href="#local-6989586621681681504"><span class="hs-identifier hs-var">deps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-178"></span><span>                      </span><span class="annot"><span class="annottext">BinHandle -&gt; [Module] -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681503"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dependencies -&gt; [Module]
</span><a href="GHC.Unit.Module.Deps.html#dep_orphs"><span class="hs-identifier hs-var">dep_orphs</span></a></span><span> </span><span class="annot"><span class="annottext">Dependencies
</span><a href="#local-6989586621681681504"><span class="hs-identifier hs-var">deps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-179"></span><span>                      </span><span class="annot"><span class="annottext">BinHandle -&gt; [Module] -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681503"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dependencies -&gt; [Module]
</span><a href="GHC.Unit.Module.Deps.html#dep_finsts"><span class="hs-identifier hs-var">dep_finsts</span></a></span><span> </span><span class="annot"><span class="annottext">Dependencies
</span><a href="#local-6989586621681681504"><span class="hs-identifier hs-var">deps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-180"></span><span>
</span><span id="line-181"></span><span>    </span><span id="local-6989586621681681528"><span class="annot"><span class="annottext">get :: BinHandle -&gt; IO Dependencies
</span><a href="#local-6989586621681681528"><span class="hs-identifier hs-var hs-var hs-var hs-var">get</span></a></span></span><span> </span><span id="local-6989586621681681530"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681530"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681681531"><span class="annot"><span class="annottext">Set (UnitId, GenWithIsBoot ModuleName)
</span><a href="#local-6989586621681681531"><span class="hs-identifier hs-var">dms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO (Set (UnitId, GenWithIsBoot ModuleName))
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681530"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-182"></span><span>                </span><span id="local-6989586621681681532"><span class="annot"><span class="annottext">Set UnitId
</span><a href="#local-6989586621681681532"><span class="hs-identifier hs-var">dps</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO (Set UnitId)
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681530"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-183"></span><span>                </span><span id="local-6989586621681681533"><span class="annot"><span class="annottext">Set UnitId
</span><a href="#local-6989586621681681533"><span class="hs-identifier hs-var">plugin_pkgs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO (Set UnitId)
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681530"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-184"></span><span>                </span><span id="local-6989586621681681534"><span class="annot"><span class="annottext">Set UnitId
</span><a href="#local-6989586621681681534"><span class="hs-identifier hs-var">tps</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO (Set UnitId)
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681530"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-185"></span><span>                </span><span id="local-6989586621681681535"><span class="annot"><span class="annottext">[ModuleName]
</span><a href="#local-6989586621681681535"><span class="hs-identifier hs-var">hsigms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO [ModuleName]
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681530"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-186"></span><span>                </span><span id="local-6989586621681681536"><span class="annot"><span class="annottext">Set (UnitId, GenWithIsBoot ModuleName)
</span><a href="#local-6989586621681681536"><span class="hs-identifier hs-var">sms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO (Set (UnitId, GenWithIsBoot ModuleName))
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681530"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-187"></span><span>                </span><span id="local-6989586621681681537"><span class="annot"><span class="annottext">[Module]
</span><a href="#local-6989586621681681537"><span class="hs-identifier hs-var">os</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO [Module]
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681530"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-188"></span><span>                </span><span id="local-6989586621681681538"><span class="annot"><span class="annottext">[Module]
</span><a href="#local-6989586621681681538"><span class="hs-identifier hs-var">fis</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO [Module]
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681530"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-189"></span><span>                </span><span class="annot"><span class="annottext">Dependencies -&gt; IO Dependencies
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Module.Deps.html#Deps"><span class="hs-identifier hs-type">Deps</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dep_direct_mods :: Set (UnitId, GenWithIsBoot ModuleName)
</span><a href="GHC.Unit.Module.Deps.html#dep_direct_mods"><span class="hs-identifier hs-var">dep_direct_mods</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set (UnitId, GenWithIsBoot ModuleName)
</span><a href="#local-6989586621681681531"><span class="hs-identifier hs-var">dms</span></a></span><span>
</span><span id="line-190"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dep_direct_pkgs :: Set UnitId
</span><a href="GHC.Unit.Module.Deps.html#dep_direct_pkgs"><span class="hs-identifier hs-var">dep_direct_pkgs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set UnitId
</span><a href="#local-6989586621681681532"><span class="hs-identifier hs-var">dps</span></a></span><span>
</span><span id="line-191"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dep_plugin_pkgs :: Set UnitId
</span><a href="GHC.Unit.Module.Deps.html#dep_plugin_pkgs"><span class="hs-identifier hs-var">dep_plugin_pkgs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set UnitId
</span><a href="#local-6989586621681681533"><span class="hs-identifier hs-var">plugin_pkgs</span></a></span><span>
</span><span id="line-192"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dep_sig_mods :: [ModuleName]
</span><a href="GHC.Unit.Module.Deps.html#dep_sig_mods"><span class="hs-identifier hs-var">dep_sig_mods</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ModuleName]
</span><a href="#local-6989586621681681535"><span class="hs-identifier hs-var">hsigms</span></a></span><span>
</span><span id="line-193"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dep_boot_mods :: Set (UnitId, GenWithIsBoot ModuleName)
</span><a href="GHC.Unit.Module.Deps.html#dep_boot_mods"><span class="hs-identifier hs-var">dep_boot_mods</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set (UnitId, GenWithIsBoot ModuleName)
</span><a href="#local-6989586621681681536"><span class="hs-identifier hs-var">sms</span></a></span><span>
</span><span id="line-194"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dep_trusted_pkgs :: Set UnitId
</span><a href="GHC.Unit.Module.Deps.html#dep_trusted_pkgs"><span class="hs-identifier hs-var">dep_trusted_pkgs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set UnitId
</span><a href="#local-6989586621681681534"><span class="hs-identifier hs-var">tps</span></a></span><span>
</span><span id="line-195"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dep_orphs :: [Module]
</span><a href="GHC.Unit.Module.Deps.html#dep_orphs"><span class="hs-identifier hs-var">dep_orphs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Module]
</span><a href="#local-6989586621681681537"><span class="hs-identifier hs-var">os</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-196"></span><span>                               </span><span class="annot"><span class="annottext">dep_finsts :: [Module]
</span><a href="GHC.Unit.Module.Deps.html#dep_finsts"><span class="hs-identifier hs-var">dep_finsts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Module]
</span><a href="#local-6989586621681681538"><span class="hs-identifier hs-var">fis</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>
</span><span id="line-198"></span><span class="annot"><a href="GHC.Unit.Module.Deps.html#noDependencies"><span class="hs-identifier hs-type">noDependencies</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#Dependencies"><span class="hs-identifier hs-type">Dependencies</span></a></span><span>
</span><span id="line-199"></span><span id="noDependencies"><span class="annot"><span class="annottext">noDependencies :: Dependencies
</span><a href="GHC.Unit.Module.Deps.html#noDependencies"><span class="hs-identifier hs-var hs-var">noDependencies</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#Deps"><span class="hs-identifier hs-type">Deps</span></a></span><span>
</span><span id="line-200"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dep_direct_mods :: Set (UnitId, GenWithIsBoot ModuleName)
</span><a href="GHC.Unit.Module.Deps.html#dep_direct_mods"><span class="hs-identifier hs-var">dep_direct_mods</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set (UnitId, GenWithIsBoot ModuleName)
forall a. Set a
</span><a href="../../containers-0.6.7/src/Data.Set.Internal.html#empty/Data.Set.Internal.html#empty"><span class="hs-identifier hs-var">Set.empty</span></a></span><span>
</span><span id="line-201"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dep_direct_pkgs :: Set UnitId
</span><a href="GHC.Unit.Module.Deps.html#dep_direct_pkgs"><span class="hs-identifier hs-var">dep_direct_pkgs</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set UnitId
forall a. Set a
</span><a href="../../containers-0.6.7/src/Data.Set.Internal.html#empty/Data.Set.Internal.html#empty"><span class="hs-identifier hs-var">Set.empty</span></a></span><span>
</span><span id="line-202"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dep_plugin_pkgs :: Set UnitId
</span><a href="GHC.Unit.Module.Deps.html#dep_plugin_pkgs"><span class="hs-identifier hs-var">dep_plugin_pkgs</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set UnitId
forall a. Set a
</span><a href="../../containers-0.6.7/src/Data.Set.Internal.html#empty/Data.Set.Internal.html#empty"><span class="hs-identifier hs-var">Set.empty</span></a></span><span>
</span><span id="line-203"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dep_sig_mods :: [ModuleName]
</span><a href="GHC.Unit.Module.Deps.html#dep_sig_mods"><span class="hs-identifier hs-var">dep_sig_mods</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-204"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dep_boot_mods :: Set (UnitId, GenWithIsBoot ModuleName)
</span><a href="GHC.Unit.Module.Deps.html#dep_boot_mods"><span class="hs-identifier hs-var">dep_boot_mods</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set (UnitId, GenWithIsBoot ModuleName)
forall a. Set a
</span><a href="../../containers-0.6.7/src/Data.Set.Internal.html#empty/Data.Set.Internal.html#empty"><span class="hs-identifier hs-var">Set.empty</span></a></span><span>
</span><span id="line-205"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dep_trusted_pkgs :: Set UnitId
</span><a href="GHC.Unit.Module.Deps.html#dep_trusted_pkgs"><span class="hs-identifier hs-var">dep_trusted_pkgs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set UnitId
forall a. Set a
</span><a href="../../containers-0.6.7/src/Data.Set.Internal.html#empty/Data.Set.Internal.html#empty"><span class="hs-identifier hs-var">Set.empty</span></a></span><span>
</span><span id="line-206"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dep_orphs :: [Module]
</span><a href="GHC.Unit.Module.Deps.html#dep_orphs"><span class="hs-identifier hs-var">dep_orphs</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-207"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dep_finsts :: [Module]
</span><a href="GHC.Unit.Module.Deps.html#dep_finsts"><span class="hs-identifier hs-var">dep_finsts</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-208"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-209"></span><span>
</span><span id="line-210"></span><span class="annot"><span class="hs-comment">-- | Pretty-print unit dependencies</span></span><span>
</span><span id="line-211"></span><span class="annot"><a href="GHC.Unit.Module.Deps.html#pprDeps"><span class="hs-identifier hs-type">pprDeps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.State.html#UnitState"><span class="hs-identifier hs-type">UnitState</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#Dependencies"><span class="hs-identifier hs-type">Dependencies</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span>
</span><span id="line-212"></span><span id="pprDeps"><span class="annot"><span class="annottext">pprDeps :: UnitState -&gt; Dependencies -&gt; SDoc
</span><a href="GHC.Unit.Module.Deps.html#pprDeps"><span class="hs-identifier hs-var hs-var">pprDeps</span></a></span></span><span> </span><span id="local-6989586621681681540"><span class="annot"><span class="annottext">UnitState
</span><a href="#local-6989586621681681540"><span class="hs-identifier hs-var">unit_state</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Module.Deps.html#Deps"><span class="hs-identifier hs-type">Deps</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dep_direct_mods :: Dependencies -&gt; Set (UnitId, GenWithIsBoot ModuleName)
</span><a href="GHC.Unit.Module.Deps.html#dep_direct_mods"><span class="hs-identifier hs-var">dep_direct_mods</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681681541"><span class="annot"><span class="annottext">Set (UnitId, GenWithIsBoot ModuleName)
</span><a href="#local-6989586621681681541"><span class="hs-identifier hs-var">dmods</span></a></span></span><span>
</span><span id="line-213"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dep_boot_mods :: Dependencies -&gt; Set (UnitId, GenWithIsBoot ModuleName)
</span><a href="GHC.Unit.Module.Deps.html#dep_boot_mods"><span class="hs-identifier hs-var">dep_boot_mods</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681681542"><span class="annot"><span class="annottext">Set (UnitId, GenWithIsBoot ModuleName)
</span><a href="#local-6989586621681681542"><span class="hs-identifier hs-var">bmods</span></a></span></span><span>
</span><span id="line-214"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dep_plugin_pkgs :: Dependencies -&gt; Set UnitId
</span><a href="GHC.Unit.Module.Deps.html#dep_plugin_pkgs"><span class="hs-identifier hs-var">dep_plugin_pkgs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681681543"><span class="annot"><span class="annottext">Set UnitId
</span><a href="#local-6989586621681681543"><span class="hs-identifier hs-var">plgns</span></a></span></span><span>
</span><span id="line-215"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dep_orphs :: Dependencies -&gt; [Module]
</span><a href="GHC.Unit.Module.Deps.html#dep_orphs"><span class="hs-identifier hs-var">dep_orphs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681681544"><span class="annot"><span class="annottext">[Module]
</span><a href="#local-6989586621681681544"><span class="hs-identifier hs-var">orphs</span></a></span></span><span>
</span><span id="line-216"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dep_direct_pkgs :: Dependencies -&gt; Set UnitId
</span><a href="GHC.Unit.Module.Deps.html#dep_direct_pkgs"><span class="hs-identifier hs-var">dep_direct_pkgs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681681545"><span class="annot"><span class="annottext">Set UnitId
</span><a href="#local-6989586621681681545"><span class="hs-identifier hs-var">pkgs</span></a></span></span><span>
</span><span id="line-217"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dep_trusted_pkgs :: Dependencies -&gt; Set UnitId
</span><a href="GHC.Unit.Module.Deps.html#dep_trusted_pkgs"><span class="hs-identifier hs-var">dep_trusted_pkgs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681681546"><span class="annot"><span class="annottext">Set UnitId
</span><a href="#local-6989586621681681546"><span class="hs-identifier hs-var">tps</span></a></span></span><span>
</span><span id="line-218"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dep_finsts :: Dependencies -&gt; [Module]
</span><a href="GHC.Unit.Module.Deps.html#dep_finsts"><span class="hs-identifier hs-var">dep_finsts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681681547"><span class="annot"><span class="annottext">[Module]
</span><a href="#local-6989586621681681547"><span class="hs-identifier hs-var">finsts</span></a></span></span><span>
</span><span id="line-219"></span><span>                         </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-220"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitState -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Unit.State.html#pprWithUnitState"><span class="hs-identifier hs-var">pprWithUnitState</span></a></span><span> </span><span class="annot"><span class="annottext">UnitState
</span><a href="#local-6989586621681681540"><span class="hs-identifier hs-var">unit_state</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; SDoc) -&gt; SDoc -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-221"></span><span>    </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;direct module dependencies:&quot;</span></span><span>  </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">((UnitId, GenWithIsBoot ModuleName) -&gt; SDoc)
-&gt; Set (UnitId, GenWithIsBoot ModuleName) -&gt; SDoc
forall a. Outputable a =&gt; (a -&gt; SDoc) -&gt; Set a -&gt; SDoc
</span><a href="#local-6989586621681681552"><span class="hs-identifier hs-var">ppr_set</span></a></span><span> </span><span class="annot"><span class="annottext">(UnitId, GenWithIsBoot ModuleName) -&gt; SDoc
forall {a} {a}.
(Outputable a, Outputable a) =&gt;
(a, GenWithIsBoot a) -&gt; SDoc
</span><a href="#local-6989586621681681553"><span class="hs-identifier hs-var">ppr_mod</span></a></span><span> </span><span class="annot"><span class="annottext">Set (UnitId, GenWithIsBoot ModuleName)
</span><a href="#local-6989586621681681541"><span class="hs-identifier hs-var">dmods</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-222"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;boot module dependencies:&quot;</span></span><span>    </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">((UnitId, GenWithIsBoot ModuleName) -&gt; SDoc)
-&gt; Set (UnitId, GenWithIsBoot ModuleName) -&gt; SDoc
forall a. Outputable a =&gt; (a -&gt; SDoc) -&gt; Set a -&gt; SDoc
</span><a href="#local-6989586621681681552"><span class="hs-identifier hs-var">ppr_set</span></a></span><span> </span><span class="annot"><span class="annottext">(UnitId, GenWithIsBoot ModuleName) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Set (UnitId, GenWithIsBoot ModuleName)
</span><a href="#local-6989586621681681542"><span class="hs-identifier hs-var">bmods</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-223"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;direct package dependencies:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(UnitId -&gt; SDoc) -&gt; Set UnitId -&gt; SDoc
forall a. Outputable a =&gt; (a -&gt; SDoc) -&gt; Set a -&gt; SDoc
</span><a href="#local-6989586621681681552"><span class="hs-identifier hs-var">ppr_set</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Set UnitId
</span><a href="#local-6989586621681681545"><span class="hs-identifier hs-var">pkgs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-224"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;plugin package dependencies:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(UnitId -&gt; SDoc) -&gt; Set UnitId -&gt; SDoc
forall a. Outputable a =&gt; (a -&gt; SDoc) -&gt; Set a -&gt; SDoc
</span><a href="#local-6989586621681681552"><span class="hs-identifier hs-var">ppr_set</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Set UnitId
</span><a href="#local-6989586621681681543"><span class="hs-identifier hs-var">plgns</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-225"></span><span>          </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Set UnitId -&gt; Bool
forall a. Set a -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#null/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">Set UnitId
</span><a href="#local-6989586621681681546"><span class="hs-identifier hs-var">tps</span></a></span><span>
</span><span id="line-226"></span><span>            </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-227"></span><span>            </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;trusted package dependencies:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(UnitId -&gt; SDoc) -&gt; Set UnitId -&gt; SDoc
forall a. Outputable a =&gt; (a -&gt; SDoc) -&gt; Set a -&gt; SDoc
</span><a href="#local-6989586621681681552"><span class="hs-identifier hs-var">ppr_set</span></a></span><span> </span><span class="annot"><span class="annottext">UnitId -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Set UnitId
</span><a href="#local-6989586621681681546"><span class="hs-identifier hs-var">tps</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-228"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;orphans:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsLine doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#fsep"><span class="hs-identifier hs-var">fsep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Module -&gt; SDoc) -&gt; [Module] -&gt; [SDoc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Module -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Module]
</span><a href="#local-6989586621681681544"><span class="hs-identifier hs-var">orphs</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-229"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;family instance modules:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsLine doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#fsep"><span class="hs-identifier hs-var">fsep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Module -&gt; SDoc) -&gt; [Module] -&gt; [SDoc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Module -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Module]
</span><a href="#local-6989586621681681547"><span class="hs-identifier hs-var">finsts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-230"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-231"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-232"></span><span>    </span><span id="local-6989586621681681553"><span class="annot"><span class="annottext">ppr_mod :: (a, GenWithIsBoot a) -&gt; SDoc
</span><a href="#local-6989586621681681553"><span class="hs-identifier hs-var hs-var">ppr_mod</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681681572"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681681572"><span class="hs-identifier hs-var">uid</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Types.html#GWIB"><span class="hs-identifier hs-type">GWIB</span></a></span><span> </span><span id="local-6989586621681681573"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681681573"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="Language.Haskell.Syntax.ImpExp.html#IsBoot"><span class="hs-identifier hs-var">IsBoot</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681681572"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681681573"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;[boot]&quot;</span></span><span>
</span><span id="line-233"></span><span>    </span><span class="annot"><a href="#local-6989586621681681553"><span class="hs-identifier hs-var">ppr_mod</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681681577"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681681577"><span class="hs-identifier hs-var">uid</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Unit.Types.html#GWIB"><span class="hs-identifier hs-type">GWIB</span></a></span><span> </span><span id="local-6989586621681681578"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681681578"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span class="annot"><span class="annottext">IsBootInterface
</span><a href="Language.Haskell.Syntax.ImpExp.html#NotBoot"><span class="hs-identifier hs-var">NotBoot</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681681577"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681681578"><span class="hs-identifier hs-var">mod</span></a></span><span>
</span><span id="line-234"></span><span>
</span><span id="line-235"></span><span>    </span><span id="local-6989586621681681268"><span class="annot"><a href="#local-6989586621681681552"><span class="hs-identifier hs-type">ppr_set</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681681268"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681681268"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../containers-0.6.7/src/Data.Set.Internal.html#Set/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681681268"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span></span><span>
</span><span id="line-236"></span><span>    </span><span id="local-6989586621681681552"><span class="annot"><span class="annottext">ppr_set :: forall a. Outputable a =&gt; (a -&gt; SDoc) -&gt; Set a -&gt; SDoc
</span><a href="#local-6989586621681681552"><span class="hs-identifier hs-var hs-var">ppr_set</span></a></span></span><span> </span><span id="local-6989586621681681583"><span class="annot"><span class="annottext">a -&gt; SDoc
</span><a href="#local-6989586621681681583"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsLine doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#fsep"><span class="hs-identifier hs-var">fsep</span></a></span><span> </span><span class="annot"><span class="annottext">([SDoc] -&gt; SDoc) -&gt; (Set a -&gt; [SDoc]) -&gt; Set a -&gt; SDoc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; SDoc) -&gt; [a] -&gt; [SDoc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#fmap/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; SDoc
</span><a href="#local-6989586621681681583"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">([a] -&gt; [SDoc]) -&gt; (Set a -&gt; [a]) -&gt; Set a -&gt; [SDoc]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Set a -&gt; [a]
forall a. Set a -&gt; [a]
</span><a href="../../containers-0.6.7/src/Data.Set.Internal.html#toAscList/Data.Set.Internal.html#toAscList"><span class="hs-identifier hs-var">Set.toAscList</span></a></span><span>
</span><span id="line-237"></span><span>
</span><span id="line-238"></span><span class="hs-comment">-- | Records modules for which changes may force recompilation of this module</span><span>
</span><span id="line-239"></span><span class="hs-comment">-- See wiki: https://gitlab.haskell.org/ghc/ghc/wikis/commentary/compiler/recompilation-avoidance</span><span>
</span><span id="line-240"></span><span class="hs-comment">--</span><span>
</span><span id="line-241"></span><span class="hs-comment">-- This differs from Dependencies.  A module X may be in the dep_mods of this</span><span>
</span><span id="line-242"></span><span class="hs-comment">-- module (via an import chain) but if we don't use anything from X it won't</span><span>
</span><span id="line-243"></span><span class="hs-comment">-- appear in our Usage</span><span>
</span><span id="line-244"></span><span class="hs-keyword">data</span><span> </span><span id="Usage"><span class="annot"><a href="GHC.Unit.Module.Deps.html#Usage"><span class="hs-identifier hs-var">Usage</span></a></span></span><span>
</span><span id="line-245"></span><span>  </span><span class="annot"><span class="hs-comment">-- | Module from another package</span></span><span>
</span><span id="line-246"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="UsagePackageModule"><span class="annot"><a href="GHC.Unit.Module.Deps.html#UsagePackageModule"><span class="hs-identifier hs-var">UsagePackageModule</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-247"></span><span>        </span><span id="usg_mod"><span class="annot"><span class="annottext">Usage -&gt; Module
</span><a href="GHC.Unit.Module.Deps.html#usg_mod"><span class="hs-identifier hs-var hs-var">usg_mod</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-248"></span><span>           </span><span class="annot"><span class="hs-comment">-- ^ External package module depended on</span></span><span>
</span><span id="line-249"></span><span>        </span><span id="usg_mod_hash"><span class="annot"><span class="annottext">Usage -&gt; Fingerprint
</span><a href="GHC.Unit.Module.Deps.html#usg_mod_hash"><span class="hs-identifier hs-var hs-var">usg_mod_hash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Fingerprint.Type.html#Fingerprint/GHC.Fingerprint.Type.html#Fingerprint"><span class="hs-identifier hs-type">Fingerprint</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-250"></span><span>            </span><span class="annot"><span class="hs-comment">-- ^ Cached module ABI fingerprint (corresponds to mi_mod_hash)</span></span><span>
</span><span id="line-251"></span><span>        </span><span id="usg_safe"><span class="annot"><span class="annottext">Usage -&gt; Bool
</span><a href="GHC.Unit.Module.Deps.html#usg_safe"><span class="hs-identifier hs-var hs-var">usg_safe</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SafeHaskell.html#IsSafeImport"><span class="hs-identifier hs-type">IsSafeImport</span></a></span><span>
</span><span id="line-252"></span><span>            </span><span class="annot"><span class="hs-comment">-- ^ Was this module imported as a safe import</span></span><span>
</span><span id="line-253"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-254"></span><span>  </span><span class="annot"><span class="hs-comment">-- | Module from the current package</span></span><span>
</span><span id="line-255"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UsageHomeModule"><span class="annot"><a href="GHC.Unit.Module.Deps.html#UsageHomeModule"><span class="hs-identifier hs-var">UsageHomeModule</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-256"></span><span>        </span><span id="usg_mod_name"><span class="annot"><span class="annottext">Usage -&gt; ModuleName
</span><a href="GHC.Unit.Module.Deps.html#usg_mod_name"><span class="hs-identifier hs-var hs-var">usg_mod_name</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-257"></span><span>            </span><span class="annot"><span class="hs-comment">-- ^ Name of the module</span></span><span>
</span><span id="line-258"></span><span>        </span><span id="usg_unit_id"><span class="annot"><span class="annottext">Usage -&gt; UnitId
</span><a href="GHC.Unit.Module.Deps.html#usg_unit_id"><span class="hs-identifier hs-var hs-var">usg_unit_id</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-259"></span><span>        </span><span class="annot"><span class="hs-comment">-- ^ UnitId of the HomeUnit the module is from</span></span><span>
</span><span id="line-260"></span><span>        </span><span id="usg_mod_hash"><span class="annot"><a href="GHC.Unit.Module.Deps.html#usg_mod_hash"><span class="hs-identifier hs-var">usg_mod_hash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Fingerprint.Type.html#Fingerprint/GHC.Fingerprint.Type.html#Fingerprint"><span class="hs-identifier hs-type">Fingerprint</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-261"></span><span>            </span><span class="hs-comment">-- ^ Cached module ABI fingerprint (corresponds to mi_mod_hash).</span><span>
</span><span id="line-262"></span><span>            </span><span class="hs-comment">-- This may be out dated after recompilation was avoided, but is</span><span>
</span><span id="line-263"></span><span>            </span><span class="hs-comment">-- still used as a fast initial check for change during</span><span>
</span><span id="line-264"></span><span>            </span><span class="hs-comment">-- recompilation avoidance.</span><span>
</span><span id="line-265"></span><span>        </span><span id="usg_entities"><span class="annot"><span class="annottext">Usage -&gt; [(OccName, Fingerprint)]
</span><a href="GHC.Unit.Module.Deps.html#usg_entities"><span class="hs-identifier hs-var hs-var">usg_entities</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccName"><span class="hs-identifier hs-type">OccName</span></a></span><span class="hs-special">,</span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Fingerprint.Type.html#Fingerprint/GHC.Fingerprint.Type.html#Fingerprint"><span class="hs-identifier hs-type">Fingerprint</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-266"></span><span>            </span><span class="hs-comment">-- ^ Entities we depend on, sorted by occurrence name and fingerprinted.</span><span>
</span><span id="line-267"></span><span>            </span><span class="hs-comment">-- NB: usages are for parent names only, e.g. type constructors</span><span>
</span><span id="line-268"></span><span>            </span><span class="hs-comment">-- but not the associated data constructors.</span><span>
</span><span id="line-269"></span><span>        </span><span id="usg_exports"><span class="annot"><span class="annottext">Usage -&gt; Maybe Fingerprint
</span><a href="GHC.Unit.Module.Deps.html#usg_exports"><span class="hs-identifier hs-var hs-var">usg_exports</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Fingerprint.Type.html#Fingerprint/GHC.Fingerprint.Type.html#Fingerprint"><span class="hs-identifier hs-type">Fingerprint</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-270"></span><span>            </span><span class="hs-comment">-- ^ Fingerprint for the export list of this module,</span><span>
</span><span id="line-271"></span><span>            </span><span class="hs-comment">-- if we directly imported it (and hence we depend on its export list)</span><span>
</span><span id="line-272"></span><span>        </span><span id="usg_safe"><span class="annot"><a href="GHC.Unit.Module.Deps.html#usg_safe"><span class="hs-identifier hs-var">usg_safe</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SafeHaskell.html#IsSafeImport"><span class="hs-identifier hs-type">IsSafeImport</span></a></span><span>
</span><span id="line-273"></span><span>            </span><span class="annot"><span class="hs-comment">-- ^ Was this module imported as a safe import</span></span><span>
</span><span id="line-274"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-275"></span><span>  </span><span class="hs-comment">-- | A file upon which the module depends, e.g. a CPP #include, or using TH's</span><span>
</span><span id="line-276"></span><span>  </span><span class="hs-comment">-- 'addDependentFile'</span><span>
</span><span id="line-277"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UsageFile"><span class="annot"><a href="GHC.Unit.Module.Deps.html#UsageFile"><span class="hs-identifier hs-var">UsageFile</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-278"></span><span>        </span><span id="usg_file_path"><span class="annot"><span class="annottext">Usage -&gt; String
</span><a href="GHC.Unit.Module.Deps.html#usg_file_path"><span class="hs-identifier hs-var hs-var">usg_file_path</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.IO.html#FilePath/GHC.IO.html#FilePath"><span class="hs-identifier hs-type">FilePath</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-279"></span><span>        </span><span class="hs-comment">-- ^ External file dependency. From a CPP #include or TH</span><span>
</span><span id="line-280"></span><span>        </span><span class="hs-comment">-- addDependentFile. Should be absolute.</span><span>
</span><span id="line-281"></span><span>        </span><span id="usg_file_hash"><span class="annot"><span class="annottext">Usage -&gt; Fingerprint
</span><a href="GHC.Unit.Module.Deps.html#usg_file_hash"><span class="hs-identifier hs-var hs-var">usg_file_hash</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Fingerprint.Type.html#Fingerprint/GHC.Fingerprint.Type.html#Fingerprint"><span class="hs-identifier hs-type">Fingerprint</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-282"></span><span>        </span><span class="annot"><span class="hs-comment">-- ^ 'Fingerprint' of the file contents.</span></span><span>
</span><span id="line-283"></span><span>
</span><span id="line-284"></span><span>        </span><span id="usg_file_label"><span class="annot"><span class="annottext">Usage -&gt; Maybe String
</span><a href="GHC.Unit.Module.Deps.html#usg_file_label"><span class="hs-identifier hs-var hs-var">usg_file_label</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#String/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-285"></span><span>        </span><span class="hs-comment">-- ^ An optional string which is used in recompilation messages if</span><span>
</span><span id="line-286"></span><span>        </span><span class="hs-comment">-- file in question has changed.</span><span>
</span><span id="line-287"></span><span>
</span><span id="line-288"></span><span>        </span><span class="hs-comment">-- Note: We don't consider things like modification timestamps</span><span>
</span><span id="line-289"></span><span>        </span><span class="hs-comment">-- here, because there's no reason to recompile if the actual</span><span>
</span><span id="line-290"></span><span>        </span><span class="hs-comment">-- contents don't change.  This previously lead to odd</span><span>
</span><span id="line-291"></span><span>        </span><span class="hs-comment">-- recompilation behaviors; see #8114</span><span>
</span><span id="line-292"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-293"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UsageHomeModuleInterface"><span class="annot"><a href="GHC.Unit.Module.Deps.html#UsageHomeModuleInterface"><span class="hs-identifier hs-var">UsageHomeModuleInterface</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-294"></span><span>        </span><span id="usg_mod_name"><span class="annot"><a href="GHC.Unit.Module.Deps.html#usg_mod_name"><span class="hs-identifier hs-var">usg_mod_name</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span>
</span><span id="line-295"></span><span>        </span><span class="annot"><span class="hs-comment">-- ^ Name of the module</span></span><span>
</span><span id="line-296"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="usg_unit_id"><span class="annot"><a href="GHC.Unit.Module.Deps.html#usg_unit_id"><span class="hs-identifier hs-var">usg_unit_id</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span>
</span><span id="line-297"></span><span>        </span><span class="annot"><span class="hs-comment">-- ^ UnitId of the HomeUnit the module is from</span></span><span>
</span><span id="line-298"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="usg_iface_hash"><span class="annot"><span class="annottext">Usage -&gt; Fingerprint
</span><a href="GHC.Unit.Module.Deps.html#usg_iface_hash"><span class="hs-identifier hs-var hs-var">usg_iface_hash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Fingerprint.Type.html#Fingerprint/GHC.Fingerprint.Type.html#Fingerprint"><span class="hs-identifier hs-type">Fingerprint</span></a></span><span>
</span><span id="line-299"></span><span>        </span><span class="hs-comment">-- ^ The *interface* hash of the module, not the ABI hash.</span><span>
</span><span id="line-300"></span><span>        </span><span class="hs-comment">-- This changes when anything about the interface (and hence the</span><span>
</span><span id="line-301"></span><span>        </span><span class="hs-comment">-- module) has changed.</span><span>
</span><span id="line-302"></span><span>
</span><span id="line-303"></span><span>        </span><span class="hs-comment">-- UsageHomeModuleInterface is *only* used for recompilation</span><span>
</span><span id="line-304"></span><span>        </span><span class="hs-comment">-- checking when using TemplateHaskell in the interpreter (where</span><span>
</span><span id="line-305"></span><span>        </span><span class="hs-comment">-- some modules are loaded as BCOs).</span><span>
</span><span id="line-306"></span><span>
</span><span id="line-307"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-308"></span><span>  </span><span class="annot"><span class="hs-comment">-- | A requirement which was merged into this one.</span></span><span>
</span><span id="line-309"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UsageMergedRequirement"><span class="annot"><a href="GHC.Unit.Module.Deps.html#UsageMergedRequirement"><span class="hs-identifier hs-var">UsageMergedRequirement</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-310"></span><span>        </span><span id="usg_mod"><span class="annot"><a href="GHC.Unit.Module.Deps.html#usg_mod"><span class="hs-identifier hs-var">usg_mod</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-311"></span><span>        </span><span id="usg_mod_hash"><span class="annot"><a href="GHC.Unit.Module.Deps.html#usg_mod_hash"><span class="hs-identifier hs-var">usg_mod_hash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Fingerprint.Type.html#Fingerprint/GHC.Fingerprint.Type.html#Fingerprint"><span class="hs-identifier hs-type">Fingerprint</span></a></span><span>
</span><span id="line-312"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-313"></span><span>    </span><span class="hs-keyword">deriving</span><span class="hs-special">(</span><span> </span><span id="local-6989586621681681604"><span id="local-6989586621681681628"><span class="annot"><span class="annottext">Usage -&gt; Usage -&gt; Bool
(Usage -&gt; Usage -&gt; Bool) -&gt; (Usage -&gt; Usage -&gt; Bool) -&gt; Eq Usage
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: Usage -&gt; Usage -&gt; Bool
== :: Usage -&gt; Usage -&gt; Bool
$c/= :: Usage -&gt; Usage -&gt; Bool
/= :: Usage -&gt; Usage -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-314"></span><span>        </span><span class="hs-comment">-- The export list field is (Just v) if we depend on the export list:</span><span>
</span><span id="line-315"></span><span>        </span><span class="hs-comment">--      i.e. we imported the module directly, whether or not we</span><span>
</span><span id="line-316"></span><span>        </span><span class="hs-comment">--           enumerated the things we imported, or just imported</span><span>
</span><span id="line-317"></span><span>        </span><span class="hs-comment">--           everything</span><span>
</span><span id="line-318"></span><span>        </span><span class="hs-comment">-- We need to recompile if M's exports change, because</span><span>
</span><span id="line-319"></span><span>        </span><span class="hs-comment">-- if the import was    import M,       we might now have a name clash</span><span>
</span><span id="line-320"></span><span>        </span><span class="hs-comment">--                                      in the importing module.</span><span>
</span><span id="line-321"></span><span>        </span><span class="hs-comment">-- if the import was    import M(x)     M might no longer export x</span><span>
</span><span id="line-322"></span><span>        </span><span class="hs-comment">-- The only way we don't depend on the export list is if we have</span><span>
</span><span id="line-323"></span><span>        </span><span class="hs-comment">--                      import M()</span><span>
</span><span id="line-324"></span><span>        </span><span class="hs-comment">-- And of course, for modules that aren't imported directly we don't</span><span>
</span><span id="line-325"></span><span>        </span><span class="hs-comment">-- depend on their export lists</span><span>
</span><span id="line-326"></span><span>
</span><span id="line-327"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681681636"><span class="annot"><a href="GHC.Utils.Binary.html#Binary"><span class="hs-identifier hs-type">Binary</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#Usage"><span class="hs-identifier hs-type">Usage</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-328"></span><span>    </span><span id="local-6989586621681681689"><span class="annot"><span class="annottext">put_ :: BinHandle -&gt; Usage -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var hs-var hs-var hs-var">put_</span></a></span></span><span> </span><span id="local-6989586621681681690"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681690"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span id="local-6989586621681681691"><span class="annot"><span class="annottext">usg :: Usage
</span><a href="#local-6989586621681681691"><span class="hs-identifier hs-var">usg</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Unit.Module.Deps.html#UsagePackageModule"><span class="hs-identifier hs-type">UsagePackageModule</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-329"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Word8 -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putByte"><span class="hs-identifier hs-var">putByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681690"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span>
</span><span id="line-330"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Module -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681690"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; Module
</span><a href="GHC.Unit.Module.Deps.html#usg_mod"><span class="hs-identifier hs-var">usg_mod</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681681691"><span class="hs-identifier hs-var">usg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-331"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Fingerprint -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681690"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; Fingerprint
</span><a href="GHC.Unit.Module.Deps.html#usg_mod_hash"><span class="hs-identifier hs-var">usg_mod_hash</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681681691"><span class="hs-identifier hs-var">usg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-332"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Bool -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681690"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; Bool
</span><a href="GHC.Unit.Module.Deps.html#usg_safe"><span class="hs-identifier hs-var">usg_safe</span></a></span><span>     </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681681691"><span class="hs-identifier hs-var">usg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-333"></span><span>
</span><span id="line-334"></span><span>    </span><span class="annot"><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span id="local-6989586621681681693"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681693"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span id="local-6989586621681681694"><span class="annot"><span class="annottext">usg :: Usage
</span><a href="#local-6989586621681681694"><span class="hs-identifier hs-var">usg</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Unit.Module.Deps.html#UsageHomeModule"><span class="hs-identifier hs-type">UsageHomeModule</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-335"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Word8 -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putByte"><span class="hs-identifier hs-var">putByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681693"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">1</span></span><span>
</span><span id="line-336"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; ModuleName -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681693"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; ModuleName
</span><a href="GHC.Unit.Module.Deps.html#usg_mod_name"><span class="hs-identifier hs-var">usg_mod_name</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681681694"><span class="hs-identifier hs-var">usg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-337"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; UnitId -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681693"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; UnitId
</span><a href="GHC.Unit.Module.Deps.html#usg_unit_id"><span class="hs-identifier hs-var">usg_unit_id</span></a></span><span>  </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681681694"><span class="hs-identifier hs-var">usg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-338"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Fingerprint -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681693"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; Fingerprint
</span><a href="GHC.Unit.Module.Deps.html#usg_mod_hash"><span class="hs-identifier hs-var">usg_mod_hash</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681681694"><span class="hs-identifier hs-var">usg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-339"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Maybe Fingerprint -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681693"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; Maybe Fingerprint
</span><a href="GHC.Unit.Module.Deps.html#usg_exports"><span class="hs-identifier hs-var">usg_exports</span></a></span><span>  </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681681694"><span class="hs-identifier hs-var">usg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-340"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; [(OccName, Fingerprint)] -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681693"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; [(OccName, Fingerprint)]
</span><a href="GHC.Unit.Module.Deps.html#usg_entities"><span class="hs-identifier hs-var">usg_entities</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681681694"><span class="hs-identifier hs-var">usg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-341"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Bool -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681693"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; Bool
</span><a href="GHC.Unit.Module.Deps.html#usg_safe"><span class="hs-identifier hs-var">usg_safe</span></a></span><span>     </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681681694"><span class="hs-identifier hs-var">usg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-342"></span><span>
</span><span id="line-343"></span><span>    </span><span class="annot"><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span id="local-6989586621681681695"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681695"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span id="local-6989586621681681696"><span class="annot"><span class="annottext">usg :: Usage
</span><a href="#local-6989586621681681696"><span class="hs-identifier hs-var">usg</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Unit.Module.Deps.html#UsageFile"><span class="hs-identifier hs-type">UsageFile</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-344"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Word8 -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putByte"><span class="hs-identifier hs-var">putByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681695"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">2</span></span><span>
</span><span id="line-345"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; String -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681695"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; String
</span><a href="GHC.Unit.Module.Deps.html#usg_file_path"><span class="hs-identifier hs-var">usg_file_path</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681681696"><span class="hs-identifier hs-var">usg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-346"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Fingerprint -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681695"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; Fingerprint
</span><a href="GHC.Unit.Module.Deps.html#usg_file_hash"><span class="hs-identifier hs-var">usg_file_hash</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681681696"><span class="hs-identifier hs-var">usg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-347"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Maybe String -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681695"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; Maybe String
</span><a href="GHC.Unit.Module.Deps.html#usg_file_label"><span class="hs-identifier hs-var">usg_file_label</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681681696"><span class="hs-identifier hs-var">usg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-348"></span><span>
</span><span id="line-349"></span><span>    </span><span class="annot"><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span id="local-6989586621681681697"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681697"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span id="local-6989586621681681698"><span class="annot"><span class="annottext">usg :: Usage
</span><a href="#local-6989586621681681698"><span class="hs-identifier hs-var">usg</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Unit.Module.Deps.html#UsageMergedRequirement"><span class="hs-identifier hs-type">UsageMergedRequirement</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-350"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Word8 -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putByte"><span class="hs-identifier hs-var">putByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681697"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">3</span></span><span>
</span><span id="line-351"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Module -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681697"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; Module
</span><a href="GHC.Unit.Module.Deps.html#usg_mod"><span class="hs-identifier hs-var">usg_mod</span></a></span><span>      </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681681698"><span class="hs-identifier hs-var">usg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-352"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Fingerprint -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681697"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; Fingerprint
</span><a href="GHC.Unit.Module.Deps.html#usg_mod_hash"><span class="hs-identifier hs-var">usg_mod_hash</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681681698"><span class="hs-identifier hs-var">usg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-353"></span><span>
</span><span id="line-354"></span><span>    </span><span class="annot"><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span id="local-6989586621681681699"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681699"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span id="local-6989586621681681700"><span class="annot"><span class="annottext">usg :: Usage
</span><a href="#local-6989586621681681700"><span class="hs-identifier hs-var">usg</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Unit.Module.Deps.html#UsageHomeModuleInterface"><span class="hs-identifier hs-type">UsageHomeModuleInterface</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-355"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Word8 -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putByte"><span class="hs-identifier hs-var">putByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681699"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">4</span></span><span>
</span><span id="line-356"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; ModuleName -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681699"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; ModuleName
</span><a href="GHC.Unit.Module.Deps.html#usg_mod_name"><span class="hs-identifier hs-var">usg_mod_name</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681681700"><span class="hs-identifier hs-var">usg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-357"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; UnitId -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681699"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; UnitId
</span><a href="GHC.Unit.Module.Deps.html#usg_unit_id"><span class="hs-identifier hs-var">usg_unit_id</span></a></span><span>  </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681681700"><span class="hs-identifier hs-var">usg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-358"></span><span>        </span><span class="annot"><span class="annottext">BinHandle -&gt; Fingerprint -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681699"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Usage -&gt; Fingerprint
</span><a href="GHC.Unit.Module.Deps.html#usg_iface_hash"><span class="hs-identifier hs-var">usg_iface_hash</span></a></span><span> </span><span class="annot"><span class="annottext">Usage
</span><a href="#local-6989586621681681700"><span class="hs-identifier hs-var">usg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-359"></span><span>
</span><span id="line-360"></span><span>    </span><span id="local-6989586621681681760"><span class="annot"><span class="annottext">get :: BinHandle -&gt; IO Usage
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var hs-var hs-var hs-var">get</span></a></span></span><span> </span><span id="local-6989586621681681761"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681761"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-361"></span><span>        </span><span id="local-6989586621681681762"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621681681762"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Word8
</span><a href="GHC.Utils.Binary.html#getByte"><span class="hs-identifier hs-var">getByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681761"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-362"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621681681762"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-363"></span><span>          </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-364"></span><span>            </span><span id="local-6989586621681681764"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681681764"><span class="hs-identifier hs-var">nm</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Module
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681761"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-365"></span><span>            </span><span id="local-6989586621681681765"><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621681681765"><span class="hs-identifier hs-var">mod</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Fingerprint
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681761"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-366"></span><span>            </span><span id="local-6989586621681681766"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681681766"><span class="hs-keyword hs-var">safe</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Bool
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681761"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-367"></span><span>            </span><span class="annot"><span class="annottext">Usage -&gt; IO Usage
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#UsagePackageModule"><span class="hs-identifier hs-type">UsagePackageModule</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">usg_mod :: Module
</span><a href="GHC.Unit.Module.Deps.html#usg_mod"><span class="hs-identifier hs-var">usg_mod</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681681764"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">usg_mod_hash :: Fingerprint
</span><a href="GHC.Unit.Module.Deps.html#usg_mod_hash"><span class="hs-identifier hs-var">usg_mod_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621681681765"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">usg_safe :: Bool
</span><a href="GHC.Unit.Module.Deps.html#usg_safe"><span class="hs-identifier hs-var">usg_safe</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681681766"><span class="hs-keyword hs-var">safe</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-368"></span><span>          </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-369"></span><span>            </span><span id="local-6989586621681681767"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621681681767"><span class="hs-identifier hs-var">nm</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO ModuleName
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681761"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-370"></span><span>            </span><span id="local-6989586621681681768"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621681681768"><span class="hs-identifier hs-var">uid</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO UnitId
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681761"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-371"></span><span>            </span><span id="local-6989586621681681769"><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621681681769"><span class="hs-identifier hs-var">mod</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Fingerprint
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681761"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-372"></span><span>            </span><span id="local-6989586621681681770"><span class="annot"><span class="annottext">Maybe Fingerprint
</span><a href="#local-6989586621681681770"><span class="hs-identifier hs-var">exps</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO (Maybe Fingerprint)
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681761"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-373"></span><span>            </span><span id="local-6989586621681681771"><span class="annot"><span class="annottext">[(OccName, Fingerprint)]
</span><a href="#local-6989586621681681771"><span class="hs-identifier hs-var">ents</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO [(OccName, Fingerprint)]
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681761"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-374"></span><span>            </span><span id="local-6989586621681681772"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681681772"><span class="hs-keyword hs-var">safe</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Bool
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681761"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-375"></span><span>            </span><span class="annot"><span class="annottext">Usage -&gt; IO Usage
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#UsageHomeModule"><span class="hs-identifier hs-type">UsageHomeModule</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">usg_mod_name :: ModuleName
</span><a href="GHC.Unit.Module.Deps.html#usg_mod_name"><span class="hs-identifier hs-var">usg_mod_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621681681767"><span class="hs-identifier hs-var">nm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">usg_mod_hash :: Fingerprint
</span><a href="GHC.Unit.Module.Deps.html#usg_mod_hash"><span class="hs-identifier hs-var">usg_mod_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621681681769"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">usg_unit_id :: UnitId
</span><a href="GHC.Unit.Module.Deps.html#usg_unit_id"><span class="hs-identifier hs-var">usg_unit_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621681681768"><span class="hs-identifier hs-var">uid</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-376"></span><span>                     </span><span class="annot"><span class="annottext">usg_exports :: Maybe Fingerprint
</span><a href="GHC.Unit.Module.Deps.html#usg_exports"><span class="hs-identifier hs-var">usg_exports</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Fingerprint
</span><a href="#local-6989586621681681770"><span class="hs-identifier hs-var">exps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">usg_entities :: [(OccName, Fingerprint)]
</span><a href="GHC.Unit.Module.Deps.html#usg_entities"><span class="hs-identifier hs-var">usg_entities</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(OccName, Fingerprint)]
</span><a href="#local-6989586621681681771"><span class="hs-identifier hs-var">ents</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">usg_safe :: Bool
</span><a href="GHC.Unit.Module.Deps.html#usg_safe"><span class="hs-identifier hs-var">usg_safe</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681681772"><span class="hs-keyword hs-var">safe</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-377"></span><span>          </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">2</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-378"></span><span>            </span><span id="local-6989586621681681773"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681681773"><span class="hs-identifier hs-var">fp</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO String
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681761"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-379"></span><span>            </span><span id="local-6989586621681681774"><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621681681774"><span class="hs-identifier hs-var">hash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Fingerprint
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681761"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-380"></span><span>            </span><span id="local-6989586621681681775"><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621681681775"><span class="hs-keyword hs-var">label</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO (Maybe String)
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681761"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-381"></span><span>            </span><span class="annot"><span class="annottext">Usage -&gt; IO Usage
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#UsageFile"><span class="hs-identifier hs-type">UsageFile</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">usg_file_path :: String
</span><a href="GHC.Unit.Module.Deps.html#usg_file_path"><span class="hs-identifier hs-var">usg_file_path</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681681773"><span class="hs-identifier hs-var">fp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">usg_file_hash :: Fingerprint
</span><a href="GHC.Unit.Module.Deps.html#usg_file_hash"><span class="hs-identifier hs-var">usg_file_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621681681774"><span class="hs-identifier hs-var">hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">usg_file_label :: Maybe String
</span><a href="GHC.Unit.Module.Deps.html#usg_file_label"><span class="hs-identifier hs-var">usg_file_label</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621681681775"><span class="hs-keyword hs-var">label</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-382"></span><span>          </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">3</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-383"></span><span>            </span><span id="local-6989586621681681776"><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681681776"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Module
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681761"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-384"></span><span>            </span><span id="local-6989586621681681777"><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621681681777"><span class="hs-identifier hs-var">hash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Fingerprint
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681761"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-385"></span><span>            </span><span class="annot"><span class="annottext">Usage -&gt; IO Usage
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#UsageMergedRequirement"><span class="hs-identifier hs-type">UsageMergedRequirement</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">usg_mod :: Module
</span><a href="GHC.Unit.Module.Deps.html#usg_mod"><span class="hs-identifier hs-var">usg_mod</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Module
</span><a href="#local-6989586621681681776"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">usg_mod_hash :: Fingerprint
</span><a href="GHC.Unit.Module.Deps.html#usg_mod_hash"><span class="hs-identifier hs-var">usg_mod_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621681681777"><span class="hs-identifier hs-var">hash</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-386"></span><span>          </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">4</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-387"></span><span>            </span><span id="local-6989586621681681778"><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621681681778"><span class="hs-identifier hs-var">mod</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO ModuleName
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681761"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-388"></span><span>            </span><span id="local-6989586621681681779"><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621681681779"><span class="hs-identifier hs-var">uid</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO UnitId
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681761"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-389"></span><span>            </span><span id="local-6989586621681681780"><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621681681780"><span class="hs-identifier hs-var">hash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Fingerprint
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681681761"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-390"></span><span>            </span><span class="annot"><span class="annottext">Usage -&gt; IO Usage
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Module.Deps.html#UsageHomeModuleInterface"><span class="hs-identifier hs-type">UsageHomeModuleInterface</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">usg_mod_name :: ModuleName
</span><a href="GHC.Unit.Module.Deps.html#usg_mod_name"><span class="hs-identifier hs-var">usg_mod_name</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><a href="#local-6989586621681681778"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">usg_unit_id :: UnitId
</span><a href="GHC.Unit.Module.Deps.html#usg_unit_id"><span class="hs-identifier hs-var">usg_unit_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnitId
</span><a href="#local-6989586621681681779"><span class="hs-identifier hs-var">uid</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">usg_iface_hash :: Fingerprint
</span><a href="GHC.Unit.Module.Deps.html#usg_iface_hash"><span class="hs-identifier hs-var">usg_iface_hash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fingerprint
</span><a href="#local-6989586621681681780"><span class="hs-identifier hs-var">hash</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-391"></span><span>          </span><span id="local-6989586621681681781"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621681681781"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO Usage
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Err.html#error/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Binary.get(Usage): &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../base-4.18.3.0/src/GHC.Show.html#show/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621681681781"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-392"></span><span>
</span><span id="line-393"></span><span>
</span><span id="line-394"></span><span class="hs-comment">{-
Note [Transitive Information in Dependencies]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

It is important to be careful what information we put in 'Dependencies' because
ultimately it ends up serialised in an interface file. Interface files must always
be kept up-to-date with the state of the world, so if `Dependencies` needs to be updated
then the module had to be recompiled just to update `Dependencies`.

Before #16885, the dependencies used to contain the transitive closure of all
home modules. Therefore, if you added an import somewhere low down in the home package
it would recompile nearly every module in your project, just to update this information.

Now, we are a bit more careful about what we store and
explicitly store transitive information only if it is really needed.

~ Direct Information

* dep_direct_mods - Directly imported home package modules
* dep_direct_pkgs - Directly imported packages
* dep_plgins      - Directly used plugins

~ Transitive Information

Some features of the compiler require transitive information about what is currently
being compiled, so that is explicitly stored separately in the form they need.

* dep_trusted_pkgs - Only used for the -fpackage-trust feature
* dep_boot_mods  - Only used to populate eps_is_boot in -c mode
* dep_orphs        - Modules with orphan instances
* dep_finsts       - Modules with type family instances

Important note: If you add some transitive information to the interface file then
you need to make sure recompilation is triggered when it could be out of date.
The correct way to do this is to include the transitive information in the export
hash of the module. The export hash is computed in `GHC.Iface.Recomp.addFingerprints`.
-}</span><span>
</span><span id="line-431"></span><span>
</span><span id="line-432"></span><span class="hs-comment">{-
Note [Structure of dep_boot_deps]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

In `-c` mode we always need to know whether to load the normal or boot version of
an interface file, and this can't be determined from just looking at the direct imports.

Consider modules with dependencies:

```
A -(S)-&gt; B
A -&gt; C -&gt; B -(S)-&gt; B
```

Say when compiling module `A` that we need to load the interface for `B`, do we load
`B.hi` or `B.hi-boot`? Well, `A` does directly {-# SOURCE #-} import B, so you might think
that we would load the `B.hi-boot` file, however this is wrong because `C` imports
`B` normally. Therefore in the interface file for `C` we still need to record that
there is a hs-boot file for `B` below it but that we now want `B.hi` rather than
`B.hi-boot`. When `C` is imported, the fact that it needs `B.hi` clobbers the `{- SOURCE -}`
import for `B`.

Therefore in mod_boot_deps we store the names of any modules which have hs-boot files,
and whether we want to import the .hi or .hi-boot version of the interface file.

If you get this wrong, then GHC fails to compile, so there is a test but you might
not make it that far if you get this wrong!

Question: does this happen even across packages?
No: if I need to load the interface for module X from package P I always look for p:X.hi.

-}</span><span>
</span><span id="line-464"></span><span>
</span><span id="line-465"></span><span class="hs-comment">-- | 'ImportAvails' summarises what was imported from where, irrespective of</span><span>
</span><span id="line-466"></span><span class="hs-comment">-- whether the imported things are actually used or not.  It is used:</span><span>
</span><span id="line-467"></span><span class="hs-comment">--</span><span>
</span><span id="line-468"></span><span class="hs-comment">--  * when processing the export list,</span><span>
</span><span id="line-469"></span><span class="hs-comment">--</span><span>
</span><span id="line-470"></span><span class="hs-comment">--  * when constructing usage info for the interface file,</span><span>
</span><span id="line-471"></span><span class="hs-comment">--</span><span>
</span><span id="line-472"></span><span class="hs-comment">--  * to identify the list of directly imported modules for initialisation</span><span>
</span><span id="line-473"></span><span class="hs-comment">--    purposes and for optimised overlap checking of family instances,</span><span>
</span><span id="line-474"></span><span class="hs-comment">--</span><span>
</span><span id="line-475"></span><span class="hs-comment">--  * when figuring out what things are really unused</span><span>
</span><span id="line-476"></span><span class="hs-comment">--</span><span>
</span><span id="line-477"></span><span class="hs-keyword">data</span><span> </span><span id="ImportAvails"><span class="annot"><a href="GHC.Unit.Module.Deps.html#ImportAvails"><span class="hs-identifier hs-var">ImportAvails</span></a></span></span><span>
</span><span id="line-478"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="ImportAvails"><span class="annot"><a href="GHC.Unit.Module.Deps.html#ImportAvails"><span class="hs-identifier hs-var">ImportAvails</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-479"></span><span>        </span><span id="imp_mods"><span class="annot"><span class="annottext">ImportAvails -&gt; ImportedMods
</span><a href="GHC.Unit.Module.Deps.html#imp_mods"><span class="hs-identifier hs-var hs-var">imp_mods</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Imported.html#ImportedMods"><span class="hs-identifier hs-type">ImportedMods</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-480"></span><span>          </span><span class="hs-comment">--      = ModuleEnv [ImportedModsVal],</span><span>
</span><span id="line-481"></span><span>          </span><span class="hs-comment">-- ^ Domain is all directly-imported modules</span><span>
</span><span id="line-482"></span><span>          </span><span class="hs-comment">--</span><span>
</span><span id="line-483"></span><span>          </span><span class="hs-comment">-- See the documentation on ImportedModsVal in</span><span>
</span><span id="line-484"></span><span>          </span><span class="hs-comment">-- &quot;GHC.Unit.Module.Imported&quot; for the meaning of the fields.</span><span>
</span><span id="line-485"></span><span>          </span><span class="hs-comment">--</span><span>
</span><span id="line-486"></span><span>          </span><span class="hs-comment">-- We need a full ModuleEnv rather than a ModuleNameEnv here,</span><span>
</span><span id="line-487"></span><span>          </span><span class="hs-comment">-- because we might be importing modules of the same name from</span><span>
</span><span id="line-488"></span><span>          </span><span class="hs-comment">-- different packages. (currently not the case, but might be in the</span><span>
</span><span id="line-489"></span><span>          </span><span class="hs-comment">-- future).</span><span>
</span><span id="line-490"></span><span>
</span><span id="line-491"></span><span>        </span><span id="imp_direct_dep_mods"><span class="annot"><span class="annottext">ImportAvails -&gt; InstalledModuleEnv (GenWithIsBoot ModuleName)
</span><a href="GHC.Unit.Module.Deps.html#imp_direct_dep_mods"><span class="hs-identifier hs-var hs-var">imp_direct_dep_mods</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Env.html#InstalledModuleEnv"><span class="hs-identifier hs-type">InstalledModuleEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#ModuleNameWithIsBoot"><span class="hs-identifier hs-type">ModuleNameWithIsBoot</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-492"></span><span>          </span><span class="annot"><span class="hs-comment">-- ^ Home-package modules directly imported by the module being compiled.</span></span><span>
</span><span id="line-493"></span><span>
</span><span id="line-494"></span><span>        </span><span id="imp_dep_direct_pkgs"><span class="annot"><span class="annottext">ImportAvails -&gt; Set UnitId
</span><a href="GHC.Unit.Module.Deps.html#imp_dep_direct_pkgs"><span class="hs-identifier hs-var hs-var">imp_dep_direct_pkgs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../containers-0.6.7/src/Data.Set.Internal.html#Set/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-495"></span><span>          </span><span class="annot"><span class="hs-comment">-- ^ Packages directly needed by the module being compiled</span></span><span>
</span><span id="line-496"></span><span>
</span><span id="line-497"></span><span>        </span><span id="imp_trust_own_pkg"><span class="annot"><span class="annottext">ImportAvails -&gt; Bool
</span><a href="GHC.Unit.Module.Deps.html#imp_trust_own_pkg"><span class="hs-identifier hs-var hs-var">imp_trust_own_pkg</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>
</span><span id="line-498"></span><span>          </span><span class="hs-comment">-- ^ Do we require that our own package is trusted?</span><span>
</span><span id="line-499"></span><span>          </span><span class="hs-comment">-- This is to handle efficiently the case where a Safe module imports</span><span>
</span><span id="line-500"></span><span>          </span><span class="hs-comment">-- a Trustworthy module that resides in the same package as it.</span><span>
</span><span id="line-501"></span><span>          </span><span class="hs-comment">-- See Note [Trust Own Package] in &quot;GHC.Rename.Names&quot;</span><span>
</span><span id="line-502"></span><span>
</span><span id="line-503"></span><span>        </span><span class="hs-comment">-- Transitive information below here</span><span>
</span><span id="line-504"></span><span>
</span><span id="line-505"></span><span>        </span><span id="imp_trust_pkgs"><span class="annot"><span class="annottext">ImportAvails -&gt; Set UnitId
</span><a href="GHC.Unit.Module.Deps.html#imp_trust_pkgs"><span class="hs-identifier hs-var hs-var">imp_trust_pkgs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../containers-0.6.7/src/Data.Set.Internal.html#Set/Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#UnitId"><span class="hs-identifier hs-type">UnitId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-506"></span><span>          </span><span class="hs-comment">-- ^ This records the</span><span>
</span><span id="line-507"></span><span>          </span><span class="hs-comment">-- packages the current module needs to trust for Safe Haskell</span><span>
</span><span id="line-508"></span><span>          </span><span class="hs-comment">-- compilation to succeed. A package is required to be trusted if</span><span>
</span><span id="line-509"></span><span>          </span><span class="hs-comment">-- we are dependent on a trustworthy module in that package.</span><span>
</span><span id="line-510"></span><span>          </span><span class="hs-comment">-- See Note [Tracking Trust Transitively] in &quot;GHC.Rename.Names&quot;</span><span>
</span><span id="line-511"></span><span>
</span><span id="line-512"></span><span>        </span><span id="imp_boot_mods"><span class="annot"><span class="annottext">ImportAvails -&gt; InstalledModuleEnv (GenWithIsBoot ModuleName)
</span><a href="GHC.Unit.Module.Deps.html#imp_boot_mods"><span class="hs-identifier hs-var hs-var">imp_boot_mods</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Module.Env.html#InstalledModuleEnv"><span class="hs-identifier hs-type">InstalledModuleEnv</span></a></span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#ModuleNameWithIsBoot"><span class="hs-identifier hs-type">ModuleNameWithIsBoot</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-513"></span><span>          </span><span class="hs-comment">-- ^ Domain is all modules which have hs-boot files, and whether</span><span>
</span><span id="line-514"></span><span>          </span><span class="hs-comment">-- we should import the boot version of interface file. Only used</span><span>
</span><span id="line-515"></span><span>          </span><span class="hs-comment">-- in one-shot mode to populate eps_is_boot.</span><span>
</span><span id="line-516"></span><span>
</span><span id="line-517"></span><span>        </span><span id="imp_sig_mods"><span class="annot"><span class="annottext">ImportAvails -&gt; [ModuleName]
</span><a href="GHC.Unit.Module.Deps.html#imp_sig_mods"><span class="hs-identifier hs-var hs-var">imp_sig_mods</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Module.Name.html#ModuleName"><span class="hs-identifier hs-type">ModuleName</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-518"></span><span>          </span><span class="annot"><span class="hs-comment">-- ^ Signature modules below this one</span></span><span>
</span><span id="line-519"></span><span>
</span><span id="line-520"></span><span>        </span><span id="imp_orphs"><span class="annot"><span class="annottext">ImportAvails -&gt; [Module]
</span><a href="GHC.Unit.Module.Deps.html#imp_orphs"><span class="hs-identifier hs-var hs-var">imp_orphs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-521"></span><span>          </span><span class="hs-comment">-- ^ Orphan modules below us in the import tree (and maybe including</span><span>
</span><span id="line-522"></span><span>          </span><span class="hs-comment">-- us for imported modules)</span><span>
</span><span id="line-523"></span><span>
</span><span id="line-524"></span><span>        </span><span id="imp_finsts"><span class="annot"><span class="annottext">ImportAvails -&gt; [Module]
</span><a href="GHC.Unit.Module.Deps.html#imp_finsts"><span class="hs-identifier hs-var hs-var">imp_finsts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-525"></span><span>          </span><span class="hs-comment">-- ^ Family instance modules below us in the import tree (and maybe</span><span>
</span><span id="line-526"></span><span>          </span><span class="hs-comment">-- including us for imported modules)</span><span>
</span><span id="line-527"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-528"></span></pre></body></html>