<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE GADTs, MultiWayIf #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# OPTIONS_GHC -fno-warn-type-defaults #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-incomplete-uni-patterns #-}</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="annot"><span class="hs-comment">-- | Handle conversion of CmmProc to LLVM code.</span></span><span>
</span><span id="line-7"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">GHC.CmmToLlvm.CodeGen</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genLlvmProc"><span class="hs-identifier">genLlvmProc</span></a></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Platform.html"><span class="hs-identifier">GHC.Platform</span></a></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Platform.Regs.html"><span class="hs-identifier">GHC.Platform.Regs</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Platform.Regs.html#activeStgRegs"><span class="hs-identifier">activeStgRegs</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-13"></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Llvm.html"><span class="hs-identifier">GHC.Llvm</span></a></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html"><span class="hs-identifier">GHC.CmmToLlvm.Base</span></a></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Config.html"><span class="hs-identifier">GHC.CmmToLlvm.Config</span></a></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Regs.html"><span class="hs-identifier">GHC.CmmToLlvm.Regs</span></a></span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Cmm.BlockId.html"><span class="hs-identifier">GHC.Cmm.BlockId</span></a></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Cmm.CLabel.html"><span class="hs-identifier">GHC.Cmm.CLabel</span></a></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Cmm.html"><span class="hs-identifier">GHC.Cmm</span></a></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Cmm.Utils.html"><span class="hs-identifier">GHC.Cmm.Utils</span></a></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Cmm.Switch.html"><span class="hs-identifier">GHC.Cmm.Switch</span></a></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Cmm.Dataflow.Block.html"><span class="hs-identifier">GHC.Cmm.Dataflow.Block</span></a></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Cmm.Dataflow.Graph.html"><span class="hs-identifier">GHC.Cmm.Dataflow.Graph</span></a></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Cmm.Dataflow.Collections.html"><span class="hs-identifier">GHC.Cmm.Dataflow.Collections</span></a></span><span>
</span><span id="line-27"></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html"><span class="hs-identifier">GHC.Data.FastString</span></a></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html"><span class="hs-identifier">GHC.Data.OrdList</span></a></span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.ForeignCall.html"><span class="hs-identifier">GHC.Types.ForeignCall</span></a></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.Supply.html"><span class="hs-identifier">GHC.Types.Unique.Supply</span></a></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.html"><span class="hs-identifier">GHC.Types.Unique</span></a></span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.Plain.html"><span class="hs-identifier">GHC.Utils.Panic.Plain</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Panic.Plain.html#massert"><span class="hs-identifier">massert</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Panic</span></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Class.html#/Control.Monad.Trans.Class.html"><span class="hs-identifier">Control.Monad.Trans.Class</span></a></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Writer.html#/Control.Monad.Trans.Writer.html"><span class="hs-identifier">Control.Monad.Trans.Writer</span></a></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Control.Monad.html#/Control.Monad.html"><span class="hs-identifier">Control.Monad</span></a></span><span>
</span><span id="line-43"></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Semigroup.html#/Data.Semigroup.html"><span class="hs-identifier">Data.Semigroup</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Semigroup</span></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.List.html#/Data.List.html"><span class="hs-identifier">Data.List</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.OldList.html#nub/Data.OldList.html#nub"><span class="hs-identifier">nub</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Maybe.html#/Data.Maybe.html"><span class="hs-identifier">Data.Maybe</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Maybe.html#catMaybes/Data.Maybe.html#catMaybes"><span class="hs-identifier">catMaybes</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span class="hs-keyword">type</span><span> </span><span id="Atomic"><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#Atomic"><span class="hs-identifier hs-var">Atomic</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MemoryOrdering"><span class="hs-identifier hs-type">MemoryOrdering</span></a></span><span>
</span><span id="line-49"></span><span class="hs-keyword">type</span><span> </span><span id="LlvmStatements"><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmStatements"><span class="hs-identifier hs-var">LlvmStatements</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Data.OrdList.html#OrdList"><span class="hs-identifier hs-type">OrdList</span></a></span><span> </span><span class="annot"><a href="GHC.Llvm.Syntax.html#LlvmStatement"><span class="hs-identifier hs-type">LlvmStatement</span></a></span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span class="hs-keyword">data</span><span> </span><span id="Signage"><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#Signage"><span class="hs-identifier hs-var">Signage</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Signed"><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Unsigned"><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#Unsigned"><span class="hs-identifier hs-var">Unsigned</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681858034"><span id="local-6989586621681858036"><span class="annot"><span class="annottext">Signage -&gt; Signage -&gt; Bool
(Signage -&gt; Signage -&gt; Bool)
-&gt; (Signage -&gt; Signage -&gt; Bool) -&gt; Eq Signage
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: Signage -&gt; Signage -&gt; Bool
== :: Signage -&gt; Signage -&gt; Bool
$c/= :: Signage -&gt; Signage -&gt; Bool
/= :: Signage -&gt; Signage -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858041"><span id="local-6989586621681858043"><span id="local-6989586621681858047"><span class="annot"><span class="annottext">Int -&gt; Signage -&gt; ShowS
[Signage] -&gt; ShowS
Signage -&gt; String
(Int -&gt; Signage -&gt; ShowS)
-&gt; (Signage -&gt; String) -&gt; ([Signage] -&gt; ShowS) -&gt; Show Signage
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; Signage -&gt; ShowS
showsPrec :: Int -&gt; Signage -&gt; ShowS
$cshow :: Signage -&gt; String
show :: Signage -&gt; String
$cshowList :: [Signage] -&gt; ShowS
showList :: [Signage] -&gt; ShowS
</span><a href="../../base-4.18.3.0/src/GHC.Show.html#Show/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-52"></span><span>
</span><span id="line-53"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-54"></span><span class="hs-comment">-- | Top-level of the LLVM proc Code generator</span><span>
</span><span id="line-55"></span><span class="hs-comment">--</span><span>
</span><span id="line-56"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genLlvmProc"><span class="hs-identifier hs-type">genLlvmProc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.html#RawCmmDecl"><span class="hs-identifier hs-type">RawCmmDecl</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmCmmDecl"><span class="hs-identifier hs-type">LlvmCmmDecl</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-57"></span><span id="genLlvmProc"><span class="annot"><span class="annottext">genLlvmProc :: RawCmmDecl -&gt; LlvmM [LlvmCmmDecl]
</span><a href="GHC.CmmToLlvm.CodeGen.html#genLlvmProc"><span class="hs-identifier hs-var hs-var">genLlvmProc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.html#CmmProc"><span class="hs-identifier hs-type">CmmProc</span></a></span><span> </span><span id="local-6989586621681858051"><span class="annot"><span class="annottext">LabelMap RawCmmStatics
</span><a href="#local-6989586621681858051"><span class="hs-identifier hs-var">infos</span></a></span></span><span> </span><span id="local-6989586621681858052"><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621681858052"><span class="hs-identifier hs-var">lbl</span></a></span></span><span> </span><span id="local-6989586621681858053"><span class="annot"><span class="annottext">[GlobalReg]
</span><a href="#local-6989586621681858053"><span class="hs-identifier hs-var">live</span></a></span></span><span> </span><span id="local-6989586621681858054"><span class="annot"><span class="annottext">CmmGraph
</span><a href="#local-6989586621681858054"><span class="hs-identifier hs-var">graph</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-58"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858055"><span class="annot"><span class="annottext">blocks :: [CmmBlock]
</span><a href="#local-6989586621681858055"><span class="hs-identifier hs-var hs-var">blocks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmGraph -&gt; [CmmBlock]
</span><a href="GHC.Cmm.Utils.html#toBlockListEntryFirstFalseFallthrough"><span class="hs-identifier hs-var">toBlockListEntryFirstFalseFallthrough</span></a></span><span> </span><span class="annot"><span class="annottext">CmmGraph
</span><a href="#local-6989586621681858054"><span class="hs-identifier hs-var">graph</span></a></span><span>
</span><span id="line-59"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681858057"><span class="annot"><span class="annottext">[LlvmBasicBlock]
</span><a href="#local-6989586621681858057"><span class="hs-identifier hs-var">lmblocks</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858058"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858058"><span class="hs-identifier hs-var">lmdata</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[GlobalReg]
-&gt; [CmmBlock] -&gt; LlvmM ([LlvmBasicBlock], [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#basicBlocksCodeGen"><span class="hs-identifier hs-var">basicBlocksCodeGen</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalReg]
</span><a href="#local-6989586621681858053"><span class="hs-identifier hs-var">live</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmBlock]
</span><a href="#local-6989586621681858055"><span class="hs-identifier hs-var">blocks</span></a></span><span>
</span><span id="line-60"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858060"><span class="annot"><span class="annottext">info :: Maybe RawCmmStatics
</span><a href="#local-6989586621681858060"><span class="hs-identifier hs-var hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">KeyOf LabelMap -&gt; LabelMap RawCmmStatics -&gt; Maybe RawCmmStatics
forall a. KeyOf LabelMap -&gt; LabelMap a -&gt; Maybe a
forall (map :: * -&gt; *) a.
IsMap map =&gt;
KeyOf map -&gt; map a -&gt; Maybe a
</span><a href="GHC.Cmm.Dataflow.Collections.html#mapLookup"><span class="hs-identifier hs-var">mapLookup</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmGraph -&gt; BlockId
forall (n :: Extensibility -&gt; Extensibility -&gt; *).
GenCmmGraph n -&gt; BlockId
</span><a href="GHC.Cmm.html#g_entry"><span class="hs-identifier hs-var">g_entry</span></a></span><span> </span><span class="annot"><span class="annottext">CmmGraph
</span><a href="#local-6989586621681858054"><span class="hs-identifier hs-var">graph</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LabelMap RawCmmStatics
</span><a href="#local-6989586621681858051"><span class="hs-identifier hs-var">infos</span></a></span><span>
</span><span id="line-61"></span><span>        </span><span id="local-6989586621681858063"><span class="annot"><span class="annottext">proc :: LlvmCmmDecl
</span><a href="#local-6989586621681858063"><span class="hs-identifier hs-var hs-var">proc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe RawCmmStatics
-&gt; CLabel -&gt; [GlobalReg] -&gt; ListGraph LlvmStatement -&gt; LlvmCmmDecl
forall d h g. h -&gt; CLabel -&gt; [GlobalReg] -&gt; g -&gt; GenCmmDecl d h g
</span><a href="GHC.Cmm.html#CmmProc"><span class="hs-identifier hs-var">CmmProc</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe RawCmmStatics
</span><a href="#local-6989586621681858060"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621681858052"><span class="hs-identifier hs-var">lbl</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalReg]
</span><a href="#local-6989586621681858053"><span class="hs-identifier hs-var">live</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LlvmBasicBlock] -&gt; ListGraph LlvmStatement
forall i. [GenBasicBlock i] -&gt; ListGraph i
</span><a href="GHC.Cmm.html#ListGraph"><span class="hs-identifier hs-var">ListGraph</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmBasicBlock]
</span><a href="#local-6989586621681858057"><span class="hs-identifier hs-var">lmblocks</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-62"></span><span>    </span><span class="annot"><span class="annottext">[LlvmCmmDecl] -&gt; LlvmM [LlvmCmmDecl]
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmCmmDecl
</span><a href="#local-6989586621681858063"><span class="hs-identifier hs-var">proc</span></a></span><span class="annot"><span class="annottext">LlvmCmmDecl -&gt; [LlvmCmmDecl] -&gt; [LlvmCmmDecl]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858058"><span class="hs-identifier hs-var">lmdata</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genLlvmProc"><span class="hs-identifier hs-var">genLlvmProc</span></a></span><span> </span><span class="annot"><span class="annottext">RawCmmDecl
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; LlvmM [LlvmCmmDecl]
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genLlvmProc: case that shouldn't reach here!&quot;</span></span><span>
</span><span id="line-65"></span><span>
</span><span id="line-66"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-67"></span><span class="annot"><span class="hs-comment">-- * Block code generation</span></span><span>
</span><span id="line-68"></span><span class="hs-comment">--</span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span class="hs-comment">-- | Generate code for a list of blocks that make up a complete</span><span>
</span><span id="line-71"></span><span class="hs-comment">-- procedure. The first block in the list is expected to be the entry</span><span>
</span><span id="line-72"></span><span class="hs-comment">-- point.</span><span>
</span><span id="line-73"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#basicBlocksCodeGen"><span class="hs-identifier hs-type">basicBlocksCodeGen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LiveGlobalRegs"><span class="hs-identifier hs-type">LiveGlobalRegs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.html#CmmBlock"><span class="hs-identifier hs-type">CmmBlock</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-74"></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmBasicBlock"><span class="hs-identifier hs-type">LlvmBasicBlock</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmCmmDecl"><span class="hs-identifier hs-type">LlvmCmmDecl</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span id="basicBlocksCodeGen"><span class="annot"><span class="annottext">basicBlocksCodeGen :: [GlobalReg]
-&gt; [CmmBlock] -&gt; LlvmM ([LlvmBasicBlock], [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#basicBlocksCodeGen"><span class="hs-identifier hs-var hs-var">basicBlocksCodeGen</span></a></span></span><span> </span><span class="annot"><span class="annottext">[GlobalReg]
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-special">[</span><span class="hs-special">]</span><span>                     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; LlvmM ([LlvmBasicBlock], [LlvmCmmDecl])
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;no entry block!&quot;</span></span><span>
</span><span id="line-76"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#basicBlocksCodeGen"><span class="hs-identifier hs-var">basicBlocksCodeGen</span></a></span><span> </span><span id="local-6989586621681858067"><span class="annot"><span class="annottext">[GlobalReg]
</span><a href="#local-6989586621681858067"><span class="hs-identifier hs-var">live</span></a></span></span><span> </span><span id="local-6989586621681858068"><span class="annot"><span class="annottext">[CmmBlock]
</span><a href="#local-6989586621681858068"><span class="hs-identifier hs-var">cmmBlocks</span></a></span></span><span>
</span><span id="line-77"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-comment">-- Emit the prologue</span><span>
</span><span id="line-78"></span><span>       </span><span class="hs-comment">-- N.B. this must be its own block to ensure that the entry block of the</span><span>
</span><span id="line-79"></span><span>       </span><span class="hs-comment">-- procedure has no predecessors, as required by the LLVM IR. See #17589</span><span>
</span><span id="line-80"></span><span>       </span><span class="hs-comment">-- and #11649.</span><span>
</span><span id="line-81"></span><span>       </span><span id="local-6989586621681858069"><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621681858069"><span class="hs-identifier hs-var">bid</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM BlockId
forall (m :: * -&gt; *). MonadUnique m =&gt; m BlockId
</span><a href="GHC.Cmm.BlockId.html#newBlockId"><span class="hs-identifier hs-var">newBlockId</span></a></span><span>
</span><span id="line-82"></span><span>       </span><span class="hs-special">(</span><span id="local-6989586621681858071"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858071"><span class="hs-identifier hs-var">prologue</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858072"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858072"><span class="hs-identifier hs-var">prologueTops</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[GlobalReg] -&gt; [CmmBlock] -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#funPrologue"><span class="hs-identifier hs-var">funPrologue</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalReg]
</span><a href="#local-6989586621681858067"><span class="hs-identifier hs-var">live</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmBlock]
</span><a href="#local-6989586621681858068"><span class="hs-identifier hs-var">cmmBlocks</span></a></span><span>
</span><span id="line-83"></span><span>       </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858074"><span class="annot"><span class="annottext">entryBlock :: LlvmBasicBlock
</span><a href="#local-6989586621681858074"><span class="hs-identifier hs-var hs-var">entryBlock</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; [LlvmStatement] -&gt; LlvmBasicBlock
forall i. BlockId -&gt; [i] -&gt; GenBasicBlock i
</span><a href="GHC.Cmm.html#BasicBlock"><span class="hs-identifier hs-var">BasicBlock</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621681858069"><span class="hs-identifier hs-var">bid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmStatements -&gt; [LlvmStatement]
forall a. OrdList a -&gt; [a]
</span><a href="GHC.Data.OrdList.html#fromOL"><span class="hs-identifier hs-var">fromOL</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858071"><span class="hs-identifier hs-var">prologue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span>
</span><span id="line-85"></span><span>       </span><span class="hs-comment">-- Generate code</span><span>
</span><span id="line-86"></span><span>       </span><span class="hs-special">(</span><span id="local-6989586621681858077"><span class="annot"><span class="annottext">[LlvmBasicBlock]
</span><a href="#local-6989586621681858077"><span class="hs-identifier hs-var">blocks</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858078"><span class="annot"><span class="annottext">[[LlvmCmmDecl]]
</span><a href="#local-6989586621681858078"><span class="hs-identifier hs-var">topss</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">([(LlvmBasicBlock, [LlvmCmmDecl])]
 -&gt; ([LlvmBasicBlock], [[LlvmCmmDecl]]))
-&gt; LlvmM [(LlvmBasicBlock, [LlvmCmmDecl])]
-&gt; LlvmM ([LlvmBasicBlock], [[LlvmCmmDecl]])
forall a b. (a -&gt; b) -&gt; LlvmM a -&gt; LlvmM b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#fmap/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">[(LlvmBasicBlock, [LlvmCmmDecl])]
-&gt; ([LlvmBasicBlock], [[LlvmCmmDecl]])
forall a b. [(a, b)] -&gt; ([a], [b])
</span><a href="../../base-4.18.3.0/src/GHC.List.html#unzip/GHC.List.html#unzip"><span class="hs-identifier hs-var">unzip</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmM [(LlvmBasicBlock, [LlvmCmmDecl])]
 -&gt; LlvmM ([LlvmBasicBlock], [[LlvmCmmDecl]]))
-&gt; LlvmM [(LlvmBasicBlock, [LlvmCmmDecl])]
-&gt; LlvmM ([LlvmBasicBlock], [[LlvmCmmDecl]])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(CmmBlock -&gt; LlvmM (LlvmBasicBlock, [LlvmCmmDecl]))
-&gt; [CmmBlock] -&gt; LlvmM [(LlvmBasicBlock, [LlvmCmmDecl])]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="../../base-4.18.3.0/src/Data.Traversable.html#mapM/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">CmmBlock -&gt; LlvmM (LlvmBasicBlock, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#basicBlockCodeGen"><span class="hs-identifier hs-var">basicBlockCodeGen</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmBlock]
</span><a href="#local-6989586621681858068"><span class="hs-identifier hs-var">cmmBlocks</span></a></span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span>       </span><span class="hs-comment">-- Compose</span><span>
</span><span id="line-89"></span><span>       </span><span class="annot"><span class="annottext">([LlvmBasicBlock], [LlvmCmmDecl])
-&gt; LlvmM ([LlvmBasicBlock], [LlvmCmmDecl])
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmBasicBlock
</span><a href="#local-6989586621681858074"><span class="hs-identifier hs-var">entryBlock</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmBasicBlock -&gt; [LlvmBasicBlock] -&gt; [LlvmBasicBlock]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[LlvmBasicBlock]
</span><a href="#local-6989586621681858077"><span class="hs-identifier hs-var">blocks</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858072"><span class="hs-identifier hs-var">prologueTops</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl] -&gt; [LlvmCmmDecl] -&gt; [LlvmCmmDecl]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[[LlvmCmmDecl]] -&gt; [LlvmCmmDecl]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#concat/Data.Foldable.html#concat"><span class="hs-identifier hs-var">concat</span></a></span><span> </span><span class="annot"><span class="annottext">[[LlvmCmmDecl]]
</span><a href="#local-6989586621681858078"><span class="hs-identifier hs-var">topss</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span class="annot"><span class="hs-comment">-- | Generate code for one block</span></span><span>
</span><span id="line-93"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#basicBlockCodeGen"><span class="hs-identifier hs-type">basicBlockCodeGen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.html#CmmBlock"><span class="hs-identifier hs-type">CmmBlock</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmBasicBlock"><span class="hs-identifier hs-type">LlvmBasicBlock</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmCmmDecl"><span class="hs-identifier hs-type">LlvmCmmDecl</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span id="basicBlockCodeGen"><span class="annot"><span class="annottext">basicBlockCodeGen :: CmmBlock -&gt; LlvmM (LlvmBasicBlock, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#basicBlockCodeGen"><span class="hs-identifier hs-var hs-var">basicBlockCodeGen</span></a></span></span><span> </span><span id="local-6989586621681858083"><span class="annot"><span class="annottext">CmmBlock
</span><a href="#local-6989586621681858083"><span class="hs-identifier hs-var">block</span></a></span></span><span>
</span><span id="line-95"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmNode C O
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858084"><span class="annot"><span class="annottext">Block CmmNode O O
</span><a href="#local-6989586621681858084"><span class="hs-identifier hs-var">nodes</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858085"><span class="annot"><span class="annottext">CmmNode O C
</span><a href="#local-6989586621681858085"><span class="hs-identifier hs-var">tail</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmBlock -&gt; (CmmNode C O, Block CmmNode O O, CmmNode O C)
forall (n :: Extensibility -&gt; Extensibility -&gt; *).
Block n C C -&gt; (n C O, Block n O O, n O C)
</span><a href="GHC.Cmm.Dataflow.Block.html#blockSplit"><span class="hs-identifier hs-var">blockSplit</span></a></span><span> </span><span class="annot"><span class="annottext">CmmBlock
</span><a href="#local-6989586621681858083"><span class="hs-identifier hs-var">block</span></a></span><span>
</span><span id="line-96"></span><span>           </span><span id="local-6989586621681858087"><span class="annot"><span class="annottext">id :: BlockId
</span><a href="#local-6989586621681858087"><span class="hs-identifier hs-var hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmBlock -&gt; BlockId
forall (x :: Extensibility). Block CmmNode C x -&gt; BlockId
forall (thing :: Extensibility -&gt; Extensibility -&gt; *)
       (x :: Extensibility).
NonLocal thing =&gt;
thing C x -&gt; BlockId
</span><a href="GHC.Cmm.Dataflow.Graph.html#entryLabel"><span class="hs-identifier hs-var">entryLabel</span></a></span><span> </span><span class="annot"><span class="annottext">CmmBlock
</span><a href="#local-6989586621681858083"><span class="hs-identifier hs-var">block</span></a></span><span>
</span><span id="line-97"></span><span>       </span><span class="hs-special">(</span><span id="local-6989586621681858089"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858089"><span class="hs-identifier hs-var">mid_instrs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858090"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858090"><span class="hs-identifier hs-var">top</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[CmmNode O O] -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall (e :: Extensibility) (x :: Extensibility).
[CmmNode e x] -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#stmtsToInstrs"><span class="hs-identifier hs-var">stmtsToInstrs</span></a></span><span> </span><span class="annot"><span class="annottext">([CmmNode O O] -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl]))
-&gt; [CmmNode O O] -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Block CmmNode O O -&gt; [CmmNode O O]
forall (n :: Extensibility -&gt; Extensibility -&gt; *).
Block n O O -&gt; [n O O]
</span><a href="GHC.Cmm.Dataflow.Block.html#blockToList"><span class="hs-identifier hs-var">blockToList</span></a></span><span> </span><span class="annot"><span class="annottext">Block CmmNode O O
</span><a href="#local-6989586621681858084"><span class="hs-identifier hs-var">nodes</span></a></span><span>
</span><span id="line-98"></span><span>       </span><span class="hs-special">(</span><span id="local-6989586621681858093"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858093"><span class="hs-identifier hs-var">tail_instrs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858094"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858094"><span class="hs-identifier hs-var">top'</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmNode O C -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall (e :: Extensibility) (x :: Extensibility).
CmmNode e x -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#stmtToInstrs"><span class="hs-identifier hs-var">stmtToInstrs</span></a></span><span> </span><span class="annot"><span class="annottext">CmmNode O C
</span><a href="#local-6989586621681858085"><span class="hs-identifier hs-var">tail</span></a></span><span>
</span><span id="line-99"></span><span>       </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858096"><span class="annot"><span class="annottext">instrs :: [LlvmStatement]
</span><a href="#local-6989586621681858096"><span class="hs-identifier hs-var hs-var">instrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; [LlvmStatement]
forall a. OrdList a -&gt; [a]
</span><a href="GHC.Data.OrdList.html#fromOL"><span class="hs-identifier hs-var">fromOL</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858089"><span class="hs-identifier hs-var">mid_instrs</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatements -&gt; LlvmStatements
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858093"><span class="hs-identifier hs-var">tail_instrs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-100"></span><span>       </span><span class="annot"><span class="annottext">(LlvmBasicBlock, [LlvmCmmDecl])
-&gt; LlvmM (LlvmBasicBlock, [LlvmCmmDecl])
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BlockId -&gt; [LlvmStatement] -&gt; LlvmBasicBlock
forall i. BlockId -&gt; [i] -&gt; GenBasicBlock i
</span><a href="GHC.Cmm.html#BasicBlock"><span class="hs-identifier hs-var">BasicBlock</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621681858087"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmStatement]
</span><a href="#local-6989586621681858096"><span class="hs-identifier hs-var">instrs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858094"><span class="hs-identifier hs-var">top'</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl] -&gt; [LlvmCmmDecl] -&gt; [LlvmCmmDecl]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858090"><span class="hs-identifier hs-var">top</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-103"></span><span class="annot"><span class="hs-comment">-- * CmmNode code generation</span></span><span>
</span><span id="line-104"></span><span class="hs-comment">--</span><span>
</span><span id="line-105"></span><span>
</span><span id="line-106"></span><span class="hs-comment">-- A statement conversion return data.</span><span>
</span><span id="line-107"></span><span class="hs-comment">--   * LlvmStatements: The compiled LLVM statements.</span><span>
</span><span id="line-108"></span><span class="hs-comment">--   * LlvmCmmDecl: Any global data needed.</span><span>
</span><span id="line-109"></span><span class="hs-keyword">type</span><span> </span><span id="StmtData"><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#StmtData"><span class="hs-identifier hs-var">StmtData</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmStatements"><span class="hs-identifier hs-type">LlvmStatements</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmCmmDecl"><span class="hs-identifier hs-type">LlvmCmmDecl</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span class="annot"><span class="hs-comment">-- | Convert a list of CmmNode's to LlvmStatement's</span></span><span>
</span><span id="line-113"></span><span id="local-6989586621681857122"><span id="local-6989586621681857123"><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#stmtsToInstrs"><span class="hs-identifier hs-type">stmtsToInstrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Node.html#CmmNode"><span class="hs-identifier hs-type">CmmNode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681857122"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681857123"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#StmtData"><span class="hs-identifier hs-type">StmtData</span></a></span></span></span><span>
</span><span id="line-114"></span><span id="stmtsToInstrs"><span class="annot"><span class="annottext">stmtsToInstrs :: forall (e :: Extensibility) (x :: Extensibility).
[CmmNode e x] -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#stmtsToInstrs"><span class="hs-identifier hs-var hs-var">stmtsToInstrs</span></a></span></span><span> </span><span id="local-6989586621681858105"><span class="annot"><span class="annottext">[CmmNode e x]
</span><a href="#local-6989586621681858105"><span class="hs-identifier hs-var">stmts</span></a></span></span><span>
</span><span id="line-115"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681858106"><span class="annot"><span class="annottext">[LlvmStatements]
</span><a href="#local-6989586621681858106"><span class="hs-identifier hs-var">instrss</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858107"><span class="annot"><span class="annottext">[[LlvmCmmDecl]]
</span><a href="#local-6989586621681858107"><span class="hs-identifier hs-var">topss</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">([(LlvmStatements, [LlvmCmmDecl])]
 -&gt; ([LlvmStatements], [[LlvmCmmDecl]]))
-&gt; LlvmM [(LlvmStatements, [LlvmCmmDecl])]
-&gt; LlvmM ([LlvmStatements], [[LlvmCmmDecl]])
forall a b. (a -&gt; b) -&gt; LlvmM a -&gt; LlvmM b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#fmap/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">[(LlvmStatements, [LlvmCmmDecl])]
-&gt; ([LlvmStatements], [[LlvmCmmDecl]])
forall a b. [(a, b)] -&gt; ([a], [b])
</span><a href="../../base-4.18.3.0/src/GHC.List.html#unzip/GHC.List.html#unzip"><span class="hs-identifier hs-var">unzip</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmM [(LlvmStatements, [LlvmCmmDecl])]
 -&gt; LlvmM ([LlvmStatements], [[LlvmCmmDecl]]))
-&gt; LlvmM [(LlvmStatements, [LlvmCmmDecl])]
-&gt; LlvmM ([LlvmStatements], [[LlvmCmmDecl]])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(CmmNode e x -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl]))
-&gt; [CmmNode e x] -&gt; LlvmM [(LlvmStatements, [LlvmCmmDecl])]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="../../base-4.18.3.0/src/Data.Traversable.html#mapM/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">CmmNode e x -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall (e :: Extensibility) (x :: Extensibility).
CmmNode e x -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#stmtToInstrs"><span class="hs-identifier hs-var">stmtToInstrs</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmNode e x]
</span><a href="#local-6989586621681858105"><span class="hs-identifier hs-var">stmts</span></a></span><span>
</span><span id="line-116"></span><span>        </span><span class="annot"><span class="annottext">(LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LlvmStatements] -&gt; LlvmStatements
forall a. [OrdList a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#concatOL"><span class="hs-identifier hs-var">concatOL</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmStatements]
</span><a href="#local-6989586621681858106"><span class="hs-identifier hs-var">instrss</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[[LlvmCmmDecl]] -&gt; [LlvmCmmDecl]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#concat/Data.Foldable.html#concat"><span class="hs-identifier hs-var">concat</span></a></span><span> </span><span class="annot"><span class="annottext">[[LlvmCmmDecl]]
</span><a href="#local-6989586621681858107"><span class="hs-identifier hs-var">topss</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span>
</span><span id="line-119"></span><span class="annot"><span class="hs-comment">-- | Convert a CmmStmt to a list of LlvmStatement's</span></span><span>
</span><span id="line-120"></span><span id="local-6989586621681857125"><span id="local-6989586621681857126"><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#stmtToInstrs"><span class="hs-identifier hs-type">stmtToInstrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Node.html#CmmNode"><span class="hs-identifier hs-type">CmmNode</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681857125"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681857126"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#StmtData"><span class="hs-identifier hs-type">StmtData</span></a></span></span></span><span>
</span><span id="line-121"></span><span id="stmtToInstrs"><span class="annot"><span class="annottext">stmtToInstrs :: forall (e :: Extensibility) (x :: Extensibility).
CmmNode e x -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#stmtToInstrs"><span class="hs-identifier hs-var hs-var">stmtToInstrs</span></a></span></span><span> </span><span id="local-6989586621681858111"><span class="annot"><span class="annottext">CmmNode e x
</span><a href="#local-6989586621681858111"><span class="hs-identifier hs-var">stmt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CmmNode e x
</span><a href="#local-6989586621681858111"><span class="hs-identifier hs-var">stmt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span>    </span><span class="annot"><a href="GHC.Cmm.Node.html#CmmComment"><span class="hs-identifier hs-type">CmmComment</span></a></span><span> </span><span class="annot"><span class="annottext">LMString
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmStatements
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- nuke comments</span><span>
</span><span id="line-124"></span><span>    </span><span class="annot"><a href="GHC.Cmm.Node.html#CmmTick"><span class="hs-identifier hs-type">CmmTick</span></a></span><span>    </span><span class="annot"><span class="annottext">CmmTickish
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmStatements
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-125"></span><span>    </span><span class="annot"><a href="GHC.Cmm.Node.html#CmmUnwind"><span class="hs-identifier hs-type">CmmUnwind</span></a></span><span>  </span><span class="hs-special">{</span><span class="hs-special">}</span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmStatements
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span>    </span><span class="annot"><a href="GHC.Cmm.Node.html#CmmAssign"><span class="hs-identifier hs-type">CmmAssign</span></a></span><span> </span><span id="local-6989586621681858128"><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621681858128"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621681858129"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858129"><span class="hs-identifier hs-var">src</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CmmReg -&gt; CmmExpr -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genAssign"><span class="hs-identifier hs-var">genAssign</span></a></span><span> </span><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621681858128"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858129"><span class="hs-identifier hs-var">src</span></a></span><span>
</span><span id="line-128"></span><span>    </span><span class="annot"><a href="GHC.Cmm.Node.html#CmmStore"><span class="hs-identifier hs-type">CmmStore</span></a></span><span> </span><span id="local-6989586621681858134"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858134"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span id="local-6989586621681858135"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858135"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span id="local-6989586621681858136"><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681858136"><span class="hs-identifier hs-var">align</span></a></span></span><span>
</span><span id="line-129"></span><span>                         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CmmExpr
-&gt; CmmExpr
-&gt; AlignmentSpec
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genStore"><span class="hs-identifier hs-var">genStore</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858134"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858135"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681858136"><span class="hs-identifier hs-var">align</span></a></span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span>    </span><span class="annot"><a href="GHC.Cmm.Node.html#CmmBranch"><span class="hs-identifier hs-type">CmmBranch</span></a></span><span> </span><span id="local-6989586621681858141"><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621681858141"><span class="hs-identifier hs-var">id</span></a></span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genBranch"><span class="hs-identifier hs-var">genBranch</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621681858141"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-132"></span><span>    </span><span class="annot"><a href="GHC.Cmm.Node.html#CmmCondBranch"><span class="hs-identifier hs-type">CmmCondBranch</span></a></span><span> </span><span id="local-6989586621681858146"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858146"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span id="local-6989586621681858147"><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621681858147"><span class="hs-identifier hs-var">true</span></a></span></span><span> </span><span id="local-6989586621681858148"><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621681858148"><span class="hs-identifier hs-var">false</span></a></span></span><span> </span><span id="local-6989586621681858149"><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621681858149"><span class="hs-identifier hs-var">likely</span></a></span></span><span>
</span><span id="line-133"></span><span>                         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CmmExpr
-&gt; BlockId
-&gt; BlockId
-&gt; Maybe Bool
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genCondBranch"><span class="hs-identifier hs-var">genCondBranch</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858146"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621681858147"><span class="hs-identifier hs-var">true</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621681858148"><span class="hs-identifier hs-var">false</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621681858149"><span class="hs-identifier hs-var">likely</span></a></span><span>
</span><span id="line-134"></span><span>    </span><span class="annot"><a href="GHC.Cmm.Node.html#CmmSwitch"><span class="hs-identifier hs-type">CmmSwitch</span></a></span><span> </span><span id="local-6989586621681858154"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858154"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span id="local-6989586621681858155"><span class="annot"><span class="annottext">SwitchTargets
</span><a href="#local-6989586621681858155"><span class="hs-identifier hs-var">ids</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; SwitchTargets -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genSwitch"><span class="hs-identifier hs-var">genSwitch</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858154"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">SwitchTargets
</span><a href="#local-6989586621681858155"><span class="hs-identifier hs-var">ids</span></a></span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span>    </span><span class="hs-comment">-- Foreign Call</span><span>
</span><span id="line-137"></span><span>    </span><span class="annot"><a href="GHC.Cmm.Node.html#CmmUnsafeForeignCall"><span class="hs-identifier hs-type">CmmUnsafeForeignCall</span></a></span><span> </span><span id="local-6989586621681858160"><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621681858160"><span class="hs-identifier hs-var">target</span></a></span></span><span> </span><span id="local-6989586621681858161"><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621681858161"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span id="local-6989586621681858162"><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681858162"><span class="hs-identifier hs-var">args</span></a></span></span><span>
</span><span id="line-138"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ForeignTarget
-&gt; [CmmFormal]
-&gt; [CmmExpr]
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genCall"><span class="hs-identifier hs-var">genCall</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621681858160"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621681858161"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681858162"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span>    </span><span class="hs-comment">-- Tail call</span><span>
</span><span id="line-141"></span><span>    </span><span class="annot"><a href="GHC.Cmm.Node.html#CmmCall"><span class="hs-identifier hs-type">CmmCall</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cml_target :: CmmNode O C -&gt; CmmExpr
</span><a href="GHC.Cmm.Node.html#cml_target"><span class="hs-identifier hs-var">cml_target</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681858168"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858168"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-142"></span><span>              </span><span class="annot"><span class="annottext">cml_args_regs :: CmmNode O C -&gt; [GlobalReg]
</span><a href="GHC.Cmm.Node.html#cml_args_regs"><span class="hs-identifier hs-var">cml_args_regs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681858170"><span class="annot"><span class="annottext">[GlobalReg]
</span><a href="#local-6989586621681858170"><span class="hs-identifier hs-var">live</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; [GlobalReg] -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genJump"><span class="hs-identifier hs-var">genJump</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858168"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalReg]
</span><a href="#local-6989586621681858170"><span class="hs-identifier hs-var">live</span></a></span><span>
</span><span id="line-143"></span><span>
</span><span id="line-144"></span><span>    </span><span class="annot"><span class="annottext">CmmNode e x
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Llvm.CodeGen.stmtToInstrs&quot;</span></span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span class="annot"><span class="hs-comment">-- | Wrapper function to declare an instrinct function by function type</span></span><span>
</span><span id="line-147"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#getInstrinct2"><span class="hs-identifier hs-type">getInstrinct2</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LMString"><span class="hs-identifier hs-type">LMString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmType"><span class="hs-identifier hs-type">LlvmType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#ExprData"><span class="hs-identifier hs-type">ExprData</span></a></span><span>
</span><span id="line-148"></span><span id="getInstrinct2"><span class="annot"><span class="annottext">getInstrinct2 :: LMString -&gt; LlvmType -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#getInstrinct2"><span class="hs-identifier hs-var hs-var">getInstrinct2</span></a></span></span><span> </span><span id="local-6989586621681858173"><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858173"><span class="hs-identifier hs-var">fname</span></a></span></span><span> </span><span id="local-6989586621681858174"><span class="annot"><span class="annottext">fty :: LlvmType
</span><a href="#local-6989586621681858174"><span class="hs-identifier hs-var">fty</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Llvm.Types.html#LMFunction"><span class="hs-identifier hs-type">LMFunction</span></a></span><span> </span><span id="local-6989586621681858176"><span class="annot"><span class="annottext">LlvmFunctionDecl
</span><a href="#local-6989586621681858176"><span class="hs-identifier hs-var">funSig</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858177"><span class="annot"><span class="annottext">fv :: LlvmVar
</span><a href="#local-6989586621681858177"><span class="hs-identifier hs-var hs-var">fv</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LMString
-&gt; LlvmType
-&gt; LlvmLinkageType
-&gt; LMSection
-&gt; LMAlign
-&gt; LMConst
-&gt; LlvmVar
</span><a href="GHC.Llvm.Types.html#LMGlobalVar"><span class="hs-identifier hs-var">LMGlobalVar</span></a></span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858173"><span class="hs-identifier hs-var">fname</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858174"><span class="hs-identifier hs-var">fty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmFunctionDecl -&gt; LlvmLinkageType
</span><a href="GHC.Llvm.Types.html#funcLinkage"><span class="hs-identifier hs-var">funcLinkage</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmFunctionDecl
</span><a href="#local-6989586621681858176"><span class="hs-identifier hs-var">funSig</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LMSection
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">LMAlign
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">LMConst
</span><a href="GHC.Llvm.Types.html#Constant"><span class="hs-identifier hs-var">Constant</span></a></span><span>
</span><span id="line-151"></span><span>
</span><span id="line-152"></span><span>    </span><span id="local-6989586621681858181"><span class="annot"><span class="annottext">Maybe LlvmType
</span><a href="#local-6989586621681858181"><span class="hs-identifier hs-var">fn</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LMString -&gt; LlvmM (Maybe LlvmType)
forall key. Uniquable key =&gt; key -&gt; LlvmM (Maybe LlvmType)
</span><a href="GHC.CmmToLlvm.Base.html#funLookup"><span class="hs-identifier hs-var">funLookup</span></a></span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858173"><span class="hs-identifier hs-var">fname</span></a></span><span>
</span><span id="line-153"></span><span>    </span><span id="local-6989586621681858183"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858183"><span class="hs-identifier hs-var">tops</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe LlvmType
</span><a href="#local-6989586621681858181"><span class="hs-identifier hs-var">fn</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-154"></span><span>      </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-155"></span><span>        </span><span class="annot"><span class="annottext">[LlvmCmmDecl] -&gt; LlvmM [LlvmCmmDecl]
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-156"></span><span>      </span><span class="annot"><span class="annottext">Maybe LlvmType
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-157"></span><span>        </span><span class="annot"><span class="annottext">LMString -&gt; LlvmType -&gt; LlvmM ()
forall key. Uniquable key =&gt; key -&gt; LlvmType -&gt; LlvmM ()
</span><a href="GHC.CmmToLlvm.Base.html#funInsert"><span class="hs-identifier hs-var">funInsert</span></a></span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858173"><span class="hs-identifier hs-var">fname</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858174"><span class="hs-identifier hs-var">fty</span></a></span><span>
</span><span id="line-158"></span><span>        </span><span id="local-6989586621681858185"><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621681858185"><span class="hs-identifier hs-var">un</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM Unique
forall (m :: * -&gt; *). MonadUnique m =&gt; m Unique
</span><a href="GHC.Types.Unique.Supply.html#getUniqueM"><span class="hs-identifier hs-var">getUniqueM</span></a></span><span>
</span><span id="line-159"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858187"><span class="annot"><span class="annottext">lbl :: CLabel
</span><a href="#local-6989586621681858187"><span class="hs-identifier hs-var hs-var">lbl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Unique -&gt; CLabel
forall a. Uniquable a =&gt; a -&gt; CLabel
</span><a href="GHC.Cmm.CLabel.html#mkAsmTempLabel"><span class="hs-identifier hs-var">mkAsmTempLabel</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621681858185"><span class="hs-identifier hs-var">un</span></a></span><span>
</span><span id="line-160"></span><span>        </span><span class="annot"><span class="annottext">[LlvmCmmDecl] -&gt; LlvmM [LlvmCmmDecl]
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Section -&gt; [([LMGlobal], [LlvmType])] -&gt; LlvmCmmDecl
forall d h g. Section -&gt; d -&gt; GenCmmDecl d h g
</span><a href="GHC.Cmm.html#CmmData"><span class="hs-identifier hs-var">CmmData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SectionType -&gt; CLabel -&gt; Section
</span><a href="GHC.Cmm.html#Section"><span class="hs-identifier hs-var">Section</span></a></span><span> </span><span class="annot"><span class="annottext">SectionType
</span><a href="GHC.Cmm.html#Data"><span class="hs-identifier hs-var">Data</span></a></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621681858187"><span class="hs-identifier hs-var">lbl</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span class="hs-special">[</span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858174"><span class="hs-identifier hs-var">fty</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-161"></span><span>
</span><span id="line-162"></span><span>    </span><span class="annot"><span class="annottext">ExprData -&gt; LlvmM ExprData
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858177"><span class="hs-identifier hs-var">fv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858183"><span class="hs-identifier hs-var">tops</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#getInstrinct2"><span class="hs-identifier hs-var">getInstrinct2</span></a></span><span> </span><span class="annot"><span class="annottext">LMString
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; LlvmM ExprData
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Err.html#error/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;getInstrinct2: Non-function type!&quot;</span></span><span>
</span><span id="line-165"></span><span>
</span><span id="line-166"></span><span class="annot"><span class="hs-comment">-- | Declares an instrinct function by return and parameter types</span></span><span>
</span><span id="line-167"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#getInstrinct"><span class="hs-identifier hs-type">getInstrinct</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LMString"><span class="hs-identifier hs-type">LMString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmType"><span class="hs-identifier hs-type">LlvmType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmType"><span class="hs-identifier hs-type">LlvmType</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#ExprData"><span class="hs-identifier hs-type">ExprData</span></a></span><span>
</span><span id="line-168"></span><span id="getInstrinct"><span class="annot"><span class="annottext">getInstrinct :: LMString -&gt; LlvmType -&gt; [LlvmType] -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#getInstrinct"><span class="hs-identifier hs-var hs-var">getInstrinct</span></a></span></span><span> </span><span id="local-6989586621681858194"><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858194"><span class="hs-identifier hs-var">fname</span></a></span></span><span> </span><span id="local-6989586621681858195"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858195"><span class="hs-identifier hs-var">retTy</span></a></span></span><span> </span><span id="local-6989586621681858196"><span class="annot"><span class="annottext">[LlvmType]
</span><a href="#local-6989586621681858196"><span class="hs-identifier hs-var">parTys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-169"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858197"><span class="annot"><span class="annottext">funSig :: LlvmFunctionDecl
</span><a href="#local-6989586621681858197"><span class="hs-identifier hs-var hs-var">funSig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LMString
-&gt; LlvmLinkageType
-&gt; LlvmCallConvention
-&gt; LlvmType
-&gt; LlvmParameterListType
-&gt; [LlvmParameter]
-&gt; LMAlign
-&gt; LlvmFunctionDecl
</span><a href="GHC.Llvm.Types.html#LlvmFunctionDecl"><span class="hs-identifier hs-var">LlvmFunctionDecl</span></a></span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858194"><span class="hs-identifier hs-var">fname</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmLinkageType
</span><a href="GHC.Llvm.Types.html#ExternallyVisible"><span class="hs-identifier hs-var">ExternallyVisible</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCallConvention
</span><a href="GHC.Llvm.Types.html#CC_Ccc"><span class="hs-identifier hs-var">CC_Ccc</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858195"><span class="hs-identifier hs-var">retTy</span></a></span><span>
</span><span id="line-170"></span><span>                    </span><span class="annot"><span class="annottext">LlvmParameterListType
</span><a href="GHC.Llvm.Types.html#FixedArgs"><span class="hs-identifier hs-var">FixedArgs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LlvmType] -&gt; [LlvmParameter]
</span><a href="GHC.CmmToLlvm.Base.html#tysToParams"><span class="hs-identifier hs-var">tysToParams</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmType]
</span><a href="#local-6989586621681858196"><span class="hs-identifier hs-var">parTys</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LMAlign
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-171"></span><span>        </span><span id="local-6989586621681858203"><span class="annot"><span class="annottext">fty :: LlvmType
</span><a href="#local-6989586621681858203"><span class="hs-identifier hs-var hs-var">fty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmFunctionDecl -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#LMFunction"><span class="hs-identifier hs-var">LMFunction</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmFunctionDecl
</span><a href="#local-6989586621681858197"><span class="hs-identifier hs-var">funSig</span></a></span><span>
</span><span id="line-172"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">LMString -&gt; LlvmType -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#getInstrinct2"><span class="hs-identifier hs-var">getInstrinct2</span></a></span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858194"><span class="hs-identifier hs-var">fname</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858203"><span class="hs-identifier hs-var">fty</span></a></span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span class="annot"><span class="hs-comment">-- | Memory barrier instruction for LLVM &gt;= 3.0</span></span><span>
</span><span id="line-175"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#barrier"><span class="hs-identifier hs-type">barrier</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#StmtData"><span class="hs-identifier hs-type">StmtData</span></a></span><span>
</span><span id="line-176"></span><span id="barrier"><span class="annot"><span class="annottext">barrier :: LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#barrier"><span class="hs-identifier hs-var hs-var">barrier</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-177"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858205"><span class="annot"><span class="annottext">s :: LlvmStatement
</span><a href="#local-6989586621681858205"><span class="hs-identifier hs-var hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; LlvmSyncOrdering -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Fence"><span class="hs-identifier hs-var">Fence</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">LlvmSyncOrdering
</span><a href="GHC.Llvm.Syntax.html#SyncSeqCst"><span class="hs-identifier hs-var">SyncSeqCst</span></a></span><span>
</span><span id="line-178"></span><span>    </span><span class="annot"><span class="annottext">(LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmStatement -&gt; LlvmStatements
forall a. a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-var">unitOL</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858205"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-179"></span><span>
</span><span id="line-180"></span><span class="hs-comment">-- | Insert a 'barrier', unless the target platform is in the provided list of</span><span>
</span><span id="line-181"></span><span class="hs-comment">--   exceptions (where no code will be emitted instead).</span><span>
</span><span id="line-182"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#barrierUnless"><span class="hs-identifier hs-type">barrierUnless</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../../ghc-boot-9.6.7/src/GHC.Platform.ArchOS.html#Arch/GHC.Platform.ArchOS.html#Arch"><span class="hs-identifier hs-type">Arch</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#StmtData"><span class="hs-identifier hs-type">StmtData</span></a></span><span>
</span><span id="line-183"></span><span id="barrierUnless"><span class="annot"><span class="annottext">barrierUnless :: [Arch] -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#barrierUnless"><span class="hs-identifier hs-var hs-var">barrierUnless</span></a></span></span><span> </span><span id="local-6989586621681858210"><span class="annot"><span class="annottext">[Arch]
</span><a href="#local-6989586621681858210"><span class="hs-identifier hs-var">exs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-184"></span><span>    </span><span id="local-6989586621681858211"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681858211"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM Platform
</span><a href="GHC.CmmToLlvm.Base.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-185"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Arch
</span><a href="GHC.Platform.html#platformArch"><span class="hs-identifier hs-var">platformArch</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681858211"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">Arch -&gt; [Arch] -&gt; Bool
forall a. Eq a =&gt; a -&gt; [a] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#elem/Data.Foldable.html#elem"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="annot"><span class="annottext">[Arch]
</span><a href="#local-6989586621681858210"><span class="hs-identifier hs-var">exs</span></a></span><span>
</span><span id="line-186"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">(LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmStatements
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#barrier"><span class="hs-identifier hs-var">barrier</span></a></span><span>
</span><span id="line-188"></span><span>
</span><span id="line-189"></span><span class="annot"><span class="hs-comment">-- | Foreign Calls</span></span><span>
</span><span id="line-190"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCall"><span class="hs-identifier hs-type">genCall</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Node.html#ForeignTarget"><span class="hs-identifier hs-type">ForeignTarget</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Node.html#CmmFormal"><span class="hs-identifier hs-type">CmmFormal</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Node.html#CmmActual"><span class="hs-identifier hs-type">CmmActual</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#StmtData"><span class="hs-identifier hs-type">StmtData</span></a></span><span>
</span><span id="line-191"></span><span>
</span><span id="line-192"></span><span class="hs-comment">-- Barriers need to be handled specially as they are implemented as LLVM</span><span>
</span><span id="line-193"></span><span class="hs-comment">-- intrinsic functions.</span><span>
</span><span id="line-194"></span><span id="genCall"><span class="annot"><span class="annottext">genCall :: ForeignTarget
-&gt; [CmmFormal]
-&gt; [CmmExpr]
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genCall"><span class="hs-identifier hs-var hs-var">genCall</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_ReadBarrier"><span class="hs-identifier hs-var">MO_ReadBarrier</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-195"></span><span>    </span><span class="annot"><span class="annottext">[Arch] -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#barrierUnless"><span class="hs-identifier hs-var">barrierUnless</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Arch
</span><a href="../../ghc-boot-9.6.7/src/GHC.Platform.ArchOS.html#ArchX86/GHC.Platform.ArchOS.html#ArchX86"><span class="hs-identifier hs-var">ArchX86</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Arch
</span><a href="../../ghc-boot-9.6.7/src/GHC.Platform.ArchOS.html#ArchX86_64/GHC.Platform.ArchOS.html#ArchX86_64"><span class="hs-identifier hs-var">ArchX86_64</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-196"></span><span>
</span><span id="line-197"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCall"><span class="hs-identifier hs-var">genCall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_WriteBarrier"><span class="hs-identifier hs-var">MO_WriteBarrier</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-198"></span><span>    </span><span class="annot"><span class="annottext">[Arch] -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#barrierUnless"><span class="hs-identifier hs-var">barrierUnless</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Arch
</span><a href="../../ghc-boot-9.6.7/src/GHC.Platform.ArchOS.html#ArchX86/GHC.Platform.ArchOS.html#ArchX86"><span class="hs-identifier hs-var">ArchX86</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Arch
</span><a href="../../ghc-boot-9.6.7/src/GHC.Platform.ArchOS.html#ArchX86_64/GHC.Platform.ArchOS.html#ArchX86_64"><span class="hs-identifier hs-var">ArchX86_64</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-199"></span><span>
</span><span id="line-200"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCall"><span class="hs-identifier hs-var">genCall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_Touch"><span class="hs-identifier hs-var">MO_Touch</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-201"></span><span>    </span><span class="annot"><span class="annottext">(LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmStatements
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-202"></span><span>
</span><span id="line-203"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCall"><span class="hs-identifier hs-var">genCall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_UF_Conv"><span class="hs-identifier hs-type">MO_UF_Conv</span></a></span><span> </span><span id="local-6989586621681858223"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858223"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681858224"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858224"><span class="hs-identifier hs-var">dst</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681858225"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858225"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WriterT LlvmAccum LlvmM () -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#runStmtsDecls"><span class="hs-identifier hs-var">runStmtsDecls</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT LlvmAccum LlvmM ()
 -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl]))
-&gt; WriterT LlvmAccum LlvmM ()
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-204"></span><span>    </span><span id="local-6989586621681858227"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858227"><span class="hs-identifier hs-var">dstV</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmReg -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#getCmmRegW"><span class="hs-identifier hs-var">getCmmRegW</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmFormal -&gt; CmmReg
</span><a href="GHC.Cmm.Reg.html#CmmLocal"><span class="hs-identifier hs-var">CmmLocal</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858224"><span class="hs-identifier hs-var">dst</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-205"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858230"><span class="annot"><span class="annottext">ty :: LlvmType
</span><a href="#local-6989586621681858230"><span class="hs-identifier hs-var hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#cmmToLlvmType"><span class="hs-identifier hs-var">cmmToLlvmType</span></a></span><span> </span><span class="annot"><span class="annottext">(CmmType -&gt; LlvmType) -&gt; CmmType -&gt; LlvmType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal -&gt; CmmType
</span><a href="GHC.Cmm.Reg.html#localRegType"><span class="hs-identifier hs-var">localRegType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858224"><span class="hs-identifier hs-var">dst</span></a></span><span>
</span><span id="line-206"></span><span>        </span><span id="local-6989586621681858233"><span class="annot"><span class="annottext">width :: LlvmType
</span><a href="#local-6989586621681858233"><span class="hs-identifier hs-var hs-var">width</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmFloat"><span class="hs-identifier hs-var">widthToLlvmFloat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858223"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-207"></span><span>    </span><span id="local-6989586621681858235"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858235"><span class="hs-identifier hs-var">castV</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM LlvmVar -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; WriterT LlvmAccum m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Class.html#lift/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmM LlvmVar -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmM LlvmVar -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#mkLocalVar"><span class="hs-identifier hs-var">mkLocalVar</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858230"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-208"></span><span>    </span><span id="local-6989586621681858238"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858238"><span class="hs-identifier hs-var">ve</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858225"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-209"></span><span>    </span><span class="annot"><span class="annottext">LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
</span><a href="GHC.CmmToLlvm.CodeGen.html#statement"><span class="hs-identifier hs-var">statement</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmStatement -&gt; WriterT LlvmAccum LlvmM ())
-&gt; LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmExpression -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Assignment"><span class="hs-identifier hs-var">Assignment</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858235"><span class="hs-identifier hs-var">castV</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmStatement)
-&gt; LlvmExpression -&gt; LlvmStatement
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Uitofp"><span class="hs-identifier hs-var">LM_Uitofp</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858238"><span class="hs-identifier hs-var">ve</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858233"><span class="hs-identifier hs-var">width</span></a></span><span>
</span><span id="line-210"></span><span>    </span><span class="annot"><span class="annottext">LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
</span><a href="GHC.CmmToLlvm.CodeGen.html#statement"><span class="hs-identifier hs-var">statement</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmStatement -&gt; WriterT LlvmAccum LlvmM ())
-&gt; LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LMAlign -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Store"><span class="hs-identifier hs-var">Store</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858235"><span class="hs-identifier hs-var">castV</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858227"><span class="hs-identifier hs-var">dstV</span></a></span><span> </span><span class="annot"><span class="annottext">LMAlign
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-211"></span><span>
</span><span id="line-212"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCall"><span class="hs-identifier hs-var">genCall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_UF_Conv"><span class="hs-identifier hs-type">MO_UF_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CmmFormal
</span><span class="hs-identifier">_</span></span><span class="hs-special">]</span><span> </span><span id="local-6989586621681858245"><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681858245"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-213"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl]))
-&gt; String -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genCall: Too many arguments to MO_UF_Conv. &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span>
</span><span id="line-214"></span><span>    </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Can only handle 1, given&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../base-4.18.3.0/src/GHC.Show.html#show/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[CmmExpr] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#length/Data.Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681858245"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.&quot;</span></span><span>
</span><span id="line-215"></span><span>
</span><span id="line-216"></span><span class="hs-comment">-- Handle prefetching data</span><span>
</span><span id="line-217"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCall"><span class="hs-identifier hs-var">genCall</span></a></span><span> </span><span id="local-6989586621681858248"><span class="annot"><span class="annottext">t :: ForeignTarget
</span><a href="#local-6989586621681858248"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Prefetch_Data"><span class="hs-identifier hs-type">MO_Prefetch_Data</span></a></span><span> </span><span id="local-6989586621681858250"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681858250"><span class="hs-identifier hs-var">localityInt</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621681858251"><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681858251"><span class="hs-identifier hs-var">args</span></a></span></span><span>
</span><span id="line-218"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681858250"><span class="hs-identifier hs-var">localityInt</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681858250"><span class="hs-identifier hs-var">localityInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WriterT LlvmAccum LlvmM () -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#runStmtsDecls"><span class="hs-identifier hs-var">runStmtsDecls</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT LlvmAccum LlvmM ()
 -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl]))
-&gt; WriterT LlvmAccum LlvmM ()
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-219"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858254"><span class="annot"><span class="annottext">argTy :: [LlvmType]
</span><a href="#local-6989586621681858254"><span class="hs-identifier hs-var hs-var">argTy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#i8Ptr"><span class="hs-identifier hs-var">i8Ptr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#i32"><span class="hs-identifier hs-var">i32</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#i32"><span class="hs-identifier hs-var">i32</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#i32"><span class="hs-identifier hs-var">i32</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-220"></span><span>        </span><span id="local-6989586621681858257"><span class="annot"><span class="annottext">funTy :: LMString -&gt; LlvmType
</span><a href="#local-6989586621681858257"><span class="hs-identifier hs-var hs-var">funTy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681858258"><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858258"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmFunctionDecl -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#LMFunction"><span class="hs-identifier hs-var">LMFunction</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmFunctionDecl -&gt; LlvmType) -&gt; LlvmFunctionDecl -&gt; LlvmType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LMString
-&gt; LlvmLinkageType
-&gt; LlvmCallConvention
-&gt; LlvmType
-&gt; LlvmParameterListType
-&gt; [LlvmParameter]
-&gt; LMAlign
-&gt; LlvmFunctionDecl
</span><a href="GHC.Llvm.Types.html#LlvmFunctionDecl"><span class="hs-identifier hs-var">LlvmFunctionDecl</span></a></span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858258"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmLinkageType
</span><a href="GHC.Llvm.Types.html#ExternallyVisible"><span class="hs-identifier hs-var">ExternallyVisible</span></a></span><span>
</span><span id="line-221"></span><span>                             </span><span class="annot"><span class="annottext">LlvmCallConvention
</span><a href="GHC.Llvm.Types.html#CC_Ccc"><span class="hs-identifier hs-var">CC_Ccc</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#LMVoid"><span class="hs-identifier hs-var">LMVoid</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmParameterListType
</span><a href="GHC.Llvm.Types.html#FixedArgs"><span class="hs-identifier hs-var">FixedArgs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LlvmType] -&gt; [LlvmParameter]
</span><a href="GHC.CmmToLlvm.Base.html#tysToParams"><span class="hs-identifier hs-var">tysToParams</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmType]
</span><a href="#local-6989586621681858254"><span class="hs-identifier hs-var">argTy</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LMAlign
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-222"></span><span>
</span><span id="line-223"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ForeignHint]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858260"><span class="annot"><span class="annottext">[ForeignHint]
</span><a href="#local-6989586621681858260"><span class="hs-identifier hs-var">arg_hints</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignTarget -&gt; ([ForeignHint], [ForeignHint])
</span><a href="GHC.Cmm.Node.html#foreignTargetHints"><span class="hs-identifier hs-var">foreignTargetHints</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621681858248"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-224"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858262"><span class="annot"><span class="annottext">args_hints' :: [(CmmExpr, ForeignHint)]
</span><a href="#local-6989586621681858262"><span class="hs-identifier hs-var hs-var">args_hints'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CmmExpr] -&gt; [ForeignHint] -&gt; [(CmmExpr, ForeignHint)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../../base-4.18.3.0/src/GHC.List.html#zip/GHC.List.html#zip"><span class="hs-identifier hs-var">zip</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681858251"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">[ForeignHint]
</span><a href="#local-6989586621681858260"><span class="hs-identifier hs-var">arg_hints</span></a></span><span>
</span><span id="line-225"></span><span>    </span><span id="local-6989586621681858263"><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858263"><span class="hs-identifier hs-var">argVars</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(CmmExpr, ForeignHint)]
-&gt; ([LlvmVar], LlvmStatements, [LlvmCmmDecl])
-&gt; WriterT LlvmAccum LlvmM [LlvmVar]
</span><a href="GHC.CmmToLlvm.CodeGen.html#arg_varsW"><span class="hs-identifier hs-var">arg_varsW</span></a></span><span> </span><span class="annot"><span class="annottext">[(CmmExpr, ForeignHint)]
</span><a href="#local-6989586621681858262"><span class="hs-identifier hs-var">args_hints'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-226"></span><span>    </span><span id="local-6989586621681858265"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858265"><span class="hs-identifier hs-var">fptr</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#liftExprData"><span class="hs-identifier hs-var">liftExprData</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmM ExprData -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmM ExprData -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(LMString -&gt; LlvmType) -&gt; ForeignTarget -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#getFunPtr"><span class="hs-identifier hs-var">getFunPtr</span></a></span><span> </span><span class="annot"><span class="annottext">LMString -&gt; LlvmType
</span><a href="#local-6989586621681858257"><span class="hs-identifier hs-var">funTy</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621681858248"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-227"></span><span>    </span><span id="local-6989586621681858268"><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858268"><span class="hs-identifier hs-var">argVars'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Signage
-&gt; [(LlvmVar, LlvmType)] -&gt; WriterT LlvmAccum LlvmM [LlvmVar]
</span><a href="GHC.CmmToLlvm.CodeGen.html#castVarsW"><span class="hs-identifier hs-var">castVarsW</span></a></span><span> </span><span class="annot"><span class="annottext">Signage
</span><a href="GHC.CmmToLlvm.CodeGen.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">([(LlvmVar, LlvmType)] -&gt; WriterT LlvmAccum LlvmM [LlvmVar])
-&gt; [(LlvmVar, LlvmType)] -&gt; WriterT LlvmAccum LlvmM [LlvmVar]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmVar] -&gt; [LlvmType] -&gt; [(LlvmVar, LlvmType)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../../base-4.18.3.0/src/GHC.List.html#zip/GHC.List.html#zip"><span class="hs-identifier hs-var">zip</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858263"><span class="hs-identifier hs-var">argVars</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmType]
</span><a href="#local-6989586621681858254"><span class="hs-identifier hs-var">argTy</span></a></span><span>
</span><span id="line-228"></span><span>
</span><span id="line-229"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858270"><span class="annot"><span class="annottext">argSuffix :: [LlvmVar]
</span><a href="#local-6989586621681858270"><span class="hs-identifier hs-var hs-var">argSuffix</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LlvmType -&gt; Integer -&gt; LlvmVar
forall a. Integral a =&gt; LlvmType -&gt; a -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#mkIntLit"><span class="hs-identifier hs-var">mkIntLit</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#i32"><span class="hs-identifier hs-var">i32</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Int -&gt; LlvmVar
forall a. Integral a =&gt; LlvmType -&gt; a -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#mkIntLit"><span class="hs-identifier hs-var">mkIntLit</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#i32"><span class="hs-identifier hs-var">i32</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681858250"><span class="hs-identifier hs-var">localityInt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Integer -&gt; LlvmVar
forall a. Integral a =&gt; LlvmType -&gt; a -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#mkIntLit"><span class="hs-identifier hs-var">mkIntLit</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#i32"><span class="hs-identifier hs-var">i32</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span class="hs-special">]</span><span>
</span><span id="line-230"></span><span>    </span><span class="annot"><span class="annottext">LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
</span><a href="GHC.CmmToLlvm.CodeGen.html#statement"><span class="hs-identifier hs-var">statement</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmStatement -&gt; WriterT LlvmAccum LlvmM ())
-&gt; LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmExpression -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Expr"><span class="hs-identifier hs-var">Expr</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmStatement)
-&gt; LlvmExpression -&gt; LlvmStatement
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCallType
-&gt; LlvmVar -&gt; [LlvmVar] -&gt; [LlvmFuncAttr] -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Call"><span class="hs-identifier hs-var">Call</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCallType
</span><a href="GHC.Llvm.Types.html#StdCall"><span class="hs-identifier hs-var">StdCall</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858265"><span class="hs-identifier hs-var">fptr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858268"><span class="hs-identifier hs-var">argVars'</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmVar] -&gt; [LlvmVar] -&gt; [LlvmVar]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858270"><span class="hs-identifier hs-var">argSuffix</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-231"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl]))
-&gt; String -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;prefetch locality level integer must be between 0 and 3, given: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../base-4.18.3.0/src/GHC.Show.html#show/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681858250"><span class="hs-identifier hs-var">localityInt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-232"></span><span>
</span><span id="line-233"></span><span class="hs-comment">-- Handle PopCnt, Clz, Ctz, and BSwap that need to only convert arg</span><span>
</span><span id="line-234"></span><span class="hs-comment">-- and return types</span><span>
</span><span id="line-235"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCall"><span class="hs-identifier hs-var">genCall</span></a></span><span> </span><span id="local-6989586621681858275"><span class="annot"><span class="annottext">t :: ForeignTarget
</span><a href="#local-6989586621681858275"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_PopCnt"><span class="hs-identifier hs-type">MO_PopCnt</span></a></span><span> </span><span id="local-6989586621681858277"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858277"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681858278"><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621681858278"><span class="hs-identifier hs-var">dsts</span></a></span></span><span> </span><span id="local-6989586621681858279"><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681858279"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-236"></span><span>    </span><span class="annot"><span class="annottext">Width
-&gt; ForeignTarget
-&gt; [CmmFormal]
-&gt; [CmmExpr]
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genCallSimpleCast"><span class="hs-identifier hs-var">genCallSimpleCast</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858277"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621681858275"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621681858278"><span class="hs-identifier hs-var">dsts</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681858279"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-237"></span><span>
</span><span id="line-238"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCall"><span class="hs-identifier hs-var">genCall</span></a></span><span> </span><span id="local-6989586621681858281"><span class="annot"><span class="annottext">t :: ForeignTarget
</span><a href="#local-6989586621681858281"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Pdep"><span class="hs-identifier hs-type">MO_Pdep</span></a></span><span> </span><span id="local-6989586621681858283"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858283"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681858284"><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621681858284"><span class="hs-identifier hs-var">dsts</span></a></span></span><span> </span><span id="local-6989586621681858285"><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681858285"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-239"></span><span>    </span><span class="annot"><span class="annottext">Width
-&gt; ForeignTarget
-&gt; [CmmFormal]
-&gt; [CmmExpr]
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genCallSimpleCast2"><span class="hs-identifier hs-var">genCallSimpleCast2</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858283"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621681858281"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621681858284"><span class="hs-identifier hs-var">dsts</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681858285"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-240"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCall"><span class="hs-identifier hs-var">genCall</span></a></span><span> </span><span id="local-6989586621681858287"><span class="annot"><span class="annottext">t :: ForeignTarget
</span><a href="#local-6989586621681858287"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Pext"><span class="hs-identifier hs-type">MO_Pext</span></a></span><span> </span><span id="local-6989586621681858289"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858289"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681858290"><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621681858290"><span class="hs-identifier hs-var">dsts</span></a></span></span><span> </span><span id="local-6989586621681858291"><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681858291"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-241"></span><span>    </span><span class="annot"><span class="annottext">Width
-&gt; ForeignTarget
-&gt; [CmmFormal]
-&gt; [CmmExpr]
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genCallSimpleCast2"><span class="hs-identifier hs-var">genCallSimpleCast2</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858289"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621681858287"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621681858290"><span class="hs-identifier hs-var">dsts</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681858291"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-242"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCall"><span class="hs-identifier hs-var">genCall</span></a></span><span> </span><span id="local-6989586621681858292"><span class="annot"><span class="annottext">t :: ForeignTarget
</span><a href="#local-6989586621681858292"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Clz"><span class="hs-identifier hs-type">MO_Clz</span></a></span><span> </span><span id="local-6989586621681858294"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858294"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681858295"><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621681858295"><span class="hs-identifier hs-var">dsts</span></a></span></span><span> </span><span id="local-6989586621681858296"><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681858296"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-243"></span><span>    </span><span class="annot"><span class="annottext">Width
-&gt; ForeignTarget
-&gt; [CmmFormal]
-&gt; [CmmExpr]
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genCallSimpleCast"><span class="hs-identifier hs-var">genCallSimpleCast</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858294"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621681858292"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621681858295"><span class="hs-identifier hs-var">dsts</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681858296"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-244"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCall"><span class="hs-identifier hs-var">genCall</span></a></span><span> </span><span id="local-6989586621681858297"><span class="annot"><span class="annottext">t :: ForeignTarget
</span><a href="#local-6989586621681858297"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Ctz"><span class="hs-identifier hs-type">MO_Ctz</span></a></span><span> </span><span id="local-6989586621681858299"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858299"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681858300"><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621681858300"><span class="hs-identifier hs-var">dsts</span></a></span></span><span> </span><span id="local-6989586621681858301"><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681858301"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-245"></span><span>    </span><span class="annot"><span class="annottext">Width
-&gt; ForeignTarget
-&gt; [CmmFormal]
-&gt; [CmmExpr]
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genCallSimpleCast"><span class="hs-identifier hs-var">genCallSimpleCast</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858299"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621681858297"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621681858300"><span class="hs-identifier hs-var">dsts</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681858301"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-246"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCall"><span class="hs-identifier hs-var">genCall</span></a></span><span> </span><span id="local-6989586621681858302"><span class="annot"><span class="annottext">t :: ForeignTarget
</span><a href="#local-6989586621681858302"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_BSwap"><span class="hs-identifier hs-type">MO_BSwap</span></a></span><span> </span><span id="local-6989586621681858304"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858304"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681858305"><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621681858305"><span class="hs-identifier hs-var">dsts</span></a></span></span><span> </span><span id="local-6989586621681858306"><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681858306"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-247"></span><span>    </span><span class="annot"><span class="annottext">Width
-&gt; ForeignTarget
-&gt; [CmmFormal]
-&gt; [CmmExpr]
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genCallSimpleCast"><span class="hs-identifier hs-var">genCallSimpleCast</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858304"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621681858302"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621681858305"><span class="hs-identifier hs-var">dsts</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681858306"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-248"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCall"><span class="hs-identifier hs-var">genCall</span></a></span><span> </span><span id="local-6989586621681858307"><span class="annot"><span class="annottext">t :: ForeignTarget
</span><a href="#local-6989586621681858307"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_BRev"><span class="hs-identifier hs-type">MO_BRev</span></a></span><span> </span><span id="local-6989586621681858309"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858309"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681858310"><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621681858310"><span class="hs-identifier hs-var">dsts</span></a></span></span><span> </span><span id="local-6989586621681858311"><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681858311"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-249"></span><span>    </span><span class="annot"><span class="annottext">Width
-&gt; ForeignTarget
-&gt; [CmmFormal]
-&gt; [CmmExpr]
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genCallSimpleCast"><span class="hs-identifier hs-var">genCallSimpleCast</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858309"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621681858307"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621681858310"><span class="hs-identifier hs-var">dsts</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681858311"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-250"></span><span>
</span><span id="line-251"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCall"><span class="hs-identifier hs-var">genCall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_AtomicRMW"><span class="hs-identifier hs-type">MO_AtomicRMW</span></a></span><span> </span><span id="local-6989586621681858313"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858313"><span class="hs-identifier hs-var">width</span></a></span></span><span> </span><span id="local-6989586621681858314"><span class="annot"><span class="annottext">AtomicMachOp
</span><a href="#local-6989586621681858314"><span class="hs-identifier hs-var">amop</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681858315"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858315"><span class="hs-identifier hs-var">dst</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681858316"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858316"><span class="hs-identifier hs-var">addr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858317"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858317"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WriterT LlvmAccum LlvmM () -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#runStmtsDecls"><span class="hs-identifier hs-var">runStmtsDecls</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT LlvmAccum LlvmM ()
 -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl]))
-&gt; WriterT LlvmAccum LlvmM ()
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-252"></span><span>    </span><span id="local-6989586621681858318"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858318"><span class="hs-identifier hs-var">addrVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858316"><span class="hs-identifier hs-var">addr</span></a></span><span>
</span><span id="line-253"></span><span>    </span><span id="local-6989586621681858319"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858319"><span class="hs-identifier hs-var">nVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858317"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-254"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858320"><span class="annot"><span class="annottext">targetTy :: LlvmType
</span><a href="#local-6989586621681858320"><span class="hs-identifier hs-var hs-var">targetTy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmInt"><span class="hs-identifier hs-var">widthToLlvmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858313"><span class="hs-identifier hs-var">width</span></a></span><span>
</span><span id="line-255"></span><span>        </span><span id="local-6989586621681858322"><span class="annot"><span class="annottext">ptrExpr :: LlvmExpression
</span><a href="#local-6989586621681858322"><span class="hs-identifier hs-var hs-var">ptrExpr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Inttoptr"><span class="hs-identifier hs-var">LM_Inttoptr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858318"><span class="hs-identifier hs-var">addrVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#pLift"><span class="hs-identifier hs-var">pLift</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858320"><span class="hs-identifier hs-var">targetTy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-256"></span><span>    </span><span id="local-6989586621681858325"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858325"><span class="hs-identifier hs-var">ptrVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#pLift"><span class="hs-identifier hs-var">pLift</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858320"><span class="hs-identifier hs-var">targetTy</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmExpression
</span><a href="#local-6989586621681858322"><span class="hs-identifier hs-var">ptrExpr</span></a></span><span>
</span><span id="line-257"></span><span>    </span><span id="local-6989586621681858327"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858327"><span class="hs-identifier hs-var">dstVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmReg -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#getCmmRegW"><span class="hs-identifier hs-var">getCmmRegW</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmFormal -&gt; CmmReg
</span><a href="GHC.Cmm.Reg.html#CmmLocal"><span class="hs-identifier hs-var">CmmLocal</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858315"><span class="hs-identifier hs-var">dst</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-258"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858328"><span class="annot"><span class="annottext">op :: LlvmAtomicOp
</span><a href="#local-6989586621681858328"><span class="hs-identifier hs-var hs-var">op</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">AtomicMachOp
</span><a href="#local-6989586621681858314"><span class="hs-identifier hs-var">amop</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-259"></span><span>               </span><span class="annot"><span class="annottext">AtomicMachOp
</span><a href="GHC.Cmm.MachOp.html#AMO_Add"><span class="hs-identifier hs-var">AMO_Add</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmAtomicOp
</span><a href="GHC.Llvm.Syntax.html#LAO_Add"><span class="hs-identifier hs-var">LAO_Add</span></a></span><span>
</span><span id="line-260"></span><span>               </span><span class="annot"><span class="annottext">AtomicMachOp
</span><a href="GHC.Cmm.MachOp.html#AMO_Sub"><span class="hs-identifier hs-var">AMO_Sub</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmAtomicOp
</span><a href="GHC.Llvm.Syntax.html#LAO_Sub"><span class="hs-identifier hs-var">LAO_Sub</span></a></span><span>
</span><span id="line-261"></span><span>               </span><span class="annot"><span class="annottext">AtomicMachOp
</span><a href="GHC.Cmm.MachOp.html#AMO_And"><span class="hs-identifier hs-var">AMO_And</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmAtomicOp
</span><a href="GHC.Llvm.Syntax.html#LAO_And"><span class="hs-identifier hs-var">LAO_And</span></a></span><span>
</span><span id="line-262"></span><span>               </span><span class="annot"><span class="annottext">AtomicMachOp
</span><a href="GHC.Cmm.MachOp.html#AMO_Nand"><span class="hs-identifier hs-var">AMO_Nand</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmAtomicOp
</span><a href="GHC.Llvm.Syntax.html#LAO_Nand"><span class="hs-identifier hs-var">LAO_Nand</span></a></span><span>
</span><span id="line-263"></span><span>               </span><span class="annot"><span class="annottext">AtomicMachOp
</span><a href="GHC.Cmm.MachOp.html#AMO_Or"><span class="hs-identifier hs-var">AMO_Or</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmAtomicOp
</span><a href="GHC.Llvm.Syntax.html#LAO_Or"><span class="hs-identifier hs-var">LAO_Or</span></a></span><span>
</span><span id="line-264"></span><span>               </span><span class="annot"><span class="annottext">AtomicMachOp
</span><a href="GHC.Cmm.MachOp.html#AMO_Xor"><span class="hs-identifier hs-var">AMO_Xor</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmAtomicOp
</span><a href="GHC.Llvm.Syntax.html#LAO_Xor"><span class="hs-identifier hs-var">LAO_Xor</span></a></span><span>
</span><span id="line-265"></span><span>    </span><span id="local-6989586621681858341"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858341"><span class="hs-identifier hs-var">retVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858320"><span class="hs-identifier hs-var">targetTy</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmAtomicOp
-&gt; LlvmVar -&gt; LlvmVar -&gt; LlvmSyncOrdering -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#AtomicRMW"><span class="hs-identifier hs-var">AtomicRMW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmAtomicOp
</span><a href="#local-6989586621681858328"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858325"><span class="hs-identifier hs-var">ptrVar</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858319"><span class="hs-identifier hs-var">nVar</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmSyncOrdering
</span><a href="GHC.Llvm.Syntax.html#SyncSeqCst"><span class="hs-identifier hs-var">SyncSeqCst</span></a></span><span>
</span><span id="line-266"></span><span>    </span><span class="annot"><span class="annottext">LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
</span><a href="GHC.CmmToLlvm.CodeGen.html#statement"><span class="hs-identifier hs-var">statement</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmStatement -&gt; WriterT LlvmAccum LlvmM ())
-&gt; LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LMAlign -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Store"><span class="hs-identifier hs-var">Store</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858341"><span class="hs-identifier hs-var">retVar</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858327"><span class="hs-identifier hs-var">dstVar</span></a></span><span> </span><span class="annot"><span class="annottext">LMAlign
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-267"></span><span>
</span><span id="line-268"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCall"><span class="hs-identifier hs-var">genCall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_AtomicRead"><span class="hs-identifier hs-type">MO_AtomicRead</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681858344"><span class="annot"><span class="annottext">MemoryOrdering
</span><a href="#local-6989586621681858344"><span class="hs-identifier hs-var">mem_ord</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681858345"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858345"><span class="hs-identifier hs-var">dst</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681858346"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858346"><span class="hs-identifier hs-var">addr</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WriterT LlvmAccum LlvmM () -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#runStmtsDecls"><span class="hs-identifier hs-var">runStmtsDecls</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT LlvmAccum LlvmM ()
 -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl]))
-&gt; WriterT LlvmAccum LlvmM ()
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-269"></span><span>    </span><span id="local-6989586621681858347"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858347"><span class="hs-identifier hs-var">dstV</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmReg -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#getCmmRegW"><span class="hs-identifier hs-var">getCmmRegW</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmFormal -&gt; CmmReg
</span><a href="GHC.Cmm.Reg.html#CmmLocal"><span class="hs-identifier hs-var">CmmLocal</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858345"><span class="hs-identifier hs-var">dst</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-270"></span><span>    </span><span id="local-6989586621681858348"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858348"><span class="hs-identifier hs-var">v1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Atomic
-&gt; CmmExpr
-&gt; CmmType
-&gt; AlignmentSpec
-&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#genLoadW"><span class="hs-identifier hs-var">genLoadW</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MemoryOrdering -&gt; Atomic
forall a. a -&gt; Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">MemoryOrdering
</span><a href="#local-6989586621681858344"><span class="hs-identifier hs-var">mem_ord</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858346"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmFormal -&gt; CmmType
</span><a href="GHC.Cmm.Reg.html#localRegType"><span class="hs-identifier hs-var">localRegType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858345"><span class="hs-identifier hs-var">dst</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="GHC.Cmm.Expr.html#NaturallyAligned"><span class="hs-identifier hs-var">NaturallyAligned</span></a></span><span>
</span><span id="line-271"></span><span>    </span><span class="annot"><span class="annottext">LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
</span><a href="GHC.CmmToLlvm.CodeGen.html#statement"><span class="hs-identifier hs-var">statement</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmStatement -&gt; WriterT LlvmAccum LlvmM ())
-&gt; LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LMAlign -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Store"><span class="hs-identifier hs-var">Store</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858348"><span class="hs-identifier hs-var">v1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858347"><span class="hs-identifier hs-var">dstV</span></a></span><span> </span><span class="annot"><span class="annottext">LMAlign
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-272"></span><span>
</span><span id="line-273"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCall"><span class="hs-identifier hs-var">genCall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Cmpxchg"><span class="hs-identifier hs-type">MO_Cmpxchg</span></a></span><span> </span><span id="local-6989586621681858352"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858352"><span class="hs-identifier hs-var">_width</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-274"></span><span>        </span><span class="hs-special">[</span><span id="local-6989586621681858353"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858353"><span class="hs-identifier hs-var">dst</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681858354"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858354"><span class="hs-identifier hs-var">addr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858355"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858355"><span class="hs-identifier hs-var">old</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858356"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858356"><span class="hs-identifier hs-var">new</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WriterT LlvmAccum LlvmM () -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#runStmtsDecls"><span class="hs-identifier hs-var">runStmtsDecls</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT LlvmAccum LlvmM ()
 -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl]))
-&gt; WriterT LlvmAccum LlvmM ()
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-275"></span><span>    </span><span id="local-6989586621681858357"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858357"><span class="hs-identifier hs-var">addrVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858354"><span class="hs-identifier hs-var">addr</span></a></span><span>
</span><span id="line-276"></span><span>    </span><span id="local-6989586621681858358"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858358"><span class="hs-identifier hs-var">oldVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858355"><span class="hs-identifier hs-var">old</span></a></span><span>
</span><span id="line-277"></span><span>    </span><span id="local-6989586621681858359"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858359"><span class="hs-identifier hs-var">newVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858356"><span class="hs-identifier hs-var">new</span></a></span><span>
</span><span id="line-278"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858360"><span class="annot"><span class="annottext">targetTy :: LlvmType
</span><a href="#local-6989586621681858360"><span class="hs-identifier hs-var hs-var">targetTy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858358"><span class="hs-identifier hs-var">oldVar</span></a></span><span>
</span><span id="line-279"></span><span>        </span><span id="local-6989586621681858362"><span class="annot"><span class="annottext">ptrExpr :: LlvmExpression
</span><a href="#local-6989586621681858362"><span class="hs-identifier hs-var hs-var">ptrExpr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Inttoptr"><span class="hs-identifier hs-var">LM_Inttoptr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858357"><span class="hs-identifier hs-var">addrVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#pLift"><span class="hs-identifier hs-var">pLift</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858360"><span class="hs-identifier hs-var">targetTy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-280"></span><span>    </span><span id="local-6989586621681858363"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858363"><span class="hs-identifier hs-var">ptrVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#pLift"><span class="hs-identifier hs-var">pLift</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858360"><span class="hs-identifier hs-var">targetTy</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmExpression
</span><a href="#local-6989586621681858362"><span class="hs-identifier hs-var">ptrExpr</span></a></span><span>
</span><span id="line-281"></span><span>    </span><span id="local-6989586621681858364"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858364"><span class="hs-identifier hs-var">dstVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmReg -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#getCmmRegW"><span class="hs-identifier hs-var">getCmmRegW</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmFormal -&gt; CmmReg
</span><a href="GHC.Cmm.Reg.html#CmmLocal"><span class="hs-identifier hs-var">CmmLocal</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858353"><span class="hs-identifier hs-var">dst</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-282"></span><span>    </span><span id="local-6989586621681858365"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858365"><span class="hs-identifier hs-var">retVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LlvmType] -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#LMStructU"><span class="hs-identifier hs-var">LMStructU</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858360"><span class="hs-identifier hs-var">targetTy</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#i1"><span class="hs-identifier hs-var">i1</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-283"></span><span>              </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
-&gt; LlvmVar
-&gt; LlvmVar
-&gt; LlvmSyncOrdering
-&gt; LlvmSyncOrdering
-&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#CmpXChg"><span class="hs-identifier hs-var">CmpXChg</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858363"><span class="hs-identifier hs-var">ptrVar</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858358"><span class="hs-identifier hs-var">oldVar</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858359"><span class="hs-identifier hs-var">newVar</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmSyncOrdering
</span><a href="GHC.Llvm.Syntax.html#SyncSeqCst"><span class="hs-identifier hs-var">SyncSeqCst</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmSyncOrdering
</span><a href="GHC.Llvm.Syntax.html#SyncSeqCst"><span class="hs-identifier hs-var">SyncSeqCst</span></a></span><span>
</span><span id="line-284"></span><span>    </span><span id="local-6989586621681858369"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858369"><span class="hs-identifier hs-var">retVar'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858360"><span class="hs-identifier hs-var">targetTy</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; Int -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#ExtractV"><span class="hs-identifier hs-var">ExtractV</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858365"><span class="hs-identifier hs-var">retVar</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-285"></span><span>    </span><span class="annot"><span class="annottext">LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
</span><a href="GHC.CmmToLlvm.CodeGen.html#statement"><span class="hs-identifier hs-var">statement</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmStatement -&gt; WriterT LlvmAccum LlvmM ())
-&gt; LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LMAlign -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Store"><span class="hs-identifier hs-var">Store</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858369"><span class="hs-identifier hs-var">retVar'</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858364"><span class="hs-identifier hs-var">dstVar</span></a></span><span> </span><span class="annot"><span class="annottext">LMAlign
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-286"></span><span>
</span><span id="line-287"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCall"><span class="hs-identifier hs-var">genCall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Xchg"><span class="hs-identifier hs-type">MO_Xchg</span></a></span><span> </span><span id="local-6989586621681858372"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858372"><span class="hs-identifier hs-var">_width</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681858373"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858373"><span class="hs-identifier hs-var">dst</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681858374"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858374"><span class="hs-identifier hs-var">addr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858375"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858375"><span class="hs-identifier hs-var">val</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WriterT LlvmAccum LlvmM () -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#runStmtsDecls"><span class="hs-identifier hs-var">runStmtsDecls</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT LlvmAccum LlvmM ()
 -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl]))
-&gt; WriterT LlvmAccum LlvmM ()
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-288"></span><span>    </span><span id="local-6989586621681858376"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858376"><span class="hs-identifier hs-var">dstV</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmReg -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#getCmmRegW"><span class="hs-identifier hs-var">getCmmRegW</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmFormal -&gt; CmmReg
</span><a href="GHC.Cmm.Reg.html#CmmLocal"><span class="hs-identifier hs-var">CmmLocal</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858373"><span class="hs-identifier hs-var">dst</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Writer.Lazy.html#WriterT/Control.Monad.Trans.Writer.Lazy.html#WriterT"><span class="hs-identifier hs-type">WriterT</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmAccum"><span class="hs-identifier hs-type">LlvmAccum</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span>
</span><span id="line-289"></span><span>    </span><span id="local-6989586621681858377"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858377"><span class="hs-identifier hs-var">addrVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858374"><span class="hs-identifier hs-var">addr</span></a></span><span>
</span><span id="line-290"></span><span>    </span><span id="local-6989586621681858378"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858378"><span class="hs-identifier hs-var">valVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858375"><span class="hs-identifier hs-var">val</span></a></span><span>
</span><span id="line-291"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858379"><span class="annot"><span class="annottext">ptrTy :: LlvmType
</span><a href="#local-6989586621681858379"><span class="hs-identifier hs-var hs-var">ptrTy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#pLift"><span class="hs-identifier hs-var">pLift</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmType -&gt; LlvmType) -&gt; LlvmType -&gt; LlvmType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858378"><span class="hs-identifier hs-var">valVar</span></a></span><span>
</span><span id="line-292"></span><span>        </span><span id="local-6989586621681858380"><span class="annot"><span class="annottext">ptrExpr :: LlvmExpression
</span><a href="#local-6989586621681858380"><span class="hs-identifier hs-var hs-var">ptrExpr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Inttoptr"><span class="hs-identifier hs-var">LM_Inttoptr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858377"><span class="hs-identifier hs-var">addrVar</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858379"><span class="hs-identifier hs-var">ptrTy</span></a></span><span>
</span><span id="line-293"></span><span>    </span><span id="local-6989586621681858381"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858381"><span class="hs-identifier hs-var">ptrVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858379"><span class="hs-identifier hs-var">ptrTy</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmExpression
</span><a href="#local-6989586621681858380"><span class="hs-identifier hs-var">ptrExpr</span></a></span><span>
</span><span id="line-294"></span><span>    </span><span id="local-6989586621681858382"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858382"><span class="hs-identifier hs-var">resVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858378"><span class="hs-identifier hs-var">valVar</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmAtomicOp
-&gt; LlvmVar -&gt; LlvmVar -&gt; LlvmSyncOrdering -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#AtomicRMW"><span class="hs-identifier hs-var">AtomicRMW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmAtomicOp
</span><a href="GHC.Llvm.Syntax.html#LAO_Xchg"><span class="hs-identifier hs-var">LAO_Xchg</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858381"><span class="hs-identifier hs-var">ptrVar</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858378"><span class="hs-identifier hs-var">valVar</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmSyncOrdering
</span><a href="GHC.Llvm.Syntax.html#SyncSeqCst"><span class="hs-identifier hs-var">SyncSeqCst</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-295"></span><span>    </span><span class="annot"><span class="annottext">LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
</span><a href="GHC.CmmToLlvm.CodeGen.html#statement"><span class="hs-identifier hs-var">statement</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmStatement -&gt; WriterT LlvmAccum LlvmM ())
-&gt; LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LMAlign -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Store"><span class="hs-identifier hs-var">Store</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858382"><span class="hs-identifier hs-var">resVar</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858376"><span class="hs-identifier hs-var">dstV</span></a></span><span> </span><span class="annot"><span class="annottext">LMAlign
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-296"></span><span>
</span><span id="line-297"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCall"><span class="hs-identifier hs-var">genCall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_AtomicWrite"><span class="hs-identifier hs-type">MO_AtomicWrite</span></a></span><span> </span><span id="local-6989586621681858385"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858385"><span class="hs-identifier hs-var">_width</span></a></span></span><span> </span><span id="local-6989586621681858386"><span class="annot"><span class="annottext">MemoryOrdering
</span><a href="#local-6989586621681858386"><span class="hs-identifier hs-var">mem_ord</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681858387"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858387"><span class="hs-identifier hs-var">addr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858388"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858388"><span class="hs-identifier hs-var">val</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WriterT LlvmAccum LlvmM () -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#runStmtsDecls"><span class="hs-identifier hs-var">runStmtsDecls</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT LlvmAccum LlvmM ()
 -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl]))
-&gt; WriterT LlvmAccum LlvmM ()
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-298"></span><span>    </span><span id="local-6989586621681858389"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858389"><span class="hs-identifier hs-var">addrVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858387"><span class="hs-identifier hs-var">addr</span></a></span><span>
</span><span id="line-299"></span><span>    </span><span id="local-6989586621681858390"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858390"><span class="hs-identifier hs-var">valVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858388"><span class="hs-identifier hs-var">val</span></a></span><span>
</span><span id="line-300"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858391"><span class="annot"><span class="annottext">ptrTy :: LlvmType
</span><a href="#local-6989586621681858391"><span class="hs-identifier hs-var hs-var">ptrTy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#pLift"><span class="hs-identifier hs-var">pLift</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmType -&gt; LlvmType) -&gt; LlvmType -&gt; LlvmType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858390"><span class="hs-identifier hs-var">valVar</span></a></span><span>
</span><span id="line-301"></span><span>        </span><span id="local-6989586621681858392"><span class="annot"><span class="annottext">ptrExpr :: LlvmExpression
</span><a href="#local-6989586621681858392"><span class="hs-identifier hs-var hs-var">ptrExpr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Inttoptr"><span class="hs-identifier hs-var">LM_Inttoptr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858389"><span class="hs-identifier hs-var">addrVar</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858391"><span class="hs-identifier hs-var">ptrTy</span></a></span><span>
</span><span id="line-302"></span><span>    </span><span id="local-6989586621681858393"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858393"><span class="hs-identifier hs-var">ptrVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858391"><span class="hs-identifier hs-var">ptrTy</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmExpression
</span><a href="#local-6989586621681858392"><span class="hs-identifier hs-var">ptrExpr</span></a></span><span>
</span><span id="line-303"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858394"><span class="annot"><span class="annottext">ordering :: LlvmSyncOrdering
</span><a href="#local-6989586621681858394"><span class="hs-identifier hs-var hs-var">ordering</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MemoryOrdering -&gt; LlvmSyncOrdering
</span><a href="GHC.CmmToLlvm.CodeGen.html#convertMemoryOrdering"><span class="hs-identifier hs-var">convertMemoryOrdering</span></a></span><span> </span><span class="annot"><span class="annottext">MemoryOrdering
</span><a href="#local-6989586621681858386"><span class="hs-identifier hs-var">mem_ord</span></a></span><span>
</span><span id="line-304"></span><span>    </span><span class="annot"><span class="annottext">LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
</span><a href="GHC.CmmToLlvm.CodeGen.html#statement"><span class="hs-identifier hs-var">statement</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmStatement -&gt; WriterT LlvmAccum LlvmM ())
-&gt; LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmExpression -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Expr"><span class="hs-identifier hs-var">Expr</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmStatement)
-&gt; LlvmExpression -&gt; LlvmStatement
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmAtomicOp
-&gt; LlvmVar -&gt; LlvmVar -&gt; LlvmSyncOrdering -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#AtomicRMW"><span class="hs-identifier hs-var">AtomicRMW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmAtomicOp
</span><a href="GHC.Llvm.Syntax.html#LAO_Xchg"><span class="hs-identifier hs-var">LAO_Xchg</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858393"><span class="hs-identifier hs-var">ptrVar</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858390"><span class="hs-identifier hs-var">valVar</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmSyncOrdering
</span><a href="#local-6989586621681858394"><span class="hs-identifier hs-var">ordering</span></a></span><span>
</span><span id="line-305"></span><span>
</span><span id="line-306"></span><span class="hs-comment">-- Handle memcpy function specifically since llvm's intrinsic version takes</span><span>
</span><span id="line-307"></span><span class="hs-comment">-- some extra parameters.</span><span>
</span><span id="line-308"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCall"><span class="hs-identifier hs-var">genCall</span></a></span><span> </span><span id="local-6989586621681858396"><span class="annot"><span class="annottext">t :: ForeignTarget
</span><a href="#local-6989586621681858396"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span id="local-6989586621681858397"><span class="annot"><span class="annottext">CallishMachOp
</span><a href="#local-6989586621681858397"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621681858398"><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681858398"><span class="hs-identifier hs-var">args</span></a></span></span><span>
</span><span id="line-309"></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681858399"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681858399"><span class="hs-identifier hs-var">align</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CallishMachOp -&gt; LMAlign
</span><a href="GHC.Cmm.MachOp.html#machOpMemcpyishAlign"><span class="hs-identifier hs-var">machOpMemcpyishAlign</span></a></span><span> </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="#local-6989586621681858397"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-310"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-311"></span><span>   </span><span id="local-6989586621681858401"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681858401"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM Platform
</span><a href="GHC.CmmToLlvm.Base.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-312"></span><span>   </span><span class="annot"><span class="annottext">WriterT LlvmAccum LlvmM () -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#runStmtsDecls"><span class="hs-identifier hs-var">runStmtsDecls</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT LlvmAccum LlvmM ()
 -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl]))
-&gt; WriterT LlvmAccum LlvmM ()
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-313"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858402"><span class="annot"><span class="annottext">isVolTy :: [LlvmType]
</span><a href="#local-6989586621681858402"><span class="hs-identifier hs-var hs-var">isVolTy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#i1"><span class="hs-identifier hs-var">i1</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-314"></span><span>        </span><span id="local-6989586621681858410"><span class="annot"><span class="annottext">isVolVal :: [LlvmVar]
</span><a href="#local-6989586621681858410"><span class="hs-identifier hs-var hs-var">isVolVal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LlvmType -&gt; Integer -&gt; LlvmVar
forall a. Integral a =&gt; LlvmType -&gt; a -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#mkIntLit"><span class="hs-identifier hs-var">mkIntLit</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#i1"><span class="hs-identifier hs-var">i1</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">]</span><span>
</span><span id="line-315"></span><span>        </span><span id="local-6989586621681858411"><span class="annot"><span class="annottext">argTy :: [LlvmType]
</span><a href="#local-6989586621681858411"><span class="hs-identifier hs-var hs-var">argTy</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Memset"><span class="hs-identifier hs-type">MO_Memset</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="#local-6989586621681858397"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#i8Ptr"><span class="hs-identifier hs-var">i8Ptr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#i8"><span class="hs-identifier hs-var">i8</span></a></span><span class="hs-special">,</span><span>    </span><span class="annot"><span class="annottext">Platform -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#llvmWord"><span class="hs-identifier hs-var">llvmWord</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681858401"><span class="hs-identifier hs-var">platform</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#i32"><span class="hs-identifier hs-var">i32</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[LlvmType] -&gt; [LlvmType] -&gt; [LlvmType]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmType]
</span><a href="#local-6989586621681858402"><span class="hs-identifier hs-var">isVolTy</span></a></span><span>
</span><span id="line-316"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#i8Ptr"><span class="hs-identifier hs-var">i8Ptr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#i8Ptr"><span class="hs-identifier hs-var">i8Ptr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#llvmWord"><span class="hs-identifier hs-var">llvmWord</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681858401"><span class="hs-identifier hs-var">platform</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#i32"><span class="hs-identifier hs-var">i32</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[LlvmType] -&gt; [LlvmType] -&gt; [LlvmType]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmType]
</span><a href="#local-6989586621681858402"><span class="hs-identifier hs-var">isVolTy</span></a></span><span>
</span><span id="line-317"></span><span>        </span><span id="local-6989586621681858415"><span class="annot"><span class="annottext">funTy :: LMString -&gt; LlvmType
</span><a href="#local-6989586621681858415"><span class="hs-identifier hs-var hs-var">funTy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681858416"><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858416"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmFunctionDecl -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#LMFunction"><span class="hs-identifier hs-var">LMFunction</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmFunctionDecl -&gt; LlvmType) -&gt; LlvmFunctionDecl -&gt; LlvmType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LMString
-&gt; LlvmLinkageType
-&gt; LlvmCallConvention
-&gt; LlvmType
-&gt; LlvmParameterListType
-&gt; [LlvmParameter]
-&gt; LMAlign
-&gt; LlvmFunctionDecl
</span><a href="GHC.Llvm.Types.html#LlvmFunctionDecl"><span class="hs-identifier hs-var">LlvmFunctionDecl</span></a></span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858416"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmLinkageType
</span><a href="GHC.Llvm.Types.html#ExternallyVisible"><span class="hs-identifier hs-var">ExternallyVisible</span></a></span><span>
</span><span id="line-318"></span><span>                             </span><span class="annot"><span class="annottext">LlvmCallConvention
</span><a href="GHC.Llvm.Types.html#CC_Ccc"><span class="hs-identifier hs-var">CC_Ccc</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#LMVoid"><span class="hs-identifier hs-var">LMVoid</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmParameterListType
</span><a href="GHC.Llvm.Types.html#FixedArgs"><span class="hs-identifier hs-var">FixedArgs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LlvmType] -&gt; [LlvmParameter]
</span><a href="GHC.CmmToLlvm.Base.html#tysToParams"><span class="hs-identifier hs-var">tysToParams</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmType]
</span><a href="#local-6989586621681858411"><span class="hs-identifier hs-var">argTy</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LMAlign
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-319"></span><span>
</span><span id="line-320"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ForeignHint]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858417"><span class="annot"><span class="annottext">[ForeignHint]
</span><a href="#local-6989586621681858417"><span class="hs-identifier hs-var">arg_hints</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignTarget -&gt; ([ForeignHint], [ForeignHint])
</span><a href="GHC.Cmm.Node.html#foreignTargetHints"><span class="hs-identifier hs-var">foreignTargetHints</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621681858396"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-321"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858418"><span class="annot"><span class="annottext">args_hints :: [(CmmExpr, ForeignHint)]
</span><a href="#local-6989586621681858418"><span class="hs-identifier hs-var hs-var">args_hints</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CmmExpr] -&gt; [ForeignHint] -&gt; [(CmmExpr, ForeignHint)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../../base-4.18.3.0/src/GHC.List.html#zip/GHC.List.html#zip"><span class="hs-identifier hs-var">zip</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681858398"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">[ForeignHint]
</span><a href="#local-6989586621681858417"><span class="hs-identifier hs-var">arg_hints</span></a></span><span>
</span><span id="line-322"></span><span>    </span><span id="local-6989586621681858419"><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858419"><span class="hs-identifier hs-var">argVars</span></a></span></span><span>       </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(CmmExpr, ForeignHint)]
-&gt; ([LlvmVar], LlvmStatements, [LlvmCmmDecl])
-&gt; WriterT LlvmAccum LlvmM [LlvmVar]
</span><a href="GHC.CmmToLlvm.CodeGen.html#arg_varsW"><span class="hs-identifier hs-var">arg_varsW</span></a></span><span> </span><span class="annot"><span class="annottext">[(CmmExpr, ForeignHint)]
</span><a href="#local-6989586621681858418"><span class="hs-identifier hs-var">args_hints</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-323"></span><span>    </span><span id="local-6989586621681858420"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858420"><span class="hs-identifier hs-var">fptr</span></a></span></span><span>          </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(LMString -&gt; LlvmType)
-&gt; ForeignTarget -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#getFunPtrW"><span class="hs-identifier hs-var">getFunPtrW</span></a></span><span> </span><span class="annot"><span class="annottext">LMString -&gt; LlvmType
</span><a href="#local-6989586621681858415"><span class="hs-identifier hs-var">funTy</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621681858396"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-324"></span><span>    </span><span id="local-6989586621681858422"><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858422"><span class="hs-identifier hs-var">argVars'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Signage
-&gt; [(LlvmVar, LlvmType)] -&gt; WriterT LlvmAccum LlvmM [LlvmVar]
</span><a href="GHC.CmmToLlvm.CodeGen.html#castVarsW"><span class="hs-identifier hs-var">castVarsW</span></a></span><span> </span><span class="annot"><span class="annottext">Signage
</span><a href="GHC.CmmToLlvm.CodeGen.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">([(LlvmVar, LlvmType)] -&gt; WriterT LlvmAccum LlvmM [LlvmVar])
-&gt; [(LlvmVar, LlvmType)] -&gt; WriterT LlvmAccum LlvmM [LlvmVar]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmVar] -&gt; [LlvmType] -&gt; [(LlvmVar, LlvmType)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../../base-4.18.3.0/src/GHC.List.html#zip/GHC.List.html#zip"><span class="hs-identifier hs-var">zip</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858419"><span class="hs-identifier hs-var">argVars</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmType]
</span><a href="#local-6989586621681858411"><span class="hs-identifier hs-var">argTy</span></a></span><span>
</span><span id="line-325"></span><span>
</span><span id="line-326"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858423"><span class="annot"><span class="annottext">alignVal :: LlvmVar
</span><a href="#local-6989586621681858423"><span class="hs-identifier hs-var hs-var">alignVal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Int -&gt; LlvmVar
forall a. Integral a =&gt; LlvmType -&gt; a -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#mkIntLit"><span class="hs-identifier hs-var">mkIntLit</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#i32"><span class="hs-identifier hs-var">i32</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681858399"><span class="hs-identifier hs-var">align</span></a></span><span>
</span><span id="line-327"></span><span>        </span><span id="local-6989586621681858424"><span class="annot"><span class="annottext">arguments :: [LlvmVar]
</span><a href="#local-6989586621681858424"><span class="hs-identifier hs-var hs-var">arguments</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858422"><span class="hs-identifier hs-var">argVars'</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmVar] -&gt; [LlvmVar] -&gt; [LlvmVar]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858423"><span class="hs-identifier hs-var">alignVal</span></a></span><span class="annot"><span class="annottext">LlvmVar -&gt; [LlvmVar] -&gt; [LlvmVar]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858410"><span class="hs-identifier hs-var">isVolVal</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-328"></span><span>    </span><span class="annot"><span class="annottext">LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
</span><a href="GHC.CmmToLlvm.CodeGen.html#statement"><span class="hs-identifier hs-var">statement</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmStatement -&gt; WriterT LlvmAccum LlvmM ())
-&gt; LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmExpression -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Expr"><span class="hs-identifier hs-var">Expr</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmStatement)
-&gt; LlvmExpression -&gt; LlvmStatement
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCallType
-&gt; LlvmVar -&gt; [LlvmVar] -&gt; [LlvmFuncAttr] -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Call"><span class="hs-identifier hs-var">Call</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCallType
</span><a href="GHC.Llvm.Types.html#StdCall"><span class="hs-identifier hs-var">StdCall</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858420"><span class="hs-identifier hs-var">fptr</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858424"><span class="hs-identifier hs-var">arguments</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-329"></span><span>
</span><span id="line-330"></span><span class="hs-comment">-- We handle MO_U_Mul2 by simply using a 'mul' instruction, but with operands</span><span>
</span><span id="line-331"></span><span class="hs-comment">-- twice the width (we first zero-extend them), e.g., on 64-bit arch we will</span><span>
</span><span id="line-332"></span><span class="hs-comment">-- generate 'mul' on 128-bit operands. Then we only need some plumbing to</span><span>
</span><span id="line-333"></span><span class="hs-comment">-- extract the two 64-bit values out of 128-bit result.</span><span>
</span><span id="line-334"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCall"><span class="hs-identifier hs-var">genCall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_Mul2"><span class="hs-identifier hs-type">MO_U_Mul2</span></a></span><span> </span><span id="local-6989586621681858426"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858426"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681858427"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858427"><span class="hs-identifier hs-var">dstH</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858428"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858428"><span class="hs-identifier hs-var">dstL</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681858429"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858429"><span class="hs-identifier hs-var">lhs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858430"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858430"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WriterT LlvmAccum LlvmM () -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#runStmtsDecls"><span class="hs-identifier hs-var">runStmtsDecls</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT LlvmAccum LlvmM ()
 -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl]))
-&gt; WriterT LlvmAccum LlvmM ()
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-335"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858431"><span class="annot"><span class="annottext">width :: LlvmType
</span><a href="#local-6989586621681858431"><span class="hs-identifier hs-var hs-var">width</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmInt"><span class="hs-identifier hs-var">widthToLlvmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858426"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-336"></span><span>        </span><span id="local-6989586621681858432"><span class="annot"><span class="annottext">bitWidth :: Int
</span><a href="#local-6989586621681858432"><span class="hs-identifier hs-var hs-var">bitWidth</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Int
</span><a href="GHC.Cmm.Type.html#widthInBits"><span class="hs-identifier hs-var">widthInBits</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858426"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-337"></span><span>        </span><span id="local-6989586621681858434"><span class="annot"><span class="annottext">width2x :: LlvmType
</span><a href="#local-6989586621681858434"><span class="hs-identifier hs-var hs-var">width2x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#LMInt"><span class="hs-identifier hs-var">LMInt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681858432"><span class="hs-identifier hs-var">bitWidth</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2A/GHC.Num.html#%2A"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span>
</span><span id="line-338"></span><span>    </span><span class="hs-comment">-- First zero-extend the operands ('mul' instruction requires the operands</span><span>
</span><span id="line-339"></span><span>    </span><span class="hs-comment">-- and the result to be of the same type). Note that we don't use 'castVars'</span><span>
</span><span id="line-340"></span><span>    </span><span class="hs-comment">-- because it tries to do LM_Sext.</span><span>
</span><span id="line-341"></span><span>    </span><span id="local-6989586621681858437"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858437"><span class="hs-identifier hs-var">lhsVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858429"><span class="hs-identifier hs-var">lhs</span></a></span><span>
</span><span id="line-342"></span><span>    </span><span id="local-6989586621681858438"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858438"><span class="hs-identifier hs-var">rhsVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858430"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-343"></span><span>    </span><span id="local-6989586621681858439"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858439"><span class="hs-identifier hs-var">lhsExt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858434"><span class="hs-identifier hs-var">width2x</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Zext"><span class="hs-identifier hs-var">LM_Zext</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858437"><span class="hs-identifier hs-var">lhsVar</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858434"><span class="hs-identifier hs-var">width2x</span></a></span><span>
</span><span id="line-344"></span><span>    </span><span id="local-6989586621681858441"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858441"><span class="hs-identifier hs-var">rhsExt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858434"><span class="hs-identifier hs-var">width2x</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Zext"><span class="hs-identifier hs-var">LM_Zext</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858438"><span class="hs-identifier hs-var">rhsVar</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858434"><span class="hs-identifier hs-var">width2x</span></a></span><span>
</span><span id="line-345"></span><span>    </span><span class="hs-comment">-- Do the actual multiplication (note that the result is also 2x width).</span><span>
</span><span id="line-346"></span><span>    </span><span id="local-6989586621681858442"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858442"><span class="hs-identifier hs-var">retV</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858434"><span class="hs-identifier hs-var">width2x</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#LlvmOp"><span class="hs-identifier hs-var">LlvmOp</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_Mul"><span class="hs-identifier hs-var">LM_MO_Mul</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858439"><span class="hs-identifier hs-var">lhsExt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858441"><span class="hs-identifier hs-var">rhsExt</span></a></span><span>
</span><span id="line-347"></span><span>    </span><span class="hs-comment">-- Extract the lower bits of the result into retL.</span><span>
</span><span id="line-348"></span><span>    </span><span id="local-6989586621681858445"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858445"><span class="hs-identifier hs-var">retL</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858431"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Trunc"><span class="hs-identifier hs-var">LM_Trunc</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858442"><span class="hs-identifier hs-var">retV</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858431"><span class="hs-identifier hs-var">width</span></a></span><span>
</span><span id="line-349"></span><span>    </span><span class="hs-comment">-- Now we unsigned right-shift the higher bits by width.</span><span>
</span><span id="line-350"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858447"><span class="annot"><span class="annottext">widthLlvmLit :: LlvmVar
</span><a href="#local-6989586621681858447"><span class="hs-identifier hs-var hs-var">widthLlvmLit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmLit -&gt; LlvmVar
</span><a href="GHC.Llvm.Types.html#LMLitVar"><span class="hs-identifier hs-var">LMLitVar</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmLit -&gt; LlvmVar) -&gt; LlvmLit -&gt; LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; LlvmType -&gt; LlvmLit
</span><a href="GHC.Llvm.Types.html#LMIntLit"><span class="hs-identifier hs-var">LMIntLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Real.html#fromIntegral/GHC.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681858432"><span class="hs-identifier hs-var">bitWidth</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858431"><span class="hs-identifier hs-var">width</span></a></span><span>
</span><span id="line-351"></span><span>    </span><span id="local-6989586621681858450"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858450"><span class="hs-identifier hs-var">retShifted</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858434"><span class="hs-identifier hs-var">width2x</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#LlvmOp"><span class="hs-identifier hs-var">LlvmOp</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_LShr"><span class="hs-identifier hs-var">LM_MO_LShr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858442"><span class="hs-identifier hs-var">retV</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858447"><span class="hs-identifier hs-var">widthLlvmLit</span></a></span><span>
</span><span id="line-352"></span><span>    </span><span class="hs-comment">-- And extract them into retH.</span><span>
</span><span id="line-353"></span><span>    </span><span id="local-6989586621681858452"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858452"><span class="hs-identifier hs-var">retH</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858431"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Trunc"><span class="hs-identifier hs-var">LM_Trunc</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858450"><span class="hs-identifier hs-var">retShifted</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858431"><span class="hs-identifier hs-var">width</span></a></span><span>
</span><span id="line-354"></span><span>    </span><span id="local-6989586621681858453"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858453"><span class="hs-identifier hs-var">dstRegL</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmReg -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#getCmmRegW"><span class="hs-identifier hs-var">getCmmRegW</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmFormal -&gt; CmmReg
</span><a href="GHC.Cmm.Reg.html#CmmLocal"><span class="hs-identifier hs-var">CmmLocal</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858428"><span class="hs-identifier hs-var">dstL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-355"></span><span>    </span><span id="local-6989586621681858454"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858454"><span class="hs-identifier hs-var">dstRegH</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmReg -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#getCmmRegW"><span class="hs-identifier hs-var">getCmmRegW</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmFormal -&gt; CmmReg
</span><a href="GHC.Cmm.Reg.html#CmmLocal"><span class="hs-identifier hs-var">CmmLocal</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858427"><span class="hs-identifier hs-var">dstH</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-356"></span><span>    </span><span class="annot"><span class="annottext">LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
</span><a href="GHC.CmmToLlvm.CodeGen.html#statement"><span class="hs-identifier hs-var">statement</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmStatement -&gt; WriterT LlvmAccum LlvmM ())
-&gt; LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LMAlign -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Store"><span class="hs-identifier hs-var">Store</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858445"><span class="hs-identifier hs-var">retL</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858453"><span class="hs-identifier hs-var">dstRegL</span></a></span><span> </span><span class="annot"><span class="annottext">LMAlign
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-357"></span><span>    </span><span class="annot"><span class="annottext">LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
</span><a href="GHC.CmmToLlvm.CodeGen.html#statement"><span class="hs-identifier hs-var">statement</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmStatement -&gt; WriterT LlvmAccum LlvmM ())
-&gt; LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LMAlign -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Store"><span class="hs-identifier hs-var">Store</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858452"><span class="hs-identifier hs-var">retH</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858454"><span class="hs-identifier hs-var">dstRegH</span></a></span><span> </span><span class="annot"><span class="annottext">LMAlign
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-358"></span><span>
</span><span id="line-359"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCall"><span class="hs-identifier hs-var">genCall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_Mul2"><span class="hs-identifier hs-type">MO_S_Mul2</span></a></span><span> </span><span id="local-6989586621681858456"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858456"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681858457"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858457"><span class="hs-identifier hs-var">dstC</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858458"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858458"><span class="hs-identifier hs-var">dstH</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858459"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858459"><span class="hs-identifier hs-var">dstL</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681858460"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858460"><span class="hs-identifier hs-var">lhs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858461"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858461"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WriterT LlvmAccum LlvmM () -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#runStmtsDecls"><span class="hs-identifier hs-var">runStmtsDecls</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT LlvmAccum LlvmM ()
 -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl]))
-&gt; WriterT LlvmAccum LlvmM ()
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-360"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858462"><span class="annot"><span class="annottext">width :: LlvmType
</span><a href="#local-6989586621681858462"><span class="hs-identifier hs-var hs-var">width</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmInt"><span class="hs-identifier hs-var">widthToLlvmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858456"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-361"></span><span>        </span><span id="local-6989586621681858463"><span class="annot"><span class="annottext">bitWidth :: Int
</span><a href="#local-6989586621681858463"><span class="hs-identifier hs-var hs-var">bitWidth</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Int
</span><a href="GHC.Cmm.Type.html#widthInBits"><span class="hs-identifier hs-var">widthInBits</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858456"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-362"></span><span>        </span><span id="local-6989586621681858464"><span class="annot"><span class="annottext">width2x :: LlvmType
</span><a href="#local-6989586621681858464"><span class="hs-identifier hs-var hs-var">width2x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#LMInt"><span class="hs-identifier hs-var">LMInt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681858463"><span class="hs-identifier hs-var">bitWidth</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2A/GHC.Num.html#%2A"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span>
</span><span id="line-363"></span><span>    </span><span class="hs-comment">-- First sign-extend the operands ('mul' instruction requires the operands</span><span>
</span><span id="line-364"></span><span>    </span><span class="hs-comment">-- and the result to be of the same type). Note that we don't use 'castVars'</span><span>
</span><span id="line-365"></span><span>    </span><span class="hs-comment">-- because it tries to do LM_Sext.</span><span>
</span><span id="line-366"></span><span>    </span><span id="local-6989586621681858465"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858465"><span class="hs-identifier hs-var">lhsVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858460"><span class="hs-identifier hs-var">lhs</span></a></span><span>
</span><span id="line-367"></span><span>    </span><span id="local-6989586621681858466"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858466"><span class="hs-identifier hs-var">rhsVar</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858461"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-368"></span><span>    </span><span id="local-6989586621681858467"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858467"><span class="hs-identifier hs-var">lhsExt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858464"><span class="hs-identifier hs-var">width2x</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Sext"><span class="hs-identifier hs-var">LM_Sext</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858465"><span class="hs-identifier hs-var">lhsVar</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858464"><span class="hs-identifier hs-var">width2x</span></a></span><span>
</span><span id="line-369"></span><span>    </span><span id="local-6989586621681858469"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858469"><span class="hs-identifier hs-var">rhsExt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858464"><span class="hs-identifier hs-var">width2x</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Sext"><span class="hs-identifier hs-var">LM_Sext</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858466"><span class="hs-identifier hs-var">rhsVar</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858464"><span class="hs-identifier hs-var">width2x</span></a></span><span>
</span><span id="line-370"></span><span>    </span><span class="hs-comment">-- Do the actual multiplication (note that the result is also 2x width).</span><span>
</span><span id="line-371"></span><span>    </span><span id="local-6989586621681858470"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858470"><span class="hs-identifier hs-var">retV</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858464"><span class="hs-identifier hs-var">width2x</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#LlvmOp"><span class="hs-identifier hs-var">LlvmOp</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_Mul"><span class="hs-identifier hs-var">LM_MO_Mul</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858467"><span class="hs-identifier hs-var">lhsExt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858469"><span class="hs-identifier hs-var">rhsExt</span></a></span><span>
</span><span id="line-372"></span><span>    </span><span class="hs-comment">-- Extract the lower bits of the result into retL.</span><span>
</span><span id="line-373"></span><span>    </span><span id="local-6989586621681858471"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858471"><span class="hs-identifier hs-var">retL</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858462"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Trunc"><span class="hs-identifier hs-var">LM_Trunc</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858470"><span class="hs-identifier hs-var">retV</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858462"><span class="hs-identifier hs-var">width</span></a></span><span>
</span><span id="line-374"></span><span>    </span><span class="hs-comment">-- Now we signed right-shift the higher bits by width.</span><span>
</span><span id="line-375"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858472"><span class="annot"><span class="annottext">widthLlvmLit :: LlvmVar
</span><a href="#local-6989586621681858472"><span class="hs-identifier hs-var hs-var">widthLlvmLit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmLit -&gt; LlvmVar
</span><a href="GHC.Llvm.Types.html#LMLitVar"><span class="hs-identifier hs-var">LMLitVar</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmLit -&gt; LlvmVar) -&gt; LlvmLit -&gt; LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; LlvmType -&gt; LlvmLit
</span><a href="GHC.Llvm.Types.html#LMIntLit"><span class="hs-identifier hs-var">LMIntLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Real.html#fromIntegral/GHC.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681858463"><span class="hs-identifier hs-var">bitWidth</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858462"><span class="hs-identifier hs-var">width</span></a></span><span>
</span><span id="line-376"></span><span>    </span><span id="local-6989586621681858473"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858473"><span class="hs-identifier hs-var">retShifted</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858464"><span class="hs-identifier hs-var">width2x</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#LlvmOp"><span class="hs-identifier hs-var">LlvmOp</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_AShr"><span class="hs-identifier hs-var">LM_MO_AShr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858470"><span class="hs-identifier hs-var">retV</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858472"><span class="hs-identifier hs-var">widthLlvmLit</span></a></span><span>
</span><span id="line-377"></span><span>    </span><span class="hs-comment">-- And extract them into retH.</span><span>
</span><span id="line-378"></span><span>    </span><span id="local-6989586621681858475"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858475"><span class="hs-identifier hs-var">retH</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858462"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Trunc"><span class="hs-identifier hs-var">LM_Trunc</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858473"><span class="hs-identifier hs-var">retShifted</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858462"><span class="hs-identifier hs-var">width</span></a></span><span>
</span><span id="line-379"></span><span>    </span><span class="hs-comment">-- Check if the carry is useful by doing a full arithmetic right shift on</span><span>
</span><span id="line-380"></span><span>    </span><span class="hs-comment">-- retL and comparing the result with retH</span><span>
</span><span id="line-381"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858476"><span class="annot"><span class="annottext">widthLlvmLitm1 :: LlvmVar
</span><a href="#local-6989586621681858476"><span class="hs-identifier hs-var hs-var">widthLlvmLitm1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmLit -&gt; LlvmVar
</span><a href="GHC.Llvm.Types.html#LMLitVar"><span class="hs-identifier hs-var">LMLitVar</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmLit -&gt; LlvmVar) -&gt; LlvmLit -&gt; LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; LlvmType -&gt; LlvmLit
</span><a href="GHC.Llvm.Types.html#LMIntLit"><span class="hs-identifier hs-var">LMIntLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Real.html#fromIntegral/GHC.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681858463"><span class="hs-identifier hs-var">bitWidth</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#-/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858462"><span class="hs-identifier hs-var">width</span></a></span><span>
</span><span id="line-382"></span><span>    </span><span id="local-6989586621681858477"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858477"><span class="hs-identifier hs-var">retH'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858462"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#LlvmOp"><span class="hs-identifier hs-var">LlvmOp</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_AShr"><span class="hs-identifier hs-var">LM_MO_AShr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858471"><span class="hs-identifier hs-var">retL</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858476"><span class="hs-identifier hs-var">widthLlvmLitm1</span></a></span><span>
</span><span id="line-383"></span><span>    </span><span id="local-6989586621681858478"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858478"><span class="hs-identifier hs-var">retC1</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#i1"><span class="hs-identifier hs-var">i1</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCmpOp -&gt; LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Compare"><span class="hs-identifier hs-var">Compare</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCmpOp
</span><a href="GHC.Llvm.Types.html#LM_CMP_Ne"><span class="hs-identifier hs-var">LM_CMP_Ne</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858475"><span class="hs-identifier hs-var">retH</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858477"><span class="hs-identifier hs-var">retH'</span></a></span><span> </span><span class="hs-comment">-- Compare op returns a 1-bit value (i1)</span><span>
</span><span id="line-384"></span><span>    </span><span id="local-6989586621681858481"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858481"><span class="hs-identifier hs-var">retC</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858462"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Zext"><span class="hs-identifier hs-var">LM_Zext</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858478"><span class="hs-identifier hs-var">retC1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858462"><span class="hs-identifier hs-var">width</span></a></span><span>  </span><span class="hs-comment">-- so we zero-extend it</span><span>
</span><span id="line-385"></span><span>    </span><span id="local-6989586621681858482"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858482"><span class="hs-identifier hs-var">dstRegL</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmReg -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#getCmmRegW"><span class="hs-identifier hs-var">getCmmRegW</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmFormal -&gt; CmmReg
</span><a href="GHC.Cmm.Reg.html#CmmLocal"><span class="hs-identifier hs-var">CmmLocal</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858459"><span class="hs-identifier hs-var">dstL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-386"></span><span>    </span><span id="local-6989586621681858483"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858483"><span class="hs-identifier hs-var">dstRegH</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmReg -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#getCmmRegW"><span class="hs-identifier hs-var">getCmmRegW</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmFormal -&gt; CmmReg
</span><a href="GHC.Cmm.Reg.html#CmmLocal"><span class="hs-identifier hs-var">CmmLocal</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858458"><span class="hs-identifier hs-var">dstH</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-387"></span><span>    </span><span id="local-6989586621681858484"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858484"><span class="hs-identifier hs-var">dstRegC</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmReg -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#getCmmRegW"><span class="hs-identifier hs-var">getCmmRegW</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmFormal -&gt; CmmReg
</span><a href="GHC.Cmm.Reg.html#CmmLocal"><span class="hs-identifier hs-var">CmmLocal</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858457"><span class="hs-identifier hs-var">dstC</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-388"></span><span>    </span><span class="annot"><span class="annottext">LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
</span><a href="GHC.CmmToLlvm.CodeGen.html#statement"><span class="hs-identifier hs-var">statement</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmStatement -&gt; WriterT LlvmAccum LlvmM ())
-&gt; LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LMAlign -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Store"><span class="hs-identifier hs-var">Store</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858471"><span class="hs-identifier hs-var">retL</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858482"><span class="hs-identifier hs-var">dstRegL</span></a></span><span> </span><span class="annot"><span class="annottext">LMAlign
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-389"></span><span>    </span><span class="annot"><span class="annottext">LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
</span><a href="GHC.CmmToLlvm.CodeGen.html#statement"><span class="hs-identifier hs-var">statement</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmStatement -&gt; WriterT LlvmAccum LlvmM ())
-&gt; LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LMAlign -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Store"><span class="hs-identifier hs-var">Store</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858475"><span class="hs-identifier hs-var">retH</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858483"><span class="hs-identifier hs-var">dstRegH</span></a></span><span> </span><span class="annot"><span class="annottext">LMAlign
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-390"></span><span>    </span><span class="annot"><span class="annottext">LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
</span><a href="GHC.CmmToLlvm.CodeGen.html#statement"><span class="hs-identifier hs-var">statement</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmStatement -&gt; WriterT LlvmAccum LlvmM ())
-&gt; LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LMAlign -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Store"><span class="hs-identifier hs-var">Store</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858481"><span class="hs-identifier hs-var">retC</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858484"><span class="hs-identifier hs-var">dstRegC</span></a></span><span> </span><span class="annot"><span class="annottext">LMAlign
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-391"></span><span>
</span><span id="line-392"></span><span class="hs-comment">-- MO_U_QuotRem2 is another case we handle by widening the registers to double</span><span>
</span><span id="line-393"></span><span class="hs-comment">-- the width and use normal LLVM instructions (similarly to the MO_U_Mul2). The</span><span>
</span><span id="line-394"></span><span class="hs-comment">-- main difference here is that we need to combine two words into one register</span><span>
</span><span id="line-395"></span><span class="hs-comment">-- and then use both 'udiv' and 'urem' instructions to compute the result.</span><span>
</span><span id="line-396"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCall"><span class="hs-identifier hs-var">genCall</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_QuotRem2"><span class="hs-identifier hs-type">MO_U_QuotRem2</span></a></span><span> </span><span id="local-6989586621681858486"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858486"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-397"></span><span>        </span><span class="hs-special">[</span><span id="local-6989586621681858487"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858487"><span class="hs-identifier hs-var">dstQ</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858488"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858488"><span class="hs-identifier hs-var">dstR</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681858489"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858489"><span class="hs-identifier hs-var">lhsH</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858490"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858490"><span class="hs-identifier hs-var">lhsL</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858491"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858491"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WriterT LlvmAccum LlvmM () -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#runStmtsDecls"><span class="hs-identifier hs-var">runStmtsDecls</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT LlvmAccum LlvmM ()
 -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl]))
-&gt; WriterT LlvmAccum LlvmM ()
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-398"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858492"><span class="annot"><span class="annottext">width :: LlvmType
</span><a href="#local-6989586621681858492"><span class="hs-identifier hs-var hs-var">width</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmInt"><span class="hs-identifier hs-var">widthToLlvmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858486"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-399"></span><span>        </span><span id="local-6989586621681858493"><span class="annot"><span class="annottext">bitWidth :: Int
</span><a href="#local-6989586621681858493"><span class="hs-identifier hs-var hs-var">bitWidth</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Int
</span><a href="GHC.Cmm.Type.html#widthInBits"><span class="hs-identifier hs-var">widthInBits</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858486"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-400"></span><span>        </span><span id="local-6989586621681858494"><span class="annot"><span class="annottext">width2x :: LlvmType
</span><a href="#local-6989586621681858494"><span class="hs-identifier hs-var hs-var">width2x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#LMInt"><span class="hs-identifier hs-var">LMInt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681858493"><span class="hs-identifier hs-var">bitWidth</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2A/GHC.Num.html#%2A"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span>
</span><span id="line-401"></span><span>    </span><span class="hs-comment">-- First zero-extend all parameters to double width.</span><span>
</span><span id="line-402"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858495"><span class="annot"><span class="annottext">zeroExtend :: CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="#local-6989586621681858495"><span class="hs-identifier hs-var hs-var">zeroExtend</span></a></span></span><span> </span><span id="local-6989586621681858496"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858496"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-403"></span><span>            </span><span id="local-6989586621681858497"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858497"><span class="hs-identifier hs-var">var</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858496"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-404"></span><span>            </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858494"><span class="hs-identifier hs-var">width2x</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Zext"><span class="hs-identifier hs-var">LM_Zext</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858497"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858494"><span class="hs-identifier hs-var">width2x</span></a></span><span>
</span><span id="line-405"></span><span>    </span><span id="local-6989586621681858498"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858498"><span class="hs-identifier hs-var">lhsExtH</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="#local-6989586621681858495"><span class="hs-identifier hs-var">zeroExtend</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858489"><span class="hs-identifier hs-var">lhsH</span></a></span><span>
</span><span id="line-406"></span><span>    </span><span id="local-6989586621681858499"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858499"><span class="hs-identifier hs-var">lhsExtL</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="#local-6989586621681858495"><span class="hs-identifier hs-var">zeroExtend</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858490"><span class="hs-identifier hs-var">lhsL</span></a></span><span>
</span><span id="line-407"></span><span>    </span><span id="local-6989586621681858500"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858500"><span class="hs-identifier hs-var">rhsExt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="#local-6989586621681858495"><span class="hs-identifier hs-var">zeroExtend</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858491"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-408"></span><span>    </span><span class="hs-comment">-- Now we combine the first two parameters (that represent the high and low</span><span>
</span><span id="line-409"></span><span>    </span><span class="hs-comment">-- bits of the value). So first left-shift the high bits to their position</span><span>
</span><span id="line-410"></span><span>    </span><span class="hs-comment">-- and then bit-or them with the low bits.</span><span>
</span><span id="line-411"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858501"><span class="annot"><span class="annottext">widthLlvmLit :: LlvmVar
</span><a href="#local-6989586621681858501"><span class="hs-identifier hs-var hs-var">widthLlvmLit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmLit -&gt; LlvmVar
</span><a href="GHC.Llvm.Types.html#LMLitVar"><span class="hs-identifier hs-var">LMLitVar</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmLit -&gt; LlvmVar) -&gt; LlvmLit -&gt; LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; LlvmType -&gt; LlvmLit
</span><a href="GHC.Llvm.Types.html#LMIntLit"><span class="hs-identifier hs-var">LMIntLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Real.html#fromIntegral/GHC.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681858493"><span class="hs-identifier hs-var">bitWidth</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858492"><span class="hs-identifier hs-var">width</span></a></span><span>
</span><span id="line-412"></span><span>    </span><span id="local-6989586621681858502"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858502"><span class="hs-identifier hs-var">lhsExtHShifted</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858494"><span class="hs-identifier hs-var">width2x</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#LlvmOp"><span class="hs-identifier hs-var">LlvmOp</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_Shl"><span class="hs-identifier hs-var">LM_MO_Shl</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858498"><span class="hs-identifier hs-var">lhsExtH</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858501"><span class="hs-identifier hs-var">widthLlvmLit</span></a></span><span>
</span><span id="line-413"></span><span>    </span><span id="local-6989586621681858504"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858504"><span class="hs-identifier hs-var">lhsExt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858494"><span class="hs-identifier hs-var">width2x</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#LlvmOp"><span class="hs-identifier hs-var">LlvmOp</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_Or"><span class="hs-identifier hs-var">LM_MO_Or</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858502"><span class="hs-identifier hs-var">lhsExtHShifted</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858499"><span class="hs-identifier hs-var">lhsExtL</span></a></span><span>
</span><span id="line-414"></span><span>    </span><span class="hs-comment">-- Finally, we can call 'udiv' and 'urem' to compute the results.</span><span>
</span><span id="line-415"></span><span>    </span><span id="local-6989586621681858506"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858506"><span class="hs-identifier hs-var">retExtDiv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858494"><span class="hs-identifier hs-var">width2x</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#LlvmOp"><span class="hs-identifier hs-var">LlvmOp</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_UDiv"><span class="hs-identifier hs-var">LM_MO_UDiv</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858504"><span class="hs-identifier hs-var">lhsExt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858500"><span class="hs-identifier hs-var">rhsExt</span></a></span><span>
</span><span id="line-416"></span><span>    </span><span id="local-6989586621681858508"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858508"><span class="hs-identifier hs-var">retExtRem</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858494"><span class="hs-identifier hs-var">width2x</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#LlvmOp"><span class="hs-identifier hs-var">LlvmOp</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_URem"><span class="hs-identifier hs-var">LM_MO_URem</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858504"><span class="hs-identifier hs-var">lhsExt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858500"><span class="hs-identifier hs-var">rhsExt</span></a></span><span>
</span><span id="line-417"></span><span>    </span><span class="hs-comment">-- And since everything is in 2x width, we need to truncate the results and</span><span>
</span><span id="line-418"></span><span>    </span><span class="hs-comment">-- then return them.</span><span>
</span><span id="line-419"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858510"><span class="annot"><span class="annottext">narrow :: LlvmVar -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="#local-6989586621681858510"><span class="hs-identifier hs-var hs-var">narrow</span></a></span></span><span> </span><span id="local-6989586621681858511"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858511"><span class="hs-identifier hs-var">var</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858492"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Trunc"><span class="hs-identifier hs-var">LM_Trunc</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858511"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858492"><span class="hs-identifier hs-var">width</span></a></span><span>
</span><span id="line-420"></span><span>    </span><span id="local-6989586621681858512"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858512"><span class="hs-identifier hs-var">retDiv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="#local-6989586621681858510"><span class="hs-identifier hs-var">narrow</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858506"><span class="hs-identifier hs-var">retExtDiv</span></a></span><span>
</span><span id="line-421"></span><span>    </span><span id="local-6989586621681858513"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858513"><span class="hs-identifier hs-var">retRem</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="#local-6989586621681858510"><span class="hs-identifier hs-var">narrow</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858508"><span class="hs-identifier hs-var">retExtRem</span></a></span><span>
</span><span id="line-422"></span><span>    </span><span id="local-6989586621681858514"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858514"><span class="hs-identifier hs-var">dstRegQ</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM LlvmVar -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; WriterT LlvmAccum m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Class.html#lift/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmM LlvmVar -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmM LlvmVar -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CmmReg -&gt; LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#getCmmReg"><span class="hs-identifier hs-var">getCmmReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmFormal -&gt; CmmReg
</span><a href="GHC.Cmm.Reg.html#CmmLocal"><span class="hs-identifier hs-var">CmmLocal</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858487"><span class="hs-identifier hs-var">dstQ</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-423"></span><span>    </span><span id="local-6989586621681858516"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858516"><span class="hs-identifier hs-var">dstRegR</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM LlvmVar -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; WriterT LlvmAccum m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Class.html#lift/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmM LlvmVar -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmM LlvmVar -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CmmReg -&gt; LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#getCmmReg"><span class="hs-identifier hs-var">getCmmReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmFormal -&gt; CmmReg
</span><a href="GHC.Cmm.Reg.html#CmmLocal"><span class="hs-identifier hs-var">CmmLocal</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858488"><span class="hs-identifier hs-var">dstR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-424"></span><span>    </span><span class="annot"><span class="annottext">LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
</span><a href="GHC.CmmToLlvm.CodeGen.html#statement"><span class="hs-identifier hs-var">statement</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmStatement -&gt; WriterT LlvmAccum LlvmM ())
-&gt; LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LMAlign -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Store"><span class="hs-identifier hs-var">Store</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858512"><span class="hs-identifier hs-var">retDiv</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858514"><span class="hs-identifier hs-var">dstRegQ</span></a></span><span> </span><span class="annot"><span class="annottext">LMAlign
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-425"></span><span>    </span><span class="annot"><span class="annottext">LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
</span><a href="GHC.CmmToLlvm.CodeGen.html#statement"><span class="hs-identifier hs-var">statement</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmStatement -&gt; WriterT LlvmAccum LlvmM ())
-&gt; LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LMAlign -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Store"><span class="hs-identifier hs-var">Store</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858513"><span class="hs-identifier hs-var">retRem</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858516"><span class="hs-identifier hs-var">dstRegR</span></a></span><span> </span><span class="annot"><span class="annottext">LMAlign
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-426"></span><span>
</span><span id="line-427"></span><span class="hs-comment">-- Handle the MO_{Add,Sub}IntC separately. LLVM versions return a record from</span><span>
</span><span id="line-428"></span><span class="hs-comment">-- which we need to extract the actual values.</span><span>
</span><span id="line-429"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCall"><span class="hs-identifier hs-var">genCall</span></a></span><span> </span><span id="local-6989586621681858517"><span class="annot"><span class="annottext">t :: ForeignTarget
</span><a href="#local-6989586621681858517"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_AddIntC"><span class="hs-identifier hs-type">MO_AddIntC</span></a></span><span> </span><span id="local-6989586621681858519"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858519"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681858520"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858520"><span class="hs-identifier hs-var">dstV</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858521"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858521"><span class="hs-identifier hs-var">dstO</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681858522"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858522"><span class="hs-identifier hs-var">lhs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858523"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858523"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-430"></span><span>    </span><span class="annot"><span class="annottext">ForeignTarget
-&gt; Width
-&gt; [CmmFormal]
-&gt; [CmmExpr]
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genCallWithOverflow"><span class="hs-identifier hs-var">genCallWithOverflow</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621681858517"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858519"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858520"><span class="hs-identifier hs-var">dstV</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858521"><span class="hs-identifier hs-var">dstO</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858522"><span class="hs-identifier hs-var">lhs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858523"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-431"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCall"><span class="hs-identifier hs-var">genCall</span></a></span><span> </span><span id="local-6989586621681858525"><span class="annot"><span class="annottext">t :: ForeignTarget
</span><a href="#local-6989586621681858525"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_SubIntC"><span class="hs-identifier hs-type">MO_SubIntC</span></a></span><span> </span><span id="local-6989586621681858527"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858527"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681858528"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858528"><span class="hs-identifier hs-var">dstV</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858529"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858529"><span class="hs-identifier hs-var">dstO</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681858530"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858530"><span class="hs-identifier hs-var">lhs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858531"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858531"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-432"></span><span>    </span><span class="annot"><span class="annottext">ForeignTarget
-&gt; Width
-&gt; [CmmFormal]
-&gt; [CmmExpr]
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genCallWithOverflow"><span class="hs-identifier hs-var">genCallWithOverflow</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621681858525"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858527"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858528"><span class="hs-identifier hs-var">dstV</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858529"><span class="hs-identifier hs-var">dstO</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858530"><span class="hs-identifier hs-var">lhs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858531"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-433"></span><span>
</span><span id="line-434"></span><span class="hs-comment">-- Similar to MO_{Add,Sub}IntC, but MO_Add2 expects the first element of the</span><span>
</span><span id="line-435"></span><span class="hs-comment">-- return tuple to be the overflow bit and the second element to contain the</span><span>
</span><span id="line-436"></span><span class="hs-comment">-- actual result of the addition. So we still use genCallWithOverflow but swap</span><span>
</span><span id="line-437"></span><span class="hs-comment">-- the return registers.</span><span>
</span><span id="line-438"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCall"><span class="hs-identifier hs-var">genCall</span></a></span><span> </span><span id="local-6989586621681858532"><span class="annot"><span class="annottext">t :: ForeignTarget
</span><a href="#local-6989586621681858532"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Add2"><span class="hs-identifier hs-type">MO_Add2</span></a></span><span> </span><span id="local-6989586621681858534"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858534"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681858535"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858535"><span class="hs-identifier hs-var">dstO</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858536"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858536"><span class="hs-identifier hs-var">dstV</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681858537"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858537"><span class="hs-identifier hs-var">lhs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858538"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858538"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-439"></span><span>    </span><span class="annot"><span class="annottext">ForeignTarget
-&gt; Width
-&gt; [CmmFormal]
-&gt; [CmmExpr]
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genCallWithOverflow"><span class="hs-identifier hs-var">genCallWithOverflow</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621681858532"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858534"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858536"><span class="hs-identifier hs-var">dstV</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858535"><span class="hs-identifier hs-var">dstO</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858537"><span class="hs-identifier hs-var">lhs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858538"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-440"></span><span>
</span><span id="line-441"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCall"><span class="hs-identifier hs-var">genCall</span></a></span><span> </span><span id="local-6989586621681858539"><span class="annot"><span class="annottext">t :: ForeignTarget
</span><a href="#local-6989586621681858539"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_AddWordC"><span class="hs-identifier hs-type">MO_AddWordC</span></a></span><span> </span><span id="local-6989586621681858541"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858541"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681858542"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858542"><span class="hs-identifier hs-var">dstV</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858543"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858543"><span class="hs-identifier hs-var">dstO</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681858544"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858544"><span class="hs-identifier hs-var">lhs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858545"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858545"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-442"></span><span>    </span><span class="annot"><span class="annottext">ForeignTarget
-&gt; Width
-&gt; [CmmFormal]
-&gt; [CmmExpr]
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genCallWithOverflow"><span class="hs-identifier hs-var">genCallWithOverflow</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621681858539"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858541"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858542"><span class="hs-identifier hs-var">dstV</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858543"><span class="hs-identifier hs-var">dstO</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858544"><span class="hs-identifier hs-var">lhs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858545"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-443"></span><span>
</span><span id="line-444"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCall"><span class="hs-identifier hs-var">genCall</span></a></span><span> </span><span id="local-6989586621681858546"><span class="annot"><span class="annottext">t :: ForeignTarget
</span><a href="#local-6989586621681858546"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_SubWordC"><span class="hs-identifier hs-type">MO_SubWordC</span></a></span><span> </span><span id="local-6989586621681858548"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858548"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681858549"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858549"><span class="hs-identifier hs-var">dstV</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858550"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858550"><span class="hs-identifier hs-var">dstO</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681858551"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858551"><span class="hs-identifier hs-var">lhs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858552"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858552"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-445"></span><span>    </span><span class="annot"><span class="annottext">ForeignTarget
-&gt; Width
-&gt; [CmmFormal]
-&gt; [CmmExpr]
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genCallWithOverflow"><span class="hs-identifier hs-var">genCallWithOverflow</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621681858546"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858548"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858549"><span class="hs-identifier hs-var">dstV</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858550"><span class="hs-identifier hs-var">dstO</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858551"><span class="hs-identifier hs-var">lhs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858552"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-446"></span><span>
</span><span id="line-447"></span><span class="hs-comment">-- Handle all other foreign calls and prim ops.</span><span>
</span><span id="line-448"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCall"><span class="hs-identifier hs-var">genCall</span></a></span><span> </span><span id="local-6989586621681858553"><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621681858553"><span class="hs-identifier hs-var">target</span></a></span></span><span> </span><span id="local-6989586621681858554"><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621681858554"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span id="local-6989586621681858555"><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681858555"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-449"></span><span>  </span><span id="local-6989586621681858556"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681858556"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM Platform
</span><a href="GHC.CmmToLlvm.Base.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-450"></span><span>  </span><span class="annot"><span class="annottext">WriterT LlvmAccum LlvmM () -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#runStmtsDecls"><span class="hs-identifier hs-var">runStmtsDecls</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT LlvmAccum LlvmM ()
 -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl]))
-&gt; WriterT LlvmAccum LlvmM ()
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-451"></span><span>
</span><span id="line-452"></span><span>    </span><span class="hs-comment">-- extract Cmm call convention, and translate to LLVM call convention</span><span>
</span><span id="line-453"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858557"><span class="annot"><span class="annottext">lmconv :: LlvmCallConvention
</span><a href="#local-6989586621681858557"><span class="hs-identifier hs-var hs-var">lmconv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621681858553"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-454"></span><span>            </span><span class="annot"><a href="GHC.Cmm.Node.html#ForeignTarget"><span class="hs-identifier hs-type">ForeignTarget</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#ForeignConvention"><span class="hs-identifier hs-type">ForeignConvention</span></a></span><span> </span><span id="local-6989586621681858560"><span class="annot"><span class="annottext">CCallConv
</span><a href="#local-6989586621681858560"><span class="hs-identifier hs-var">conv</span></a></span></span><span> </span><span class="annot"><span class="annottext">[ForeignHint]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[ForeignHint]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CmmReturnInfo
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-455"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CCallConv
</span><a href="#local-6989586621681858560"><span class="hs-identifier hs-var">conv</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-456"></span><span>                 </span><span class="annot"><span class="annottext">CCallConv
</span><a href="GHC.Types.ForeignCall.html#StdCallConv"><span class="hs-identifier hs-var">StdCallConv</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Arch
</span><a href="GHC.Platform.html#platformArch"><span class="hs-identifier hs-var">platformArch</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681858556"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-457"></span><span>                                 </span><span class="annot"><span class="annottext">Arch
</span><a href="../../ghc-boot-9.6.7/src/GHC.Platform.ArchOS.html#ArchX86/GHC.Platform.ArchOS.html#ArchX86"><span class="hs-identifier hs-var">ArchX86</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmCallConvention
</span><a href="GHC.Llvm.Types.html#CC_X86_Stdcc"><span class="hs-identifier hs-var">CC_X86_Stdcc</span></a></span><span>
</span><span id="line-458"></span><span>                                 </span><span class="annot"><span class="annottext">Arch
</span><a href="../../ghc-boot-9.6.7/src/GHC.Platform.ArchOS.html#ArchX86_64/GHC.Platform.ArchOS.html#ArchX86_64"><span class="hs-identifier hs-var">ArchX86_64</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmCallConvention
</span><a href="GHC.Llvm.Types.html#CC_X86_Stdcc"><span class="hs-identifier hs-var">CC_X86_Stdcc</span></a></span><span>
</span><span id="line-459"></span><span>                                 </span><span class="annot"><span class="annottext">Arch
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmCallConvention
</span><a href="GHC.Llvm.Types.html#CC_Ccc"><span class="hs-identifier hs-var">CC_Ccc</span></a></span><span>
</span><span id="line-460"></span><span>                 </span><span class="annot"><span class="annottext">CCallConv
</span><a href="GHC.Types.ForeignCall.html#CCallConv"><span class="hs-identifier hs-var">CCallConv</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmCallConvention
</span><a href="GHC.Llvm.Types.html#CC_Ccc"><span class="hs-identifier hs-var">CC_Ccc</span></a></span><span>
</span><span id="line-461"></span><span>                 </span><span class="annot"><span class="annottext">CCallConv
</span><a href="GHC.Types.ForeignCall.html#CApiConv"><span class="hs-identifier hs-var">CApiConv</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmCallConvention
</span><a href="GHC.Llvm.Types.html#CC_Ccc"><span class="hs-identifier hs-var">CC_Ccc</span></a></span><span>
</span><span id="line-462"></span><span>                 </span><span class="annot"><span class="annottext">CCallConv
</span><a href="GHC.Types.ForeignCall.html#PrimCallConv"><span class="hs-identifier hs-var">PrimCallConv</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LlvmCallConvention
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC.CmmToLlvm.CodeGen.genCall: PrimCallConv&quot;</span></span><span>
</span><span id="line-463"></span><span>                 </span><span class="annot"><span class="annottext">CCallConv
</span><a href="GHC.Types.ForeignCall.html#JavaScriptCallConv"><span class="hs-identifier hs-var">JavaScriptCallConv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LlvmCallConvention
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC.CmmToLlvm.CodeGen.genCall: JavaScriptCallConv&quot;</span></span><span>
</span><span id="line-464"></span><span>
</span><span id="line-465"></span><span>            </span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span>   </span><span class="annot"><span class="annottext">CallishMachOp
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmCallConvention
</span><a href="GHC.Llvm.Types.html#CC_Ccc"><span class="hs-identifier hs-var">CC_Ccc</span></a></span><span>
</span><span id="line-466"></span><span>
</span><span id="line-467"></span><span>    </span><span class="hs-comment">{-
        CC_Ccc of the possibilities here are a worry with the use of a custom
        calling convention for passing STG args. In practice the more
        dangerous combinations (e.g StdCall + llvmGhcCC) don't occur.

        The native code generator only handles StdCall and CCallConv.
    -}</span><span>
</span><span id="line-474"></span><span>
</span><span id="line-475"></span><span>    </span><span class="hs-comment">-- parameter types</span><span>
</span><span id="line-476"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858567"><span class="annot"><span class="annottext">arg_type :: (CmmExpr, ForeignHint) -&gt; LlvmParameter
</span><a href="#local-6989586621681858567"><span class="hs-identifier hs-var hs-var">arg_type</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmExpr
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ForeignHint
</span><a href="GHC.Cmm.Type.html#AddrHint"><span class="hs-identifier hs-var">AddrHint</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#i8Ptr"><span class="hs-identifier hs-var">i8Ptr</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-477"></span><span>        </span><span class="hs-comment">-- cast pointers to i8*. Llvm equivalent of void*</span><span>
</span><span id="line-478"></span><span>        </span><span class="annot"><a href="#local-6989586621681858567"><span class="hs-identifier hs-var">arg_type</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681858569"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858569"><span class="hs-identifier hs-var">expr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858570"><span class="annot"><span class="annottext">ForeignHint
</span><a href="#local-6989586621681858570"><span class="hs-identifier hs-var">hint</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-479"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#cmmToLlvmType"><span class="hs-identifier hs-var">cmmToLlvmType</span></a></span><span> </span><span class="annot"><span class="annottext">(CmmType -&gt; LlvmType) -&gt; CmmType -&gt; LlvmType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; CmmExpr -&gt; CmmType
</span><a href="GHC.Cmm.Expr.html#cmmExprType"><span class="hs-identifier hs-var">cmmExprType</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681858556"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858569"><span class="hs-identifier hs-var">expr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-480"></span><span>              </span><span id="local-6989586621681858572"><span class="annot"><span class="annottext">ty :: LlvmType
</span><a href="#local-6989586621681858572"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Llvm.Types.html#LMInt"><span class="hs-identifier hs-type">LMInt</span></a></span><span> </span><span id="local-6989586621681858573"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681858573"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681858573"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">64</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">LlvmCallConvention
</span><a href="#local-6989586621681858557"><span class="hs-identifier hs-var">lmconv</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCallConvention -&gt; LlvmCallConvention -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">LlvmCallConvention
</span><a href="GHC.Llvm.Types.html#CC_Ccc"><span class="hs-identifier hs-var">CC_Ccc</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Bool
</span><a href="GHC.Platform.html#platformCConvNeedsExtension"><span class="hs-identifier hs-var">platformCConvNeedsExtension</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681858556"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-481"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858572"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">ForeignHint
</span><a href="#local-6989586621681858570"><span class="hs-identifier hs-var">hint</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignHint -&gt; ForeignHint -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ForeignHint
</span><a href="GHC.Cmm.Type.html#SignedHint"><span class="hs-identifier hs-var">SignedHint</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LlvmParamAttr
</span><a href="GHC.Llvm.Types.html#SignExt"><span class="hs-identifier hs-var">SignExt</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LlvmParamAttr
</span><a href="GHC.Llvm.Types.html#ZeroExt"><span class="hs-identifier hs-var">ZeroExt</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-482"></span><span>              </span><span id="local-6989586621681858579"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858579"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858579"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-483"></span><span>
</span><span id="line-484"></span><span>    </span><span class="hs-comment">-- ret type</span><span>
</span><span id="line-485"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858584"><span class="annot"><span class="annottext">ret_type :: [(CmmFormal, ForeignHint)] -&gt; LlvmType
</span><a href="#local-6989586621681858584"><span class="hs-identifier hs-var hs-var">ret_type</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#LMVoid"><span class="hs-identifier hs-var">LMVoid</span></a></span><span>
</span><span id="line-486"></span><span>        </span><span class="annot"><a href="#local-6989586621681858584"><span class="hs-identifier hs-var">ret_type</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmFormal
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ForeignHint
</span><a href="GHC.Cmm.Type.html#AddrHint"><span class="hs-identifier hs-var">AddrHint</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#i8Ptr"><span class="hs-identifier hs-var">i8Ptr</span></a></span><span>
</span><span id="line-487"></span><span>        </span><span class="annot"><a href="#local-6989586621681858584"><span class="hs-identifier hs-var">ret_type</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span id="local-6989586621681858585"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858585"><span class="hs-identifier hs-var">reg</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ForeignHint
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#cmmToLlvmType"><span class="hs-identifier hs-var">cmmToLlvmType</span></a></span><span> </span><span class="annot"><span class="annottext">(CmmType -&gt; LlvmType) -&gt; CmmType -&gt; LlvmType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal -&gt; CmmType
</span><a href="GHC.Cmm.Reg.html#localRegType"><span class="hs-identifier hs-var">localRegType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858585"><span class="hs-identifier hs-var">reg</span></a></span><span>
</span><span id="line-488"></span><span>        </span><span class="annot"><a href="#local-6989586621681858584"><span class="hs-identifier hs-var">ret_type</span></a></span><span> </span><span id="local-6989586621681858586"><span class="annot"><span class="annottext">[(CmmFormal, ForeignHint)]
</span><a href="#local-6989586621681858586"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; LlvmType
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; LlvmType) -&gt; String -&gt; LlvmType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genCall: Too many return values! Can only handle&quot;</span></span><span>
</span><span id="line-489"></span><span>                        </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; 0 or 1, given &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../base-4.18.3.0/src/GHC.Show.html#show/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(CmmFormal, ForeignHint)] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#length/Data.Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[(CmmFormal, ForeignHint)]
</span><a href="#local-6989586621681858586"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.&quot;</span></span><span>
</span><span id="line-490"></span><span>
</span><span id="line-491"></span><span>    </span><span class="hs-comment">-- call attributes</span><span>
</span><span id="line-492"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858587"><span class="annot"><span class="annottext">fnAttrs :: [LlvmFuncAttr]
</span><a href="#local-6989586621681858587"><span class="hs-identifier hs-var hs-var">fnAttrs</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681858588"><span class="hs-identifier hs-var">never_returns</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmFuncAttr
</span><a href="GHC.Llvm.Types.html#NoReturn"><span class="hs-identifier hs-var">NoReturn</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmFuncAttr -&gt; [LlvmFuncAttr] -&gt; [LlvmFuncAttr]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[LlvmFuncAttr]
</span><a href="GHC.CmmToLlvm.Base.html#llvmStdFunAttrs"><span class="hs-identifier hs-var">llvmStdFunAttrs</span></a></span><span>
</span><span id="line-493"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LlvmFuncAttr]
</span><a href="GHC.CmmToLlvm.Base.html#llvmStdFunAttrs"><span class="hs-identifier hs-var">llvmStdFunAttrs</span></a></span><span>
</span><span id="line-494"></span><span>
</span><span id="line-495"></span><span>        </span><span id="local-6989586621681858588"><span class="annot"><span class="annottext">never_returns :: Bool
</span><a href="#local-6989586621681858588"><span class="hs-identifier hs-var hs-var">never_returns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621681858553"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-496"></span><span>             </span><span class="annot"><a href="GHC.Cmm.Node.html#ForeignTarget"><span class="hs-identifier hs-type">ForeignTarget</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#ForeignConvention"><span class="hs-identifier hs-type">ForeignConvention</span></a></span><span> </span><span class="annot"><span class="annottext">CCallConv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[ForeignHint]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[ForeignHint]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CmmReturnInfo
</span><a href="GHC.Cmm.Node.html#CmmNeverReturns"><span class="hs-identifier hs-var">CmmNeverReturns</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-497"></span><span>             </span><span class="annot"><span class="annottext">ForeignTarget
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-498"></span><span>
</span><span id="line-499"></span><span>    </span><span class="hs-comment">-- fun type</span><span>
</span><span id="line-500"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681858592"><span class="annot"><span class="annottext">[ForeignHint]
</span><a href="#local-6989586621681858592"><span class="hs-identifier hs-var">res_hints</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858593"><span class="annot"><span class="annottext">[ForeignHint]
</span><a href="#local-6989586621681858593"><span class="hs-identifier hs-var">arg_hints</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignTarget -&gt; ([ForeignHint], [ForeignHint])
</span><a href="GHC.Cmm.Node.html#foreignTargetHints"><span class="hs-identifier hs-var">foreignTargetHints</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621681858553"><span class="hs-identifier hs-var">target</span></a></span><span>
</span><span id="line-501"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858594"><span class="annot"><span class="annottext">args_hints :: [(CmmExpr, ForeignHint)]
</span><a href="#local-6989586621681858594"><span class="hs-identifier hs-var hs-var">args_hints</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CmmExpr] -&gt; [ForeignHint] -&gt; [(CmmExpr, ForeignHint)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../../base-4.18.3.0/src/GHC.List.html#zip/GHC.List.html#zip"><span class="hs-identifier hs-var">zip</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681858555"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">[ForeignHint]
</span><a href="#local-6989586621681858593"><span class="hs-identifier hs-var">arg_hints</span></a></span><span>
</span><span id="line-502"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858595"><span class="annot"><span class="annottext">ress_hints :: [(CmmFormal, ForeignHint)]
</span><a href="#local-6989586621681858595"><span class="hs-identifier hs-var hs-var">ress_hints</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CmmFormal] -&gt; [ForeignHint] -&gt; [(CmmFormal, ForeignHint)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../../base-4.18.3.0/src/GHC.List.html#zip/GHC.List.html#zip"><span class="hs-identifier hs-var">zip</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621681858554"><span class="hs-identifier hs-var">res</span></a></span><span>  </span><span class="annot"><span class="annottext">[ForeignHint]
</span><a href="#local-6989586621681858592"><span class="hs-identifier hs-var">res_hints</span></a></span><span>
</span><span id="line-503"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858596"><span class="annot"><span class="annottext">ccTy :: LlvmCallType
</span><a href="#local-6989586621681858596"><span class="hs-identifier hs-var hs-var">ccTy</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmCallType
</span><a href="GHC.Llvm.Types.html#StdCall"><span class="hs-identifier hs-var">StdCall</span></a></span><span> </span><span class="hs-comment">-- tail calls should be done through CmmJump</span><span>
</span><span id="line-504"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858597"><span class="annot"><span class="annottext">retTy :: LlvmType
</span><a href="#local-6989586621681858597"><span class="hs-identifier hs-var hs-var">retTy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(CmmFormal, ForeignHint)] -&gt; LlvmType
</span><a href="#local-6989586621681858584"><span class="hs-identifier hs-var">ret_type</span></a></span><span> </span><span class="annot"><span class="annottext">[(CmmFormal, ForeignHint)]
</span><a href="#local-6989586621681858595"><span class="hs-identifier hs-var">ress_hints</span></a></span><span>
</span><span id="line-505"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858598"><span class="annot"><span class="annottext">argTy :: [LlvmParameter]
</span><a href="#local-6989586621681858598"><span class="hs-identifier hs-var hs-var">argTy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((CmmExpr, ForeignHint) -&gt; LlvmParameter)
-&gt; [(CmmExpr, ForeignHint)] -&gt; [LlvmParameter]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">(CmmExpr, ForeignHint) -&gt; LlvmParameter
</span><a href="#local-6989586621681858567"><span class="hs-identifier hs-var">arg_type</span></a></span><span> </span><span class="annot"><span class="annottext">[(CmmExpr, ForeignHint)]
</span><a href="#local-6989586621681858594"><span class="hs-identifier hs-var">args_hints</span></a></span><span>
</span><span id="line-506"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858599"><span class="annot"><span class="annottext">funTy :: LMString -&gt; LlvmType
</span><a href="#local-6989586621681858599"><span class="hs-identifier hs-var hs-var">funTy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681858600"><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858600"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmFunctionDecl -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#LMFunction"><span class="hs-identifier hs-var">LMFunction</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmFunctionDecl -&gt; LlvmType) -&gt; LlvmFunctionDecl -&gt; LlvmType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LMString
-&gt; LlvmLinkageType
-&gt; LlvmCallConvention
-&gt; LlvmType
-&gt; LlvmParameterListType
-&gt; [LlvmParameter]
-&gt; LMAlign
-&gt; LlvmFunctionDecl
</span><a href="GHC.Llvm.Types.html#LlvmFunctionDecl"><span class="hs-identifier hs-var">LlvmFunctionDecl</span></a></span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858600"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmLinkageType
</span><a href="GHC.Llvm.Types.html#ExternallyVisible"><span class="hs-identifier hs-var">ExternallyVisible</span></a></span><span>
</span><span id="line-507"></span><span>                             </span><span class="annot"><span class="annottext">LlvmCallConvention
</span><a href="#local-6989586621681858557"><span class="hs-identifier hs-var">lmconv</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858597"><span class="hs-identifier hs-var">retTy</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmParameterListType
</span><a href="GHC.Llvm.Types.html#FixedArgs"><span class="hs-identifier hs-var">FixedArgs</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmParameter]
</span><a href="#local-6989586621681858598"><span class="hs-identifier hs-var">argTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; LMAlign
</span><a href="GHC.CmmToLlvm.Base.html#llvmFunAlign"><span class="hs-identifier hs-var">llvmFunAlign</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681858556"><span class="hs-identifier hs-var">platform</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-508"></span><span>
</span><span id="line-509"></span><span>
</span><span id="line-510"></span><span>    </span><span id="local-6989586621681858602"><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858602"><span class="hs-identifier hs-var">argVars</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(CmmExpr, ForeignHint)]
-&gt; ([LlvmVar], LlvmStatements, [LlvmCmmDecl])
-&gt; WriterT LlvmAccum LlvmM [LlvmVar]
</span><a href="GHC.CmmToLlvm.CodeGen.html#arg_varsW"><span class="hs-identifier hs-var">arg_varsW</span></a></span><span> </span><span class="annot"><span class="annottext">[(CmmExpr, ForeignHint)]
</span><a href="#local-6989586621681858594"><span class="hs-identifier hs-var">args_hints</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-511"></span><span>    </span><span id="local-6989586621681858603"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858603"><span class="hs-identifier hs-var">fptr</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(LMString -&gt; LlvmType)
-&gt; ForeignTarget -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#getFunPtrW"><span class="hs-identifier hs-var">getFunPtrW</span></a></span><span> </span><span class="annot"><span class="annottext">LMString -&gt; LlvmType
</span><a href="#local-6989586621681858599"><span class="hs-identifier hs-var">funTy</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621681858553"><span class="hs-identifier hs-var">target</span></a></span><span>
</span><span id="line-512"></span><span>
</span><span id="line-513"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858604"><span class="annot"><span class="annottext">doReturn :: WriterT LlvmAccum LlvmM ()
</span><a href="#local-6989586621681858604"><span class="hs-identifier hs-var hs-var">doReturn</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LlvmCallType
</span><a href="#local-6989586621681858596"><span class="hs-identifier hs-var">ccTy</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCallType -&gt; LlvmCallType -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">LlvmCallType
</span><a href="GHC.Llvm.Types.html#TailCall"><span class="hs-identifier hs-var">TailCall</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
</span><a href="GHC.CmmToLlvm.CodeGen.html#statement"><span class="hs-identifier hs-var">statement</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmStatement -&gt; WriterT LlvmAccum LlvmM ())
-&gt; LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe LlvmVar -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Return"><span class="hs-identifier hs-var">Return</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe LlvmVar
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-514"></span><span>                 </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681858588"><span class="hs-identifier hs-var">never_returns</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
</span><a href="GHC.CmmToLlvm.CodeGen.html#statement"><span class="hs-identifier hs-var">statement</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmStatement -&gt; WriterT LlvmAccum LlvmM ())
-&gt; LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Unreachable"><span class="hs-identifier hs-var">Unreachable</span></a></span><span>
</span><span id="line-515"></span><span>                 </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; WriterT LlvmAccum LlvmM ()
forall a. a -&gt; WriterT LlvmAccum LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-516"></span><span>
</span><span id="line-517"></span><span>
</span><span id="line-518"></span><span>    </span><span class="hs-comment">-- make the actual call</span><span>
</span><span id="line-519"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858597"><span class="hs-identifier hs-var">retTy</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-520"></span><span>        </span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#LMVoid"><span class="hs-identifier hs-var">LMVoid</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-521"></span><span>            </span><span class="annot"><span class="annottext">LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
</span><a href="GHC.CmmToLlvm.CodeGen.html#statement"><span class="hs-identifier hs-var">statement</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmStatement -&gt; WriterT LlvmAccum LlvmM ())
-&gt; LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmExpression -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Expr"><span class="hs-identifier hs-var">Expr</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmStatement)
-&gt; LlvmExpression -&gt; LlvmStatement
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCallType
-&gt; LlvmVar -&gt; [LlvmVar] -&gt; [LlvmFuncAttr] -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Call"><span class="hs-identifier hs-var">Call</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCallType
</span><a href="#local-6989586621681858596"><span class="hs-identifier hs-var">ccTy</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858603"><span class="hs-identifier hs-var">fptr</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858602"><span class="hs-identifier hs-var">argVars</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmFuncAttr]
</span><a href="#local-6989586621681858587"><span class="hs-identifier hs-var">fnAttrs</span></a></span><span>
</span><span id="line-522"></span><span>        </span><span class="annot"><span class="annottext">LlvmType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-523"></span><span>            </span><span id="local-6989586621681858608"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858608"><span class="hs-identifier hs-var">v1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858597"><span class="hs-identifier hs-var">retTy</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCallType
-&gt; LlvmVar -&gt; [LlvmVar] -&gt; [LlvmFuncAttr] -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Call"><span class="hs-identifier hs-var">Call</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCallType
</span><a href="#local-6989586621681858596"><span class="hs-identifier hs-var">ccTy</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858603"><span class="hs-identifier hs-var">fptr</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858602"><span class="hs-identifier hs-var">argVars</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmFuncAttr]
</span><a href="#local-6989586621681858587"><span class="hs-identifier hs-var">fnAttrs</span></a></span><span>
</span><span id="line-524"></span><span>            </span><span class="hs-comment">-- get the return register</span><span>
</span><span id="line-525"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858613"><span class="annot"><span class="annottext">ret_reg :: [a] -&gt; a
</span><a href="#local-6989586621681858613"><span class="hs-identifier hs-var hs-var">ret_reg</span></a></span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621681858614"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681858614"><span class="hs-identifier hs-var">reg</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681858614"><span class="hs-identifier hs-var">reg</span></a></span><span>
</span><span id="line-526"></span><span>                </span><span class="annot"><a href="#local-6989586621681858613"><span class="hs-identifier hs-var">ret_reg</span></a></span><span> </span><span id="local-6989586621681858615"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681858615"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; a
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; a) -&gt; String -&gt; a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genCall: Bad number of registers! Can only handle&quot;</span></span><span>
</span><span id="line-527"></span><span>                                </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; 1, given &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../base-4.18.3.0/src/GHC.Show.html#show/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[a] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#length/Data.Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681858615"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.&quot;</span></span><span>
</span><span id="line-528"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858616"><span class="annot"><span class="annottext">creg :: CmmFormal
</span><a href="#local-6989586621681858616"><span class="hs-identifier hs-var hs-var">creg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CmmFormal] -&gt; CmmFormal
forall {a}. [a] -&gt; a
</span><a href="#local-6989586621681858613"><span class="hs-identifier hs-var">ret_reg</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621681858554"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-529"></span><span>            </span><span id="local-6989586621681858617"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858617"><span class="hs-identifier hs-var">vreg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmReg -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#getCmmRegW"><span class="hs-identifier hs-var">getCmmRegW</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmFormal -&gt; CmmReg
</span><a href="GHC.Cmm.Reg.html#CmmLocal"><span class="hs-identifier hs-var">CmmLocal</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858616"><span class="hs-identifier hs-var">creg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-530"></span><span>            </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858597"><span class="hs-identifier hs-var">retTy</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#pLower"><span class="hs-identifier hs-var">pLower</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858617"><span class="hs-identifier hs-var">vreg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-531"></span><span>                </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-532"></span><span>                    </span><span class="annot"><span class="annottext">LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
</span><a href="GHC.CmmToLlvm.CodeGen.html#statement"><span class="hs-identifier hs-var">statement</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmStatement -&gt; WriterT LlvmAccum LlvmM ())
-&gt; LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LMAlign -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Store"><span class="hs-identifier hs-var">Store</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858608"><span class="hs-identifier hs-var">v1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858617"><span class="hs-identifier hs-var">vreg</span></a></span><span> </span><span class="annot"><span class="annottext">LMAlign
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-533"></span><span>                    </span><span class="annot"><span class="annottext">WriterT LlvmAccum LlvmM ()
</span><a href="#local-6989586621681858604"><span class="hs-identifier hs-var">doReturn</span></a></span><span>
</span><span id="line-534"></span><span>                </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-535"></span><span>                    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858619"><span class="annot"><span class="annottext">ty :: LlvmType
</span><a href="#local-6989586621681858619"><span class="hs-identifier hs-var hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#pLower"><span class="hs-identifier hs-var">pLower</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmType -&gt; LlvmType) -&gt; LlvmType -&gt; LlvmType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858617"><span class="hs-identifier hs-var">vreg</span></a></span><span>
</span><span id="line-536"></span><span>                    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858620"><span class="annot"><span class="annottext">op :: LlvmCastOp
</span><a href="#local-6989586621681858620"><span class="hs-identifier hs-var hs-var">op</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858619"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-537"></span><span>                            </span><span id="local-6989586621681858621"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858621"><span class="hs-identifier hs-var">vt</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isPointer"><span class="hs-identifier hs-var">isPointer</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858621"><span class="hs-identifier hs-var">vt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Bitcast"><span class="hs-identifier hs-var">LM_Bitcast</span></a></span><span>
</span><span id="line-538"></span><span>                               </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isInt"><span class="hs-identifier hs-var">isInt</span></a></span><span>     </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858621"><span class="hs-identifier hs-var">vt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Ptrtoint"><span class="hs-identifier hs-var">LM_Ptrtoint</span></a></span><span>
</span><span id="line-539"></span><span>                               </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-540"></span><span>                                   </span><span class="annot"><span class="annottext">String -&gt; LlvmCastOp
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; LlvmCastOp) -&gt; String -&gt; LlvmCastOp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genCall: CmmReg bad match for&quot;</span></span><span>
</span><span id="line-541"></span><span>                                        </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; returned type!&quot;</span></span><span>
</span><span id="line-542"></span><span>
</span><span id="line-543"></span><span>                    </span><span id="local-6989586621681858626"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858626"><span class="hs-identifier hs-var">v2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858619"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="#local-6989586621681858620"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858608"><span class="hs-identifier hs-var">v1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858619"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-544"></span><span>                    </span><span class="annot"><span class="annottext">LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
</span><a href="GHC.CmmToLlvm.CodeGen.html#statement"><span class="hs-identifier hs-var">statement</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmStatement -&gt; WriterT LlvmAccum LlvmM ())
-&gt; LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LMAlign -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Store"><span class="hs-identifier hs-var">Store</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858626"><span class="hs-identifier hs-var">v2</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858617"><span class="hs-identifier hs-var">vreg</span></a></span><span> </span><span class="annot"><span class="annottext">LMAlign
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-545"></span><span>                    </span><span class="annot"><span class="annottext">WriterT LlvmAccum LlvmM ()
</span><a href="#local-6989586621681858604"><span class="hs-identifier hs-var">doReturn</span></a></span><span>
</span><span id="line-546"></span><span>
</span><span id="line-547"></span><span class="hs-comment">-- | Generate a call to an LLVM intrinsic that performs arithmetic operation</span><span>
</span><span id="line-548"></span><span class="hs-comment">-- with overflow bit (i.e., returns a struct containing the actual result of the</span><span>
</span><span id="line-549"></span><span class="hs-comment">-- operation and an overflow bit). This function will also extract the overflow</span><span>
</span><span id="line-550"></span><span class="hs-comment">-- bit and zero-extend it (all the corresponding Cmm PrimOps represent the</span><span>
</span><span id="line-551"></span><span class="hs-comment">-- overflow &quot;bit&quot; as a usual Int# or Word#).</span><span>
</span><span id="line-552"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCallWithOverflow"><span class="hs-identifier hs-type">genCallWithOverflow</span></a></span><span>
</span><span id="line-553"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Node.html#ForeignTarget"><span class="hs-identifier hs-type">ForeignTarget</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Node.html#CmmFormal"><span class="hs-identifier hs-type">CmmFormal</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Node.html#CmmActual"><span class="hs-identifier hs-type">CmmActual</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#StmtData"><span class="hs-identifier hs-type">StmtData</span></a></span><span>
</span><span id="line-554"></span><span id="genCallWithOverflow"><span class="annot"><span class="annottext">genCallWithOverflow :: ForeignTarget
-&gt; Width
-&gt; [CmmFormal]
-&gt; [CmmExpr]
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genCallWithOverflow"><span class="hs-identifier hs-var hs-var">genCallWithOverflow</span></a></span></span><span> </span><span id="local-6989586621681858627"><span class="annot"><span class="annottext">t :: ForeignTarget
</span><a href="#local-6989586621681858627"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span id="local-6989586621681858628"><span class="annot"><span class="annottext">CallishMachOp
</span><a href="#local-6989586621681858628"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681858629"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858629"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621681858630"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858630"><span class="hs-identifier hs-var">dstV</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858631"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858631"><span class="hs-identifier hs-var">dstO</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681858632"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858632"><span class="hs-identifier hs-var">lhs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858633"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858633"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-555"></span><span>    </span><span class="hs-comment">-- So far this was only tested for the following four CallishMachOps.</span><span>
</span><span id="line-556"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858634"><span class="annot"><span class="annottext">valid :: Bool
</span><a href="#local-6989586621681858634"><span class="hs-identifier hs-var hs-var">valid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="#local-6989586621681858628"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="annot"><span class="annottext">CallishMachOp -&gt; [CallishMachOp] -&gt; Bool
forall a. Eq a =&gt; a -&gt; [a] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#elem/Data.Foldable.html#elem"><span class="hs-operator hs-var">`elem`</span></a></span><span>   </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Width -&gt; CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_Add2"><span class="hs-identifier hs-var">MO_Add2</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858629"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-557"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Width -&gt; CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_AddIntC"><span class="hs-identifier hs-var">MO_AddIntC</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858629"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-558"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Width -&gt; CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_SubIntC"><span class="hs-identifier hs-var">MO_SubIntC</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858629"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-559"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Width -&gt; CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_AddWordC"><span class="hs-identifier hs-var">MO_AddWordC</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858629"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-560"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Width -&gt; CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_SubWordC"><span class="hs-identifier hs-var">MO_SubWordC</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858629"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-561"></span><span>                            </span><span class="hs-special">]</span><span>
</span><span id="line-562"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; LlvmM ()
forall (m :: * -&gt; *). (HasCallStack, Applicative m) =&gt; Bool -&gt; m ()
</span><a href="GHC.Utils.Panic.Plain.html#massert"><span class="hs-identifier hs-var">massert</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681858634"><span class="hs-identifier hs-var">valid</span></a></span><span>
</span><span id="line-563"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858635"><span class="annot"><span class="annottext">width :: LlvmType
</span><a href="#local-6989586621681858635"><span class="hs-identifier hs-var hs-var">width</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmInt"><span class="hs-identifier hs-var">widthToLlvmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858629"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-564"></span><span>    </span><span class="hs-comment">-- This will do most of the work of generating the call to the intrinsic and</span><span>
</span><span id="line-565"></span><span>    </span><span class="hs-comment">-- extracting the values from the struct.</span><span>
</span><span id="line-566"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681858636"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858636"><span class="hs-identifier hs-var">value</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858637"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858637"><span class="hs-identifier hs-var">overflowBit</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681858638"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858638"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858639"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858639"><span class="hs-identifier hs-var">top</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-567"></span><span>      </span><span class="annot"><span class="annottext">ForeignTarget
-&gt; Width
-&gt; (CmmExpr, CmmExpr)
-&gt; (LlvmType, LlvmType)
-&gt; LlvmM (LlvmVar, LlvmVar, (LlvmStatements, [LlvmCmmDecl]))
</span><a href="GHC.CmmToLlvm.CodeGen.html#genCallExtract"><span class="hs-identifier hs-var">genCallExtract</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621681858627"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858629"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858632"><span class="hs-identifier hs-var">lhs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858633"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858635"><span class="hs-identifier hs-var">width</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#i1"><span class="hs-identifier hs-var">i1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-568"></span><span>    </span><span class="hs-comment">-- value is i&lt;width&gt;, but overflowBit is i1, so we need to cast (Cmm expects</span><span>
</span><span id="line-569"></span><span>    </span><span class="hs-comment">-- both to be i&lt;width&gt;)</span><span>
</span><span id="line-570"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681858641"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858641"><span class="hs-identifier hs-var">overflow</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858642"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858642"><span class="hs-identifier hs-var">zext</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858635"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Zext"><span class="hs-identifier hs-var">LM_Zext</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858637"><span class="hs-identifier hs-var">overflowBit</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858635"><span class="hs-identifier hs-var">width</span></a></span><span>
</span><span id="line-571"></span><span>    </span><span id="local-6989586621681858644"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858644"><span class="hs-identifier hs-var">dstRegV</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmReg -&gt; LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#getCmmReg"><span class="hs-identifier hs-var">getCmmReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmFormal -&gt; CmmReg
</span><a href="GHC.Cmm.Reg.html#CmmLocal"><span class="hs-identifier hs-var">CmmLocal</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858630"><span class="hs-identifier hs-var">dstV</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-572"></span><span>    </span><span id="local-6989586621681858645"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858645"><span class="hs-identifier hs-var">dstRegO</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmReg -&gt; LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#getCmmReg"><span class="hs-identifier hs-var">getCmmReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmFormal -&gt; CmmReg
</span><a href="GHC.Cmm.Reg.html#CmmLocal"><span class="hs-identifier hs-var">CmmLocal</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858631"><span class="hs-identifier hs-var">dstO</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-573"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858646"><span class="annot"><span class="annottext">storeV :: LlvmStatement
</span><a href="#local-6989586621681858646"><span class="hs-identifier hs-var hs-var">storeV</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LMAlign -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Store"><span class="hs-identifier hs-var">Store</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858636"><span class="hs-identifier hs-var">value</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858644"><span class="hs-identifier hs-var">dstRegV</span></a></span><span> </span><span class="annot"><span class="annottext">LMAlign
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-574"></span><span>        </span><span id="local-6989586621681858647"><span class="annot"><span class="annottext">storeO :: LlvmStatement
</span><a href="#local-6989586621681858647"><span class="hs-identifier hs-var hs-var">storeO</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LMAlign -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Store"><span class="hs-identifier hs-var">Store</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858641"><span class="hs-identifier hs-var">overflow</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858645"><span class="hs-identifier hs-var">dstRegO</span></a></span><span> </span><span class="annot"><span class="annottext">LMAlign
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-575"></span><span>    </span><span class="annot"><span class="annottext">(LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858638"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858642"><span class="hs-identifier hs-var">zext</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858646"><span class="hs-identifier hs-var">storeV</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858647"><span class="hs-identifier hs-var">storeO</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858639"><span class="hs-identifier hs-var">top</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-576"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCallWithOverflow"><span class="hs-identifier hs-var">genCallWithOverflow</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-577"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genCallExtract: wrong ForeignTarget or number of arguments&quot;</span></span><span>
</span><span id="line-578"></span><span>
</span><span id="line-579"></span><span class="hs-comment">-- | A helper function for genCallWithOverflow that handles generating the call</span><span>
</span><span id="line-580"></span><span class="hs-comment">-- to the LLVM intrinsic and extracting the result from the struct to LlvmVars.</span><span>
</span><span id="line-581"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCallExtract"><span class="hs-identifier hs-type">genCallExtract</span></a></span><span>
</span><span id="line-582"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Node.html#ForeignTarget"><span class="hs-identifier hs-type">ForeignTarget</span></a></span><span>           </span><span class="annot"><span class="hs-comment">-- ^ PrimOp</span></span><span>
</span><span id="line-583"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span>                   </span><span class="annot"><span class="hs-comment">-- ^ Width of the operands.</span></span><span>
</span><span id="line-584"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#CmmActual"><span class="hs-identifier hs-type">CmmActual</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Node.html#CmmActual"><span class="hs-identifier hs-type">CmmActual</span></a></span><span class="hs-special">)</span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Actual arguments.</span></span><span>
</span><span id="line-585"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmType"><span class="hs-identifier hs-type">LlvmType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmType"><span class="hs-identifier hs-type">LlvmType</span></a></span><span class="hs-special">)</span><span>    </span><span class="annot"><span class="hs-comment">-- ^ LLVM types of the returned struct.</span></span><span>
</span><span id="line-586"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#StmtData"><span class="hs-identifier hs-type">StmtData</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-587"></span><span id="genCallExtract"><span class="annot"><span class="annottext">genCallExtract :: ForeignTarget
-&gt; Width
-&gt; (CmmExpr, CmmExpr)
-&gt; (LlvmType, LlvmType)
-&gt; LlvmM (LlvmVar, LlvmVar, (LlvmStatements, [LlvmCmmDecl]))
</span><a href="GHC.CmmToLlvm.CodeGen.html#genCallExtract"><span class="hs-identifier hs-var hs-var">genCallExtract</span></a></span></span><span> </span><span id="local-6989586621681858649"><span class="annot"><span class="annottext">target :: ForeignTarget
</span><a href="#local-6989586621681858649"><span class="hs-identifier hs-var">target</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span id="local-6989586621681858650"><span class="annot"><span class="annottext">CallishMachOp
</span><a href="#local-6989586621681858650"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681858651"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858651"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681858652"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858652"><span class="hs-identifier hs-var">argA</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858653"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858653"><span class="hs-identifier hs-var">argB</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681858654"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858654"><span class="hs-identifier hs-var">llvmTypeA</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858655"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858655"><span class="hs-identifier hs-var">llvmTypeB</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-588"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858656"><span class="annot"><span class="annottext">width :: LlvmType
</span><a href="#local-6989586621681858656"><span class="hs-identifier hs-var hs-var">width</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmInt"><span class="hs-identifier hs-var">widthToLlvmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858651"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-589"></span><span>        </span><span id="local-6989586621681858657"><span class="annot"><span class="annottext">argTy :: [LlvmType]
</span><a href="#local-6989586621681858657"><span class="hs-identifier hs-var hs-var">argTy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858656"><span class="hs-identifier hs-var">width</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858656"><span class="hs-identifier hs-var">width</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-590"></span><span>        </span><span id="local-6989586621681858658"><span class="annot"><span class="annottext">retTy :: LlvmType
</span><a href="#local-6989586621681858658"><span class="hs-identifier hs-var hs-var">retTy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LlvmType] -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#LMStructU"><span class="hs-identifier hs-var">LMStructU</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858654"><span class="hs-identifier hs-var">llvmTypeA</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858655"><span class="hs-identifier hs-var">llvmTypeB</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-591"></span><span>
</span><span id="line-592"></span><span>    </span><span class="hs-comment">-- Process the arguments.</span><span>
</span><span id="line-593"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858659"><span class="annot"><span class="annottext">args_hints :: [(CmmExpr, ForeignHint)]
</span><a href="#local-6989586621681858659"><span class="hs-identifier hs-var hs-var">args_hints</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CmmExpr] -&gt; [ForeignHint] -&gt; [(CmmExpr, ForeignHint)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../../base-4.18.3.0/src/GHC.List.html#zip/GHC.List.html#zip"><span class="hs-identifier hs-var">zip</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858652"><span class="hs-identifier hs-var">argA</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858653"><span class="hs-identifier hs-var">argB</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([ForeignHint], [ForeignHint]) -&gt; [ForeignHint]
forall a b. (a, b) -&gt; b
</span><a href="../../base-4.18.3.0/src/Data.Tuple.html#snd/Data.Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">(([ForeignHint], [ForeignHint]) -&gt; [ForeignHint])
-&gt; ([ForeignHint], [ForeignHint]) -&gt; [ForeignHint]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignTarget -&gt; ([ForeignHint], [ForeignHint])
</span><a href="GHC.Cmm.Node.html#foreignTargetHints"><span class="hs-identifier hs-var">foreignTargetHints</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621681858649"><span class="hs-identifier hs-var">target</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-594"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681858661"><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858661"><span class="hs-identifier hs-var">argsV1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858662"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858662"><span class="hs-identifier hs-var">args1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858663"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858663"><span class="hs-identifier hs-var">top1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(CmmExpr, ForeignHint)]
-&gt; ([LlvmVar], LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM ([LlvmVar], LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#arg_vars"><span class="hs-identifier hs-var">arg_vars</span></a></span><span> </span><span class="annot"><span class="annottext">[(CmmExpr, ForeignHint)]
</span><a href="#local-6989586621681858659"><span class="hs-identifier hs-var">args_hints</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-595"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681858665"><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858665"><span class="hs-identifier hs-var">argsV2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858666"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858666"><span class="hs-identifier hs-var">args2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Signage
-&gt; [(LlvmVar, LlvmType)] -&gt; LlvmM ([LlvmVar], LlvmStatements)
</span><a href="GHC.CmmToLlvm.CodeGen.html#castVars"><span class="hs-identifier hs-var">castVars</span></a></span><span> </span><span class="annot"><span class="annottext">Signage
</span><a href="GHC.CmmToLlvm.CodeGen.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">([(LlvmVar, LlvmType)] -&gt; LlvmM ([LlvmVar], LlvmStatements))
-&gt; [(LlvmVar, LlvmType)] -&gt; LlvmM ([LlvmVar], LlvmStatements)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmVar] -&gt; [LlvmType] -&gt; [(LlvmVar, LlvmType)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../../base-4.18.3.0/src/GHC.List.html#zip/GHC.List.html#zip"><span class="hs-identifier hs-var">zip</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858661"><span class="hs-identifier hs-var">argsV1</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmType]
</span><a href="#local-6989586621681858657"><span class="hs-identifier hs-var">argTy</span></a></span><span>
</span><span id="line-596"></span><span>
</span><span id="line-597"></span><span>    </span><span class="hs-comment">-- Get the function and make the call.</span><span>
</span><span id="line-598"></span><span>    </span><span id="local-6989586621681858668"><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858668"><span class="hs-identifier hs-var">fname</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CallishMachOp -&gt; LlvmM LMString
</span><a href="GHC.CmmToLlvm.CodeGen.html#cmmPrimOpFunctions"><span class="hs-identifier hs-var">cmmPrimOpFunctions</span></a></span><span> </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="#local-6989586621681858650"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-599"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681858670"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858670"><span class="hs-identifier hs-var">fptr</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858671"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858671"><span class="hs-identifier hs-var">top2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LMString -&gt; LlvmType -&gt; [LlvmType] -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#getInstrinct"><span class="hs-identifier hs-var">getInstrinct</span></a></span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858668"><span class="hs-identifier hs-var">fname</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858658"><span class="hs-identifier hs-var">retTy</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmType]
</span><a href="#local-6989586621681858657"><span class="hs-identifier hs-var">argTy</span></a></span><span>
</span><span id="line-600"></span><span>    </span><span class="hs-comment">-- We use StdCall for primops. See also the last case of genCall.</span><span>
</span><span id="line-601"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681858672"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858672"><span class="hs-identifier hs-var">retV</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858673"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858673"><span class="hs-identifier hs-var">call</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858658"><span class="hs-identifier hs-var">retTy</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCallType
-&gt; LlvmVar -&gt; [LlvmVar] -&gt; [LlvmFuncAttr] -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Call"><span class="hs-identifier hs-var">Call</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCallType
</span><a href="GHC.Llvm.Types.html#StdCall"><span class="hs-identifier hs-var">StdCall</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858670"><span class="hs-identifier hs-var">fptr</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858665"><span class="hs-identifier hs-var">argsV2</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-602"></span><span>
</span><span id="line-603"></span><span>    </span><span class="hs-comment">-- This will result in a two element struct, we need to use &quot;extractvalue&quot;</span><span>
</span><span id="line-604"></span><span>    </span><span class="hs-comment">-- to get them out of it.</span><span>
</span><span id="line-605"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681858674"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858674"><span class="hs-identifier hs-var">res1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858675"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858675"><span class="hs-identifier hs-var">ext1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858654"><span class="hs-identifier hs-var">llvmTypeA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar -&gt; Int -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#ExtractV"><span class="hs-identifier hs-var">ExtractV</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858672"><span class="hs-identifier hs-var">retV</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-606"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681858676"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858676"><span class="hs-identifier hs-var">res2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858677"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858677"><span class="hs-identifier hs-var">ext2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858655"><span class="hs-identifier hs-var">llvmTypeB</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar -&gt; Int -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#ExtractV"><span class="hs-identifier hs-var">ExtractV</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858672"><span class="hs-identifier hs-var">retV</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-607"></span><span>
</span><span id="line-608"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858678"><span class="annot"><span class="annottext">stmts :: LlvmStatements
</span><a href="#local-6989586621681858678"><span class="hs-identifier hs-var hs-var">stmts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858662"><span class="hs-identifier hs-var">args1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatements -&gt; LlvmStatements
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858666"><span class="hs-identifier hs-var">args2</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858673"><span class="hs-identifier hs-var">call</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858675"><span class="hs-identifier hs-var">ext1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858677"><span class="hs-identifier hs-var">ext2</span></a></span><span>
</span><span id="line-609"></span><span>        </span><span id="local-6989586621681858679"><span class="annot"><span class="annottext">tops :: [LlvmCmmDecl]
</span><a href="#local-6989586621681858679"><span class="hs-identifier hs-var hs-var">tops</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858663"><span class="hs-identifier hs-var">top1</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl] -&gt; [LlvmCmmDecl] -&gt; [LlvmCmmDecl]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858671"><span class="hs-identifier hs-var">top2</span></a></span><span>
</span><span id="line-610"></span><span>    </span><span class="annot"><span class="annottext">(LlvmVar, LlvmVar, (LlvmStatements, [LlvmCmmDecl]))
-&gt; LlvmM (LlvmVar, LlvmVar, (LlvmStatements, [LlvmCmmDecl]))
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858674"><span class="hs-identifier hs-var">res1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858676"><span class="hs-identifier hs-var">res2</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858678"><span class="hs-identifier hs-var">stmts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858679"><span class="hs-identifier hs-var">tops</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-611"></span><span>
</span><span id="line-612"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCallExtract"><span class="hs-identifier hs-var">genCallExtract</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">(CmmExpr, CmmExpr)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">(LlvmType, LlvmType)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-613"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; LlvmM (LlvmVar, LlvmVar, (LlvmStatements, [LlvmCmmDecl]))
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genCallExtract: unsupported ForeignTarget&quot;</span></span><span>
</span><span id="line-614"></span><span>
</span><span id="line-615"></span><span class="hs-comment">-- Handle simple function call that only need simple type casting, of the form:</span><span>
</span><span id="line-616"></span><span class="hs-comment">--   truncate arg &gt;&gt;= \a -&gt; call(a) &gt;&gt;= zext</span><span>
</span><span id="line-617"></span><span class="hs-comment">--</span><span>
</span><span id="line-618"></span><span class="hs-comment">-- since GHC only really has i32 and i64 types and things like Word8 are backed</span><span>
</span><span id="line-619"></span><span class="hs-comment">-- by an i32 and just present a logical i8 range. So we must handle conversions</span><span>
</span><span id="line-620"></span><span class="hs-comment">-- from i32 to i8 explicitly as LLVM is strict about types.</span><span>
</span><span id="line-621"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCallSimpleCast"><span class="hs-identifier hs-type">genCallSimpleCast</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Node.html#ForeignTarget"><span class="hs-identifier hs-type">ForeignTarget</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Node.html#CmmFormal"><span class="hs-identifier hs-type">CmmFormal</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Node.html#CmmActual"><span class="hs-identifier hs-type">CmmActual</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-622"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#StmtData"><span class="hs-identifier hs-type">StmtData</span></a></span><span>
</span><span id="line-623"></span><span id="genCallSimpleCast"><span class="annot"><span class="annottext">genCallSimpleCast :: Width
-&gt; ForeignTarget
-&gt; [CmmFormal]
-&gt; [CmmExpr]
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genCallSimpleCast"><span class="hs-identifier hs-var hs-var">genCallSimpleCast</span></a></span></span><span> </span><span id="local-6989586621681858680"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858680"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621681858681"><span class="annot"><span class="annottext">t :: ForeignTarget
</span><a href="#local-6989586621681858681"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span id="local-6989586621681858682"><span class="annot"><span class="annottext">CallishMachOp
</span><a href="#local-6989586621681858682"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681858683"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858683"><span class="hs-identifier hs-var">dst</span></a></span></span><span class="hs-special">]</span><span> </span><span id="local-6989586621681858684"><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681858684"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-624"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858685"><span class="annot"><span class="annottext">width :: LlvmType
</span><a href="#local-6989586621681858685"><span class="hs-identifier hs-var hs-var">width</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmInt"><span class="hs-identifier hs-var">widthToLlvmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858680"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-625"></span><span>        </span><span id="local-6989586621681858686"><span class="annot"><span class="annottext">dstTy :: LlvmType
</span><a href="#local-6989586621681858686"><span class="hs-identifier hs-var hs-var">dstTy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#cmmToLlvmType"><span class="hs-identifier hs-var">cmmToLlvmType</span></a></span><span> </span><span class="annot"><span class="annottext">(CmmType -&gt; LlvmType) -&gt; CmmType -&gt; LlvmType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal -&gt; CmmType
</span><a href="GHC.Cmm.Reg.html#localRegType"><span class="hs-identifier hs-var">localRegType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858683"><span class="hs-identifier hs-var">dst</span></a></span><span>
</span><span id="line-626"></span><span>
</span><span id="line-627"></span><span>    </span><span id="local-6989586621681858687"><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858687"><span class="hs-identifier hs-var">fname</span></a></span></span><span>                       </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CallishMachOp -&gt; LlvmM LMString
</span><a href="GHC.CmmToLlvm.CodeGen.html#cmmPrimOpFunctions"><span class="hs-identifier hs-var">cmmPrimOpFunctions</span></a></span><span> </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="#local-6989586621681858682"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-628"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681858688"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858688"><span class="hs-identifier hs-var">fptr</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858689"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858689"><span class="hs-identifier hs-var">top3</span></a></span></span><span class="hs-special">)</span><span>             </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LMString -&gt; LlvmType -&gt; [LlvmType] -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#getInstrinct"><span class="hs-identifier hs-var">getInstrinct</span></a></span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858687"><span class="hs-identifier hs-var">fname</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858685"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858685"><span class="hs-identifier hs-var">width</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-629"></span><span>
</span><span id="line-630"></span><span>    </span><span id="local-6989586621681858690"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858690"><span class="hs-identifier hs-var">dstV</span></a></span></span><span>                        </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmReg -&gt; LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#getCmmReg"><span class="hs-identifier hs-var">getCmmReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmFormal -&gt; CmmReg
</span><a href="GHC.Cmm.Reg.html#CmmLocal"><span class="hs-identifier hs-var">CmmLocal</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858683"><span class="hs-identifier hs-var">dst</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-631"></span><span>
</span><span id="line-632"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ForeignHint]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858691"><span class="annot"><span class="annottext">[ForeignHint]
</span><a href="#local-6989586621681858691"><span class="hs-identifier hs-var">arg_hints</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignTarget -&gt; ([ForeignHint], [ForeignHint])
</span><a href="GHC.Cmm.Node.html#foreignTargetHints"><span class="hs-identifier hs-var">foreignTargetHints</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621681858681"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-633"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858692"><span class="annot"><span class="annottext">args_hints :: [(CmmExpr, ForeignHint)]
</span><a href="#local-6989586621681858692"><span class="hs-identifier hs-var hs-var">args_hints</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CmmExpr] -&gt; [ForeignHint] -&gt; [(CmmExpr, ForeignHint)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../../base-4.18.3.0/src/GHC.List.html#zip/GHC.List.html#zip"><span class="hs-identifier hs-var">zip</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681858684"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">[ForeignHint]
</span><a href="#local-6989586621681858691"><span class="hs-identifier hs-var">arg_hints</span></a></span><span>
</span><span id="line-634"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681858693"><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858693"><span class="hs-identifier hs-var">argsV</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858694"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858694"><span class="hs-identifier hs-var">stmts2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858695"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858695"><span class="hs-identifier hs-var">top2</span></a></span></span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(CmmExpr, ForeignHint)]
-&gt; ([LlvmVar], LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM ([LlvmVar], LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#arg_vars"><span class="hs-identifier hs-var">arg_vars</span></a></span><span> </span><span class="annot"><span class="annottext">[(CmmExpr, ForeignHint)]
</span><a href="#local-6989586621681858692"><span class="hs-identifier hs-var">args_hints</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-635"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681858696"><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858696"><span class="hs-identifier hs-var">argsV'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858697"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858697"><span class="hs-identifier hs-var">stmts4</span></a></span></span><span class="hs-special">)</span><span>            </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Signage
-&gt; [(LlvmVar, LlvmType)] -&gt; LlvmM ([LlvmVar], LlvmStatements)
</span><a href="GHC.CmmToLlvm.CodeGen.html#castVars"><span class="hs-identifier hs-var">castVars</span></a></span><span> </span><span class="annot"><span class="annottext">Signage
</span><a href="GHC.CmmToLlvm.CodeGen.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">([(LlvmVar, LlvmType)] -&gt; LlvmM ([LlvmVar], LlvmStatements))
-&gt; [(LlvmVar, LlvmType)] -&gt; LlvmM ([LlvmVar], LlvmStatements)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmVar] -&gt; [LlvmType] -&gt; [(LlvmVar, LlvmType)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../../base-4.18.3.0/src/GHC.List.html#zip/GHC.List.html#zip"><span class="hs-identifier hs-var">zip</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858693"><span class="hs-identifier hs-var">argsV</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858685"><span class="hs-identifier hs-var">width</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-636"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681858698"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858698"><span class="hs-identifier hs-var">retV</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858699"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858699"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">)</span><span>                  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858685"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCallType
-&gt; LlvmVar -&gt; [LlvmVar] -&gt; [LlvmFuncAttr] -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Call"><span class="hs-identifier hs-var">Call</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCallType
</span><a href="GHC.Llvm.Types.html#StdCall"><span class="hs-identifier hs-var">StdCall</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858688"><span class="hs-identifier hs-var">fptr</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858696"><span class="hs-identifier hs-var">argsV'</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-637"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681858700"><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858700"><span class="hs-identifier hs-var">retVs'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858701"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858701"><span class="hs-identifier hs-var">stmts5</span></a></span></span><span class="hs-special">)</span><span>            </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Signage
-&gt; [(LlvmVar, LlvmType)] -&gt; LlvmM ([LlvmVar], LlvmStatements)
</span><a href="GHC.CmmToLlvm.CodeGen.html#castVars"><span class="hs-identifier hs-var">castVars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CallishMachOp -&gt; Signage
</span><a href="GHC.CmmToLlvm.CodeGen.html#cmmPrimOpRetValSignage"><span class="hs-identifier hs-var">cmmPrimOpRetValSignage</span></a></span><span> </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="#local-6989586621681858682"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858698"><span class="hs-identifier hs-var">retV</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858686"><span class="hs-identifier hs-var">dstTy</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-638"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858703"><span class="annot"><span class="annottext">retV' :: LlvmVar
</span><a href="#local-6989586621681858703"><span class="hs-identifier hs-var hs-var">retV'</span></a></span></span><span>                    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; [LlvmVar] -&gt; LlvmVar
forall a. String -&gt; [a] -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#singletonPanic"><span class="hs-identifier hs-var">singletonPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genCallSimpleCast&quot;</span></span><span> </span><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858700"><span class="hs-identifier hs-var">retVs'</span></a></span><span>
</span><span id="line-639"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858705"><span class="annot"><span class="annottext">s2 :: LlvmStatement
</span><a href="#local-6989586621681858705"><span class="hs-identifier hs-var hs-var">s2</span></a></span></span><span>                       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LMAlign -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Store"><span class="hs-identifier hs-var">Store</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858703"><span class="hs-identifier hs-var">retV'</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858690"><span class="hs-identifier hs-var">dstV</span></a></span><span> </span><span class="annot"><span class="annottext">LMAlign
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-640"></span><span>
</span><span id="line-641"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858706"><span class="annot"><span class="annottext">stmts :: LlvmStatements
</span><a href="#local-6989586621681858706"><span class="hs-identifier hs-var hs-var">stmts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858694"><span class="hs-identifier hs-var">stmts2</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatements -&gt; LlvmStatements
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858697"><span class="hs-identifier hs-var">stmts4</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span>
</span><span id="line-642"></span><span>                </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858699"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatements -&gt; LlvmStatements
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858701"><span class="hs-identifier hs-var">stmts5</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858705"><span class="hs-identifier hs-var">s2</span></a></span><span>
</span><span id="line-643"></span><span>    </span><span class="annot"><span class="annottext">(LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858706"><span class="hs-identifier hs-var">stmts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858695"><span class="hs-identifier hs-var">top2</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl] -&gt; [LlvmCmmDecl] -&gt; [LlvmCmmDecl]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858689"><span class="hs-identifier hs-var">top3</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-644"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCallSimpleCast"><span class="hs-identifier hs-var">genCallSimpleCast</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681858707"><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621681858707"><span class="hs-identifier hs-var">dsts</span></a></span></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-645"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genCallSimpleCast: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../base-4.18.3.0/src/GHC.Show.html#show/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[CmmFormal] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#length/Data.Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621681858707"><span class="hs-identifier hs-var">dsts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; dsts&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-646"></span><span>
</span><span id="line-647"></span><span class="hs-comment">-- Handle simple function call that only need simple type casting, of the form:</span><span>
</span><span id="line-648"></span><span class="hs-comment">--   truncate arg &gt;&gt;= \a -&gt; call(a) &gt;&gt;= zext</span><span>
</span><span id="line-649"></span><span class="hs-comment">--</span><span>
</span><span id="line-650"></span><span class="hs-comment">-- since GHC only really has i32 and i64 types and things like Word8 are backed</span><span>
</span><span id="line-651"></span><span class="hs-comment">-- by an i32 and just present a logical i8 range. So we must handle conversions</span><span>
</span><span id="line-652"></span><span class="hs-comment">-- from i32 to i8 explicitly as LLVM is strict about types.</span><span>
</span><span id="line-653"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCallSimpleCast2"><span class="hs-identifier hs-type">genCallSimpleCast2</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Node.html#ForeignTarget"><span class="hs-identifier hs-type">ForeignTarget</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Node.html#CmmFormal"><span class="hs-identifier hs-type">CmmFormal</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Node.html#CmmActual"><span class="hs-identifier hs-type">CmmActual</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-654"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#StmtData"><span class="hs-identifier hs-type">StmtData</span></a></span><span>
</span><span id="line-655"></span><span id="genCallSimpleCast2"><span class="annot"><span class="annottext">genCallSimpleCast2 :: Width
-&gt; ForeignTarget
-&gt; [CmmFormal]
-&gt; [CmmExpr]
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genCallSimpleCast2"><span class="hs-identifier hs-var hs-var">genCallSimpleCast2</span></a></span></span><span> </span><span id="local-6989586621681858708"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858708"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621681858709"><span class="annot"><span class="annottext">t :: ForeignTarget
</span><a href="#local-6989586621681858709"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span id="local-6989586621681858710"><span class="annot"><span class="annottext">CallishMachOp
</span><a href="#local-6989586621681858710"><span class="hs-identifier hs-var">op</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681858711"><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858711"><span class="hs-identifier hs-var">dst</span></a></span></span><span class="hs-special">]</span><span> </span><span id="local-6989586621681858712"><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681858712"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-656"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858713"><span class="annot"><span class="annottext">width :: LlvmType
</span><a href="#local-6989586621681858713"><span class="hs-identifier hs-var hs-var">width</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmInt"><span class="hs-identifier hs-var">widthToLlvmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858708"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-657"></span><span>        </span><span id="local-6989586621681858714"><span class="annot"><span class="annottext">dstTy :: LlvmType
</span><a href="#local-6989586621681858714"><span class="hs-identifier hs-var hs-var">dstTy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#cmmToLlvmType"><span class="hs-identifier hs-var">cmmToLlvmType</span></a></span><span> </span><span class="annot"><span class="annottext">(CmmType -&gt; LlvmType) -&gt; CmmType -&gt; LlvmType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal -&gt; CmmType
</span><a href="GHC.Cmm.Reg.html#localRegType"><span class="hs-identifier hs-var">localRegType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858711"><span class="hs-identifier hs-var">dst</span></a></span><span>
</span><span id="line-658"></span><span>
</span><span id="line-659"></span><span>    </span><span id="local-6989586621681858715"><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858715"><span class="hs-identifier hs-var">fname</span></a></span></span><span>                       </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CallishMachOp -&gt; LlvmM LMString
</span><a href="GHC.CmmToLlvm.CodeGen.html#cmmPrimOpFunctions"><span class="hs-identifier hs-var">cmmPrimOpFunctions</span></a></span><span> </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="#local-6989586621681858710"><span class="hs-identifier hs-var">op</span></a></span><span>
</span><span id="line-660"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681858716"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858716"><span class="hs-identifier hs-var">fptr</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858717"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858717"><span class="hs-identifier hs-var">top3</span></a></span></span><span class="hs-special">)</span><span>             </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LMString -&gt; LlvmType -&gt; [LlvmType] -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#getInstrinct"><span class="hs-identifier hs-var">getInstrinct</span></a></span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858715"><span class="hs-identifier hs-var">fname</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858713"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmType -&gt; CmmExpr -&gt; LlvmType
forall a b. a -&gt; b -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#const/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858713"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">(CmmExpr -&gt; LlvmType) -&gt; [CmmExpr] -&gt; [LlvmType]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/Data.Functor.html#%3C%24%3E/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681858712"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-661"></span><span>
</span><span id="line-662"></span><span>    </span><span id="local-6989586621681858720"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858720"><span class="hs-identifier hs-var">dstV</span></a></span></span><span>                        </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmReg -&gt; LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#getCmmReg"><span class="hs-identifier hs-var">getCmmReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmFormal -&gt; CmmReg
</span><a href="GHC.Cmm.Reg.html#CmmLocal"><span class="hs-identifier hs-var">CmmLocal</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal
</span><a href="#local-6989586621681858711"><span class="hs-identifier hs-var">dst</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-663"></span><span>
</span><span id="line-664"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ForeignHint]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858721"><span class="annot"><span class="annottext">[ForeignHint]
</span><a href="#local-6989586621681858721"><span class="hs-identifier hs-var">arg_hints</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForeignTarget -&gt; ([ForeignHint], [ForeignHint])
</span><a href="GHC.Cmm.Node.html#foreignTargetHints"><span class="hs-identifier hs-var">foreignTargetHints</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621681858709"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-665"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858722"><span class="annot"><span class="annottext">args_hints :: [(CmmExpr, ForeignHint)]
</span><a href="#local-6989586621681858722"><span class="hs-identifier hs-var hs-var">args_hints</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CmmExpr] -&gt; [ForeignHint] -&gt; [(CmmExpr, ForeignHint)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../../base-4.18.3.0/src/GHC.List.html#zip/GHC.List.html#zip"><span class="hs-identifier hs-var">zip</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681858712"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">[ForeignHint]
</span><a href="#local-6989586621681858721"><span class="hs-identifier hs-var">arg_hints</span></a></span><span>
</span><span id="line-666"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681858723"><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858723"><span class="hs-identifier hs-var">argsV</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858724"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858724"><span class="hs-identifier hs-var">stmts2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858725"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858725"><span class="hs-identifier hs-var">top2</span></a></span></span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(CmmExpr, ForeignHint)]
-&gt; ([LlvmVar], LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM ([LlvmVar], LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#arg_vars"><span class="hs-identifier hs-var">arg_vars</span></a></span><span> </span><span class="annot"><span class="annottext">[(CmmExpr, ForeignHint)]
</span><a href="#local-6989586621681858722"><span class="hs-identifier hs-var">args_hints</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-667"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681858726"><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858726"><span class="hs-identifier hs-var">argsV'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858727"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858727"><span class="hs-identifier hs-var">stmts4</span></a></span></span><span class="hs-special">)</span><span>            </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Signage
-&gt; [(LlvmVar, LlvmType)] -&gt; LlvmM ([LlvmVar], LlvmStatements)
</span><a href="GHC.CmmToLlvm.CodeGen.html#castVars"><span class="hs-identifier hs-var">castVars</span></a></span><span> </span><span class="annot"><span class="annottext">Signage
</span><a href="GHC.CmmToLlvm.CodeGen.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="annot"><span class="annottext">([(LlvmVar, LlvmType)] -&gt; LlvmM ([LlvmVar], LlvmStatements))
-&gt; [(LlvmVar, LlvmType)] -&gt; LlvmM ([LlvmVar], LlvmStatements)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmVar] -&gt; [LlvmType] -&gt; [(LlvmVar, LlvmType)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../../base-4.18.3.0/src/GHC.List.html#zip/GHC.List.html#zip"><span class="hs-identifier hs-var">zip</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858723"><span class="hs-identifier hs-var">argsV</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmVar -&gt; LlvmType
forall a b. a -&gt; b -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#const/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858713"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmVar -&gt; LlvmType) -&gt; [LlvmVar] -&gt; [LlvmType]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/Data.Functor.html#%3C%24%3E/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858723"><span class="hs-identifier hs-var">argsV</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-668"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681858728"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858728"><span class="hs-identifier hs-var">retV</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858729"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858729"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">)</span><span>                  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858713"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCallType
-&gt; LlvmVar -&gt; [LlvmVar] -&gt; [LlvmFuncAttr] -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Call"><span class="hs-identifier hs-var">Call</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCallType
</span><a href="GHC.Llvm.Types.html#StdCall"><span class="hs-identifier hs-var">StdCall</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858716"><span class="hs-identifier hs-var">fptr</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858726"><span class="hs-identifier hs-var">argsV'</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-669"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681858730"><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858730"><span class="hs-identifier hs-var">retVs'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858731"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858731"><span class="hs-identifier hs-var">stmts5</span></a></span></span><span class="hs-special">)</span><span>             </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Signage
-&gt; [(LlvmVar, LlvmType)] -&gt; LlvmM ([LlvmVar], LlvmStatements)
</span><a href="GHC.CmmToLlvm.CodeGen.html#castVars"><span class="hs-identifier hs-var">castVars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CallishMachOp -&gt; Signage
</span><a href="GHC.CmmToLlvm.CodeGen.html#cmmPrimOpRetValSignage"><span class="hs-identifier hs-var">cmmPrimOpRetValSignage</span></a></span><span> </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="#local-6989586621681858710"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858728"><span class="hs-identifier hs-var">retV</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858714"><span class="hs-identifier hs-var">dstTy</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-670"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858732"><span class="annot"><span class="annottext">retV' :: LlvmVar
</span><a href="#local-6989586621681858732"><span class="hs-identifier hs-var hs-var">retV'</span></a></span></span><span>                    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; [LlvmVar] -&gt; LlvmVar
forall a. String -&gt; [a] -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#singletonPanic"><span class="hs-identifier hs-var">singletonPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genCallSimpleCast2&quot;</span></span><span> </span><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858730"><span class="hs-identifier hs-var">retVs'</span></a></span><span>
</span><span id="line-671"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858733"><span class="annot"><span class="annottext">s2 :: LlvmStatement
</span><a href="#local-6989586621681858733"><span class="hs-identifier hs-var hs-var">s2</span></a></span></span><span>                       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LMAlign -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Store"><span class="hs-identifier hs-var">Store</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858732"><span class="hs-identifier hs-var">retV'</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858720"><span class="hs-identifier hs-var">dstV</span></a></span><span> </span><span class="annot"><span class="annottext">LMAlign
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-672"></span><span>
</span><span id="line-673"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858734"><span class="annot"><span class="annottext">stmts :: LlvmStatements
</span><a href="#local-6989586621681858734"><span class="hs-identifier hs-var hs-var">stmts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858724"><span class="hs-identifier hs-var">stmts2</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatements -&gt; LlvmStatements
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858727"><span class="hs-identifier hs-var">stmts4</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span>
</span><span id="line-674"></span><span>                </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858729"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatements -&gt; LlvmStatements
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858731"><span class="hs-identifier hs-var">stmts5</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858733"><span class="hs-identifier hs-var">s2</span></a></span><span>
</span><span id="line-675"></span><span>    </span><span class="annot"><span class="annottext">(LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858734"><span class="hs-identifier hs-var">stmts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858725"><span class="hs-identifier hs-var">top2</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl] -&gt; [LlvmCmmDecl] -&gt; [LlvmCmmDecl]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858717"><span class="hs-identifier hs-var">top3</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-676"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCallSimpleCast2"><span class="hs-identifier hs-var">genCallSimpleCast2</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681858735"><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621681858735"><span class="hs-identifier hs-var">dsts</span></a></span></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-677"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genCallSimpleCast2: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../base-4.18.3.0/src/GHC.Show.html#show/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[CmmFormal] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#length/Data.Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621681858735"><span class="hs-identifier hs-var">dsts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; dsts&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-678"></span><span>
</span><span id="line-679"></span><span class="annot"><span class="hs-comment">-- | Create a function pointer from a target.</span></span><span>
</span><span id="line-680"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#getFunPtrW"><span class="hs-identifier hs-type">getFunPtrW</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Llvm.Types.html#LMString"><span class="hs-identifier hs-type">LMString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmType"><span class="hs-identifier hs-type">LlvmType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Node.html#ForeignTarget"><span class="hs-identifier hs-type">ForeignTarget</span></a></span><span>
</span><span id="line-681"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Writer.Lazy.html#WriterT/Control.Monad.Trans.Writer.Lazy.html#WriterT"><span class="hs-identifier hs-type">WriterT</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmAccum"><span class="hs-identifier hs-type">LlvmAccum</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span>
</span><span id="line-682"></span><span id="getFunPtrW"><span class="annot"><span class="annottext">getFunPtrW :: (LMString -&gt; LlvmType)
-&gt; ForeignTarget -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#getFunPtrW"><span class="hs-identifier hs-var hs-var">getFunPtrW</span></a></span></span><span> </span><span id="local-6989586621681858736"><span class="annot"><span class="annottext">LMString -&gt; LlvmType
</span><a href="#local-6989586621681858736"><span class="hs-identifier hs-var">funTy</span></a></span></span><span> </span><span id="local-6989586621681858737"><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621681858737"><span class="hs-identifier hs-var">targ</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#liftExprData"><span class="hs-identifier hs-var">liftExprData</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmM ExprData -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmM ExprData -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(LMString -&gt; LlvmType) -&gt; ForeignTarget -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#getFunPtr"><span class="hs-identifier hs-var">getFunPtr</span></a></span><span> </span><span class="annot"><span class="annottext">LMString -&gt; LlvmType
</span><a href="#local-6989586621681858736"><span class="hs-identifier hs-var">funTy</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621681858737"><span class="hs-identifier hs-var">targ</span></a></span><span>
</span><span id="line-683"></span><span>
</span><span id="line-684"></span><span class="annot"><span class="hs-comment">-- | Create a function pointer from a target.</span></span><span>
</span><span id="line-685"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#getFunPtr"><span class="hs-identifier hs-type">getFunPtr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Llvm.Types.html#LMString"><span class="hs-identifier hs-type">LMString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmType"><span class="hs-identifier hs-type">LlvmType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Node.html#ForeignTarget"><span class="hs-identifier hs-type">ForeignTarget</span></a></span><span>
</span><span id="line-686"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#ExprData"><span class="hs-identifier hs-type">ExprData</span></a></span><span>
</span><span id="line-687"></span><span id="getFunPtr"><span class="annot"><span class="annottext">getFunPtr :: (LMString -&gt; LlvmType) -&gt; ForeignTarget -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#getFunPtr"><span class="hs-identifier hs-var hs-var">getFunPtr</span></a></span></span><span> </span><span id="local-6989586621681858738"><span class="annot"><span class="annottext">LMString -&gt; LlvmType
</span><a href="#local-6989586621681858738"><span class="hs-identifier hs-var">funTy</span></a></span></span><span> </span><span id="local-6989586621681858739"><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621681858739"><span class="hs-identifier hs-var">targ</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><a href="#local-6989586621681858739"><span class="hs-identifier hs-var">targ</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-688"></span><span>    </span><span class="annot"><a href="GHC.Cmm.Node.html#ForeignTarget"><span class="hs-identifier hs-type">ForeignTarget</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLabel"><span class="hs-identifier hs-type">CmmLabel</span></a></span><span> </span><span id="local-6989586621681858742"><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621681858742"><span class="hs-identifier hs-var">lbl</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ForeignConvention
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-689"></span><span>        </span><span id="local-6989586621681858743"><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858743"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CLabel -&gt; LlvmM LMString
</span><a href="GHC.CmmToLlvm.Base.html#strCLabel_llvm"><span class="hs-identifier hs-var">strCLabel_llvm</span></a></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621681858742"><span class="hs-identifier hs-var">lbl</span></a></span><span>
</span><span id="line-690"></span><span>        </span><span class="annot"><span class="annottext">LMString -&gt; LlvmType -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#getHsFunc%27"><span class="hs-identifier hs-var">getHsFunc'</span></a></span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858743"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LMString -&gt; LlvmType
</span><a href="#local-6989586621681858738"><span class="hs-identifier hs-var">funTy</span></a></span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858743"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-691"></span><span>
</span><span id="line-692"></span><span>    </span><span class="annot"><a href="GHC.Cmm.Node.html#ForeignTarget"><span class="hs-identifier hs-type">ForeignTarget</span></a></span><span> </span><span id="local-6989586621681858746"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858746"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span class="annot"><span class="annottext">ForeignConvention
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-693"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681858747"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858747"><span class="hs-identifier hs-var">v1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858748"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858748"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858749"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858749"><span class="hs-identifier hs-var">top</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVar"><span class="hs-identifier hs-var">exprToVar</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858746"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-694"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858751"><span class="annot"><span class="annottext">fty :: LlvmType
</span><a href="#local-6989586621681858751"><span class="hs-identifier hs-var hs-var">fty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LMString -&gt; LlvmType
</span><a href="#local-6989586621681858738"><span class="hs-identifier hs-var">funTy</span></a></span><span> </span><span class="annot"><span class="annottext">(LMString -&gt; LlvmType) -&gt; LMString -&gt; LlvmType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dynamic&quot;</span></span><span>
</span><span id="line-695"></span><span>            </span><span id="local-6989586621681858753"><span class="annot"><span class="annottext">cast :: LlvmCastOp
</span><a href="#local-6989586621681858753"><span class="hs-identifier hs-var hs-var">cast</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858747"><span class="hs-identifier hs-var">v1</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-696"></span><span>                </span><span id="local-6989586621681858754"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858754"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isPointer"><span class="hs-identifier hs-var">isPointer</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858754"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Bitcast"><span class="hs-identifier hs-var">LM_Bitcast</span></a></span><span>
</span><span id="line-697"></span><span>                </span><span id="local-6989586621681858755"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858755"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isInt"><span class="hs-identifier hs-var">isInt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858755"><span class="hs-identifier hs-var">ty</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Inttoptr"><span class="hs-identifier hs-var">LM_Inttoptr</span></a></span><span>
</span><span id="line-698"></span><span>
</span><span id="line-699"></span><span>                </span><span id="local-6989586621681858756"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858756"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; LlvmCastOp
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genCall: Expr is of bad type for function&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; LlvmCastOp) -&gt; SDoc -&gt; LlvmCastOp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-700"></span><span>                  </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; call! &quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#lparen"><span class="hs-identifier hs-var">lparen</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858756"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#rparen"><span class="hs-identifier hs-var">rparen</span></a></span><span>
</span><span id="line-701"></span><span>
</span><span id="line-702"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681858763"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858763"><span class="hs-identifier hs-var">v2</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681858764"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858764"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#pLift"><span class="hs-identifier hs-var">pLift</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858751"><span class="hs-identifier hs-var">fty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="#local-6989586621681858753"><span class="hs-identifier hs-var">cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858747"><span class="hs-identifier hs-var">v1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#pLift"><span class="hs-identifier hs-var">pLift</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858751"><span class="hs-identifier hs-var">fty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-703"></span><span>        </span><span class="annot"><span class="annottext">ExprData -&gt; LlvmM ExprData
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858763"><span class="hs-identifier hs-var">v2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858748"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858764"><span class="hs-identifier hs-var">s1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858749"><span class="hs-identifier hs-var">top</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-704"></span><span>
</span><span id="line-705"></span><span>    </span><span class="annot"><a href="GHC.Cmm.Node.html#PrimTarget"><span class="hs-identifier hs-type">PrimTarget</span></a></span><span> </span><span id="local-6989586621681858765"><span class="annot"><span class="annottext">CallishMachOp
</span><a href="#local-6989586621681858765"><span class="hs-identifier hs-var">mop</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-706"></span><span>        </span><span id="local-6989586621681858766"><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858766"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CallishMachOp -&gt; LlvmM LMString
</span><a href="GHC.CmmToLlvm.CodeGen.html#cmmPrimOpFunctions"><span class="hs-identifier hs-var">cmmPrimOpFunctions</span></a></span><span> </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="#local-6989586621681858765"><span class="hs-identifier hs-var">mop</span></a></span><span>
</span><span id="line-707"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858767"><span class="annot"><span class="annottext">fty :: LlvmType
</span><a href="#local-6989586621681858767"><span class="hs-identifier hs-var hs-var">fty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LMString -&gt; LlvmType
</span><a href="#local-6989586621681858738"><span class="hs-identifier hs-var">funTy</span></a></span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858766"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-708"></span><span>        </span><span class="annot"><span class="annottext">LMString -&gt; LlvmType -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#getInstrinct2"><span class="hs-identifier hs-var">getInstrinct2</span></a></span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858766"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858767"><span class="hs-identifier hs-var">fty</span></a></span><span>
</span><span id="line-709"></span><span>
</span><span id="line-710"></span><span class="annot"><span class="hs-comment">-- | Conversion of call arguments.</span></span><span>
</span><span id="line-711"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#arg_varsW"><span class="hs-identifier hs-type">arg_varsW</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#CmmActual"><span class="hs-identifier hs-type">CmmActual</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#ForeignHint"><span class="hs-identifier hs-type">ForeignHint</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-712"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmStatements"><span class="hs-identifier hs-type">LlvmStatements</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmCmmDecl"><span class="hs-identifier hs-type">LlvmCmmDecl</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-713"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Writer.Lazy.html#WriterT/Control.Monad.Trans.Writer.Lazy.html#WriterT"><span class="hs-identifier hs-type">WriterT</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmAccum"><span class="hs-identifier hs-type">LlvmAccum</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-714"></span><span id="arg_varsW"><span class="annot"><span class="annottext">arg_varsW :: [(CmmExpr, ForeignHint)]
-&gt; ([LlvmVar], LlvmStatements, [LlvmCmmDecl])
-&gt; WriterT LlvmAccum LlvmM [LlvmVar]
</span><a href="GHC.CmmToLlvm.CodeGen.html#arg_varsW"><span class="hs-identifier hs-var hs-var">arg_varsW</span></a></span></span><span> </span><span id="local-6989586621681858768"><span class="annot"><span class="annottext">[(CmmExpr, ForeignHint)]
</span><a href="#local-6989586621681858768"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span id="local-6989586621681858769"><span class="annot"><span class="annottext">([LlvmVar], LlvmStatements, [LlvmCmmDecl])
</span><a href="#local-6989586621681858769"><span class="hs-identifier hs-var">ys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-715"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681858770"><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858770"><span class="hs-identifier hs-var">vars</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858771"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858771"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858772"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858772"><span class="hs-identifier hs-var">decls</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM ([LlvmVar], LlvmStatements, [LlvmCmmDecl])
-&gt; WriterT
     LlvmAccum LlvmM ([LlvmVar], LlvmStatements, [LlvmCmmDecl])
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; WriterT LlvmAccum m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Class.html#lift/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmM ([LlvmVar], LlvmStatements, [LlvmCmmDecl])
 -&gt; WriterT
      LlvmAccum LlvmM ([LlvmVar], LlvmStatements, [LlvmCmmDecl]))
-&gt; LlvmM ([LlvmVar], LlvmStatements, [LlvmCmmDecl])
-&gt; WriterT
     LlvmAccum LlvmM ([LlvmVar], LlvmStatements, [LlvmCmmDecl])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[(CmmExpr, ForeignHint)]
-&gt; ([LlvmVar], LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM ([LlvmVar], LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#arg_vars"><span class="hs-identifier hs-var">arg_vars</span></a></span><span> </span><span class="annot"><span class="annottext">[(CmmExpr, ForeignHint)]
</span><a href="#local-6989586621681858768"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">([LlvmVar], LlvmStatements, [LlvmCmmDecl])
</span><a href="#local-6989586621681858769"><span class="hs-identifier hs-var">ys</span></a></span><span>
</span><span id="line-716"></span><span>    </span><span class="annot"><span class="annottext">LlvmAccum -&gt; WriterT LlvmAccum LlvmM ()
forall (m :: * -&gt; *) w. Monad m =&gt; w -&gt; WriterT w m ()
</span><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Writer.Lazy.html#tell/Control.Monad.Trans.Writer.Lazy.html#tell"><span class="hs-identifier hs-var">tell</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmAccum -&gt; WriterT LlvmAccum LlvmM ())
-&gt; LlvmAccum -&gt; WriterT LlvmAccum LlvmM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; [LlvmCmmDecl] -&gt; LlvmAccum
</span><a href="GHC.CmmToLlvm.CodeGen.html#LlvmAccum"><span class="hs-identifier hs-var">LlvmAccum</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858771"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858772"><span class="hs-identifier hs-var">decls</span></a></span><span>
</span><span id="line-717"></span><span>    </span><span class="annot"><span class="annottext">[LlvmVar] -&gt; WriterT LlvmAccum LlvmM [LlvmVar]
forall a. a -&gt; WriterT LlvmAccum LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858770"><span class="hs-identifier hs-var">vars</span></a></span><span>
</span><span id="line-718"></span><span>
</span><span id="line-719"></span><span class="annot"><span class="hs-comment">-- | Conversion of call arguments.</span></span><span>
</span><span id="line-720"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#arg_vars"><span class="hs-identifier hs-type">arg_vars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#CmmActual"><span class="hs-identifier hs-type">CmmActual</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#ForeignHint"><span class="hs-identifier hs-type">ForeignHint</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-721"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmStatements"><span class="hs-identifier hs-type">LlvmStatements</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmCmmDecl"><span class="hs-identifier hs-type">LlvmCmmDecl</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-722"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmStatements"><span class="hs-identifier hs-type">LlvmStatements</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmCmmDecl"><span class="hs-identifier hs-type">LlvmCmmDecl</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-723"></span><span>
</span><span id="line-724"></span><span id="arg_vars"><span class="annot"><span class="annottext">arg_vars :: [(CmmExpr, ForeignHint)]
-&gt; ([LlvmVar], LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM ([LlvmVar], LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#arg_vars"><span class="hs-identifier hs-var hs-var">arg_vars</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681858775"><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858775"><span class="hs-identifier hs-var">vars</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858776"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858776"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858777"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858777"><span class="hs-identifier hs-var">tops</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-725"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([LlvmVar], LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM ([LlvmVar], LlvmStatements, [LlvmCmmDecl])
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858775"><span class="hs-identifier hs-var">vars</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858776"><span class="hs-identifier hs-var">stmts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858777"><span class="hs-identifier hs-var">tops</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-726"></span><span>
</span><span id="line-727"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#arg_vars"><span class="hs-identifier hs-var">arg_vars</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681858778"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858778"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ForeignHint
</span><a href="GHC.Cmm.Type.html#AddrHint"><span class="hs-identifier hs-var">AddrHint</span></a></span><span class="hs-special">)</span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681858779"><span class="annot"><span class="annottext">[(CmmExpr, ForeignHint)]
</span><a href="#local-6989586621681858779"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681858780"><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858780"><span class="hs-identifier hs-var">vars</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858781"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858781"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858782"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858782"><span class="hs-identifier hs-var">tops</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-728"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681858783"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858783"><span class="hs-identifier hs-var">v1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858784"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858784"><span class="hs-identifier hs-var">stmts'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858785"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858785"><span class="hs-identifier hs-var">top'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVar"><span class="hs-identifier hs-var">exprToVar</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858778"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-729"></span><span>       </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858786"><span class="annot"><span class="annottext">op :: LlvmCastOp
</span><a href="#local-6989586621681858786"><span class="hs-identifier hs-var hs-var">op</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858783"><span class="hs-identifier hs-var">v1</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-730"></span><span>               </span><span id="local-6989586621681858787"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858787"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isPointer"><span class="hs-identifier hs-var">isPointer</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858787"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Bitcast"><span class="hs-identifier hs-var">LM_Bitcast</span></a></span><span>
</span><span id="line-731"></span><span>               </span><span id="local-6989586621681858788"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858788"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isInt"><span class="hs-identifier hs-var">isInt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858788"><span class="hs-identifier hs-var">ty</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Inttoptr"><span class="hs-identifier hs-var">LM_Inttoptr</span></a></span><span>
</span><span id="line-732"></span><span>
</span><span id="line-733"></span><span>               </span><span id="local-6989586621681858789"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858789"><span class="hs-identifier hs-var">a</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; LlvmCastOp
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genCall: Can't cast llvmType to i8*! &quot;</span></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; LlvmCastOp) -&gt; SDoc -&gt; LlvmCastOp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-734"></span><span>                </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#lparen"><span class="hs-identifier hs-var">lparen</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span>  </span><span class="annot"><span class="annottext">LlvmType -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858789"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#rparen"><span class="hs-identifier hs-var">rparen</span></a></span><span>
</span><span id="line-735"></span><span>
</span><span id="line-736"></span><span>       </span><span class="hs-special">(</span><span id="local-6989586621681858790"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858790"><span class="hs-identifier hs-var">v2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858791"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858791"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#i8Ptr"><span class="hs-identifier hs-var">i8Ptr</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="#local-6989586621681858786"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858783"><span class="hs-identifier hs-var">v1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#i8Ptr"><span class="hs-identifier hs-var">i8Ptr</span></a></span><span>
</span><span id="line-737"></span><span>       </span><span class="annot"><span class="annottext">[(CmmExpr, ForeignHint)]
-&gt; ([LlvmVar], LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM ([LlvmVar], LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#arg_vars"><span class="hs-identifier hs-var">arg_vars</span></a></span><span> </span><span class="annot"><span class="annottext">[(CmmExpr, ForeignHint)]
</span><a href="#local-6989586621681858779"><span class="hs-identifier hs-var">rest</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858780"><span class="hs-identifier hs-var">vars</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmVar] -&gt; [LlvmVar] -&gt; [LlvmVar]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858790"><span class="hs-identifier hs-var">v2</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858781"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatements -&gt; LlvmStatements
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858784"><span class="hs-identifier hs-var">stmts'</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858791"><span class="hs-identifier hs-var">s1</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-738"></span><span>                               </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858782"><span class="hs-identifier hs-var">tops</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl] -&gt; [LlvmCmmDecl] -&gt; [LlvmCmmDecl]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858785"><span class="hs-identifier hs-var">top'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-739"></span><span>
</span><span id="line-740"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#arg_vars"><span class="hs-identifier hs-var">arg_vars</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681858792"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858792"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ForeignHint
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681858793"><span class="annot"><span class="annottext">[(CmmExpr, ForeignHint)]
</span><a href="#local-6989586621681858793"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681858794"><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858794"><span class="hs-identifier hs-var">vars</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858795"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858795"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858796"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858796"><span class="hs-identifier hs-var">tops</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-741"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681858797"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858797"><span class="hs-identifier hs-var">v1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858798"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858798"><span class="hs-identifier hs-var">stmts'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858799"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858799"><span class="hs-identifier hs-var">top'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVar"><span class="hs-identifier hs-var">exprToVar</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858792"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-742"></span><span>       </span><span class="annot"><span class="annottext">[(CmmExpr, ForeignHint)]
-&gt; ([LlvmVar], LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM ([LlvmVar], LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#arg_vars"><span class="hs-identifier hs-var">arg_vars</span></a></span><span> </span><span class="annot"><span class="annottext">[(CmmExpr, ForeignHint)]
</span><a href="#local-6989586621681858793"><span class="hs-identifier hs-var">rest</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858794"><span class="hs-identifier hs-var">vars</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmVar] -&gt; [LlvmVar] -&gt; [LlvmVar]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858797"><span class="hs-identifier hs-var">v1</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858795"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatements -&gt; LlvmStatements
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858798"><span class="hs-identifier hs-var">stmts'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858796"><span class="hs-identifier hs-var">tops</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl] -&gt; [LlvmCmmDecl] -&gt; [LlvmCmmDecl]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858799"><span class="hs-identifier hs-var">top'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-743"></span><span>
</span><span id="line-744"></span><span>
</span><span id="line-745"></span><span class="annot"><span class="hs-comment">-- | Cast a collection of LLVM variables to specific types.</span></span><span>
</span><span id="line-746"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#castVarsW"><span class="hs-identifier hs-type">castVarsW</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#Signage"><span class="hs-identifier hs-type">Signage</span></a></span><span>
</span><span id="line-747"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmType"><span class="hs-identifier hs-type">LlvmType</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-748"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Writer.Lazy.html#WriterT/Control.Monad.Trans.Writer.Lazy.html#WriterT"><span class="hs-identifier hs-type">WriterT</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmAccum"><span class="hs-identifier hs-type">LlvmAccum</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-749"></span><span id="castVarsW"><span class="annot"><span class="annottext">castVarsW :: Signage
-&gt; [(LlvmVar, LlvmType)] -&gt; WriterT LlvmAccum LlvmM [LlvmVar]
</span><a href="GHC.CmmToLlvm.CodeGen.html#castVarsW"><span class="hs-identifier hs-var hs-var">castVarsW</span></a></span></span><span> </span><span id="local-6989586621681858800"><span class="annot"><span class="annottext">Signage
</span><a href="#local-6989586621681858800"><span class="hs-identifier hs-var">signage</span></a></span></span><span> </span><span id="local-6989586621681858801"><span class="annot"><span class="annottext">[(LlvmVar, LlvmType)]
</span><a href="#local-6989586621681858801"><span class="hs-identifier hs-var">vars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-750"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681858802"><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858802"><span class="hs-identifier hs-var">vars</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858803"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858803"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM ([LlvmVar], LlvmStatements)
-&gt; WriterT LlvmAccum LlvmM ([LlvmVar], LlvmStatements)
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; WriterT LlvmAccum m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Class.html#lift/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmM ([LlvmVar], LlvmStatements)
 -&gt; WriterT LlvmAccum LlvmM ([LlvmVar], LlvmStatements))
-&gt; LlvmM ([LlvmVar], LlvmStatements)
-&gt; WriterT LlvmAccum LlvmM ([LlvmVar], LlvmStatements)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Signage
-&gt; [(LlvmVar, LlvmType)] -&gt; LlvmM ([LlvmVar], LlvmStatements)
</span><a href="GHC.CmmToLlvm.CodeGen.html#castVars"><span class="hs-identifier hs-var">castVars</span></a></span><span> </span><span class="annot"><span class="annottext">Signage
</span><a href="#local-6989586621681858800"><span class="hs-identifier hs-var">signage</span></a></span><span> </span><span class="annot"><span class="annottext">[(LlvmVar, LlvmType)]
</span><a href="#local-6989586621681858801"><span class="hs-identifier hs-var">vars</span></a></span><span>
</span><span id="line-751"></span><span>    </span><span class="annot"><span class="annottext">LlvmAccum -&gt; WriterT LlvmAccum LlvmM ()
forall (m :: * -&gt; *) w. Monad m =&gt; w -&gt; WriterT w m ()
</span><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Writer.Lazy.html#tell/Control.Monad.Trans.Writer.Lazy.html#tell"><span class="hs-identifier hs-var">tell</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmAccum -&gt; WriterT LlvmAccum LlvmM ())
-&gt; LlvmAccum -&gt; WriterT LlvmAccum LlvmM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; [LlvmCmmDecl] -&gt; LlvmAccum
</span><a href="GHC.CmmToLlvm.CodeGen.html#LlvmAccum"><span class="hs-identifier hs-var">LlvmAccum</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858803"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
forall a. Monoid a =&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mempty/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-752"></span><span>    </span><span class="annot"><span class="annottext">[LlvmVar] -&gt; WriterT LlvmAccum LlvmM [LlvmVar]
forall a. a -&gt; WriterT LlvmAccum LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858802"><span class="hs-identifier hs-var">vars</span></a></span><span>
</span><span id="line-753"></span><span>
</span><span id="line-754"></span><span class="annot"><span class="hs-comment">-- | Cast a collection of LLVM variables to specific types.</span></span><span>
</span><span id="line-755"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#castVars"><span class="hs-identifier hs-type">castVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#Signage"><span class="hs-identifier hs-type">Signage</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmType"><span class="hs-identifier hs-type">LlvmType</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-756"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmStatements"><span class="hs-identifier hs-type">LlvmStatements</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-757"></span><span id="castVars"><span class="annot"><span class="annottext">castVars :: Signage
-&gt; [(LlvmVar, LlvmType)] -&gt; LlvmM ([LlvmVar], LlvmStatements)
</span><a href="GHC.CmmToLlvm.CodeGen.html#castVars"><span class="hs-identifier hs-var hs-var">castVars</span></a></span></span><span> </span><span id="local-6989586621681858804"><span class="annot"><span class="annottext">Signage
</span><a href="#local-6989586621681858804"><span class="hs-identifier hs-var">signage</span></a></span></span><span> </span><span id="local-6989586621681858805"><span class="annot"><span class="annottext">[(LlvmVar, LlvmType)]
</span><a href="#local-6989586621681858805"><span class="hs-identifier hs-var">vars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-758"></span><span>                </span><span id="local-6989586621681858806"><span class="annot"><span class="annottext">[(LlvmVar, LlvmStatement)]
</span><a href="#local-6989586621681858806"><span class="hs-identifier hs-var">done</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((LlvmVar, LlvmType) -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; [(LlvmVar, LlvmType)] -&gt; LlvmM [(LlvmVar, LlvmStatement)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="../../base-4.18.3.0/src/Data.Traversable.html#mapM/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LlvmVar -&gt; LlvmType -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; (LlvmVar, LlvmType) -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><a href="../../base-4.18.3.0/src/Data.Tuple.html#uncurry/Data.Tuple.html#uncurry"><span class="hs-identifier hs-var">uncurry</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Signage -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#castVar"><span class="hs-identifier hs-var">castVar</span></a></span><span> </span><span class="annot"><span class="annottext">Signage
</span><a href="#local-6989586621681858804"><span class="hs-identifier hs-var">signage</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(LlvmVar, LlvmType)]
</span><a href="#local-6989586621681858805"><span class="hs-identifier hs-var">vars</span></a></span><span>
</span><span id="line-759"></span><span>                </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681858809"><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858809"><span class="hs-identifier hs-var">vars'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858810"><span class="annot"><span class="annottext">[LlvmStatement]
</span><a href="#local-6989586621681858810"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(LlvmVar, LlvmStatement)] -&gt; ([LlvmVar], [LlvmStatement])
forall a b. [(a, b)] -&gt; ([a], [b])
</span><a href="../../base-4.18.3.0/src/GHC.List.html#unzip/GHC.List.html#unzip"><span class="hs-identifier hs-var">unzip</span></a></span><span> </span><span class="annot"><span class="annottext">[(LlvmVar, LlvmStatement)]
</span><a href="#local-6989586621681858806"><span class="hs-identifier hs-var">done</span></a></span><span>
</span><span id="line-760"></span><span>                </span><span class="annot"><span class="annottext">([LlvmVar], LlvmStatements) -&gt; LlvmM ([LlvmVar], LlvmStatements)
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858809"><span class="hs-identifier hs-var">vars'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmStatement] -&gt; LlvmStatements
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmStatement]
</span><a href="#local-6989586621681858810"><span class="hs-identifier hs-var">stmts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-761"></span><span>
</span><span id="line-762"></span><span class="annot"><span class="hs-comment">-- | Cast an LLVM variable to a specific type, panicking if it can't be done.</span></span><span>
</span><span id="line-763"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#castVar"><span class="hs-identifier hs-type">castVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#Signage"><span class="hs-identifier hs-type">Signage</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmType"><span class="hs-identifier hs-type">LlvmType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Llvm.Syntax.html#LlvmStatement"><span class="hs-identifier hs-type">LlvmStatement</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-764"></span><span id="castVar"><span class="annot"><span class="annottext">castVar :: Signage -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#castVar"><span class="hs-identifier hs-var hs-var">castVar</span></a></span></span><span> </span><span id="local-6989586621681858812"><span class="annot"><span class="annottext">Signage
</span><a href="#local-6989586621681858812"><span class="hs-identifier hs-var">signage</span></a></span></span><span> </span><span id="local-6989586621681858813"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858813"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621681858814"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858814"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858813"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858814"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-765"></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LlvmVar, LlvmStatement) -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858813"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Nop"><span class="hs-identifier hs-var">Nop</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-766"></span><span>
</span><span id="line-767"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-768"></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681858816"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681858816"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM Platform
</span><a href="GHC.CmmToLlvm.Base.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-769"></span><span>                 </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858817"><span class="annot"><span class="annottext">op :: LlvmCastOp
</span><a href="#local-6989586621681858817"><span class="hs-identifier hs-var hs-var">op</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858813"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858814"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-770"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Llvm.Types.html#LMInt"><span class="hs-identifier hs-type">LMInt</span></a></span><span> </span><span id="local-6989586621681858818"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681858818"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LMInt"><span class="hs-identifier hs-type">LMInt</span></a></span><span> </span><span id="local-6989586621681858819"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681858819"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-771"></span><span>                          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681858818"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681858819"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="#local-6989586621681858820"><span class="hs-identifier hs-var">extend</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Trunc"><span class="hs-identifier hs-var">LM_Trunc</span></a></span><span>
</span><span id="line-772"></span><span>                      </span><span class="hs-special">(</span><span id="local-6989586621681858821"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858821"><span class="hs-identifier hs-var">vt</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isFloat"><span class="hs-identifier hs-var">isFloat</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858821"><span class="hs-identifier hs-var">vt</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isFloat"><span class="hs-identifier hs-var">isFloat</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858814"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-773"></span><span>                          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; LlvmType -&gt; Int
</span><a href="GHC.Llvm.Types.html#llvmWidthInBits"><span class="hs-identifier hs-var">llvmWidthInBits</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681858816"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858821"><span class="hs-identifier hs-var">vt</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; LlvmType -&gt; Int
</span><a href="GHC.Llvm.Types.html#llvmWidthInBits"><span class="hs-identifier hs-var">llvmWidthInBits</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681858816"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858814"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-774"></span><span>                                </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Fpext"><span class="hs-identifier hs-var">LM_Fpext</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Fptrunc"><span class="hs-identifier hs-var">LM_Fptrunc</span></a></span><span>
</span><span id="line-775"></span><span>                      </span><span class="hs-special">(</span><span id="local-6989586621681858826"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858826"><span class="hs-identifier hs-var">vt</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isInt"><span class="hs-identifier hs-var">isInt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858826"><span class="hs-identifier hs-var">vt</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isFloat"><span class="hs-identifier hs-var">isFloat</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858814"><span class="hs-identifier hs-var">t</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Sitofp"><span class="hs-identifier hs-var">LM_Sitofp</span></a></span><span>
</span><span id="line-776"></span><span>                      </span><span class="hs-special">(</span><span id="local-6989586621681858828"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858828"><span class="hs-identifier hs-var">vt</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isFloat"><span class="hs-identifier hs-var">isFloat</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858828"><span class="hs-identifier hs-var">vt</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isInt"><span class="hs-identifier hs-var">isInt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858814"><span class="hs-identifier hs-var">t</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Fptosi"><span class="hs-identifier hs-var">LM_Fptosi</span></a></span><span>
</span><span id="line-777"></span><span>                      </span><span class="hs-special">(</span><span id="local-6989586621681858830"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858830"><span class="hs-identifier hs-var">vt</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isInt"><span class="hs-identifier hs-var">isInt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858830"><span class="hs-identifier hs-var">vt</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isPointer"><span class="hs-identifier hs-var">isPointer</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858814"><span class="hs-identifier hs-var">t</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Inttoptr"><span class="hs-identifier hs-var">LM_Inttoptr</span></a></span><span>
</span><span id="line-778"></span><span>                      </span><span class="hs-special">(</span><span id="local-6989586621681858831"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858831"><span class="hs-identifier hs-var">vt</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isPointer"><span class="hs-identifier hs-var">isPointer</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858831"><span class="hs-identifier hs-var">vt</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isInt"><span class="hs-identifier hs-var">isInt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858814"><span class="hs-identifier hs-var">t</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Ptrtoint"><span class="hs-identifier hs-var">LM_Ptrtoint</span></a></span><span>
</span><span id="line-779"></span><span>                      </span><span class="hs-special">(</span><span id="local-6989586621681858832"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858832"><span class="hs-identifier hs-var">vt</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isPointer"><span class="hs-identifier hs-var">isPointer</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858832"><span class="hs-identifier hs-var">vt</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isPointer"><span class="hs-identifier hs-var">isPointer</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858814"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Bitcast"><span class="hs-identifier hs-var">LM_Bitcast</span></a></span><span>
</span><span id="line-780"></span><span>                      </span><span class="hs-special">(</span><span id="local-6989586621681858833"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858833"><span class="hs-identifier hs-var">vt</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isVector"><span class="hs-identifier hs-var">isVector</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858833"><span class="hs-identifier hs-var">vt</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isVector"><span class="hs-identifier hs-var">isVector</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858814"><span class="hs-identifier hs-var">t</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Bitcast"><span class="hs-identifier hs-var">LM_Bitcast</span></a></span><span>
</span><span id="line-781"></span><span>
</span><span id="line-782"></span><span>                      </span><span class="hs-special">(</span><span id="local-6989586621681858835"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858835"><span class="hs-identifier hs-var">vt</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; LlvmCastOp
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;castVars: Can't cast this type &quot;</span></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; LlvmCastOp) -&gt; SDoc -&gt; LlvmCastOp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-783"></span><span>                                </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#lparen"><span class="hs-identifier hs-var">lparen</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858835"><span class="hs-identifier hs-var">vt</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#rparen"><span class="hs-identifier hs-var">rparen</span></a></span><span>
</span><span id="line-784"></span><span>                                </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; to &quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span>
</span><span id="line-785"></span><span>                                </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#lparen"><span class="hs-identifier hs-var">lparen</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858814"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#rparen"><span class="hs-identifier hs-var">rparen</span></a></span><span>
</span><span id="line-786"></span><span>
</span><span id="line-787"></span><span>                 </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858814"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="#local-6989586621681858817"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858813"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858814"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-788"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681858820"><span class="annot"><span class="annottext">extend :: LlvmCastOp
</span><a href="#local-6989586621681858820"><span class="hs-identifier hs-var hs-var">extend</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Signage
</span><a href="#local-6989586621681858812"><span class="hs-identifier hs-var">signage</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-789"></span><span>            </span><span class="annot"><span class="annottext">Signage
</span><a href="GHC.CmmToLlvm.CodeGen.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Sext"><span class="hs-identifier hs-var">LM_Sext</span></a></span><span>
</span><span id="line-790"></span><span>            </span><span class="annot"><span class="annottext">Signage
</span><a href="GHC.CmmToLlvm.CodeGen.html#Unsigned"><span class="hs-identifier hs-var">Unsigned</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Zext"><span class="hs-identifier hs-var">LM_Zext</span></a></span><span>
</span><span id="line-791"></span><span>
</span><span id="line-792"></span><span>
</span><span id="line-793"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#cmmPrimOpRetValSignage"><span class="hs-identifier hs-type">cmmPrimOpRetValSignage</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.MachOp.html#CallishMachOp"><span class="hs-identifier hs-type">CallishMachOp</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#Signage"><span class="hs-identifier hs-type">Signage</span></a></span><span>
</span><span id="line-794"></span><span id="cmmPrimOpRetValSignage"><span class="annot"><span class="annottext">cmmPrimOpRetValSignage :: CallishMachOp -&gt; Signage
</span><a href="GHC.CmmToLlvm.CodeGen.html#cmmPrimOpRetValSignage"><span class="hs-identifier hs-var hs-var">cmmPrimOpRetValSignage</span></a></span></span><span> </span><span id="local-6989586621681858836"><span class="annot"><span class="annottext">CallishMachOp
</span><a href="#local-6989586621681858836"><span class="hs-identifier hs-var">mop</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="#local-6989586621681858836"><span class="hs-identifier hs-var">mop</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-795"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Pdep"><span class="hs-identifier hs-type">MO_Pdep</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Signage
</span><a href="GHC.CmmToLlvm.CodeGen.html#Unsigned"><span class="hs-identifier hs-var">Unsigned</span></a></span><span>
</span><span id="line-796"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Pext"><span class="hs-identifier hs-type">MO_Pext</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Signage
</span><a href="GHC.CmmToLlvm.CodeGen.html#Unsigned"><span class="hs-identifier hs-var">Unsigned</span></a></span><span>
</span><span id="line-797"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><span class="hs-identifier">_</span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Signage
</span><a href="GHC.CmmToLlvm.CodeGen.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span>
</span><span id="line-798"></span><span>
</span><span id="line-799"></span><span class="annot"><span class="hs-comment">-- | Decide what C function to use to implement a CallishMachOp</span></span><span>
</span><span id="line-800"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#cmmPrimOpFunctions"><span class="hs-identifier hs-type">cmmPrimOpFunctions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.MachOp.html#CallishMachOp"><span class="hs-identifier hs-type">CallishMachOp</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LMString"><span class="hs-identifier hs-type">LMString</span></a></span><span>
</span><span id="line-801"></span><span id="cmmPrimOpFunctions"><span class="annot"><span class="annottext">cmmPrimOpFunctions :: CallishMachOp -&gt; LlvmM LMString
</span><a href="GHC.CmmToLlvm.CodeGen.html#cmmPrimOpFunctions"><span class="hs-identifier hs-var hs-var">cmmPrimOpFunctions</span></a></span></span><span> </span><span id="local-6989586621681858837"><span class="annot"><span class="annottext">CallishMachOp
</span><a href="#local-6989586621681858837"><span class="hs-identifier hs-var">mop</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-802"></span><span>  </span><span id="local-6989586621681858838"><span class="annot"><span class="annottext">LlvmCgConfig
</span><a href="#local-6989586621681858838"><span class="hs-identifier hs-var">cfg</span></a></span></span><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM LlvmCgConfig
</span><a href="GHC.CmmToLlvm.Base.html#getConfig"><span class="hs-identifier hs-var">getConfig</span></a></span><span>
</span><span id="line-803"></span><span>  </span><span id="local-6989586621681858840"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681858840"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM Platform
</span><a href="GHC.CmmToLlvm.Base.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-804"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621681858841"><span class="annot"><span class="annottext">isBmi2Enabled :: Bool
</span><a href="#local-6989586621681858841"><span class="hs-identifier hs-var hs-var">isBmi2Enabled</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmCgConfig -&gt; Maybe BmiVersion
</span><a href="GHC.CmmToLlvm.Config.html#llvmCgBmiVersion"><span class="hs-identifier hs-var">llvmCgBmiVersion</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCgConfig
</span><a href="#local-6989586621681858838"><span class="hs-identifier hs-var">cfg</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe BmiVersion -&gt; Maybe BmiVersion -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">BmiVersion -&gt; Maybe BmiVersion
forall a. a -&gt; Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">BmiVersion
</span><a href="GHC.Platform.html#BMI2"><span class="hs-identifier hs-var">BMI2</span></a></span><span>
</span><span id="line-805"></span><span>      </span><span class="hs-glyph">!</span><span id="local-6989586621681858844"><span class="annot"><span class="annottext">is32bit :: Bool
</span><a href="#local-6989586621681858844"><span class="hs-identifier hs-var hs-var">is32bit</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; PlatformWordSize
</span><a href="GHC.Platform.html#platformWordSize"><span class="hs-identifier hs-var">platformWordSize</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681858840"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">PlatformWordSize -&gt; PlatformWordSize -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">PlatformWordSize
</span><a href="GHC.Platform.html#PW4"><span class="hs-identifier hs-var">PW4</span></a></span><span>
</span><span id="line-806"></span><span>      </span><span id="local-6989586621681858847"><span class="annot"><span class="annottext">unsupported :: LMString
</span><a href="#local-6989586621681858847"><span class="hs-identifier hs-var hs-var">unsupported</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cmmPrimOpFunctions: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">CallishMachOp -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../base-4.18.3.0/src/GHC.Show.html#show/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="#local-6989586621681858837"><span class="hs-identifier hs-var">mop</span></a></span><span>
</span><span id="line-807"></span><span>                        </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; not supported here&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-808"></span><span>      </span><span id="local-6989586621681858848"><span class="annot"><span class="annottext">dontReach64 :: LMString
</span><a href="#local-6989586621681858848"><span class="hs-identifier hs-var hs-var">dontReach64</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cmmPrimOpFunctions: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">CallishMachOp -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../base-4.18.3.0/src/GHC.Show.html#show/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="#local-6989586621681858837"><span class="hs-identifier hs-var">mop</span></a></span><span>
</span><span id="line-809"></span><span>                        </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; should be not be encountered because the regular primop for this 64-bit operation is used instead.&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-810"></span><span>
</span><span id="line-811"></span><span>  </span><span class="annot"><span class="annottext">LMString -&gt; LlvmM LMString
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(LMString -&gt; LlvmM LMString) -&gt; LMString -&gt; LlvmM LMString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="#local-6989586621681858837"><span class="hs-identifier hs-var">mop</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-812"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Exp"><span class="hs-identifier hs-var">MO_F32_Exp</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;expf&quot;</span></span><span>
</span><span id="line-813"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_ExpM1"><span class="hs-identifier hs-var">MO_F32_ExpM1</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;expm1f&quot;</span></span><span>
</span><span id="line-814"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Log"><span class="hs-identifier hs-var">MO_F32_Log</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;logf&quot;</span></span><span>
</span><span id="line-815"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Log1P"><span class="hs-identifier hs-var">MO_F32_Log1P</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;log1pf&quot;</span></span><span>
</span><span id="line-816"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Sqrt"><span class="hs-identifier hs-var">MO_F32_Sqrt</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.sqrt.f32&quot;</span></span><span>
</span><span id="line-817"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Fabs"><span class="hs-identifier hs-var">MO_F32_Fabs</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.fabs.f32&quot;</span></span><span>
</span><span id="line-818"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Pwr"><span class="hs-identifier hs-var">MO_F32_Pwr</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.pow.f32&quot;</span></span><span>
</span><span id="line-819"></span><span>
</span><span id="line-820"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Sin"><span class="hs-identifier hs-var">MO_F32_Sin</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.sin.f32&quot;</span></span><span>
</span><span id="line-821"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Cos"><span class="hs-identifier hs-var">MO_F32_Cos</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.cos.f32&quot;</span></span><span>
</span><span id="line-822"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Tan"><span class="hs-identifier hs-var">MO_F32_Tan</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tanf&quot;</span></span><span>
</span><span id="line-823"></span><span>
</span><span id="line-824"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Asin"><span class="hs-identifier hs-var">MO_F32_Asin</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;asinf&quot;</span></span><span>
</span><span id="line-825"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Acos"><span class="hs-identifier hs-var">MO_F32_Acos</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;acosf&quot;</span></span><span>
</span><span id="line-826"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Atan"><span class="hs-identifier hs-var">MO_F32_Atan</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;atanf&quot;</span></span><span>
</span><span id="line-827"></span><span>
</span><span id="line-828"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Sinh"><span class="hs-identifier hs-var">MO_F32_Sinh</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;sinhf&quot;</span></span><span>
</span><span id="line-829"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Cosh"><span class="hs-identifier hs-var">MO_F32_Cosh</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;coshf&quot;</span></span><span>
</span><span id="line-830"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Tanh"><span class="hs-identifier hs-var">MO_F32_Tanh</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tanhf&quot;</span></span><span>
</span><span id="line-831"></span><span>
</span><span id="line-832"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Asinh"><span class="hs-identifier hs-var">MO_F32_Asinh</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;asinhf&quot;</span></span><span>
</span><span id="line-833"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Acosh"><span class="hs-identifier hs-var">MO_F32_Acosh</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;acoshf&quot;</span></span><span>
</span><span id="line-834"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F32_Atanh"><span class="hs-identifier hs-var">MO_F32_Atanh</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;atanhf&quot;</span></span><span>
</span><span id="line-835"></span><span>
</span><span id="line-836"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Exp"><span class="hs-identifier hs-var">MO_F64_Exp</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;exp&quot;</span></span><span>
</span><span id="line-837"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_ExpM1"><span class="hs-identifier hs-var">MO_F64_ExpM1</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;expm1&quot;</span></span><span>
</span><span id="line-838"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Log"><span class="hs-identifier hs-var">MO_F64_Log</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;log&quot;</span></span><span>
</span><span id="line-839"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Log1P"><span class="hs-identifier hs-var">MO_F64_Log1P</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;log1p&quot;</span></span><span>
</span><span id="line-840"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Sqrt"><span class="hs-identifier hs-var">MO_F64_Sqrt</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.sqrt.f64&quot;</span></span><span>
</span><span id="line-841"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Fabs"><span class="hs-identifier hs-var">MO_F64_Fabs</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.fabs.f64&quot;</span></span><span>
</span><span id="line-842"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Pwr"><span class="hs-identifier hs-var">MO_F64_Pwr</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.pow.f64&quot;</span></span><span>
</span><span id="line-843"></span><span>
</span><span id="line-844"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Sin"><span class="hs-identifier hs-var">MO_F64_Sin</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.sin.f64&quot;</span></span><span>
</span><span id="line-845"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Cos"><span class="hs-identifier hs-var">MO_F64_Cos</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.cos.f64&quot;</span></span><span>
</span><span id="line-846"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Tan"><span class="hs-identifier hs-var">MO_F64_Tan</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tan&quot;</span></span><span>
</span><span id="line-847"></span><span>
</span><span id="line-848"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Asin"><span class="hs-identifier hs-var">MO_F64_Asin</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;asin&quot;</span></span><span>
</span><span id="line-849"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Acos"><span class="hs-identifier hs-var">MO_F64_Acos</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;acos&quot;</span></span><span>
</span><span id="line-850"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Atan"><span class="hs-identifier hs-var">MO_F64_Atan</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;atan&quot;</span></span><span>
</span><span id="line-851"></span><span>
</span><span id="line-852"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Sinh"><span class="hs-identifier hs-var">MO_F64_Sinh</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;sinh&quot;</span></span><span>
</span><span id="line-853"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Cosh"><span class="hs-identifier hs-var">MO_F64_Cosh</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cosh&quot;</span></span><span>
</span><span id="line-854"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Tanh"><span class="hs-identifier hs-var">MO_F64_Tanh</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tanh&quot;</span></span><span>
</span><span id="line-855"></span><span>
</span><span id="line-856"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Asinh"><span class="hs-identifier hs-var">MO_F64_Asinh</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;asinh&quot;</span></span><span>
</span><span id="line-857"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Acosh"><span class="hs-identifier hs-var">MO_F64_Acosh</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;acosh&quot;</span></span><span>
</span><span id="line-858"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_F64_Atanh"><span class="hs-identifier hs-var">MO_F64_Atanh</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;atanh&quot;</span></span><span>
</span><span id="line-859"></span><span>
</span><span id="line-860"></span><span>    </span><span class="hs-comment">-- In the following ops, it looks like we could factorize the concatenation</span><span>
</span><span id="line-861"></span><span>    </span><span class="hs-comment">-- of the bit size, and indeed it was like this before, e.g.</span><span>
</span><span id="line-862"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-863"></span><span>    </span><span class="hs-comment">--     MO_PopCnt w -&gt; fsLit $ &quot;llvm.ctpop.i&quot; ++ wbits w</span><span>
</span><span id="line-864"></span><span>    </span><span class="hs-comment">-- or</span><span>
</span><span id="line-865"></span><span>    </span><span class="hs-comment">--     MO_Memcpy _ -&gt; fsLit $ &quot;llvm.memcpy.&quot;  ++ intrinTy1</span><span>
</span><span id="line-866"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-867"></span><span>    </span><span class="hs-comment">-- however it meant that FastStrings were not built from constant string</span><span>
</span><span id="line-868"></span><span>    </span><span class="hs-comment">-- literals, hence they weren't matching the &quot;fslit&quot; rewrite rule in</span><span>
</span><span id="line-869"></span><span>    </span><span class="hs-comment">-- GHC.Data.FastString that computes the string size at compilation time.</span><span>
</span><span id="line-870"></span><span>
</span><span id="line-871"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Memcpy"><span class="hs-identifier hs-type">MO_Memcpy</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-872"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681858844"><span class="hs-identifier hs-var">is32bit</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.memcpy.p0i8.p0i8.i32&quot;</span></span><span>
</span><span id="line-873"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.memcpy.p0i8.p0i8.i64&quot;</span></span><span>
</span><span id="line-874"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Memmove"><span class="hs-identifier hs-type">MO_Memmove</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-875"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681858844"><span class="hs-identifier hs-var">is32bit</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.memmove.p0i8.p0i8.i32&quot;</span></span><span>
</span><span id="line-876"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.memmove.p0i8.p0i8.i64&quot;</span></span><span>
</span><span id="line-877"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Memset"><span class="hs-identifier hs-type">MO_Memset</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-878"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681858844"><span class="hs-identifier hs-var">is32bit</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.memset.p0i8.i32&quot;</span></span><span>
</span><span id="line-879"></span><span>       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.memset.p0i8.i64&quot;</span></span><span>
</span><span id="line-880"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Memcmp"><span class="hs-identifier hs-type">MO_Memcmp</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;memcmp&quot;</span></span><span>
</span><span id="line-881"></span><span>
</span><span id="line-882"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_SuspendThread"><span class="hs-identifier hs-var">MO_SuspendThread</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;suspendThread&quot;</span></span><span>
</span><span id="line-883"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_ResumeThread"><span class="hs-identifier hs-var">MO_ResumeThread</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;resumeThread&quot;</span></span><span>
</span><span id="line-884"></span><span>
</span><span id="line-885"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_PopCnt"><span class="hs-identifier hs-type">MO_PopCnt</span></a></span><span> </span><span id="local-6989586621681858892"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858892"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858892"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-886"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W8"><span class="hs-identifier hs-var">W8</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.ctpop.i8&quot;</span></span><span>
</span><span id="line-887"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W16"><span class="hs-identifier hs-var">W16</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.ctpop.i16&quot;</span></span><span>
</span><span id="line-888"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.ctpop.i32&quot;</span></span><span>
</span><span id="line-889"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.ctpop.i64&quot;</span></span><span>
</span><span id="line-890"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W128"><span class="hs-identifier hs-var">W128</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.ctpop.i128&quot;</span></span><span>
</span><span id="line-891"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W256"><span class="hs-identifier hs-var">W256</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.ctpop.i256&quot;</span></span><span>
</span><span id="line-892"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W512"><span class="hs-identifier hs-var">W512</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.ctpop.i512&quot;</span></span><span>
</span><span id="line-893"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_BSwap"><span class="hs-identifier hs-type">MO_BSwap</span></a></span><span> </span><span id="local-6989586621681858900"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858900"><span class="hs-identifier hs-var">w</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858900"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-894"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W8"><span class="hs-identifier hs-var">W8</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.bswap.i8&quot;</span></span><span>
</span><span id="line-895"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W16"><span class="hs-identifier hs-var">W16</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.bswap.i16&quot;</span></span><span>
</span><span id="line-896"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.bswap.i32&quot;</span></span><span>
</span><span id="line-897"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.bswap.i64&quot;</span></span><span>
</span><span id="line-898"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W128"><span class="hs-identifier hs-var">W128</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.bswap.i128&quot;</span></span><span>
</span><span id="line-899"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W256"><span class="hs-identifier hs-var">W256</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.bswap.i256&quot;</span></span><span>
</span><span id="line-900"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W512"><span class="hs-identifier hs-var">W512</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.bswap.i512&quot;</span></span><span>
</span><span id="line-901"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_BRev"><span class="hs-identifier hs-type">MO_BRev</span></a></span><span> </span><span id="local-6989586621681858901"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858901"><span class="hs-identifier hs-var">w</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858901"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-902"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W8"><span class="hs-identifier hs-var">W8</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.bitreverse.i8&quot;</span></span><span>
</span><span id="line-903"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W16"><span class="hs-identifier hs-var">W16</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.bitreverse.i16&quot;</span></span><span>
</span><span id="line-904"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.bitreverse.i32&quot;</span></span><span>
</span><span id="line-905"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.bitreverse.i64&quot;</span></span><span>
</span><span id="line-906"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W128"><span class="hs-identifier hs-var">W128</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.bitreverse.i128&quot;</span></span><span>
</span><span id="line-907"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W256"><span class="hs-identifier hs-var">W256</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.bitreverse.i256&quot;</span></span><span>
</span><span id="line-908"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W512"><span class="hs-identifier hs-var">W512</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.bitreverse.i512&quot;</span></span><span>
</span><span id="line-909"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Clz"><span class="hs-identifier hs-type">MO_Clz</span></a></span><span> </span><span id="local-6989586621681858902"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858902"><span class="hs-identifier hs-var">w</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858902"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-910"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W8"><span class="hs-identifier hs-var">W8</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.ctlz.i8&quot;</span></span><span>
</span><span id="line-911"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W16"><span class="hs-identifier hs-var">W16</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.ctlz.i16&quot;</span></span><span>
</span><span id="line-912"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.ctlz.i32&quot;</span></span><span>
</span><span id="line-913"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.ctlz.i64&quot;</span></span><span>
</span><span id="line-914"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W128"><span class="hs-identifier hs-var">W128</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.ctlz.i128&quot;</span></span><span>
</span><span id="line-915"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W256"><span class="hs-identifier hs-var">W256</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.ctlz.i256&quot;</span></span><span>
</span><span id="line-916"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W512"><span class="hs-identifier hs-var">W512</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.ctlz.i512&quot;</span></span><span>
</span><span id="line-917"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Ctz"><span class="hs-identifier hs-type">MO_Ctz</span></a></span><span> </span><span id="local-6989586621681858903"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858903"><span class="hs-identifier hs-var">w</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858903"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-918"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W8"><span class="hs-identifier hs-var">W8</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.cttz.i8&quot;</span></span><span>
</span><span id="line-919"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W16"><span class="hs-identifier hs-var">W16</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.cttz.i16&quot;</span></span><span>
</span><span id="line-920"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.cttz.i32&quot;</span></span><span>
</span><span id="line-921"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.cttz.i64&quot;</span></span><span>
</span><span id="line-922"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W128"><span class="hs-identifier hs-var">W128</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.cttz.i128&quot;</span></span><span>
</span><span id="line-923"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W256"><span class="hs-identifier hs-var">W256</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.cttz.i256&quot;</span></span><span>
</span><span id="line-924"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W512"><span class="hs-identifier hs-var">W512</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.cttz.i512&quot;</span></span><span>
</span><span id="line-925"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Pdep"><span class="hs-identifier hs-type">MO_Pdep</span></a></span><span> </span><span id="local-6989586621681858904"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858904"><span class="hs-identifier hs-var">w</span></a></span></span><span>
</span><span id="line-926"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681858841"><span class="hs-identifier hs-var">isBmi2Enabled</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858904"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-927"></span><span>          </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W8"><span class="hs-identifier hs-var">W8</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.x86.bmi.pdep.8&quot;</span></span><span>
</span><span id="line-928"></span><span>          </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W16"><span class="hs-identifier hs-var">W16</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.x86.bmi.pdep.16&quot;</span></span><span>
</span><span id="line-929"></span><span>          </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.x86.bmi.pdep.32&quot;</span></span><span>
</span><span id="line-930"></span><span>          </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.x86.bmi.pdep.64&quot;</span></span><span>
</span><span id="line-931"></span><span>          </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W128"><span class="hs-identifier hs-var">W128</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.x86.bmi.pdep.128&quot;</span></span><span>
</span><span id="line-932"></span><span>          </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W256"><span class="hs-identifier hs-var">W256</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.x86.bmi.pdep.256&quot;</span></span><span>
</span><span id="line-933"></span><span>          </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W512"><span class="hs-identifier hs-var">W512</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.x86.bmi.pdep.512&quot;</span></span><span>
</span><span id="line-934"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858904"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-935"></span><span>          </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W8"><span class="hs-identifier hs-var">W8</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_pdep8&quot;</span></span><span>
</span><span id="line-936"></span><span>          </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W16"><span class="hs-identifier hs-var">W16</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_pdep16&quot;</span></span><span>
</span><span id="line-937"></span><span>          </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_pdep32&quot;</span></span><span>
</span><span id="line-938"></span><span>          </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_pdep64&quot;</span></span><span>
</span><span id="line-939"></span><span>          </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W128"><span class="hs-identifier hs-var">W128</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_pdep128&quot;</span></span><span>
</span><span id="line-940"></span><span>          </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W256"><span class="hs-identifier hs-var">W256</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_pdep256&quot;</span></span><span>
</span><span id="line-941"></span><span>          </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W512"><span class="hs-identifier hs-var">W512</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_pdep512&quot;</span></span><span>
</span><span id="line-942"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Pext"><span class="hs-identifier hs-type">MO_Pext</span></a></span><span> </span><span id="local-6989586621681858905"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858905"><span class="hs-identifier hs-var">w</span></a></span></span><span>
</span><span id="line-943"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681858841"><span class="hs-identifier hs-var">isBmi2Enabled</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858905"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-944"></span><span>          </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W8"><span class="hs-identifier hs-var">W8</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.x86.bmi.pext.8&quot;</span></span><span>
</span><span id="line-945"></span><span>          </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W16"><span class="hs-identifier hs-var">W16</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.x86.bmi.pext.16&quot;</span></span><span>
</span><span id="line-946"></span><span>          </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.x86.bmi.pext.32&quot;</span></span><span>
</span><span id="line-947"></span><span>          </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.x86.bmi.pext.64&quot;</span></span><span>
</span><span id="line-948"></span><span>          </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W128"><span class="hs-identifier hs-var">W128</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.x86.bmi.pext.128&quot;</span></span><span>
</span><span id="line-949"></span><span>          </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W256"><span class="hs-identifier hs-var">W256</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.x86.bmi.pext.256&quot;</span></span><span>
</span><span id="line-950"></span><span>          </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W512"><span class="hs-identifier hs-var">W512</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.x86.bmi.pext.512&quot;</span></span><span>
</span><span id="line-951"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858905"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-952"></span><span>          </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W8"><span class="hs-identifier hs-var">W8</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_pext8&quot;</span></span><span>
</span><span id="line-953"></span><span>          </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W16"><span class="hs-identifier hs-var">W16</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_pext16&quot;</span></span><span>
</span><span id="line-954"></span><span>          </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_pext32&quot;</span></span><span>
</span><span id="line-955"></span><span>          </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_pext64&quot;</span></span><span>
</span><span id="line-956"></span><span>          </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W128"><span class="hs-identifier hs-var">W128</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_pext128&quot;</span></span><span>
</span><span id="line-957"></span><span>          </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W256"><span class="hs-identifier hs-var">W256</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_pext256&quot;</span></span><span>
</span><span id="line-958"></span><span>          </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W512"><span class="hs-identifier hs-var">W512</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hs_pext512&quot;</span></span><span>
</span><span id="line-959"></span><span>
</span><span id="line-960"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_AddIntC"><span class="hs-identifier hs-type">MO_AddIntC</span></a></span><span> </span><span id="local-6989586621681858906"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858906"><span class="hs-identifier hs-var">w</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858906"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-961"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W8"><span class="hs-identifier hs-var">W8</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.sadd.with.overflow.i8&quot;</span></span><span>
</span><span id="line-962"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W16"><span class="hs-identifier hs-var">W16</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.sadd.with.overflow.i16&quot;</span></span><span>
</span><span id="line-963"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.sadd.with.overflow.i32&quot;</span></span><span>
</span><span id="line-964"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.sadd.with.overflow.i64&quot;</span></span><span>
</span><span id="line-965"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W128"><span class="hs-identifier hs-var">W128</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.sadd.with.overflow.i128&quot;</span></span><span>
</span><span id="line-966"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W256"><span class="hs-identifier hs-var">W256</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.sadd.with.overflow.i256&quot;</span></span><span>
</span><span id="line-967"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W512"><span class="hs-identifier hs-var">W512</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.sadd.with.overflow.i512&quot;</span></span><span>
</span><span id="line-968"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_SubIntC"><span class="hs-identifier hs-type">MO_SubIntC</span></a></span><span> </span><span id="local-6989586621681858907"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858907"><span class="hs-identifier hs-var">w</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858907"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-969"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W8"><span class="hs-identifier hs-var">W8</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.ssub.with.overflow.i8&quot;</span></span><span>
</span><span id="line-970"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W16"><span class="hs-identifier hs-var">W16</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.ssub.with.overflow.i16&quot;</span></span><span>
</span><span id="line-971"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.ssub.with.overflow.i32&quot;</span></span><span>
</span><span id="line-972"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.ssub.with.overflow.i64&quot;</span></span><span>
</span><span id="line-973"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W128"><span class="hs-identifier hs-var">W128</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.ssub.with.overflow.i128&quot;</span></span><span>
</span><span id="line-974"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W256"><span class="hs-identifier hs-var">W256</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.ssub.with.overflow.i256&quot;</span></span><span>
</span><span id="line-975"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W512"><span class="hs-identifier hs-var">W512</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.ssub.with.overflow.i512&quot;</span></span><span>
</span><span id="line-976"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Add2"><span class="hs-identifier hs-type">MO_Add2</span></a></span><span> </span><span id="local-6989586621681858908"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858908"><span class="hs-identifier hs-var">w</span></a></span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858908"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-977"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W8"><span class="hs-identifier hs-var">W8</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.uadd.with.overflow.i8&quot;</span></span><span>
</span><span id="line-978"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W16"><span class="hs-identifier hs-var">W16</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.uadd.with.overflow.i16&quot;</span></span><span>
</span><span id="line-979"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.uadd.with.overflow.i32&quot;</span></span><span>
</span><span id="line-980"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.uadd.with.overflow.i64&quot;</span></span><span>
</span><span id="line-981"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W128"><span class="hs-identifier hs-var">W128</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.uadd.with.overflow.i128&quot;</span></span><span>
</span><span id="line-982"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W256"><span class="hs-identifier hs-var">W256</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.uadd.with.overflow.i256&quot;</span></span><span>
</span><span id="line-983"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W512"><span class="hs-identifier hs-var">W512</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.uadd.with.overflow.i512&quot;</span></span><span>
</span><span id="line-984"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_AddWordC"><span class="hs-identifier hs-type">MO_AddWordC</span></a></span><span> </span><span id="local-6989586621681858909"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858909"><span class="hs-identifier hs-var">w</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858909"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-985"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W8"><span class="hs-identifier hs-var">W8</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.uadd.with.overflow.i8&quot;</span></span><span>
</span><span id="line-986"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W16"><span class="hs-identifier hs-var">W16</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.uadd.with.overflow.i16&quot;</span></span><span>
</span><span id="line-987"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.uadd.with.overflow.i32&quot;</span></span><span>
</span><span id="line-988"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.uadd.with.overflow.i64&quot;</span></span><span>
</span><span id="line-989"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W128"><span class="hs-identifier hs-var">W128</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.uadd.with.overflow.i128&quot;</span></span><span>
</span><span id="line-990"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W256"><span class="hs-identifier hs-var">W256</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.uadd.with.overflow.i256&quot;</span></span><span>
</span><span id="line-991"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W512"><span class="hs-identifier hs-var">W512</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.uadd.with.overflow.i512&quot;</span></span><span>
</span><span id="line-992"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_SubWordC"><span class="hs-identifier hs-type">MO_SubWordC</span></a></span><span> </span><span id="local-6989586621681858910"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858910"><span class="hs-identifier hs-var">w</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681858910"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-993"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W8"><span class="hs-identifier hs-var">W8</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.usub.with.overflow.i8&quot;</span></span><span>
</span><span id="line-994"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W16"><span class="hs-identifier hs-var">W16</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.usub.with.overflow.i16&quot;</span></span><span>
</span><span id="line-995"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.usub.with.overflow.i32&quot;</span></span><span>
</span><span id="line-996"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.usub.with.overflow.i64&quot;</span></span><span>
</span><span id="line-997"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W128"><span class="hs-identifier hs-var">W128</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.usub.with.overflow.i128&quot;</span></span><span>
</span><span id="line-998"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W256"><span class="hs-identifier hs-var">W256</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.usub.with.overflow.i256&quot;</span></span><span>
</span><span id="line-999"></span><span>      </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W512"><span class="hs-identifier hs-var">W512</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.usub.with.overflow.i512&quot;</span></span><span>
</span><span id="line-1000"></span><span>
</span><span id="line-1001"></span><span>
</span><span id="line-1002"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Prefetch_Data"><span class="hs-identifier hs-type">MO_Prefetch_Data</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.prefetch&quot;</span></span><span>
</span><span id="line-1003"></span><span>
</span><span id="line-1004"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_Mul2"><span class="hs-identifier hs-type">MO_S_Mul2</span></a></span><span>    </span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858847"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-1005"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_QuotRem"><span class="hs-identifier hs-type">MO_S_QuotRem</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858847"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-1006"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_QuotRem"><span class="hs-identifier hs-type">MO_U_QuotRem</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858847"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-1007"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_QuotRem2"><span class="hs-identifier hs-type">MO_U_QuotRem2</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858847"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-1008"></span><span>    </span><span class="hs-comment">-- We support MO_U_Mul2 through ordinary LLVM mul instruction, see the</span><span>
</span><span id="line-1009"></span><span>    </span><span class="hs-comment">-- appropriate case of genCall.</span><span>
</span><span id="line-1010"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_Mul2"><span class="hs-identifier hs-type">MO_U_Mul2</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858847"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-1011"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_ReadBarrier"><span class="hs-identifier hs-var">MO_ReadBarrier</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858847"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-1012"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_WriteBarrier"><span class="hs-identifier hs-var">MO_WriteBarrier</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858847"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-1013"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_Touch"><span class="hs-identifier hs-var">MO_Touch</span></a></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858847"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-1014"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_UF_Conv"><span class="hs-identifier hs-type">MO_UF_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858847"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-1015"></span><span>
</span><span id="line-1016"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_AtomicRead"><span class="hs-identifier hs-type">MO_AtomicRead</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">MemoryOrdering
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858847"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-1017"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_AtomicRMW"><span class="hs-identifier hs-type">MO_AtomicRMW</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">AtomicMachOp
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858847"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-1018"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_AtomicWrite"><span class="hs-identifier hs-type">MO_AtomicWrite</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">MemoryOrdering
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858847"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-1019"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Cmpxchg"><span class="hs-identifier hs-type">MO_Cmpxchg</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858847"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-1020"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Xchg"><span class="hs-identifier hs-type">MO_Xchg</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858847"><span class="hs-identifier hs-var">unsupported</span></a></span><span>
</span><span id="line-1021"></span><span>
</span><span id="line-1022"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_I64_ToI"><span class="hs-identifier hs-var">MO_I64_ToI</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858848"><span class="hs-identifier hs-var">dontReach64</span></a></span><span>
</span><span id="line-1023"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_I64_FromI"><span class="hs-identifier hs-var">MO_I64_FromI</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858848"><span class="hs-identifier hs-var">dontReach64</span></a></span><span>
</span><span id="line-1024"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_W64_ToW"><span class="hs-identifier hs-var">MO_W64_ToW</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858848"><span class="hs-identifier hs-var">dontReach64</span></a></span><span>
</span><span id="line-1025"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_W64_FromW"><span class="hs-identifier hs-var">MO_W64_FromW</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858848"><span class="hs-identifier hs-var">dontReach64</span></a></span><span>
</span><span id="line-1026"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_x64_Neg"><span class="hs-identifier hs-var">MO_x64_Neg</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858848"><span class="hs-identifier hs-var">dontReach64</span></a></span><span>
</span><span id="line-1027"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_x64_Add"><span class="hs-identifier hs-var">MO_x64_Add</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858848"><span class="hs-identifier hs-var">dontReach64</span></a></span><span>
</span><span id="line-1028"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_x64_Sub"><span class="hs-identifier hs-var">MO_x64_Sub</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858848"><span class="hs-identifier hs-var">dontReach64</span></a></span><span>
</span><span id="line-1029"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_x64_Mul"><span class="hs-identifier hs-var">MO_x64_Mul</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858848"><span class="hs-identifier hs-var">dontReach64</span></a></span><span>
</span><span id="line-1030"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_I64_Quot"><span class="hs-identifier hs-var">MO_I64_Quot</span></a></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858848"><span class="hs-identifier hs-var">dontReach64</span></a></span><span>
</span><span id="line-1031"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_I64_Rem"><span class="hs-identifier hs-var">MO_I64_Rem</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858848"><span class="hs-identifier hs-var">dontReach64</span></a></span><span>
</span><span id="line-1032"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_W64_Quot"><span class="hs-identifier hs-var">MO_W64_Quot</span></a></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858848"><span class="hs-identifier hs-var">dontReach64</span></a></span><span>
</span><span id="line-1033"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_W64_Rem"><span class="hs-identifier hs-var">MO_W64_Rem</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858848"><span class="hs-identifier hs-var">dontReach64</span></a></span><span>
</span><span id="line-1034"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_x64_And"><span class="hs-identifier hs-var">MO_x64_And</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858848"><span class="hs-identifier hs-var">dontReach64</span></a></span><span>
</span><span id="line-1035"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_x64_Or"><span class="hs-identifier hs-var">MO_x64_Or</span></a></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858848"><span class="hs-identifier hs-var">dontReach64</span></a></span><span>
</span><span id="line-1036"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_x64_Xor"><span class="hs-identifier hs-var">MO_x64_Xor</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858848"><span class="hs-identifier hs-var">dontReach64</span></a></span><span>
</span><span id="line-1037"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_x64_Not"><span class="hs-identifier hs-var">MO_x64_Not</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858848"><span class="hs-identifier hs-var">dontReach64</span></a></span><span>
</span><span id="line-1038"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_x64_Shl"><span class="hs-identifier hs-var">MO_x64_Shl</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858848"><span class="hs-identifier hs-var">dontReach64</span></a></span><span>
</span><span id="line-1039"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_I64_Shr"><span class="hs-identifier hs-var">MO_I64_Shr</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858848"><span class="hs-identifier hs-var">dontReach64</span></a></span><span>
</span><span id="line-1040"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_W64_Shr"><span class="hs-identifier hs-var">MO_W64_Shr</span></a></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858848"><span class="hs-identifier hs-var">dontReach64</span></a></span><span>
</span><span id="line-1041"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_x64_Eq"><span class="hs-identifier hs-var">MO_x64_Eq</span></a></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858848"><span class="hs-identifier hs-var">dontReach64</span></a></span><span>
</span><span id="line-1042"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_x64_Ne"><span class="hs-identifier hs-var">MO_x64_Ne</span></a></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858848"><span class="hs-identifier hs-var">dontReach64</span></a></span><span>
</span><span id="line-1043"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_I64_Ge"><span class="hs-identifier hs-var">MO_I64_Ge</span></a></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858848"><span class="hs-identifier hs-var">dontReach64</span></a></span><span>
</span><span id="line-1044"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_I64_Gt"><span class="hs-identifier hs-var">MO_I64_Gt</span></a></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858848"><span class="hs-identifier hs-var">dontReach64</span></a></span><span>
</span><span id="line-1045"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_I64_Le"><span class="hs-identifier hs-var">MO_I64_Le</span></a></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858848"><span class="hs-identifier hs-var">dontReach64</span></a></span><span>
</span><span id="line-1046"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_I64_Lt"><span class="hs-identifier hs-var">MO_I64_Lt</span></a></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858848"><span class="hs-identifier hs-var">dontReach64</span></a></span><span>
</span><span id="line-1047"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_W64_Ge"><span class="hs-identifier hs-var">MO_W64_Ge</span></a></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858848"><span class="hs-identifier hs-var">dontReach64</span></a></span><span>
</span><span id="line-1048"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_W64_Gt"><span class="hs-identifier hs-var">MO_W64_Gt</span></a></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858848"><span class="hs-identifier hs-var">dontReach64</span></a></span><span>
</span><span id="line-1049"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_W64_Le"><span class="hs-identifier hs-var">MO_W64_Le</span></a></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858848"><span class="hs-identifier hs-var">dontReach64</span></a></span><span>
</span><span id="line-1050"></span><span>    </span><span class="annot"><span class="annottext">CallishMachOp
</span><a href="GHC.Cmm.MachOp.html#MO_W64_Lt"><span class="hs-identifier hs-var">MO_W64_Lt</span></a></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681858848"><span class="hs-identifier hs-var">dontReach64</span></a></span><span>
</span><span id="line-1051"></span><span>
</span><span id="line-1052"></span><span>
</span><span id="line-1053"></span><span class="annot"><span class="hs-comment">-- | Tail function calls</span></span><span>
</span><span id="line-1054"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genJump"><span class="hs-identifier hs-type">genJump</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Reg.html#GlobalReg"><span class="hs-identifier hs-type">GlobalReg</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#StmtData"><span class="hs-identifier hs-type">StmtData</span></a></span><span>
</span><span id="line-1055"></span><span>
</span><span id="line-1056"></span><span class="hs-comment">-- Call to known function</span><span>
</span><span id="line-1057"></span><span id="genJump"><span class="annot"><span class="annottext">genJump :: CmmExpr -&gt; [GlobalReg] -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genJump"><span class="hs-identifier hs-var hs-var">genJump</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLabel"><span class="hs-identifier hs-type">CmmLabel</span></a></span><span> </span><span id="local-6989586621681858942"><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621681858942"><span class="hs-identifier hs-var">lbl</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681858943"><span class="annot"><span class="annottext">[GlobalReg]
</span><a href="#local-6989586621681858943"><span class="hs-identifier hs-var">live</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1058"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681858944"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858944"><span class="hs-identifier hs-var">vf</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858945"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858945"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858946"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858946"><span class="hs-identifier hs-var">top</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[GlobalReg] -&gt; CLabel -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#getHsFunc"><span class="hs-identifier hs-var">getHsFunc</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalReg]
</span><a href="#local-6989586621681858943"><span class="hs-identifier hs-var">live</span></a></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621681858942"><span class="hs-identifier hs-var">lbl</span></a></span><span>
</span><span id="line-1059"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681858948"><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858948"><span class="hs-identifier hs-var">stgRegs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858949"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858949"><span class="hs-identifier hs-var">stgStmts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[GlobalReg] -&gt; LlvmM ([LlvmVar], LlvmStatements)
</span><a href="GHC.CmmToLlvm.CodeGen.html#funEpilogue"><span class="hs-identifier hs-var">funEpilogue</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalReg]
</span><a href="#local-6989586621681858943"><span class="hs-identifier hs-var">live</span></a></span><span>
</span><span id="line-1060"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858951"><span class="annot"><span class="annottext">s1 :: LlvmStatement
</span><a href="#local-6989586621681858951"><span class="hs-identifier hs-var hs-var">s1</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmExpression -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Expr"><span class="hs-identifier hs-var">Expr</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmStatement)
-&gt; LlvmExpression -&gt; LlvmStatement
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCallType
-&gt; LlvmVar -&gt; [LlvmVar] -&gt; [LlvmFuncAttr] -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Call"><span class="hs-identifier hs-var">Call</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCallType
</span><a href="GHC.Llvm.Types.html#TailCall"><span class="hs-identifier hs-var">TailCall</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858944"><span class="hs-identifier hs-var">vf</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858948"><span class="hs-identifier hs-var">stgRegs</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmFuncAttr]
</span><a href="GHC.CmmToLlvm.Base.html#llvmStdFunAttrs"><span class="hs-identifier hs-var">llvmStdFunAttrs</span></a></span><span>
</span><span id="line-1061"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858952"><span class="annot"><span class="annottext">s2 :: LlvmStatement
</span><a href="#local-6989586621681858952"><span class="hs-identifier hs-var hs-var">s2</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe LlvmVar -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Return"><span class="hs-identifier hs-var">Return</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe LlvmVar
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1062"></span><span>    </span><span class="annot"><span class="annottext">(LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858945"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatements -&gt; LlvmStatements
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858949"><span class="hs-identifier hs-var">stgStmts</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858951"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858952"><span class="hs-identifier hs-var">s2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858946"><span class="hs-identifier hs-var">top</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1063"></span><span>
</span><span id="line-1064"></span><span>
</span><span id="line-1065"></span><span class="hs-comment">-- Call to unknown function / address</span><span>
</span><span id="line-1066"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genJump"><span class="hs-identifier hs-var">genJump</span></a></span><span> </span><span id="local-6989586621681858953"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858953"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span id="local-6989586621681858954"><span class="annot"><span class="annottext">[GlobalReg]
</span><a href="#local-6989586621681858954"><span class="hs-identifier hs-var">live</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1067"></span><span>    </span><span id="local-6989586621681858955"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858955"><span class="hs-identifier hs-var">fty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[GlobalReg] -&gt; LlvmM LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#llvmFunTy"><span class="hs-identifier hs-var">llvmFunTy</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalReg]
</span><a href="#local-6989586621681858954"><span class="hs-identifier hs-var">live</span></a></span><span>
</span><span id="line-1068"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681858957"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858957"><span class="hs-identifier hs-var">vf</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858958"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858958"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858959"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858959"><span class="hs-identifier hs-var">top</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVar"><span class="hs-identifier hs-var">exprToVar</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858953"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-1069"></span><span>
</span><span id="line-1070"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858960"><span class="annot"><span class="annottext">cast :: LlvmCastOp
</span><a href="#local-6989586621681858960"><span class="hs-identifier hs-var hs-var">cast</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858957"><span class="hs-identifier hs-var">vf</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1071"></span><span>         </span><span id="local-6989586621681858961"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858961"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isPointer"><span class="hs-identifier hs-var">isPointer</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858961"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Bitcast"><span class="hs-identifier hs-var">LM_Bitcast</span></a></span><span>
</span><span id="line-1072"></span><span>         </span><span id="local-6989586621681858962"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858962"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isInt"><span class="hs-identifier hs-var">isInt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858962"><span class="hs-identifier hs-var">ty</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Inttoptr"><span class="hs-identifier hs-var">LM_Inttoptr</span></a></span><span>
</span><span id="line-1073"></span><span>
</span><span id="line-1074"></span><span>         </span><span id="local-6989586621681858963"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858963"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; LlvmCastOp
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genJump: Expr is of bad type for function call! &quot;</span></span><span>
</span><span id="line-1075"></span><span>                </span><span class="annot"><span class="annottext">(SDoc -&gt; LlvmCastOp) -&gt; SDoc -&gt; LlvmCastOp
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#lparen"><span class="hs-identifier hs-var">lparen</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858963"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#rparen"><span class="hs-identifier hs-var">rparen</span></a></span><span>
</span><span id="line-1076"></span><span>
</span><span id="line-1077"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681858964"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858964"><span class="hs-identifier hs-var">v1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858965"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858965"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#pLift"><span class="hs-identifier hs-var">pLift</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858955"><span class="hs-identifier hs-var">fty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="#local-6989586621681858960"><span class="hs-identifier hs-var">cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858957"><span class="hs-identifier hs-var">vf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#pLift"><span class="hs-identifier hs-var">pLift</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858955"><span class="hs-identifier hs-var">fty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1078"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681858966"><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858966"><span class="hs-identifier hs-var">stgRegs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858967"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858967"><span class="hs-identifier hs-var">stgStmts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[GlobalReg] -&gt; LlvmM ([LlvmVar], LlvmStatements)
</span><a href="GHC.CmmToLlvm.CodeGen.html#funEpilogue"><span class="hs-identifier hs-var">funEpilogue</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalReg]
</span><a href="#local-6989586621681858954"><span class="hs-identifier hs-var">live</span></a></span><span>
</span><span id="line-1079"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858968"><span class="annot"><span class="annottext">s2 :: LlvmStatement
</span><a href="#local-6989586621681858968"><span class="hs-identifier hs-var hs-var">s2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmExpression -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Expr"><span class="hs-identifier hs-var">Expr</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmStatement)
-&gt; LlvmExpression -&gt; LlvmStatement
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCallType
-&gt; LlvmVar -&gt; [LlvmVar] -&gt; [LlvmFuncAttr] -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Call"><span class="hs-identifier hs-var">Call</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCallType
</span><a href="GHC.Llvm.Types.html#TailCall"><span class="hs-identifier hs-var">TailCall</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858964"><span class="hs-identifier hs-var">v1</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681858966"><span class="hs-identifier hs-var">stgRegs</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmFuncAttr]
</span><a href="GHC.CmmToLlvm.Base.html#llvmStdFunAttrs"><span class="hs-identifier hs-var">llvmStdFunAttrs</span></a></span><span>
</span><span id="line-1080"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858969"><span class="annot"><span class="annottext">s3 :: LlvmStatement
</span><a href="#local-6989586621681858969"><span class="hs-identifier hs-var hs-var">s3</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe LlvmVar -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Return"><span class="hs-identifier hs-var">Return</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe LlvmVar
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1081"></span><span>    </span><span class="annot"><span class="annottext">(LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858958"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858965"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatements -&gt; LlvmStatements
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858967"><span class="hs-identifier hs-var">stgStmts</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858968"><span class="hs-identifier hs-var">s2</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858969"><span class="hs-identifier hs-var">s3</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1082"></span><span>            </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858959"><span class="hs-identifier hs-var">top</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1083"></span><span>
</span><span id="line-1084"></span><span>
</span><span id="line-1085"></span><span class="hs-comment">-- | CmmAssign operation</span><span>
</span><span id="line-1086"></span><span class="hs-comment">--</span><span>
</span><span id="line-1087"></span><span class="hs-comment">-- We use stack allocated variables for CmmReg. The optimiser will replace</span><span>
</span><span id="line-1088"></span><span class="hs-comment">-- these with registers when possible.</span><span>
</span><span id="line-1089"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genAssign"><span class="hs-identifier hs-type">genAssign</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmReg"><span class="hs-identifier hs-type">CmmReg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#StmtData"><span class="hs-identifier hs-type">StmtData</span></a></span><span>
</span><span id="line-1090"></span><span id="genAssign"><span class="annot"><span class="annottext">genAssign :: CmmReg -&gt; CmmExpr -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genAssign"><span class="hs-identifier hs-var hs-var">genAssign</span></a></span></span><span> </span><span id="local-6989586621681858970"><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621681858970"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span id="local-6989586621681858971"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858971"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1091"></span><span>    </span><span id="local-6989586621681858972"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858972"><span class="hs-identifier hs-var">vreg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmReg -&gt; LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#getCmmReg"><span class="hs-identifier hs-var">getCmmReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621681858970"><span class="hs-identifier hs-var">reg</span></a></span><span>
</span><span id="line-1092"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681858973"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858973"><span class="hs-identifier hs-var">vval</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858974"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858974"><span class="hs-identifier hs-var">stmts2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858975"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858975"><span class="hs-identifier hs-var">top2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVar"><span class="hs-identifier hs-var">exprToVar</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858971"><span class="hs-identifier hs-var">val</span></a></span><span>
</span><span id="line-1093"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858976"><span class="annot"><span class="annottext">stmts :: LlvmStatements
</span><a href="#local-6989586621681858976"><span class="hs-identifier hs-var hs-var">stmts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858974"><span class="hs-identifier hs-var">stmts2</span></a></span><span>
</span><span id="line-1094"></span><span>
</span><span id="line-1095"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858977"><span class="annot"><span class="annottext">ty :: LlvmType
</span><a href="#local-6989586621681858977"><span class="hs-identifier hs-var hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#pLower"><span class="hs-identifier hs-var">pLower</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmType -&gt; LlvmType)
-&gt; (LlvmVar -&gt; LlvmType) -&gt; LlvmVar -&gt; LlvmType
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858972"><span class="hs-identifier hs-var">vreg</span></a></span><span>
</span><span id="line-1096"></span><span>    </span><span id="local-6989586621681858979"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681858979"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM Platform
</span><a href="GHC.CmmToLlvm.Base.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-1097"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858977"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1098"></span><span>      </span><span class="hs-comment">-- Some registers are pointer types, so need to cast value to pointer</span><span>
</span><span id="line-1099"></span><span>      </span><span class="annot"><a href="GHC.Llvm.Types.html#LMPointer"><span class="hs-identifier hs-type">LMPointer</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858973"><span class="hs-identifier hs-var">vval</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#llvmWord"><span class="hs-identifier hs-var">llvmWord</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681858979"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1100"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621681858981"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858981"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858982"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858982"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858977"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Inttoptr"><span class="hs-identifier hs-var">LM_Inttoptr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858973"><span class="hs-identifier hs-var">vval</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858977"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1101"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858983"><span class="annot"><span class="annottext">s2 :: LlvmStatement
</span><a href="#local-6989586621681858983"><span class="hs-identifier hs-var hs-var">s2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LMAlign -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Store"><span class="hs-identifier hs-var">Store</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858981"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858972"><span class="hs-identifier hs-var">vreg</span></a></span><span> </span><span class="annot"><span class="annottext">LMAlign
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1102"></span><span>          </span><span class="annot"><span class="annottext">(LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858976"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858982"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858983"><span class="hs-identifier hs-var">s2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858975"><span class="hs-identifier hs-var">top2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1103"></span><span>
</span><span id="line-1104"></span><span>      </span><span class="annot"><a href="GHC.Llvm.Types.html#LMVector"><span class="hs-identifier hs-type">LMVector</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1105"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621681858985"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858985"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681858986"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858986"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858977"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Bitcast"><span class="hs-identifier hs-var">LM_Bitcast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858973"><span class="hs-identifier hs-var">vval</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681858977"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1106"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858987"><span class="annot"><span class="annottext">s2 :: LlvmStatement
</span><a href="#local-6989586621681858987"><span class="hs-identifier hs-var hs-var">s2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; AlignmentSpec -&gt; LlvmStatement
</span><a href="GHC.CmmToLlvm.CodeGen.html#mkStore"><span class="hs-identifier hs-var">mkStore</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858985"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858972"><span class="hs-identifier hs-var">vreg</span></a></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="GHC.Cmm.Expr.html#NaturallyAligned"><span class="hs-identifier hs-var">NaturallyAligned</span></a></span><span>
</span><span id="line-1107"></span><span>          </span><span class="annot"><span class="annottext">(LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858976"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858986"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858987"><span class="hs-identifier hs-var">s2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858975"><span class="hs-identifier hs-var">top2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1108"></span><span>
</span><span id="line-1109"></span><span>      </span><span class="annot"><span class="annottext">LlvmType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1110"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681858989"><span class="annot"><span class="annottext">s1 :: LlvmStatement
</span><a href="#local-6989586621681858989"><span class="hs-identifier hs-var hs-var">s1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LMAlign -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Store"><span class="hs-identifier hs-var">Store</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858973"><span class="hs-identifier hs-var">vval</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681858972"><span class="hs-identifier hs-var">vreg</span></a></span><span> </span><span class="annot"><span class="annottext">LMAlign
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1111"></span><span>          </span><span class="annot"><span class="annottext">(LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681858976"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681858989"><span class="hs-identifier hs-var">s1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681858975"><span class="hs-identifier hs-var">top2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1112"></span><span>
</span><span id="line-1113"></span><span>
</span><span id="line-1114"></span><span class="annot"><span class="hs-comment">-- | CmmStore operation</span></span><span>
</span><span id="line-1115"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genStore"><span class="hs-identifier hs-type">genStore</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#AlignmentSpec"><span class="hs-identifier hs-type">AlignmentSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#StmtData"><span class="hs-identifier hs-type">StmtData</span></a></span><span>
</span><span id="line-1116"></span><span>
</span><span id="line-1117"></span><span class="hs-comment">-- First we try to detect a few common cases and produce better code for</span><span>
</span><span id="line-1118"></span><span class="hs-comment">-- these then the default case. We are mostly trying to detect Cmm code</span><span>
</span><span id="line-1119"></span><span class="hs-comment">-- like I32[Sp + n] and use 'getelementptr' operations instead of the</span><span>
</span><span id="line-1120"></span><span class="hs-comment">-- generic case that uses casts and pointer arithmetic</span><span>
</span><span id="line-1121"></span><span id="genStore"><span class="annot"><span class="annottext">genStore :: CmmExpr
-&gt; CmmExpr
-&gt; AlignmentSpec
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genStore"><span class="hs-identifier hs-var hs-var">genStore</span></a></span></span><span> </span><span id="local-6989586621681858990"><span class="annot"><span class="annottext">addr :: CmmExpr
</span><a href="#local-6989586621681858990"><span class="hs-identifier hs-var">addr</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmReg"><span class="hs-identifier hs-type">CmmReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmGlobal"><span class="hs-identifier hs-type">CmmGlobal</span></a></span><span> </span><span id="local-6989586621681858993"><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681858993"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681858994"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858994"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span id="local-6989586621681858995"><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681858995"><span class="hs-identifier hs-var">alignment</span></a></span></span><span>
</span><span id="line-1122"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmExpr
-&gt; GlobalReg
-&gt; Int
-&gt; CmmExpr
-&gt; AlignmentSpec
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genStore_fast"><span class="hs-identifier hs-var">genStore_fast</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858990"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681858993"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858994"><span class="hs-identifier hs-var">val</span></a></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681858995"><span class="hs-identifier hs-var">alignment</span></a></span><span>
</span><span id="line-1123"></span><span>
</span><span id="line-1124"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genStore"><span class="hs-identifier hs-var">genStore</span></a></span><span> </span><span id="local-6989586621681858997"><span class="annot"><span class="annottext">addr :: CmmExpr
</span><a href="#local-6989586621681858997"><span class="hs-identifier hs-var">addr</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmRegOff"><span class="hs-identifier hs-type">CmmRegOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmGlobal"><span class="hs-identifier hs-type">CmmGlobal</span></a></span><span> </span><span id="local-6989586621681858999"><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681858999"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681859000"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859000"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681859001"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859001"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span id="local-6989586621681859002"><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859002"><span class="hs-identifier hs-var">alignment</span></a></span></span><span>
</span><span id="line-1125"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmExpr
-&gt; GlobalReg
-&gt; Int
-&gt; CmmExpr
-&gt; AlignmentSpec
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genStore_fast"><span class="hs-identifier hs-var">genStore_fast</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681858997"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681858999"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859000"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859001"><span class="hs-identifier hs-var">val</span></a></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859002"><span class="hs-identifier hs-var">alignment</span></a></span><span>
</span><span id="line-1126"></span><span>
</span><span id="line-1127"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genStore"><span class="hs-identifier hs-var">genStore</span></a></span><span> </span><span id="local-6989586621681859003"><span class="annot"><span class="annottext">addr :: CmmExpr
</span><a href="#local-6989586621681859003"><span class="hs-identifier hs-var">addr</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Add"><span class="hs-identifier hs-type">MO_Add</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-1128"></span><span>                            </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmReg"><span class="hs-identifier hs-type">CmmReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmGlobal"><span class="hs-identifier hs-type">CmmGlobal</span></a></span><span> </span><span id="local-6989586621681859006"><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859006"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1129"></span><span>                            </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-type">CmmInt</span></a></span><span> </span><span id="local-6989586621681859008"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681859008"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1130"></span><span>                </span><span id="local-6989586621681859009"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859009"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span id="local-6989586621681859010"><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859010"><span class="hs-identifier hs-var">alignment</span></a></span></span><span>
</span><span id="line-1131"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmExpr
-&gt; GlobalReg
-&gt; Int
-&gt; CmmExpr
-&gt; AlignmentSpec
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genStore_fast"><span class="hs-identifier hs-var">genStore_fast</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859003"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859006"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Int
forall a. Num a =&gt; Integer -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#fromInteger/GHC.Num.html#fromInteger"><span class="hs-identifier hs-var">fromInteger</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681859008"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859009"><span class="hs-identifier hs-var">val</span></a></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859010"><span class="hs-identifier hs-var">alignment</span></a></span><span>
</span><span id="line-1132"></span><span>
</span><span id="line-1133"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genStore"><span class="hs-identifier hs-var">genStore</span></a></span><span> </span><span id="local-6989586621681859011"><span class="annot"><span class="annottext">addr :: CmmExpr
</span><a href="#local-6989586621681859011"><span class="hs-identifier hs-var">addr</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Sub"><span class="hs-identifier hs-type">MO_Sub</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-1134"></span><span>                            </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmReg"><span class="hs-identifier hs-type">CmmReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmGlobal"><span class="hs-identifier hs-type">CmmGlobal</span></a></span><span> </span><span id="local-6989586621681859013"><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859013"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1135"></span><span>                            </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-type">CmmInt</span></a></span><span> </span><span id="local-6989586621681859014"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681859014"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1136"></span><span>                </span><span id="local-6989586621681859015"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859015"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span id="local-6989586621681859016"><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859016"><span class="hs-identifier hs-var">alignment</span></a></span></span><span>
</span><span id="line-1137"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmExpr
-&gt; GlobalReg
-&gt; Int
-&gt; CmmExpr
-&gt; AlignmentSpec
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genStore_fast"><span class="hs-identifier hs-var">genStore_fast</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859011"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859013"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int
forall a. Num a =&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#negate/GHC.Num.html#negate"><span class="hs-identifier hs-var">negate</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Int) -&gt; Int -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Int
forall a. Num a =&gt; Integer -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#fromInteger/GHC.Num.html#fromInteger"><span class="hs-identifier hs-var">fromInteger</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681859014"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859015"><span class="hs-identifier hs-var">val</span></a></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859016"><span class="hs-identifier hs-var">alignment</span></a></span><span>
</span><span id="line-1138"></span><span>
</span><span id="line-1139"></span><span class="hs-comment">-- generic case</span><span>
</span><span id="line-1140"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genStore"><span class="hs-identifier hs-var">genStore</span></a></span><span> </span><span id="local-6989586621681859017"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859017"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span id="local-6989586621681859018"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859018"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span id="local-6989586621681859019"><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859019"><span class="hs-identifier hs-var">alignment</span></a></span></span><span>
</span><span id="line-1141"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Unique -&gt; LlvmM [MetaAnnot]
</span><a href="GHC.CmmToLlvm.CodeGen.html#getTBAAMeta"><span class="hs-identifier hs-var">getTBAAMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="GHC.CmmToLlvm.Regs.html#topN"><span class="hs-identifier hs-var">topN</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmM [MetaAnnot]
-&gt; ([MetaAnnot] -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl]))
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a b. LlvmM a -&gt; (a -&gt; LlvmM b) -&gt; LlvmM b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%3E%3E%3D/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
-&gt; CmmExpr
-&gt; AlignmentSpec
-&gt; [MetaAnnot]
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genStore_slow"><span class="hs-identifier hs-var">genStore_slow</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859017"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859018"><span class="hs-identifier hs-var">val</span></a></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859019"><span class="hs-identifier hs-var">alignment</span></a></span><span>
</span><span id="line-1142"></span><span>
</span><span id="line-1143"></span><span class="hs-comment">-- | CmmStore operation</span><span>
</span><span id="line-1144"></span><span class="hs-comment">-- This is a special case for storing to a global register pointer</span><span>
</span><span id="line-1145"></span><span class="hs-comment">-- offset such as I32[Sp+8].</span><span>
</span><span id="line-1146"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genStore_fast"><span class="hs-identifier hs-type">genStore_fast</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Reg.html#GlobalReg"><span class="hs-identifier hs-type">GlobalReg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#AlignmentSpec"><span class="hs-identifier hs-type">AlignmentSpec</span></a></span><span>
</span><span id="line-1147"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#StmtData"><span class="hs-identifier hs-type">StmtData</span></a></span><span>
</span><span id="line-1148"></span><span id="genStore_fast"><span class="annot"><span class="annottext">genStore_fast :: CmmExpr
-&gt; GlobalReg
-&gt; Int
-&gt; CmmExpr
-&gt; AlignmentSpec
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genStore_fast"><span class="hs-identifier hs-var hs-var">genStore_fast</span></a></span></span><span> </span><span id="local-6989586621681859023"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859023"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span id="local-6989586621681859024"><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859024"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681859025"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859025"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681859026"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859026"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span id="local-6989586621681859027"><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859027"><span class="hs-identifier hs-var">alignment</span></a></span></span><span>
</span><span id="line-1149"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681859028"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859028"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM Platform
</span><a href="GHC.CmmToLlvm.Base.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-1150"></span><span>       </span><span class="hs-special">(</span><span id="local-6989586621681859029"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859029"><span class="hs-identifier hs-var">gv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859030"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859030"><span class="hs-identifier hs-var">grt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859031"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859031"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmReg -&gt; LlvmM (LlvmVar, LlvmType, LlvmStatements)
</span><a href="GHC.CmmToLlvm.CodeGen.html#getCmmRegVal"><span class="hs-identifier hs-var">getCmmRegVal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalReg -&gt; CmmReg
</span><a href="GHC.Cmm.Reg.html#CmmGlobal"><span class="hs-identifier hs-var">CmmGlobal</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859024"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1151"></span><span>       </span><span id="local-6989586621681859033"><span class="annot"><span class="annottext">[MetaAnnot]
</span><a href="#local-6989586621681859033"><span class="hs-identifier hs-var">meta</span></a></span></span><span>          </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GlobalReg -&gt; LlvmM [MetaAnnot]
</span><a href="GHC.CmmToLlvm.CodeGen.html#getTBAARegMeta"><span class="hs-identifier hs-var">getTBAARegMeta</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859024"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-1152"></span><span>       </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681859035"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859035"><span class="hs-identifier hs-var">ix</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681859036"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859036"><span class="hs-identifier hs-var">rem</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859025"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; (Int, Int)
forall a. Integral a =&gt; a -&gt; a -&gt; (a, a)
</span><a href="../../base-4.18.3.0/src/GHC.Real.html#divMod/GHC.Real.html#divMod"><span class="hs-operator hs-var">`divMod`</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; LlvmType -&gt; Int
</span><a href="GHC.Llvm.Types.html#llvmWidthInBits"><span class="hs-identifier hs-var">llvmWidthInBits</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859028"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmType -&gt; Int) -&gt; (LlvmType -&gt; LlvmType) -&gt; LlvmType -&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#pLower"><span class="hs-identifier hs-var">pLower</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859030"><span class="hs-identifier hs-var">grt</span></a></span><span>  </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Real.html#div/GHC.Real.html#div"><span class="hs-operator hs-var">`div`</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span class="hs-special">)</span><span>
</span><span id="line-1153"></span><span>       </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isPointer"><span class="hs-identifier hs-var">isPointer</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859030"><span class="hs-identifier hs-var">grt</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859036"><span class="hs-identifier hs-var">rem</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1154"></span><span>            </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1155"></span><span>                </span><span class="hs-special">(</span><span id="local-6989586621681859039"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859039"><span class="hs-identifier hs-var">vval</span></a></span></span><span class="hs-special">,</span><span>  </span><span id="local-6989586621681859040"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859040"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859041"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859041"><span class="hs-identifier hs-var">top</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVar"><span class="hs-identifier hs-var">exprToVar</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859026"><span class="hs-identifier hs-var">val</span></a></span><span>
</span><span id="line-1156"></span><span>                </span><span class="hs-special">(</span><span id="local-6989586621681859042"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859042"><span class="hs-identifier hs-var">ptr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859043"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859043"><span class="hs-identifier hs-var">s2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859030"><span class="hs-identifier hs-var">grt</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; LlvmVar -&gt; [LlvmVar] -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#GetElemPtr"><span class="hs-identifier hs-var">GetElemPtr</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859029"><span class="hs-identifier hs-var">gv</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int -&gt; LlvmVar
forall a. Integral a =&gt; a -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#toI32"><span class="hs-identifier hs-var">toI32</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859035"><span class="hs-identifier hs-var">ix</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1157"></span><span>                </span><span class="hs-comment">-- We might need a different pointer type, so check</span><span>
</span><span id="line-1158"></span><span>                </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#pLower"><span class="hs-identifier hs-var">pLower</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859030"><span class="hs-identifier hs-var">grt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859039"><span class="hs-identifier hs-var">vval</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1159"></span><span>                     </span><span class="hs-comment">-- were fine</span><span>
</span><span id="line-1160"></span><span>                     </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1161"></span><span>                         </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859046"><span class="annot"><span class="annottext">s3 :: LlvmStatement
</span><a href="#local-6989586621681859046"><span class="hs-identifier hs-var hs-var">s3</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[MetaAnnot] -&gt; LlvmStatement -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#MetaStmt"><span class="hs-identifier hs-var">MetaStmt</span></a></span><span> </span><span class="annot"><span class="annottext">[MetaAnnot]
</span><a href="#local-6989586621681859033"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmStatement -&gt; LlvmStatement) -&gt; LlvmStatement -&gt; LlvmStatement
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; AlignmentSpec -&gt; LlvmStatement
</span><a href="GHC.CmmToLlvm.CodeGen.html#mkStore"><span class="hs-identifier hs-var">mkStore</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859039"><span class="hs-identifier hs-var">vval</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859042"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859027"><span class="hs-identifier hs-var">alignment</span></a></span><span>
</span><span id="line-1162"></span><span>                         </span><span class="annot"><span class="annottext">(LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859040"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatements -&gt; LlvmStatements
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859031"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859043"><span class="hs-identifier hs-var">s2</span></a></span><span>
</span><span id="line-1163"></span><span>                                 </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859046"><span class="hs-identifier hs-var">s3</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859041"><span class="hs-identifier hs-var">top</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1164"></span><span>
</span><span id="line-1165"></span><span>                     </span><span class="hs-comment">-- cast to pointer type needed</span><span>
</span><span id="line-1166"></span><span>                     </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1167"></span><span>                         </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859048"><span class="annot"><span class="annottext">ty :: LlvmType
</span><a href="#local-6989586621681859048"><span class="hs-identifier hs-var hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#pLift"><span class="hs-identifier hs-var">pLift</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmType -&gt; LlvmType)
-&gt; (LlvmVar -&gt; LlvmType) -&gt; LlvmVar -&gt; LlvmType
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859039"><span class="hs-identifier hs-var">vval</span></a></span><span>
</span><span id="line-1168"></span><span>                         </span><span class="hs-special">(</span><span id="local-6989586621681859049"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859049"><span class="hs-identifier hs-var">ptr'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859050"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859050"><span class="hs-identifier hs-var">s3</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859048"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Bitcast"><span class="hs-identifier hs-var">LM_Bitcast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859042"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859048"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1169"></span><span>                         </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859051"><span class="annot"><span class="annottext">s4 :: LlvmStatement
</span><a href="#local-6989586621681859051"><span class="hs-identifier hs-var hs-var">s4</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[MetaAnnot] -&gt; LlvmStatement -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#MetaStmt"><span class="hs-identifier hs-var">MetaStmt</span></a></span><span> </span><span class="annot"><span class="annottext">[MetaAnnot]
</span><a href="#local-6989586621681859033"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmStatement -&gt; LlvmStatement) -&gt; LlvmStatement -&gt; LlvmStatement
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; AlignmentSpec -&gt; LlvmStatement
</span><a href="GHC.CmmToLlvm.CodeGen.html#mkStore"><span class="hs-identifier hs-var">mkStore</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859039"><span class="hs-identifier hs-var">vval</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859049"><span class="hs-identifier hs-var">ptr'</span></a></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859027"><span class="hs-identifier hs-var">alignment</span></a></span><span>
</span><span id="line-1170"></span><span>                         </span><span class="annot"><span class="annottext">(LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859040"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatements -&gt; LlvmStatements
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859031"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859043"><span class="hs-identifier hs-var">s2</span></a></span><span>
</span><span id="line-1171"></span><span>                                 </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859050"><span class="hs-identifier hs-var">s3</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859051"><span class="hs-identifier hs-var">s4</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859041"><span class="hs-identifier hs-var">top</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1172"></span><span>
</span><span id="line-1173"></span><span>            </span><span class="hs-comment">-- If its a bit type then we use the slow method since</span><span>
</span><span id="line-1174"></span><span>            </span><span class="hs-comment">-- we can't avoid casting anyway.</span><span>
</span><span id="line-1175"></span><span>            </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CmmExpr
-&gt; CmmExpr
-&gt; AlignmentSpec
-&gt; [MetaAnnot]
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genStore_slow"><span class="hs-identifier hs-var">genStore_slow</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859023"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859026"><span class="hs-identifier hs-var">val</span></a></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859027"><span class="hs-identifier hs-var">alignment</span></a></span><span> </span><span class="annot"><span class="annottext">[MetaAnnot]
</span><a href="#local-6989586621681859033"><span class="hs-identifier hs-var">meta</span></a></span><span>
</span><span id="line-1176"></span><span>
</span><span id="line-1177"></span><span>
</span><span id="line-1178"></span><span class="hs-comment">-- | CmmStore operation</span><span>
</span><span id="line-1179"></span><span class="hs-comment">-- Generic case. Uses casts and pointer arithmetic if needed.</span><span>
</span><span id="line-1180"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genStore_slow"><span class="hs-identifier hs-type">genStore_slow</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#AlignmentSpec"><span class="hs-identifier hs-type">AlignmentSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Llvm.MetaData.html#MetaAnnot"><span class="hs-identifier hs-type">MetaAnnot</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#StmtData"><span class="hs-identifier hs-type">StmtData</span></a></span><span>
</span><span id="line-1181"></span><span id="genStore_slow"><span class="annot"><span class="annottext">genStore_slow :: CmmExpr
-&gt; CmmExpr
-&gt; AlignmentSpec
-&gt; [MetaAnnot]
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genStore_slow"><span class="hs-identifier hs-var hs-var">genStore_slow</span></a></span></span><span> </span><span id="local-6989586621681859052"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859052"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span id="local-6989586621681859053"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859053"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span id="local-6989586621681859054"><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859054"><span class="hs-identifier hs-var">alignment</span></a></span></span><span> </span><span id="local-6989586621681859055"><span class="annot"><span class="annottext">[MetaAnnot]
</span><a href="#local-6989586621681859055"><span class="hs-identifier hs-var">meta</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1182"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681859056"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859056"><span class="hs-identifier hs-var">vaddr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859057"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859057"><span class="hs-identifier hs-var">stmts1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859058"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859058"><span class="hs-identifier hs-var">top1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVar"><span class="hs-identifier hs-var">exprToVar</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859052"><span class="hs-identifier hs-var">addr</span></a></span><span>
</span><span id="line-1183"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681859059"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859059"><span class="hs-identifier hs-var">vval</span></a></span></span><span class="hs-special">,</span><span>  </span><span id="local-6989586621681859060"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859060"><span class="hs-identifier hs-var">stmts2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859061"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859061"><span class="hs-identifier hs-var">top2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVar"><span class="hs-identifier hs-var">exprToVar</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859053"><span class="hs-identifier hs-var">val</span></a></span><span>
</span><span id="line-1184"></span><span>
</span><span id="line-1185"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859062"><span class="annot"><span class="annottext">stmts :: LlvmStatements
</span><a href="#local-6989586621681859062"><span class="hs-identifier hs-var hs-var">stmts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859057"><span class="hs-identifier hs-var">stmts1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatements -&gt; LlvmStatements
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859060"><span class="hs-identifier hs-var">stmts2</span></a></span><span>
</span><span id="line-1186"></span><span>    </span><span id="local-6989586621681859063"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859063"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM Platform
</span><a href="GHC.CmmToLlvm.Base.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-1187"></span><span>    </span><span id="local-6989586621681859064"><span class="annot"><span class="annottext">LlvmCgConfig
</span><a href="#local-6989586621681859064"><span class="hs-identifier hs-var">cfg</span></a></span></span><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM LlvmCgConfig
</span><a href="GHC.CmmToLlvm.Base.html#getConfig"><span class="hs-identifier hs-var">getConfig</span></a></span><span>
</span><span id="line-1188"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859056"><span class="hs-identifier hs-var">vaddr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1189"></span><span>        </span><span class="hs-comment">-- sometimes we need to cast an int to a pointer before storing</span><span>
</span><span id="line-1190"></span><span>        </span><span class="annot"><a href="GHC.Llvm.Types.html#LMPointer"><span class="hs-identifier hs-type">LMPointer</span></a></span><span> </span><span id="local-6989586621681859065"><span class="annot"><span class="annottext">ty :: LlvmType
</span><a href="#local-6989586621681859065"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Llvm.Types.html#LMPointer"><span class="hs-identifier hs-type">LMPointer</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859059"><span class="hs-identifier hs-var">vval</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#llvmWord"><span class="hs-identifier hs-var">llvmWord</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859063"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1191"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621681859066"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859066"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859067"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859067"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859065"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Inttoptr"><span class="hs-identifier hs-var">LM_Inttoptr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859059"><span class="hs-identifier hs-var">vval</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859065"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1192"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859068"><span class="annot"><span class="annottext">s2 :: LlvmStatement
</span><a href="#local-6989586621681859068"><span class="hs-identifier hs-var hs-var">s2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[MetaAnnot] -&gt; LlvmStatement -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#MetaStmt"><span class="hs-identifier hs-var">MetaStmt</span></a></span><span> </span><span class="annot"><span class="annottext">[MetaAnnot]
</span><a href="#local-6989586621681859055"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmStatement -&gt; LlvmStatement) -&gt; LlvmStatement -&gt; LlvmStatement
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; AlignmentSpec -&gt; LlvmStatement
</span><a href="GHC.CmmToLlvm.CodeGen.html#mkStore"><span class="hs-identifier hs-var">mkStore</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859066"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859056"><span class="hs-identifier hs-var">vaddr</span></a></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859054"><span class="hs-identifier hs-var">alignment</span></a></span><span>
</span><span id="line-1193"></span><span>            </span><span class="annot"><span class="annottext">(LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859062"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859067"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859068"><span class="hs-identifier hs-var">s2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859058"><span class="hs-identifier hs-var">top1</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl] -&gt; [LlvmCmmDecl] -&gt; [LlvmCmmDecl]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859061"><span class="hs-identifier hs-var">top2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1194"></span><span>
</span><span id="line-1195"></span><span>        </span><span class="annot"><a href="GHC.Llvm.Types.html#LMPointer"><span class="hs-identifier hs-type">LMPointer</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1196"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859069"><span class="annot"><span class="annottext">s1 :: LlvmStatement
</span><a href="#local-6989586621681859069"><span class="hs-identifier hs-var hs-var">s1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[MetaAnnot] -&gt; LlvmStatement -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#MetaStmt"><span class="hs-identifier hs-var">MetaStmt</span></a></span><span> </span><span class="annot"><span class="annottext">[MetaAnnot]
</span><a href="#local-6989586621681859055"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmStatement -&gt; LlvmStatement) -&gt; LlvmStatement -&gt; LlvmStatement
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; AlignmentSpec -&gt; LlvmStatement
</span><a href="GHC.CmmToLlvm.CodeGen.html#mkStore"><span class="hs-identifier hs-var">mkStore</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859059"><span class="hs-identifier hs-var">vval</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859056"><span class="hs-identifier hs-var">vaddr</span></a></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859054"><span class="hs-identifier hs-var">alignment</span></a></span><span>
</span><span id="line-1197"></span><span>            </span><span class="annot"><span class="annottext">(LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859062"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859069"><span class="hs-identifier hs-var">s1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859058"><span class="hs-identifier hs-var">top1</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl] -&gt; [LlvmCmmDecl] -&gt; [LlvmCmmDecl]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859061"><span class="hs-identifier hs-var">top2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1198"></span><span>
</span><span id="line-1199"></span><span>        </span><span id="local-6989586621681859070"><span class="annot"><span class="annottext">i :: LlvmType
</span><a href="#local-6989586621681859070"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Llvm.Types.html#LMInt"><span class="hs-identifier hs-type">LMInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859070"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#llvmWord"><span class="hs-identifier hs-var">llvmWord</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859063"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1200"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859071"><span class="annot"><span class="annottext">vty :: LlvmType
</span><a href="#local-6989586621681859071"><span class="hs-identifier hs-var hs-var">vty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#pLift"><span class="hs-identifier hs-var">pLift</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmType -&gt; LlvmType) -&gt; LlvmType -&gt; LlvmType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859059"><span class="hs-identifier hs-var">vval</span></a></span><span>
</span><span id="line-1201"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621681859072"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859072"><span class="hs-identifier hs-var">vptr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859073"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859073"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859071"><span class="hs-identifier hs-var">vty</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Inttoptr"><span class="hs-identifier hs-var">LM_Inttoptr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859056"><span class="hs-identifier hs-var">vaddr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859071"><span class="hs-identifier hs-var">vty</span></a></span><span>
</span><span id="line-1202"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859074"><span class="annot"><span class="annottext">s2 :: LlvmStatement
</span><a href="#local-6989586621681859074"><span class="hs-identifier hs-var hs-var">s2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[MetaAnnot] -&gt; LlvmStatement -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#MetaStmt"><span class="hs-identifier hs-var">MetaStmt</span></a></span><span> </span><span class="annot"><span class="annottext">[MetaAnnot]
</span><a href="#local-6989586621681859055"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmStatement -&gt; LlvmStatement) -&gt; LlvmStatement -&gt; LlvmStatement
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; AlignmentSpec -&gt; LlvmStatement
</span><a href="GHC.CmmToLlvm.CodeGen.html#mkStore"><span class="hs-identifier hs-var">mkStore</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859059"><span class="hs-identifier hs-var">vval</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859072"><span class="hs-identifier hs-var">vptr</span></a></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859054"><span class="hs-identifier hs-var">alignment</span></a></span><span>
</span><span id="line-1203"></span><span>            </span><span class="annot"><span class="annottext">(LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859062"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859073"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859074"><span class="hs-identifier hs-var">s2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859058"><span class="hs-identifier hs-var">top1</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl] -&gt; [LlvmCmmDecl] -&gt; [LlvmCmmDecl]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859061"><span class="hs-identifier hs-var">top2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1204"></span><span>
</span><span id="line-1205"></span><span>        </span><span id="local-6989586621681859075"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859075"><span class="hs-identifier hs-var">other</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1206"></span><span>            </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genStore: ptr not right type!&quot;</span></span><span>
</span><span id="line-1207"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; CmmExpr -&gt; SDoc
forall env a. OutputableP env a =&gt; env -&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pdoc"><span class="hs-identifier hs-var">pdoc</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859063"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859052"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-1208"></span><span>                     </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Size of Ptr:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; Int
</span><a href="GHC.CmmToLlvm.Base.html#llvmPtrBits"><span class="hs-identifier hs-var">llvmPtrBits</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859063"><span class="hs-identifier hs-var">platform</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-1209"></span><span>                     </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Size of var:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; LlvmType -&gt; Int
</span><a href="GHC.Llvm.Types.html#llvmWidthInBits"><span class="hs-identifier hs-var">llvmWidthInBits</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859063"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859075"><span class="hs-identifier hs-var">other</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-1210"></span><span>                     </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Var:&quot;</span></span><span>         </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCgConfig -&gt; LlvmVar -&gt; SDoc
</span><a href="GHC.Llvm.Ppr.html#ppVar"><span class="hs-identifier hs-var">ppVar</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCgConfig
</span><a href="#local-6989586621681859064"><span class="hs-identifier hs-var">cfg</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859056"><span class="hs-identifier hs-var">vaddr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1211"></span><span>
</span><span id="line-1212"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#mkStore"><span class="hs-identifier hs-type">mkStore</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#AlignmentSpec"><span class="hs-identifier hs-type">AlignmentSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Llvm.Syntax.html#LlvmStatement"><span class="hs-identifier hs-type">LlvmStatement</span></a></span><span>
</span><span id="line-1213"></span><span id="mkStore"><span class="annot"><span class="annottext">mkStore :: LlvmVar -&gt; LlvmVar -&gt; AlignmentSpec -&gt; LlvmStatement
</span><a href="GHC.CmmToLlvm.CodeGen.html#mkStore"><span class="hs-identifier hs-var hs-var">mkStore</span></a></span></span><span> </span><span id="local-6989586621681859081"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859081"><span class="hs-identifier hs-var">vval</span></a></span></span><span> </span><span id="local-6989586621681859082"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859082"><span class="hs-identifier hs-var">vptr</span></a></span></span><span> </span><span id="local-6989586621681859083"><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859083"><span class="hs-identifier hs-var">alignment</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1214"></span><span>    </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LMAlign -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Store"><span class="hs-identifier hs-var">Store</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859081"><span class="hs-identifier hs-var">vval</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859082"><span class="hs-identifier hs-var">vptr</span></a></span><span> </span><span class="annot"><span class="annottext">LMAlign
</span><a href="#local-6989586621681859084"><span class="hs-identifier hs-var">align</span></a></span><span>
</span><span id="line-1215"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1216"></span><span>    </span><span id="local-6989586621681859085"><span class="annot"><span class="annottext">ty :: LlvmType
</span><a href="#local-6989586621681859085"><span class="hs-identifier hs-var hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#pLower"><span class="hs-identifier hs-var">pLower</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859082"><span class="hs-identifier hs-var">vptr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1217"></span><span>    </span><span id="local-6989586621681859084"><span class="annot"><span class="annottext">align :: LMAlign
</span><a href="#local-6989586621681859084"><span class="hs-identifier hs-var hs-var">align</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859083"><span class="hs-identifier hs-var">alignment</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1218"></span><span>              </span><span class="hs-comment">-- See Note [Alignment of vector-typed values]</span><span>
</span><span id="line-1219"></span><span>              </span><span class="annot"><span class="annottext">AlignmentSpec
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isVector"><span class="hs-identifier hs-var">isVector</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859085"><span class="hs-identifier hs-var">ty</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; LMAlign
forall a. a -&gt; Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1220"></span><span>              </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="GHC.Cmm.Expr.html#Unaligned"><span class="hs-identifier hs-var">Unaligned</span></a></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; LMAlign
forall a. a -&gt; Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1221"></span><span>              </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="GHC.Cmm.Expr.html#NaturallyAligned"><span class="hs-identifier hs-var">NaturallyAligned</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMAlign
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1222"></span><span>
</span><span id="line-1223"></span><span class="annot"><span class="hs-comment">-- | Unconditional branch</span></span><span>
</span><span id="line-1224"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genBranch"><span class="hs-identifier hs-type">genBranch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.BlockId.html#BlockId"><span class="hs-identifier hs-type">BlockId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#StmtData"><span class="hs-identifier hs-type">StmtData</span></a></span><span>
</span><span id="line-1225"></span><span id="genBranch"><span class="annot"><span class="annottext">genBranch :: BlockId -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genBranch"><span class="hs-identifier hs-var hs-var">genBranch</span></a></span></span><span> </span><span id="local-6989586621681859087"><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621681859087"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1226"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859088"><span class="annot"><span class="annottext">label :: LlvmVar
</span><a href="#local-6989586621681859088"><span class="hs-keyword hs-var hs-var">label</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#blockIdToLlvm"><span class="hs-identifier hs-var">blockIdToLlvm</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621681859087"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-1227"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmStatement -&gt; LlvmStatements
forall a. a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-var">unitOL</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmStatement -&gt; LlvmStatements)
-&gt; LlvmStatement -&gt; LlvmStatements
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Branch"><span class="hs-identifier hs-var">Branch</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859088"><span class="hs-keyword hs-var">label</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1228"></span><span>
</span><span id="line-1229"></span><span>
</span><span id="line-1230"></span><span class="annot"><span class="hs-comment">-- | Conditional branch</span></span><span>
</span><span id="line-1231"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genCondBranch"><span class="hs-identifier hs-type">genCondBranch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.BlockId.html#BlockId"><span class="hs-identifier hs-type">BlockId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.BlockId.html#BlockId"><span class="hs-identifier hs-type">BlockId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#StmtData"><span class="hs-identifier hs-type">StmtData</span></a></span><span>
</span><span id="line-1232"></span><span id="genCondBranch"><span class="annot"><span class="annottext">genCondBranch :: CmmExpr
-&gt; BlockId
-&gt; BlockId
-&gt; Maybe Bool
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genCondBranch"><span class="hs-identifier hs-var hs-var">genCondBranch</span></a></span></span><span> </span><span id="local-6989586621681859091"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859091"><span class="hs-identifier hs-var">cond</span></a></span></span><span> </span><span id="local-6989586621681859092"><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621681859092"><span class="hs-identifier hs-var">idT</span></a></span></span><span> </span><span id="local-6989586621681859093"><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621681859093"><span class="hs-identifier hs-var">idF</span></a></span></span><span> </span><span id="local-6989586621681859094"><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621681859094"><span class="hs-identifier hs-var">likely</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1233"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859095"><span class="annot"><span class="annottext">labelT :: LlvmVar
</span><a href="#local-6989586621681859095"><span class="hs-identifier hs-var hs-var">labelT</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#blockIdToLlvm"><span class="hs-identifier hs-var">blockIdToLlvm</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621681859092"><span class="hs-identifier hs-var">idT</span></a></span><span>
</span><span id="line-1234"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859096"><span class="annot"><span class="annottext">labelF :: LlvmVar
</span><a href="#local-6989586621681859096"><span class="hs-identifier hs-var hs-var">labelF</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#blockIdToLlvm"><span class="hs-identifier hs-var">blockIdToLlvm</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621681859093"><span class="hs-identifier hs-var">idF</span></a></span><span>
</span><span id="line-1235"></span><span>    </span><span class="hs-comment">-- See Note [Literals and branch conditions].</span><span>
</span><span id="line-1236"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681859097"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859097"><span class="hs-identifier hs-var">vc</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859098"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859098"><span class="hs-identifier hs-var">stmts1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859099"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859099"><span class="hs-identifier hs-var">top1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">EOption -&gt; CmmExpr -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarOpt"><span class="hs-identifier hs-var">exprToVarOpt</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><a href="GHC.CmmToLlvm.CodeGen.html#i1Option"><span class="hs-identifier hs-var">i1Option</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859091"><span class="hs-identifier hs-var">cond</span></a></span><span>
</span><span id="line-1237"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859097"><span class="hs-identifier hs-var">vc</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#i1"><span class="hs-identifier hs-var">i1</span></a></span><span>
</span><span id="line-1238"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1239"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621681859102"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859102"><span class="hs-identifier hs-var">vc'</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681859103"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859103"><span class="hs-identifier hs-var">stmts2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859104"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859104"><span class="hs-identifier hs-var">top2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621681859094"><span class="hs-identifier hs-var">likely</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1240"></span><span>              </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681859105"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681859105"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Integer
-&gt; LlvmType
-&gt; LlvmVar
-&gt; LlvmM (LlvmVar, (LlvmStatements, [LlvmCmmDecl]))
</span><a href="GHC.CmmToLlvm.CodeGen.html#genExpectLit"><span class="hs-identifier hs-var">genExpectLit</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681859105"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#i1"><span class="hs-identifier hs-var">i1</span></a></span><span>  </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859097"><span class="hs-identifier hs-var">vc</span></a></span><span>
</span><span id="line-1241"></span><span>              </span><span class="annot"><span class="annottext">Maybe Bool
</span><span class="hs-identifier">_</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(LlvmVar, (LlvmStatements, [LlvmCmmDecl]))
-&gt; LlvmM (LlvmVar, (LlvmStatements, [LlvmCmmDecl]))
forall a. a -&gt; LlvmM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#pure/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859097"><span class="hs-identifier hs-var">vc</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmStatements
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1242"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859107"><span class="annot"><span class="annottext">s1 :: LlvmStatement
</span><a href="#local-6989586621681859107"><span class="hs-identifier hs-var hs-var">s1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LlvmVar -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#BranchIf"><span class="hs-identifier hs-var">BranchIf</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859102"><span class="hs-identifier hs-var">vc'</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859095"><span class="hs-identifier hs-var">labelT</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859096"><span class="hs-identifier hs-var">labelF</span></a></span><span>
</span><span id="line-1243"></span><span>            </span><span class="annot"><span class="annottext">(LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859098"><span class="hs-identifier hs-var">stmts1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatements -&gt; LlvmStatements
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859103"><span class="hs-identifier hs-var">stmts2</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859107"><span class="hs-identifier hs-var">s1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859099"><span class="hs-identifier hs-var">top1</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl] -&gt; [LlvmCmmDecl] -&gt; [LlvmCmmDecl]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859104"><span class="hs-identifier hs-var">top2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1244"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1245"></span><span>            </span><span id="local-6989586621681859109"><span class="annot"><span class="annottext">LlvmCgConfig
</span><a href="#local-6989586621681859109"><span class="hs-identifier hs-var">cfg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM LlvmCgConfig
</span><a href="GHC.CmmToLlvm.Base.html#getConfig"><span class="hs-identifier hs-var">getConfig</span></a></span><span>
</span><span id="line-1246"></span><span>            </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genCondBranch: Cond expr not bool! &quot;</span></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl]))
-&gt; SDoc -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1247"></span><span>              </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#lparen"><span class="hs-identifier hs-var">lparen</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCgConfig -&gt; LlvmVar -&gt; SDoc
</span><a href="GHC.Llvm.Ppr.html#ppVar"><span class="hs-identifier hs-var">ppVar</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCgConfig
</span><a href="#local-6989586621681859109"><span class="hs-identifier hs-var">cfg</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859097"><span class="hs-identifier hs-var">vc</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#rparen"><span class="hs-identifier hs-var">rparen</span></a></span><span>
</span><span id="line-1248"></span><span>
</span><span id="line-1249"></span><span>
</span><span id="line-1250"></span><span class="annot"><span class="hs-comment">-- | Generate call to llvm.expect.x intrinsic. Assigning result to a new var.</span></span><span>
</span><span id="line-1251"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genExpectLit"><span class="hs-identifier hs-type">genExpectLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmType"><span class="hs-identifier hs-type">LlvmType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#StmtData"><span class="hs-identifier hs-type">StmtData</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1252"></span><span id="genExpectLit"><span class="annot"><span class="annottext">genExpectLit :: Integer
-&gt; LlvmType
-&gt; LlvmVar
-&gt; LlvmM (LlvmVar, (LlvmStatements, [LlvmCmmDecl]))
</span><a href="GHC.CmmToLlvm.CodeGen.html#genExpectLit"><span class="hs-identifier hs-var hs-var">genExpectLit</span></a></span></span><span> </span><span id="local-6989586621681859110"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681859110"><span class="hs-identifier hs-var">expLit</span></a></span></span><span> </span><span id="local-6989586621681859111"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859111"><span class="hs-identifier hs-var">expTy</span></a></span></span><span> </span><span id="local-6989586621681859112"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859112"><span class="hs-identifier hs-var">var</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1253"></span><span>  </span><span id="local-6989586621681859113"><span class="annot"><span class="annottext">LlvmCgConfig
</span><a href="#local-6989586621681859113"><span class="hs-identifier hs-var">cfg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM LlvmCgConfig
</span><a href="GHC.CmmToLlvm.Base.html#getConfig"><span class="hs-identifier hs-var">getConfig</span></a></span><span>
</span><span id="line-1254"></span><span>
</span><span id="line-1255"></span><span>  </span><span class="hs-keyword">let</span><span>
</span><span id="line-1256"></span><span>    </span><span id="local-6989586621681859114"><span class="annot"><span class="annottext">lit :: LlvmVar
</span><a href="#local-6989586621681859114"><span class="hs-identifier hs-var hs-var">lit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmLit -&gt; LlvmVar
</span><a href="GHC.Llvm.Types.html#LMLitVar"><span class="hs-identifier hs-var">LMLitVar</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmLit -&gt; LlvmVar) -&gt; LlvmLit -&gt; LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; LlvmType -&gt; LlvmLit
</span><a href="GHC.Llvm.Types.html#LMIntLit"><span class="hs-identifier hs-var">LMIntLit</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681859110"><span class="hs-identifier hs-var">expLit</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859111"><span class="hs-identifier hs-var">expTy</span></a></span><span>
</span><span id="line-1257"></span><span>
</span><span id="line-1258"></span><span>    </span><span id="local-6989586621681859115"><span class="annot"><span class="annottext">llvmExpectName :: LMString
</span><a href="#local-6989586621681859115"><span class="hs-identifier hs-var hs-var">llvmExpectName</span></a></span></span><span>
</span><span id="line-1259"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isInt"><span class="hs-identifier hs-var">isInt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859111"><span class="hs-identifier hs-var">expTy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; LMString) -&gt; String -&gt; LMString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;llvm.expect.&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">SDocContext -&gt; SDoc -&gt; String
</span><a href="GHC.Utils.Outputable.html#showSDocOneLine"><span class="hs-identifier hs-var">showSDocOneLine</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmCgConfig -&gt; SDocContext
</span><a href="GHC.CmmToLlvm.Config.html#llvmCgContext"><span class="hs-identifier hs-var">llvmCgContext</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCgConfig
</span><a href="#local-6989586621681859113"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmType -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859111"><span class="hs-identifier hs-var">expTy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1260"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; LMString
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genExpectedLit: Type not an int!&quot;</span></span><span>
</span><span id="line-1261"></span><span>
</span><span id="line-1262"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621681859118"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859118"><span class="hs-identifier hs-var">llvmExpect</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859119"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859119"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859120"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859120"><span class="hs-identifier hs-var">top</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1263"></span><span>    </span><span class="annot"><span class="annottext">LMString -&gt; LlvmType -&gt; [LlvmType] -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#getInstrinct"><span class="hs-identifier hs-var">getInstrinct</span></a></span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681859115"><span class="hs-identifier hs-var">llvmExpectName</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859111"><span class="hs-identifier hs-var">expTy</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859111"><span class="hs-identifier hs-var">expTy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859111"><span class="hs-identifier hs-var">expTy</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1264"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621681859121"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859121"><span class="hs-identifier hs-var">var'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859122"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859122"><span class="hs-identifier hs-var">call</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859111"><span class="hs-identifier hs-var">expTy</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCallType
-&gt; LlvmVar -&gt; [LlvmVar] -&gt; [LlvmFuncAttr] -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Call"><span class="hs-identifier hs-var">Call</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCallType
</span><a href="GHC.Llvm.Types.html#StdCall"><span class="hs-identifier hs-var">StdCall</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859118"><span class="hs-identifier hs-var">llvmExpect</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859112"><span class="hs-identifier hs-var">var</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859114"><span class="hs-identifier hs-var">lit</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1265"></span><span>  </span><span class="annot"><span class="annottext">(LlvmVar, (LlvmStatements, [LlvmCmmDecl]))
-&gt; LlvmM (LlvmVar, (LlvmStatements, [LlvmCmmDecl]))
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859121"><span class="hs-identifier hs-var">var'</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859119"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859122"><span class="hs-identifier hs-var">call</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859120"><span class="hs-identifier hs-var">top</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1266"></span><span>
</span><span id="line-1267"></span><span class="hs-comment">{- Note [Literals and branch conditions]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
It is important that whenever we generate branch conditions for
literals like '1', they are properly narrowed to an LLVM expression of
type 'i1' (for bools.) Otherwise, nobody is happy. So when we convert
a CmmExpr to an LLVM expression for a branch conditional, exprToVarOpt
must be certain to return a properly narrowed type. genLit is
responsible for this, in the case of literal integers.

Often, we won't see direct statements like:

    if(1) {
      ...
    } else {
      ...
    }

at this point in the pipeline, because the Glorious Code Generator
will do trivial branch elimination in the sinking pass (among others,)
which will eliminate the expression entirely.

However, it's certainly possible and reasonable for this to occur in
hand-written C-- code. Consider something like:

    #if !defined(SOME_CONDITIONAL)
    #define CHECK_THING(x) 1
    #else
    #define CHECK_THING(x) some_operation((x))
    #endif

    f() {

      if (CHECK_THING(xyz)) {
        ...
      } else {
        ...
      }

    }

In such an instance, CHECK_THING might result in an *expression* in
one case, and a *literal* in the other, depending on what in
particular was #define'd. So we must be sure to properly narrow the
literal in this case to i1 as it won't be eliminated beforehand.

For a real example of this, see ./rts/StgStdThunks.cmm

-}</span><span>
</span><span id="line-1315"></span><span>
</span><span id="line-1316"></span><span>
</span><span id="line-1317"></span><span>
</span><span id="line-1318"></span><span class="annot"><span class="hs-comment">-- | Switch branch</span></span><span>
</span><span id="line-1319"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genSwitch"><span class="hs-identifier hs-type">genSwitch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Switch.html#SwitchTargets"><span class="hs-identifier hs-type">SwitchTargets</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#StmtData"><span class="hs-identifier hs-type">StmtData</span></a></span><span>
</span><span id="line-1320"></span><span id="genSwitch"><span class="annot"><span class="annottext">genSwitch :: CmmExpr -&gt; SwitchTargets -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#genSwitch"><span class="hs-identifier hs-var hs-var">genSwitch</span></a></span></span><span> </span><span id="local-6989586621681859123"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859123"><span class="hs-identifier hs-var">cond</span></a></span></span><span> </span><span id="local-6989586621681859124"><span class="annot"><span class="annottext">SwitchTargets
</span><a href="#local-6989586621681859124"><span class="hs-identifier hs-var">ids</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1321"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681859125"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859125"><span class="hs-identifier hs-var">vc</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859126"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859126"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859127"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859127"><span class="hs-identifier hs-var">top</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVar"><span class="hs-identifier hs-var">exprToVar</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859123"><span class="hs-identifier hs-var">cond</span></a></span><span>
</span><span id="line-1322"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859128"><span class="annot"><span class="annottext">ty :: LlvmType
</span><a href="#local-6989586621681859128"><span class="hs-identifier hs-var hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859125"><span class="hs-identifier hs-var">vc</span></a></span><span>
</span><span id="line-1323"></span><span>
</span><span id="line-1324"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859129"><span class="annot"><span class="annottext">labels :: [(LlvmVar, LlvmVar)]
</span><a href="#local-6989586621681859129"><span class="hs-identifier hs-var hs-var">labels</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmType -&gt; Integer -&gt; LlvmVar
forall a. Integral a =&gt; LlvmType -&gt; a -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#mkIntLit"><span class="hs-identifier hs-var">mkIntLit</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859128"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681859130"><span class="hs-identifier hs-var">ix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#blockIdToLlvm"><span class="hs-identifier hs-var">blockIdToLlvm</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621681859131"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1325"></span><span>                 </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681859130"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681859130"><span class="hs-identifier hs-var">ix</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859131"><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621681859131"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SwitchTargets -&gt; [(Integer, BlockId)]
</span><a href="GHC.Cmm.Switch.html#switchTargetsCases"><span class="hs-identifier hs-var">switchTargetsCases</span></a></span><span> </span><span class="annot"><span class="annottext">SwitchTargets
</span><a href="#local-6989586621681859124"><span class="hs-identifier hs-var">ids</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1326"></span><span>    </span><span class="hs-comment">-- out of range is undefined, so let's just branch to first label</span><span>
</span><span id="line-1327"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859133"><span class="annot"><span class="annottext">defLbl :: LlvmVar
</span><a href="#local-6989586621681859133"><span class="hs-identifier hs-var hs-var">defLbl</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681859134"><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621681859134"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SwitchTargets -&gt; Maybe BlockId
</span><a href="GHC.Cmm.Switch.html#switchTargetsDefault"><span class="hs-identifier hs-var">switchTargetsDefault</span></a></span><span> </span><span class="annot"><span class="annottext">SwitchTargets
</span><a href="#local-6989586621681859124"><span class="hs-identifier hs-var">ids</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#blockIdToLlvm"><span class="hs-identifier hs-var">blockIdToLlvm</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621681859134"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1328"></span><span>               </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>                          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LlvmVar, LlvmVar) -&gt; LlvmVar
forall a b. (a, b) -&gt; b
</span><a href="../../base-4.18.3.0/src/Data.Tuple.html#snd/Data.Tuple.html#snd"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(LlvmVar, LlvmVar)] -&gt; (LlvmVar, LlvmVar)
forall a. HasCallStack =&gt; [a] -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.List.html#head/GHC.List.html#head"><span class="hs-identifier hs-var">head</span></a></span><span> </span><span class="annot"><span class="annottext">[(LlvmVar, LlvmVar)]
</span><a href="#local-6989586621681859129"><span class="hs-identifier hs-var">labels</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1329"></span><span>
</span><span id="line-1330"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859137"><span class="annot"><span class="annottext">s1 :: LlvmStatement
</span><a href="#local-6989586621681859137"><span class="hs-identifier hs-var hs-var">s1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; [(LlvmVar, LlvmVar)] -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Switch"><span class="hs-identifier hs-var">Switch</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859125"><span class="hs-identifier hs-var">vc</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859133"><span class="hs-identifier hs-var">defLbl</span></a></span><span> </span><span class="annot"><span class="annottext">[(LlvmVar, LlvmVar)]
</span><a href="#local-6989586621681859129"><span class="hs-identifier hs-var">labels</span></a></span><span>
</span><span id="line-1331"></span><span>    </span><span class="annot"><span class="annottext">(LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">((LlvmStatements, [LlvmCmmDecl])
 -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl]))
-&gt; (LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859126"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859137"><span class="hs-identifier hs-var">s1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859127"><span class="hs-identifier hs-var">top</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1332"></span><span>
</span><span id="line-1333"></span><span>
</span><span id="line-1334"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-1335"></span><span class="annot"><span class="hs-comment">-- * CmmExpr code generation</span></span><span>
</span><span id="line-1336"></span><span class="hs-comment">--</span><span>
</span><span id="line-1337"></span><span>
</span><span id="line-1338"></span><span class="hs-comment">-- | An expression conversion return data:</span><span>
</span><span id="line-1339"></span><span class="hs-comment">--   * LlvmVar: The var holding the result of the expression</span><span>
</span><span id="line-1340"></span><span class="hs-comment">--   * LlvmStatements: Any statements needed to evaluate the expression</span><span>
</span><span id="line-1341"></span><span class="hs-comment">--   * LlvmCmmDecl: Any global data needed for this expression</span><span>
</span><span id="line-1342"></span><span class="hs-keyword">type</span><span> </span><span id="ExprData"><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#ExprData"><span class="hs-identifier hs-var">ExprData</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmStatements"><span class="hs-identifier hs-type">LlvmStatements</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmCmmDecl"><span class="hs-identifier hs-type">LlvmCmmDecl</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1343"></span><span>
</span><span id="line-1344"></span><span class="hs-comment">-- | Values which can be passed to 'exprToVar' to configure its</span><span>
</span><span id="line-1345"></span><span class="hs-comment">-- behaviour in certain circumstances.</span><span>
</span><span id="line-1346"></span><span class="hs-comment">--</span><span>
</span><span id="line-1347"></span><span class="hs-comment">-- Currently just used for determining if a comparison should return</span><span>
</span><span id="line-1348"></span><span class="hs-comment">-- a boolean (i1) or a word. See Note [Literals and branch conditions].</span><span>
</span><span id="line-1349"></span><span class="hs-keyword">newtype</span><span> </span><span id="EOption"><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#EOption"><span class="hs-identifier hs-var">EOption</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="EOption"><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#EOption"><span class="hs-identifier hs-var">EOption</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="i1Expected"><span class="annot"><span class="annottext">EOption -&gt; Bool
</span><a href="GHC.CmmToLlvm.CodeGen.html#i1Expected"><span class="hs-identifier hs-var hs-var">i1Expected</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1350"></span><span class="hs-comment">-- XXX: EOption is an ugly and inefficient solution to this problem.</span><span>
</span><span id="line-1351"></span><span>
</span><span id="line-1352"></span><span class="annot"><span class="hs-comment">-- | i1 type expected (condition scrutinee).</span></span><span>
</span><span id="line-1353"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#i1Option"><span class="hs-identifier hs-type">i1Option</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#EOption"><span class="hs-identifier hs-type">EOption</span></a></span><span>
</span><span id="line-1354"></span><span id="i1Option"><span class="annot"><span class="annottext">i1Option :: EOption
</span><a href="GHC.CmmToLlvm.CodeGen.html#i1Option"><span class="hs-identifier hs-var hs-var">i1Option</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; EOption
</span><a href="GHC.CmmToLlvm.CodeGen.html#EOption"><span class="hs-identifier hs-var">EOption</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1355"></span><span>
</span><span id="line-1356"></span><span class="annot"><span class="hs-comment">-- | Word type expected (usual).</span></span><span>
</span><span id="line-1357"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#wordOption"><span class="hs-identifier hs-type">wordOption</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#EOption"><span class="hs-identifier hs-type">EOption</span></a></span><span>
</span><span id="line-1358"></span><span id="wordOption"><span class="annot"><span class="annottext">wordOption :: EOption
</span><a href="GHC.CmmToLlvm.CodeGen.html#wordOption"><span class="hs-identifier hs-var hs-var">wordOption</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; EOption
</span><a href="GHC.CmmToLlvm.CodeGen.html#EOption"><span class="hs-identifier hs-var">EOption</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1359"></span><span>
</span><span id="line-1360"></span><span class="hs-comment">-- | Convert a CmmExpr to a list of LlvmStatements with the result of the</span><span>
</span><span id="line-1361"></span><span class="hs-comment">-- expression being stored in the returned LlvmVar.</span><span>
</span><span id="line-1362"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#exprToVar"><span class="hs-identifier hs-type">exprToVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#ExprData"><span class="hs-identifier hs-type">ExprData</span></a></span><span>
</span><span id="line-1363"></span><span id="exprToVar"><span class="annot"><span class="annottext">exprToVar :: CmmExpr -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVar"><span class="hs-identifier hs-var hs-var">exprToVar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EOption -&gt; CmmExpr -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarOpt"><span class="hs-identifier hs-var">exprToVarOpt</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><a href="GHC.CmmToLlvm.CodeGen.html#wordOption"><span class="hs-identifier hs-var">wordOption</span></a></span><span>
</span><span id="line-1364"></span><span>
</span><span id="line-1365"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarOpt"><span class="hs-identifier hs-type">exprToVarOpt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#EOption"><span class="hs-identifier hs-type">EOption</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#ExprData"><span class="hs-identifier hs-type">ExprData</span></a></span><span>
</span><span id="line-1366"></span><span id="exprToVarOpt"><span class="annot"><span class="annottext">exprToVarOpt :: EOption -&gt; CmmExpr -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarOpt"><span class="hs-identifier hs-var hs-var">exprToVarOpt</span></a></span></span><span> </span><span id="local-6989586621681859142"><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859142"><span class="hs-identifier hs-var">opt</span></a></span></span><span> </span><span id="local-6989586621681859143"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859143"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859143"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1367"></span><span>
</span><span id="line-1368"></span><span>    </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span id="local-6989586621681859144"><span class="annot"><span class="annottext">CmmLit
</span><a href="#local-6989586621681859144"><span class="hs-identifier hs-var">lit</span></a></span></span><span>
</span><span id="line-1369"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EOption -&gt; CmmLit -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#genLit"><span class="hs-identifier hs-var">genLit</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859142"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="annot"><span class="annottext">CmmLit
</span><a href="#local-6989586621681859144"><span class="hs-identifier hs-var">lit</span></a></span><span>
</span><span id="line-1370"></span><span>
</span><span id="line-1371"></span><span>    </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLoad"><span class="hs-identifier hs-type">CmmLoad</span></a></span><span> </span><span id="local-6989586621681859147"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859147"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span id="local-6989586621681859148"><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621681859148"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681859149"><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859149"><span class="hs-identifier hs-var">align</span></a></span></span><span>
</span><span id="line-1372"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Atomic -&gt; CmmExpr -&gt; CmmType -&gt; AlignmentSpec -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#genLoad"><span class="hs-identifier hs-var">genLoad</span></a></span><span> </span><span class="annot"><span class="annottext">Atomic
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859147"><span class="hs-identifier hs-var">e'</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621681859148"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859149"><span class="hs-identifier hs-var">align</span></a></span><span>
</span><span id="line-1373"></span><span>
</span><span id="line-1374"></span><span>    </span><span class="hs-comment">-- Cmmreg in expression is the value, so must load. If you want actual</span><span>
</span><span id="line-1375"></span><span>    </span><span class="hs-comment">-- reg pointer, call getCmmReg directly.</span><span>
</span><span id="line-1376"></span><span>    </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmReg"><span class="hs-identifier hs-type">CmmReg</span></a></span><span> </span><span id="local-6989586621681859151"><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621681859151"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1377"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681859152"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859152"><span class="hs-identifier hs-var">v1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859153"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859153"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859154"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859154"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmReg -&gt; LlvmM (LlvmVar, LlvmType, LlvmStatements)
</span><a href="GHC.CmmToLlvm.CodeGen.html#getCmmRegVal"><span class="hs-identifier hs-var">getCmmRegVal</span></a></span><span> </span><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621681859151"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-1378"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isPointer"><span class="hs-identifier hs-var">isPointer</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859153"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1379"></span><span>             </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1380"></span><span>                 </span><span class="hs-comment">-- Cmm wants the value, so pointer types must be cast to ints</span><span>
</span><span id="line-1381"></span><span>                 </span><span id="local-6989586621681859155"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859155"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM Platform
</span><a href="GHC.CmmToLlvm.Base.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-1382"></span><span>                 </span><span class="hs-special">(</span><span id="local-6989586621681859156"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859156"><span class="hs-identifier hs-var">v2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859157"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859157"><span class="hs-identifier hs-var">s2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#llvmWord"><span class="hs-identifier hs-var">llvmWord</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859155"><span class="hs-identifier hs-var">platform</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Ptrtoint"><span class="hs-identifier hs-var">LM_Ptrtoint</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859152"><span class="hs-identifier hs-var">v1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#llvmWord"><span class="hs-identifier hs-var">llvmWord</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859155"><span class="hs-identifier hs-var">platform</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1383"></span><span>                 </span><span class="annot"><span class="annottext">ExprData -&gt; LlvmM ExprData
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859156"><span class="hs-identifier hs-var">v2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859154"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859157"><span class="hs-identifier hs-var">s2</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1384"></span><span>
</span><span id="line-1385"></span><span>             </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ExprData -&gt; LlvmM ExprData
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859152"><span class="hs-identifier hs-var">v1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859154"><span class="hs-identifier hs-var">s1</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1386"></span><span>
</span><span id="line-1387"></span><span>    </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span id="local-6989586621681859158"><span class="annot"><span class="annottext">MachOp
</span><a href="#local-6989586621681859158"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span id="local-6989586621681859159"><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681859159"><span class="hs-identifier hs-var">exprs</span></a></span></span><span>
</span><span id="line-1388"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EOption -&gt; MachOp -&gt; [CmmExpr] -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#genMachOp"><span class="hs-identifier hs-var">genMachOp</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859142"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="annot"><span class="annottext">MachOp
</span><a href="#local-6989586621681859158"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681859159"><span class="hs-identifier hs-var">exprs</span></a></span><span>
</span><span id="line-1389"></span><span>
</span><span id="line-1390"></span><span>    </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmRegOff"><span class="hs-identifier hs-type">CmmRegOff</span></a></span><span> </span><span id="local-6989586621681859161"><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621681859161"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681859162"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859162"><span class="hs-identifier hs-var">i</span></a></span></span><span>
</span><span id="line-1391"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681859163"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859163"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM Platform
</span><a href="GHC.CmmToLlvm.Base.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-1392"></span><span>              </span><span class="annot"><span class="annottext">CmmExpr -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVar"><span class="hs-identifier hs-var">exprToVar</span></a></span><span> </span><span class="annot"><span class="annottext">(CmmExpr -&gt; LlvmM ExprData) -&gt; CmmExpr -&gt; LlvmM ExprData
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; (CmmReg, Int) -&gt; CmmExpr
</span><a href="GHC.CmmToLlvm.CodeGen.html#expandCmmReg"><span class="hs-identifier hs-var">expandCmmReg</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859163"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621681859161"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859162"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1393"></span><span>
</span><span id="line-1394"></span><span>    </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmStackSlot"><span class="hs-identifier hs-type">CmmStackSlot</span></a></span><span> </span><span class="annot"><span class="annottext">Area
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-1395"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LlvmM ExprData
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;exprToVar: CmmStackSlot not supported!&quot;</span></span><span>
</span><span id="line-1396"></span><span>
</span><span id="line-1397"></span><span>
</span><span id="line-1398"></span><span class="annot"><span class="hs-comment">-- | Handle CmmMachOp expressions</span></span><span>
</span><span id="line-1399"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genMachOp"><span class="hs-identifier hs-type">genMachOp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#EOption"><span class="hs-identifier hs-type">EOption</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MachOp"><span class="hs-identifier hs-type">MachOp</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#ExprData"><span class="hs-identifier hs-type">ExprData</span></a></span><span>
</span><span id="line-1400"></span><span>
</span><span id="line-1401"></span><span class="hs-comment">-- Unary Machop</span><span>
</span><span id="line-1402"></span><span id="genMachOp"><span class="annot"><span class="annottext">genMachOp :: EOption -&gt; MachOp -&gt; [CmmExpr] -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#genMachOp"><span class="hs-identifier hs-var hs-var">genMachOp</span></a></span></span><span> </span><span class="annot"><span class="annottext">EOption
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681859166"><span class="annot"><span class="annottext">MachOp
</span><a href="#local-6989586621681859166"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621681859167"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859167"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MachOp
</span><a href="#local-6989586621681859166"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1403"></span><span>
</span><span id="line-1404"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Not"><span class="hs-identifier hs-type">MO_Not</span></a></span><span> </span><span id="local-6989586621681859169"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859169"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1405"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859170"><span class="annot"><span class="annottext">all1 :: LlvmVar
</span><a href="#local-6989586621681859170"><span class="hs-identifier hs-var hs-var">all1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Integer -&gt; LlvmVar
forall a. Integral a =&gt; LlvmType -&gt; a -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#mkIntLit"><span class="hs-identifier hs-var">mkIntLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmInt"><span class="hs-identifier hs-var">widthToLlvmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859169"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-1406"></span><span>        </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmVar -&gt; LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859171"><span class="hs-identifier hs-var">negate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmInt"><span class="hs-identifier hs-var">widthToLlvmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859169"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859170"><span class="hs-identifier hs-var">all1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_Xor"><span class="hs-identifier hs-var">LM_MO_Xor</span></a></span><span>
</span><span id="line-1407"></span><span>
</span><span id="line-1408"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_Neg"><span class="hs-identifier hs-type">MO_S_Neg</span></a></span><span> </span><span id="local-6989586621681859174"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859174"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1409"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859175"><span class="annot"><span class="annottext">all0 :: LlvmVar
</span><a href="#local-6989586621681859175"><span class="hs-identifier hs-var hs-var">all0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Integer -&gt; LlvmVar
forall a. Integral a =&gt; LlvmType -&gt; a -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#mkIntLit"><span class="hs-identifier hs-var">mkIntLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmInt"><span class="hs-identifier hs-var">widthToLlvmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859174"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span>
</span><span id="line-1410"></span><span>        </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmVar -&gt; LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859171"><span class="hs-identifier hs-var">negate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmInt"><span class="hs-identifier hs-var">widthToLlvmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859174"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859175"><span class="hs-identifier hs-var">all0</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_Sub"><span class="hs-identifier hs-var">LM_MO_Sub</span></a></span><span>
</span><span id="line-1411"></span><span>
</span><span id="line-1412"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Neg"><span class="hs-identifier hs-type">MO_F_Neg</span></a></span><span> </span><span id="local-6989586621681859178"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859178"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1413"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859179"><span class="annot"><span class="annottext">all0 :: LlvmVar
</span><a href="#local-6989586621681859179"><span class="hs-identifier hs-var hs-var">all0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmLit -&gt; LlvmVar
</span><a href="GHC.Llvm.Types.html#LMLitVar"><span class="hs-identifier hs-var">LMLitVar</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmLit -&gt; LlvmVar) -&gt; LlvmLit -&gt; LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Double -&gt; LlvmType -&gt; LlvmLit
</span><a href="GHC.Llvm.Types.html#LMFloatLit"><span class="hs-identifier hs-var">LMFloatLit</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmFloat"><span class="hs-identifier hs-var">widthToLlvmFloat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859178"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1414"></span><span>        </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmVar -&gt; LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859171"><span class="hs-identifier hs-var">negate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmFloat"><span class="hs-identifier hs-var">widthToLlvmFloat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859178"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859179"><span class="hs-identifier hs-var">all0</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_FSub"><span class="hs-identifier hs-var">LM_MO_FSub</span></a></span><span>
</span><span id="line-1415"></span><span>
</span><span id="line-1416"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_SF_Conv"><span class="hs-identifier hs-type">MO_SF_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681859183"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859183"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmCastOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859184"><span class="hs-identifier hs-var">fiConv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmFloat"><span class="hs-identifier hs-var">widthToLlvmFloat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859183"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Sitofp"><span class="hs-identifier hs-var">LM_Sitofp</span></a></span><span>
</span><span id="line-1417"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_FS_Conv"><span class="hs-identifier hs-type">MO_FS_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681859186"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859186"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmCastOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859184"><span class="hs-identifier hs-var">fiConv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmInt"><span class="hs-identifier hs-var">widthToLlvmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859186"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Fptosi"><span class="hs-identifier hs-var">LM_Fptosi</span></a></span><span>
</span><span id="line-1418"></span><span>
</span><span id="line-1419"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_SS_Conv"><span class="hs-identifier hs-type">MO_SS_Conv</span></a></span><span> </span><span id="local-6989586621681859188"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859188"><span class="hs-identifier hs-var">from</span></a></span></span><span> </span><span id="local-6989586621681859189"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859189"><span class="hs-identifier hs-var">to</span></a></span></span><span>
</span><span id="line-1420"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width -&gt; LlvmType -&gt; LlvmCastOp -&gt; LlvmCastOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859190"><span class="hs-identifier hs-var">sameConv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859188"><span class="hs-identifier hs-var">from</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmInt"><span class="hs-identifier hs-var">widthToLlvmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859189"><span class="hs-identifier hs-var">to</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Trunc"><span class="hs-identifier hs-var">LM_Trunc</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Sext"><span class="hs-identifier hs-var">LM_Sext</span></a></span><span>
</span><span id="line-1421"></span><span>
</span><span id="line-1422"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_UU_Conv"><span class="hs-identifier hs-type">MO_UU_Conv</span></a></span><span> </span><span id="local-6989586621681859192"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859192"><span class="hs-identifier hs-var">from</span></a></span></span><span> </span><span id="local-6989586621681859193"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859193"><span class="hs-identifier hs-var">to</span></a></span></span><span>
</span><span id="line-1423"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width -&gt; LlvmType -&gt; LlvmCastOp -&gt; LlvmCastOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859190"><span class="hs-identifier hs-var">sameConv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859192"><span class="hs-identifier hs-var">from</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmInt"><span class="hs-identifier hs-var">widthToLlvmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859193"><span class="hs-identifier hs-var">to</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Trunc"><span class="hs-identifier hs-var">LM_Trunc</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Zext"><span class="hs-identifier hs-var">LM_Zext</span></a></span><span>
</span><span id="line-1424"></span><span>
</span><span id="line-1425"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_XX_Conv"><span class="hs-identifier hs-type">MO_XX_Conv</span></a></span><span> </span><span id="local-6989586621681859195"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859195"><span class="hs-identifier hs-var">from</span></a></span></span><span> </span><span id="local-6989586621681859196"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859196"><span class="hs-identifier hs-var">to</span></a></span></span><span>
</span><span id="line-1426"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width -&gt; LlvmType -&gt; LlvmCastOp -&gt; LlvmCastOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859190"><span class="hs-identifier hs-var">sameConv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859195"><span class="hs-identifier hs-var">from</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmInt"><span class="hs-identifier hs-var">widthToLlvmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859196"><span class="hs-identifier hs-var">to</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Trunc"><span class="hs-identifier hs-var">LM_Trunc</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Zext"><span class="hs-identifier hs-var">LM_Zext</span></a></span><span>
</span><span id="line-1427"></span><span>
</span><span id="line-1428"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_FF_Conv"><span class="hs-identifier hs-type">MO_FF_Conv</span></a></span><span> </span><span id="local-6989586621681859198"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859198"><span class="hs-identifier hs-var">from</span></a></span></span><span> </span><span id="local-6989586621681859199"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859199"><span class="hs-identifier hs-var">to</span></a></span></span><span>
</span><span id="line-1429"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width -&gt; LlvmType -&gt; LlvmCastOp -&gt; LlvmCastOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859190"><span class="hs-identifier hs-var">sameConv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859198"><span class="hs-identifier hs-var">from</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmFloat"><span class="hs-identifier hs-var">widthToLlvmFloat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859199"><span class="hs-identifier hs-var">to</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Fptrunc"><span class="hs-identifier hs-var">LM_Fptrunc</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Fpext"><span class="hs-identifier hs-var">LM_Fpext</span></a></span><span>
</span><span id="line-1430"></span><span>
</span><span id="line-1431"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VS_Neg"><span class="hs-identifier hs-type">MO_VS_Neg</span></a></span><span> </span><span id="local-6989586621681859201"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859201"><span class="hs-identifier hs-var">len</span></a></span></span><span> </span><span id="local-6989586621681859202"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859202"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1432"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859203"><span class="annot"><span class="annottext">ty :: LlvmType
</span><a href="#local-6989586621681859203"><span class="hs-identifier hs-var hs-var">ty</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmInt"><span class="hs-identifier hs-var">widthToLlvmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859202"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-1433"></span><span>            </span><span id="local-6989586621681859204"><span class="annot"><span class="annottext">vecty :: LlvmType
</span><a href="#local-6989586621681859204"><span class="hs-identifier hs-var hs-var">vecty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#LMVector"><span class="hs-identifier hs-var">LMVector</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859201"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859203"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1434"></span><span>            </span><span id="local-6989586621681859205"><span class="annot"><span class="annottext">all0 :: LlvmLit
</span><a href="#local-6989586621681859205"><span class="hs-identifier hs-var hs-var">all0</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; LlvmType -&gt; LlvmLit
</span><a href="GHC.Llvm.Types.html#LMIntLit"><span class="hs-identifier hs-var">LMIntLit</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859203"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1435"></span><span>            </span><span id="local-6989586621681859206"><span class="annot"><span class="annottext">all0s :: LlvmVar
</span><a href="#local-6989586621681859206"><span class="hs-identifier hs-var hs-var">all0s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmLit -&gt; LlvmVar
</span><a href="GHC.Llvm.Types.html#LMLitVar"><span class="hs-identifier hs-var">LMLitVar</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmLit -&gt; LlvmVar) -&gt; LlvmLit -&gt; LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmLit] -&gt; LlvmLit
</span><a href="GHC.Llvm.Types.html#LMVectorLit"><span class="hs-identifier hs-var">LMVectorLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; LlvmLit -&gt; [LlvmLit]
forall a. Int -&gt; a -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.List.html#replicate/GHC.List.html#replicate"><span class="hs-identifier hs-var">replicate</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859201"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmLit
</span><a href="#local-6989586621681859205"><span class="hs-identifier hs-var">all0</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1436"></span><span>        </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmVar -&gt; LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859209"><span class="hs-identifier hs-var">negateVec</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859204"><span class="hs-identifier hs-var">vecty</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859206"><span class="hs-identifier hs-var">all0s</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_Sub"><span class="hs-identifier hs-var">LM_MO_Sub</span></a></span><span>
</span><span id="line-1437"></span><span>
</span><span id="line-1438"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VF_Neg"><span class="hs-identifier hs-type">MO_VF_Neg</span></a></span><span> </span><span id="local-6989586621681859211"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859211"><span class="hs-identifier hs-var">len</span></a></span></span><span> </span><span id="local-6989586621681859212"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859212"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1439"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859213"><span class="annot"><span class="annottext">ty :: LlvmType
</span><a href="#local-6989586621681859213"><span class="hs-identifier hs-var hs-var">ty</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmFloat"><span class="hs-identifier hs-var">widthToLlvmFloat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859212"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-1440"></span><span>            </span><span id="local-6989586621681859214"><span class="annot"><span class="annottext">vecty :: LlvmType
</span><a href="#local-6989586621681859214"><span class="hs-identifier hs-var hs-var">vecty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#LMVector"><span class="hs-identifier hs-var">LMVector</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859211"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859213"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1441"></span><span>            </span><span id="local-6989586621681859215"><span class="annot"><span class="annottext">all0 :: LlvmLit
</span><a href="#local-6989586621681859215"><span class="hs-identifier hs-var hs-var">all0</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Double -&gt; LlvmType -&gt; LlvmLit
</span><a href="GHC.Llvm.Types.html#LMFloatLit"><span class="hs-identifier hs-var">LMFloatLit</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859213"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1442"></span><span>            </span><span id="local-6989586621681859216"><span class="annot"><span class="annottext">all0s :: LlvmVar
</span><a href="#local-6989586621681859216"><span class="hs-identifier hs-var hs-var">all0s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmLit -&gt; LlvmVar
</span><a href="GHC.Llvm.Types.html#LMLitVar"><span class="hs-identifier hs-var">LMLitVar</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmLit -&gt; LlvmVar) -&gt; LlvmLit -&gt; LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmLit] -&gt; LlvmLit
</span><a href="GHC.Llvm.Types.html#LMVectorLit"><span class="hs-identifier hs-var">LMVectorLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; LlvmLit -&gt; [LlvmLit]
forall a. Int -&gt; a -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.List.html#replicate/GHC.List.html#replicate"><span class="hs-identifier hs-var">replicate</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859211"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmLit
</span><a href="#local-6989586621681859215"><span class="hs-identifier hs-var">all0</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1443"></span><span>        </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmVar -&gt; LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859209"><span class="hs-identifier hs-var">negateVec</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859214"><span class="hs-identifier hs-var">vecty</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859216"><span class="hs-identifier hs-var">all0s</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_FSub"><span class="hs-identifier hs-var">LM_MO_FSub</span></a></span><span>
</span><span id="line-1444"></span><span>
</span><span id="line-1445"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_AlignmentCheck"><span class="hs-identifier hs-type">MO_AlignmentCheck</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LlvmM ExprData
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-falignment-sanitisation is not supported by -fllvm&quot;</span></span><span>
</span><span id="line-1446"></span><span>
</span><span id="line-1447"></span><span>    </span><span class="hs-comment">-- Handle unsupported cases explicitly so we get a warning</span><span>
</span><span id="line-1448"></span><span>    </span><span class="hs-comment">-- of missing case when new MachOps added</span><span>
</span><span id="line-1449"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Add"><span class="hs-identifier hs-type">MO_Add</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1450"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Mul"><span class="hs-identifier hs-type">MO_Mul</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1451"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Sub"><span class="hs-identifier hs-type">MO_Sub</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1452"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_MulMayOflo"><span class="hs-identifier hs-type">MO_S_MulMayOflo</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1453"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_Quot"><span class="hs-identifier hs-type">MO_S_Quot</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1454"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_Rem"><span class="hs-identifier hs-type">MO_S_Rem</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1455"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_Quot"><span class="hs-identifier hs-type">MO_U_Quot</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1456"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_Rem"><span class="hs-identifier hs-type">MO_U_Rem</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1457"></span><span>
</span><span id="line-1458"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Eq"><span class="hs-identifier hs-type">MO_Eq</span></a></span><span>  </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1459"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Ne"><span class="hs-identifier hs-type">MO_Ne</span></a></span><span>  </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1460"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_Ge"><span class="hs-identifier hs-type">MO_S_Ge</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1461"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_Gt"><span class="hs-identifier hs-type">MO_S_Gt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1462"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_Le"><span class="hs-identifier hs-type">MO_S_Le</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1463"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_Lt"><span class="hs-identifier hs-type">MO_S_Lt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1464"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_Ge"><span class="hs-identifier hs-type">MO_U_Ge</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1465"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_Gt"><span class="hs-identifier hs-type">MO_U_Gt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1466"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_Le"><span class="hs-identifier hs-type">MO_U_Le</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1467"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_Lt"><span class="hs-identifier hs-type">MO_U_Lt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1468"></span><span>
</span><span id="line-1469"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Add"><span class="hs-identifier hs-type">MO_F_Add</span></a></span><span>        </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1470"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Sub"><span class="hs-identifier hs-type">MO_F_Sub</span></a></span><span>        </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1471"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Mul"><span class="hs-identifier hs-type">MO_F_Mul</span></a></span><span>        </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1472"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Quot"><span class="hs-identifier hs-type">MO_F_Quot</span></a></span><span>       </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1473"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Eq"><span class="hs-identifier hs-type">MO_F_Eq</span></a></span><span>         </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1474"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Ne"><span class="hs-identifier hs-type">MO_F_Ne</span></a></span><span>         </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1475"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Ge"><span class="hs-identifier hs-type">MO_F_Ge</span></a></span><span>         </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1476"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Gt"><span class="hs-identifier hs-type">MO_F_Gt</span></a></span><span>         </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1477"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Le"><span class="hs-identifier hs-type">MO_F_Le</span></a></span><span>         </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1478"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Lt"><span class="hs-identifier hs-type">MO_F_Lt</span></a></span><span>         </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1479"></span><span>
</span><span id="line-1480"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_And"><span class="hs-identifier hs-type">MO_And</span></a></span><span>          </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1481"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Or"><span class="hs-identifier hs-type">MO_Or</span></a></span><span>           </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1482"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Xor"><span class="hs-identifier hs-type">MO_Xor</span></a></span><span>          </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1483"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Shl"><span class="hs-identifier hs-type">MO_Shl</span></a></span><span>          </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1484"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_Shr"><span class="hs-identifier hs-type">MO_U_Shr</span></a></span><span>        </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1485"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_Shr"><span class="hs-identifier hs-type">MO_S_Shr</span></a></span><span>        </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1486"></span><span>
</span><span id="line-1487"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_V_Insert"><span class="hs-identifier hs-type">MO_V_Insert</span></a></span><span>   </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1488"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_V_Extract"><span class="hs-identifier hs-type">MO_V_Extract</span></a></span><span>  </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1489"></span><span>
</span><span id="line-1490"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_V_Add"><span class="hs-identifier hs-type">MO_V_Add</span></a></span><span>      </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1491"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_V_Sub"><span class="hs-identifier hs-type">MO_V_Sub</span></a></span><span>      </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1492"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_V_Mul"><span class="hs-identifier hs-type">MO_V_Mul</span></a></span><span>      </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1493"></span><span>
</span><span id="line-1494"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VS_Quot"><span class="hs-identifier hs-type">MO_VS_Quot</span></a></span><span>    </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1495"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VS_Rem"><span class="hs-identifier hs-type">MO_VS_Rem</span></a></span><span>     </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1496"></span><span>
</span><span id="line-1497"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VU_Quot"><span class="hs-identifier hs-type">MO_VU_Quot</span></a></span><span>    </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1498"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VU_Rem"><span class="hs-identifier hs-type">MO_VU_Rem</span></a></span><span>     </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1499"></span><span>
</span><span id="line-1500"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VF_Insert"><span class="hs-identifier hs-type">MO_VF_Insert</span></a></span><span>  </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1501"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VF_Extract"><span class="hs-identifier hs-type">MO_VF_Extract</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1502"></span><span>
</span><span id="line-1503"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VF_Add"><span class="hs-identifier hs-type">MO_VF_Add</span></a></span><span>     </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1504"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VF_Sub"><span class="hs-identifier hs-type">MO_VF_Sub</span></a></span><span>     </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1505"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VF_Mul"><span class="hs-identifier hs-type">MO_VF_Mul</span></a></span><span>     </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1506"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VF_Quot"><span class="hs-identifier hs-type">MO_VF_Quot</span></a></span><span>    </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1507"></span><span>
</span><span id="line-1508"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-1509"></span><span>        </span><span id="local-6989586621681859171"><span class="annot"><span class="annottext">negate :: LlvmType -&gt; LlvmVar -&gt; LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859171"><span class="hs-identifier hs-var hs-var">negate</span></a></span></span><span> </span><span id="local-6989586621681859266"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859266"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681859267"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859267"><span class="hs-identifier hs-var">v2</span></a></span></span><span> </span><span id="local-6989586621681859268"><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="#local-6989586621681859268"><span class="hs-identifier hs-var">negOp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1510"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621681859269"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859269"><span class="hs-identifier hs-var">vx</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859270"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859270"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859271"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859271"><span class="hs-identifier hs-var">top</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVar"><span class="hs-identifier hs-var">exprToVar</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859167"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1511"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621681859272"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859272"><span class="hs-identifier hs-var">v1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859273"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859273"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859266"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#LlvmOp"><span class="hs-identifier hs-var">LlvmOp</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="#local-6989586621681859268"><span class="hs-identifier hs-var">negOp</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859267"><span class="hs-identifier hs-var">v2</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859269"><span class="hs-identifier hs-var">vx</span></a></span><span>
</span><span id="line-1512"></span><span>            </span><span class="annot"><span class="annottext">ExprData -&gt; LlvmM ExprData
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859272"><span class="hs-identifier hs-var">v1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859270"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859273"><span class="hs-identifier hs-var">s1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859271"><span class="hs-identifier hs-var">top</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1513"></span><span>
</span><span id="line-1514"></span><span>        </span><span id="local-6989586621681859209"><span class="annot"><span class="annottext">negateVec :: LlvmType -&gt; LlvmVar -&gt; LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859209"><span class="hs-identifier hs-var hs-var">negateVec</span></a></span></span><span> </span><span id="local-6989586621681859274"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859274"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681859275"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859275"><span class="hs-identifier hs-var">v2</span></a></span></span><span> </span><span id="local-6989586621681859276"><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="#local-6989586621681859276"><span class="hs-identifier hs-var">negOp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1515"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621681859277"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859277"><span class="hs-identifier hs-var">vx</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859278"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859278"><span class="hs-identifier hs-var">stmts1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859279"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859279"><span class="hs-identifier hs-var">top</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVar"><span class="hs-identifier hs-var">exprToVar</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859167"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1516"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621681859280"><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681859280"><span class="hs-identifier hs-var">vxs'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859281"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859281"><span class="hs-identifier hs-var">stmts2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Signage
-&gt; [(LlvmVar, LlvmType)] -&gt; LlvmM ([LlvmVar], LlvmStatements)
</span><a href="GHC.CmmToLlvm.CodeGen.html#castVars"><span class="hs-identifier hs-var">castVars</span></a></span><span> </span><span class="annot"><span class="annottext">Signage
</span><a href="GHC.CmmToLlvm.CodeGen.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859277"><span class="hs-identifier hs-var">vx</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859274"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1517"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859282"><span class="annot"><span class="annottext">vx' :: LlvmVar
</span><a href="#local-6989586621681859282"><span class="hs-identifier hs-var hs-var">vx'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; [LlvmVar] -&gt; LlvmVar
forall a. String -&gt; [a] -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#singletonPanic"><span class="hs-identifier hs-var">singletonPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genMachOp: negateVec&quot;</span></span><span> </span><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681859280"><span class="hs-identifier hs-var">vxs'</span></a></span><span>
</span><span id="line-1518"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621681859283"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859283"><span class="hs-identifier hs-var">v1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859284"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859284"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859274"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#LlvmOp"><span class="hs-identifier hs-var">LlvmOp</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="#local-6989586621681859276"><span class="hs-identifier hs-var">negOp</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859275"><span class="hs-identifier hs-var">v2</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859282"><span class="hs-identifier hs-var">vx'</span></a></span><span>
</span><span id="line-1519"></span><span>            </span><span class="annot"><span class="annottext">ExprData -&gt; LlvmM ExprData
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859283"><span class="hs-identifier hs-var">v1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859278"><span class="hs-identifier hs-var">stmts1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatements -&gt; LlvmStatements
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859281"><span class="hs-identifier hs-var">stmts2</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859284"><span class="hs-identifier hs-var">s1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859279"><span class="hs-identifier hs-var">top</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1520"></span><span>
</span><span id="line-1521"></span><span>        </span><span id="local-6989586621681859184"><span class="annot"><span class="annottext">fiConv :: LlvmType -&gt; LlvmCastOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859184"><span class="hs-identifier hs-var hs-var">fiConv</span></a></span></span><span> </span><span id="local-6989586621681859285"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859285"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681859286"><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="#local-6989586621681859286"><span class="hs-identifier hs-var">convOp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1522"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621681859287"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859287"><span class="hs-identifier hs-var">vx</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859288"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859288"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859289"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859289"><span class="hs-identifier hs-var">top</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVar"><span class="hs-identifier hs-var">exprToVar</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859167"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1523"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621681859290"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859290"><span class="hs-identifier hs-var">v1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859291"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859291"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859285"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="#local-6989586621681859286"><span class="hs-identifier hs-var">convOp</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859287"><span class="hs-identifier hs-var">vx</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859285"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1524"></span><span>            </span><span class="annot"><span class="annottext">ExprData -&gt; LlvmM ExprData
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859290"><span class="hs-identifier hs-var">v1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859288"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859291"><span class="hs-identifier hs-var">s1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859289"><span class="hs-identifier hs-var">top</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1525"></span><span>
</span><span id="line-1526"></span><span>        </span><span id="local-6989586621681859190"><span class="annot"><span class="annottext">sameConv :: Width -&gt; LlvmType -&gt; LlvmCastOp -&gt; LlvmCastOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859190"><span class="hs-identifier hs-var hs-var">sameConv</span></a></span></span><span> </span><span id="local-6989586621681859292"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859292"><span class="hs-identifier hs-var">from</span></a></span></span><span> </span><span id="local-6989586621681859293"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859293"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681859294"><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="#local-6989586621681859294"><span class="hs-identifier hs-var">reduce</span></a></span></span><span> </span><span id="local-6989586621681859295"><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="#local-6989586621681859295"><span class="hs-identifier hs-var">expand</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1527"></span><span>            </span><span id="local-6989586621681859296"><span class="annot"><span class="annottext">x' :: ExprData
</span><a href="#local-6989586621681859296"><span class="hs-identifier hs-var">x'</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span id="local-6989586621681859297"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859297"><span class="hs-identifier hs-var">vx</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859298"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859298"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859299"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859299"><span class="hs-identifier hs-var">top</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVar"><span class="hs-identifier hs-var">exprToVar</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859167"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1528"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859300"><span class="annot"><span class="annottext">sameConv' :: LlvmCastOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859300"><span class="hs-identifier hs-var hs-var">sameConv'</span></a></span></span><span> </span><span id="local-6989586621681859301"><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="#local-6989586621681859301"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1529"></span><span>                    </span><span class="hs-special">(</span><span id="local-6989586621681859302"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859302"><span class="hs-identifier hs-var">v1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859303"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859303"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859293"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="#local-6989586621681859301"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859297"><span class="hs-identifier hs-var">vx</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859293"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1530"></span><span>                    </span><span class="annot"><span class="annottext">ExprData -&gt; LlvmM ExprData
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859302"><span class="hs-identifier hs-var">v1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859298"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859303"><span class="hs-identifier hs-var">s1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859299"><span class="hs-identifier hs-var">top</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1531"></span><span>            </span><span id="local-6989586621681859304"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859304"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM Platform
</span><a href="GHC.CmmToLlvm.Base.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-1532"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859305"><span class="annot"><span class="annottext">toWidth :: Int
</span><a href="#local-6989586621681859305"><span class="hs-identifier hs-var hs-var">toWidth</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; LlvmType -&gt; Int
</span><a href="GHC.Llvm.Types.html#llvmWidthInBits"><span class="hs-identifier hs-var">llvmWidthInBits</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859304"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859293"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1533"></span><span>            </span><span class="hs-comment">-- LLVM doesn't like trying to convert to same width, so</span><span>
</span><span id="line-1534"></span><span>            </span><span class="hs-comment">-- need to check for that as we do get Cmm code doing it.</span><span>
</span><span id="line-1535"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Int
</span><a href="GHC.Cmm.Type.html#widthInBits"><span class="hs-identifier hs-var">widthInBits</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859292"><span class="hs-identifier hs-var">from</span></a></span><span>  </span><span class="hs-keyword">of</span><span>
</span><span id="line-1536"></span><span>                 </span><span id="local-6989586621681859306"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859306"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859306"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859305"><span class="hs-identifier hs-var">toWidth</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859300"><span class="hs-identifier hs-var">sameConv'</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="#local-6989586621681859295"><span class="hs-identifier hs-var">expand</span></a></span><span>
</span><span id="line-1537"></span><span>                 </span><span id="local-6989586621681859307"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859307"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859307"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859305"><span class="hs-identifier hs-var">toWidth</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859300"><span class="hs-identifier hs-var">sameConv'</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="#local-6989586621681859294"><span class="hs-identifier hs-var">reduce</span></a></span><span>
</span><span id="line-1538"></span><span>                 </span><span id="local-6989586621681859309"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859309"><span class="hs-identifier hs-var">_w</span></a></span></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ExprData -&gt; LlvmM ExprData
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">ExprData
</span><a href="#local-6989586621681859296"><span class="hs-identifier hs-var">x'</span></a></span><span>
</span><span id="line-1539"></span><span>
</span><span id="line-1540"></span><span>        </span><span id="local-6989586621681859218"><span class="annot"><span class="annottext">panicOp :: LlvmM ExprData
</span><a href="#local-6989586621681859218"><span class="hs-identifier hs-var hs-var">panicOp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; LlvmM ExprData
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; LlvmM ExprData) -&gt; String -&gt; LlvmM ExprData
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;LLVM.CodeGen.genMachOp: non unary op encountered&quot;</span></span><span>
</span><span id="line-1541"></span><span>                       </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;with one argument! (&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">MachOp -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../base-4.18.3.0/src/GHC.Show.html#show/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">MachOp
</span><a href="#local-6989586621681859166"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;)&quot;</span></span><span>
</span><span id="line-1542"></span><span>
</span><span id="line-1543"></span><span class="hs-comment">-- Handle GlobalRegs pointers</span><span>
</span><span id="line-1544"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genMachOp"><span class="hs-identifier hs-var">genMachOp</span></a></span><span> </span><span id="local-6989586621681859310"><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859310"><span class="hs-identifier hs-var">opt</span></a></span></span><span> </span><span id="local-6989586621681859311"><span class="annot"><span class="annottext">o :: MachOp
</span><a href="#local-6989586621681859311"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Add"><span class="hs-identifier hs-type">MO_Add</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681859312"><span class="annot"><span class="annottext">e :: [CmmExpr]
</span><a href="#local-6989586621681859312"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmReg"><span class="hs-identifier hs-type">CmmReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmGlobal"><span class="hs-identifier hs-type">CmmGlobal</span></a></span><span> </span><span id="local-6989586621681859313"><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859313"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-type">CmmInt</span></a></span><span> </span><span id="local-6989586621681859314"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681859314"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1545"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EOption
-&gt; MachOp -&gt; GlobalReg -&gt; Int -&gt; [CmmExpr] -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#genMachOp_fast"><span class="hs-identifier hs-var">genMachOp_fast</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859310"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="annot"><span class="annottext">MachOp
</span><a href="#local-6989586621681859311"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859313"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Int
forall a. Num a =&gt; Integer -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#fromInteger/GHC.Num.html#fromInteger"><span class="hs-identifier hs-var">fromInteger</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681859314"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681859312"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1546"></span><span>
</span><span id="line-1547"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genMachOp"><span class="hs-identifier hs-var">genMachOp</span></a></span><span> </span><span id="local-6989586621681859316"><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859316"><span class="hs-identifier hs-var">opt</span></a></span></span><span> </span><span id="local-6989586621681859317"><span class="annot"><span class="annottext">o :: MachOp
</span><a href="#local-6989586621681859317"><span class="hs-identifier hs-var">o</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Sub"><span class="hs-identifier hs-type">MO_Sub</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681859318"><span class="annot"><span class="annottext">e :: [CmmExpr]
</span><a href="#local-6989586621681859318"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmReg"><span class="hs-identifier hs-type">CmmReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmGlobal"><span class="hs-identifier hs-type">CmmGlobal</span></a></span><span> </span><span id="local-6989586621681859319"><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859319"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-type">CmmInt</span></a></span><span> </span><span id="local-6989586621681859320"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681859320"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1548"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EOption
-&gt; MachOp -&gt; GlobalReg -&gt; Int -&gt; [CmmExpr] -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#genMachOp_fast"><span class="hs-identifier hs-var">genMachOp_fast</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859316"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="annot"><span class="annottext">MachOp
</span><a href="#local-6989586621681859317"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859319"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int
forall a. Num a =&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#negate/GHC.Num.html#negate"><span class="hs-identifier hs-var">negate</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Int) -&gt; (Integer -&gt; Int) -&gt; Integer -&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Int
forall a. Num a =&gt; Integer -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#fromInteger/GHC.Num.html#fromInteger"><span class="hs-identifier hs-var">fromInteger</span></a></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Int) -&gt; Integer -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681859320"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681859318"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1549"></span><span>
</span><span id="line-1550"></span><span class="hs-comment">-- Generic case</span><span>
</span><span id="line-1551"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genMachOp"><span class="hs-identifier hs-var">genMachOp</span></a></span><span> </span><span id="local-6989586621681859321"><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859321"><span class="hs-identifier hs-var">opt</span></a></span></span><span> </span><span id="local-6989586621681859322"><span class="annot"><span class="annottext">MachOp
</span><a href="#local-6989586621681859322"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span id="local-6989586621681859323"><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681859323"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EOption -&gt; MachOp -&gt; [CmmExpr] -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#genMachOp_slow"><span class="hs-identifier hs-var">genMachOp_slow</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859321"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="annot"><span class="annottext">MachOp
</span><a href="#local-6989586621681859322"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681859323"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1552"></span><span>
</span><span id="line-1553"></span><span>
</span><span id="line-1554"></span><span class="hs-comment">-- | Handle CmmMachOp expressions</span><span>
</span><span id="line-1555"></span><span class="hs-comment">-- This is a specialised method that handles Global register manipulations like</span><span>
</span><span id="line-1556"></span><span class="hs-comment">-- 'Sp - 16', using the getelementptr instruction.</span><span>
</span><span id="line-1557"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genMachOp_fast"><span class="hs-identifier hs-type">genMachOp_fast</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#EOption"><span class="hs-identifier hs-type">EOption</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MachOp"><span class="hs-identifier hs-type">MachOp</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Reg.html#GlobalReg"><span class="hs-identifier hs-type">GlobalReg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1558"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#ExprData"><span class="hs-identifier hs-type">ExprData</span></a></span><span>
</span><span id="line-1559"></span><span id="genMachOp_fast"><span class="annot"><span class="annottext">genMachOp_fast :: EOption
-&gt; MachOp -&gt; GlobalReg -&gt; Int -&gt; [CmmExpr] -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#genMachOp_fast"><span class="hs-identifier hs-var hs-var">genMachOp_fast</span></a></span></span><span> </span><span id="local-6989586621681859325"><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859325"><span class="hs-identifier hs-var">opt</span></a></span></span><span> </span><span id="local-6989586621681859326"><span class="annot"><span class="annottext">MachOp
</span><a href="#local-6989586621681859326"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span id="local-6989586621681859327"><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859327"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681859328"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859328"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681859329"><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681859329"><span class="hs-identifier hs-var">e</span></a></span></span><span>
</span><span id="line-1560"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681859330"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859330"><span class="hs-identifier hs-var">gv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859331"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859331"><span class="hs-identifier hs-var">grt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859332"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859332"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmReg -&gt; LlvmM (LlvmVar, LlvmType, LlvmStatements)
</span><a href="GHC.CmmToLlvm.CodeGen.html#getCmmRegVal"><span class="hs-identifier hs-var">getCmmRegVal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalReg -&gt; CmmReg
</span><a href="GHC.Cmm.Reg.html#CmmGlobal"><span class="hs-identifier hs-var">CmmGlobal</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859327"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1561"></span><span>       </span><span id="local-6989586621681859333"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859333"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM Platform
</span><a href="GHC.CmmToLlvm.Base.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-1562"></span><span>       </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681859334"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859334"><span class="hs-identifier hs-var">ix</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681859335"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859335"><span class="hs-identifier hs-var">rem</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859328"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; (Int, Int)
forall a. Integral a =&gt; a -&gt; a -&gt; (a, a)
</span><a href="../../base-4.18.3.0/src/GHC.Real.html#divMod/GHC.Real.html#divMod"><span class="hs-operator hs-var">`divMod`</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; LlvmType -&gt; Int
</span><a href="GHC.Llvm.Types.html#llvmWidthInBits"><span class="hs-identifier hs-var">llvmWidthInBits</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859333"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmType -&gt; Int) -&gt; (LlvmType -&gt; LlvmType) -&gt; LlvmType -&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#pLower"><span class="hs-identifier hs-var">pLower</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859331"><span class="hs-identifier hs-var">grt</span></a></span><span>  </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Real.html#div/GHC.Real.html#div"><span class="hs-operator hs-var">`div`</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span class="hs-special">)</span><span>
</span><span id="line-1563"></span><span>       </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isPointer"><span class="hs-identifier hs-var">isPointer</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859331"><span class="hs-identifier hs-var">grt</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859335"><span class="hs-identifier hs-var">rem</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1564"></span><span>            </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1565"></span><span>                </span><span class="hs-special">(</span><span id="local-6989586621681859336"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859336"><span class="hs-identifier hs-var">ptr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859337"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859337"><span class="hs-identifier hs-var">s2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859331"><span class="hs-identifier hs-var">grt</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; LlvmVar -&gt; [LlvmVar] -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#GetElemPtr"><span class="hs-identifier hs-var">GetElemPtr</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859330"><span class="hs-identifier hs-var">gv</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int -&gt; LlvmVar
forall a. Integral a =&gt; a -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#toI32"><span class="hs-identifier hs-var">toI32</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859334"><span class="hs-identifier hs-var">ix</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1566"></span><span>                </span><span class="hs-special">(</span><span id="local-6989586621681859338"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859338"><span class="hs-identifier hs-var">var</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859339"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859339"><span class="hs-identifier hs-var">s3</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#llvmWord"><span class="hs-identifier hs-var">llvmWord</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859333"><span class="hs-identifier hs-var">platform</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Ptrtoint"><span class="hs-identifier hs-var">LM_Ptrtoint</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859336"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#llvmWord"><span class="hs-identifier hs-var">llvmWord</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859333"><span class="hs-identifier hs-var">platform</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1567"></span><span>                </span><span class="annot"><span class="annottext">ExprData -&gt; LlvmM ExprData
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859338"><span class="hs-identifier hs-var">var</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859332"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859337"><span class="hs-identifier hs-var">s2</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859339"><span class="hs-identifier hs-var">s3</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1568"></span><span>
</span><span id="line-1569"></span><span>            </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EOption -&gt; MachOp -&gt; [CmmExpr] -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#genMachOp_slow"><span class="hs-identifier hs-var">genMachOp_slow</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859325"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="annot"><span class="annottext">MachOp
</span><a href="#local-6989586621681859326"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><a href="#local-6989586621681859329"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1570"></span><span>
</span><span id="line-1571"></span><span>
</span><span id="line-1572"></span><span class="hs-comment">-- | Handle CmmMachOp expressions</span><span>
</span><span id="line-1573"></span><span class="hs-comment">-- This handles all the cases not handle by the specialised genMachOp_fast.</span><span>
</span><span id="line-1574"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genMachOp_slow"><span class="hs-identifier hs-type">genMachOp_slow</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#EOption"><span class="hs-identifier hs-type">EOption</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MachOp"><span class="hs-identifier hs-type">MachOp</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#ExprData"><span class="hs-identifier hs-type">ExprData</span></a></span><span>
</span><span id="line-1575"></span><span>
</span><span id="line-1576"></span><span class="hs-comment">-- Element extraction</span><span>
</span><span id="line-1577"></span><span id="genMachOp_slow"><span class="annot"><span class="annottext">genMachOp_slow :: EOption -&gt; MachOp -&gt; [CmmExpr] -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#genMachOp_slow"><span class="hs-identifier hs-var hs-var">genMachOp_slow</span></a></span></span><span> </span><span class="annot"><span class="annottext">EOption
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_V_Extract"><span class="hs-identifier hs-type">MO_V_Extract</span></a></span><span> </span><span id="local-6989586621681859340"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859340"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681859341"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859341"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681859342"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859342"><span class="hs-identifier hs-var">val</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859343"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859343"><span class="hs-identifier hs-var">idx</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WriterT LlvmAccum LlvmM LlvmVar -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#runExprData"><span class="hs-identifier hs-var">runExprData</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT LlvmAccum LlvmM LlvmVar -&gt; LlvmM ExprData)
-&gt; WriterT LlvmAccum LlvmM LlvmVar -&gt; LlvmM ExprData
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1578"></span><span>    </span><span id="local-6989586621681859345"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859345"><span class="hs-identifier hs-var">vval</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859342"><span class="hs-identifier hs-var">val</span></a></span><span>
</span><span id="line-1579"></span><span>    </span><span id="local-6989586621681859346"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859346"><span class="hs-identifier hs-var">vidx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859343"><span class="hs-identifier hs-var">idx</span></a></span><span>
</span><span id="line-1580"></span><span>    </span><span id="local-6989586621681859347"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859347"><span class="hs-identifier hs-var">vval'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; [LlvmVar] -&gt; LlvmVar
forall a. String -&gt; [a] -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#singletonPanic"><span class="hs-identifier hs-var">singletonPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genMachOp_slow&quot;</span></span><span> </span><span class="annot"><span class="annottext">([LlvmVar] -&gt; LlvmVar)
-&gt; WriterT LlvmAccum LlvmM [LlvmVar]
-&gt; WriterT LlvmAccum LlvmM LlvmVar
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/Data.Functor.html#%3C%24%3E/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span>
</span><span id="line-1581"></span><span>             </span><span class="annot"><span class="annottext">Signage
-&gt; [(LlvmVar, LlvmType)] -&gt; WriterT LlvmAccum LlvmM [LlvmVar]
</span><a href="GHC.CmmToLlvm.CodeGen.html#castVarsW"><span class="hs-identifier hs-var">castVarsW</span></a></span><span> </span><span class="annot"><span class="annottext">Signage
</span><a href="GHC.CmmToLlvm.CodeGen.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859345"><span class="hs-identifier hs-var">vval</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#LMVector"><span class="hs-identifier hs-var">LMVector</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859340"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859348"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1582"></span><span>    </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859348"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Extract"><span class="hs-identifier hs-var">Extract</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859347"><span class="hs-identifier hs-var">vval'</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859346"><span class="hs-identifier hs-var">vidx</span></a></span><span>
</span><span id="line-1583"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1584"></span><span>    </span><span id="local-6989586621681859348"><span class="annot"><span class="annottext">ty :: LlvmType
</span><a href="#local-6989586621681859348"><span class="hs-identifier hs-var hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmInt"><span class="hs-identifier hs-var">widthToLlvmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859341"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-1585"></span><span>
</span><span id="line-1586"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genMachOp_slow"><span class="hs-identifier hs-var">genMachOp_slow</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VF_Extract"><span class="hs-identifier hs-type">MO_VF_Extract</span></a></span><span> </span><span id="local-6989586621681859350"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859350"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681859351"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859351"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681859352"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859352"><span class="hs-identifier hs-var">val</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859353"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859353"><span class="hs-identifier hs-var">idx</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WriterT LlvmAccum LlvmM LlvmVar -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#runExprData"><span class="hs-identifier hs-var">runExprData</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT LlvmAccum LlvmM LlvmVar -&gt; LlvmM ExprData)
-&gt; WriterT LlvmAccum LlvmM LlvmVar -&gt; LlvmM ExprData
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1587"></span><span>    </span><span id="local-6989586621681859354"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859354"><span class="hs-identifier hs-var">vval</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859352"><span class="hs-identifier hs-var">val</span></a></span><span>
</span><span id="line-1588"></span><span>    </span><span id="local-6989586621681859355"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859355"><span class="hs-identifier hs-var">vidx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859353"><span class="hs-identifier hs-var">idx</span></a></span><span>
</span><span id="line-1589"></span><span>    </span><span id="local-6989586621681859356"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859356"><span class="hs-identifier hs-var">vval'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; [LlvmVar] -&gt; LlvmVar
forall a. String -&gt; [a] -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#singletonPanic"><span class="hs-identifier hs-var">singletonPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genMachOp_slow&quot;</span></span><span> </span><span class="annot"><span class="annottext">([LlvmVar] -&gt; LlvmVar)
-&gt; WriterT LlvmAccum LlvmM [LlvmVar]
-&gt; WriterT LlvmAccum LlvmM LlvmVar
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/Data.Functor.html#%3C%24%3E/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span>
</span><span id="line-1590"></span><span>             </span><span class="annot"><span class="annottext">Signage
-&gt; [(LlvmVar, LlvmType)] -&gt; WriterT LlvmAccum LlvmM [LlvmVar]
</span><a href="GHC.CmmToLlvm.CodeGen.html#castVarsW"><span class="hs-identifier hs-var">castVarsW</span></a></span><span> </span><span class="annot"><span class="annottext">Signage
</span><a href="GHC.CmmToLlvm.CodeGen.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859354"><span class="hs-identifier hs-var">vval</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#LMVector"><span class="hs-identifier hs-var">LMVector</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859350"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859357"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1591"></span><span>    </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859357"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Extract"><span class="hs-identifier hs-var">Extract</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859356"><span class="hs-identifier hs-var">vval'</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859355"><span class="hs-identifier hs-var">vidx</span></a></span><span>
</span><span id="line-1592"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1593"></span><span>    </span><span id="local-6989586621681859357"><span class="annot"><span class="annottext">ty :: LlvmType
</span><a href="#local-6989586621681859357"><span class="hs-identifier hs-var hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmFloat"><span class="hs-identifier hs-var">widthToLlvmFloat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859351"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-1594"></span><span>
</span><span id="line-1595"></span><span class="hs-comment">-- Element insertion</span><span>
</span><span id="line-1596"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genMachOp_slow"><span class="hs-identifier hs-var">genMachOp_slow</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_V_Insert"><span class="hs-identifier hs-type">MO_V_Insert</span></a></span><span> </span><span id="local-6989586621681859358"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859358"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681859359"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859359"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681859360"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859360"><span class="hs-identifier hs-var">val</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859361"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859361"><span class="hs-identifier hs-var">elt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859362"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859362"><span class="hs-identifier hs-var">idx</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WriterT LlvmAccum LlvmM LlvmVar -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#runExprData"><span class="hs-identifier hs-var">runExprData</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT LlvmAccum LlvmM LlvmVar -&gt; LlvmM ExprData)
-&gt; WriterT LlvmAccum LlvmM LlvmVar -&gt; LlvmM ExprData
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1597"></span><span>    </span><span id="local-6989586621681859363"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859363"><span class="hs-identifier hs-var">vval</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859360"><span class="hs-identifier hs-var">val</span></a></span><span>
</span><span id="line-1598"></span><span>    </span><span id="local-6989586621681859364"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859364"><span class="hs-identifier hs-var">velt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859361"><span class="hs-identifier hs-var">elt</span></a></span><span>
</span><span id="line-1599"></span><span>    </span><span id="local-6989586621681859365"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859365"><span class="hs-identifier hs-var">vidx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859362"><span class="hs-identifier hs-var">idx</span></a></span><span>
</span><span id="line-1600"></span><span>    </span><span id="local-6989586621681859366"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859366"><span class="hs-identifier hs-var">vval'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; [LlvmVar] -&gt; LlvmVar
forall a. String -&gt; [a] -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#singletonPanic"><span class="hs-identifier hs-var">singletonPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genMachOp_slow&quot;</span></span><span> </span><span class="annot"><span class="annottext">([LlvmVar] -&gt; LlvmVar)
-&gt; WriterT LlvmAccum LlvmM [LlvmVar]
-&gt; WriterT LlvmAccum LlvmM LlvmVar
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/Data.Functor.html#%3C%24%3E/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span>
</span><span id="line-1601"></span><span>             </span><span class="annot"><span class="annottext">Signage
-&gt; [(LlvmVar, LlvmType)] -&gt; WriterT LlvmAccum LlvmM [LlvmVar]
</span><a href="GHC.CmmToLlvm.CodeGen.html#castVarsW"><span class="hs-identifier hs-var">castVarsW</span></a></span><span> </span><span class="annot"><span class="annottext">Signage
</span><a href="GHC.CmmToLlvm.CodeGen.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859363"><span class="hs-identifier hs-var">vval</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859367"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1602"></span><span>    </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859367"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Insert"><span class="hs-identifier hs-var">Insert</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859366"><span class="hs-identifier hs-var">vval'</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859364"><span class="hs-identifier hs-var">velt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859365"><span class="hs-identifier hs-var">vidx</span></a></span><span>
</span><span id="line-1603"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1604"></span><span>    </span><span id="local-6989586621681859367"><span class="annot"><span class="annottext">ty :: LlvmType
</span><a href="#local-6989586621681859367"><span class="hs-identifier hs-var hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#LMVector"><span class="hs-identifier hs-var">LMVector</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859358"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmInt"><span class="hs-identifier hs-var">widthToLlvmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859359"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1605"></span><span>
</span><span id="line-1606"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genMachOp_slow"><span class="hs-identifier hs-var">genMachOp_slow</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VF_Insert"><span class="hs-identifier hs-type">MO_VF_Insert</span></a></span><span> </span><span id="local-6989586621681859369"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859369"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681859370"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859370"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681859371"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859371"><span class="hs-identifier hs-var">val</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859372"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859372"><span class="hs-identifier hs-var">elt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859373"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859373"><span class="hs-identifier hs-var">idx</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WriterT LlvmAccum LlvmM LlvmVar -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#runExprData"><span class="hs-identifier hs-var">runExprData</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT LlvmAccum LlvmM LlvmVar -&gt; LlvmM ExprData)
-&gt; WriterT LlvmAccum LlvmM LlvmVar -&gt; LlvmM ExprData
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1607"></span><span>    </span><span id="local-6989586621681859374"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859374"><span class="hs-identifier hs-var">vval</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859371"><span class="hs-identifier hs-var">val</span></a></span><span>
</span><span id="line-1608"></span><span>    </span><span id="local-6989586621681859375"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859375"><span class="hs-identifier hs-var">velt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859372"><span class="hs-identifier hs-var">elt</span></a></span><span>
</span><span id="line-1609"></span><span>    </span><span id="local-6989586621681859376"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859376"><span class="hs-identifier hs-var">vidx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859373"><span class="hs-identifier hs-var">idx</span></a></span><span>
</span><span id="line-1610"></span><span>    </span><span id="local-6989586621681859377"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859377"><span class="hs-identifier hs-var">vval'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; [LlvmVar] -&gt; LlvmVar
forall a. String -&gt; [a] -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#singletonPanic"><span class="hs-identifier hs-var">singletonPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genMachOp_slow&quot;</span></span><span> </span><span class="annot"><span class="annottext">([LlvmVar] -&gt; LlvmVar)
-&gt; WriterT LlvmAccum LlvmM [LlvmVar]
-&gt; WriterT LlvmAccum LlvmM LlvmVar
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/Data.Functor.html#%3C%24%3E/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span>
</span><span id="line-1611"></span><span>             </span><span class="annot"><span class="annottext">Signage
-&gt; [(LlvmVar, LlvmType)] -&gt; WriterT LlvmAccum LlvmM [LlvmVar]
</span><a href="GHC.CmmToLlvm.CodeGen.html#castVarsW"><span class="hs-identifier hs-var">castVarsW</span></a></span><span> </span><span class="annot"><span class="annottext">Signage
</span><a href="GHC.CmmToLlvm.CodeGen.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859374"><span class="hs-identifier hs-var">vval</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859378"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1612"></span><span>    </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859378"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Insert"><span class="hs-identifier hs-var">Insert</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859377"><span class="hs-identifier hs-var">vval'</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859375"><span class="hs-identifier hs-var">velt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859376"><span class="hs-identifier hs-var">vidx</span></a></span><span>
</span><span id="line-1613"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1614"></span><span>    </span><span id="local-6989586621681859378"><span class="annot"><span class="annottext">ty :: LlvmType
</span><a href="#local-6989586621681859378"><span class="hs-identifier hs-var hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#LMVector"><span class="hs-identifier hs-var">LMVector</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859369"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmFloat"><span class="hs-identifier hs-var">widthToLlvmFloat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859370"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1615"></span><span>
</span><span id="line-1616"></span><span class="hs-comment">-- Binary MachOp</span><span>
</span><span id="line-1617"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genMachOp_slow"><span class="hs-identifier hs-var">genMachOp_slow</span></a></span><span> </span><span id="local-6989586621681859379"><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859379"><span class="hs-identifier hs-var">opt</span></a></span></span><span> </span><span id="local-6989586621681859380"><span class="annot"><span class="annottext">MachOp
</span><a href="#local-6989586621681859380"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621681859381"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859381"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859382"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859382"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MachOp
</span><a href="#local-6989586621681859380"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1618"></span><span>
</span><span id="line-1619"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Eq"><span class="hs-identifier hs-type">MO_Eq</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EOption -&gt; LlvmCmpOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859383"><span class="hs-identifier hs-var">genBinComp</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859379"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCmpOp
</span><a href="GHC.Llvm.Types.html#LM_CMP_Eq"><span class="hs-identifier hs-var">LM_CMP_Eq</span></a></span><span>
</span><span id="line-1620"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Ne"><span class="hs-identifier hs-type">MO_Ne</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EOption -&gt; LlvmCmpOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859383"><span class="hs-identifier hs-var">genBinComp</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859379"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCmpOp
</span><a href="GHC.Llvm.Types.html#LM_CMP_Ne"><span class="hs-identifier hs-var">LM_CMP_Ne</span></a></span><span>
</span><span id="line-1621"></span><span>
</span><span id="line-1622"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_Gt"><span class="hs-identifier hs-type">MO_S_Gt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EOption -&gt; LlvmCmpOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859383"><span class="hs-identifier hs-var">genBinComp</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859379"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCmpOp
</span><a href="GHC.Llvm.Types.html#LM_CMP_Sgt"><span class="hs-identifier hs-var">LM_CMP_Sgt</span></a></span><span>
</span><span id="line-1623"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_Ge"><span class="hs-identifier hs-type">MO_S_Ge</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EOption -&gt; LlvmCmpOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859383"><span class="hs-identifier hs-var">genBinComp</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859379"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCmpOp
</span><a href="GHC.Llvm.Types.html#LM_CMP_Sge"><span class="hs-identifier hs-var">LM_CMP_Sge</span></a></span><span>
</span><span id="line-1624"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_Lt"><span class="hs-identifier hs-type">MO_S_Lt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EOption -&gt; LlvmCmpOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859383"><span class="hs-identifier hs-var">genBinComp</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859379"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCmpOp
</span><a href="GHC.Llvm.Types.html#LM_CMP_Slt"><span class="hs-identifier hs-var">LM_CMP_Slt</span></a></span><span>
</span><span id="line-1625"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_Le"><span class="hs-identifier hs-type">MO_S_Le</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EOption -&gt; LlvmCmpOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859383"><span class="hs-identifier hs-var">genBinComp</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859379"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCmpOp
</span><a href="GHC.Llvm.Types.html#LM_CMP_Sle"><span class="hs-identifier hs-var">LM_CMP_Sle</span></a></span><span>
</span><span id="line-1626"></span><span>
</span><span id="line-1627"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_Gt"><span class="hs-identifier hs-type">MO_U_Gt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EOption -&gt; LlvmCmpOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859383"><span class="hs-identifier hs-var">genBinComp</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859379"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCmpOp
</span><a href="GHC.Llvm.Types.html#LM_CMP_Ugt"><span class="hs-identifier hs-var">LM_CMP_Ugt</span></a></span><span>
</span><span id="line-1628"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_Ge"><span class="hs-identifier hs-type">MO_U_Ge</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EOption -&gt; LlvmCmpOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859383"><span class="hs-identifier hs-var">genBinComp</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859379"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCmpOp
</span><a href="GHC.Llvm.Types.html#LM_CMP_Uge"><span class="hs-identifier hs-var">LM_CMP_Uge</span></a></span><span>
</span><span id="line-1629"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_Lt"><span class="hs-identifier hs-type">MO_U_Lt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EOption -&gt; LlvmCmpOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859383"><span class="hs-identifier hs-var">genBinComp</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859379"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCmpOp
</span><a href="GHC.Llvm.Types.html#LM_CMP_Ult"><span class="hs-identifier hs-var">LM_CMP_Ult</span></a></span><span>
</span><span id="line-1630"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_Le"><span class="hs-identifier hs-type">MO_U_Le</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EOption -&gt; LlvmCmpOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859383"><span class="hs-identifier hs-var">genBinComp</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859379"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCmpOp
</span><a href="GHC.Llvm.Types.html#LM_CMP_Ule"><span class="hs-identifier hs-var">LM_CMP_Ule</span></a></span><span>
</span><span id="line-1631"></span><span>
</span><span id="line-1632"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Add"><span class="hs-identifier hs-type">MO_Add</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859393"><span class="hs-identifier hs-var">genBinMach</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_Add"><span class="hs-identifier hs-var">LM_MO_Add</span></a></span><span>
</span><span id="line-1633"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Sub"><span class="hs-identifier hs-type">MO_Sub</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859393"><span class="hs-identifier hs-var">genBinMach</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_Sub"><span class="hs-identifier hs-var">LM_MO_Sub</span></a></span><span>
</span><span id="line-1634"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Mul"><span class="hs-identifier hs-type">MO_Mul</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859393"><span class="hs-identifier hs-var">genBinMach</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_Mul"><span class="hs-identifier hs-var">LM_MO_Mul</span></a></span><span>
</span><span id="line-1635"></span><span>
</span><span id="line-1636"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_MulMayOflo"><span class="hs-identifier hs-type">MO_S_MulMayOflo</span></a></span><span> </span><span id="local-6989586621681859395"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859395"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width -&gt; CmmExpr -&gt; CmmExpr -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859396"><span class="hs-identifier hs-var">isSMulOK</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859395"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859381"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859382"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-1637"></span><span>
</span><span id="line-1638"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_Quot"><span class="hs-identifier hs-type">MO_S_Quot</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859393"><span class="hs-identifier hs-var">genBinMach</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_SDiv"><span class="hs-identifier hs-var">LM_MO_SDiv</span></a></span><span>
</span><span id="line-1639"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_Rem"><span class="hs-identifier hs-type">MO_S_Rem</span></a></span><span>  </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859393"><span class="hs-identifier hs-var">genBinMach</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_SRem"><span class="hs-identifier hs-var">LM_MO_SRem</span></a></span><span>
</span><span id="line-1640"></span><span>
</span><span id="line-1641"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_Quot"><span class="hs-identifier hs-type">MO_U_Quot</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859393"><span class="hs-identifier hs-var">genBinMach</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_UDiv"><span class="hs-identifier hs-var">LM_MO_UDiv</span></a></span><span>
</span><span id="line-1642"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_Rem"><span class="hs-identifier hs-type">MO_U_Rem</span></a></span><span>  </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859393"><span class="hs-identifier hs-var">genBinMach</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_URem"><span class="hs-identifier hs-var">LM_MO_URem</span></a></span><span>
</span><span id="line-1643"></span><span>
</span><span id="line-1644"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Eq"><span class="hs-identifier hs-type">MO_F_Eq</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EOption -&gt; LlvmCmpOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859383"><span class="hs-identifier hs-var">genBinComp</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859379"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCmpOp
</span><a href="GHC.Llvm.Types.html#LM_CMP_Feq"><span class="hs-identifier hs-var">LM_CMP_Feq</span></a></span><span>
</span><span id="line-1645"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Ne"><span class="hs-identifier hs-type">MO_F_Ne</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EOption -&gt; LlvmCmpOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859383"><span class="hs-identifier hs-var">genBinComp</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859379"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCmpOp
</span><a href="GHC.Llvm.Types.html#LM_CMP_Fne"><span class="hs-identifier hs-var">LM_CMP_Fne</span></a></span><span>
</span><span id="line-1646"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Gt"><span class="hs-identifier hs-type">MO_F_Gt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EOption -&gt; LlvmCmpOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859383"><span class="hs-identifier hs-var">genBinComp</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859379"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCmpOp
</span><a href="GHC.Llvm.Types.html#LM_CMP_Fgt"><span class="hs-identifier hs-var">LM_CMP_Fgt</span></a></span><span>
</span><span id="line-1647"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Ge"><span class="hs-identifier hs-type">MO_F_Ge</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EOption -&gt; LlvmCmpOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859383"><span class="hs-identifier hs-var">genBinComp</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859379"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCmpOp
</span><a href="GHC.Llvm.Types.html#LM_CMP_Fge"><span class="hs-identifier hs-var">LM_CMP_Fge</span></a></span><span>
</span><span id="line-1648"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Lt"><span class="hs-identifier hs-type">MO_F_Lt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EOption -&gt; LlvmCmpOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859383"><span class="hs-identifier hs-var">genBinComp</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859379"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCmpOp
</span><a href="GHC.Llvm.Types.html#LM_CMP_Flt"><span class="hs-identifier hs-var">LM_CMP_Flt</span></a></span><span>
</span><span id="line-1649"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Le"><span class="hs-identifier hs-type">MO_F_Le</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EOption -&gt; LlvmCmpOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859383"><span class="hs-identifier hs-var">genBinComp</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859379"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCmpOp
</span><a href="GHC.Llvm.Types.html#LM_CMP_Fle"><span class="hs-identifier hs-var">LM_CMP_Fle</span></a></span><span>
</span><span id="line-1650"></span><span>
</span><span id="line-1651"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Add"><span class="hs-identifier hs-type">MO_F_Add</span></a></span><span>  </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859393"><span class="hs-identifier hs-var">genBinMach</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_FAdd"><span class="hs-identifier hs-var">LM_MO_FAdd</span></a></span><span>
</span><span id="line-1652"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Sub"><span class="hs-identifier hs-type">MO_F_Sub</span></a></span><span>  </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859393"><span class="hs-identifier hs-var">genBinMach</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_FSub"><span class="hs-identifier hs-var">LM_MO_FSub</span></a></span><span>
</span><span id="line-1653"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Mul"><span class="hs-identifier hs-type">MO_F_Mul</span></a></span><span>  </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859393"><span class="hs-identifier hs-var">genBinMach</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_FMul"><span class="hs-identifier hs-var">LM_MO_FMul</span></a></span><span>
</span><span id="line-1654"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Quot"><span class="hs-identifier hs-type">MO_F_Quot</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859393"><span class="hs-identifier hs-var">genBinMach</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_FDiv"><span class="hs-identifier hs-var">LM_MO_FDiv</span></a></span><span>
</span><span id="line-1655"></span><span>
</span><span id="line-1656"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_And"><span class="hs-identifier hs-type">MO_And</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859393"><span class="hs-identifier hs-var">genBinMach</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_And"><span class="hs-identifier hs-var">LM_MO_And</span></a></span><span>
</span><span id="line-1657"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Or"><span class="hs-identifier hs-type">MO_Or</span></a></span><span>  </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859393"><span class="hs-identifier hs-var">genBinMach</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_Or"><span class="hs-identifier hs-var">LM_MO_Or</span></a></span><span>
</span><span id="line-1658"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Xor"><span class="hs-identifier hs-type">MO_Xor</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859393"><span class="hs-identifier hs-var">genBinMach</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_Xor"><span class="hs-identifier hs-var">LM_MO_Xor</span></a></span><span>
</span><span id="line-1659"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Shl"><span class="hs-identifier hs-type">MO_Shl</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859409"><span class="hs-identifier hs-var">genBinCastYMach</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_Shl"><span class="hs-identifier hs-var">LM_MO_Shl</span></a></span><span>
</span><span id="line-1660"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_U_Shr"><span class="hs-identifier hs-type">MO_U_Shr</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859409"><span class="hs-identifier hs-var">genBinCastYMach</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_LShr"><span class="hs-identifier hs-var">LM_MO_LShr</span></a></span><span>
</span><span id="line-1661"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_Shr"><span class="hs-identifier hs-type">MO_S_Shr</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859409"><span class="hs-identifier hs-var">genBinCastYMach</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_AShr"><span class="hs-identifier hs-var">LM_MO_AShr</span></a></span><span>
</span><span id="line-1662"></span><span>
</span><span id="line-1663"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_V_Add"><span class="hs-identifier hs-type">MO_V_Add</span></a></span><span> </span><span id="local-6989586621681859410"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859410"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681859411"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859411"><span class="hs-identifier hs-var">w</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859412"><span class="hs-identifier hs-var">genCastBinMach</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#LMVector"><span class="hs-identifier hs-var">LMVector</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859410"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmInt"><span class="hs-identifier hs-var">widthToLlvmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859411"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_Add"><span class="hs-identifier hs-var">LM_MO_Add</span></a></span><span>
</span><span id="line-1664"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_V_Sub"><span class="hs-identifier hs-type">MO_V_Sub</span></a></span><span> </span><span id="local-6989586621681859413"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859413"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681859414"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859414"><span class="hs-identifier hs-var">w</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859412"><span class="hs-identifier hs-var">genCastBinMach</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#LMVector"><span class="hs-identifier hs-var">LMVector</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859413"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmInt"><span class="hs-identifier hs-var">widthToLlvmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859414"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_Sub"><span class="hs-identifier hs-var">LM_MO_Sub</span></a></span><span>
</span><span id="line-1665"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_V_Mul"><span class="hs-identifier hs-type">MO_V_Mul</span></a></span><span> </span><span id="local-6989586621681859415"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859415"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681859416"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859416"><span class="hs-identifier hs-var">w</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859412"><span class="hs-identifier hs-var">genCastBinMach</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#LMVector"><span class="hs-identifier hs-var">LMVector</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859415"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmInt"><span class="hs-identifier hs-var">widthToLlvmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859416"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_Mul"><span class="hs-identifier hs-var">LM_MO_Mul</span></a></span><span>
</span><span id="line-1666"></span><span>
</span><span id="line-1667"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VS_Quot"><span class="hs-identifier hs-type">MO_VS_Quot</span></a></span><span> </span><span id="local-6989586621681859417"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859417"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681859418"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859418"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859412"><span class="hs-identifier hs-var">genCastBinMach</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#LMVector"><span class="hs-identifier hs-var">LMVector</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859417"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmInt"><span class="hs-identifier hs-var">widthToLlvmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859418"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_SDiv"><span class="hs-identifier hs-var">LM_MO_SDiv</span></a></span><span>
</span><span id="line-1668"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VS_Rem"><span class="hs-identifier hs-type">MO_VS_Rem</span></a></span><span>  </span><span id="local-6989586621681859419"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859419"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681859420"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859420"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859412"><span class="hs-identifier hs-var">genCastBinMach</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#LMVector"><span class="hs-identifier hs-var">LMVector</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859419"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmInt"><span class="hs-identifier hs-var">widthToLlvmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859420"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_SRem"><span class="hs-identifier hs-var">LM_MO_SRem</span></a></span><span>
</span><span id="line-1669"></span><span>
</span><span id="line-1670"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VU_Quot"><span class="hs-identifier hs-type">MO_VU_Quot</span></a></span><span> </span><span id="local-6989586621681859421"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859421"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681859422"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859422"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859412"><span class="hs-identifier hs-var">genCastBinMach</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#LMVector"><span class="hs-identifier hs-var">LMVector</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859421"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmInt"><span class="hs-identifier hs-var">widthToLlvmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859422"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_UDiv"><span class="hs-identifier hs-var">LM_MO_UDiv</span></a></span><span>
</span><span id="line-1671"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VU_Rem"><span class="hs-identifier hs-type">MO_VU_Rem</span></a></span><span>  </span><span id="local-6989586621681859423"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859423"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681859424"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859424"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859412"><span class="hs-identifier hs-var">genCastBinMach</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#LMVector"><span class="hs-identifier hs-var">LMVector</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859423"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmInt"><span class="hs-identifier hs-var">widthToLlvmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859424"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_URem"><span class="hs-identifier hs-var">LM_MO_URem</span></a></span><span>
</span><span id="line-1672"></span><span>
</span><span id="line-1673"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VF_Add"><span class="hs-identifier hs-type">MO_VF_Add</span></a></span><span>  </span><span id="local-6989586621681859425"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859425"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681859426"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859426"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859412"><span class="hs-identifier hs-var">genCastBinMach</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#LMVector"><span class="hs-identifier hs-var">LMVector</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859425"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmFloat"><span class="hs-identifier hs-var">widthToLlvmFloat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859426"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_FAdd"><span class="hs-identifier hs-var">LM_MO_FAdd</span></a></span><span>
</span><span id="line-1674"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VF_Sub"><span class="hs-identifier hs-type">MO_VF_Sub</span></a></span><span>  </span><span id="local-6989586621681859427"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859427"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681859428"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859428"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859412"><span class="hs-identifier hs-var">genCastBinMach</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#LMVector"><span class="hs-identifier hs-var">LMVector</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859427"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmFloat"><span class="hs-identifier hs-var">widthToLlvmFloat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859428"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_FSub"><span class="hs-identifier hs-var">LM_MO_FSub</span></a></span><span>
</span><span id="line-1675"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VF_Mul"><span class="hs-identifier hs-type">MO_VF_Mul</span></a></span><span>  </span><span id="local-6989586621681859429"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859429"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681859430"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859430"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859412"><span class="hs-identifier hs-var">genCastBinMach</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#LMVector"><span class="hs-identifier hs-var">LMVector</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859429"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmFloat"><span class="hs-identifier hs-var">widthToLlvmFloat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859430"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_FMul"><span class="hs-identifier hs-var">LM_MO_FMul</span></a></span><span>
</span><span id="line-1676"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VF_Quot"><span class="hs-identifier hs-type">MO_VF_Quot</span></a></span><span> </span><span id="local-6989586621681859431"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859431"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681859432"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859432"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859412"><span class="hs-identifier hs-var">genCastBinMach</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#LMVector"><span class="hs-identifier hs-var">LMVector</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859431"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmFloat"><span class="hs-identifier hs-var">widthToLlvmFloat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859432"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_FDiv"><span class="hs-identifier hs-var">LM_MO_FDiv</span></a></span><span>
</span><span id="line-1677"></span><span>
</span><span id="line-1678"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Not"><span class="hs-identifier hs-type">MO_Not</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859433"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1679"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_S_Neg"><span class="hs-identifier hs-type">MO_S_Neg</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859433"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1680"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_F_Neg"><span class="hs-identifier hs-type">MO_F_Neg</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859433"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1681"></span><span>
</span><span id="line-1682"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_SF_Conv"><span class="hs-identifier hs-type">MO_SF_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859433"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1683"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_FS_Conv"><span class="hs-identifier hs-type">MO_FS_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859433"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1684"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_SS_Conv"><span class="hs-identifier hs-type">MO_SS_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859433"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1685"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_UU_Conv"><span class="hs-identifier hs-type">MO_UU_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859433"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1686"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_XX_Conv"><span class="hs-identifier hs-type">MO_XX_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859433"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1687"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_FF_Conv"><span class="hs-identifier hs-type">MO_FF_Conv</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859433"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1688"></span><span>
</span><span id="line-1689"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_V_Insert"><span class="hs-identifier hs-type">MO_V_Insert</span></a></span><span>  </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859433"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1690"></span><span>
</span><span id="line-1691"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VS_Neg"><span class="hs-identifier hs-type">MO_VS_Neg</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859433"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1692"></span><span>
</span><span id="line-1693"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VF_Insert"><span class="hs-identifier hs-type">MO_VF_Insert</span></a></span><span>  </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859433"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1694"></span><span>
</span><span id="line-1695"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_VF_Neg"><span class="hs-identifier hs-type">MO_VF_Neg</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859433"><span class="hs-identifier hs-var">panicOp</span></a></span><span>
</span><span id="line-1696"></span><span>
</span><span id="line-1697"></span><span>    </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_AlignmentCheck"><span class="hs-identifier hs-type">MO_AlignmentCheck</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859433"><span class="hs-identifier hs-var">panicOp</span></a></span><span class="hs-cpp">

#if __GLASGOW_HASKELL__ &lt; 811
</span><span>    </span><span class="hs-identifier">MO_VF_Extract</span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">panicOp</span><span>
</span><span id="line-1701"></span><span>    </span><span class="hs-identifier">MO_V_Extract</span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">panicOp</span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-1704"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-1705"></span><span>        </span><span id="local-6989586621681859434"><span class="annot"><span class="annottext">binLlvmOp :: (LlvmVar -&gt; LlvmType)
-&gt; (LlvmVar -&gt; LlvmVar -&gt; LlvmExpression) -&gt; Bool -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859434"><span class="hs-identifier hs-var hs-var">binLlvmOp</span></a></span></span><span> </span><span id="local-6989586621681859435"><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="#local-6989586621681859435"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681859436"><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="#local-6989586621681859436"><span class="hs-identifier hs-var">binOp</span></a></span></span><span> </span><span id="local-6989586621681859437"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681859437"><span class="hs-identifier hs-var">allow_y_cast</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1706"></span><span>          </span><span id="local-6989586621681859438"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859438"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM Platform
</span><a href="GHC.CmmToLlvm.Base.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-1707"></span><span>          </span><span class="annot"><span class="annottext">WriterT LlvmAccum LlvmM LlvmVar -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#runExprData"><span class="hs-identifier hs-var">runExprData</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT LlvmAccum LlvmM LlvmVar -&gt; LlvmM ExprData)
-&gt; WriterT LlvmAccum LlvmM LlvmVar -&gt; LlvmM ExprData
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1708"></span><span>            </span><span id="local-6989586621681859439"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859439"><span class="hs-identifier hs-var">vx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859381"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1709"></span><span>            </span><span id="local-6989586621681859440"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859440"><span class="hs-identifier hs-var">vy</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859382"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-1710"></span><span>
</span><span id="line-1711"></span><span>            </span><span class="hs-keyword">if</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859439"><span class="hs-identifier hs-var">vx</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859440"><span class="hs-identifier hs-var">vy</span></a></span><span>
</span><span id="line-1712"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="#local-6989586621681859435"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859439"><span class="hs-identifier hs-var">vx</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="#local-6989586621681859436"><span class="hs-identifier hs-var">binOp</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859439"><span class="hs-identifier hs-var">vx</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859440"><span class="hs-identifier hs-var">vy</span></a></span><span>
</span><span id="line-1713"></span><span>
</span><span id="line-1714"></span><span>               </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681859437"><span class="hs-identifier hs-var">allow_y_cast</span></a></span><span>
</span><span id="line-1715"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1716"></span><span>                    </span><span id="local-6989586621681859441"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859441"><span class="hs-identifier hs-var">vy'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; [LlvmVar] -&gt; LlvmVar
forall a. String -&gt; [a] -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#singletonPanic"><span class="hs-identifier hs-var">singletonPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;binLlvmOp cast&quot;</span></span><span class="annot"><span class="annottext">([LlvmVar] -&gt; LlvmVar)
-&gt; WriterT LlvmAccum LlvmM [LlvmVar]
-&gt; WriterT LlvmAccum LlvmM LlvmVar
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/Data.Functor.html#%3C%24%3E/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span>
</span><span id="line-1717"></span><span>                            </span><span class="annot"><span class="annottext">Signage
-&gt; [(LlvmVar, LlvmType)] -&gt; WriterT LlvmAccum LlvmM [LlvmVar]
</span><a href="GHC.CmmToLlvm.CodeGen.html#castVarsW"><span class="hs-identifier hs-var">castVarsW</span></a></span><span> </span><span class="annot"><span class="annottext">Signage
</span><a href="GHC.CmmToLlvm.CodeGen.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859440"><span class="hs-identifier hs-var">vy</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="#local-6989586621681859435"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859439"><span class="hs-identifier hs-var">vx</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1718"></span><span>                    </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="#local-6989586621681859435"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859439"><span class="hs-identifier hs-var">vx</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="#local-6989586621681859436"><span class="hs-identifier hs-var">binOp</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859439"><span class="hs-identifier hs-var">vx</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859441"><span class="hs-identifier hs-var">vy'</span></a></span><span>
</span><span id="line-1719"></span><span>
</span><span id="line-1720"></span><span>               </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1721"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;binLlvmOp types&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; CmmExpr -&gt; SDoc
forall env a. OutputableP env a =&gt; env -&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pdoc"><span class="hs-identifier hs-var">pdoc</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859438"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859381"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; CmmExpr -&gt; SDoc
forall env a. OutputableP env a =&gt; env -&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pdoc"><span class="hs-identifier hs-var">pdoc</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859438"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859382"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1722"></span><span>
</span><span id="line-1723"></span><span>        </span><span id="local-6989586621681859442"><span class="annot"><span class="annottext">binCastLlvmOp :: LlvmType
-&gt; (LlvmVar -&gt; LlvmVar -&gt; LlvmExpression) -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859442"><span class="hs-identifier hs-var hs-var">binCastLlvmOp</span></a></span></span><span> </span><span id="local-6989586621681859443"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859443"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681859444"><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="#local-6989586621681859444"><span class="hs-identifier hs-var">binOp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WriterT LlvmAccum LlvmM LlvmVar -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#runExprData"><span class="hs-identifier hs-var">runExprData</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT LlvmAccum LlvmM LlvmVar -&gt; LlvmM ExprData)
-&gt; WriterT LlvmAccum LlvmM LlvmVar -&gt; LlvmM ExprData
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1724"></span><span>            </span><span id="local-6989586621681859445"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859445"><span class="hs-identifier hs-var">vx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859381"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1725"></span><span>            </span><span id="local-6989586621681859446"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859446"><span class="hs-identifier hs-var">vy</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859382"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-1726"></span><span>            </span><span id="local-6989586621681859447"><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681859447"><span class="hs-identifier hs-var">vxy'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Signage
-&gt; [(LlvmVar, LlvmType)] -&gt; WriterT LlvmAccum LlvmM [LlvmVar]
</span><a href="GHC.CmmToLlvm.CodeGen.html#castVarsW"><span class="hs-identifier hs-var">castVarsW</span></a></span><span> </span><span class="annot"><span class="annottext">Signage
</span><a href="GHC.CmmToLlvm.CodeGen.html#Signed"><span class="hs-identifier hs-var">Signed</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859445"><span class="hs-identifier hs-var">vx</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859443"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859446"><span class="hs-identifier hs-var">vy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859443"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1727"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[LlvmVar]
</span><a href="#local-6989586621681859447"><span class="hs-identifier hs-var">vxy'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1728"></span><span>              </span><span class="hs-special">[</span><span id="local-6989586621681859448"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859448"><span class="hs-identifier hs-var">vx'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681859449"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859449"><span class="hs-identifier hs-var">vy'</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859443"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="#local-6989586621681859444"><span class="hs-identifier hs-var">binOp</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859448"><span class="hs-identifier hs-var">vx'</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859449"><span class="hs-identifier hs-var">vy'</span></a></span><span>
</span><span id="line-1729"></span><span>              </span><span class="annot"><span class="annottext">[LlvmVar]
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genMachOp_slow: binCastLlvmOp&quot;</span></span><span>
</span><span id="line-1730"></span><span>
</span><span id="line-1731"></span><span>        </span><span class="hs-comment">-- Need to use EOption here as Cmm expects word size results from</span><span>
</span><span id="line-1732"></span><span>        </span><span class="hs-comment">-- comparisons while LLVM return i1. Need to extend to llvmWord type</span><span>
</span><span id="line-1733"></span><span>        </span><span class="hs-comment">-- if expected. See Note [Literals and branch conditions].</span><span>
</span><span id="line-1734"></span><span>        </span><span id="local-6989586621681859383"><span class="annot"><span class="annottext">genBinComp :: EOption -&gt; LlvmCmpOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859383"><span class="hs-identifier hs-var hs-var">genBinComp</span></a></span></span><span> </span><span id="local-6989586621681859450"><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859450"><span class="hs-identifier hs-var">opt</span></a></span></span><span> </span><span id="local-6989586621681859451"><span class="annot"><span class="annottext">LlvmCmpOp
</span><a href="#local-6989586621681859451"><span class="hs-identifier hs-var">cmp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1735"></span><span>            </span><span id="local-6989586621681859452"><span class="annot"><span class="annottext">ed :: ExprData
</span><a href="#local-6989586621681859452"><span class="hs-identifier hs-var">ed</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span id="local-6989586621681859453"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859453"><span class="hs-identifier hs-var">v1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859454"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859454"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859455"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859455"><span class="hs-identifier hs-var">top</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(LlvmVar -&gt; LlvmType)
-&gt; (LlvmVar -&gt; LlvmVar -&gt; LlvmExpression) -&gt; Bool -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859434"><span class="hs-identifier hs-var">binLlvmOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmVar -&gt; LlvmType
forall a b. a -&gt; b -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#const/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#i1"><span class="hs-identifier hs-var">i1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmCmpOp -&gt; LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Compare"><span class="hs-identifier hs-var">Compare</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCmpOp
</span><a href="#local-6989586621681859451"><span class="hs-identifier hs-var">cmp</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1736"></span><span>            </span><span id="local-6989586621681859456"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859456"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM Platform
</span><a href="GHC.CmmToLlvm.Base.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-1737"></span><span>            </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859453"><span class="hs-identifier hs-var">v1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#i1"><span class="hs-identifier hs-var">i1</span></a></span><span>
</span><span id="line-1738"></span><span>                </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">EOption -&gt; Bool
</span><a href="GHC.CmmToLlvm.CodeGen.html#i1Expected"><span class="hs-identifier hs-var">i1Expected</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859450"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1739"></span><span>                    </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ExprData -&gt; LlvmM ExprData
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">ExprData
</span><a href="#local-6989586621681859452"><span class="hs-identifier hs-var">ed</span></a></span><span>
</span><span id="line-1740"></span><span>                    </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1741"></span><span>                        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859457"><span class="annot"><span class="annottext">w_ :: LlvmType
</span><a href="#local-6989586621681859457"><span class="hs-identifier hs-var hs-var">w_</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#llvmWord"><span class="hs-identifier hs-var">llvmWord</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859456"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-1742"></span><span>                        </span><span class="hs-special">(</span><span id="local-6989586621681859458"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859458"><span class="hs-identifier hs-var">v2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859459"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859459"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859457"><span class="hs-identifier hs-var">w_</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Zext"><span class="hs-identifier hs-var">LM_Zext</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859453"><span class="hs-identifier hs-var">v1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859457"><span class="hs-identifier hs-var">w_</span></a></span><span>
</span><span id="line-1743"></span><span>                        </span><span class="annot"><span class="annottext">ExprData -&gt; LlvmM ExprData
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859458"><span class="hs-identifier hs-var">v2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859454"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859459"><span class="hs-identifier hs-var">s1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859455"><span class="hs-identifier hs-var">top</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1744"></span><span>                </span><span class="hs-keyword">else</span><span>
</span><span id="line-1745"></span><span>                    </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; LlvmM ExprData
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genBinComp: Compare returned type other then i1! &quot;</span></span><span>
</span><span id="line-1746"></span><span>                               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmType -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmType -&gt; SDoc) -&gt; LlvmType -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859453"><span class="hs-identifier hs-var">v1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1747"></span><span>
</span><span id="line-1748"></span><span>        </span><span id="local-6989586621681859393"><span class="annot"><span class="annottext">genBinMach :: LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859393"><span class="hs-identifier hs-var hs-var">genBinMach</span></a></span></span><span> </span><span id="local-6989586621681859460"><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="#local-6989586621681859460"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LlvmVar -&gt; LlvmType)
-&gt; (LlvmVar -&gt; LlvmVar -&gt; LlvmExpression) -&gt; Bool -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859434"><span class="hs-identifier hs-var">binLlvmOp</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#LlvmOp"><span class="hs-identifier hs-var">LlvmOp</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="#local-6989586621681859460"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1749"></span><span>
</span><span id="line-1750"></span><span>        </span><span id="local-6989586621681859409"><span class="annot"><span class="annottext">genBinCastYMach :: LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859409"><span class="hs-identifier hs-var hs-var">genBinCastYMach</span></a></span></span><span> </span><span id="local-6989586621681859461"><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="#local-6989586621681859461"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LlvmVar -&gt; LlvmType)
-&gt; (LlvmVar -&gt; LlvmVar -&gt; LlvmExpression) -&gt; Bool -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859434"><span class="hs-identifier hs-var">binLlvmOp</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#LlvmOp"><span class="hs-identifier hs-var">LlvmOp</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="#local-6989586621681859461"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1751"></span><span>
</span><span id="line-1752"></span><span>        </span><span id="local-6989586621681859412"><span class="annot"><span class="annottext">genCastBinMach :: LlvmType -&gt; LlvmMachOp -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859412"><span class="hs-identifier hs-var hs-var">genCastBinMach</span></a></span></span><span> </span><span id="local-6989586621681859462"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859462"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681859463"><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="#local-6989586621681859463"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmType
-&gt; (LlvmVar -&gt; LlvmVar -&gt; LlvmExpression) -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859442"><span class="hs-identifier hs-var">binCastLlvmOp</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859462"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#LlvmOp"><span class="hs-identifier hs-var">LlvmOp</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="#local-6989586621681859463"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1753"></span><span>
</span><span id="line-1754"></span><span>        </span><span class="hs-comment">-- Detect if overflow will occur in signed multiply of the two</span><span>
</span><span id="line-1755"></span><span>        </span><span class="hs-comment">-- CmmExpr's. This is the LLVM assembly equivalent of the NCG</span><span>
</span><span id="line-1756"></span><span>        </span><span class="hs-comment">-- implementation. Its much longer due to type information/safety.</span><span>
</span><span id="line-1757"></span><span>        </span><span class="hs-comment">-- This should actually compile to only about 3 asm instructions.</span><span>
</span><span id="line-1758"></span><span>        </span><span class="annot"><a href="#local-6989586621681859396"><span class="hs-identifier hs-type">isSMulOK</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#ExprData"><span class="hs-identifier hs-type">ExprData</span></a></span><span>
</span><span id="line-1759"></span><span>        </span><span id="local-6989586621681859396"><span class="annot"><span class="annottext">isSMulOK :: Width -&gt; CmmExpr -&gt; CmmExpr -&gt; LlvmM ExprData
</span><a href="#local-6989586621681859396"><span class="hs-identifier hs-var hs-var">isSMulOK</span></a></span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681859464"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859464"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681859465"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859465"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1760"></span><span>          </span><span id="local-6989586621681859466"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859466"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM Platform
</span><a href="GHC.CmmToLlvm.Base.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-1761"></span><span>          </span><span class="annot"><span class="annottext">WriterT LlvmAccum LlvmM LlvmVar -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#runExprData"><span class="hs-identifier hs-var">runExprData</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT LlvmAccum LlvmM LlvmVar -&gt; LlvmM ExprData)
-&gt; WriterT LlvmAccum LlvmM LlvmVar -&gt; LlvmM ExprData
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1762"></span><span>            </span><span id="local-6989586621681859467"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859467"><span class="hs-identifier hs-var">vx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859464"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1763"></span><span>            </span><span id="local-6989586621681859468"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859468"><span class="hs-identifier hs-var">vy</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859465"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-1764"></span><span>
</span><span id="line-1765"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859469"><span class="annot"><span class="annottext">word :: LlvmType
</span><a href="#local-6989586621681859469"><span class="hs-identifier hs-var hs-var">word</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859467"><span class="hs-identifier hs-var">vx</span></a></span><span>
</span><span id="line-1766"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859470"><span class="annot"><span class="annottext">word2 :: LlvmType
</span><a href="#local-6989586621681859470"><span class="hs-identifier hs-var hs-var">word2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#LMInt"><span class="hs-identifier hs-var">LMInt</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; LlvmType) -&gt; Int -&gt; LlvmType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2A/GHC.Num.html#%2A"><span class="hs-operator hs-var">*</span></a></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; LlvmType -&gt; Int
</span><a href="GHC.Llvm.Types.html#llvmWidthInBits"><span class="hs-identifier hs-var">llvmWidthInBits</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859466"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859467"><span class="hs-identifier hs-var">vx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1767"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859471"><span class="annot"><span class="annottext">shift :: Int
</span><a href="#local-6989586621681859471"><span class="hs-identifier hs-var hs-var">shift</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; LlvmType -&gt; Int
</span><a href="GHC.Llvm.Types.html#llvmWidthInBits"><span class="hs-identifier hs-var">llvmWidthInBits</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859466"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859469"><span class="hs-identifier hs-var">word</span></a></span><span>
</span><span id="line-1768"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859472"><span class="annot"><span class="annottext">shift1 :: LlvmVar
</span><a href="#local-6989586621681859472"><span class="hs-identifier hs-var hs-var">shift1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Int -&gt; LlvmVar
forall a. Integral a =&gt; Platform -&gt; a -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#toIWord"><span class="hs-identifier hs-var">toIWord</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859466"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859471"><span class="hs-identifier hs-var">shift</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#-/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-1769"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859474"><span class="annot"><span class="annottext">shift2 :: LlvmVar
</span><a href="#local-6989586621681859474"><span class="hs-identifier hs-var hs-var">shift2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Int -&gt; LlvmVar
forall a. Integral a =&gt; Platform -&gt; a -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#toIWord"><span class="hs-identifier hs-var">toIWord</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859466"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859471"><span class="hs-identifier hs-var">shift</span></a></span><span>
</span><span id="line-1770"></span><span>
</span><span id="line-1771"></span><span>            </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isInt"><span class="hs-identifier hs-var">isInt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859469"><span class="hs-identifier hs-var">word</span></a></span><span>
</span><span id="line-1772"></span><span>                </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1773"></span><span>                    </span><span id="local-6989586621681859475"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859475"><span class="hs-identifier hs-var">x1</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859470"><span class="hs-identifier hs-var">word2</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Sext"><span class="hs-identifier hs-var">LM_Sext</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859467"><span class="hs-identifier hs-var">vx</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859470"><span class="hs-identifier hs-var">word2</span></a></span><span>
</span><span id="line-1774"></span><span>                    </span><span id="local-6989586621681859476"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859476"><span class="hs-identifier hs-var">y1</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859470"><span class="hs-identifier hs-var">word2</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Sext"><span class="hs-identifier hs-var">LM_Sext</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859468"><span class="hs-identifier hs-var">vy</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859470"><span class="hs-identifier hs-var">word2</span></a></span><span>
</span><span id="line-1775"></span><span>                    </span><span id="local-6989586621681859477"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859477"><span class="hs-identifier hs-var">r1</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859470"><span class="hs-identifier hs-var">word2</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#LlvmOp"><span class="hs-identifier hs-var">LlvmOp</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_Mul"><span class="hs-identifier hs-var">LM_MO_Mul</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859475"><span class="hs-identifier hs-var">x1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859476"><span class="hs-identifier hs-var">y1</span></a></span><span>
</span><span id="line-1776"></span><span>                    </span><span id="local-6989586621681859478"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859478"><span class="hs-identifier hs-var">rlow1</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859469"><span class="hs-identifier hs-var">word</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Trunc"><span class="hs-identifier hs-var">LM_Trunc</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859477"><span class="hs-identifier hs-var">r1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859469"><span class="hs-identifier hs-var">word</span></a></span><span>
</span><span id="line-1777"></span><span>                    </span><span id="local-6989586621681859479"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859479"><span class="hs-identifier hs-var">rlow2</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859469"><span class="hs-identifier hs-var">word</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#LlvmOp"><span class="hs-identifier hs-var">LlvmOp</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_AShr"><span class="hs-identifier hs-var">LM_MO_AShr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859478"><span class="hs-identifier hs-var">rlow1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859472"><span class="hs-identifier hs-var">shift1</span></a></span><span>
</span><span id="line-1778"></span><span>                    </span><span id="local-6989586621681859480"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859480"><span class="hs-identifier hs-var">rhigh1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859470"><span class="hs-identifier hs-var">word2</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#LlvmOp"><span class="hs-identifier hs-var">LlvmOp</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_AShr"><span class="hs-identifier hs-var">LM_MO_AShr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859477"><span class="hs-identifier hs-var">r1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859474"><span class="hs-identifier hs-var">shift2</span></a></span><span>
</span><span id="line-1779"></span><span>                    </span><span id="local-6989586621681859481"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859481"><span class="hs-identifier hs-var">rhigh2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859469"><span class="hs-identifier hs-var">word</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Trunc"><span class="hs-identifier hs-var">LM_Trunc</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859480"><span class="hs-identifier hs-var">rhigh1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859469"><span class="hs-identifier hs-var">word</span></a></span><span>
</span><span id="line-1780"></span><span>                    </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859469"><span class="hs-identifier hs-var">word</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#LlvmOp"><span class="hs-identifier hs-var">LlvmOp</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_Sub"><span class="hs-identifier hs-var">LM_MO_Sub</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859479"><span class="hs-identifier hs-var">rlow2</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859481"><span class="hs-identifier hs-var">rhigh2</span></a></span><span>
</span><span id="line-1781"></span><span>
</span><span id="line-1782"></span><span>                </span><span class="hs-keyword">else</span><span>
</span><span id="line-1783"></span><span>                    </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;isSMulOK: Not bit type! &quot;</span></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; SDoc -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1784"></span><span>                        </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#lparen"><span class="hs-identifier hs-var">lparen</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859469"><span class="hs-identifier hs-var">word</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#rparen"><span class="hs-identifier hs-var">rparen</span></a></span><span>
</span><span id="line-1785"></span><span>
</span><span id="line-1786"></span><span>        </span><span id="local-6989586621681859433"><span class="annot"><span class="annottext">panicOp :: LlvmM ExprData
</span><a href="#local-6989586621681859433"><span class="hs-identifier hs-var hs-var">panicOp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; LlvmM ExprData
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; LlvmM ExprData) -&gt; String -&gt; LlvmM ExprData
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;LLVM.CodeGen.genMachOp_slow: unary op encountered&quot;</span></span><span>
</span><span id="line-1787"></span><span>                       </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;with two arguments! (&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">MachOp -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../base-4.18.3.0/src/GHC.Show.html#show/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">MachOp
</span><a href="#local-6989586621681859380"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;)&quot;</span></span><span>
</span><span id="line-1788"></span><span>
</span><span id="line-1789"></span><span class="hs-comment">-- More than two expression, invalid!</span><span>
</span><span id="line-1790"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genMachOp_slow"><span class="hs-identifier hs-var">genMachOp_slow</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">MachOp
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; LlvmM ExprData
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genMachOp: More than 2 expressions in MachOp!&quot;</span></span><span>
</span><span id="line-1791"></span><span>
</span><span id="line-1792"></span><span>
</span><span id="line-1793"></span><span class="annot"><span class="hs-comment">-- | Handle CmmLoad expression.</span></span><span>
</span><span id="line-1794"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genLoad"><span class="hs-identifier hs-type">genLoad</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#Atomic"><span class="hs-identifier hs-type">Atomic</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#AlignmentSpec"><span class="hs-identifier hs-type">AlignmentSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#ExprData"><span class="hs-identifier hs-type">ExprData</span></a></span><span>
</span><span id="line-1795"></span><span>
</span><span id="line-1796"></span><span class="hs-comment">-- First we try to detect a few common cases and produce better code for</span><span>
</span><span id="line-1797"></span><span class="hs-comment">-- these then the default case. We are mostly trying to detect Cmm code</span><span>
</span><span id="line-1798"></span><span class="hs-comment">-- like I32[Sp + n] and use 'getelementptr' operations instead of the</span><span>
</span><span id="line-1799"></span><span class="hs-comment">-- generic case that uses casts and pointer arithmetic</span><span>
</span><span id="line-1800"></span><span id="genLoad"><span class="annot"><span class="annottext">genLoad :: Atomic -&gt; CmmExpr -&gt; CmmType -&gt; AlignmentSpec -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#genLoad"><span class="hs-identifier hs-var hs-var">genLoad</span></a></span></span><span> </span><span id="local-6989586621681859482"><span class="annot"><span class="annottext">Atomic
</span><a href="#local-6989586621681859482"><span class="hs-identifier hs-var">atomic</span></a></span></span><span> </span><span id="local-6989586621681859483"><span class="annot"><span class="annottext">e :: CmmExpr
</span><a href="#local-6989586621681859483"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmReg"><span class="hs-identifier hs-type">CmmReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmGlobal"><span class="hs-identifier hs-type">CmmGlobal</span></a></span><span> </span><span id="local-6989586621681859484"><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859484"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681859485"><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621681859485"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681859486"><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859486"><span class="hs-identifier hs-var">align</span></a></span></span><span>
</span><span id="line-1801"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Atomic
-&gt; CmmExpr
-&gt; GlobalReg
-&gt; Int
-&gt; CmmType
-&gt; AlignmentSpec
-&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#genLoad_fast"><span class="hs-identifier hs-var">genLoad_fast</span></a></span><span> </span><span class="annot"><span class="annottext">Atomic
</span><a href="#local-6989586621681859482"><span class="hs-identifier hs-var">atomic</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859483"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859484"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621681859485"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859486"><span class="hs-identifier hs-var">align</span></a></span><span>
</span><span id="line-1802"></span><span>
</span><span id="line-1803"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genLoad"><span class="hs-identifier hs-var">genLoad</span></a></span><span> </span><span id="local-6989586621681859488"><span class="annot"><span class="annottext">Atomic
</span><a href="#local-6989586621681859488"><span class="hs-identifier hs-var">atomic</span></a></span></span><span> </span><span id="local-6989586621681859489"><span class="annot"><span class="annottext">e :: CmmExpr
</span><a href="#local-6989586621681859489"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmRegOff"><span class="hs-identifier hs-type">CmmRegOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmGlobal"><span class="hs-identifier hs-type">CmmGlobal</span></a></span><span> </span><span id="local-6989586621681859490"><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859490"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681859491"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859491"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681859492"><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621681859492"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681859493"><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859493"><span class="hs-identifier hs-var">align</span></a></span></span><span>
</span><span id="line-1804"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Atomic
-&gt; CmmExpr
-&gt; GlobalReg
-&gt; Int
-&gt; CmmType
-&gt; AlignmentSpec
-&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#genLoad_fast"><span class="hs-identifier hs-var">genLoad_fast</span></a></span><span> </span><span class="annot"><span class="annottext">Atomic
</span><a href="#local-6989586621681859488"><span class="hs-identifier hs-var">atomic</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859489"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859490"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859491"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621681859492"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859493"><span class="hs-identifier hs-var">align</span></a></span><span>
</span><span id="line-1805"></span><span>
</span><span id="line-1806"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genLoad"><span class="hs-identifier hs-var">genLoad</span></a></span><span> </span><span id="local-6989586621681859494"><span class="annot"><span class="annottext">Atomic
</span><a href="#local-6989586621681859494"><span class="hs-identifier hs-var">atomic</span></a></span></span><span> </span><span id="local-6989586621681859495"><span class="annot"><span class="annottext">e :: CmmExpr
</span><a href="#local-6989586621681859495"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Add"><span class="hs-identifier hs-type">MO_Add</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-1807"></span><span>                            </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmReg"><span class="hs-identifier hs-type">CmmReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmGlobal"><span class="hs-identifier hs-type">CmmGlobal</span></a></span><span> </span><span id="local-6989586621681859496"><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859496"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1808"></span><span>                            </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-type">CmmInt</span></a></span><span> </span><span id="local-6989586621681859497"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681859497"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1809"></span><span>                </span><span id="local-6989586621681859498"><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621681859498"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681859499"><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859499"><span class="hs-identifier hs-var">align</span></a></span></span><span>
</span><span id="line-1810"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Atomic
-&gt; CmmExpr
-&gt; GlobalReg
-&gt; Int
-&gt; CmmType
-&gt; AlignmentSpec
-&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#genLoad_fast"><span class="hs-identifier hs-var">genLoad_fast</span></a></span><span> </span><span class="annot"><span class="annottext">Atomic
</span><a href="#local-6989586621681859494"><span class="hs-identifier hs-var">atomic</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859495"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859496"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Int
forall a. Num a =&gt; Integer -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#fromInteger/GHC.Num.html#fromInteger"><span class="hs-identifier hs-var">fromInteger</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681859497"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621681859498"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859499"><span class="hs-identifier hs-var">align</span></a></span><span>
</span><span id="line-1811"></span><span>
</span><span id="line-1812"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genLoad"><span class="hs-identifier hs-var">genLoad</span></a></span><span> </span><span id="local-6989586621681859500"><span class="annot"><span class="annottext">Atomic
</span><a href="#local-6989586621681859500"><span class="hs-identifier hs-var">atomic</span></a></span></span><span> </span><span id="local-6989586621681859501"><span class="annot"><span class="annottext">e :: CmmExpr
</span><a href="#local-6989586621681859501"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-type">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.MachOp.html#MO_Sub"><span class="hs-identifier hs-type">MO_Sub</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-1813"></span><span>                            </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmReg"><span class="hs-identifier hs-type">CmmReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmGlobal"><span class="hs-identifier hs-type">CmmGlobal</span></a></span><span> </span><span id="local-6989586621681859502"><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859502"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1814"></span><span>                            </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-type">CmmInt</span></a></span><span> </span><span id="local-6989586621681859503"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681859503"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1815"></span><span>                </span><span id="local-6989586621681859504"><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621681859504"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681859505"><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859505"><span class="hs-identifier hs-var">align</span></a></span></span><span>
</span><span id="line-1816"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Atomic
-&gt; CmmExpr
-&gt; GlobalReg
-&gt; Int
-&gt; CmmType
-&gt; AlignmentSpec
-&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#genLoad_fast"><span class="hs-identifier hs-var">genLoad_fast</span></a></span><span> </span><span class="annot"><span class="annottext">Atomic
</span><a href="#local-6989586621681859500"><span class="hs-identifier hs-var">atomic</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859501"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859502"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int
forall a. Num a =&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#negate/GHC.Num.html#negate"><span class="hs-identifier hs-var">negate</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Int) -&gt; Int -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Int
forall a. Num a =&gt; Integer -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#fromInteger/GHC.Num.html#fromInteger"><span class="hs-identifier hs-var">fromInteger</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681859503"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621681859504"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859505"><span class="hs-identifier hs-var">align</span></a></span><span>
</span><span id="line-1817"></span><span>
</span><span id="line-1818"></span><span class="hs-comment">-- generic case</span><span>
</span><span id="line-1819"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genLoad"><span class="hs-identifier hs-var">genLoad</span></a></span><span> </span><span id="local-6989586621681859506"><span class="annot"><span class="annottext">Atomic
</span><a href="#local-6989586621681859506"><span class="hs-identifier hs-var">atomic</span></a></span></span><span> </span><span id="local-6989586621681859507"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859507"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621681859508"><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621681859508"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681859509"><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859509"><span class="hs-identifier hs-var">align</span></a></span></span><span>
</span><span id="line-1820"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Unique -&gt; LlvmM [MetaAnnot]
</span><a href="GHC.CmmToLlvm.CodeGen.html#getTBAAMeta"><span class="hs-identifier hs-var">getTBAAMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="GHC.CmmToLlvm.Regs.html#topN"><span class="hs-identifier hs-var">topN</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmM [MetaAnnot]
-&gt; ([MetaAnnot] -&gt; LlvmM ExprData) -&gt; LlvmM ExprData
forall a b. LlvmM a -&gt; (a -&gt; LlvmM b) -&gt; LlvmM b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%3E%3E%3D/GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Atomic
-&gt; CmmExpr
-&gt; CmmType
-&gt; AlignmentSpec
-&gt; [MetaAnnot]
-&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#genLoad_slow"><span class="hs-identifier hs-var">genLoad_slow</span></a></span><span> </span><span class="annot"><span class="annottext">Atomic
</span><a href="#local-6989586621681859506"><span class="hs-identifier hs-var">atomic</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859507"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621681859508"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859509"><span class="hs-identifier hs-var">align</span></a></span><span>
</span><span id="line-1821"></span><span>
</span><span id="line-1822"></span><span class="hs-comment">-- | Handle CmmLoad expression.</span><span>
</span><span id="line-1823"></span><span class="hs-comment">-- This is a special case for loading from a global register pointer</span><span>
</span><span id="line-1824"></span><span class="hs-comment">-- offset such as I32[Sp+8].</span><span>
</span><span id="line-1825"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genLoad_fast"><span class="hs-identifier hs-type">genLoad_fast</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#Atomic"><span class="hs-identifier hs-type">Atomic</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Reg.html#GlobalReg"><span class="hs-identifier hs-type">GlobalReg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span>
</span><span id="line-1826"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#AlignmentSpec"><span class="hs-identifier hs-type">AlignmentSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#ExprData"><span class="hs-identifier hs-type">ExprData</span></a></span><span>
</span><span id="line-1827"></span><span id="genLoad_fast"><span class="annot"><span class="annottext">genLoad_fast :: Atomic
-&gt; CmmExpr
-&gt; GlobalReg
-&gt; Int
-&gt; CmmType
-&gt; AlignmentSpec
-&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#genLoad_fast"><span class="hs-identifier hs-var hs-var">genLoad_fast</span></a></span></span><span> </span><span id="local-6989586621681859511"><span class="annot"><span class="annottext">Atomic
</span><a href="#local-6989586621681859511"><span class="hs-identifier hs-var">atomic</span></a></span></span><span> </span><span id="local-6989586621681859512"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859512"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621681859513"><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859513"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681859514"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859514"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681859515"><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621681859515"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681859516"><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859516"><span class="hs-identifier hs-var">align</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1828"></span><span>    </span><span id="local-6989586621681859517"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859517"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM Platform
</span><a href="GHC.CmmToLlvm.Base.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-1829"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681859518"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859518"><span class="hs-identifier hs-var">gv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859519"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859519"><span class="hs-identifier hs-var">grt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859520"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859520"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmReg -&gt; LlvmM (LlvmVar, LlvmType, LlvmStatements)
</span><a href="GHC.CmmToLlvm.CodeGen.html#getCmmRegVal"><span class="hs-identifier hs-var">getCmmRegVal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalReg -&gt; CmmReg
</span><a href="GHC.Cmm.Reg.html#CmmGlobal"><span class="hs-identifier hs-var">CmmGlobal</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859513"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1830"></span><span>    </span><span id="local-6989586621681859521"><span class="annot"><span class="annottext">[MetaAnnot]
</span><a href="#local-6989586621681859521"><span class="hs-identifier hs-var">meta</span></a></span></span><span>          </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GlobalReg -&gt; LlvmM [MetaAnnot]
</span><a href="GHC.CmmToLlvm.CodeGen.html#getTBAARegMeta"><span class="hs-identifier hs-var">getTBAARegMeta</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859513"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-1831"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859522"><span class="annot"><span class="annottext">ty' :: LlvmType
</span><a href="#local-6989586621681859522"><span class="hs-identifier hs-var hs-var">ty'</span></a></span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#cmmToLlvmType"><span class="hs-identifier hs-var">cmmToLlvmType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621681859515"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1832"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681859523"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859523"><span class="hs-identifier hs-var">ix</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681859524"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859524"><span class="hs-identifier hs-var">rem</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859514"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; (Int, Int)
forall a. Integral a =&gt; a -&gt; a -&gt; (a, a)
</span><a href="../../base-4.18.3.0/src/GHC.Real.html#divMod/GHC.Real.html#divMod"><span class="hs-operator hs-var">`divMod`</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; LlvmType -&gt; Int
</span><a href="GHC.Llvm.Types.html#llvmWidthInBits"><span class="hs-identifier hs-var">llvmWidthInBits</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859517"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmType -&gt; Int) -&gt; (LlvmType -&gt; LlvmType) -&gt; LlvmType -&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#pLower"><span class="hs-identifier hs-var">pLower</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859519"><span class="hs-identifier hs-var">grt</span></a></span><span>  </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Real.html#div/GHC.Real.html#div"><span class="hs-operator hs-var">`div`</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span class="hs-special">)</span><span>
</span><span id="line-1833"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isPointer"><span class="hs-identifier hs-var">isPointer</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859519"><span class="hs-identifier hs-var">grt</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859524"><span class="hs-identifier hs-var">rem</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1834"></span><span>            </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1835"></span><span>                </span><span class="hs-special">(</span><span id="local-6989586621681859525"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859525"><span class="hs-identifier hs-var">ptr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859526"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859526"><span class="hs-identifier hs-var">s2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859519"><span class="hs-identifier hs-var">grt</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; LlvmVar -&gt; [LlvmVar] -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#GetElemPtr"><span class="hs-identifier hs-var">GetElemPtr</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859518"><span class="hs-identifier hs-var">gv</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int -&gt; LlvmVar
forall a. Integral a =&gt; a -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#toI32"><span class="hs-identifier hs-var">toI32</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859523"><span class="hs-identifier hs-var">ix</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1836"></span><span>                </span><span class="hs-comment">-- We might need a different pointer type, so check</span><span>
</span><span id="line-1837"></span><span>                </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859519"><span class="hs-identifier hs-var">grt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859522"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1838"></span><span>                     </span><span class="hs-comment">-- were fine</span><span>
</span><span id="line-1839"></span><span>                     </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1840"></span><span>                         </span><span class="hs-special">(</span><span id="local-6989586621681859527"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859527"><span class="hs-identifier hs-var">var</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859528"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859528"><span class="hs-identifier hs-var">s3</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859522"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[MetaAnnot] -&gt; LlvmExpression -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#MExpr"><span class="hs-identifier hs-var">MExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[MetaAnnot]
</span><a href="#local-6989586621681859521"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmExpression)
-&gt; LlvmExpression -&gt; LlvmExpression
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Atomic -&gt; LlvmVar -&gt; AlignmentSpec -&gt; LlvmExpression
</span><a href="GHC.CmmToLlvm.CodeGen.html#mkLoad"><span class="hs-identifier hs-var">mkLoad</span></a></span><span> </span><span class="annot"><span class="annottext">Atomic
</span><a href="#local-6989586621681859511"><span class="hs-identifier hs-var">atomic</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859525"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859516"><span class="hs-identifier hs-var">align</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1841"></span><span>                         </span><span class="annot"><span class="annottext">ExprData -&gt; LlvmM ExprData
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859527"><span class="hs-identifier hs-var">var</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859520"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859526"><span class="hs-identifier hs-var">s2</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859528"><span class="hs-identifier hs-var">s3</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1842"></span><span>                                     </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1843"></span><span>
</span><span id="line-1844"></span><span>                     </span><span class="hs-comment">-- cast to pointer type needed</span><span>
</span><span id="line-1845"></span><span>                     </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1846"></span><span>                         </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859531"><span class="annot"><span class="annottext">pty :: LlvmType
</span><a href="#local-6989586621681859531"><span class="hs-identifier hs-var hs-var">pty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#pLift"><span class="hs-identifier hs-var">pLift</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859522"><span class="hs-identifier hs-var">ty'</span></a></span><span>
</span><span id="line-1847"></span><span>                         </span><span class="hs-special">(</span><span id="local-6989586621681859532"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859532"><span class="hs-identifier hs-var">ptr'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859533"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859533"><span class="hs-identifier hs-var">s3</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859531"><span class="hs-identifier hs-var">pty</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Bitcast"><span class="hs-identifier hs-var">LM_Bitcast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859525"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859531"><span class="hs-identifier hs-var">pty</span></a></span><span>
</span><span id="line-1848"></span><span>                         </span><span class="hs-special">(</span><span id="local-6989586621681859534"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859534"><span class="hs-identifier hs-var">var</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859535"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859535"><span class="hs-identifier hs-var">s4</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859522"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[MetaAnnot] -&gt; LlvmExpression -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#MExpr"><span class="hs-identifier hs-var">MExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[MetaAnnot]
</span><a href="#local-6989586621681859521"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmExpression)
-&gt; LlvmExpression -&gt; LlvmExpression
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Atomic -&gt; LlvmVar -&gt; AlignmentSpec -&gt; LlvmExpression
</span><a href="GHC.CmmToLlvm.CodeGen.html#mkLoad"><span class="hs-identifier hs-var">mkLoad</span></a></span><span> </span><span class="annot"><span class="annottext">Atomic
</span><a href="#local-6989586621681859511"><span class="hs-identifier hs-var">atomic</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859532"><span class="hs-identifier hs-var">ptr'</span></a></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859516"><span class="hs-identifier hs-var">align</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1849"></span><span>                         </span><span class="annot"><span class="annottext">ExprData -&gt; LlvmM ExprData
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859534"><span class="hs-identifier hs-var">var</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859520"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859526"><span class="hs-identifier hs-var">s2</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859533"><span class="hs-identifier hs-var">s3</span></a></span><span>
</span><span id="line-1850"></span><span>                                    </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859535"><span class="hs-identifier hs-var">s4</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1851"></span><span>
</span><span id="line-1852"></span><span>            </span><span class="hs-comment">-- If its a bit type then we use the slow method since</span><span>
</span><span id="line-1853"></span><span>            </span><span class="hs-comment">-- we can't avoid casting anyway.</span><span>
</span><span id="line-1854"></span><span>            </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Atomic
-&gt; CmmExpr
-&gt; CmmType
-&gt; AlignmentSpec
-&gt; [MetaAnnot]
-&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#genLoad_slow"><span class="hs-identifier hs-var">genLoad_slow</span></a></span><span> </span><span class="annot"><span class="annottext">Atomic
</span><a href="#local-6989586621681859511"><span class="hs-identifier hs-var">atomic</span></a></span><span>  </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859512"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621681859515"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859516"><span class="hs-identifier hs-var">align</span></a></span><span> </span><span class="annot"><span class="annottext">[MetaAnnot]
</span><a href="#local-6989586621681859521"><span class="hs-identifier hs-var">meta</span></a></span><span>
</span><span id="line-1855"></span><span>
</span><span id="line-1856"></span><span class="hs-comment">-- | Handle Cmm load expression.</span><span>
</span><span id="line-1857"></span><span class="hs-comment">-- Generic case. Uses casts and pointer arithmetic if needed.</span><span>
</span><span id="line-1858"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genLoad_slow"><span class="hs-identifier hs-type">genLoad_slow</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#Atomic"><span class="hs-identifier hs-type">Atomic</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#AlignmentSpec"><span class="hs-identifier hs-type">AlignmentSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Llvm.MetaData.html#MetaAnnot"><span class="hs-identifier hs-type">MetaAnnot</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1859"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#ExprData"><span class="hs-identifier hs-type">ExprData</span></a></span><span>
</span><span id="line-1860"></span><span id="genLoad_slow"><span class="annot"><span class="annottext">genLoad_slow :: Atomic
-&gt; CmmExpr
-&gt; CmmType
-&gt; AlignmentSpec
-&gt; [MetaAnnot]
-&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#genLoad_slow"><span class="hs-identifier hs-var hs-var">genLoad_slow</span></a></span></span><span> </span><span id="local-6989586621681859536"><span class="annot"><span class="annottext">Atomic
</span><a href="#local-6989586621681859536"><span class="hs-identifier hs-var">atomic</span></a></span></span><span> </span><span id="local-6989586621681859537"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859537"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621681859538"><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621681859538"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681859539"><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859539"><span class="hs-identifier hs-var">align</span></a></span></span><span> </span><span id="local-6989586621681859540"><span class="annot"><span class="annottext">[MetaAnnot]
</span><a href="#local-6989586621681859540"><span class="hs-identifier hs-var">meta</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1861"></span><span>  </span><span id="local-6989586621681859541"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859541"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM Platform
</span><a href="GHC.CmmToLlvm.Base.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-1862"></span><span>  </span><span id="local-6989586621681859542"><span class="annot"><span class="annottext">LlvmCgConfig
</span><a href="#local-6989586621681859542"><span class="hs-identifier hs-var">cfg</span></a></span></span><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM LlvmCgConfig
</span><a href="GHC.CmmToLlvm.Base.html#getConfig"><span class="hs-identifier hs-var">getConfig</span></a></span><span>
</span><span id="line-1863"></span><span>  </span><span class="annot"><span class="annottext">WriterT LlvmAccum LlvmM LlvmVar -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#runExprData"><span class="hs-identifier hs-var">runExprData</span></a></span><span> </span><span class="annot"><span class="annottext">(WriterT LlvmAccum LlvmM LlvmVar -&gt; LlvmM ExprData)
-&gt; WriterT LlvmAccum LlvmM LlvmVar -&gt; LlvmM ExprData
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1864"></span><span>    </span><span id="local-6989586621681859543"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859543"><span class="hs-identifier hs-var">iptr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var">exprToVarW</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859537"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1865"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859543"><span class="hs-identifier hs-var">iptr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1866"></span><span>        </span><span class="annot"><a href="GHC.Llvm.Types.html#LMPointer"><span class="hs-identifier hs-type">LMPointer</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1867"></span><span>                    </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmType -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#cmmToLlvmType"><span class="hs-identifier hs-var">cmmToLlvmType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621681859538"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[MetaAnnot] -&gt; LlvmExpression -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#MExpr"><span class="hs-identifier hs-var">MExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[MetaAnnot]
</span><a href="#local-6989586621681859540"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmExpression)
-&gt; LlvmExpression -&gt; LlvmExpression
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Atomic -&gt; LlvmVar -&gt; AlignmentSpec -&gt; LlvmExpression
</span><a href="GHC.CmmToLlvm.CodeGen.html#mkLoad"><span class="hs-identifier hs-var">mkLoad</span></a></span><span> </span><span class="annot"><span class="annottext">Atomic
</span><a href="#local-6989586621681859536"><span class="hs-identifier hs-var">atomic</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859543"><span class="hs-identifier hs-var">iptr</span></a></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859539"><span class="hs-identifier hs-var">align</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1868"></span><span>
</span><span id="line-1869"></span><span>        </span><span id="local-6989586621681859544"><span class="annot"><span class="annottext">i :: LlvmType
</span><a href="#local-6989586621681859544"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Llvm.Types.html#LMInt"><span class="hs-identifier hs-type">LMInt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859544"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#llvmWord"><span class="hs-identifier hs-var">llvmWord</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859541"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1870"></span><span>                    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859545"><span class="annot"><span class="annottext">pty :: LlvmType
</span><a href="#local-6989586621681859545"><span class="hs-identifier hs-var hs-var">pty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#LMPointer"><span class="hs-identifier hs-var">LMPointer</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmType -&gt; LlvmType) -&gt; LlvmType -&gt; LlvmType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#cmmToLlvmType"><span class="hs-identifier hs-var">cmmToLlvmType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621681859538"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1871"></span><span>                    </span><span id="local-6989586621681859546"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859546"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859545"><span class="hs-identifier hs-var">pty</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Inttoptr"><span class="hs-identifier hs-var">LM_Inttoptr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859543"><span class="hs-identifier hs-var">iptr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859545"><span class="hs-identifier hs-var">pty</span></a></span><span>
</span><span id="line-1872"></span><span>                    </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var">doExprW</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmType -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#cmmToLlvmType"><span class="hs-identifier hs-var">cmmToLlvmType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621681859538"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[MetaAnnot] -&gt; LlvmExpression -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#MExpr"><span class="hs-identifier hs-var">MExpr</span></a></span><span> </span><span class="annot"><span class="annottext">[MetaAnnot]
</span><a href="#local-6989586621681859540"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmExpression)
-&gt; LlvmExpression -&gt; LlvmExpression
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Atomic -&gt; LlvmVar -&gt; AlignmentSpec -&gt; LlvmExpression
</span><a href="GHC.CmmToLlvm.CodeGen.html#mkLoad"><span class="hs-identifier hs-var">mkLoad</span></a></span><span> </span><span class="annot"><span class="annottext">Atomic
</span><a href="#local-6989586621681859536"><span class="hs-identifier hs-var">atomic</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859546"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859539"><span class="hs-identifier hs-var">align</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1873"></span><span>
</span><span id="line-1874"></span><span>        </span><span id="local-6989586621681859547"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859547"><span class="hs-identifier hs-var">other</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;exprToVar: CmmLoad expression is not right type!&quot;</span></span><span>
</span><span id="line-1875"></span><span>                     </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; CmmExpr -&gt; SDoc
forall env a. OutputableP env a =&gt; env -&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pdoc"><span class="hs-identifier hs-var">pdoc</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859541"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859537"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-1876"></span><span>                      </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Size of Ptr:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; Int
</span><a href="GHC.CmmToLlvm.Base.html#llvmPtrBits"><span class="hs-identifier hs-var">llvmPtrBits</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859541"><span class="hs-identifier hs-var">platform</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-1877"></span><span>                      </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Size of var:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; LlvmType -&gt; Int
</span><a href="GHC.Llvm.Types.html#llvmWidthInBits"><span class="hs-identifier hs-var">llvmWidthInBits</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859541"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859547"><span class="hs-identifier hs-var">other</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-1878"></span><span>                      </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Var:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmCgConfig -&gt; LlvmVar -&gt; SDoc
</span><a href="GHC.Llvm.Ppr.html#ppVar"><span class="hs-identifier hs-var">ppVar</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCgConfig
</span><a href="#local-6989586621681859542"><span class="hs-identifier hs-var">cfg</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859543"><span class="hs-identifier hs-var">iptr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1879"></span><span>
</span><span id="line-1880"></span><span class="hs-comment">{-
Note [Alignment of vector-typed values]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
On x86, vector types need to be 16-byte aligned for aligned
access, but we have no way of guaranteeing that this is true with GHC
(we would need to modify the layout of the stack and closures, change
the storage manager, etc.). So, we blindly tell LLVM that *any* vector
store or load could be unaligned. In the future we may be able to
guarantee that certain vector access patterns are aligned, in which
case we will need a more granular way of specifying alignment.
-}</span><span>
</span><span id="line-1891"></span><span>
</span><span id="line-1892"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#mkLoad"><span class="hs-identifier hs-type">mkLoad</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#Atomic"><span class="hs-identifier hs-type">Atomic</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#AlignmentSpec"><span class="hs-identifier hs-type">AlignmentSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Llvm.Syntax.html#LlvmExpression"><span class="hs-identifier hs-type">LlvmExpression</span></a></span><span>
</span><span id="line-1893"></span><span id="mkLoad"><span class="annot"><span class="annottext">mkLoad :: Atomic -&gt; LlvmVar -&gt; AlignmentSpec -&gt; LlvmExpression
</span><a href="GHC.CmmToLlvm.CodeGen.html#mkLoad"><span class="hs-identifier hs-var hs-var">mkLoad</span></a></span></span><span> </span><span id="local-6989586621681859548"><span class="annot"><span class="annottext">Atomic
</span><a href="#local-6989586621681859548"><span class="hs-identifier hs-var">atomic</span></a></span></span><span> </span><span id="local-6989586621681859549"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859549"><span class="hs-identifier hs-var">vptr</span></a></span></span><span> </span><span id="local-6989586621681859550"><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859550"><span class="hs-identifier hs-var">alignment</span></a></span></span><span>
</span><span id="line-1894"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681859551"><span class="annot"><span class="annottext">MemoryOrdering
</span><a href="#local-6989586621681859551"><span class="hs-identifier hs-var">mem_ord</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Atomic
</span><a href="#local-6989586621681859548"><span class="hs-identifier hs-var">atomic</span></a></span><span>
</span><span id="line-1895"></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmSyncOrdering -&gt; Bool -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#ALoad"><span class="hs-identifier hs-var">ALoad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MemoryOrdering -&gt; LlvmSyncOrdering
</span><a href="GHC.CmmToLlvm.CodeGen.html#convertMemoryOrdering"><span class="hs-identifier hs-var">convertMemoryOrdering</span></a></span><span> </span><span class="annot"><span class="annottext">MemoryOrdering
</span><a href="#local-6989586621681859551"><span class="hs-identifier hs-var">mem_ord</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859549"><span class="hs-identifier hs-var">vptr</span></a></span><span>
</span><span id="line-1896"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LMAlign -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Load"><span class="hs-identifier hs-var">Load</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859549"><span class="hs-identifier hs-var">vptr</span></a></span><span> </span><span class="annot"><span class="annottext">LMAlign
</span><a href="#local-6989586621681859554"><span class="hs-identifier hs-var">align</span></a></span><span>
</span><span id="line-1897"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1898"></span><span>    </span><span id="local-6989586621681859555"><span class="annot"><span class="annottext">ty :: LlvmType
</span><a href="#local-6989586621681859555"><span class="hs-identifier hs-var hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#pLower"><span class="hs-identifier hs-var">pLower</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859549"><span class="hs-identifier hs-var">vptr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1899"></span><span>    </span><span id="local-6989586621681859554"><span class="annot"><span class="annottext">align :: LMAlign
</span><a href="#local-6989586621681859554"><span class="hs-identifier hs-var hs-var">align</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859550"><span class="hs-identifier hs-var">alignment</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1900"></span><span>              </span><span class="hs-comment">-- See Note [Alignment of vector-typed values]</span><span>
</span><span id="line-1901"></span><span>              </span><span class="annot"><span class="annottext">AlignmentSpec
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isVector"><span class="hs-identifier hs-var">isVector</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859555"><span class="hs-identifier hs-var">ty</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; LMAlign
forall a. a -&gt; Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1902"></span><span>              </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="GHC.Cmm.Expr.html#Unaligned"><span class="hs-identifier hs-var">Unaligned</span></a></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; LMAlign
forall a. a -&gt; Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1903"></span><span>              </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="GHC.Cmm.Expr.html#NaturallyAligned"><span class="hs-identifier hs-var">NaturallyAligned</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LMAlign
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1904"></span><span>
</span><span id="line-1905"></span><span class="hs-comment">-- | Handle CmmReg expression. This will return a pointer to the stack</span><span>
</span><span id="line-1906"></span><span class="hs-comment">-- location of the register. Throws an error if it isn't allocated on</span><span>
</span><span id="line-1907"></span><span class="hs-comment">-- the stack.</span><span>
</span><span id="line-1908"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#getCmmReg"><span class="hs-identifier hs-type">getCmmReg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmReg"><span class="hs-identifier hs-type">CmmReg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span>
</span><span id="line-1909"></span><span id="getCmmReg"><span class="annot"><span class="annottext">getCmmReg :: CmmReg -&gt; LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#getCmmReg"><span class="hs-identifier hs-var hs-var">getCmmReg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmLocal"><span class="hs-identifier hs-type">CmmLocal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Reg.html#LocalReg"><span class="hs-identifier hs-type">LocalReg</span></a></span><span> </span><span id="local-6989586621681859557"><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621681859557"><span class="hs-identifier hs-var">un</span></a></span></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1910"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681859558"><span class="annot"><span class="annottext">Maybe LlvmType
</span><a href="#local-6989586621681859558"><span class="hs-identifier hs-var">exists</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Unique -&gt; LlvmM (Maybe LlvmType)
forall key. Uniquable key =&gt; key -&gt; LlvmM (Maybe LlvmType)
</span><a href="GHC.CmmToLlvm.Base.html#varLookup"><span class="hs-identifier hs-var">varLookup</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621681859557"><span class="hs-identifier hs-var">un</span></a></span><span>
</span><span id="line-1911"></span><span>       </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe LlvmType
</span><a href="#local-6989586621681859558"><span class="hs-identifier hs-var">exists</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1912"></span><span>         </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681859560"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859560"><span class="hs-identifier hs-var">ety</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmM LlvmVar
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Unique -&gt; LlvmType -&gt; LlvmVar
</span><a href="GHC.Llvm.Types.html#LMLocalVar"><span class="hs-identifier hs-var">LMLocalVar</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621681859557"><span class="hs-identifier hs-var">un</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmType -&gt; LlvmVar) -&gt; LlvmType -&gt; LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#pLift"><span class="hs-identifier hs-var">pLift</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859560"><span class="hs-identifier hs-var">ety</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1913"></span><span>         </span><span class="annot"><span class="annottext">Maybe LlvmType
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; LlvmM LlvmVar
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;getCmmReg: Cmm register &quot;</span></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; LlvmM LlvmVar) -&gt; SDoc -&gt; LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1914"></span><span>                        </span><span class="annot"><span class="annottext">Unique -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621681859557"><span class="hs-identifier hs-var">un</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; was not allocated!&quot;</span></span><span>
</span><span id="line-1915"></span><span>           </span><span class="hs-comment">-- This should never happen, as every local variable should</span><span>
</span><span id="line-1916"></span><span>           </span><span class="hs-comment">-- have been assigned a value at some point, triggering</span><span>
</span><span id="line-1917"></span><span>           </span><span class="hs-comment">-- &quot;funPrologue&quot; to allocate it on the stack.</span><span>
</span><span id="line-1918"></span><span>
</span><span id="line-1919"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#getCmmReg"><span class="hs-identifier hs-var">getCmmReg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmGlobal"><span class="hs-identifier hs-type">CmmGlobal</span></a></span><span> </span><span id="local-6989586621681859562"><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859562"><span class="hs-identifier hs-var">g</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1920"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681859563"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681859563"><span class="hs-identifier hs-var">onStack</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GlobalReg -&gt; LlvmM Bool
</span><a href="GHC.CmmToLlvm.Base.html#checkStackReg"><span class="hs-identifier hs-var">checkStackReg</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859562"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-1921"></span><span>       </span><span id="local-6989586621681859565"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859565"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM Platform
</span><a href="GHC.CmmToLlvm.Base.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-1922"></span><span>       </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681859563"><span class="hs-identifier hs-var">onStack</span></a></span><span>
</span><span id="line-1923"></span><span>         </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmM LlvmVar
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; GlobalReg -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.Regs.html#lmGlobalRegVar"><span class="hs-identifier hs-var">lmGlobalRegVar</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859565"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859562"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1924"></span><span>         </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; LlvmM LlvmVar
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;getCmmReg: Cmm register &quot;</span></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; LlvmM LlvmVar) -&gt; SDoc -&gt; LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1925"></span><span>                </span><span class="annot"><span class="annottext">GlobalReg -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859562"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; not stack-allocated!&quot;</span></span><span>
</span><span id="line-1926"></span><span>
</span><span id="line-1927"></span><span class="hs-comment">-- | Return the value of a given register, as well as its type. Might</span><span>
</span><span id="line-1928"></span><span class="hs-comment">-- need to be load from stack.</span><span>
</span><span id="line-1929"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#getCmmRegVal"><span class="hs-identifier hs-type">getCmmRegVal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmReg"><span class="hs-identifier hs-type">CmmReg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmType"><span class="hs-identifier hs-type">LlvmType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmStatements"><span class="hs-identifier hs-type">LlvmStatements</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1930"></span><span id="getCmmRegVal"><span class="annot"><span class="annottext">getCmmRegVal :: CmmReg -&gt; LlvmM (LlvmVar, LlvmType, LlvmStatements)
</span><a href="GHC.CmmToLlvm.CodeGen.html#getCmmRegVal"><span class="hs-identifier hs-var hs-var">getCmmRegVal</span></a></span></span><span> </span><span id="local-6989586621681859567"><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621681859567"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1931"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621681859567"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1932"></span><span>    </span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmGlobal"><span class="hs-identifier hs-type">CmmGlobal</span></a></span><span> </span><span id="local-6989586621681859568"><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859568"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1933"></span><span>      </span><span id="local-6989586621681859569"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681859569"><span class="hs-identifier hs-var">onStack</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GlobalReg -&gt; LlvmM Bool
</span><a href="GHC.CmmToLlvm.Base.html#checkStackReg"><span class="hs-identifier hs-var">checkStackReg</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859568"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-1934"></span><span>      </span><span id="local-6989586621681859570"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859570"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM Platform
</span><a href="GHC.CmmToLlvm.Base.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-1935"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681859569"><span class="hs-identifier hs-var">onStack</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">LlvmM (LlvmVar, LlvmType, LlvmStatements)
</span><a href="#local-6989586621681859571"><span class="hs-identifier hs-var">loadFromStack</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1936"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859572"><span class="annot"><span class="annottext">r :: LlvmVar
</span><a href="#local-6989586621681859572"><span class="hs-identifier hs-var hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; GlobalReg -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.Regs.html#lmGlobalRegArg"><span class="hs-identifier hs-var">lmGlobalRegArg</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859570"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859568"><span class="hs-identifier hs-var">g</span></a></span><span>
</span><span id="line-1937"></span><span>        </span><span class="annot"><span class="annottext">(LlvmVar, LlvmType, LlvmStatements)
-&gt; LlvmM (LlvmVar, LlvmType, LlvmStatements)
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859572"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859572"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1938"></span><span>    </span><span class="annot"><span class="annottext">CmmReg
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmM (LlvmVar, LlvmType, LlvmStatements)
</span><a href="#local-6989586621681859571"><span class="hs-identifier hs-var">loadFromStack</span></a></span><span>
</span><span id="line-1939"></span><span> </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681859571"><span class="annot"><span class="annottext">loadFromStack :: LlvmM (LlvmVar, LlvmType, LlvmStatements)
</span><a href="#local-6989586621681859571"><span class="hs-identifier hs-var hs-var">loadFromStack</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1940"></span><span>         </span><span id="local-6989586621681859574"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859574"><span class="hs-identifier hs-var">ptr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmReg -&gt; LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#getCmmReg"><span class="hs-identifier hs-var">getCmmReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621681859567"><span class="hs-identifier hs-var">reg</span></a></span><span>
</span><span id="line-1941"></span><span>         </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859575"><span class="annot"><span class="annottext">ty :: LlvmType
</span><a href="#local-6989586621681859575"><span class="hs-identifier hs-var hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#pLower"><span class="hs-identifier hs-var">pLower</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmType -&gt; LlvmType) -&gt; LlvmType -&gt; LlvmType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859574"><span class="hs-identifier hs-var">ptr</span></a></span><span>
</span><span id="line-1942"></span><span>         </span><span class="hs-special">(</span><span id="local-6989586621681859576"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859576"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859577"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859577"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859575"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar -&gt; LMAlign -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Load"><span class="hs-identifier hs-var">Load</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859574"><span class="hs-identifier hs-var">ptr</span></a></span><span> </span><span class="annot"><span class="annottext">LMAlign
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1943"></span><span>         </span><span class="annot"><span class="annottext">(LlvmVar, LlvmType, LlvmStatements)
-&gt; LlvmM (LlvmVar, LlvmType, LlvmStatements)
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859576"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859575"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatement -&gt; LlvmStatements
forall a. a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-var">unitOL</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859577"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1944"></span><span>
</span><span id="line-1945"></span><span class="annot"><span class="hs-comment">-- | Allocate a local CmmReg on the stack</span></span><span>
</span><span id="line-1946"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#allocReg"><span class="hs-identifier hs-type">allocReg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmReg"><span class="hs-identifier hs-type">CmmReg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmStatements"><span class="hs-identifier hs-type">LlvmStatements</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1947"></span><span id="allocReg"><span class="annot"><span class="annottext">allocReg :: CmmReg -&gt; (LlvmVar, LlvmStatements)
</span><a href="GHC.CmmToLlvm.CodeGen.html#allocReg"><span class="hs-identifier hs-var hs-var">allocReg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmLocal"><span class="hs-identifier hs-type">CmmLocal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Reg.html#LocalReg"><span class="hs-identifier hs-type">LocalReg</span></a></span><span> </span><span id="local-6989586621681859579"><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621681859579"><span class="hs-identifier hs-var">un</span></a></span></span><span> </span><span id="local-6989586621681859580"><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621681859580"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1948"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859581"><span class="annot"><span class="annottext">ty' :: LlvmType
</span><a href="#local-6989586621681859581"><span class="hs-identifier hs-var hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#cmmToLlvmType"><span class="hs-identifier hs-var">cmmToLlvmType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621681859580"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1949"></span><span>        </span><span id="local-6989586621681859582"><span class="annot"><span class="annottext">var :: LlvmVar
</span><a href="#local-6989586621681859582"><span class="hs-identifier hs-var hs-var">var</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Unique -&gt; LlvmType -&gt; LlvmVar
</span><a href="GHC.Llvm.Types.html#LMLocalVar"><span class="hs-identifier hs-var">LMLocalVar</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621681859579"><span class="hs-identifier hs-var">un</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#LMPointer"><span class="hs-identifier hs-var">LMPointer</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859581"><span class="hs-identifier hs-var">ty'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1950"></span><span>        </span><span id="local-6989586621681859583"><span class="annot"><span class="annottext">alc :: LlvmExpression
</span><a href="#local-6989586621681859583"><span class="hs-identifier hs-var hs-var">alc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Int -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Alloca"><span class="hs-identifier hs-var">Alloca</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859581"><span class="hs-identifier hs-var">ty'</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1951"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859582"><span class="hs-identifier hs-var">var</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatement -&gt; LlvmStatements
forall a. a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-var">unitOL</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmStatement -&gt; LlvmStatements)
-&gt; LlvmStatement -&gt; LlvmStatements
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmExpression -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Assignment"><span class="hs-identifier hs-var">Assignment</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859582"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmExpression
</span><a href="#local-6989586621681859583"><span class="hs-identifier hs-var">alc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1952"></span><span>
</span><span id="line-1953"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#allocReg"><span class="hs-identifier hs-var">allocReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmReg
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; (LlvmVar, LlvmStatements)
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; (LlvmVar, LlvmStatements))
-&gt; String -&gt; (LlvmVar, LlvmStatements)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;allocReg: Global reg encountered! Global registers should&quot;</span></span><span>
</span><span id="line-1954"></span><span>                    </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; have been handled elsewhere!&quot;</span></span><span>
</span><span id="line-1955"></span><span>
</span><span id="line-1956"></span><span>
</span><span id="line-1957"></span><span class="annot"><span class="hs-comment">-- | Generate code for a literal</span></span><span>
</span><span id="line-1958"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genLit"><span class="hs-identifier hs-type">genLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#EOption"><span class="hs-identifier hs-type">EOption</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#ExprData"><span class="hs-identifier hs-type">ExprData</span></a></span><span>
</span><span id="line-1959"></span><span id="genLit"><span class="annot"><span class="annottext">genLit :: EOption -&gt; CmmLit -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#genLit"><span class="hs-identifier hs-var hs-var">genLit</span></a></span></span><span> </span><span id="local-6989586621681859585"><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859585"><span class="hs-identifier hs-var">opt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-type">CmmInt</span></a></span><span> </span><span id="local-6989586621681859586"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681859586"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621681859587"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859587"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1960"></span><span>  </span><span class="hs-comment">-- See Note [Literals and branch conditions].</span><span>
</span><span id="line-1961"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859588"><span class="annot"><span class="annottext">width :: LlvmType
</span><a href="#local-6989586621681859588"><span class="hs-identifier hs-var hs-var">width</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">EOption -&gt; Bool
</span><a href="GHC.CmmToLlvm.CodeGen.html#i1Expected"><span class="hs-identifier hs-var">i1Expected</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859585"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#i1"><span class="hs-identifier hs-var">i1</span></a></span><span>
</span><span id="line-1962"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#LMInt"><span class="hs-identifier hs-var">LMInt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; Int
</span><a href="GHC.Cmm.Type.html#widthInBits"><span class="hs-identifier hs-var">widthInBits</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859587"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1963"></span><span>        </span><span class="hs-comment">-- comm  = Comment [ fsLit $ &quot;EOption: &quot; ++ show opt</span><span>
</span><span id="line-1964"></span><span>        </span><span class="hs-comment">--                 , fsLit $ &quot;Width  : &quot; ++ show w</span><span>
</span><span id="line-1965"></span><span>        </span><span class="hs-comment">--                 , fsLit $ &quot;Width' : &quot; ++ show (widthInBits w)</span><span>
</span><span id="line-1966"></span><span>        </span><span class="hs-comment">--                 ]</span><span>
</span><span id="line-1967"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">ExprData -&gt; LlvmM ExprData
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmType -&gt; Integer -&gt; LlvmVar
forall a. Integral a =&gt; LlvmType -&gt; a -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#mkIntLit"><span class="hs-identifier hs-var">mkIntLit</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859588"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681859586"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1968"></span><span>
</span><span id="line-1969"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genLit"><span class="hs-identifier hs-var">genLit</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmFloat"><span class="hs-identifier hs-type">CmmFloat</span></a></span><span> </span><span id="local-6989586621681859590"><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621681859590"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681859591"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859591"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1970"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExprData -&gt; LlvmM ExprData
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmLit -&gt; LlvmVar
</span><a href="GHC.Llvm.Types.html#LMLitVar"><span class="hs-identifier hs-var">LMLitVar</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmLit -&gt; LlvmVar) -&gt; LlvmLit -&gt; LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Double -&gt; LlvmType -&gt; LlvmLit
</span><a href="GHC.Llvm.Types.html#LMFloatLit"><span class="hs-identifier hs-var">LMFloatLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Rational -&gt; Double
forall a. Fractional a =&gt; Rational -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Real.html#fromRational/GHC.Real.html#fromRational"><span class="hs-identifier hs-var">fromRational</span></a></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621681859590"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmFloat"><span class="hs-identifier hs-var">widthToLlvmFloat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859591"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1971"></span><span>              </span><span class="annot"><span class="annottext">LlvmStatements
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1972"></span><span>
</span><span id="line-1973"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genLit"><span class="hs-identifier hs-var">genLit</span></a></span><span> </span><span id="local-6989586621681859592"><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859592"><span class="hs-identifier hs-var">opt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmVec"><span class="hs-identifier hs-type">CmmVec</span></a></span><span> </span><span id="local-6989586621681859594"><span class="annot"><span class="annottext">[CmmLit]
</span><a href="#local-6989586621681859594"><span class="hs-identifier hs-var">ls</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1974"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681859595"><span class="annot"><span class="annottext">[LlvmLit]
</span><a href="#local-6989586621681859595"><span class="hs-identifier hs-var">llvmLits</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(CmmLit -&gt; LlvmM LlvmLit) -&gt; [CmmLit] -&gt; LlvmM [LlvmLit]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="../../base-4.18.3.0/src/Data.Traversable.html#mapM/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">CmmLit -&gt; LlvmM LlvmLit
</span><a href="#local-6989586621681859596"><span class="hs-identifier hs-var">toLlvmLit</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmLit]
</span><a href="#local-6989586621681859594"><span class="hs-identifier hs-var">ls</span></a></span><span>
</span><span id="line-1975"></span><span>       </span><span class="annot"><span class="annottext">ExprData -&gt; LlvmM ExprData
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmLit -&gt; LlvmVar
</span><a href="GHC.Llvm.Types.html#LMLitVar"><span class="hs-identifier hs-var">LMLitVar</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmLit -&gt; LlvmVar) -&gt; LlvmLit -&gt; LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmLit] -&gt; LlvmLit
</span><a href="GHC.Llvm.Types.html#LMVectorLit"><span class="hs-identifier hs-var">LMVectorLit</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmLit]
</span><a href="#local-6989586621681859595"><span class="hs-identifier hs-var">llvmLits</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1976"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1977"></span><span>    </span><span class="annot"><a href="#local-6989586621681859596"><span class="hs-identifier hs-type">toLlvmLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-type">CmmLit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmLit"><span class="hs-identifier hs-type">LlvmLit</span></a></span><span>
</span><span id="line-1978"></span><span>    </span><span id="local-6989586621681859596"><span class="annot"><span class="annottext">toLlvmLit :: CmmLit -&gt; LlvmM LlvmLit
</span><a href="#local-6989586621681859596"><span class="hs-identifier hs-var hs-var">toLlvmLit</span></a></span></span><span> </span><span id="local-6989586621681859597"><span class="annot"><span class="annottext">CmmLit
</span><a href="#local-6989586621681859597"><span class="hs-identifier hs-var">lit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1979"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681859598"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859598"><span class="hs-identifier hs-var">llvmLitVar</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">EOption -&gt; CmmLit -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#genLit"><span class="hs-identifier hs-var">genLit</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859592"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="annot"><span class="annottext">CmmLit
</span><a href="#local-6989586621681859597"><span class="hs-identifier hs-var">lit</span></a></span><span>
</span><span id="line-1980"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859598"><span class="hs-identifier hs-var">llvmLitVar</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1981"></span><span>          </span><span class="annot"><a href="GHC.Llvm.Types.html#LMLitVar"><span class="hs-identifier hs-type">LMLitVar</span></a></span><span> </span><span id="local-6989586621681859599"><span class="annot"><span class="annottext">LlvmLit
</span><a href="#local-6989586621681859599"><span class="hs-identifier hs-var">llvmLit</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LlvmLit -&gt; LlvmM LlvmLit
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmLit
</span><a href="#local-6989586621681859599"><span class="hs-identifier hs-var">llvmLit</span></a></span><span>
</span><span id="line-1982"></span><span>          </span><span class="annot"><span class="annottext">LlvmVar
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LlvmM LlvmLit
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genLit&quot;</span></span><span>
</span><span id="line-1983"></span><span>
</span><span id="line-1984"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genLit"><span class="hs-identifier hs-var">genLit</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681859600"><span class="annot"><span class="annottext">cmm :: CmmLit
</span><a href="#local-6989586621681859600"><span class="hs-identifier hs-var">cmm</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLabel"><span class="hs-identifier hs-type">CmmLabel</span></a></span><span> </span><span id="local-6989586621681859601"><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621681859601"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1985"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681859602"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859602"><span class="hs-identifier hs-var">var</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LMString -&gt; LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.Base.html#getGlobalPtr"><span class="hs-identifier hs-var">getGlobalPtr</span></a></span><span> </span><span class="annot"><span class="annottext">(LMString -&gt; LlvmM LlvmVar) -&gt; LlvmM LMString -&gt; LlvmM LlvmVar
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%3D%3C%3C/GHC.Base.html#%3D%3C%3C"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">CLabel -&gt; LlvmM LMString
</span><a href="GHC.CmmToLlvm.Base.html#strCLabel_llvm"><span class="hs-identifier hs-var">strCLabel_llvm</span></a></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621681859601"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1986"></span><span>       </span><span id="local-6989586621681859605"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859605"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM Platform
</span><a href="GHC.CmmToLlvm.Base.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-1987"></span><span>       </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859606"><span class="annot"><span class="annottext">lmty :: LlvmType
</span><a href="#local-6989586621681859606"><span class="hs-identifier hs-var hs-var">lmty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#cmmToLlvmType"><span class="hs-identifier hs-var">cmmToLlvmType</span></a></span><span> </span><span class="annot"><span class="annottext">(CmmType -&gt; LlvmType) -&gt; CmmType -&gt; LlvmType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; CmmLit -&gt; CmmType
</span><a href="GHC.Cmm.Expr.html#cmmLitType"><span class="hs-identifier hs-var">cmmLitType</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859605"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">CmmLit
</span><a href="#local-6989586621681859600"><span class="hs-identifier hs-var">cmm</span></a></span><span>
</span><span id="line-1988"></span><span>       </span><span class="hs-special">(</span><span id="local-6989586621681859608"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859608"><span class="hs-identifier hs-var">v1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859609"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859609"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859606"><span class="hs-identifier hs-var">lmty</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Ptrtoint"><span class="hs-identifier hs-var">LM_Ptrtoint</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859602"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#llvmWord"><span class="hs-identifier hs-var">llvmWord</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859605"><span class="hs-identifier hs-var">platform</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1989"></span><span>       </span><span class="annot"><span class="annottext">ExprData -&gt; LlvmM ExprData
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859608"><span class="hs-identifier hs-var">v1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatement -&gt; LlvmStatements
forall a. a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-var">unitOL</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859609"><span class="hs-identifier hs-var">s1</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1990"></span><span>
</span><span id="line-1991"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genLit"><span class="hs-identifier hs-var">genLit</span></a></span><span> </span><span id="local-6989586621681859610"><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859610"><span class="hs-identifier hs-var">opt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLabelOff"><span class="hs-identifier hs-type">CmmLabelOff</span></a></span><span> </span><span id="local-6989586621681859612"><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621681859612"><span class="hs-keyword hs-var">label</span></a></span></span><span> </span><span id="local-6989586621681859613"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859613"><span class="hs-identifier hs-var">off</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1992"></span><span>    </span><span id="local-6989586621681859614"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859614"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM Platform
</span><a href="GHC.CmmToLlvm.Base.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-1993"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681859615"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859615"><span class="hs-identifier hs-var">vlbl</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859616"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859616"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859617"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859617"><span class="hs-identifier hs-var">stat</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">EOption -&gt; CmmLit -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#genLit"><span class="hs-identifier hs-var">genLit</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859610"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CLabel -&gt; CmmLit
</span><a href="GHC.Cmm.Expr.html#CmmLabel"><span class="hs-identifier hs-var">CmmLabel</span></a></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621681859612"><span class="hs-keyword hs-var">label</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1994"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859618"><span class="annot"><span class="annottext">voff :: LlvmVar
</span><a href="#local-6989586621681859618"><span class="hs-identifier hs-var hs-var">voff</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Int -&gt; LlvmVar
forall a. Integral a =&gt; Platform -&gt; a -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#toIWord"><span class="hs-identifier hs-var">toIWord</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859614"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859613"><span class="hs-identifier hs-var">off</span></a></span><span>
</span><span id="line-1995"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681859619"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859619"><span class="hs-identifier hs-var">v1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859620"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859620"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859615"><span class="hs-identifier hs-var">vlbl</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#LlvmOp"><span class="hs-identifier hs-var">LlvmOp</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_Add"><span class="hs-identifier hs-var">LM_MO_Add</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859615"><span class="hs-identifier hs-var">vlbl</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859618"><span class="hs-identifier hs-var">voff</span></a></span><span>
</span><span id="line-1996"></span><span>    </span><span class="annot"><span class="annottext">ExprData -&gt; LlvmM ExprData
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859619"><span class="hs-identifier hs-var">v1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859616"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859620"><span class="hs-identifier hs-var">s1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859617"><span class="hs-identifier hs-var">stat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1997"></span><span>
</span><span id="line-1998"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genLit"><span class="hs-identifier hs-var">genLit</span></a></span><span> </span><span id="local-6989586621681859621"><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859621"><span class="hs-identifier hs-var">opt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmLabelDiffOff"><span class="hs-identifier hs-type">CmmLabelDiffOff</span></a></span><span> </span><span id="local-6989586621681859623"><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621681859623"><span class="hs-identifier hs-var">l1</span></a></span></span><span> </span><span id="local-6989586621681859624"><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621681859624"><span class="hs-identifier hs-var">l2</span></a></span></span><span> </span><span id="local-6989586621681859625"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859625"><span class="hs-identifier hs-var">off</span></a></span></span><span> </span><span id="local-6989586621681859626"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859626"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1999"></span><span>    </span><span id="local-6989586621681859627"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859627"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM Platform
</span><a href="GHC.CmmToLlvm.Base.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-2000"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681859628"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859628"><span class="hs-identifier hs-var">vl1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859629"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859629"><span class="hs-identifier hs-var">stmts1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859630"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859630"><span class="hs-identifier hs-var">stat1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">EOption -&gt; CmmLit -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#genLit"><span class="hs-identifier hs-var">genLit</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859621"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CLabel -&gt; CmmLit
</span><a href="GHC.Cmm.Expr.html#CmmLabel"><span class="hs-identifier hs-var">CmmLabel</span></a></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621681859623"><span class="hs-identifier hs-var">l1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2001"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681859631"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859631"><span class="hs-identifier hs-var">vl2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859632"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859632"><span class="hs-identifier hs-var">stmts2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859633"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859633"><span class="hs-identifier hs-var">stat2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">EOption -&gt; CmmLit -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#genLit"><span class="hs-identifier hs-var">genLit</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859621"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CLabel -&gt; CmmLit
</span><a href="GHC.Cmm.Expr.html#CmmLabel"><span class="hs-identifier hs-var">CmmLabel</span></a></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621681859624"><span class="hs-identifier hs-var">l2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2002"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859634"><span class="annot"><span class="annottext">voff :: LlvmVar
</span><a href="#local-6989586621681859634"><span class="hs-identifier hs-var hs-var">voff</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Int -&gt; LlvmVar
forall a. Integral a =&gt; Platform -&gt; a -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#toIWord"><span class="hs-identifier hs-var">toIWord</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859627"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859625"><span class="hs-identifier hs-var">off</span></a></span><span>
</span><span id="line-2003"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859635"><span class="annot"><span class="annottext">ty1 :: LlvmType
</span><a href="#local-6989586621681859635"><span class="hs-identifier hs-var hs-var">ty1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859628"><span class="hs-identifier hs-var">vl1</span></a></span><span>
</span><span id="line-2004"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859636"><span class="annot"><span class="annottext">ty2 :: LlvmType
</span><a href="#local-6989586621681859636"><span class="hs-identifier hs-var hs-var">ty2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859631"><span class="hs-identifier hs-var">vl2</span></a></span><span>
</span><span id="line-2005"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isInt"><span class="hs-identifier hs-var">isInt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859635"><span class="hs-identifier hs-var">ty1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmType -&gt; Bool
</span><a href="GHC.Llvm.Types.html#isInt"><span class="hs-identifier hs-var">isInt</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859636"><span class="hs-identifier hs-var">ty2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2006"></span><span>       </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; LlvmType -&gt; Int
</span><a href="GHC.Llvm.Types.html#llvmWidthInBits"><span class="hs-identifier hs-var">llvmWidthInBits</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859627"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859635"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; LlvmType -&gt; Int
</span><a href="GHC.Llvm.Types.html#llvmWidthInBits"><span class="hs-identifier hs-var">llvmWidthInBits</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859627"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859636"><span class="hs-identifier hs-var">ty2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2007"></span><span>       </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2008"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621681859637"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859637"><span class="hs-identifier hs-var">v1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859638"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859638"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859628"><span class="hs-identifier hs-var">vl1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#LlvmOp"><span class="hs-identifier hs-var">LlvmOp</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_Sub"><span class="hs-identifier hs-var">LM_MO_Sub</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859628"><span class="hs-identifier hs-var">vl1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859631"><span class="hs-identifier hs-var">vl2</span></a></span><span>
</span><span id="line-2009"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621681859639"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859639"><span class="hs-identifier hs-var">v2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859640"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859640"><span class="hs-identifier hs-var">s2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859637"><span class="hs-identifier hs-var">v1</span></a></span><span> </span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp -&gt; LlvmVar -&gt; LlvmVar -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#LlvmOp"><span class="hs-identifier hs-var">LlvmOp</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmMachOp
</span><a href="GHC.Llvm.Types.html#LM_MO_Add"><span class="hs-identifier hs-var">LM_MO_Add</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859637"><span class="hs-identifier hs-var">v1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859634"><span class="hs-identifier hs-var">voff</span></a></span><span>
</span><span id="line-2010"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859641"><span class="annot"><span class="annottext">ty :: LlvmType
</span><a href="#local-6989586621681859641"><span class="hs-identifier hs-var hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#widthToLlvmInt"><span class="hs-identifier hs-var">widthToLlvmInt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859626"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-2011"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859642"><span class="annot"><span class="annottext">stmts :: LlvmStatements
</span><a href="#local-6989586621681859642"><span class="hs-identifier hs-var hs-var">stmts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859629"><span class="hs-identifier hs-var">stmts1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatements -&gt; LlvmStatements
forall a. OrdList a -&gt; OrdList a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#appOL"><span class="hs-operator hs-var">`appOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859632"><span class="hs-identifier hs-var">stmts2</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859638"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859640"><span class="hs-identifier hs-var">s2</span></a></span><span>
</span><span id="line-2012"></span><span>            </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859626"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; Width
</span><a href="GHC.Cmm.Type.html#wordWidth"><span class="hs-identifier hs-var">wordWidth</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859627"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-2013"></span><span>              </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2014"></span><span>                </span><span class="hs-special">(</span><span id="local-6989586621681859645"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859645"><span class="hs-identifier hs-var">v3</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859646"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859646"><span class="hs-identifier hs-var">s3</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859641"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Trunc"><span class="hs-identifier hs-var">LM_Trunc</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859639"><span class="hs-identifier hs-var">v2</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859641"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-2015"></span><span>                </span><span class="annot"><span class="annottext">ExprData -&gt; LlvmM ExprData
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859645"><span class="hs-identifier hs-var">v3</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859642"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859646"><span class="hs-identifier hs-var">s3</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859630"><span class="hs-identifier hs-var">stat1</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl] -&gt; [LlvmCmmDecl] -&gt; [LlvmCmmDecl]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859633"><span class="hs-identifier hs-var">stat2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2016"></span><span>              </span><span class="hs-keyword">else</span><span>
</span><span id="line-2017"></span><span>                </span><span class="annot"><span class="annottext">ExprData -&gt; LlvmM ExprData
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859639"><span class="hs-identifier hs-var">v2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859642"><span class="hs-identifier hs-var">stmts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859630"><span class="hs-identifier hs-var">stat1</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl] -&gt; [LlvmCmmDecl] -&gt; [LlvmCmmDecl]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859633"><span class="hs-identifier hs-var">stat2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2018"></span><span>        </span><span class="hs-keyword">else</span><span>
</span><span id="line-2019"></span><span>            </span><span class="annot"><span class="annottext">String -&gt; LlvmM ExprData
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genLit: CmmLabelDiffOff encountered with different label ty!&quot;</span></span><span>
</span><span id="line-2020"></span><span>
</span><span id="line-2021"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genLit"><span class="hs-identifier hs-var">genLit</span></a></span><span> </span><span id="local-6989586621681859647"><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859647"><span class="hs-identifier hs-var">opt</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmBlock"><span class="hs-identifier hs-type">CmmBlock</span></a></span><span> </span><span id="local-6989586621681859649"><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621681859649"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2022"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EOption -&gt; CmmLit -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#genLit"><span class="hs-identifier hs-var">genLit</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><a href="#local-6989586621681859647"><span class="hs-identifier hs-var">opt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CLabel -&gt; CmmLit
</span><a href="GHC.Cmm.Expr.html#CmmLabel"><span class="hs-identifier hs-var">CmmLabel</span></a></span><span> </span><span class="annot"><span class="annottext">(CLabel -&gt; CmmLit) -&gt; CLabel -&gt; CmmLit
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; CLabel
</span><a href="GHC.Cmm.BlockId.html#infoTblLbl"><span class="hs-identifier hs-var">infoTblLbl</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621681859649"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2023"></span><span>
</span><span id="line-2024"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genLit"><span class="hs-identifier hs-var">genLit</span></a></span><span> </span><span class="annot"><span class="annottext">EOption
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CmmLit
</span><a href="GHC.Cmm.Expr.html#CmmHighStackMark"><span class="hs-identifier hs-var">CmmHighStackMark</span></a></span><span>
</span><span id="line-2025"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; LlvmM ExprData
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;genStaticLit - CmmHighStackMark unsupported!&quot;</span></span><span>
</span><span id="line-2026"></span><span>
</span><span id="line-2027"></span><span>
</span><span id="line-2028"></span><span class="hs-comment">-- -----------------------------------------------------------------------------</span><span>
</span><span id="line-2029"></span><span class="annot"><span class="hs-comment">-- * Misc</span></span><span>
</span><span id="line-2030"></span><span class="hs-comment">--</span><span>
</span><span id="line-2031"></span><span>
</span><span id="line-2032"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#convertMemoryOrdering"><span class="hs-identifier hs-type">convertMemoryOrdering</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.MachOp.html#MemoryOrdering"><span class="hs-identifier hs-type">MemoryOrdering</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Llvm.Syntax.html#LlvmSyncOrdering"><span class="hs-identifier hs-type">LlvmSyncOrdering</span></a></span><span>
</span><span id="line-2033"></span><span id="convertMemoryOrdering"><span class="annot"><span class="annottext">convertMemoryOrdering :: MemoryOrdering -&gt; LlvmSyncOrdering
</span><a href="GHC.CmmToLlvm.CodeGen.html#convertMemoryOrdering"><span class="hs-identifier hs-var hs-var">convertMemoryOrdering</span></a></span></span><span> </span><span class="annot"><span class="annottext">MemoryOrdering
</span><a href="GHC.Cmm.MachOp.html#MemOrderRelaxed"><span class="hs-identifier hs-var">MemOrderRelaxed</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmSyncOrdering
</span><a href="GHC.Llvm.Syntax.html#SyncMonotonic"><span class="hs-identifier hs-var">SyncMonotonic</span></a></span><span>
</span><span id="line-2034"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#convertMemoryOrdering"><span class="hs-identifier hs-var">convertMemoryOrdering</span></a></span><span> </span><span class="annot"><span class="annottext">MemoryOrdering
</span><a href="GHC.Cmm.MachOp.html#MemOrderAcquire"><span class="hs-identifier hs-var">MemOrderAcquire</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmSyncOrdering
</span><a href="GHC.Llvm.Syntax.html#SyncAcquire"><span class="hs-identifier hs-var">SyncAcquire</span></a></span><span>
</span><span id="line-2035"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#convertMemoryOrdering"><span class="hs-identifier hs-var">convertMemoryOrdering</span></a></span><span> </span><span class="annot"><span class="annottext">MemoryOrdering
</span><a href="GHC.Cmm.MachOp.html#MemOrderRelease"><span class="hs-identifier hs-var">MemOrderRelease</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmSyncOrdering
</span><a href="GHC.Llvm.Syntax.html#SyncRelease"><span class="hs-identifier hs-var">SyncRelease</span></a></span><span>
</span><span id="line-2036"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#convertMemoryOrdering"><span class="hs-identifier hs-var">convertMemoryOrdering</span></a></span><span> </span><span class="annot"><span class="annottext">MemoryOrdering
</span><a href="GHC.Cmm.MachOp.html#MemOrderSeqCst"><span class="hs-identifier hs-var">MemOrderSeqCst</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmSyncOrdering
</span><a href="GHC.Llvm.Syntax.html#SyncSeqCst"><span class="hs-identifier hs-var">SyncSeqCst</span></a></span><span>
</span><span id="line-2037"></span><span>
</span><span id="line-2038"></span><span class="hs-comment">-- | Find CmmRegs that get assigned and allocate them on the stack</span><span>
</span><span id="line-2039"></span><span class="hs-comment">--</span><span>
</span><span id="line-2040"></span><span class="hs-comment">-- Any register that gets written needs to be allocated on the</span><span>
</span><span id="line-2041"></span><span class="hs-comment">-- stack. This avoids having to map a CmmReg to an equivalent SSA form</span><span>
</span><span id="line-2042"></span><span class="hs-comment">-- and avoids having to deal with Phi node insertion.  This is also</span><span>
</span><span id="line-2043"></span><span class="hs-comment">-- the approach recommended by LLVM developers.</span><span>
</span><span id="line-2044"></span><span class="hs-comment">--</span><span>
</span><span id="line-2045"></span><span class="hs-comment">-- On the other hand, this is unnecessarily verbose if the register in</span><span>
</span><span id="line-2046"></span><span class="hs-comment">-- question is never written. Therefore we skip it where we can to</span><span>
</span><span id="line-2047"></span><span class="hs-comment">-- save a few lines in the output and hopefully speed compilation up a</span><span>
</span><span id="line-2048"></span><span class="hs-comment">-- bit.</span><span>
</span><span id="line-2049"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#funPrologue"><span class="hs-identifier hs-type">funPrologue</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LiveGlobalRegs"><span class="hs-identifier hs-type">LiveGlobalRegs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.html#CmmBlock"><span class="hs-identifier hs-type">CmmBlock</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#StmtData"><span class="hs-identifier hs-type">StmtData</span></a></span><span>
</span><span id="line-2050"></span><span id="funPrologue"><span class="annot"><span class="annottext">funPrologue :: [GlobalReg] -&gt; [CmmBlock] -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#funPrologue"><span class="hs-identifier hs-var hs-var">funPrologue</span></a></span></span><span> </span><span id="local-6989586621681859659"><span class="annot"><span class="annottext">[GlobalReg]
</span><a href="#local-6989586621681859659"><span class="hs-identifier hs-var">live</span></a></span></span><span> </span><span id="local-6989586621681859660"><span class="annot"><span class="annottext">[CmmBlock]
</span><a href="#local-6989586621681859660"><span class="hs-identifier hs-var">cmmBlocks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2051"></span><span>
</span><span id="line-2052"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621681859661"><span class="hs-identifier hs-type">getAssignedRegs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Node.html#CmmNode"><span class="hs-identifier hs-type">CmmNode</span></a></span><span> </span><span class="annot"><a href="GHC.Cmm.Dataflow.Block.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span class="annot"><a href="GHC.Cmm.Dataflow.Block.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmReg"><span class="hs-identifier hs-type">CmmReg</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2053"></span><span>      </span><span id="local-6989586621681859661"><span class="annot"><span class="annottext">getAssignedRegs :: CmmNode O O -&gt; [CmmReg]
</span><a href="#local-6989586621681859661"><span class="hs-identifier hs-var hs-var">getAssignedRegs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#CmmAssign"><span class="hs-identifier hs-type">CmmAssign</span></a></span><span> </span><span id="local-6989586621681859664"><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621681859664"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621681859664"><span class="hs-identifier hs-var">reg</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2054"></span><span>      </span><span class="annot"><a href="#local-6989586621681859661"><span class="hs-identifier hs-var">getAssignedRegs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Node.html#CmmUnsafeForeignCall"><span class="hs-identifier hs-type">CmmUnsafeForeignCall</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignTarget
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681859667"><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621681859667"><span class="hs-identifier hs-var">rs</span></a></span></span><span> </span><span class="annot"><span class="annottext">[CmmExpr]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CmmFormal -&gt; CmmReg) -&gt; [CmmFormal] -&gt; [CmmReg]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">CmmFormal -&gt; CmmReg
</span><a href="GHC.Cmm.Reg.html#CmmLocal"><span class="hs-identifier hs-var">CmmLocal</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmFormal]
</span><a href="#local-6989586621681859667"><span class="hs-identifier hs-var">rs</span></a></span><span>
</span><span id="line-2055"></span><span>      </span><span class="annot"><a href="#local-6989586621681859661"><span class="hs-identifier hs-var">getAssignedRegs</span></a></span><span> </span><span class="annot"><span class="annottext">CmmNode O O
</span><span class="hs-identifier">_</span></span><span>                  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2056"></span><span>      </span><span id="local-6989586621681859669"><span class="annot"><span class="annottext">getRegsBlock :: (a, Block CmmNode O O, c) -&gt; [CmmReg]
</span><a href="#local-6989586621681859669"><span class="hs-identifier hs-var hs-var">getRegsBlock</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859670"><span class="annot"><span class="annottext">Block CmmNode O O
</span><a href="#local-6989586621681859670"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">c
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CmmNode O O -&gt; [CmmReg]) -&gt; [CmmNode O O] -&gt; [CmmReg]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#concatMap/Data.Foldable.html#concatMap"><span class="hs-identifier hs-var">concatMap</span></a></span><span> </span><span class="annot"><span class="annottext">CmmNode O O -&gt; [CmmReg]
</span><a href="#local-6989586621681859661"><span class="hs-identifier hs-var">getAssignedRegs</span></a></span><span> </span><span class="annot"><span class="annottext">([CmmNode O O] -&gt; [CmmReg]) -&gt; [CmmNode O O] -&gt; [CmmReg]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Block CmmNode O O -&gt; [CmmNode O O]
forall (n :: Extensibility -&gt; Extensibility -&gt; *).
Block n O O -&gt; [n O O]
</span><a href="GHC.Cmm.Dataflow.Block.html#blockToList"><span class="hs-identifier hs-var">blockToList</span></a></span><span> </span><span class="annot"><span class="annottext">Block CmmNode O O
</span><a href="#local-6989586621681859670"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-2057"></span><span>      </span><span id="local-6989586621681859672"><span class="annot"><span class="annottext">assignedRegs :: [CmmReg]
</span><a href="#local-6989586621681859672"><span class="hs-identifier hs-var hs-var">assignedRegs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CmmReg] -&gt; [CmmReg]
forall a. Eq a =&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/Data.OldList.html#nub/Data.OldList.html#nub"><span class="hs-identifier hs-var">nub</span></a></span><span> </span><span class="annot"><span class="annottext">([CmmReg] -&gt; [CmmReg]) -&gt; [CmmReg] -&gt; [CmmReg]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(CmmBlock -&gt; [CmmReg]) -&gt; [CmmBlock] -&gt; [CmmReg]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#concatMap/Data.Foldable.html#concatMap"><span class="hs-identifier hs-var">concatMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(CmmNode C O, Block CmmNode O O, CmmNode O C) -&gt; [CmmReg]
forall {a} {c}. (a, Block CmmNode O O, c) -&gt; [CmmReg]
</span><a href="#local-6989586621681859669"><span class="hs-identifier hs-var">getRegsBlock</span></a></span><span> </span><span class="annot"><span class="annottext">((CmmNode C O, Block CmmNode O O, CmmNode O C) -&gt; [CmmReg])
-&gt; (CmmBlock -&gt; (CmmNode C O, Block CmmNode O O, CmmNode O C))
-&gt; CmmBlock
-&gt; [CmmReg]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">CmmBlock -&gt; (CmmNode C O, Block CmmNode O O, CmmNode O C)
forall (n :: Extensibility -&gt; Extensibility -&gt; *).
Block n C C -&gt; (n C O, Block n O O, n O C)
</span><a href="GHC.Cmm.Dataflow.Block.html#blockSplit"><span class="hs-identifier hs-var">blockSplit</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CmmBlock]
</span><a href="#local-6989586621681859660"><span class="hs-identifier hs-var">cmmBlocks</span></a></span><span>
</span><span id="line-2058"></span><span>      </span><span id="local-6989586621681859673"><span class="annot"><span class="annottext">isLive :: GlobalReg -&gt; Bool
</span><a href="#local-6989586621681859673"><span class="hs-identifier hs-var hs-var">isLive</span></a></span></span><span> </span><span id="local-6989586621681859674"><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859674"><span class="hs-identifier hs-var">r</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859674"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg -&gt; [GlobalReg] -&gt; Bool
forall a. Eq a =&gt; a -&gt; [a] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#elem/Data.Foldable.html#elem"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalReg]
</span><a href="GHC.CmmToLlvm.Regs.html#alwaysLive"><span class="hs-identifier hs-var">alwaysLive</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859674"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg -&gt; [GlobalReg] -&gt; Bool
forall a. Eq a =&gt; a -&gt; [a] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#elem/Data.Foldable.html#elem"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalReg]
</span><a href="#local-6989586621681859659"><span class="hs-identifier hs-var">live</span></a></span><span>
</span><span id="line-2059"></span><span>
</span><span id="line-2060"></span><span>  </span><span id="local-6989586621681859677"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859677"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM Platform
</span><a href="GHC.CmmToLlvm.Base.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-2061"></span><span>  </span><span id="local-6989586621681859678"><span class="annot"><span class="annottext">[LlvmStatements]
</span><a href="#local-6989586621681859678"><span class="hs-identifier hs-var">stmtss</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[CmmReg]
-&gt; (CmmReg -&gt; LlvmM LlvmStatements) -&gt; LlvmM [LlvmStatements]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><a href="../../base-4.18.3.0/src/Data.Traversable.html#forM/Data.Traversable.html#forM"><span class="hs-identifier hs-var">forM</span></a></span><span> </span><span class="annot"><span class="annottext">[CmmReg]
</span><a href="#local-6989586621681859672"><span class="hs-identifier hs-var">assignedRegs</span></a></span><span> </span><span class="annot"><span class="annottext">((CmmReg -&gt; LlvmM LlvmStatements) -&gt; LlvmM [LlvmStatements])
-&gt; (CmmReg -&gt; LlvmM LlvmStatements) -&gt; LlvmM [LlvmStatements]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681859680"><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621681859680"><span class="hs-identifier hs-var">reg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-2062"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621681859680"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-2063"></span><span>      </span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmLocal"><span class="hs-identifier hs-type">CmmLocal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Reg.html#LocalReg"><span class="hs-identifier hs-type">LocalReg</span></a></span><span> </span><span id="local-6989586621681859681"><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621681859681"><span class="hs-identifier hs-var">un</span></a></span></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2064"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681859682"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859682"><span class="hs-identifier hs-var">newv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859683"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859683"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmReg -&gt; (LlvmVar, LlvmStatements)
</span><a href="GHC.CmmToLlvm.CodeGen.html#allocReg"><span class="hs-identifier hs-var">allocReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621681859680"><span class="hs-identifier hs-var">reg</span></a></span><span>
</span><span id="line-2065"></span><span>        </span><span class="annot"><span class="annottext">Unique -&gt; LlvmType -&gt; LlvmM ()
forall key. Uniquable key =&gt; key -&gt; LlvmType -&gt; LlvmM ()
</span><a href="GHC.CmmToLlvm.Base.html#varInsert"><span class="hs-identifier hs-var">varInsert</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621681859681"><span class="hs-identifier hs-var">un</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#pLower"><span class="hs-identifier hs-var">pLower</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmType -&gt; LlvmType) -&gt; LlvmType -&gt; LlvmType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859682"><span class="hs-identifier hs-var">newv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2066"></span><span>        </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmM LlvmStatements
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859683"><span class="hs-identifier hs-var">stmts</span></a></span><span>
</span><span id="line-2067"></span><span>      </span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmGlobal"><span class="hs-identifier hs-type">CmmGlobal</span></a></span><span> </span><span id="local-6989586621681859685"><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859685"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2068"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859686"><span class="annot"><span class="annottext">reg :: LlvmVar
</span><a href="#local-6989586621681859686"><span class="hs-identifier hs-var hs-var">reg</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; GlobalReg -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.Regs.html#lmGlobalRegVar"><span class="hs-identifier hs-var">lmGlobalRegVar</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859677"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859685"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-2069"></span><span>            </span><span id="local-6989586621681859687"><span class="annot"><span class="annottext">arg :: LlvmVar
</span><a href="#local-6989586621681859687"><span class="hs-identifier hs-var hs-var">arg</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; GlobalReg -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.Regs.html#lmGlobalRegArg"><span class="hs-identifier hs-var">lmGlobalRegArg</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859677"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859685"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-2070"></span><span>            </span><span id="local-6989586621681859688"><span class="annot"><span class="annottext">ty :: LlvmType
</span><a href="#local-6989586621681859688"><span class="hs-identifier hs-var hs-var">ty</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#pLower"><span class="hs-identifier hs-var">pLower</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmType -&gt; LlvmType)
-&gt; (LlvmVar -&gt; LlvmType) -&gt; LlvmVar -&gt; LlvmType
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859686"><span class="hs-identifier hs-var">reg</span></a></span><span>
</span><span id="line-2071"></span><span>            </span><span id="local-6989586621681859689"><span class="annot"><span class="annottext">trash :: LlvmVar
</span><a href="#local-6989586621681859689"><span class="hs-identifier hs-var hs-var">trash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmLit -&gt; LlvmVar
</span><a href="GHC.Llvm.Types.html#LMLitVar"><span class="hs-identifier hs-var">LMLitVar</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmLit -&gt; LlvmVar) -&gt; LlvmLit -&gt; LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmLit
</span><a href="GHC.Llvm.Types.html#LMUndefLit"><span class="hs-identifier hs-var">LMUndefLit</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859688"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-2072"></span><span>            </span><span id="local-6989586621681859691"><span class="annot"><span class="annottext">rval :: LlvmVar
</span><a href="#local-6989586621681859691"><span class="hs-identifier hs-var hs-var">rval</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">GlobalReg -&gt; Bool
</span><a href="#local-6989586621681859673"><span class="hs-identifier hs-var">isLive</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859685"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859687"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859689"><span class="hs-identifier hs-var">trash</span></a></span><span>
</span><span id="line-2073"></span><span>            </span><span id="local-6989586621681859692"><span class="annot"><span class="annottext">alloc :: LlvmStatement
</span><a href="#local-6989586621681859692"><span class="hs-identifier hs-var hs-var">alloc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmExpression -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Assignment"><span class="hs-identifier hs-var">Assignment</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859686"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmStatement)
-&gt; LlvmExpression -&gt; LlvmStatement
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; Int -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Alloca"><span class="hs-identifier hs-var">Alloca</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#pLower"><span class="hs-identifier hs-var">pLower</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmType -&gt; LlvmType) -&gt; LlvmType -&gt; LlvmType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859686"><span class="hs-identifier hs-var">reg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-2074"></span><span>        </span><span class="annot"><span class="annottext">GlobalReg -&gt; LlvmM ()
</span><a href="GHC.CmmToLlvm.Base.html#markStackReg"><span class="hs-identifier hs-var">markStackReg</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859685"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-2075"></span><span>        </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmM LlvmStatements
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmStatements -&gt; LlvmM LlvmStatements)
-&gt; LlvmStatements -&gt; LlvmM LlvmStatements
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmStatement] -&gt; LlvmStatements
forall a. [a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#toOL"><span class="hs-identifier hs-var">toOL</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859692"><span class="hs-identifier hs-var">alloc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmVar -&gt; LMAlign -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Store"><span class="hs-identifier hs-var">Store</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859691"><span class="hs-identifier hs-var">rval</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859686"><span class="hs-identifier hs-var">reg</span></a></span><span> </span><span class="annot"><span class="annottext">LMAlign
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2076"></span><span>
</span><span id="line-2077"></span><span>  </span><span class="annot"><span class="annottext">(LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LlvmStatements] -&gt; LlvmStatements
forall a. [OrdList a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#concatOL"><span class="hs-identifier hs-var">concatOL</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmStatements]
</span><a href="#local-6989586621681859678"><span class="hs-identifier hs-var">stmtss</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatement -&gt; LlvmStatements
forall a. OrdList a -&gt; a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#snocOL"><span class="hs-operator hs-var">`snocOL`</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859694"><span class="hs-identifier hs-var">jumpToEntry</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-2078"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-2079"></span><span>    </span><span id="local-6989586621681859695"><span class="annot"><span class="annottext">CmmBlock
</span><a href="#local-6989586621681859695"><span class="hs-identifier hs-var">entryBlk</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[CmmBlock]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CmmBlock]
</span><a href="#local-6989586621681859660"><span class="hs-identifier hs-var">cmmBlocks</span></a></span><span>
</span><span id="line-2080"></span><span>    </span><span id="local-6989586621681859694"><span class="annot"><span class="annottext">jumpToEntry :: LlvmStatement
</span><a href="#local-6989586621681859694"><span class="hs-identifier hs-var hs-var">jumpToEntry</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Branch"><span class="hs-identifier hs-var">Branch</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmVar -&gt; LlvmStatement) -&gt; LlvmVar -&gt; LlvmStatement
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#blockIdToLlvm"><span class="hs-identifier hs-var">blockIdToLlvm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CmmBlock -&gt; BlockId
forall (x :: Extensibility). Block CmmNode C x -&gt; BlockId
forall (thing :: Extensibility -&gt; Extensibility -&gt; *)
       (x :: Extensibility).
NonLocal thing =&gt;
thing C x -&gt; BlockId
</span><a href="GHC.Cmm.Dataflow.Graph.html#entryLabel"><span class="hs-identifier hs-var">entryLabel</span></a></span><span> </span><span class="annot"><span class="annottext">CmmBlock
</span><a href="#local-6989586621681859695"><span class="hs-identifier hs-var">entryBlk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2081"></span><span>
</span><span id="line-2082"></span><span class="hs-comment">-- | Function epilogue. Load STG variables to use as argument for call.</span><span>
</span><span id="line-2083"></span><span class="hs-comment">-- STG Liveness optimisation done here.</span><span>
</span><span id="line-2084"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#funEpilogue"><span class="hs-identifier hs-type">funEpilogue</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LiveGlobalRegs"><span class="hs-identifier hs-type">LiveGlobalRegs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmStatements"><span class="hs-identifier hs-type">LlvmStatements</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2085"></span><span id="funEpilogue"><span class="annot"><span class="annottext">funEpilogue :: [GlobalReg] -&gt; LlvmM ([LlvmVar], LlvmStatements)
</span><a href="GHC.CmmToLlvm.CodeGen.html#funEpilogue"><span class="hs-identifier hs-var hs-var">funEpilogue</span></a></span></span><span> </span><span id="local-6989586621681859696"><span class="annot"><span class="annottext">[GlobalReg]
</span><a href="#local-6989586621681859696"><span class="hs-identifier hs-var">live</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2086"></span><span>    </span><span id="local-6989586621681859697"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859697"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM Platform
</span><a href="GHC.CmmToLlvm.Base.html#getPlatform"><span class="hs-identifier hs-var">getPlatform</span></a></span><span>
</span><span id="line-2087"></span><span>
</span><span id="line-2088"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859698"><span class="annot"><span class="annottext">paddingRegs :: [GlobalReg]
</span><a href="#local-6989586621681859698"><span class="hs-identifier hs-var hs-var">paddingRegs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; [GlobalReg] -&gt; [GlobalReg]
</span><a href="GHC.CmmToLlvm.Base.html#padLiveArgs"><span class="hs-identifier hs-var">padLiveArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859697"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalReg]
</span><a href="#local-6989586621681859696"><span class="hs-identifier hs-var">live</span></a></span><span>
</span><span id="line-2089"></span><span>
</span><span id="line-2090"></span><span>    </span><span class="hs-comment">-- Set to value or &quot;undef&quot; depending on whether the register is</span><span>
</span><span id="line-2091"></span><span>    </span><span class="hs-comment">-- actually live</span><span>
</span><span id="line-2092"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859702"><span class="annot"><span class="annottext">loadExpr :: GlobalReg -&gt; LlvmM (Maybe LlvmVar, LlvmStatements)
</span><a href="#local-6989586621681859702"><span class="hs-identifier hs-var hs-var">loadExpr</span></a></span></span><span> </span><span id="local-6989586621681859703"><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859703"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2093"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621681859704"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859704"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859705"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859705"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CmmReg -&gt; LlvmM (LlvmVar, LlvmType, LlvmStatements)
</span><a href="GHC.CmmToLlvm.CodeGen.html#getCmmRegVal"><span class="hs-identifier hs-var">getCmmRegVal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalReg -&gt; CmmReg
</span><a href="GHC.Cmm.Reg.html#CmmGlobal"><span class="hs-identifier hs-var">CmmGlobal</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859703"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2094"></span><span>          </span><span class="annot"><span class="annottext">(Maybe LlvmVar, LlvmStatements)
-&gt; LlvmM (Maybe LlvmVar, LlvmStatements)
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar -&gt; Maybe LlvmVar
forall a. a -&gt; Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmVar -&gt; Maybe LlvmVar) -&gt; LlvmVar -&gt; Maybe LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859704"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859705"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2095"></span><span>        </span><span id="local-6989586621681859706"><span class="annot"><span class="annottext">loadUndef :: GlobalReg -&gt; LlvmM (Maybe LlvmVar, LlvmStatements)
</span><a href="#local-6989586621681859706"><span class="hs-identifier hs-var hs-var">loadUndef</span></a></span></span><span> </span><span id="local-6989586621681859707"><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859707"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2096"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859708"><span class="annot"><span class="annottext">ty :: LlvmType
</span><a href="#local-6989586621681859708"><span class="hs-identifier hs-var hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#pLower"><span class="hs-identifier hs-var">pLower</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmType -&gt; LlvmType)
-&gt; (LlvmVar -&gt; LlvmType) -&gt; LlvmVar -&gt; LlvmType
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmVar -&gt; LlvmType) -&gt; LlvmVar -&gt; LlvmType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Platform -&gt; GlobalReg -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.Regs.html#lmGlobalRegVar"><span class="hs-identifier hs-var">lmGlobalRegVar</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859697"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859707"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2097"></span><span>          </span><span class="annot"><span class="annottext">(Maybe LlvmVar, LlvmStatements)
-&gt; LlvmM (Maybe LlvmVar, LlvmStatements)
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar -&gt; Maybe LlvmVar
forall a. a -&gt; Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmVar -&gt; Maybe LlvmVar) -&gt; LlvmVar -&gt; Maybe LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmLit -&gt; LlvmVar
</span><a href="GHC.Llvm.Types.html#LMLitVar"><span class="hs-identifier hs-var">LMLitVar</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmLit -&gt; LlvmVar) -&gt; LlvmLit -&gt; LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmLit
</span><a href="GHC.Llvm.Types.html#LMUndefLit"><span class="hs-identifier hs-var">LMUndefLit</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859708"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2098"></span><span>
</span><span id="line-2099"></span><span>    </span><span class="hs-comment">-- Note that floating-point registers in `activeStgRegs` must be sorted</span><span>
</span><span id="line-2100"></span><span>    </span><span class="hs-comment">-- according to the calling convention.</span><span>
</span><span id="line-2101"></span><span>    </span><span class="hs-comment">--  E.g. for X86:</span><span>
</span><span id="line-2102"></span><span>    </span><span class="hs-comment">--     GOOD: F1,D1,XMM1,F2,D2,XMM2,...</span><span>
</span><span id="line-2103"></span><span>    </span><span class="hs-comment">--     BAD : F1,F2,F3,D1,D2,D3,XMM1,XMM2,XMM3,...</span><span>
</span><span id="line-2104"></span><span>    </span><span class="hs-comment">--  As Fn, Dn and XMMn use the same register (XMMn) to be passed, we don't</span><span>
</span><span id="line-2105"></span><span>    </span><span class="hs-comment">--  want to pass F2 before D1 for example, otherwise we could get F2 -&gt; XMM1</span><span>
</span><span id="line-2106"></span><span>    </span><span class="hs-comment">--  and D1 -&gt; XMM2.</span><span>
</span><span id="line-2107"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859709"><span class="annot"><span class="annottext">allRegs :: [GlobalReg]
</span><a href="#local-6989586621681859709"><span class="hs-identifier hs-var hs-var">allRegs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; [GlobalReg]
</span><a href="GHC.Platform.Regs.html#activeStgRegs"><span class="hs-identifier hs-var">activeStgRegs</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859697"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-2108"></span><span>    </span><span id="local-6989586621681859710"><span class="annot"><span class="annottext">[(Maybe LlvmVar, LlvmStatements)]
</span><a href="#local-6989586621681859710"><span class="hs-identifier hs-var">loads</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[GlobalReg]
-&gt; (GlobalReg -&gt; LlvmM (Maybe LlvmVar, LlvmStatements))
-&gt; LlvmM [(Maybe LlvmVar, LlvmStatements)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><a href="../../base-4.18.3.0/src/Data.Traversable.html#forM/Data.Traversable.html#forM"><span class="hs-identifier hs-var">forM</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalReg]
</span><a href="#local-6989586621681859709"><span class="hs-identifier hs-var">allRegs</span></a></span><span> </span><span class="annot"><span class="annottext">((GlobalReg -&gt; LlvmM (Maybe LlvmVar, LlvmStatements))
 -&gt; LlvmM [(Maybe LlvmVar, LlvmStatements)])
-&gt; (GlobalReg -&gt; LlvmM (Maybe LlvmVar, LlvmStatements))
-&gt; LlvmM [(Maybe LlvmVar, LlvmStatements)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681859711"><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859711"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">if</span><span>
</span><span id="line-2109"></span><span>      </span><span class="hs-comment">-- load live registers</span><span>
</span><span id="line-2110"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859711"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg -&gt; [GlobalReg] -&gt; Bool
forall a. Eq a =&gt; a -&gt; [a] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#elem/Data.Foldable.html#elem"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalReg]
</span><a href="GHC.CmmToLlvm.Regs.html#alwaysLive"><span class="hs-identifier hs-var">alwaysLive</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GlobalReg -&gt; LlvmM (Maybe LlvmVar, LlvmStatements)
</span><a href="#local-6989586621681859702"><span class="hs-identifier hs-var">loadExpr</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859711"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-2111"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859711"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg -&gt; [GlobalReg] -&gt; Bool
forall a. Eq a =&gt; a -&gt; [a] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#elem/Data.Foldable.html#elem"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalReg]
</span><a href="#local-6989586621681859696"><span class="hs-identifier hs-var">live</span></a></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GlobalReg -&gt; LlvmM (Maybe LlvmVar, LlvmStatements)
</span><a href="#local-6989586621681859702"><span class="hs-identifier hs-var">loadExpr</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859711"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-2112"></span><span>      </span><span class="hs-comment">-- load all non Floating-Point Registers</span><span>
</span><span id="line-2113"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GlobalReg -&gt; Bool
</span><a href="GHC.CmmToLlvm.Base.html#isFPR"><span class="hs-identifier hs-var">isFPR</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859711"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GlobalReg -&gt; LlvmM (Maybe LlvmVar, LlvmStatements)
</span><a href="#local-6989586621681859706"><span class="hs-identifier hs-var">loadUndef</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859711"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-2114"></span><span>      </span><span class="hs-comment">-- load padding Floating-Point Registers</span><span>
</span><span id="line-2115"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859711"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg -&gt; [GlobalReg] -&gt; Bool
forall a. Eq a =&gt; a -&gt; [a] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#elem/Data.Foldable.html#elem"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalReg]
</span><a href="#local-6989586621681859698"><span class="hs-identifier hs-var">paddingRegs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GlobalReg -&gt; LlvmM (Maybe LlvmVar, LlvmStatements)
</span><a href="#local-6989586621681859706"><span class="hs-identifier hs-var">loadUndef</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg
</span><a href="#local-6989586621681859711"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-2116"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Maybe LlvmVar, LlvmStatements)
-&gt; LlvmM (Maybe LlvmVar, LlvmStatements)
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe LlvmVar
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2117"></span><span>
</span><span id="line-2118"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681859714"><span class="annot"><span class="annottext">[Maybe LlvmVar]
</span><a href="#local-6989586621681859714"><span class="hs-identifier hs-var">vars</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859715"><span class="annot"><span class="annottext">[LlvmStatements]
</span><a href="#local-6989586621681859715"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Maybe LlvmVar, LlvmStatements)]
-&gt; ([Maybe LlvmVar], [LlvmStatements])
forall a b. [(a, b)] -&gt; ([a], [b])
</span><a href="../../base-4.18.3.0/src/GHC.List.html#unzip/GHC.List.html#unzip"><span class="hs-identifier hs-var">unzip</span></a></span><span> </span><span class="annot"><span class="annottext">[(Maybe LlvmVar, LlvmStatements)]
</span><a href="#local-6989586621681859710"><span class="hs-identifier hs-var">loads</span></a></span><span>
</span><span id="line-2119"></span><span>    </span><span class="annot"><span class="annottext">([LlvmVar], LlvmStatements) -&gt; LlvmM ([LlvmVar], LlvmStatements)
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Maybe LlvmVar] -&gt; [LlvmVar]
forall a. [Maybe a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/Data.Maybe.html#catMaybes/Data.Maybe.html#catMaybes"><span class="hs-identifier hs-var">catMaybes</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe LlvmVar]
</span><a href="#local-6989586621681859714"><span class="hs-identifier hs-var">vars</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmStatements] -&gt; LlvmStatements
forall a. [OrdList a] -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#concatOL"><span class="hs-identifier hs-var">concatOL</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmStatements]
</span><a href="#local-6989586621681859715"><span class="hs-identifier hs-var">stmts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2120"></span><span>
</span><span id="line-2121"></span><span class="hs-comment">-- | Get a function pointer to the CLabel specified.</span><span>
</span><span id="line-2122"></span><span class="hs-comment">--</span><span>
</span><span id="line-2123"></span><span class="hs-comment">-- This is for Haskell functions, function type is assumed, so doesn't work</span><span>
</span><span id="line-2124"></span><span class="hs-comment">-- with foreign functions.</span><span>
</span><span id="line-2125"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#getHsFunc"><span class="hs-identifier hs-type">getHsFunc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LiveGlobalRegs"><span class="hs-identifier hs-type">LiveGlobalRegs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.CLabel.html#CLabel"><span class="hs-identifier hs-type">CLabel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#ExprData"><span class="hs-identifier hs-type">ExprData</span></a></span><span>
</span><span id="line-2126"></span><span id="getHsFunc"><span class="annot"><span class="annottext">getHsFunc :: [GlobalReg] -&gt; CLabel -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#getHsFunc"><span class="hs-identifier hs-var hs-var">getHsFunc</span></a></span></span><span> </span><span id="local-6989586621681859716"><span class="annot"><span class="annottext">[GlobalReg]
</span><a href="#local-6989586621681859716"><span class="hs-identifier hs-var">live</span></a></span></span><span> </span><span id="local-6989586621681859717"><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621681859717"><span class="hs-identifier hs-var">lbl</span></a></span></span><span>
</span><span id="line-2127"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681859718"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859718"><span class="hs-identifier hs-var">fty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[GlobalReg] -&gt; LlvmM LlvmType
</span><a href="GHC.CmmToLlvm.Base.html#llvmFunTy"><span class="hs-identifier hs-var">llvmFunTy</span></a></span><span> </span><span class="annot"><span class="annottext">[GlobalReg]
</span><a href="#local-6989586621681859716"><span class="hs-identifier hs-var">live</span></a></span><span>
</span><span id="line-2128"></span><span>       </span><span id="local-6989586621681859719"><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681859719"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CLabel -&gt; LlvmM LMString
</span><a href="GHC.CmmToLlvm.Base.html#strCLabel_llvm"><span class="hs-identifier hs-var">strCLabel_llvm</span></a></span><span> </span><span class="annot"><span class="annottext">CLabel
</span><a href="#local-6989586621681859717"><span class="hs-identifier hs-var">lbl</span></a></span><span>
</span><span id="line-2129"></span><span>       </span><span class="annot"><span class="annottext">LMString -&gt; LlvmType -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#getHsFunc%27"><span class="hs-identifier hs-var">getHsFunc'</span></a></span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681859719"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859718"><span class="hs-identifier hs-var">fty</span></a></span><span>
</span><span id="line-2130"></span><span>
</span><span id="line-2131"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#getHsFunc%27"><span class="hs-identifier hs-type">getHsFunc'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LMString"><span class="hs-identifier hs-type">LMString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmType"><span class="hs-identifier hs-type">LlvmType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#ExprData"><span class="hs-identifier hs-type">ExprData</span></a></span><span>
</span><span id="line-2132"></span><span id="getHsFunc%27"><span class="annot"><span class="annottext">getHsFunc' :: LMString -&gt; LlvmType -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#getHsFunc%27"><span class="hs-identifier hs-var hs-var">getHsFunc'</span></a></span></span><span> </span><span id="local-6989586621681859720"><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681859720"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621681859721"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859721"><span class="hs-identifier hs-var">fty</span></a></span></span><span>
</span><span id="line-2133"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681859722"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859722"><span class="hs-identifier hs-var">fun</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LMString -&gt; LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.Base.html#getGlobalPtr"><span class="hs-identifier hs-var">getGlobalPtr</span></a></span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="#local-6989586621681859720"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-2134"></span><span>       </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#getVarType"><span class="hs-identifier hs-var">getVarType</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859722"><span class="hs-identifier hs-var">fun</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859721"><span class="hs-identifier hs-var">fty</span></a></span><span>
</span><span id="line-2135"></span><span>         </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">ExprData -&gt; LlvmM ExprData
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859722"><span class="hs-identifier hs-var">fun</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-2136"></span><span>         </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681859723"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859723"><span class="hs-identifier hs-var">v1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859724"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859724"><span class="hs-identifier hs-var">s1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#pLift"><span class="hs-identifier hs-var">pLift</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859721"><span class="hs-identifier hs-var">fty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2137"></span><span>                               </span><span class="annot"><span class="annottext">(LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp -&gt; LlvmVar -&gt; LlvmType -&gt; LlvmExpression
</span><a href="GHC.Llvm.Syntax.html#Cast"><span class="hs-identifier hs-var">Cast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmCastOp
</span><a href="GHC.Llvm.Types.html#LM_Bitcast"><span class="hs-identifier hs-var">LM_Bitcast</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859722"><span class="hs-identifier hs-var">fun</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#pLift"><span class="hs-identifier hs-var">pLift</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859721"><span class="hs-identifier hs-var">fty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2138"></span><span>                 </span><span class="annot"><span class="annottext">ExprData -&gt; LlvmM ExprData
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859723"><span class="hs-identifier hs-var">v1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatement -&gt; LlvmStatements
forall a. a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-var">unitOL</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859724"><span class="hs-identifier hs-var">s1</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-2139"></span><span>
</span><span id="line-2140"></span><span class="annot"><span class="hs-comment">-- | Create a new local var</span></span><span>
</span><span id="line-2141"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#mkLocalVar"><span class="hs-identifier hs-type">mkLocalVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmType"><span class="hs-identifier hs-type">LlvmType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span>
</span><span id="line-2142"></span><span id="mkLocalVar"><span class="annot"><span class="annottext">mkLocalVar :: LlvmType -&gt; LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#mkLocalVar"><span class="hs-identifier hs-var hs-var">mkLocalVar</span></a></span></span><span> </span><span id="local-6989586621681859725"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859725"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2143"></span><span>    </span><span id="local-6989586621681859726"><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621681859726"><span class="hs-identifier hs-var">un</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM Unique
forall (m :: * -&gt; *). MonadUnique m =&gt; m Unique
</span><a href="GHC.Types.Unique.Supply.html#getUniqueM"><span class="hs-identifier hs-var">getUniqueM</span></a></span><span>
</span><span id="line-2144"></span><span>    </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmM LlvmVar
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmVar -&gt; LlvmM LlvmVar) -&gt; LlvmVar -&gt; LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Unique -&gt; LlvmType -&gt; LlvmVar
</span><a href="GHC.Llvm.Types.html#LMLocalVar"><span class="hs-identifier hs-var">LMLocalVar</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621681859726"><span class="hs-identifier hs-var">un</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859725"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-2145"></span><span>
</span><span id="line-2146"></span><span>
</span><span id="line-2147"></span><span class="annot"><span class="hs-comment">-- | Execute an expression, assigning result to a var</span></span><span>
</span><span id="line-2148"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-type">doExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmType"><span class="hs-identifier hs-type">LlvmType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Llvm.Syntax.html#LlvmExpression"><span class="hs-identifier hs-type">LlvmExpression</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Llvm.Syntax.html#LlvmStatement"><span class="hs-identifier hs-type">LlvmStatement</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2149"></span><span id="doExpr"><span class="annot"><span class="annottext">doExpr :: LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var hs-var">doExpr</span></a></span></span><span> </span><span id="local-6989586621681859727"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859727"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681859728"><span class="annot"><span class="annottext">LlvmExpression
</span><a href="#local-6989586621681859728"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2150"></span><span>    </span><span id="local-6989586621681859729"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859729"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#mkLocalVar"><span class="hs-identifier hs-var">mkLocalVar</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859727"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-2151"></span><span>    </span><span class="annot"><span class="annottext">(LlvmVar, LlvmStatement) -&gt; LlvmM (LlvmVar, LlvmStatement)
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859729"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmVar -&gt; LlvmExpression -&gt; LlvmStatement
</span><a href="GHC.Llvm.Syntax.html#Assignment"><span class="hs-identifier hs-var">Assignment</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859729"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmExpression
</span><a href="#local-6989586621681859728"><span class="hs-identifier hs-var">expr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2152"></span><span>
</span><span id="line-2153"></span><span>
</span><span id="line-2154"></span><span class="annot"><span class="hs-comment">-- | Expand CmmRegOff</span></span><span>
</span><span id="line-2155"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#expandCmmReg"><span class="hs-identifier hs-type">expandCmmReg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Platform.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmReg"><span class="hs-identifier hs-type">CmmReg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span>
</span><span id="line-2156"></span><span id="expandCmmReg"><span class="annot"><span class="annottext">expandCmmReg :: Platform -&gt; (CmmReg, Int) -&gt; CmmExpr
</span><a href="GHC.CmmToLlvm.CodeGen.html#expandCmmReg"><span class="hs-identifier hs-var hs-var">expandCmmReg</span></a></span></span><span> </span><span id="local-6989586621681859730"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859730"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681859731"><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621681859731"><span class="hs-identifier hs-var">reg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859732"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859732"><span class="hs-identifier hs-var">off</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-2157"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681859733"><span class="annot"><span class="annottext">width :: Width
</span><a href="#local-6989586621681859733"><span class="hs-identifier hs-var hs-var">width</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmType -&gt; Width
</span><a href="GHC.Cmm.Type.html#typeWidth"><span class="hs-identifier hs-var">typeWidth</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; CmmReg -&gt; CmmType
</span><a href="GHC.Cmm.Reg.html#cmmRegType"><span class="hs-identifier hs-var">cmmRegType</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859730"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621681859731"><span class="hs-identifier hs-var">reg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2158"></span><span>        </span><span id="local-6989586621681859736"><span class="annot"><span class="annottext">voff :: CmmExpr
</span><a href="#local-6989586621681859736"><span class="hs-identifier hs-var hs-var">voff</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmLit -&gt; CmmExpr
</span><a href="GHC.Cmm.Expr.html#CmmLit"><span class="hs-identifier hs-var">CmmLit</span></a></span><span> </span><span class="annot"><span class="annottext">(CmmLit -&gt; CmmExpr) -&gt; CmmLit -&gt; CmmExpr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Width -&gt; CmmLit
</span><a href="GHC.Cmm.Expr.html#CmmInt"><span class="hs-identifier hs-var">CmmInt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Real.html#fromIntegral/GHC.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681859732"><span class="hs-identifier hs-var">off</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859733"><span class="hs-identifier hs-var">width</span></a></span><span>
</span><span id="line-2159"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">MachOp -&gt; [CmmExpr] -&gt; CmmExpr
</span><a href="GHC.Cmm.Expr.html#CmmMachOp"><span class="hs-identifier hs-var">CmmMachOp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; MachOp
</span><a href="GHC.Cmm.MachOp.html#MO_Add"><span class="hs-identifier hs-var">MO_Add</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681859733"><span class="hs-identifier hs-var">width</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">CmmReg -&gt; CmmExpr
</span><a href="GHC.Cmm.Expr.html#CmmReg"><span class="hs-identifier hs-var">CmmReg</span></a></span><span> </span><span class="annot"><span class="annottext">CmmReg
</span><a href="#local-6989586621681859731"><span class="hs-identifier hs-var">reg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859736"><span class="hs-identifier hs-var">voff</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2160"></span><span>
</span><span id="line-2161"></span><span>
</span><span id="line-2162"></span><span class="annot"><span class="hs-comment">-- | Convert a block id into a appropriate Llvm label</span></span><span>
</span><span id="line-2163"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#blockIdToLlvm"><span class="hs-identifier hs-type">blockIdToLlvm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.BlockId.html#BlockId"><span class="hs-identifier hs-type">BlockId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span>
</span><span id="line-2164"></span><span id="blockIdToLlvm"><span class="annot"><span class="annottext">blockIdToLlvm :: BlockId -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#blockIdToLlvm"><span class="hs-identifier hs-var hs-var">blockIdToLlvm</span></a></span></span><span> </span><span id="local-6989586621681859737"><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621681859737"><span class="hs-identifier hs-var">bid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Unique -&gt; LlvmType -&gt; LlvmVar
</span><a href="GHC.Llvm.Types.html#LMLocalVar"><span class="hs-identifier hs-var">LMLocalVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BlockId -&gt; Unique
forall a. Uniquable a =&gt; a -&gt; Unique
</span><a href="GHC.Types.Unique.html#getUnique"><span class="hs-identifier hs-var">getUnique</span></a></span><span> </span><span class="annot"><span class="annottext">BlockId
</span><a href="#local-6989586621681859737"><span class="hs-identifier hs-var">bid</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#LMLabel"><span class="hs-identifier hs-var">LMLabel</span></a></span><span>
</span><span id="line-2165"></span><span>
</span><span id="line-2166"></span><span class="annot"><span class="hs-comment">-- | Create Llvm int Literal</span></span><span>
</span><span id="line-2167"></span><span id="local-6989586621681857171"><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#mkIntLit"><span class="hs-identifier hs-type">mkIntLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Real.html#Integral/GHC.Real.html#Integral"><span class="hs-identifier hs-type">Integral</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681857171"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmType"><span class="hs-identifier hs-type">LlvmType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681857171"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span></span><span>
</span><span id="line-2168"></span><span id="mkIntLit"><span class="annot"><span class="annottext">mkIntLit :: forall a. Integral a =&gt; LlvmType -&gt; a -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#mkIntLit"><span class="hs-identifier hs-var hs-var">mkIntLit</span></a></span></span><span> </span><span id="local-6989586621681859742"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859742"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681859743"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681859743"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmLit -&gt; LlvmVar
</span><a href="GHC.Llvm.Types.html#LMLitVar"><span class="hs-identifier hs-var">LMLitVar</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmLit -&gt; LlvmVar) -&gt; LlvmLit -&gt; LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; LlvmType -&gt; LlvmLit
</span><a href="GHC.Llvm.Types.html#LMIntLit"><span class="hs-identifier hs-var">LMIntLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Integer
forall a. Integral a =&gt; a -&gt; Integer
</span><a href="../../base-4.18.3.0/src/GHC.Real.html#toInteger/GHC.Real.html#toInteger"><span class="hs-identifier hs-var">toInteger</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681859743"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859742"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-2169"></span><span>
</span><span id="line-2170"></span><span class="annot"><span class="hs-comment">-- | Convert int type to a LLvmVar of word or i32 size</span></span><span>
</span><span id="line-2171"></span><span id="local-6989586621681857220"><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#toI32"><span class="hs-identifier hs-type">toI32</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Real.html#Integral/GHC.Real.html#Integral"><span class="hs-identifier hs-type">Integral</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681857220"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681857220"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span></span><span>
</span><span id="line-2172"></span><span id="toI32"><span class="annot"><span class="annottext">toI32 :: forall a. Integral a =&gt; a -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#toI32"><span class="hs-identifier hs-var hs-var">toI32</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; a -&gt; LlvmVar
forall a. Integral a =&gt; LlvmType -&gt; a -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#mkIntLit"><span class="hs-identifier hs-var">mkIntLit</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="GHC.Llvm.Types.html#i32"><span class="hs-identifier hs-var">i32</span></a></span><span>
</span><span id="line-2173"></span><span>
</span><span id="line-2174"></span><span id="local-6989586621681857231"><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#toIWord"><span class="hs-identifier hs-type">toIWord</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Real.html#Integral/GHC.Real.html#Integral"><span class="hs-identifier hs-type">Integral</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681857231"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Platform.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681857231"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span></span><span>
</span><span id="line-2175"></span><span id="toIWord"><span class="annot"><span class="annottext">toIWord :: forall a. Integral a =&gt; Platform -&gt; a -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#toIWord"><span class="hs-identifier hs-var hs-var">toIWord</span></a></span></span><span> </span><span id="local-6989586621681859748"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859748"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; a -&gt; LlvmVar
forall a. Integral a =&gt; LlvmType -&gt; a -&gt; LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#mkIntLit"><span class="hs-identifier hs-var">mkIntLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; LlvmType
</span><a href="GHC.Llvm.Types.html#llvmWord"><span class="hs-identifier hs-var">llvmWord</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681859748"><span class="hs-identifier hs-var">platform</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2176"></span><span>
</span><span id="line-2177"></span><span>
</span><span id="line-2178"></span><span class="annot"><span class="hs-comment">-- | Error functions</span></span><span>
</span><span id="line-2179"></span><span id="local-6989586621681857096"><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#panic"><span class="hs-identifier hs-type">panic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Stack.Types.html#HasCallStack/GHC.Stack.Types.html#HasCallStack"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#String/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681857096"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-2180"></span><span id="panic"><span class="annot"><span class="annottext">panic :: forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#panic"><span class="hs-identifier hs-var hs-var">panic</span></a></span></span><span> </span><span id="local-6989586621681859752"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681859752"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; a
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">Panic.panic</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; a) -&gt; String -&gt; a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC.CmmToLlvm.CodeGen.&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681859752"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-2181"></span><span>
</span><span id="line-2182"></span><span id="local-6989586621681857201"><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#pprPanic"><span class="hs-identifier hs-type">pprPanic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Stack.Types.html#HasCallStack/GHC.Stack.Types.html#HasCallStack"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#String/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681857201"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-2183"></span><span id="pprPanic"><span class="annot"><span class="annottext">pprPanic :: forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#pprPanic"><span class="hs-identifier hs-var hs-var">pprPanic</span></a></span></span><span> </span><span id="local-6989586621681859757"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681859757"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621681859758"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681859758"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; a
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">Panic.pprPanic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;GHC.CmmToLlvm.CodeGen.&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681859757"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621681859758"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-2184"></span><span>
</span><span id="line-2185"></span><span>
</span><span id="line-2186"></span><span class="annot"><span class="hs-comment">-- | Returns TBAA meta data by unique</span></span><span>
</span><span id="line-2187"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#getTBAAMeta"><span class="hs-identifier hs-type">getTBAAMeta</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Unique.html#Unique"><span class="hs-identifier hs-type">Unique</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Llvm.MetaData.html#MetaAnnot"><span class="hs-identifier hs-type">MetaAnnot</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2188"></span><span id="getTBAAMeta"><span class="annot"><span class="annottext">getTBAAMeta :: Unique -&gt; LlvmM [MetaAnnot]
</span><a href="GHC.CmmToLlvm.CodeGen.html#getTBAAMeta"><span class="hs-identifier hs-var hs-var">getTBAAMeta</span></a></span></span><span> </span><span id="local-6989586621681859760"><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621681859760"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2189"></span><span>    </span><span id="local-6989586621681859761"><span class="annot"><span class="annottext">Maybe MetaId
</span><a href="#local-6989586621681859761"><span class="hs-identifier hs-var">mi</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Unique -&gt; LlvmM (Maybe MetaId)
</span><a href="GHC.CmmToLlvm.Base.html#getUniqMeta"><span class="hs-identifier hs-var">getUniqMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621681859760"><span class="hs-identifier hs-var">u</span></a></span><span>
</span><span id="line-2190"></span><span>    </span><span class="annot"><span class="annottext">[MetaAnnot] -&gt; LlvmM [MetaAnnot]
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LMString -&gt; MetaExpr -&gt; MetaAnnot
</span><a href="GHC.Llvm.MetaData.html#MetaAnnot"><span class="hs-identifier hs-var">MetaAnnot</span></a></span><span> </span><span class="annot"><span class="annottext">LMString
</span><a href="GHC.CmmToLlvm.Regs.html#tbaa"><span class="hs-identifier hs-var">tbaa</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MetaId -&gt; MetaExpr
</span><a href="GHC.Llvm.MetaData.html#MetaNode"><span class="hs-identifier hs-var">MetaNode</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681859766"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681859766"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681859766"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe MetaId
</span><a href="#local-6989586621681859761"><span class="hs-identifier hs-var">mi</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2191"></span><span>
</span><span id="line-2192"></span><span class="annot"><span class="hs-comment">-- | Returns TBAA meta data for given register</span></span><span>
</span><span id="line-2193"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#getTBAARegMeta"><span class="hs-identifier hs-type">getTBAARegMeta</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Reg.html#GlobalReg"><span class="hs-identifier hs-type">GlobalReg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Llvm.MetaData.html#MetaAnnot"><span class="hs-identifier hs-type">MetaAnnot</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2194"></span><span id="getTBAARegMeta"><span class="annot"><span class="annottext">getTBAARegMeta :: GlobalReg -&gt; LlvmM [MetaAnnot]
</span><a href="GHC.CmmToLlvm.CodeGen.html#getTBAARegMeta"><span class="hs-identifier hs-var hs-var">getTBAARegMeta</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Unique -&gt; LlvmM [MetaAnnot]
</span><a href="GHC.CmmToLlvm.CodeGen.html#getTBAAMeta"><span class="hs-identifier hs-var">getTBAAMeta</span></a></span><span> </span><span class="annot"><span class="annottext">(Unique -&gt; LlvmM [MetaAnnot])
-&gt; (GlobalReg -&gt; Unique) -&gt; GlobalReg -&gt; LlvmM [MetaAnnot]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">GlobalReg -&gt; Unique
</span><a href="GHC.CmmToLlvm.Regs.html#getTBAA"><span class="hs-identifier hs-var">getTBAA</span></a></span><span>
</span><span id="line-2195"></span><span>
</span><span id="line-2196"></span><span>
</span><span id="line-2197"></span><span class="annot"><span class="hs-comment">-- | A more convenient way of accumulating LLVM statements and declarations.</span></span><span>
</span><span id="line-2198"></span><span class="hs-keyword">data</span><span> </span><span id="LlvmAccum"><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmAccum"><span class="hs-identifier hs-var">LlvmAccum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="LlvmAccum"><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmAccum"><span class="hs-identifier hs-var">LlvmAccum</span></a></span></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmStatements"><span class="hs-identifier hs-type">LlvmStatements</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmCmmDecl"><span class="hs-identifier hs-type">LlvmCmmDecl</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-2199"></span><span>
</span><span id="line-2200"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681859770"><span id="local-6989586621681859774"><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#Semigroup/GHC.Base.html#Semigroup"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmAccum"><span class="hs-identifier hs-type">LlvmAccum</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2201"></span><span>  </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmAccum"><span class="hs-identifier hs-type">LlvmAccum</span></a></span><span> </span><span id="local-6989586621681859783"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859783"><span class="hs-identifier hs-var">stmtsA</span></a></span></span><span> </span><span id="local-6989586621681859784"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859784"><span class="hs-identifier hs-var">declsA</span></a></span></span><span> </span><span id="local-6989586621681859785"><span class="annot"><span class="annottext">&lt;&gt; :: LlvmAccum -&gt; LlvmAccum -&gt; LlvmAccum
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%3C%3E/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></a></span></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmAccum"><span class="hs-identifier hs-type">LlvmAccum</span></a></span><span> </span><span id="local-6989586621681859786"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859786"><span class="hs-identifier hs-var">stmtsB</span></a></span></span><span> </span><span id="local-6989586621681859787"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859787"><span class="hs-identifier hs-var">declsB</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-2202"></span><span>        </span><span class="annot"><span class="annottext">LlvmStatements -&gt; [LlvmCmmDecl] -&gt; LlvmAccum
</span><a href="GHC.CmmToLlvm.CodeGen.html#LlvmAccum"><span class="hs-identifier hs-var">LlvmAccum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859783"><span class="hs-identifier hs-var">stmtsA</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; LlvmStatements -&gt; LlvmStatements
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%3C%3E/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">Semigroup.&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859786"><span class="hs-identifier hs-var">stmtsB</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859784"><span class="hs-identifier hs-var">declsA</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl] -&gt; [LlvmCmmDecl] -&gt; [LlvmCmmDecl]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%3C%3E/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">Semigroup.&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859787"><span class="hs-identifier hs-var">declsB</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2203"></span><span>
</span><span id="line-2204"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681859793"><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#Monoid/GHC.Base.html#Monoid"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmAccum"><span class="hs-identifier hs-type">LlvmAccum</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-2205"></span><span>    </span><span id="local-6989586621681859796"><span class="annot"><span class="annottext">mempty :: LlvmAccum
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mempty/GHC.Base.html#mempty"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; [LlvmCmmDecl] -&gt; LlvmAccum
</span><a href="GHC.CmmToLlvm.CodeGen.html#LlvmAccum"><span class="hs-identifier hs-var">LlvmAccum</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements
forall a. OrdList a
</span><a href="GHC.Data.OrdList.html#nilOL"><span class="hs-identifier hs-var">nilOL</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2206"></span><span>    </span><span id="local-6989586621681859798"><span class="annot"><span class="annottext">mappend :: LlvmAccum -&gt; LlvmAccum -&gt; LlvmAccum
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mappend/GHC.Base.html#mappend"><span class="hs-identifier hs-var hs-var hs-var hs-var">mappend</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmAccum -&gt; LlvmAccum -&gt; LlvmAccum
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%3C%3E/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">(Semigroup.&lt;&gt;)</span></a></span><span>
</span><span id="line-2207"></span><span>
</span><span id="line-2208"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#liftExprData"><span class="hs-identifier hs-type">liftExprData</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#ExprData"><span class="hs-identifier hs-type">ExprData</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Writer.Lazy.html#WriterT/Control.Monad.Trans.Writer.Lazy.html#WriterT"><span class="hs-identifier hs-type">WriterT</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmAccum"><span class="hs-identifier hs-type">LlvmAccum</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span>
</span><span id="line-2209"></span><span id="liftExprData"><span class="annot"><span class="annottext">liftExprData :: LlvmM ExprData -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#liftExprData"><span class="hs-identifier hs-var hs-var">liftExprData</span></a></span></span><span> </span><span id="local-6989586621681859799"><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859799"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2210"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681859800"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859800"><span class="hs-identifier hs-var">var</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859801"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859801"><span class="hs-identifier hs-var">stmts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859802"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859802"><span class="hs-identifier hs-var">decls</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData -&gt; WriterT LlvmAccum LlvmM ExprData
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; WriterT LlvmAccum m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Class.html#lift/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData
</span><a href="#local-6989586621681859799"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-2211"></span><span>    </span><span class="annot"><span class="annottext">LlvmAccum -&gt; WriterT LlvmAccum LlvmM ()
forall (m :: * -&gt; *) w. Monad m =&gt; w -&gt; WriterT w m ()
</span><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Writer.Lazy.html#tell/Control.Monad.Trans.Writer.Lazy.html#tell"><span class="hs-identifier hs-var">tell</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmAccum -&gt; WriterT LlvmAccum LlvmM ())
-&gt; LlvmAccum -&gt; WriterT LlvmAccum LlvmM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; [LlvmCmmDecl] -&gt; LlvmAccum
</span><a href="GHC.CmmToLlvm.CodeGen.html#LlvmAccum"><span class="hs-identifier hs-var">LlvmAccum</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859801"><span class="hs-identifier hs-var">stmts</span></a></span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859802"><span class="hs-identifier hs-var">decls</span></a></span><span>
</span><span id="line-2212"></span><span>    </span><span class="annot"><span class="annottext">LlvmVar -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a. a -&gt; WriterT LlvmAccum LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859800"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-2213"></span><span>
</span><span id="line-2214"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#statement"><span class="hs-identifier hs-type">statement</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Llvm.Syntax.html#LlvmStatement"><span class="hs-identifier hs-type">LlvmStatement</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Writer.Lazy.html#WriterT/Control.Monad.Trans.Writer.Lazy.html#WriterT"><span class="hs-identifier hs-type">WriterT</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmAccum"><span class="hs-identifier hs-type">LlvmAccum</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-2215"></span><span id="statement"><span class="annot"><span class="annottext">statement :: LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
</span><a href="GHC.CmmToLlvm.CodeGen.html#statement"><span class="hs-identifier hs-var hs-var">statement</span></a></span></span><span> </span><span id="local-6989586621681859803"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859803"><span class="hs-identifier hs-var">stmt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmAccum -&gt; WriterT LlvmAccum LlvmM ()
forall (m :: * -&gt; *) w. Monad m =&gt; w -&gt; WriterT w m ()
</span><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Writer.Lazy.html#tell/Control.Monad.Trans.Writer.Lazy.html#tell"><span class="hs-identifier hs-var">tell</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmAccum -&gt; WriterT LlvmAccum LlvmM ())
-&gt; LlvmAccum -&gt; WriterT LlvmAccum LlvmM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatements -&gt; [LlvmCmmDecl] -&gt; LlvmAccum
</span><a href="GHC.CmmToLlvm.CodeGen.html#LlvmAccum"><span class="hs-identifier hs-var">LlvmAccum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmStatement -&gt; LlvmStatements
forall a. a -&gt; OrdList a
</span><a href="GHC.Data.OrdList.html#unitOL"><span class="hs-identifier hs-var">unitOL</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859803"><span class="hs-identifier hs-var">stmt</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-2216"></span><span>
</span><span id="line-2217"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-type">doExprW</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmType"><span class="hs-identifier hs-type">LlvmType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Llvm.Syntax.html#LlvmExpression"><span class="hs-identifier hs-type">LlvmExpression</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Writer.Lazy.html#WriterT/Control.Monad.Trans.Writer.Lazy.html#WriterT"><span class="hs-identifier hs-type">WriterT</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmAccum"><span class="hs-identifier hs-type">LlvmAccum</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span>
</span><span id="line-2218"></span><span id="doExprW"><span class="annot"><span class="annottext">doExprW :: LlvmType -&gt; LlvmExpression -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExprW"><span class="hs-identifier hs-var hs-var">doExprW</span></a></span></span><span> </span><span id="local-6989586621681859804"><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859804"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681859805"><span class="annot"><span class="annottext">LlvmExpression
</span><a href="#local-6989586621681859805"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2219"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681859806"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859806"><span class="hs-identifier hs-var">var</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681859807"><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859807"><span class="hs-identifier hs-var">stmt</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LlvmM (LlvmVar, LlvmStatement)
-&gt; WriterT LlvmAccum LlvmM (LlvmVar, LlvmStatement)
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; WriterT LlvmAccum m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Class.html#lift/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmM (LlvmVar, LlvmStatement)
 -&gt; WriterT LlvmAccum LlvmM (LlvmVar, LlvmStatement))
-&gt; LlvmM (LlvmVar, LlvmStatement)
-&gt; WriterT LlvmAccum LlvmM (LlvmVar, LlvmStatement)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType -&gt; LlvmExpression -&gt; LlvmM (LlvmVar, LlvmStatement)
</span><a href="GHC.CmmToLlvm.CodeGen.html#doExpr"><span class="hs-identifier hs-var">doExpr</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmType
</span><a href="#local-6989586621681859804"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmExpression
</span><a href="#local-6989586621681859805"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-2220"></span><span>    </span><span class="annot"><span class="annottext">LlvmStatement -&gt; WriterT LlvmAccum LlvmM ()
</span><a href="GHC.CmmToLlvm.CodeGen.html#statement"><span class="hs-identifier hs-var">statement</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmStatement
</span><a href="#local-6989586621681859807"><span class="hs-identifier hs-var">stmt</span></a></span><span>
</span><span id="line-2221"></span><span>    </span><span class="annot"><span class="annottext">LlvmVar -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a. a -&gt; WriterT LlvmAccum LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859806"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-2222"></span><span>
</span><span id="line-2223"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-type">exprToVarW</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Writer.Lazy.html#WriterT/Control.Monad.Trans.Writer.Lazy.html#WriterT"><span class="hs-identifier hs-type">WriterT</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmAccum"><span class="hs-identifier hs-type">LlvmAccum</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span>
</span><span id="line-2224"></span><span id="exprToVarW"><span class="annot"><span class="annottext">exprToVarW :: CmmExpr -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVarW"><span class="hs-identifier hs-var hs-var">exprToVarW</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#liftExprData"><span class="hs-identifier hs-var">liftExprData</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmM ExprData -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; (CmmExpr -&gt; LlvmM ExprData)
-&gt; CmmExpr
-&gt; WriterT LlvmAccum LlvmM LlvmVar
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#exprToVar"><span class="hs-identifier hs-var">exprToVar</span></a></span><span>
</span><span id="line-2225"></span><span>
</span><span id="line-2226"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#runExprData"><span class="hs-identifier hs-type">runExprData</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Writer.Lazy.html#WriterT/Control.Monad.Trans.Writer.Lazy.html#WriterT"><span class="hs-identifier hs-type">WriterT</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmAccum"><span class="hs-identifier hs-type">LlvmAccum</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#ExprData"><span class="hs-identifier hs-type">ExprData</span></a></span><span>
</span><span id="line-2227"></span><span id="runExprData"><span class="annot"><span class="annottext">runExprData :: WriterT LlvmAccum LlvmM LlvmVar -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#runExprData"><span class="hs-identifier hs-var hs-var">runExprData</span></a></span></span><span> </span><span id="local-6989586621681859808"><span class="annot"><span class="annottext">WriterT LlvmAccum LlvmM LlvmVar
</span><a href="#local-6989586621681859808"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2228"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681859809"><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859809"><span class="hs-identifier hs-var">var</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmAccum"><span class="hs-identifier hs-type">LlvmAccum</span></a></span><span> </span><span id="local-6989586621681859810"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859810"><span class="hs-identifier hs-var">stmts</span></a></span></span><span> </span><span id="local-6989586621681859811"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859811"><span class="hs-identifier hs-var">decls</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">WriterT LlvmAccum LlvmM LlvmVar -&gt; LlvmM (LlvmVar, LlvmAccum)
forall w (m :: * -&gt; *) a. WriterT w m a -&gt; m (a, w)
</span><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Writer.Lazy.html#runWriterT/Control.Monad.Trans.Writer.Lazy.html#runWriterT"><span class="hs-identifier hs-var">runWriterT</span></a></span><span> </span><span class="annot"><span class="annottext">WriterT LlvmAccum LlvmM LlvmVar
</span><a href="#local-6989586621681859808"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-2229"></span><span>    </span><span class="annot"><span class="annottext">ExprData -&gt; LlvmM ExprData
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmVar
</span><a href="#local-6989586621681859809"><span class="hs-identifier hs-var">var</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859810"><span class="hs-identifier hs-var">stmts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859811"><span class="hs-identifier hs-var">decls</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2230"></span><span>
</span><span id="line-2231"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#runStmtsDecls"><span class="hs-identifier hs-type">runStmtsDecls</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Writer.Lazy.html#WriterT/Control.Monad.Trans.Writer.Lazy.html#WriterT"><span class="hs-identifier hs-type">WriterT</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmAccum"><span class="hs-identifier hs-type">LlvmAccum</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmStatements"><span class="hs-identifier hs-type">LlvmStatements</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmCmmDecl"><span class="hs-identifier hs-type">LlvmCmmDecl</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-2232"></span><span id="runStmtsDecls"><span class="annot"><span class="annottext">runStmtsDecls :: WriterT LlvmAccum LlvmM () -&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
</span><a href="GHC.CmmToLlvm.CodeGen.html#runStmtsDecls"><span class="hs-identifier hs-var hs-var">runStmtsDecls</span></a></span></span><span> </span><span id="local-6989586621681859813"><span class="annot"><span class="annottext">WriterT LlvmAccum LlvmM ()
</span><a href="#local-6989586621681859813"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-2233"></span><span>    </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmAccum"><span class="hs-identifier hs-type">LlvmAccum</span></a></span><span> </span><span id="local-6989586621681859814"><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859814"><span class="hs-identifier hs-var">stmts</span></a></span></span><span> </span><span id="local-6989586621681859815"><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859815"><span class="hs-identifier hs-var">decls</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">WriterT LlvmAccum LlvmM () -&gt; LlvmM LlvmAccum
forall (m :: * -&gt; *) w a. Monad m =&gt; WriterT w m a -&gt; m w
</span><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Writer.Lazy.html#execWriterT/Control.Monad.Trans.Writer.Lazy.html#execWriterT"><span class="hs-identifier hs-var">execWriterT</span></a></span><span> </span><span class="annot"><span class="annottext">WriterT LlvmAccum LlvmM ()
</span><a href="#local-6989586621681859813"><span class="hs-identifier hs-var">action</span></a></span><span>
</span><span id="line-2234"></span><span>    </span><span class="annot"><span class="annottext">(LlvmStatements, [LlvmCmmDecl])
-&gt; LlvmM (LlvmStatements, [LlvmCmmDecl])
forall a. a -&gt; LlvmM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LlvmStatements
</span><a href="#local-6989586621681859814"><span class="hs-identifier hs-var">stmts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LlvmCmmDecl]
</span><a href="#local-6989586621681859815"><span class="hs-identifier hs-var">decls</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-2235"></span><span>
</span><span id="line-2236"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#getCmmRegW"><span class="hs-identifier hs-type">getCmmRegW</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Reg.html#CmmReg"><span class="hs-identifier hs-type">CmmReg</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Writer.Lazy.html#WriterT/Control.Monad.Trans.Writer.Lazy.html#WriterT"><span class="hs-identifier hs-type">WriterT</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmAccum"><span class="hs-identifier hs-type">LlvmAccum</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span>
</span><span id="line-2237"></span><span id="getCmmRegW"><span class="annot"><span class="annottext">getCmmRegW :: CmmReg -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#getCmmRegW"><span class="hs-identifier hs-var hs-var">getCmmRegW</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmM LlvmVar -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; WriterT LlvmAccum m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Class.html#lift/Control.Monad.Trans.Class.html#lift"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmM LlvmVar -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; (CmmReg -&gt; LlvmM LlvmVar)
-&gt; CmmReg
-&gt; WriterT LlvmAccum LlvmM LlvmVar
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">CmmReg -&gt; LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#getCmmReg"><span class="hs-identifier hs-var">getCmmReg</span></a></span><span>
</span><span id="line-2238"></span><span>
</span><span id="line-2239"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#genLoadW"><span class="hs-identifier hs-type">genLoadW</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#Atomic"><span class="hs-identifier hs-type">Atomic</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#CmmExpr"><span class="hs-identifier hs-type">CmmExpr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Expr.html#AlignmentSpec"><span class="hs-identifier hs-type">AlignmentSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Writer.Lazy.html#WriterT/Control.Monad.Trans.Writer.Lazy.html#WriterT"><span class="hs-identifier hs-type">WriterT</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#LlvmAccum"><span class="hs-identifier hs-type">LlvmAccum</span></a></span><span> </span><span class="annot"><a href="GHC.CmmToLlvm.Base.html#LlvmM"><span class="hs-identifier hs-type">LlvmM</span></a></span><span> </span><span class="annot"><a href="GHC.Llvm.Types.html#LlvmVar"><span class="hs-identifier hs-type">LlvmVar</span></a></span><span>
</span><span id="line-2240"></span><span id="genLoadW"><span class="annot"><span class="annottext">genLoadW :: Atomic
-&gt; CmmExpr
-&gt; CmmType
-&gt; AlignmentSpec
-&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#genLoadW"><span class="hs-identifier hs-var hs-var">genLoadW</span></a></span></span><span> </span><span id="local-6989586621681859817"><span class="annot"><span class="annottext">Atomic
</span><a href="#local-6989586621681859817"><span class="hs-identifier hs-var">atomic</span></a></span></span><span> </span><span id="local-6989586621681859818"><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859818"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621681859819"><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621681859819"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681859820"><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859820"><span class="hs-identifier hs-var">alignment</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LlvmM ExprData -&gt; WriterT LlvmAccum LlvmM LlvmVar
</span><a href="GHC.CmmToLlvm.CodeGen.html#liftExprData"><span class="hs-identifier hs-var">liftExprData</span></a></span><span> </span><span class="annot"><span class="annottext">(LlvmM ExprData -&gt; WriterT LlvmAccum LlvmM LlvmVar)
-&gt; LlvmM ExprData -&gt; WriterT LlvmAccum LlvmM LlvmVar
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Atomic -&gt; CmmExpr -&gt; CmmType -&gt; AlignmentSpec -&gt; LlvmM ExprData
</span><a href="GHC.CmmToLlvm.CodeGen.html#genLoad"><span class="hs-identifier hs-var">genLoad</span></a></span><span> </span><span class="annot"><span class="annottext">Atomic
</span><a href="#local-6989586621681859817"><span class="hs-identifier hs-var">atomic</span></a></span><span> </span><span class="annot"><span class="annottext">CmmExpr
</span><a href="#local-6989586621681859818"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621681859819"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">AlignmentSpec
</span><a href="#local-6989586621681859820"><span class="hs-identifier hs-var">alignment</span></a></span><span>
</span><span id="line-2241"></span><span>
</span><span id="line-2242"></span><span class="annot"><span class="hs-comment">-- | Return element of single-element list; 'panic' if list is not a single-element list</span></span><span>
</span><span id="line-2243"></span><span id="local-6989586621681857194"><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#singletonPanic"><span class="hs-identifier hs-type">singletonPanic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#String/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621681857194"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681857194"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-2244"></span><span id="singletonPanic"><span class="annot"><span class="annottext">singletonPanic :: forall a. String -&gt; [a] -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#singletonPanic"><span class="hs-identifier hs-var hs-var">singletonPanic</span></a></span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span id="local-6989586621681859823"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681859823"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681859823"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-2245"></span><span class="annot"><a href="GHC.CmmToLlvm.CodeGen.html#singletonPanic"><span class="hs-identifier hs-var">singletonPanic</span></a></span><span> </span><span id="local-6989586621681859824"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681859824"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="annot"><span class="annottext">[a]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; a
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.CmmToLlvm.CodeGen.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681859824"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-2246"></span></pre></body></html>