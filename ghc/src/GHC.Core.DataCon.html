<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span id="local-6989586621681628120"><span id="local-6989586621681628121"><span id="local-6989586621681628122"><span id="local-6989586621681628123"><span id="local-6989586621681628124"><span id="local-6989586621681628125"></span></span></span></span></span></span><span class="hs-comment">{-
(c) The University of Glasgow 2006
(c) The GRASP/AQUA Project, Glasgow University, 1998

\section[DataCon]{@DataCon@: Data Constructors}
-}</span><span>
</span><span id="line-7"></span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE DeriveDataTypeable #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-orphans #-}</span><span> </span><span class="hs-comment">-- Outputable, Binary</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">GHC.Core.DataCon</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-12"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Main data types</span></span><span>
</span><span id="line-13"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier">DataCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataConRep"><span class="hs-identifier">DataConRep</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>        </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#SrcStrictness"><span class="hs-identifier">SrcStrictness</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#SrcUnpackedness"><span class="hs-identifier">SrcUnpackedness</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#HsSrcBang"><span class="hs-identifier">HsSrcBang</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#HsImplBang"><span class="hs-identifier">HsImplBang</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#StrictnessMark"><span class="hs-identifier">StrictnessMark</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>        </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#ConTag"><span class="hs-identifier">ConTag</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#DataConEnv"><span class="hs-identifier">DataConEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>
</span><span id="line-20"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Equality specs</span></span><span>
</span><span id="line-21"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#EqSpec"><span class="hs-identifier">EqSpec</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#mkEqSpec"><span class="hs-identifier">mkEqSpec</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#eqSpecTyVar"><span class="hs-identifier">eqSpecTyVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#eqSpecType"><span class="hs-identifier">eqSpecType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#eqSpecPair"><span class="hs-identifier">eqSpecPair</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#eqSpecPreds"><span class="hs-identifier">eqSpecPreds</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Field labels</span></span><span>
</span><span id="line-25"></span><span>        </span><span class="annot"><a href="GHC.Types.FieldLabel.html#FieldLabel"><span class="hs-identifier">FieldLabel</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#FieldLabelString"><span class="hs-identifier">FieldLabelString</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Type construction</span></span><span>
</span><span id="line-28"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#mkDataCon"><span class="hs-identifier">mkDataCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#fIRST_TAG"><span class="hs-identifier">fIRST_TAG</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>
</span><span id="line-30"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Type deconstruction</span></span><span>
</span><span id="line-31"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConRepType"><span class="hs-identifier">dataConRepType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConInstSig"><span class="hs-identifier">dataConInstSig</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConFullSig"><span class="hs-identifier">dataConFullSig</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConName"><span class="hs-identifier">dataConName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConIdentity"><span class="hs-identifier">dataConIdentity</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConTag"><span class="hs-identifier">dataConTag</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConTagZ"><span class="hs-identifier">dataConTagZ</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConTyCon"><span class="hs-identifier">dataConTyCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConOrigTyCon"><span class="hs-identifier">dataConOrigTyCon</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConWrapperType"><span class="hs-identifier">dataConWrapperType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConNonlinearType"><span class="hs-identifier">dataConNonlinearType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConDisplayType"><span class="hs-identifier">dataConDisplayType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConUnivTyVars"><span class="hs-identifier">dataConUnivTyVars</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConExTyCoVars"><span class="hs-identifier">dataConExTyCoVars</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConUnivAndExTyCoVars"><span class="hs-identifier">dataConUnivAndExTyCoVars</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConUserTyVars"><span class="hs-identifier">dataConUserTyVars</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConUserTyVarBinders"><span class="hs-identifier">dataConUserTyVarBinders</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConTheta"><span class="hs-identifier">dataConTheta</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConStupidTheta"><span class="hs-identifier">dataConStupidTheta</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConOtherTheta"><span class="hs-identifier">dataConOtherTheta</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConInstArgTys"><span class="hs-identifier">dataConInstArgTys</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConOrigArgTys"><span class="hs-identifier">dataConOrigArgTys</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConOrigResTy"><span class="hs-identifier">dataConOrigResTy</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConInstOrigArgTys"><span class="hs-identifier">dataConInstOrigArgTys</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConRepArgTys"><span class="hs-identifier">dataConRepArgTys</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConResRepTyArgs"><span class="hs-identifier">dataConResRepTyArgs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConInstUnivs"><span class="hs-identifier">dataConInstUnivs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConFieldLabels"><span class="hs-identifier">dataConFieldLabels</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConFieldType"><span class="hs-identifier">dataConFieldType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConFieldType_maybe"><span class="hs-identifier">dataConFieldType_maybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConSrcBangs"><span class="hs-identifier">dataConSrcBangs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConSourceArity"><span class="hs-identifier">dataConSourceArity</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConRepArity"><span class="hs-identifier">dataConRepArity</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConIsInfix"><span class="hs-identifier">dataConIsInfix</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConWorkId"><span class="hs-identifier">dataConWorkId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConWrapId"><span class="hs-identifier">dataConWrapId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConWrapId_maybe"><span class="hs-identifier">dataConWrapId_maybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConImplicitTyThings"><span class="hs-identifier">dataConImplicitTyThings</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConRepStrictness"><span class="hs-identifier">dataConRepStrictness</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConImplBangs"><span class="hs-identifier">dataConImplBangs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConBoxer"><span class="hs-identifier">dataConBoxer</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>
</span><span id="line-53"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#splitDataProductType_maybe"><span class="hs-identifier">splitDataProductType_maybe</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Predicates on DataCons</span></span><span>
</span><span id="line-56"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#isNullarySrcDataCon"><span class="hs-identifier">isNullarySrcDataCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#isNullaryRepDataCon"><span class="hs-identifier">isNullaryRepDataCon</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-57"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#isTupleDataCon"><span class="hs-identifier">isTupleDataCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#isBoxedTupleDataCon"><span class="hs-identifier">isBoxedTupleDataCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#isUnboxedTupleDataCon"><span class="hs-identifier">isUnboxedTupleDataCon</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#isUnboxedSumDataCon"><span class="hs-identifier">isUnboxedSumDataCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#isCovertGadtDataCon"><span class="hs-identifier">isCovertGadtDataCon</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#isVanillaDataCon"><span class="hs-identifier">isVanillaDataCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#isNewDataCon"><span class="hs-identifier">isNewDataCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#isTypeDataCon"><span class="hs-identifier">isTypeDataCon</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#classDataCon"><span class="hs-identifier">classDataCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConCannotMatch"><span class="hs-identifier">dataConCannotMatch</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#dataConUserTyVarsNeedWrapper"><span class="hs-identifier">dataConUserTyVarsNeedWrapper</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#checkDataConTyVars"><span class="hs-identifier">checkDataConTyVars</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#isBanged"><span class="hs-identifier">isBanged</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#isMarkedStrict"><span class="hs-identifier">isMarkedStrict</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#cbvFromStrictMark"><span class="hs-identifier">cbvFromStrictMark</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#eqHsBang"><span class="hs-identifier">eqHsBang</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#isSrcStrict"><span class="hs-identifier">isSrcStrict</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#isSrcUnpacked"><span class="hs-identifier">isSrcUnpacked</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#specialPromotedDc"><span class="hs-identifier">specialPromotedDc</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>
</span><span id="line-65"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Promotion related functions</span></span><span>
</span><span id="line-66"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#promoteDataCon"><span class="hs-identifier">promoteDataCon</span></a></span><span>
</span><span id="line-67"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-70"></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html"><span class="hs-identifier">Language.Haskell.Syntax.Basic</span></a></span><span>
</span><span id="line-72"></span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><a href="GHC.Types.Id.Make.html"><span class="hs-identifier">GHC.Types.Id.Make</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.Id.Make.html#DataConBoxer"><span class="hs-identifier">DataConBoxer</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Type.html"><span class="hs-identifier">GHC.Core.Type</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Type</span></span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.html"><span class="hs-identifier">GHC.Core.Coercion</span></a></span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Unify.html"><span class="hs-identifier">GHC.Core.Unify</span></a></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html"><span class="hs-identifier">GHC.Core.TyCon</span></a></span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Subst.html"><span class="hs-identifier">GHC.Core.TyCo.Subst</span></a></span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html"><span class="hs-identifier">GHC.Core.TyCo.Compare</span></a></span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Compare.html#eqType"><span class="hs-identifier">eqType</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Multiplicity.html"><span class="hs-identifier">GHC.Core.Multiplicity</span></a></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><a href="GHC.Types.TyThing.html"><span class="hs-identifier">GHC.Types.TyThing</span></a></span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.FieldLabel.html"><span class="hs-identifier">GHC.Types.FieldLabel</span></a></span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SourceText.html"><span class="hs-identifier">GHC.Types.SourceText</span></a></span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Class.html"><span class="hs-identifier">GHC.Core.Class</span></a></span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.html"><span class="hs-identifier">GHC.Types.Name</span></a></span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html"><span class="hs-identifier">GHC.Builtin.Names</span></a></span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Predicate.html"><span class="hs-identifier">GHC.Core.Predicate</span></a></span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.html"><span class="hs-identifier">GHC.Types.Var</span></a></span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html"><span class="hs-identifier">GHC.Types.Var.Env</span></a></span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html"><span class="hs-identifier">GHC.Types.Basic</span></a></span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html"><span class="hs-identifier">GHC.Data.FastString</span></a></span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html"><span class="hs-identifier">GHC.Unit.Types</span></a></span><span>
</span><span id="line-93"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Binary.html"><span class="hs-identifier">GHC.Utils.Binary</span></a></span><span>
</span><span id="line-94"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.FM.html"><span class="hs-identifier">GHC.Types.Unique.FM</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.Unique.FM.html#UniqFM"><span class="hs-identifier">UniqFM</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Unique.Set.html"><span class="hs-identifier">GHC.Types.Unique.Set</span></a></span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Uniques.html"><span class="hs-identifier">GHC.Builtin.Uniques</span></a></span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Builtin.Uniques.html#mkAlphaTyVarUnique"><span class="hs-identifier">mkAlphaTyVarUnique</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Graph.UnVar.html"><span class="hs-identifier">GHC.Data.Graph.UnVar</span></a></span><span>  </span><span class="hs-comment">-- UnVarSet and operations</span><span>
</span><span id="line-98"></span><span>
</span><span id="line-99"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span>
</span><span id="line-100"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>
</span><span id="line-101"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-102"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.Plain.html"><span class="hs-identifier">GHC.Utils.Panic.Plain</span></a></span><span>
</span><span id="line-103"></span><span>
</span><span id="line-104"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../bytestring-0.11.5.4/src/Data.ByteString.html#/Data.ByteString.html"><span class="hs-identifier">Data.ByteString</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../bytestring-0.11.5.4/src/Data.ByteString.Internal.Type.html#ByteString/Data.ByteString.Internal.Type.html#ByteString"><span class="hs-identifier">ByteString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../bytestring-0.11.5.4/src/Data.ByteString.Builder.html#/Data.ByteString.Builder.html"><span class="hs-identifier">Data.ByteString.Builder</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BSB</span></span><span>
</span><span id="line-106"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../bytestring-0.11.5.4/src/Data.ByteString.Lazy.html#/Data.ByteString.Lazy.html"><span class="hs-identifier">Data.ByteString.Lazy</span></a></span><span>    </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LBS</span></span><span>
</span><span id="line-107"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Data.html#/Data.Data.html"><span class="hs-identifier">Data.Data</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Data</span></span><span>
</span><span id="line-108"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Char.html#/Data.Char.html"><span class="hs-identifier">Data.Char</span></a></span><span>
</span><span id="line-109"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.List.html#/Data.List.html"><span class="hs-identifier">Data.List</span></a></span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Foldable.html#find/Data.Foldable.html#find"><span class="hs-identifier">find</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Module.Name.html"><span class="hs-identifier">Language.Haskell.Syntax.Module.Name</span></a></span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span class="hs-comment">{-
Note [Data constructor representation]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Consider the following Haskell data type declaration

        data T = T !Int ![Int]

Using the strictness annotations, GHC will represent this as

        data T = T Int# [Int]

That is, the Int has been unboxed.  Furthermore, the Haskell source construction

        T e1 e2

is translated to

        case e1 of { I# x -&gt;
        case e2 of { r -&gt;
        T x r }}

That is, the first argument is unboxed, and the second is evaluated.  Finally,
pattern matching is translated too:

        case e of { T a b -&gt; ... }

becomes

        case e of { T a' b -&gt; let a = I# a' in ... }

To keep ourselves sane, we name the different versions of the data constructor
differently, as follows.


Note [Data Constructor Naming]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Each data constructor C has two, and possibly up to four, Names associated with it:

                   OccName   Name space   Name of   Notes
 ---------------------------------------------------------------------------
 The &quot;data con itself&quot;   C     DataName   DataCon   In dom( GlobalRdrEnv )
 The &quot;worker data con&quot;   C     VarName    Id        The worker
 The &quot;wrapper data con&quot;  $WC   VarName    Id        The wrapper
 The &quot;newtype coercion&quot;  :CoT  TcClsName  TyCon

EVERY data constructor (incl for newtypes) has the former two (the
data con itself, and its worker.  But only some data constructors have a
wrapper (see Note [The need for a wrapper]).

Each of these three has a distinct Unique.  The &quot;data con itself&quot; name
appears in the output of the renamer, and names the Haskell-source
data constructor.  The type checker translates it into either the wrapper Id
(if it exists) or worker Id (otherwise).

The data con has one or two Ids associated with it:

The &quot;worker Id&quot;, is the actual data constructor.
* Every data constructor (newtype or data type) has a worker

* The worker is very like a primop, in that it has no binding.

* For a *data* type, the worker *is* the data constructor;
  it has no unfolding

* For a *newtype*, the worker has a compulsory unfolding which
  does a cast, e.g.
        newtype T = MkT Int
        The worker for MkT has unfolding
                \\(x:Int). x `cast` sym CoT
  Here CoT is the type constructor, witnessing the FC axiom
        axiom CoT : T = Int

The &quot;wrapper Id&quot;, \$WC, goes as follows

* Its type is exactly what it looks like in the source program.

* It is an ordinary function, and it gets a top-level binding
  like any other function.

* The wrapper Id isn't generated for a data type if there is
  nothing for the wrapper to do.  That is, if its defn would be
        \$wC = C

Note [Data constructor workers and wrappers]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
* Algebraic data types
  - Always have a worker, with no unfolding
  - May or may not have a wrapper; see Note [The need for a wrapper]

* Newtypes
  - Always have a worker, which has a compulsory unfolding (just a cast)
  - May or may not have a wrapper; see Note [The need for a wrapper]

* INVARIANT: the dictionary constructor for a class
             never has a wrapper.

* See Note [Data Constructor Naming] for how the worker and wrapper
  are named

* Neither_ the worker _nor_ the wrapper take the dcStupidTheta dicts as arguments

* The wrapper (if it exists) takes dcOrigArgTys as its arguments.
  The worker takes dataConRepArgTys as its arguments
  If the wrapper is absent, dataConRepArgTys is the same as dcOrigArgTys

* The 'NoDataConRep' case of DataConRep is important. Not only is it
  efficient, but it also ensures that the wrapper is replaced by the
  worker (because it *is* the worker) even when there are no
  args. E.g. in
               f (:) x
  the (:) *is* the worker.  This is really important in rule matching,
  (We could match on the wrappers, but that makes it less likely that
  rules will match when we bring bits of unfoldings together.)

Note [The need for a wrapper]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Why might the wrapper have anything to do?  The full story is
in wrapper_reqd in GHC.Types.Id.Make.mkDataConRep.

* Unboxing strict fields (with -funbox-strict-fields)
        data T = MkT !(Int,Int)
        \$wMkT :: (Int,Int) -&gt; T
        \$wMkT (x,y) = MkT x y
  Notice that the worker has two fields where the wrapper has
  just one.  That is, the worker has type
                MkT :: Int -&gt; Int -&gt; T

* Equality constraints for GADTs
        data T a where { MkT :: a -&gt; T [a] }

  The worker gets a type with explicit equality
  constraints, thus:
        MkT :: forall a b. (a=[b]) =&gt; b -&gt; T a

  The wrapper has the programmer-specified type:
        \$wMkT :: a -&gt; T [a]
        \$wMkT a x = MkT [a] a [a] x
  The third argument is a coercion
        [a] :: [a]~[a]

* Data family instances may do a cast on the result

* Type variables may be permuted; see MkId
  Note [Data con wrappers and GADT syntax]

* Datatype contexts require dropping some dictionary arguments.
  See Note [Instantiating stupid theta].

Note [The stupid context]
~~~~~~~~~~~~~~~~~~~~~~~~~
Data types can have a context:

        data (Eq a, Ord b) =&gt; T a b = T1 a b | T2 a

And that makes the constructors have a context too. A constructor's context
isn't necessarily the same as the data type's context, however. Per the
Haskell98 Report, the part of the datatype context that is used in a data
constructor is the largest subset of the datatype context that constrains
only the type variables free in the data constructor's field types. For
example, here are the types of T1 and T2:

        T1 :: (Eq a, Ord b) =&gt; a -&gt; b -&gt; T a b
        T2 :: (Eq a) =&gt; a -&gt; T a b

Notice that T2's context is &quot;thinned&quot;. Since its field is of type `a`, only
the part of the datatype context that mentions `a`&#8212;that is, `Eq a`&#8212;is
included in T2's context. On the other hand, T1's fields mention both `a`
and `b`, so T1's context includes all of the datatype context.

Furthermore, this context pops up when pattern matching
(though GHC hasn't implemented this, but it is in H98, and
I've fixed GHC so that it now does):

        f (T2 x) = x
gets inferred type
        f :: Eq a =&gt; T a b -&gt; a

I say the context is &quot;stupid&quot; because the dictionaries passed
are immediately discarded -- they do nothing and have no benefit.
(See Note [Instantiating stupid theta].)
It's a flaw in the language.

GHC has made some efforts to correct this flaw. In GHC, datatype contexts
are not available by default. Instead, one must explicitly opt in to them by
using the DatatypeContexts extension. To discourage their use, GHC has
deprecated DatatypeContexts.

Some other notes about stupid contexts:

* Stupid contexts can interact badly with `deriving`. For instance, it's
  unclear how to make this derived Functor instance typecheck:

    data Eq a =&gt; T a = MkT a
      deriving Functor

  This is because the derived instance would need to look something like
  `instance Functor T where ...`, but there is nowhere to mention the
  requisite `Eq a` constraint. For this reason, GHC will throw an error if a
  user attempts to derive an instance for Functor (or a Functor-like class)
  where the last type variable is used in a datatype context. For Generic(1),
  the requirements are even harsher, as stupid contexts are not allowed at all
  in derived Generic(1) instances. (We could consider relaxing this requirement
  somewhat, although no one has asked for this yet.)

  Stupid contexts are permitted when deriving instances of non-Functor-like
  classes, or when deriving instances of Functor-like classes where the last
  type variable isn't mentioned in the stupid context. For example, the
  following is permitted:

    data Show a =&gt; T a = MkT deriving Eq

  Note that because of the &quot;thinning&quot; behavior mentioned above, the generated
  Eq instance should not mention `Show a`, as the type of MkT doesn't require
  it. That is, the following should be generated (#20501):

    instance Eq (T a) where
      (MkT == MkT) = True

* It's not obvious how stupid contexts should interact with GADTs. For this
  reason, GHC disallows combining datatype contexts with GADT syntax. As a
  result, dcStupidTheta is always empty for data types defined using GADT
  syntax.

Note [Instantiating stupid theta]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Consider a data type with a &quot;stupid theta&quot; (see
Note [The stupid context]):

  data Ord a =&gt; T a = MkT (Maybe a)

We want to generate an Ord constraint for every use of MkT; but
we also want to allow visible type application, such as

   MkT @Int

To achieve this, the wrapper for a data (or newtype) constructor
with a datatype context contains a lambda which drops the dictionary
argments corresponding to the datatype context:

   /\a \(_d:Ord a). MkT @a

Notice that the wrapper discards the dictionary argument d.
We don't need it; it was only there to generate a Wanted constraint.
(That is why it is stupid.)

This all happens in GHC.Types.Id.Make.mkDataConRep.

************************************************************************
*                                                                      *
\subsection{Data constructors}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-366"></span><span>
</span><span id="line-367"></span><span class="hs-comment">-- | A data constructor</span><span>
</span><span id="line-368"></span><span class="hs-comment">--</span><span>
</span><span id="line-369"></span><span class="hs-comment">-- - 'GHC.Parser.Annotation.AnnKeywordId' : 'GHC.Parser.Annotation.AnnOpen',</span><span>
</span><span id="line-370"></span><span class="hs-comment">--             'GHC.Parser.Annotation.AnnClose','GHC.Parser.Annotation.AnnComma'</span><span>
</span><span id="line-371"></span><span>
</span><span id="line-372"></span><span class="hs-comment">-- For details on above see Note [exact print annotations] in GHC.Parser.Annotation</span><span>
</span><span id="line-373"></span><span class="hs-keyword">data</span><span> </span><span id="DataCon"><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-var">DataCon</span></a></span></span><span>
</span><span id="line-374"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="MkData"><span class="annot"><a href="GHC.Core.DataCon.html#MkData"><span class="hs-identifier hs-var">MkData</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-375"></span><span>        </span><span id="dcName"><span class="annot"><span class="annottext">DataCon -&gt; Name
</span><a href="GHC.Core.DataCon.html#dcName"><span class="hs-identifier hs-var hs-var">dcName</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">,</span><span>      </span><span class="hs-comment">-- This is the name of the *source data con*</span><span>
</span><span id="line-376"></span><span>                                </span><span class="hs-comment">-- (see &quot;Note [Data Constructor Naming]&quot; above)</span><span>
</span><span id="line-377"></span><span>        </span><span id="dcUnique"><span class="annot"><span class="annottext">DataCon -&gt; Unique
</span><a href="GHC.Core.DataCon.html#dcUnique"><span class="hs-identifier hs-var hs-var">dcUnique</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Unique.html#Unique"><span class="hs-identifier hs-type">Unique</span></a></span><span class="hs-special">,</span><span>     </span><span class="hs-comment">-- Cached from Name</span><span>
</span><span id="line-378"></span><span>        </span><span id="dcTag"><span class="annot"><span class="annottext">DataCon -&gt; Arity
</span><a href="GHC.Core.DataCon.html#dcTag"><span class="hs-identifier hs-var hs-var">dcTag</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#ConTag"><span class="hs-identifier hs-type">ConTag</span></a></span><span class="hs-special">,</span><span>     </span><span class="annot"><span class="hs-comment">-- ^ Tag, used for ordering 'DataCon's</span></span><span>
</span><span id="line-379"></span><span>
</span><span id="line-380"></span><span>        </span><span class="hs-comment">-- Running example:</span><span>
</span><span id="line-381"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-382"></span><span>        </span><span class="hs-comment">--      *** As declared by the user</span><span>
</span><span id="line-383"></span><span>        </span><span class="hs-comment">--  data T a b c where</span><span>
</span><span id="line-384"></span><span>        </span><span class="hs-comment">--    MkT :: forall c y x b. (x~y,Ord x) =&gt; x -&gt; y -&gt; T (x,y) b c</span><span>
</span><span id="line-385"></span><span>
</span><span id="line-386"></span><span>        </span><span class="hs-comment">--      *** As represented internally</span><span>
</span><span id="line-387"></span><span>        </span><span class="hs-comment">--  data T a b c where</span><span>
</span><span id="line-388"></span><span>        </span><span class="hs-comment">--    MkT :: forall a b c. forall x y. (a~(x,y),x~y,Ord x)</span><span>
</span><span id="line-389"></span><span>        </span><span class="hs-comment">--        =&gt; x -&gt; y -&gt; T a b c</span><span>
</span><span id="line-390"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-391"></span><span>        </span><span class="hs-comment">-- The next six fields express the type of the constructor, in pieces</span><span>
</span><span id="line-392"></span><span>        </span><span class="hs-comment">-- e.g.</span><span>
</span><span id="line-393"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-394"></span><span>        </span><span class="hs-comment">--      dcUnivTyVars       = [a,b,c]</span><span>
</span><span id="line-395"></span><span>        </span><span class="hs-comment">--      dcExTyCoVars       = [x,y]</span><span>
</span><span id="line-396"></span><span>        </span><span class="hs-comment">--      dcUserTyVarBinders = [c,y,x,b]</span><span>
</span><span id="line-397"></span><span>        </span><span class="hs-comment">--      dcEqSpec           = [a~(x,y)]</span><span>
</span><span id="line-398"></span><span>        </span><span class="hs-comment">--      dcOtherTheta       = [x~y, Ord x]</span><span>
</span><span id="line-399"></span><span>        </span><span class="hs-comment">--      dcOrigArgTys       = [x,y]</span><span>
</span><span id="line-400"></span><span>        </span><span class="hs-comment">--      dcRepTyCon         = T</span><span>
</span><span id="line-401"></span><span>
</span><span id="line-402"></span><span>        </span><span class="hs-comment">-- In general, the dcUnivTyVars are NOT NECESSARILY THE SAME AS THE</span><span>
</span><span id="line-403"></span><span>        </span><span class="hs-comment">-- TYVARS FOR THE PARENT TyCon. (This is a change (Oct05): previously,</span><span>
</span><span id="line-404"></span><span>        </span><span class="hs-comment">-- vanilla datacons guaranteed to have the same type variables as their</span><span>
</span><span id="line-405"></span><span>        </span><span class="hs-comment">-- parent TyCon, but that seems ugly.) They can be different in the case</span><span>
</span><span id="line-406"></span><span>        </span><span class="hs-comment">-- where a GADT constructor uses different names for the universal</span><span>
</span><span id="line-407"></span><span>        </span><span class="hs-comment">-- tyvars than does the tycon. For example:</span><span>
</span><span id="line-408"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-409"></span><span>        </span><span class="hs-comment">--   data H a where</span><span>
</span><span id="line-410"></span><span>        </span><span class="hs-comment">--     MkH :: b -&gt; H b</span><span>
</span><span id="line-411"></span><span>        </span><span class="hs-comment">--</span><span>
</span><span id="line-412"></span><span>        </span><span class="hs-comment">-- Here, the tyConTyVars of H will be [a], but the dcUnivTyVars of MkH</span><span>
</span><span id="line-413"></span><span>        </span><span class="hs-comment">-- will be [b].</span><span>
</span><span id="line-414"></span><span>
</span><span id="line-415"></span><span>        </span><span id="dcVanilla"><span class="annot"><span class="annottext">DataCon -&gt; Bool
</span><a href="GHC.Core.DataCon.html#dcVanilla"><span class="hs-identifier hs-var hs-var">dcVanilla</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>      </span><span class="hs-comment">-- True &lt;=&gt; This is a vanilla Haskell 98 data constructor</span><span>
</span><span id="line-416"></span><span>                                </span><span class="hs-comment">--          Its type is of form</span><span>
</span><span id="line-417"></span><span>                                </span><span class="hs-comment">--              forall a1..an . t1 -&gt; ... tm -&gt; T a1..an</span><span>
</span><span id="line-418"></span><span>                                </span><span class="hs-comment">--          No existentials, no coercions, nothing.</span><span>
</span><span id="line-419"></span><span>                                </span><span class="hs-comment">-- That is: dcExTyCoVars = dcEqSpec = dcOtherTheta = []</span><span>
</span><span id="line-420"></span><span>                </span><span class="hs-comment">-- NB 1: newtypes always have a vanilla data con</span><span>
</span><span id="line-421"></span><span>                </span><span class="hs-comment">-- NB 2: a vanilla constructor can still be declared in GADT-style</span><span>
</span><span id="line-422"></span><span>                </span><span class="hs-comment">--       syntax, provided its type looks like the above.</span><span>
</span><span id="line-423"></span><span>                </span><span class="hs-comment">--       The declaration format is held in the TyCon (algTcGadtSyntax)</span><span>
</span><span id="line-424"></span><span>
</span><span id="line-425"></span><span>        </span><span class="hs-comment">-- dcUnivTyVars: Universally-quantified type vars [a,b,c]</span><span>
</span><span id="line-426"></span><span>        </span><span class="hs-comment">-- INVARIANT: length matches arity of the dcRepTyCon</span><span>
</span><span id="line-427"></span><span>        </span><span class="hs-comment">-- INVARIANT: result type of data con worker is exactly (T a b c)</span><span>
</span><span id="line-428"></span><span>        </span><span class="hs-comment">-- COROLLARY: The dcUnivTyVars are always in one-to-one correspondence with</span><span>
</span><span id="line-429"></span><span>        </span><span class="hs-comment">--            the tyConTyVars of the parent TyCon</span><span>
</span><span id="line-430"></span><span>        </span><span id="dcUnivTyVars"><span class="annot"><span class="annottext">DataCon -&gt; [TyVar]
</span><a href="GHC.Core.DataCon.html#dcUnivTyVars"><span class="hs-identifier hs-var hs-var">dcUnivTyVars</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-431"></span><span>
</span><span id="line-432"></span><span>        </span><span class="hs-comment">-- Existentially-quantified type and coercion vars [x,y]</span><span>
</span><span id="line-433"></span><span>        </span><span class="hs-comment">-- For an example involving coercion variables,</span><span>
</span><span id="line-434"></span><span>        </span><span class="hs-comment">-- Why TyCoVars? See Note [Existential coercion variables]</span><span>
</span><span id="line-435"></span><span>        </span><span id="dcExTyCoVars"><span class="annot"><span class="annottext">DataCon -&gt; [TyVar]
</span><a href="GHC.Core.DataCon.html#dcExTyCoVars"><span class="hs-identifier hs-var hs-var">dcExTyCoVars</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyCoVar"><span class="hs-identifier hs-type">TyCoVar</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-436"></span><span>
</span><span id="line-437"></span><span>        </span><span class="hs-comment">-- INVARIANT: the UnivTyVars and ExTyCoVars all have distinct OccNames</span><span>
</span><span id="line-438"></span><span>        </span><span class="hs-comment">-- Reason: less confusing, and easier to generate Iface syntax</span><span>
</span><span id="line-439"></span><span>
</span><span id="line-440"></span><span>        </span><span class="hs-comment">-- The type/coercion vars in the order the user wrote them [c,y,x,b]</span><span>
</span><span id="line-441"></span><span>        </span><span class="hs-comment">-- INVARIANT(dataConTyVars): the set of tyvars in dcUserTyVarBinders is</span><span>
</span><span id="line-442"></span><span>        </span><span class="hs-comment">--    exactly the set of tyvars (*not* covars) of dcExTyCoVars unioned</span><span>
</span><span id="line-443"></span><span>        </span><span class="hs-comment">--    with the set of dcUnivTyVars whose tyvars do not appear in dcEqSpec</span><span>
</span><span id="line-444"></span><span>        </span><span class="hs-comment">-- So dcUserTyVarBinders is a subset of (dcUnivTyVars ++ dcExTyCoVars)</span><span>
</span><span id="line-445"></span><span>        </span><span class="hs-comment">-- See Note [DataCon user type variable binders]</span><span>
</span><span id="line-446"></span><span>        </span><span id="dcUserTyVarBinders"><span class="annot"><span class="annottext">DataCon -&gt; [InvisTVBinder]
</span><a href="GHC.Core.DataCon.html#dcUserTyVarBinders"><span class="hs-identifier hs-var hs-var">dcUserTyVarBinders</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#InvisTVBinder"><span class="hs-identifier hs-type">InvisTVBinder</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-447"></span><span>
</span><span id="line-448"></span><span>        </span><span id="dcEqSpec"><span class="annot"><span class="annottext">DataCon -&gt; [EqSpec]
</span><a href="GHC.Core.DataCon.html#dcEqSpec"><span class="hs-identifier hs-var hs-var">dcEqSpec</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.DataCon.html#EqSpec"><span class="hs-identifier hs-type">EqSpec</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>   </span><span class="hs-comment">-- Equalities derived from the result type,</span><span>
</span><span id="line-449"></span><span>                                </span><span class="hs-comment">-- _as written by the programmer_.</span><span>
</span><span id="line-450"></span><span>                                </span><span class="hs-comment">-- Only non-dependent GADT equalities (dependent</span><span>
</span><span id="line-451"></span><span>                                </span><span class="hs-comment">-- GADT equalities are in the covars of</span><span>
</span><span id="line-452"></span><span>                                </span><span class="hs-comment">-- dcExTyCoVars).</span><span>
</span><span id="line-453"></span><span>
</span><span id="line-454"></span><span>                </span><span class="hs-comment">-- This field allows us to move conveniently between the two ways</span><span>
</span><span id="line-455"></span><span>                </span><span class="hs-comment">-- of representing a GADT constructor's type:</span><span>
</span><span id="line-456"></span><span>                </span><span class="hs-comment">--      MkT :: forall a b. (a ~ [b]) =&gt; b -&gt; T a</span><span>
</span><span id="line-457"></span><span>                </span><span class="hs-comment">--      MkT :: forall b. b -&gt; T [b]</span><span>
</span><span id="line-458"></span><span>                </span><span class="hs-comment">-- Each equality is of the form (a ~ ty), where 'a' is one of</span><span>
</span><span id="line-459"></span><span>                </span><span class="hs-comment">-- the universally quantified type variables. Moreover, the</span><span>
</span><span id="line-460"></span><span>                </span><span class="hs-comment">-- only place in the DataCon where this 'a' will occur is in</span><span>
</span><span id="line-461"></span><span>                </span><span class="hs-comment">-- dcUnivTyVars. See [The dcEqSpec domain invariant].</span><span>
</span><span id="line-462"></span><span>
</span><span id="line-463"></span><span>                </span><span class="hs-comment">-- The next two fields give the type context of the data constructor</span><span>
</span><span id="line-464"></span><span>                </span><span class="hs-comment">--      (aside from the GADT constraints,</span><span>
</span><span id="line-465"></span><span>                </span><span class="hs-comment">--       which are given by the dcExpSpec)</span><span>
</span><span id="line-466"></span><span>                </span><span class="hs-comment">-- In GADT form, this is *exactly* what the programmer writes, even if</span><span>
</span><span id="line-467"></span><span>                </span><span class="hs-comment">-- the context constrains only universally quantified variables</span><span>
</span><span id="line-468"></span><span>                </span><span class="hs-comment">--      MkT :: forall a b. (a ~ b, Ord b) =&gt; a -&gt; T a b</span><span>
</span><span id="line-469"></span><span>        </span><span id="dcOtherTheta"><span class="annot"><span class="annottext">DataCon -&gt; [Type]
</span><a href="GHC.Core.DataCon.html#dcOtherTheta"><span class="hs-identifier hs-var hs-var">dcOtherTheta</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ThetaType"><span class="hs-identifier hs-type">ThetaType</span></a></span><span class="hs-special">,</span><span>  </span><span class="hs-comment">-- The other constraints in the data con's type</span><span>
</span><span id="line-470"></span><span>                                    </span><span class="hs-comment">-- other than those in the dcEqSpec</span><span>
</span><span id="line-471"></span><span>
</span><span id="line-472"></span><span>        </span><span id="dcStupidTheta"><span class="annot"><span class="annottext">DataCon -&gt; [Type]
</span><a href="GHC.Core.DataCon.html#dcStupidTheta"><span class="hs-identifier hs-var hs-var">dcStupidTheta</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ThetaType"><span class="hs-identifier hs-type">ThetaType</span></a></span><span class="hs-special">,</span><span>     </span><span class="hs-comment">-- The context of the data type declaration</span><span>
</span><span id="line-473"></span><span>                                        </span><span class="hs-comment">--      data Eq a =&gt; T a = ...</span><span>
</span><span id="line-474"></span><span>                                        </span><span class="hs-comment">-- or, rather, a &quot;thinned&quot; version thereof</span><span>
</span><span id="line-475"></span><span>                </span><span class="hs-comment">-- &quot;Thinned&quot;, because the Report says</span><span>
</span><span id="line-476"></span><span>                </span><span class="hs-comment">-- to eliminate any constraints that don't mention</span><span>
</span><span id="line-477"></span><span>                </span><span class="hs-comment">-- tyvars free in the arg types for this constructor.</span><span>
</span><span id="line-478"></span><span>                </span><span class="hs-comment">-- See Note [The stupid context].</span><span>
</span><span id="line-479"></span><span>                </span><span class="hs-comment">--</span><span>
</span><span id="line-480"></span><span>                </span><span class="hs-comment">-- INVARIANT: the free tyvars of dcStupidTheta are a subset of dcUnivTyVars</span><span>
</span><span id="line-481"></span><span>                </span><span class="hs-comment">-- Reason: dcStupidTeta is gotten by thinning the stupid theta from the tycon</span><span>
</span><span id="line-482"></span><span>                </span><span class="hs-comment">--</span><span>
</span><span id="line-483"></span><span>                </span><span class="hs-comment">-- &quot;Stupid&quot;, because the dictionaries aren't used for anything.</span><span>
</span><span id="line-484"></span><span>                </span><span class="hs-comment">-- Indeed, [as of March 02] they are no longer in the type of</span><span>
</span><span id="line-485"></span><span>                </span><span class="hs-comment">-- the wrapper Id, because that makes it harder to use the wrap-id</span><span>
</span><span id="line-486"></span><span>                </span><span class="hs-comment">-- to rebuild values after record selection or in generics.</span><span>
</span><span id="line-487"></span><span>
</span><span id="line-488"></span><span>        </span><span id="dcOrigArgTys"><span class="annot"><span class="annottext">DataCon -&gt; [Scaled Type]
</span><a href="GHC.Core.DataCon.html#dcOrigArgTys"><span class="hs-identifier hs-var hs-var">dcOrigArgTys</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>  </span><span class="hs-comment">-- Original argument types</span><span>
</span><span id="line-489"></span><span>                                        </span><span class="hs-comment">-- (before unboxing and flattening of strict fields)</span><span>
</span><span id="line-490"></span><span>        </span><span id="dcOrigResTy"><span class="annot"><span class="annottext">DataCon -&gt; Type
</span><a href="GHC.Core.DataCon.html#dcOrigResTy"><span class="hs-identifier hs-var hs-var">dcOrigResTy</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">,</span><span>            </span><span class="hs-comment">-- Original result type, as seen by the user</span><span>
</span><span id="line-491"></span><span>                </span><span class="hs-comment">-- NB: for a data instance, the original user result type may</span><span>
</span><span id="line-492"></span><span>                </span><span class="hs-comment">-- differ from the DataCon's representation TyCon.  Example</span><span>
</span><span id="line-493"></span><span>                </span><span class="hs-comment">--      data instance T [a] where MkT :: a -&gt; T [a]</span><span>
</span><span id="line-494"></span><span>                </span><span class="hs-comment">-- The dcOrigResTy is T [a], but the dcRepTyCon might be R:TList</span><span>
</span><span id="line-495"></span><span>
</span><span id="line-496"></span><span>        </span><span class="hs-comment">-- Now the strictness annotations and field labels of the constructor</span><span>
</span><span id="line-497"></span><span>        </span><span id="dcSrcBangs"><span class="annot"><span class="annottext">DataCon -&gt; [HsSrcBang]
</span><a href="GHC.Core.DataCon.html#dcSrcBangs"><span class="hs-identifier hs-var hs-var">dcSrcBangs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.DataCon.html#HsSrcBang"><span class="hs-identifier hs-type">HsSrcBang</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-498"></span><span>                </span><span class="hs-comment">-- See Note [Bangs on data constructor arguments]</span><span>
</span><span id="line-499"></span><span>                </span><span class="hs-comment">--</span><span>
</span><span id="line-500"></span><span>                </span><span class="hs-comment">-- The [HsSrcBang] as written by the programmer.</span><span>
</span><span id="line-501"></span><span>                </span><span class="hs-comment">--</span><span>
</span><span id="line-502"></span><span>                </span><span class="hs-comment">-- Matches 1-1 with dcOrigArgTys</span><span>
</span><span id="line-503"></span><span>                </span><span class="hs-comment">-- Hence length = dataConSourceArity dataCon</span><span>
</span><span id="line-504"></span><span>
</span><span id="line-505"></span><span>        </span><span id="dcFields"><span class="annot"><span class="annottext">DataCon -&gt; [FieldLabel]
</span><a href="GHC.Core.DataCon.html#dcFields"><span class="hs-identifier hs-var hs-var">dcFields</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.FieldLabel.html#FieldLabel"><span class="hs-identifier hs-type">FieldLabel</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-506"></span><span>                </span><span class="hs-comment">-- Field labels for this constructor, in the</span><span>
</span><span id="line-507"></span><span>                </span><span class="hs-comment">-- same order as the dcOrigArgTys;</span><span>
</span><span id="line-508"></span><span>                </span><span class="hs-comment">-- length = 0 (if not a record) or dataConSourceArity.</span><span>
</span><span id="line-509"></span><span>
</span><span id="line-510"></span><span>        </span><span class="hs-comment">-- The curried worker function that corresponds to the constructor:</span><span>
</span><span id="line-511"></span><span>        </span><span class="hs-comment">-- It doesn't have an unfolding; the code generator saturates these Ids</span><span>
</span><span id="line-512"></span><span>        </span><span class="hs-comment">-- and allocates a real constructor when it finds one.</span><span>
</span><span id="line-513"></span><span>        </span><span id="dcWorkId"><span class="annot"><span class="annottext">DataCon -&gt; TyVar
</span><a href="GHC.Core.DataCon.html#dcWorkId"><span class="hs-identifier hs-var hs-var">dcWorkId</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-514"></span><span>
</span><span id="line-515"></span><span>        </span><span class="hs-comment">-- Constructor representation</span><span>
</span><span id="line-516"></span><span>        </span><span id="dcRep"><span class="annot"><span class="annottext">DataCon -&gt; DataConRep
</span><a href="GHC.Core.DataCon.html#dcRep"><span class="hs-identifier hs-var hs-var">dcRep</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataConRep"><span class="hs-identifier hs-type">DataConRep</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-517"></span><span>
</span><span id="line-518"></span><span>        </span><span class="hs-comment">-- Cached; see Note [DataCon arities]</span><span>
</span><span id="line-519"></span><span>        </span><span class="hs-comment">-- INVARIANT: dcRepArity    == length dataConRepArgTys + count isCoVar (dcExTyCoVars)</span><span>
</span><span id="line-520"></span><span>        </span><span class="hs-comment">-- INVARIANT: dcSourceArity == length dcOrigArgTys</span><span>
</span><span id="line-521"></span><span>        </span><span id="dcRepArity"><span class="annot"><span class="annottext">DataCon -&gt; Arity
</span><a href="GHC.Core.DataCon.html#dcRepArity"><span class="hs-identifier hs-var hs-var">dcRepArity</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Arity"><span class="hs-identifier hs-type">Arity</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-522"></span><span>        </span><span id="dcSourceArity"><span class="annot"><span class="annottext">DataCon -&gt; Arity
</span><a href="GHC.Core.DataCon.html#dcSourceArity"><span class="hs-identifier hs-var hs-var">dcSourceArity</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Arity"><span class="hs-identifier hs-type">Arity</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-523"></span><span>
</span><span id="line-524"></span><span>        </span><span class="hs-comment">-- Result type of constructor is T t1..tn</span><span>
</span><span id="line-525"></span><span>        </span><span id="dcRepTyCon"><span class="annot"><span class="annottext">DataCon -&gt; TyCon
</span><a href="GHC.Core.DataCon.html#dcRepTyCon"><span class="hs-identifier hs-var hs-var">dcRepTyCon</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span class="hs-special">,</span><span>           </span><span class="hs-comment">-- Result tycon, T</span><span>
</span><span id="line-526"></span><span>
</span><span id="line-527"></span><span>        </span><span id="dcRepType"><span class="annot"><span class="annottext">DataCon -&gt; Type
</span><a href="GHC.Core.DataCon.html#dcRepType"><span class="hs-identifier hs-var hs-var">dcRepType</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">,</span><span>    </span><span class="hs-comment">-- Type of the constructor</span><span>
</span><span id="line-528"></span><span>                                </span><span class="hs-comment">--      forall a x y. (a~(x,y), x~y, Ord x) =&gt;</span><span>
</span><span id="line-529"></span><span>                                </span><span class="hs-comment">--        x -&gt; y -&gt; T a</span><span>
</span><span id="line-530"></span><span>                                </span><span class="hs-comment">-- (this is *not* of the constructor wrapper Id:</span><span>
</span><span id="line-531"></span><span>                                </span><span class="hs-comment">--  see Note [Data con representation] below)</span><span>
</span><span id="line-532"></span><span>        </span><span class="hs-comment">-- Notice that the existential type parameters come *second*.</span><span>
</span><span id="line-533"></span><span>        </span><span class="hs-comment">-- Reason: in a case expression we may find:</span><span>
</span><span id="line-534"></span><span>        </span><span class="hs-comment">--      case (e :: T t) of</span><span>
</span><span id="line-535"></span><span>        </span><span class="hs-comment">--        MkT x y co1 co2 (d:Ord x) (v:r) (w:F s) -&gt; ...</span><span>
</span><span id="line-536"></span><span>        </span><span class="hs-comment">-- It's convenient to apply the rep-type of MkT to 't', to get</span><span>
</span><span id="line-537"></span><span>        </span><span class="hs-comment">--      forall x y. (t~(x,y), x~y, Ord x) =&gt; x -&gt; y -&gt; T t</span><span>
</span><span id="line-538"></span><span>        </span><span class="hs-comment">-- and use that to check the pattern.  Mind you, this is really only</span><span>
</span><span id="line-539"></span><span>        </span><span class="hs-comment">-- used in GHC.Core.Lint.</span><span>
</span><span id="line-540"></span><span>
</span><span id="line-541"></span><span>
</span><span id="line-542"></span><span>        </span><span id="dcInfix"><span class="annot"><span class="annottext">DataCon -&gt; Bool
</span><a href="GHC.Core.DataCon.html#dcInfix"><span class="hs-identifier hs-var hs-var">dcInfix</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>        </span><span class="hs-comment">-- True &lt;=&gt; declared infix</span><span>
</span><span id="line-543"></span><span>                                </span><span class="hs-comment">-- Used for Template Haskell and 'deriving' only</span><span>
</span><span id="line-544"></span><span>                                </span><span class="hs-comment">-- The actual fixity is stored elsewhere</span><span>
</span><span id="line-545"></span><span>
</span><span id="line-546"></span><span>        </span><span id="dcPromoted"><span class="annot"><span class="annottext">DataCon -&gt; TyCon
</span><a href="GHC.Core.DataCon.html#dcPromoted"><span class="hs-identifier hs-var hs-var">dcPromoted</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span>    </span><span class="hs-comment">-- The promoted TyCon</span><span>
</span><span id="line-547"></span><span>                               </span><span class="hs-comment">-- See Note [Promoted data constructors] in GHC.Core.TyCon</span><span>
</span><span id="line-548"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-549"></span><span>
</span><span id="line-550"></span><span>
</span><span id="line-551"></span><span class="hs-comment">{- Note [TyVarBinders in DataCons]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
For the TyVarBinders in a DataCon and PatSyn:

 * Each argument flag is Inferred or Specified.
   None are Required. (A DataCon is a term-level function; see
   Note [No Required PiTyBinder in terms] in GHC.Core.TyCo.Rep.)

Why do we need the TyVarBinders, rather than just the TyVars?  So that
we can construct the right type for the DataCon with its foralls
attributed the correct visibility.  That in turn governs whether you
can use visible type application at a call of the data constructor.

See also [DataCon user type variable binders] for an extended discussion on the
order in which TyVarBinders appear in a DataCon.

Note [Existential coercion variables]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
For now (Aug 2018) we can't write coercion quantifications in source Haskell, but
we can in Core. Consider having:

  data T :: forall k. k -&gt; k -&gt; Constraint where
    MkT :: forall k (a::k) (b::k).
           forall k' (c::k') (co::k'~k).
           (b ~# (c|&gt;co)) =&gt; T k a b

  dcUnivTyVars       = [k,a,b]
  dcExTyCoVars       = [k',c,co]
  dcUserTyVarBinders = [k,a,k',c]
  dcEqSpec           = [b ~# (c|&gt;co)]
  dcOtherTheta       = []
  dcOrigArgTys       = []
  dcRepTyCon         = T

Function call 'dataConKindEqSpec' returns [k'~k]

Note [DataCon arities]
~~~~~~~~~~~~~~~~~~~~~~
A `DataCon`'s source arity and core representation arity may differ:
`dcSourceArity` does not take constraints into account, but `dcRepArity` does.

The additional arguments taken into account by `dcRepArity` include quantified
dictionaries and coercion arguments, lifted and unlifted (despite the unlifted
coercion arguments having a zero-width runtime representation).
For example:
   MkT :: Ord a =&gt; a -&gt; T a
    dcSourceArity = 1
    dcRepArity    = 2

   MkU :: (b ~ '[]) =&gt; U b
    dcSourceArity = 0
    dcRepArity    = 1


Note [DataCon user type variable binders]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
A DataCon has two different sets of type variables:

* dcUserTyVarBinders, for the type variables binders in the order in which they
  originally arose in the user-written type signature.

  - They are the forall'd binders of the data con /wrapper/, which the user calls.

  - Their order *does* matter for TypeApplications, so they are full TyVarBinders,
    complete with visibilities.

* dcUnivTyVars and dcExTyCoVars, for the &quot;true underlying&quot; (i.e. of the data
  con worker) universal type variable and existential type/coercion variables,
  respectively.

  - They (i.e. univ ++ ex) are the forall'd variables of the data con /worker/

  - Their order is irrelevant for the purposes of TypeApplications,
    and as a consequence, they do not come equipped with visibilities
    (that is, they are TyVars/TyCoVars instead of ForAllTyBinders).

Often (dcUnivTyVars ++ dcExTyCoVars) = dcUserTyVarBinders; but they may differ
for three reasons, coming next:

--- Reason (R1): Order of quantification in GADT syntax ---

In System FC, data constructor type signatures always quantify over all of
their universal type variables, followed by their existential type variables.
Normally, this isn't a problem, as most datatypes naturally quantify their type
variables in this order anyway. For example:

  data T a b = forall c. MkT b c

Here, we have `MkT :: forall {k} (a :: k) (b :: *) (c :: *). b -&gt; c -&gt; T a b`,
where k, a, and b are universal and c is existential. (The inferred variable k
isn't available for TypeApplications, hence why it's in braces.) This is a
perfectly reasonable order to use, as the syntax of H98-style datatypes
(+ ExistentialQuantification) suggests it.

Things become more complicated when GADT syntax enters the picture. Consider
this example:

  data X a where
    MkX :: forall b a. b -&gt; Proxy a -&gt; X a

If we adopt the earlier approach of quantifying all the universal variables
followed by all the existential ones, GHC would come up with this type
signature for MkX:

  MkX :: forall {k} (a :: k) (b :: *). b -&gt; Proxy a -&gt; X a

But this is not what we want at all! After all, if a user were to use
TypeApplications on MkX, they would expect to instantiate `b` before `a`,
as that's the order in which they were written in the `forall`. (See #11721.)
Instead, we'd like GHC to come up with this type signature:

  MkX :: forall {k} (b :: *) (a :: k). b -&gt; Proxy a -&gt; X a

In fact, even if we left off the explicit forall:

  data X a where
    MkX :: b -&gt; Proxy a -&gt; X a

Then a user should still expect `b` to be quantified before `a`, since
according to the rules of TypeApplications, in the absence of `forall` GHC
performs a stable topological sort on the type variables in the user-written
type signature, which would place `b` before `a`.

--- Reason (R2): GADT constructors quantify over different variables ---

GADT constructors may quantify over different variables than the worker
would.  Consider
   data T a b where
      MkT :: forall c d. c -&gt; T [c] d

The dcUserTyVarBinders must be [c, d] -- that's what the user quantified over.
But c is actually existential, as it is not equal to either of the two
universal variables.

Here is what we'll get:

  dcUserTyVarBinders = [c, d]
  dcUnivTyVars = [a, d]
  dcExTyCoVars = [c]

Note that dcUnivTyVars contains `a` from the type header (the `data T a b`)
and `d` from the signature for MkT. This is done because d is used in place
of b in the result of MkT, and so we use the name d for the universal, as that
might improve error messages. On the other hand, we need to use a fresh name
for the first universal (recalling that the result of a worker must be the
type constructor applied to a sequence of plain variables), so we use `a`, from
the header. This choice of universals is made in GHC.Tc.TyCl.mkGADTVars.

Because c is not a universal, it is an existential. Here, we see that (even
ignoring order) dcUserTyVarBinders is not dcUnivTyVars &#8899; dcExTyCoVars, because
the latter has `a` while the former does not. To understand this better, let's
look at this type for the &quot;true underlying&quot; worker data con:

      MkT :: forall a d. forall c. (a ~# [c]) =&gt; c -&gt; T a d

We see here that the `a` universal is connected with the `c` existential via
an equality constraint. It will always be the case (see the code in mkGADTVars)
that the universals not mentioned in dcUserTyVarBinders will be used in a
GADT equality -- that is, used on the left-hand side of an element of dcEqSpec:

  dcEqSpec = [a ~# [c]]

Putting this all together, all variables used on the left-hand side of an
equation in the dcEqSpec will be in dcUnivTyVars but *not* in
dcUserTyVarBinders.

--- Reason (R3): Kind equalities may have been solved ---

Consider now this case:

  type family F a where
    F Type = False
    F _    = True
  type T :: forall k. (F k ~ True) =&gt; k -&gt; k -&gt; Type
  data T a b where
    MkT :: T Maybe List

The constraint F k ~ True tells us that T does not want to be indexed by, say,
Int. Now let's consider the Core types involved:

  axiom for F: axF[0] :: F Type ~ False
               axF[1] :: forall a. F a ~ True   (a must be apart from Type)
  tycon: T :: forall k. (F k ~ True) -&gt; k -&gt; k -&gt; Type
  wrapper: MkT :: T @(Type -&gt; Type) @(Eq# (axF[1] (Type -&gt; Type)) Maybe List
  worker:  MkT :: forall k (c :: F k ~ True) (a :: k) (b :: k).
                  (k ~# (Type -&gt; Type), a ~# Maybe, b ~# List) =&gt;
                  T @k @c a b

The key observation here is that the worker quantifies over c, while the wrapper
does not. The worker *must* quantify over c, because c is a universal variable,
and the result of the worker must be the type constructor applied to a sequence
of plain type variables. But the wrapper certainly does not need to quantify over
any evidence that F (Type -&gt; Type) ~ True, as no variables are needed there.

(Aside: the c here is a regular type variable, *not* a coercion variable. This
is because F k ~ True is a *lifted* equality, not the unlifted ~#. This is why
we see Eq# in the type of the wrapper: Eq# boxes the unlifted ~# to become a
lifted ~. See also Note [The equality types story] in GHC.Builtin.Types.Prim about
Eq# and Note [Constraints in kinds] in GHC.Core.TyCo.Rep about having this constraint
in the first place.)

In this case, we'll have these fields of the DataCon:

  dcUserTyVarBinders = []    -- the wrapper quantifies over nothing
  dcUnivTyVars = [k, c, a, b]
  dcExTyCoVars = []  -- no existentials here, but a different constructor might have
  dcEqSpec = [k ~# (Type -&gt; Type), a ~# Maybe, b ~# List]

Note that c is in the dcUserTyVars, but mentioned neither in the dcUserTyVarBinders nor
in the dcEqSpec. We thus have Reason (R3): a variable might be missing from the
dcUserTyVarBinders if its type's kind is Constraint.

(At one point, we thought that the dcEqSpec would have to be non-empty. But that
wouldn't account for silly cases like type T :: (True ~ True) =&gt; Type.)

--- End of Reasons ---

INVARIANT(dataConTyVars): the set of tyvars in dcUserTyVarBinders
consists of:

* The set of tyvars in dcUnivTyVars whose type variables do not appear in
  dcEqSpec, unioned with:

* The set of tyvars (*not* covars) in dcExTyCoVars
  No covars here because because they're not user-written

When comparing for equality, we ignore differences concerning type variables
whose kinds have kind Constraint.

The word &quot;set&quot; is used above because the order in which the tyvars appear in
dcUserTyVarBinders can be completely different from the order in dcUnivTyVars or
dcExTyCoVars. That is, the tyvars in dcUserTyVarBinders are a permutation of
(tyvars of dcExTyCoVars + a subset of dcUnivTyVars). But aside from the
ordering, they in fact share the same type variables (with the same Uniques). We
sometimes refer to this as &quot;the dcUserTyVarBinders invariant&quot;. It is checked
in checkDataConTyVars.

dcUserTyVarBinders, as the name suggests, is the one that users will
see most of the time. It's used when computing the type signature of a
data constructor wrapper (see dataConWrapperType), and as a result,
it's what matters from a TypeApplications perspective.

Note [The dcEqSpec domain invariant]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Consider this example of a GADT constructor:

  data Y a where
    MkY :: Bool -&gt; Y Bool

The user-written type of MkY is `Bool -&gt; Y Bool`, but what is the underlying
Core type for MkY? There are two conceivable possibilities:

1. MkY :: forall a. (a ~# Bool) =&gt; Bool -&gt; Y a
2. MkY :: forall a. (a ~# Bool) =&gt; a    -&gt; Y a

In practice, GHC picks (1) as the Core type for MkY. This is because we
maintain an invariant that the type variables in the domain of dcEqSpec will
only ever appear in the dcUnivTyVars. As a consequence, the type variables in
the domain of dcEqSpec will /never/ appear in the dcExTyCoVars, dcOtherTheta,
dcOrigArgTys, or dcOrigResTy; these can only ever mention variables from
dcUserTyVarBinders, which excludes things in the domain of dcEqSpec.
(See Note [DataCon user type variable binders].) This explains why GHC would
not pick (2) as the Core type, since the argument type `a` mentions a type
variable in the dcEqSpec.

There are certain parts of the codebase where it is convenient to apply the
substitution arising from the dcEqSpec to the dcUnivTyVars in order to obtain
the user-written return type of a GADT constructor. A consequence of the
dcEqSpec domain invariant is that you /never/ need to apply the substitution
to any other part of the constructor type, as they don't require it.
-}</span><span>
</span><span id="line-822"></span><span>
</span><span id="line-823"></span><span class="hs-comment">-- | Data Constructor Representation</span><span>
</span><span id="line-824"></span><span class="hs-comment">-- See Note [Data constructor workers and wrappers]</span><span>
</span><span id="line-825"></span><span class="hs-keyword">data</span><span> </span><span id="DataConRep"><span class="annot"><a href="GHC.Core.DataCon.html#DataConRep"><span class="hs-identifier hs-var">DataConRep</span></a></span></span><span>
</span><span id="line-826"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- NoDataConRep means that the data con has no wrapper</span><span>
</span><span id="line-827"></span><span>    </span><span id="NoDataConRep"><span class="annot"><a href="GHC.Core.DataCon.html#NoDataConRep"><span class="hs-identifier hs-var">NoDataConRep</span></a></span></span><span>
</span><span id="line-828"></span><span>
</span><span id="line-829"></span><span>    </span><span class="hs-comment">-- DCR means that the data con has a wrapper</span><span>
</span><span id="line-830"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="DCR"><span class="annot"><a href="GHC.Core.DataCon.html#DCR"><span class="hs-identifier hs-var">DCR</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="dcr_wrap_id"><span class="annot"><span class="annottext">DataConRep -&gt; TyVar
</span><a href="GHC.Core.DataCon.html#dcr_wrap_id"><span class="hs-identifier hs-var hs-var">dcr_wrap_id</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>   </span><span class="hs-comment">-- Takes src args, unboxes/flattens,</span><span>
</span><span id="line-831"></span><span>                              </span><span class="hs-comment">-- and constructs the representation</span><span>
</span><span id="line-832"></span><span>
</span><span id="line-833"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="dcr_boxer"><span class="annot"><span class="annottext">DataConRep -&gt; DataConBoxer
</span><a href="GHC.Core.DataCon.html#dcr_boxer"><span class="hs-identifier hs-var hs-var">dcr_boxer</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Id.Make.html#DataConBoxer"><span class="hs-identifier hs-type">DataConBoxer</span></a></span><span>
</span><span id="line-834"></span><span>
</span><span id="line-835"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="dcr_arg_tys"><span class="annot"><span class="annottext">DataConRep -&gt; [Scaled Type]
</span><a href="GHC.Core.DataCon.html#dcr_arg_tys"><span class="hs-identifier hs-var hs-var">dcr_arg_tys</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span>    </span><span class="hs-comment">-- Final, representation argument types,</span><span>
</span><span id="line-836"></span><span>                                          </span><span class="hs-comment">-- after unboxing and flattening,</span><span>
</span><span id="line-837"></span><span>                                          </span><span class="hs-comment">-- and *including* all evidence args</span><span>
</span><span id="line-838"></span><span>
</span><span id="line-839"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="dcr_stricts"><span class="annot"><span class="annottext">DataConRep -&gt; [StrictnessMark]
</span><a href="GHC.Core.DataCon.html#dcr_stricts"><span class="hs-identifier hs-var hs-var">dcr_stricts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.DataCon.html#StrictnessMark"><span class="hs-identifier hs-type">StrictnessMark</span></a></span><span class="hs-special">]</span><span>  </span><span class="hs-comment">-- 1-1 with dcr_arg_tys</span><span>
</span><span id="line-840"></span><span>                </span><span class="hs-comment">-- See also Note [Data-con worker strictness]</span><span>
</span><span id="line-841"></span><span>
</span><span id="line-842"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="dcr_bangs"><span class="annot"><span class="annottext">DataConRep -&gt; [HsImplBang]
</span><a href="GHC.Core.DataCon.html#dcr_bangs"><span class="hs-identifier hs-var hs-var">dcr_bangs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.DataCon.html#HsImplBang"><span class="hs-identifier hs-type">HsImplBang</span></a></span><span class="hs-special">]</span><span>  </span><span class="hs-comment">-- The actual decisions made (including failures)</span><span>
</span><span id="line-843"></span><span>                                     </span><span class="hs-comment">-- about the original arguments; 1-1 with orig_arg_tys</span><span>
</span><span id="line-844"></span><span>                                     </span><span class="hs-comment">-- See Note [Bangs on data constructor arguments]</span><span>
</span><span id="line-845"></span><span>
</span><span id="line-846"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-847"></span><span>
</span><span id="line-848"></span><span class="hs-keyword">type</span><span> </span><span id="DataConEnv"><span class="annot"><a href="GHC.Core.DataCon.html#DataConEnv"><span class="hs-identifier hs-var">DataConEnv</span></a></span></span><span> </span><span id="local-6989586621681628385"><span class="annot"><a href="#local-6989586621681628385"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Unique.FM.html#UniqFM"><span class="hs-identifier hs-type">UniqFM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681628385"><span class="hs-identifier hs-type">a</span></a></span><span>     </span><span class="hs-comment">-- Keyed by DataCon</span><span>
</span><span id="line-849"></span><span>
</span><span id="line-850"></span><span class="hs-comment">-------------------------</span><span>
</span><span id="line-851"></span><span>
</span><span id="line-852"></span><span class="hs-comment">-- | Haskell Source Bang</span><span>
</span><span id="line-853"></span><span class="hs-comment">--</span><span>
</span><span id="line-854"></span><span class="hs-comment">-- Bangs on data constructor arguments as the user wrote them in the</span><span>
</span><span id="line-855"></span><span class="hs-comment">-- source code.</span><span>
</span><span id="line-856"></span><span class="hs-comment">--</span><span>
</span><span id="line-857"></span><span class="hs-comment">-- @(HsSrcBang _ SrcUnpack SrcLazy)@ and</span><span>
</span><span id="line-858"></span><span class="hs-comment">-- @(HsSrcBang _ SrcUnpack NoSrcStrict)@ (without StrictData) makes no sense, we</span><span>
</span><span id="line-859"></span><span class="hs-comment">-- emit a warning (in checkValidDataCon) and treat it like</span><span>
</span><span id="line-860"></span><span class="hs-comment">-- @(HsSrcBang _ NoSrcUnpack SrcLazy)@</span><span>
</span><span id="line-861"></span><span class="hs-keyword">data</span><span> </span><span id="HsSrcBang"><span class="annot"><a href="GHC.Core.DataCon.html#HsSrcBang"><span class="hs-identifier hs-var">HsSrcBang</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-862"></span><span>  </span><span id="HsSrcBang"><span class="annot"><a href="GHC.Core.DataCon.html#HsSrcBang"><span class="hs-identifier hs-var">HsSrcBang</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.SourceText.html#SourceText"><span class="hs-identifier hs-type">SourceText</span></a></span><span> </span><span class="hs-comment">-- Note [Pragma source text] in GHC.Types.SourceText</span><span>
</span><span id="line-863"></span><span>            </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#SrcUnpackedness"><span class="hs-identifier hs-type">SrcUnpackedness</span></a></span><span>
</span><span id="line-864"></span><span>            </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#SrcStrictness"><span class="hs-identifier hs-type">SrcStrictness</span></a></span><span>
</span><span id="line-865"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621681628390"><span id="local-6989586621681628398"><span id="local-6989586621681628403"><span id="local-6989586621681628405"><span id="local-6989586621681628407"><span id="local-6989586621681628413"><span id="local-6989586621681628418"><span id="local-6989586621681628421"><span id="local-6989586621681628424"><span id="local-6989586621681628427"><span id="local-6989586621681628430"><span id="local-6989586621681628433"><span id="local-6989586621681628438"><span id="local-6989586621681628443"><span class="annot"><span class="annottext">Typeable HsSrcBang
Typeable HsSrcBang =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; HsSrcBang -&gt; c HsSrcBang)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c HsSrcBang)
-&gt; (HsSrcBang -&gt; Constr)
-&gt; (HsSrcBang -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c HsSrcBang))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c HsSrcBang))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; HsSrcBang -&gt; HsSrcBang)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; HsSrcBang -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; HsSrcBang -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; HsSrcBang -&gt; [u])
-&gt; (forall u.
    Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; HsSrcBang -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; HsSrcBang -&gt; m HsSrcBang)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; HsSrcBang -&gt; m HsSrcBang)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; HsSrcBang -&gt; m HsSrcBang)
-&gt; Data HsSrcBang
HsSrcBang -&gt; Constr
HsSrcBang -&gt; DataType
(forall b. Data b =&gt; b -&gt; b) -&gt; HsSrcBang -&gt; HsSrcBang
forall a.
Typeable a =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; HsSrcBang -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; HsSrcBang -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; HsSrcBang -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; HsSrcBang -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; HsSrcBang -&gt; m HsSrcBang
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; HsSrcBang -&gt; m HsSrcBang
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c HsSrcBang
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; HsSrcBang -&gt; c HsSrcBang
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c HsSrcBang)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c HsSrcBang)
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; HsSrcBang -&gt; c HsSrcBang
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; HsSrcBang -&gt; c HsSrcBang
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c HsSrcBang
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c HsSrcBang
$ctoConstr :: HsSrcBang -&gt; Constr
toConstr :: HsSrcBang -&gt; Constr
$cdataTypeOf :: HsSrcBang -&gt; DataType
dataTypeOf :: HsSrcBang -&gt; DataType
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c HsSrcBang)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c HsSrcBang)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c HsSrcBang)
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c HsSrcBang)
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; HsSrcBang -&gt; HsSrcBang
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; HsSrcBang -&gt; HsSrcBang
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; HsSrcBang -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; HsSrcBang -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; HsSrcBang -&gt; r
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; HsSrcBang -&gt; r
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; HsSrcBang -&gt; [u]
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; HsSrcBang -&gt; [u]
$cgmapQi :: forall u. Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; HsSrcBang -&gt; u
gmapQi :: forall u. Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; HsSrcBang -&gt; u
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; HsSrcBang -&gt; m HsSrcBang
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; HsSrcBang -&gt; m HsSrcBang
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; HsSrcBang -&gt; m HsSrcBang
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; HsSrcBang -&gt; m HsSrcBang
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; HsSrcBang -&gt; m HsSrcBang
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; HsSrcBang -&gt; m HsSrcBang
</span><a href="../../base-4.18.3.0/src/Data.Data.html#Data/Data.Data.html#Data"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data.Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-866"></span><span>
</span><span id="line-867"></span><span class="hs-comment">-- | Haskell Implementation Bang</span><span>
</span><span id="line-868"></span><span class="hs-comment">--</span><span>
</span><span id="line-869"></span><span class="hs-comment">-- Bangs of data constructor arguments as generated by the compiler</span><span>
</span><span id="line-870"></span><span class="hs-comment">-- after consulting HsSrcBang, flags, etc.</span><span>
</span><span id="line-871"></span><span class="hs-keyword">data</span><span> </span><span id="HsImplBang"><span class="annot"><a href="GHC.Core.DataCon.html#HsImplBang"><span class="hs-identifier hs-var">HsImplBang</span></a></span></span><span>
</span><span id="line-872"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="HsLazy"><span class="annot"><a href="GHC.Core.DataCon.html#HsLazy"><span class="hs-identifier hs-var">HsLazy</span></a></span></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Lazy field, or one with an unlifted type</span></span><span>
</span><span id="line-873"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="HsStrict"><span class="annot"><a href="GHC.Core.DataCon.html#HsStrict"><span class="hs-identifier hs-var">HsStrict</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-comment">-- ^ Strict but not unpacked field</span><span>
</span><span id="line-874"></span><span>                  </span><span class="hs-comment">-- True &lt;=&gt; we could have unpacked, but opted not to</span><span>
</span><span id="line-875"></span><span>                  </span><span class="hs-comment">-- because of -O0.</span><span>
</span><span id="line-876"></span><span>                  </span><span class="hs-comment">-- See Note [Detecting useless UNPACK pragmas]</span><span>
</span><span id="line-877"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="HsUnpack"><span class="annot"><a href="GHC.Core.DataCon.html#HsUnpack"><span class="hs-identifier hs-var">HsUnpack</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-878"></span><span>    </span><span class="hs-comment">-- ^ Strict and unpacked field</span><span>
</span><span id="line-879"></span><span>    </span><span class="hs-comment">-- co :: arg-ty ~ product-ty HsBang</span><span>
</span><span id="line-880"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621681628454"><span id="local-6989586621681628461"><span id="local-6989586621681628466"><span id="local-6989586621681628468"><span id="local-6989586621681628470"><span id="local-6989586621681628476"><span id="local-6989586621681628481"><span id="local-6989586621681628484"><span id="local-6989586621681628487"><span id="local-6989586621681628490"><span id="local-6989586621681628493"><span id="local-6989586621681628496"><span id="local-6989586621681628501"><span id="local-6989586621681628506"><span class="annot"><span class="annottext">Typeable HsImplBang
Typeable HsImplBang =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; HsImplBang -&gt; c HsImplBang)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c HsImplBang)
-&gt; (HsImplBang -&gt; Constr)
-&gt; (HsImplBang -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c HsImplBang))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c HsImplBang))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; HsImplBang -&gt; HsImplBang)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; HsImplBang -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; HsImplBang -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; HsImplBang -&gt; [u])
-&gt; (forall u.
    Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; HsImplBang -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; HsImplBang -&gt; m HsImplBang)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; HsImplBang -&gt; m HsImplBang)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; HsImplBang -&gt; m HsImplBang)
-&gt; Data HsImplBang
HsImplBang -&gt; Constr
HsImplBang -&gt; DataType
(forall b. Data b =&gt; b -&gt; b) -&gt; HsImplBang -&gt; HsImplBang
forall a.
Typeable a =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; HsImplBang -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; HsImplBang -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; HsImplBang -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; HsImplBang -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; HsImplBang -&gt; m HsImplBang
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; HsImplBang -&gt; m HsImplBang
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c HsImplBang
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; HsImplBang -&gt; c HsImplBang
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c HsImplBang)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c HsImplBang)
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; HsImplBang -&gt; c HsImplBang
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; HsImplBang -&gt; c HsImplBang
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c HsImplBang
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c HsImplBang
$ctoConstr :: HsImplBang -&gt; Constr
toConstr :: HsImplBang -&gt; Constr
$cdataTypeOf :: HsImplBang -&gt; DataType
dataTypeOf :: HsImplBang -&gt; DataType
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c HsImplBang)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c HsImplBang)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c HsImplBang)
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c HsImplBang)
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; HsImplBang -&gt; HsImplBang
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; HsImplBang -&gt; HsImplBang
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; HsImplBang -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; HsImplBang -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; HsImplBang -&gt; r
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; HsImplBang -&gt; r
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; HsImplBang -&gt; [u]
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; HsImplBang -&gt; [u]
$cgmapQi :: forall u. Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; HsImplBang -&gt; u
gmapQi :: forall u. Arity -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; HsImplBang -&gt; u
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; HsImplBang -&gt; m HsImplBang
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; HsImplBang -&gt; m HsImplBang
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; HsImplBang -&gt; m HsImplBang
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; HsImplBang -&gt; m HsImplBang
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; HsImplBang -&gt; m HsImplBang
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; HsImplBang -&gt; m HsImplBang
</span><a href="../../base-4.18.3.0/src/Data.Data.html#Data/Data.Data.html#Data"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data.Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-881"></span><span>
</span><span id="line-882"></span><span>
</span><span id="line-883"></span><span>
</span><span id="line-884"></span><span class="hs-comment">-------------------------</span><span>
</span><span id="line-885"></span><span class="hs-comment">-- StrictnessMark is used to indicate strictness</span><span>
</span><span id="line-886"></span><span class="hs-comment">-- of the DataCon *worker* fields</span><span>
</span><span id="line-887"></span><span class="hs-keyword">data</span><span> </span><span id="StrictnessMark"><span class="annot"><a href="GHC.Core.DataCon.html#StrictnessMark"><span class="hs-identifier hs-var">StrictnessMark</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="MarkedStrict"><span class="annot"><a href="GHC.Core.DataCon.html#MarkedStrict"><span class="hs-identifier hs-var">MarkedStrict</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="NotMarkedStrict"><span class="annot"><a href="GHC.Core.DataCon.html#NotMarkedStrict"><span class="hs-identifier hs-var">NotMarkedStrict</span></a></span></span><span>
</span><span id="line-888"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621681628514"><span id="local-6989586621681628516"><span class="annot"><span class="annottext">StrictnessMark -&gt; StrictnessMark -&gt; Bool
(StrictnessMark -&gt; StrictnessMark -&gt; Bool)
-&gt; (StrictnessMark -&gt; StrictnessMark -&gt; Bool) -&gt; Eq StrictnessMark
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: StrictnessMark -&gt; StrictnessMark -&gt; Bool
== :: StrictnessMark -&gt; StrictnessMark -&gt; Bool
$c/= :: StrictnessMark -&gt; StrictnessMark -&gt; Bool
/= :: StrictnessMark -&gt; StrictnessMark -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span>
</span><span id="line-889"></span><span>
</span><span id="line-890"></span><span class="hs-comment">-- | An 'EqSpec' is a tyvar/type pair representing an equality made in</span><span>
</span><span id="line-891"></span><span class="hs-comment">-- rejigging a GADT constructor</span><span>
</span><span id="line-892"></span><span class="hs-keyword">data</span><span> </span><span id="EqSpec"><span class="annot"><a href="GHC.Core.DataCon.html#EqSpec"><span class="hs-identifier hs-var">EqSpec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="EqSpec"><span class="annot"><a href="GHC.Core.DataCon.html#EqSpec"><span class="hs-identifier hs-var">EqSpec</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-893"></span><span>
</span><span id="line-894"></span><span class="annot"><span class="hs-comment">-- | Make a non-dependent 'EqSpec'</span></span><span>
</span><span id="line-895"></span><span class="annot"><a href="GHC.Core.DataCon.html#mkEqSpec"><span class="hs-identifier hs-type">mkEqSpec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#EqSpec"><span class="hs-identifier hs-type">EqSpec</span></a></span><span>
</span><span id="line-896"></span><span id="mkEqSpec"><span class="annot"><span class="annottext">mkEqSpec :: TyVar -&gt; Type -&gt; EqSpec
</span><a href="GHC.Core.DataCon.html#mkEqSpec"><span class="hs-identifier hs-var hs-var">mkEqSpec</span></a></span></span><span> </span><span id="local-6989586621681628521"><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681628521"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span id="local-6989586621681628522"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628522"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyVar -&gt; Type -&gt; EqSpec
</span><a href="GHC.Core.DataCon.html#EqSpec"><span class="hs-identifier hs-var">EqSpec</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681628521"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628522"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-897"></span><span>
</span><span id="line-898"></span><span class="annot"><a href="GHC.Core.DataCon.html#eqSpecTyVar"><span class="hs-identifier hs-type">eqSpecTyVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#EqSpec"><span class="hs-identifier hs-type">EqSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span>
</span><span id="line-899"></span><span id="eqSpecTyVar"><span class="annot"><span class="annottext">eqSpecTyVar :: EqSpec -&gt; TyVar
</span><a href="GHC.Core.DataCon.html#eqSpecTyVar"><span class="hs-identifier hs-var hs-var">eqSpecTyVar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#EqSpec"><span class="hs-identifier hs-type">EqSpec</span></a></span><span> </span><span id="local-6989586621681628523"><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681628523"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681628523"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-900"></span><span>
</span><span id="line-901"></span><span class="annot"><a href="GHC.Core.DataCon.html#eqSpecType"><span class="hs-identifier hs-type">eqSpecType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#EqSpec"><span class="hs-identifier hs-type">EqSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-902"></span><span id="eqSpecType"><span class="annot"><span class="annottext">eqSpecType :: EqSpec -&gt; Type
</span><a href="GHC.Core.DataCon.html#eqSpecType"><span class="hs-identifier hs-var hs-var">eqSpecType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#EqSpec"><span class="hs-identifier hs-type">EqSpec</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681628524"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628524"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628524"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-903"></span><span>
</span><span id="line-904"></span><span class="annot"><a href="GHC.Core.DataCon.html#eqSpecPair"><span class="hs-identifier hs-type">eqSpecPair</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#EqSpec"><span class="hs-identifier hs-type">EqSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-905"></span><span id="eqSpecPair"><span class="annot"><span class="annottext">eqSpecPair :: EqSpec -&gt; (TyVar, Type)
</span><a href="GHC.Core.DataCon.html#eqSpecPair"><span class="hs-identifier hs-var hs-var">eqSpecPair</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#EqSpec"><span class="hs-identifier hs-type">EqSpec</span></a></span><span> </span><span id="local-6989586621681628525"><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681628525"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span id="local-6989586621681628526"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628526"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681628525"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628526"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-906"></span><span>
</span><span id="line-907"></span><span class="annot"><a href="GHC.Core.DataCon.html#eqSpecPreds"><span class="hs-identifier hs-type">eqSpecPreds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.DataCon.html#EqSpec"><span class="hs-identifier hs-type">EqSpec</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ThetaType"><span class="hs-identifier hs-type">ThetaType</span></a></span><span>
</span><span id="line-908"></span><span id="eqSpecPreds"><span class="annot"><span class="annottext">eqSpecPreds :: [EqSpec] -&gt; [Type]
</span><a href="GHC.Core.DataCon.html#eqSpecPreds"><span class="hs-identifier hs-var hs-var">eqSpecPreds</span></a></span></span><span> </span><span id="local-6989586621681628527"><span class="annot"><span class="annottext">[EqSpec]
</span><a href="#local-6989586621681628527"><span class="hs-identifier hs-var">spec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Type
</span><a href="GHC.Core.Coercion.html#mkPrimEqPred"><span class="hs-identifier hs-var">mkPrimEqPred</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyVar -&gt; Type
</span><a href="GHC.Core.TyCo.Rep.html#mkTyVarTy"><span class="hs-identifier hs-var">mkTyVarTy</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681628530"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628531"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-909"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#EqSpec"><span class="hs-identifier hs-type">EqSpec</span></a></span><span> </span><span id="local-6989586621681628530"><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681628530"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span id="local-6989586621681628531"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628531"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[EqSpec]
</span><a href="#local-6989586621681628527"><span class="hs-identifier hs-var">spec</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-910"></span><span>
</span><span id="line-911"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#EqSpec"><span class="hs-identifier hs-type">EqSpec</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-912"></span><span>  </span><span id="local-6989586621681628537"><span class="annot"><span class="annottext">ppr :: EqSpec -&gt; SDoc
</span><a href="#local-6989586621681628537"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#EqSpec"><span class="hs-identifier hs-type">EqSpec</span></a></span><span> </span><span id="local-6989586621681628539"><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681628539"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span id="local-6989586621681628540"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628540"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TyVar, Type) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681628539"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628540"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-913"></span><span>
</span><span id="line-914"></span><span class="hs-comment">{- Note [Data-con worker strictness]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Notice that we do *not* say the worker Id is strict even if the data
constructor is declared strict
     e.g.    data T = MkT ![Int] Bool
Even though most often the evals are done by the *wrapper* $WMkT, there are
situations in which tag inference will re-insert evals around the worker.
So for all intents and purposes the *worker* MkT is strict, too!

Unfortunately, if we exposed accurate strictness of DataCon workers, we'd
see the following transformation:

  f xs = case xs of xs' { __DEFAULT -&gt; ... case MkT xs b of x { __DEFAULT -&gt; [x] } } -- DmdAnal: Strict in xs
  ==&gt; { drop-seq, binder swap on xs' }
  f xs = case MkT xs b of x { __DEFAULT -&gt; [x] } -- DmdAnal: Still strict in xs
  ==&gt; { case-to-let }
  f xs = let x = MkT xs' b in [x] -- DmdAnal: No longer strict in xs!

I.e., we are ironically losing strictness in `xs` by dropping the eval on `xs`
and then doing case-to-let. The issue is that `exprIsHNF` currently says that
every DataCon worker app is a value. The implicit assumption is that surrounding
evals will have evaluated strict fields like `xs` before! But now that we had
just dropped the eval on `xs`, that assumption is no longer valid.

Long story short: By keeping the demand signature lazy, the Simplifier will not
drop the eval on `xs` and using `exprIsHNF` to decide case-to-let and others
remains sound.

Similarly, during demand analysis in dmdTransformDataConSig, we bump up the
field demand with `C_01`, *not* `C_11`, because the latter exposes too much
strictness that will drop the eval on `xs` above.

This issue is discussed at length in
&quot;Failed idea: no wrappers for strict data constructors&quot; in #21497 and #22475.

Note [Bangs on data constructor arguments]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Consider
  data T = MkT !Int {-# UNPACK #-} !Int Bool

When compiling the module, GHC will decide how to represent
MkT, depending on the optimisation level, and settings of
flags like -funbox-small-strict-fields.

Terminology:
  * HsSrcBang:  What the user wrote
                Constructors: HsSrcBang

  * HsImplBang: What GHC decided
                Constructors: HsLazy, HsStrict, HsUnpack

* If T was defined in this module, MkT's dcSrcBangs field
  records the [HsSrcBang] of what the user wrote; in the example
    [ HsSrcBang _ NoSrcUnpack SrcStrict
    , HsSrcBang _ SrcUnpack SrcStrict
    , HsSrcBang _ NoSrcUnpack NoSrcStrictness]

* However, if T was defined in an imported module, the importing module
  must follow the decisions made in the original module, regardless of
  the flag settings in the importing module.
  Also see Note [Bangs on imported data constructors] in GHC.Types.Id.Make

* The dcr_bangs field of the dcRep field records the [HsImplBang]
  If T was defined in this module, Without -O the dcr_bangs might be
    [HsStrict _, HsStrict _, HsLazy]
  With -O it might be
    [HsStrict _, HsUnpack _, HsLazy]
  With -funbox-small-strict-fields it might be
    [HsUnpack, HsUnpack _, HsLazy]
  With -XStrictData it might be
    [HsStrict _, HsUnpack _, HsStrict _]

Note [Detecting useless UNPACK pragmas]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
We want to issue a warning when there's an UNPACK pragma in the source code,
but we decided not to unpack.
However, when compiling with -O0, we never unpack, and that'd generate
spurious warnings.
Therefore, we remember in HsStrict a boolean flag, whether we _could_
have unpacked. This flag is set in GHC.Types.Id.Make.dataConSrcToImplBang.
Then, in GHC.Tc.TyCl.checkValidDataCon (sub-function check_bang),
if the user wrote an `{-# UNPACK #-}` pragma (i.e. HsSrcBang contains SrcUnpack)
we consult HsImplBang:

  HsUnpack _     =&gt; field unpacked, no warning
                    Example: data T = MkT {-# UNPACK #-} !Int   [with -O]
  HsStrict True  =&gt; field not unpacked because -O0, no warning
                    Example: data T = MkT {-# UNPACK #-} !Int   [with -O0]
  HsStrict False =&gt; field not unpacked, warning
                    Example: data T = MkT {-# UNPACK #-} !(Int -&gt; Int)
  HsLazy         =&gt; field not unpacked, warning
                    This can happen in two scenarios:

                    1) UNPACK without a bang
                    Example: data T = MkT {-# UNPACK #-} Int
                    This will produce a warning about missing ! before UNPACK.

                    2) UNPACK of an unlifted datatype
                    Because of bug #20204, we currently do not unpack type T,
                    and therefore issue a warning:
                    type IntU :: UnliftedType
                    data IntU = IntU Int#
                    data T = Test {-# UNPACK #-} IntU

The boolean flag is used only for this warning.
See #11270 for motivation.

Note [Data con representation]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The dcRepType field contains the type of the representation of a constructor
This may differ from the type of the constructor *Id* (built
by MkId.mkDataConId) for two reasons:
        a) the constructor Id may be overloaded, but the dictionary isn't stored
           e.g.    data Eq a =&gt; T a = MkT a a

        b) the constructor may store an unboxed version of a strict field.

So whenever this module talks about the representation of a data constructor
what it means is the DataCon with all Unpacking having been applied.
We can think of this as the Core representation.

Here's an example illustrating the Core representation:
        data Ord a =&gt; T a = MkT Int! a Void#
Here
        T :: Ord a =&gt; Int -&gt; a -&gt; Void# -&gt; T a
but the rep type is
        Trep :: Int# -&gt; a -&gt; Void# -&gt; T a
Actually, the unboxed part isn't implemented yet!

Note that this representation is still *different* from runtime
representation. (Which is what STG uses after unarise).

This is how T would end up being used in STG post-unarise:

  let x = T 1# y
  in ...
      case x of
        T int a -&gt; ...

The Void# argument is dropped and the boxed int is replaced by an unboxed
one. In essence we only generate binders for runtime relevant values.

We also flatten out unboxed tuples in this process. See the unarise
pass for details on how this is done. But as an example consider
`data S = MkS Bool (# Bool | Char #)` which when matched on would
result in an alternative with three binders like this

    MkS bool tag tpl_field -&gt;

See Note [Translating unboxed sums to unboxed tuples] and Note [Unarisation]
for the details of this transformation.


************************************************************************
*                                                                      *
\subsection{Instances}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1073"></span><span>
</span><span id="line-1074"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1075"></span><span>    </span><span id="local-6989586621681628549"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628549"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681628550"><span class="annot"><span class="annottext">== :: DataCon -&gt; DataCon -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var hs-var">==</span></span></span><span> </span><span id="local-6989586621681628551"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628551"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Unique
forall a. Uniquable a =&gt; a -&gt; Unique
</span><a href="GHC.Types.Unique.html#getUnique"><span class="hs-identifier hs-var">getUnique</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628549"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Unique -&gt; Unique -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Unique
forall a. Uniquable a =&gt; a -&gt; Unique
</span><a href="GHC.Types.Unique.html#getUnique"><span class="hs-identifier hs-var">getUnique</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628551"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-1076"></span><span>    </span><span id="local-6989586621681628556"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628556"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681628557"><span class="annot"><span class="annottext">/= :: DataCon -&gt; DataCon -&gt; Bool
</span><a href="#local-6989586621681628557"><span class="hs-operator hs-var hs-var hs-var hs-var">/=</span></a></span></span><span> </span><span id="local-6989586621681628559"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628559"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Unique
forall a. Uniquable a =&gt; a -&gt; Unique
</span><a href="GHC.Types.Unique.html#getUnique"><span class="hs-identifier hs-var">getUnique</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628556"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Unique -&gt; Unique -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Unique
forall a. Uniquable a =&gt; a -&gt; Unique
</span><a href="GHC.Types.Unique.html#getUnique"><span class="hs-identifier hs-var">getUnique</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628559"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-1077"></span><span>
</span><span id="line-1078"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Types.Unique.html#Uniquable"><span class="hs-identifier hs-type">Uniquable</span></a></span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1079"></span><span>    </span><span id="local-6989586621681628562"><span class="annot"><span class="annottext">getUnique :: DataCon -&gt; Unique
</span><a href="GHC.Types.Unique.html#getUnique"><span class="hs-identifier hs-var hs-var hs-var hs-var">getUnique</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Unique
</span><a href="GHC.Core.DataCon.html#dcUnique"><span class="hs-identifier hs-var">dcUnique</span></a></span><span>
</span><span id="line-1080"></span><span>
</span><span id="line-1081"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681628564"><span class="annot"><a href="GHC.Types.Name.html#NamedThing"><span class="hs-identifier hs-type">NamedThing</span></a></span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1082"></span><span>    </span><span id="local-6989586621681628569"><span class="annot"><span class="annottext">getName :: DataCon -&gt; Name
</span><a href="#local-6989586621681628569"><span class="hs-identifier hs-var hs-var hs-var hs-var">getName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Name
</span><a href="GHC.Core.DataCon.html#dcName"><span class="hs-identifier hs-var">dcName</span></a></span><span>
</span><span id="line-1083"></span><span>
</span><span id="line-1084"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1085"></span><span>    </span><span id="local-6989586621681628574"><span class="annot"><span class="annottext">ppr :: DataCon -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span id="local-6989586621681628575"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628575"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; Name
</span><a href="GHC.Core.DataCon.html#dataConName"><span class="hs-identifier hs-var">dataConName</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628575"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1086"></span><span>
</span><span id="line-1087"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681628579"><span id="local-6989586621681628585"><span class="annot"><a href="GHC.Utils.Outputable.html#OutputableBndr"><span class="hs-identifier hs-type">OutputableBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1088"></span><span>    </span><span id="local-6989586621681628590"><span class="annot"><span class="annottext">pprInfixOcc :: DataCon -&gt; SDoc
</span><a href="#local-6989586621681628590"><span class="hs-identifier hs-var hs-var hs-var hs-var">pprInfixOcc</span></a></span></span><span> </span><span id="local-6989586621681628592"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628592"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. (Outputable a, NamedThing a) =&gt; a -&gt; SDoc
</span><a href="GHC.Types.Name.html#pprInfixName"><span class="hs-identifier hs-var">pprInfixName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; Name
</span><a href="GHC.Core.DataCon.html#dataConName"><span class="hs-identifier hs-var">dataConName</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628592"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1089"></span><span>    </span><span id="local-6989586621681628595"><span class="annot"><span class="annottext">pprPrefixOcc :: DataCon -&gt; SDoc
</span><a href="#local-6989586621681628595"><span class="hs-identifier hs-var hs-var hs-var hs-var">pprPrefixOcc</span></a></span></span><span> </span><span id="local-6989586621681628597"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628597"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. NamedThing a =&gt; a -&gt; SDoc
</span><a href="GHC.Types.Name.html#pprPrefixName"><span class="hs-identifier hs-var">pprPrefixName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; Name
</span><a href="GHC.Core.DataCon.html#dataConName"><span class="hs-identifier hs-var">dataConName</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628597"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1090"></span><span>
</span><span id="line-1091"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681628602"><span id="local-6989586621681628609"><span id="local-6989586621681628614"><span id="local-6989586621681628619"><span id="local-6989586621681628622"><span id="local-6989586621681628625"><span id="local-6989586621681628628"><span id="local-6989586621681628631"><span id="local-6989586621681628634"><span id="local-6989586621681628639"><span id="local-6989586621681628644"><span class="annot"><a href="../../base-4.18.3.0/src/Data.Data.html#Data/Data.Data.html#Data"><span class="hs-identifier hs-type">Data.Data</span></a></span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1092"></span><span>    </span><span class="hs-comment">-- don't traverse?</span><span>
</span><span id="line-1093"></span><span>    </span><span id="local-6989586621681628648"><span class="annot"><span class="annottext">toConstr :: DataCon -&gt; Constr
</span><a href="#local-6989586621681628648"><span class="hs-identifier hs-var hs-var hs-var hs-var">toConstr</span></a></span></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Constr
</span><a href="GHC.Utils.Misc.html#abstractConstr"><span class="hs-identifier hs-var">abstractConstr</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;DataCon&quot;</span></span><span>
</span><span id="line-1094"></span><span>    </span><span id="local-6989586621681628653"><span class="annot"><span class="annottext">gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c DataCon
</span><a href="#local-6989586621681628653"><span class="hs-identifier hs-var hs-var hs-var hs-var">gunfold</span></a></span></span><span> </span><span class="annot"><span class="annottext">forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">forall r. r -&gt; c r
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Constr -&gt; c DataCon
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Err.html#error/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;gunfold&quot;</span></span><span>
</span><span id="line-1095"></span><span>    </span><span id="local-6989586621681628656"><span class="annot"><span class="annottext">dataTypeOf :: DataCon -&gt; DataType
</span><a href="#local-6989586621681628656"><span class="hs-identifier hs-var hs-var hs-var hs-var">dataTypeOf</span></a></span></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; DataType
</span><a href="../../base-4.18.3.0/src/Data.Data.html#mkNoRepType/Data.Data.html#mkNoRepType"><span class="hs-identifier hs-var">mkNoRepType</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;DataCon&quot;</span></span><span>
</span><span id="line-1096"></span><span>
</span><span id="line-1097"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#HsSrcBang"><span class="hs-identifier hs-type">HsSrcBang</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1098"></span><span>    </span><span id="local-6989586621681628666"><span class="annot"><span class="annottext">ppr :: HsSrcBang -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#HsSrcBang"><span class="hs-identifier hs-type">HsSrcBang</span></a></span><span> </span><span class="annot"><span class="annottext">SourceText
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681628667"><span class="annot"><span class="annottext">SrcUnpackedness
</span><a href="#local-6989586621681628667"><span class="hs-identifier hs-var">prag</span></a></span></span><span> </span><span id="local-6989586621681628668"><span class="annot"><span class="annottext">SrcStrictness
</span><a href="#local-6989586621681628668"><span class="hs-identifier hs-var">mark</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcUnpackedness -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">SrcUnpackedness
</span><a href="#local-6989586621681628667"><span class="hs-identifier hs-var">prag</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SrcStrictness -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">SrcStrictness
</span><a href="#local-6989586621681628668"><span class="hs-identifier hs-var">mark</span></a></span><span>
</span><span id="line-1099"></span><span>
</span><span id="line-1100"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#HsImplBang"><span class="hs-identifier hs-type">HsImplBang</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1101"></span><span>    </span><span id="local-6989586621681628684"><span class="annot"><span class="annottext">ppr :: HsImplBang -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsImplBang
</span><a href="GHC.Core.DataCon.html#HsLazy"><span class="hs-identifier hs-var">HsLazy</span></a></span><span>                  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Lazy&quot;</span></span><span>
</span><span id="line-1102"></span><span>    </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#HsUnpack"><span class="hs-identifier hs-type">HsUnpack</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Coercion
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unpacked&quot;</span></span><span>
</span><span id="line-1103"></span><span>    </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#HsUnpack"><span class="hs-identifier hs-type">HsUnpack</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681628686"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681628686"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unpacked&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681628686"><span class="hs-identifier hs-var">co</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1104"></span><span>    </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#HsStrict"><span class="hs-identifier hs-type">HsStrict</span></a></span><span> </span><span id="local-6989586621681628689"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681628689"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;StrictNotUnpacked&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681628689"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1105"></span><span>
</span><span id="line-1106"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#SrcStrictness"><span class="hs-identifier hs-type">SrcStrictness</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1107"></span><span>    </span><span id="local-6989586621681628695"><span class="annot"><span class="annottext">ppr :: SrcStrictness -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcStrictness
</span><a href="Language.Haskell.Syntax.Basic.html#SrcLazy"><span class="hs-identifier hs-var">SrcLazy</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char -&gt; SDoc
forall doc. IsLine doc =&gt; Char -&gt; doc
</span><a href="GHC.Utils.Outputable.html#char"><span class="hs-identifier hs-var">char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'~'</span></span><span>
</span><span id="line-1108"></span><span>    </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">SrcStrictness
</span><a href="Language.Haskell.Syntax.Basic.html#SrcStrict"><span class="hs-identifier hs-var">SrcStrict</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char -&gt; SDoc
forall doc. IsLine doc =&gt; Char -&gt; doc
</span><a href="GHC.Utils.Outputable.html#char"><span class="hs-identifier hs-var">char</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'!'</span></span><span>
</span><span id="line-1109"></span><span>    </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">SrcStrictness
</span><a href="Language.Haskell.Syntax.Basic.html#NoSrcStrict"><span class="hs-identifier hs-var">NoSrcStrict</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-1110"></span><span>
</span><span id="line-1111"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#SrcUnpackedness"><span class="hs-identifier hs-type">SrcUnpackedness</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1112"></span><span>    </span><span id="local-6989586621681628705"><span class="annot"><span class="annottext">ppr :: SrcUnpackedness -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcUnpackedness
</span><a href="Language.Haskell.Syntax.Basic.html#SrcUnpack"><span class="hs-identifier hs-var">SrcUnpack</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;{-# UNPACK #-}&quot;</span></span><span>
</span><span id="line-1113"></span><span>    </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">SrcUnpackedness
</span><a href="Language.Haskell.Syntax.Basic.html#SrcNoUnpack"><span class="hs-identifier hs-var">SrcNoUnpack</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;{-# NOUNPACK #-}&quot;</span></span><span>
</span><span id="line-1114"></span><span>    </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">SrcUnpackedness
</span><a href="Language.Haskell.Syntax.Basic.html#NoSrcUnpack"><span class="hs-identifier hs-var">NoSrcUnpack</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-1115"></span><span>
</span><span id="line-1116"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#StrictnessMark"><span class="hs-identifier hs-type">StrictnessMark</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1117"></span><span>    </span><span id="local-6989586621681628713"><span class="annot"><span class="annottext">ppr :: StrictnessMark -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="annot"><span class="annottext">StrictnessMark
</span><a href="GHC.Core.DataCon.html#MarkedStrict"><span class="hs-identifier hs-var">MarkedStrict</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;!&quot;</span></span><span>
</span><span id="line-1118"></span><span>    </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">StrictnessMark
</span><a href="GHC.Core.DataCon.html#NotMarkedStrict"><span class="hs-identifier hs-var">NotMarkedStrict</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-1119"></span><span>
</span><span id="line-1120"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681628716"><span class="annot"><a href="GHC.Utils.Binary.html#Binary"><span class="hs-identifier hs-type">Binary</span></a></span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#StrictnessMark"><span class="hs-identifier hs-type">StrictnessMark</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1121"></span><span>    </span><span id="local-6989586621681628724"><span class="annot"><span class="annottext">put_ :: BinHandle -&gt; StrictnessMark -&gt; IO ()
</span><a href="#local-6989586621681628724"><span class="hs-identifier hs-var hs-var hs-var hs-var">put_</span></a></span></span><span> </span><span id="local-6989586621681628726"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681628726"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="annot"><span class="annottext">StrictnessMark
</span><a href="GHC.Core.DataCon.html#NotMarkedStrict"><span class="hs-identifier hs-var">NotMarkedStrict</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; Word8 -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putByte"><span class="hs-identifier hs-var">putByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681628726"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span>
</span><span id="line-1122"></span><span>    </span><span class="annot"><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span id="local-6989586621681628728"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681628728"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="annot"><span class="annottext">StrictnessMark
</span><a href="GHC.Core.DataCon.html#MarkedStrict"><span class="hs-identifier hs-var">MarkedStrict</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; Word8 -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putByte"><span class="hs-identifier hs-var">putByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681628728"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1123"></span><span>    </span><span id="local-6989586621681628740"><span class="annot"><span class="annottext">get :: BinHandle -&gt; IO StrictnessMark
</span><a href="#local-6989586621681628740"><span class="hs-identifier hs-var hs-var hs-var hs-var">get</span></a></span></span><span> </span><span id="local-6989586621681628742"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681628742"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1124"></span><span>      </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681628743"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621681628743"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Word8
</span><a href="GHC.Utils.Binary.html#getByte"><span class="hs-identifier hs-var">getByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681628742"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1125"></span><span>         </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621681628743"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1126"></span><span>           </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">StrictnessMark -&gt; IO StrictnessMark
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">StrictnessMark
</span><a href="GHC.Core.DataCon.html#NotMarkedStrict"><span class="hs-identifier hs-var">NotMarkedStrict</span></a></span><span>
</span><span id="line-1127"></span><span>           </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">StrictnessMark -&gt; IO StrictnessMark
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">StrictnessMark
</span><a href="GHC.Core.DataCon.html#MarkedStrict"><span class="hs-identifier hs-var">MarkedStrict</span></a></span><span>
</span><span id="line-1128"></span><span>           </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; IO StrictnessMark
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Invalid binary format&quot;</span></span><span>
</span><span id="line-1129"></span><span>
</span><span id="line-1130"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681628748"><span class="annot"><a href="GHC.Utils.Binary.html#Binary"><span class="hs-identifier hs-type">Binary</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#SrcStrictness"><span class="hs-identifier hs-type">SrcStrictness</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1131"></span><span>    </span><span id="local-6989586621681628755"><span class="annot"><span class="annottext">put_ :: BinHandle -&gt; SrcStrictness -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var hs-var hs-var hs-var">put_</span></a></span></span><span> </span><span id="local-6989586621681628756"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681628756"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcStrictness
</span><a href="Language.Haskell.Syntax.Basic.html#SrcLazy"><span class="hs-identifier hs-var">SrcLazy</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; Word8 -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putByte"><span class="hs-identifier hs-var">putByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681628756"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span>
</span><span id="line-1132"></span><span>    </span><span class="annot"><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span id="local-6989586621681628757"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681628757"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcStrictness
</span><a href="Language.Haskell.Syntax.Basic.html#SrcStrict"><span class="hs-identifier hs-var">SrcStrict</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; Word8 -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putByte"><span class="hs-identifier hs-var">putByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681628757"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1133"></span><span>    </span><span class="annot"><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span id="local-6989586621681628758"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681628758"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcStrictness
</span><a href="Language.Haskell.Syntax.Basic.html#NoSrcStrict"><span class="hs-identifier hs-var">NoSrcStrict</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; Word8 -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putByte"><span class="hs-identifier hs-var">putByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681628758"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">2</span></span><span>
</span><span id="line-1134"></span><span>
</span><span id="line-1135"></span><span>    </span><span id="local-6989586621681628767"><span class="annot"><span class="annottext">get :: BinHandle -&gt; IO SrcStrictness
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var hs-var hs-var hs-var">get</span></a></span></span><span> </span><span id="local-6989586621681628768"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681628768"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1136"></span><span>      </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681628769"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621681628769"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Word8
</span><a href="GHC.Utils.Binary.html#getByte"><span class="hs-identifier hs-var">getByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681628768"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1137"></span><span>         </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621681628769"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1138"></span><span>           </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SrcStrictness -&gt; IO SrcStrictness
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">SrcStrictness
</span><a href="Language.Haskell.Syntax.Basic.html#SrcLazy"><span class="hs-identifier hs-var">SrcLazy</span></a></span><span>
</span><span id="line-1139"></span><span>           </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SrcStrictness -&gt; IO SrcStrictness
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">SrcStrictness
</span><a href="Language.Haskell.Syntax.Basic.html#SrcStrict"><span class="hs-identifier hs-var">SrcStrict</span></a></span><span>
</span><span id="line-1140"></span><span>           </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SrcStrictness -&gt; IO SrcStrictness
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">SrcStrictness
</span><a href="Language.Haskell.Syntax.Basic.html#NoSrcStrict"><span class="hs-identifier hs-var">NoSrcStrict</span></a></span><span>
</span><span id="line-1141"></span><span>
</span><span id="line-1142"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681628772"><span class="annot"><a href="GHC.Utils.Binary.html#Binary"><span class="hs-identifier hs-type">Binary</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#SrcUnpackedness"><span class="hs-identifier hs-type">SrcUnpackedness</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1143"></span><span>    </span><span id="local-6989586621681628779"><span class="annot"><span class="annottext">put_ :: BinHandle -&gt; SrcUnpackedness -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var hs-var hs-var hs-var">put_</span></a></span></span><span> </span><span id="local-6989586621681628780"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681628780"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcUnpackedness
</span><a href="Language.Haskell.Syntax.Basic.html#SrcNoUnpack"><span class="hs-identifier hs-var">SrcNoUnpack</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; Word8 -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putByte"><span class="hs-identifier hs-var">putByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681628780"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span>
</span><span id="line-1144"></span><span>    </span><span class="annot"><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span id="local-6989586621681628781"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681628781"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcUnpackedness
</span><a href="Language.Haskell.Syntax.Basic.html#SrcUnpack"><span class="hs-identifier hs-var">SrcUnpack</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; Word8 -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putByte"><span class="hs-identifier hs-var">putByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681628781"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1145"></span><span>    </span><span class="annot"><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span id="local-6989586621681628782"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681628782"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcUnpackedness
</span><a href="Language.Haskell.Syntax.Basic.html#NoSrcUnpack"><span class="hs-identifier hs-var">NoSrcUnpack</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; Word8 -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putByte"><span class="hs-identifier hs-var">putByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681628782"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">2</span></span><span>
</span><span id="line-1146"></span><span>
</span><span id="line-1147"></span><span>    </span><span id="local-6989586621681628791"><span class="annot"><span class="annottext">get :: BinHandle -&gt; IO SrcUnpackedness
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var hs-var hs-var hs-var">get</span></a></span></span><span> </span><span id="local-6989586621681628792"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681628792"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1148"></span><span>      </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681628793"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621681628793"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Word8
</span><a href="GHC.Utils.Binary.html#getByte"><span class="hs-identifier hs-var">getByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681628792"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1149"></span><span>         </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621681628793"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1150"></span><span>           </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SrcUnpackedness -&gt; IO SrcUnpackedness
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">SrcUnpackedness
</span><a href="Language.Haskell.Syntax.Basic.html#SrcNoUnpack"><span class="hs-identifier hs-var">SrcNoUnpack</span></a></span><span>
</span><span id="line-1151"></span><span>           </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SrcUnpackedness -&gt; IO SrcUnpackedness
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">SrcUnpackedness
</span><a href="Language.Haskell.Syntax.Basic.html#SrcUnpack"><span class="hs-identifier hs-var">SrcUnpack</span></a></span><span>
</span><span id="line-1152"></span><span>           </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SrcUnpackedness -&gt; IO SrcUnpackedness
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">SrcUnpackedness
</span><a href="Language.Haskell.Syntax.Basic.html#NoSrcUnpack"><span class="hs-identifier hs-var">NoSrcUnpack</span></a></span><span>
</span><span id="line-1153"></span><span>
</span><span id="line-1154"></span><span class="annot"><span class="hs-comment">-- | Compare strictness annotations</span></span><span>
</span><span id="line-1155"></span><span class="annot"><a href="GHC.Core.DataCon.html#eqHsBang"><span class="hs-identifier hs-type">eqHsBang</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#HsImplBang"><span class="hs-identifier hs-type">HsImplBang</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#HsImplBang"><span class="hs-identifier hs-type">HsImplBang</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1156"></span><span id="eqHsBang"><span class="annot"><span class="annottext">eqHsBang :: HsImplBang -&gt; HsImplBang -&gt; Bool
</span><a href="GHC.Core.DataCon.html#eqHsBang"><span class="hs-identifier hs-var hs-var">eqHsBang</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsImplBang
</span><a href="GHC.Core.DataCon.html#HsLazy"><span class="hs-identifier hs-var">HsLazy</span></a></span><span>               </span><span class="annot"><span class="annottext">HsImplBang
</span><a href="GHC.Core.DataCon.html#HsLazy"><span class="hs-identifier hs-var">HsLazy</span></a></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1157"></span><span class="annot"><a href="GHC.Core.DataCon.html#eqHsBang"><span class="hs-identifier hs-var">eqHsBang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#HsStrict"><span class="hs-identifier hs-type">HsStrict</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>         </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#HsStrict"><span class="hs-identifier hs-type">HsStrict</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1158"></span><span class="annot"><a href="GHC.Core.DataCon.html#eqHsBang"><span class="hs-identifier hs-var">eqHsBang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#HsUnpack"><span class="hs-identifier hs-type">HsUnpack</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Coercion
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#HsUnpack"><span class="hs-identifier hs-type">HsUnpack</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Coercion
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1159"></span><span class="annot"><a href="GHC.Core.DataCon.html#eqHsBang"><span class="hs-identifier hs-var">eqHsBang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#HsUnpack"><span class="hs-identifier hs-type">HsUnpack</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681628794"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681628794"><span class="hs-identifier hs-var">c1</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#HsUnpack"><span class="hs-identifier hs-type">HsUnpack</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681628795"><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681628795"><span class="hs-identifier hs-var">c2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1160"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#eqType"><span class="hs-identifier hs-var">eqType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; Type
</span><a href="GHC.Core.Coercion.html#coercionType"><span class="hs-identifier hs-var">coercionType</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681628794"><span class="hs-identifier hs-var">c1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coercion -&gt; Type
</span><a href="GHC.Core.Coercion.html#coercionType"><span class="hs-identifier hs-var">coercionType</span></a></span><span> </span><span class="annot"><span class="annottext">Coercion
</span><a href="#local-6989586621681628795"><span class="hs-identifier hs-var">c2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1161"></span><span class="annot"><a href="GHC.Core.DataCon.html#eqHsBang"><span class="hs-identifier hs-var">eqHsBang</span></a></span><span> </span><span class="annot"><span class="annottext">HsImplBang
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">HsImplBang
</span><span class="hs-identifier">_</span></span><span>                                       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1162"></span><span>
</span><span id="line-1163"></span><span class="annot"><a href="GHC.Core.DataCon.html#isBanged"><span class="hs-identifier hs-type">isBanged</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#HsImplBang"><span class="hs-identifier hs-type">HsImplBang</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1164"></span><span id="isBanged"><span class="annot"><span class="annottext">isBanged :: HsImplBang -&gt; Bool
</span><a href="GHC.Core.DataCon.html#isBanged"><span class="hs-identifier hs-var hs-var">isBanged</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#HsUnpack"><span class="hs-identifier hs-type">HsUnpack</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1165"></span><span class="annot"><a href="GHC.Core.DataCon.html#isBanged"><span class="hs-identifier hs-var">isBanged</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#HsStrict"><span class="hs-identifier hs-type">HsStrict</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1166"></span><span class="annot"><a href="GHC.Core.DataCon.html#isBanged"><span class="hs-identifier hs-var">isBanged</span></a></span><span> </span><span class="annot"><span class="annottext">HsImplBang
</span><a href="GHC.Core.DataCon.html#HsLazy"><span class="hs-identifier hs-var">HsLazy</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1167"></span><span>
</span><span id="line-1168"></span><span class="annot"><a href="GHC.Core.DataCon.html#isSrcStrict"><span class="hs-identifier hs-type">isSrcStrict</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#SrcStrictness"><span class="hs-identifier hs-type">SrcStrictness</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1169"></span><span id="isSrcStrict"><span class="annot"><span class="annottext">isSrcStrict :: SrcStrictness -&gt; Bool
</span><a href="GHC.Core.DataCon.html#isSrcStrict"><span class="hs-identifier hs-var hs-var">isSrcStrict</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcStrictness
</span><a href="Language.Haskell.Syntax.Basic.html#SrcStrict"><span class="hs-identifier hs-var">SrcStrict</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1170"></span><span class="annot"><a href="GHC.Core.DataCon.html#isSrcStrict"><span class="hs-identifier hs-var">isSrcStrict</span></a></span><span> </span><span class="annot"><span class="annottext">SrcStrictness
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1171"></span><span>
</span><span id="line-1172"></span><span class="annot"><a href="GHC.Core.DataCon.html#isSrcUnpacked"><span class="hs-identifier hs-type">isSrcUnpacked</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#SrcUnpackedness"><span class="hs-identifier hs-type">SrcUnpackedness</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1173"></span><span id="isSrcUnpacked"><span class="annot"><span class="annottext">isSrcUnpacked :: SrcUnpackedness -&gt; Bool
</span><a href="GHC.Core.DataCon.html#isSrcUnpacked"><span class="hs-identifier hs-var hs-var">isSrcUnpacked</span></a></span></span><span> </span><span class="annot"><span class="annottext">SrcUnpackedness
</span><a href="Language.Haskell.Syntax.Basic.html#SrcUnpack"><span class="hs-identifier hs-var">SrcUnpack</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1174"></span><span class="annot"><a href="GHC.Core.DataCon.html#isSrcUnpacked"><span class="hs-identifier hs-var">isSrcUnpacked</span></a></span><span> </span><span class="annot"><span class="annottext">SrcUnpackedness
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1175"></span><span>
</span><span id="line-1176"></span><span class="annot"><a href="GHC.Core.DataCon.html#isMarkedStrict"><span class="hs-identifier hs-type">isMarkedStrict</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#StrictnessMark"><span class="hs-identifier hs-type">StrictnessMark</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1177"></span><span id="isMarkedStrict"><span class="annot"><span class="annottext">isMarkedStrict :: StrictnessMark -&gt; Bool
</span><a href="GHC.Core.DataCon.html#isMarkedStrict"><span class="hs-identifier hs-var hs-var">isMarkedStrict</span></a></span></span><span> </span><span class="annot"><span class="annottext">StrictnessMark
</span><a href="GHC.Core.DataCon.html#NotMarkedStrict"><span class="hs-identifier hs-var">NotMarkedStrict</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1178"></span><span class="annot"><a href="GHC.Core.DataCon.html#isMarkedStrict"><span class="hs-identifier hs-var">isMarkedStrict</span></a></span><span> </span><span class="annot"><span class="annottext">StrictnessMark
</span><span class="hs-identifier">_</span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>   </span><span class="hs-comment">-- All others are strict</span><span>
</span><span id="line-1179"></span><span>
</span><span id="line-1180"></span><span class="annot"><a href="GHC.Core.DataCon.html#cbvFromStrictMark"><span class="hs-identifier hs-type">cbvFromStrictMark</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#StrictnessMark"><span class="hs-identifier hs-type">StrictnessMark</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#CbvMark"><span class="hs-identifier hs-type">CbvMark</span></a></span><span>
</span><span id="line-1181"></span><span id="cbvFromStrictMark"><span class="annot"><span class="annottext">cbvFromStrictMark :: StrictnessMark -&gt; CbvMark
</span><a href="GHC.Core.DataCon.html#cbvFromStrictMark"><span class="hs-identifier hs-var hs-var">cbvFromStrictMark</span></a></span></span><span> </span><span class="annot"><span class="annottext">StrictnessMark
</span><a href="GHC.Core.DataCon.html#NotMarkedStrict"><span class="hs-identifier hs-var">NotMarkedStrict</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CbvMark
</span><a href="GHC.Types.Basic.html#NotMarkedCbv"><span class="hs-identifier hs-var">NotMarkedCbv</span></a></span><span>
</span><span id="line-1182"></span><span class="annot"><a href="GHC.Core.DataCon.html#cbvFromStrictMark"><span class="hs-identifier hs-var">cbvFromStrictMark</span></a></span><span> </span><span class="annot"><span class="annottext">StrictnessMark
</span><a href="GHC.Core.DataCon.html#MarkedStrict"><span class="hs-identifier hs-var">MarkedStrict</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CbvMark
</span><a href="GHC.Types.Basic.html#MarkedCbv"><span class="hs-identifier hs-var">MarkedCbv</span></a></span><span>
</span><span id="line-1183"></span><span>
</span><span id="line-1184"></span><span>
</span><span id="line-1185"></span><span class="annot"><span class="hs-comment">{- *********************************************************************
*                                                                      *
\subsection{Construction}
*                                                                      *
********************************************************************* -}</span></span><span>
</span><span id="line-1190"></span><span>
</span><span id="line-1191"></span><span class="annot"><span class="hs-comment">-- | Build a new data constructor</span></span><span>
</span><span id="line-1192"></span><span class="annot"><a href="GHC.Core.DataCon.html#mkDataCon"><span class="hs-identifier hs-type">mkDataCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-1193"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>           </span><span class="annot"><span class="hs-comment">-- ^ Is the constructor declared infix?</span></span><span>
</span><span id="line-1194"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyConRepName"><span class="hs-identifier hs-type">TyConRepName</span></a></span><span>   </span><span class="annot"><span class="hs-comment">-- ^  TyConRepName for the promoted TyCon</span></span><span>
</span><span id="line-1195"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.DataCon.html#HsSrcBang"><span class="hs-identifier hs-type">HsSrcBang</span></a></span><span class="hs-special">]</span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Strictness/unpack annotations, from user</span></span><span>
</span><span id="line-1196"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.FieldLabel.html#FieldLabel"><span class="hs-identifier hs-type">FieldLabel</span></a></span><span class="hs-special">]</span><span>   </span><span class="hs-comment">-- ^ Field labels for the constructor,</span><span>
</span><span id="line-1197"></span><span>                            </span><span class="hs-comment">-- if it is a record, otherwise empty</span><span>
</span><span id="line-1198"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span class="hs-special">]</span><span>        </span><span class="annot"><span class="hs-comment">-- ^ Universals.</span></span><span>
</span><span id="line-1199"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyCoVar"><span class="hs-identifier hs-type">TyCoVar</span></a></span><span class="hs-special">]</span><span>      </span><span class="annot"><span class="hs-comment">-- ^ Existentials.</span></span><span>
</span><span id="line-1200"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#InvisTVBinder"><span class="hs-identifier hs-type">InvisTVBinder</span></a></span><span class="hs-special">]</span><span>    </span><span class="hs-comment">-- ^ User-written 'TyVarBinder's.</span><span>
</span><span id="line-1201"></span><span>                                </span><span class="hs-comment">--   These must be Inferred/Specified.</span><span>
</span><span id="line-1202"></span><span>                                </span><span class="hs-comment">--   See @Note [TyVarBinders in DataCons]@</span><span>
</span><span id="line-1203"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.DataCon.html#EqSpec"><span class="hs-identifier hs-type">EqSpec</span></a></span><span class="hs-special">]</span><span>           </span><span class="annot"><span class="hs-comment">-- ^ GADT equalities</span></span><span>
</span><span id="line-1204"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#KnotTied"><span class="hs-identifier hs-type">KnotTied</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ThetaType"><span class="hs-identifier hs-type">ThetaType</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Theta-type occurring before the arguments proper</span></span><span>
</span><span id="line-1205"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#KnotTied"><span class="hs-identifier hs-type">KnotTied</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Original argument types</span></span><span>
</span><span id="line-1206"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#KnotTied"><span class="hs-identifier hs-type">KnotTied</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>      </span><span class="annot"><span class="hs-comment">-- ^ Original result type</span></span><span>
</span><span id="line-1207"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#PromDataConInfo"><span class="hs-identifier hs-type">PromDataConInfo</span></a></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ See comments on 'GHC.Core.TyCon.PromDataConInfo'</span></span><span>
</span><span id="line-1208"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#KnotTied"><span class="hs-identifier hs-type">KnotTied</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span>     </span><span class="annot"><span class="hs-comment">-- ^ Representation type constructor</span></span><span>
</span><span id="line-1209"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#ConTag"><span class="hs-identifier hs-type">ConTag</span></a></span><span>             </span><span class="annot"><span class="hs-comment">-- ^ Constructor tag</span></span><span>
</span><span id="line-1210"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ThetaType"><span class="hs-identifier hs-type">ThetaType</span></a></span><span>          </span><span class="hs-comment">-- ^ The &quot;stupid theta&quot;, context of the data</span><span>
</span><span id="line-1211"></span><span>                                </span><span class="hs-comment">-- declaration e.g. @data Eq a =&gt; T a ...@</span><span>
</span><span id="line-1212"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>                 </span><span class="annot"><span class="hs-comment">-- ^ Worker Id</span></span><span>
</span><span id="line-1213"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataConRep"><span class="hs-identifier hs-type">DataConRep</span></a></span><span>         </span><span class="annot"><span class="hs-comment">-- ^ Representation</span></span><span>
</span><span id="line-1214"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span>
</span><span id="line-1215"></span><span>  </span><span class="hs-comment">-- Can get the tag from the TyCon</span><span>
</span><span id="line-1216"></span><span>
</span><span id="line-1217"></span><span id="mkDataCon"><span class="annot"><span class="annottext">mkDataCon :: Name
-&gt; Bool
-&gt; Name
-&gt; [HsSrcBang]
-&gt; [FieldLabel]
-&gt; [TyVar]
-&gt; [TyVar]
-&gt; [InvisTVBinder]
-&gt; [EqSpec]
-&gt; [Type]
-&gt; [Scaled Type]
-&gt; Type
-&gt; PromDataConInfo
-&gt; TyCon
-&gt; Arity
-&gt; [Type]
-&gt; TyVar
-&gt; DataConRep
-&gt; DataCon
</span><a href="GHC.Core.DataCon.html#mkDataCon"><span class="hs-identifier hs-var hs-var">mkDataCon</span></a></span></span><span> </span><span id="local-6989586621681628802"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681628802"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621681628803"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681628803"><span class="hs-identifier hs-var">declared_infix</span></a></span></span><span> </span><span id="local-6989586621681628804"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681628804"><span class="hs-identifier hs-var">prom_info</span></a></span></span><span>
</span><span id="line-1218"></span><span>          </span><span id="local-6989586621681628805"><span class="annot"><span class="annottext">[HsSrcBang]
</span><a href="#local-6989586621681628805"><span class="hs-identifier hs-var">arg_stricts</span></a></span></span><span>   </span><span class="hs-comment">-- Must match orig_arg_tys 1-1</span><span>
</span><span id="line-1219"></span><span>          </span><span id="local-6989586621681628806"><span class="annot"><span class="annottext">[FieldLabel]
</span><a href="#local-6989586621681628806"><span class="hs-identifier hs-var">fields</span></a></span></span><span>
</span><span id="line-1220"></span><span>          </span><span id="local-6989586621681628807"><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628807"><span class="hs-identifier hs-var">univ_tvs</span></a></span></span><span> </span><span id="local-6989586621681628808"><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628808"><span class="hs-identifier hs-var">ex_tvs</span></a></span></span><span> </span><span id="local-6989586621681628809"><span class="annot"><span class="annottext">[InvisTVBinder]
</span><a href="#local-6989586621681628809"><span class="hs-identifier hs-var">user_tvbs</span></a></span></span><span>
</span><span id="line-1221"></span><span>          </span><span id="local-6989586621681628810"><span class="annot"><span class="annottext">[EqSpec]
</span><a href="#local-6989586621681628810"><span class="hs-identifier hs-var">eq_spec</span></a></span></span><span> </span><span id="local-6989586621681628811"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628811"><span class="hs-identifier hs-var">theta</span></a></span></span><span>
</span><span id="line-1222"></span><span>          </span><span id="local-6989586621681628812"><span class="annot"><span class="annottext">[Scaled Type]
</span><a href="#local-6989586621681628812"><span class="hs-identifier hs-var">orig_arg_tys</span></a></span></span><span> </span><span id="local-6989586621681628813"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628813"><span class="hs-identifier hs-var">orig_res_ty</span></a></span></span><span> </span><span id="local-6989586621681628814"><span class="annot"><span class="annottext">PromDataConInfo
</span><a href="#local-6989586621681628814"><span class="hs-identifier hs-var">rep_info</span></a></span></span><span> </span><span id="local-6989586621681628815"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681628815"><span class="hs-identifier hs-var">rep_tycon</span></a></span></span><span> </span><span id="local-6989586621681628816"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681628816"><span class="hs-identifier hs-var">tag</span></a></span></span><span>
</span><span id="line-1223"></span><span>          </span><span id="local-6989586621681628817"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628817"><span class="hs-identifier hs-var">stupid_theta</span></a></span></span><span> </span><span id="local-6989586621681628818"><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681628818"><span class="hs-identifier hs-var">work_id</span></a></span></span><span> </span><span id="local-6989586621681628819"><span class="annot"><span class="annottext">DataConRep
</span><a href="#local-6989586621681628819"><span class="hs-identifier hs-var">rep</span></a></span></span><span>
</span><span id="line-1224"></span><span class="hs-comment">-- Warning: mkDataCon is not a good place to check certain invariants.</span><span>
</span><span id="line-1225"></span><span class="hs-comment">-- If the programmer writes the wrong result type in the decl, thus:</span><span>
</span><span id="line-1226"></span><span class="hs-comment">--      data T a where { MkT :: S }</span><span>
</span><span id="line-1227"></span><span class="hs-comment">-- then it's possible that the univ_tvs may hit an assertion failure</span><span>
</span><span id="line-1228"></span><span class="hs-comment">-- if you pull on univ_tvs.  This case is checked by checkValidDataCon,</span><span>
</span><span id="line-1229"></span><span class="hs-comment">-- so the error is detected properly... it's just that assertions here</span><span>
</span><span id="line-1230"></span><span class="hs-comment">-- are a little dodgy.</span><span>
</span><span id="line-1231"></span><span>
</span><span id="line-1232"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628820"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-1233"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1234"></span><span>    </span><span id="local-6989586621681628821"><span class="annot"><span class="annottext">is_vanilla :: Bool
</span><a href="#local-6989586621681628821"><span class="hs-identifier hs-var hs-var">is_vanilla</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TyVar] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#null/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628808"><span class="hs-identifier hs-var">ex_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">[EqSpec] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#null/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[EqSpec]
</span><a href="#local-6989586621681628810"><span class="hs-identifier hs-var">eq_spec</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">[Type] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#null/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628811"><span class="hs-identifier hs-var">theta</span></a></span><span>
</span><span id="line-1235"></span><span>
</span><span id="line-1236"></span><span>    </span><span id="local-6989586621681628820"><span class="annot"><span class="annottext">con :: DataCon
</span><a href="#local-6989586621681628820"><span class="hs-identifier hs-var hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#MkData"><span class="hs-identifier hs-type">MkData</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">dcName :: Name
</span><a href="GHC.Core.DataCon.html#dcName"><span class="hs-identifier hs-var">dcName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681628802"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dcUnique :: Unique
</span><a href="GHC.Core.DataCon.html#dcUnique"><span class="hs-identifier hs-var">dcUnique</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Unique
</span><a href="GHC.Types.Name.html#nameUnique"><span class="hs-identifier hs-var">nameUnique</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681628802"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1237"></span><span>                  </span><span class="annot"><span class="annottext">dcVanilla :: Bool
</span><a href="GHC.Core.DataCon.html#dcVanilla"><span class="hs-identifier hs-var">dcVanilla</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681628821"><span class="hs-identifier hs-var">is_vanilla</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dcInfix :: Bool
</span><a href="GHC.Core.DataCon.html#dcInfix"><span class="hs-identifier hs-var">dcInfix</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681628803"><span class="hs-identifier hs-var">declared_infix</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1238"></span><span>                  </span><span class="annot"><span class="annottext">dcUnivTyVars :: [TyVar]
</span><a href="GHC.Core.DataCon.html#dcUnivTyVars"><span class="hs-identifier hs-var">dcUnivTyVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628807"><span class="hs-identifier hs-var">univ_tvs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1239"></span><span>                  </span><span class="annot"><span class="annottext">dcExTyCoVars :: [TyVar]
</span><a href="GHC.Core.DataCon.html#dcExTyCoVars"><span class="hs-identifier hs-var">dcExTyCoVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628808"><span class="hs-identifier hs-var">ex_tvs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1240"></span><span>                  </span><span class="annot"><span class="annottext">dcUserTyVarBinders :: [InvisTVBinder]
</span><a href="GHC.Core.DataCon.html#dcUserTyVarBinders"><span class="hs-identifier hs-var">dcUserTyVarBinders</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[InvisTVBinder]
</span><a href="#local-6989586621681628809"><span class="hs-identifier hs-var">user_tvbs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1241"></span><span>                  </span><span class="annot"><span class="annottext">dcEqSpec :: [EqSpec]
</span><a href="GHC.Core.DataCon.html#dcEqSpec"><span class="hs-identifier hs-var">dcEqSpec</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[EqSpec]
</span><a href="#local-6989586621681628810"><span class="hs-identifier hs-var">eq_spec</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1242"></span><span>                  </span><span class="annot"><span class="annottext">dcOtherTheta :: [Type]
</span><a href="GHC.Core.DataCon.html#dcOtherTheta"><span class="hs-identifier hs-var">dcOtherTheta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628811"><span class="hs-identifier hs-var">theta</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1243"></span><span>                  </span><span class="annot"><span class="annottext">dcStupidTheta :: [Type]
</span><a href="GHC.Core.DataCon.html#dcStupidTheta"><span class="hs-identifier hs-var">dcStupidTheta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628817"><span class="hs-identifier hs-var">stupid_theta</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1244"></span><span>                  </span><span class="annot"><span class="annottext">dcOrigArgTys :: [Scaled Type]
</span><a href="GHC.Core.DataCon.html#dcOrigArgTys"><span class="hs-identifier hs-var">dcOrigArgTys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Scaled Type]
</span><a href="#local-6989586621681628812"><span class="hs-identifier hs-var">orig_arg_tys</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dcOrigResTy :: Type
</span><a href="GHC.Core.DataCon.html#dcOrigResTy"><span class="hs-identifier hs-var">dcOrigResTy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628813"><span class="hs-identifier hs-var">orig_res_ty</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1245"></span><span>                  </span><span class="annot"><span class="annottext">dcRepTyCon :: TyCon
</span><a href="GHC.Core.DataCon.html#dcRepTyCon"><span class="hs-identifier hs-var">dcRepTyCon</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681628815"><span class="hs-identifier hs-var">rep_tycon</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1246"></span><span>                  </span><span class="annot"><span class="annottext">dcSrcBangs :: [HsSrcBang]
</span><a href="GHC.Core.DataCon.html#dcSrcBangs"><span class="hs-identifier hs-var">dcSrcBangs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[HsSrcBang]
</span><a href="#local-6989586621681628805"><span class="hs-identifier hs-var">arg_stricts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1247"></span><span>                  </span><span class="annot"><span class="annottext">dcFields :: [FieldLabel]
</span><a href="GHC.Core.DataCon.html#dcFields"><span class="hs-identifier hs-var">dcFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[FieldLabel]
</span><a href="#local-6989586621681628806"><span class="hs-identifier hs-var">fields</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dcTag :: Arity
</span><a href="GHC.Core.DataCon.html#dcTag"><span class="hs-identifier hs-var">dcTag</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681628816"><span class="hs-identifier hs-var">tag</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dcRepType :: Type
</span><a href="GHC.Core.DataCon.html#dcRepType"><span class="hs-identifier hs-var">dcRepType</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628825"><span class="hs-identifier hs-var">rep_ty</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1248"></span><span>                  </span><span class="annot"><span class="annottext">dcWorkId :: TyVar
</span><a href="GHC.Core.DataCon.html#dcWorkId"><span class="hs-identifier hs-var">dcWorkId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681628818"><span class="hs-identifier hs-var">work_id</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1249"></span><span>                  </span><span class="annot"><span class="annottext">dcRep :: DataConRep
</span><a href="GHC.Core.DataCon.html#dcRep"><span class="hs-identifier hs-var">dcRep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataConRep
</span><a href="#local-6989586621681628819"><span class="hs-identifier hs-var">rep</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1250"></span><span>                  </span><span class="annot"><span class="annottext">dcSourceArity :: Arity
</span><a href="GHC.Core.DataCon.html#dcSourceArity"><span class="hs-identifier hs-var">dcSourceArity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Scaled Type] -&gt; Arity
forall a. [a] -&gt; Arity
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Arity
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#length/Data.Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[Scaled Type]
</span><a href="#local-6989586621681628812"><span class="hs-identifier hs-var">orig_arg_tys</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1251"></span><span>                  </span><span class="annot"><span class="annottext">dcRepArity :: Arity
</span><a href="GHC.Core.DataCon.html#dcRepArity"><span class="hs-identifier hs-var">dcRepArity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Scaled Type] -&gt; Arity
forall a. [a] -&gt; Arity
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Arity
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#length/Data.Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[Scaled Type]
</span><a href="#local-6989586621681628827"><span class="hs-identifier hs-var">rep_arg_tys</span></a></span><span> </span><span class="annot"><span class="annottext">Arity -&gt; Arity -&gt; Arity
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">(TyVar -&gt; Bool) -&gt; [TyVar] -&gt; Arity
forall a. (a -&gt; Bool) -&gt; [a] -&gt; Arity
</span><a href="GHC.Utils.Misc.html#count"><span class="hs-identifier hs-var">count</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar -&gt; Bool
</span><a href="GHC.Types.Var.html#isCoVar"><span class="hs-identifier hs-var">isCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628808"><span class="hs-identifier hs-var">ex_tvs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1252"></span><span>                  </span><span class="annot"><span class="annottext">dcPromoted :: TyCon
</span><a href="GHC.Core.DataCon.html#dcPromoted"><span class="hs-identifier hs-var">dcPromoted</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681628831"><span class="hs-identifier hs-var">promoted</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1253"></span><span>
</span><span id="line-1254"></span><span>        </span><span class="hs-comment">-- The 'arg_stricts' passed to mkDataCon are simply those for the</span><span>
</span><span id="line-1255"></span><span>        </span><span class="hs-comment">-- source-language arguments.  We add extra ones for the</span><span>
</span><span id="line-1256"></span><span>        </span><span class="hs-comment">-- dictionary arguments right here.</span><span>
</span><span id="line-1257"></span><span>
</span><span id="line-1258"></span><span>    </span><span id="local-6989586621681628827"><span class="annot"><span class="annottext">rep_arg_tys :: [Scaled Type]
</span><a href="#local-6989586621681628827"><span class="hs-identifier hs-var hs-var">rep_arg_tys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; [Scaled Type]
</span><a href="GHC.Core.DataCon.html#dataConRepArgTys"><span class="hs-identifier hs-var">dataConRepArgTys</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628820"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-1259"></span><span>
</span><span id="line-1260"></span><span>    </span><span id="local-6989586621681628825"><span class="annot"><span class="annottext">rep_ty :: Type
</span><a href="#local-6989586621681628825"><span class="hs-identifier hs-var hs-var">rep_ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1261"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DataConRep
</span><a href="#local-6989586621681628819"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1262"></span><span>        </span><span class="hs-comment">-- If the DataCon has no wrapper, then the worker's type *is* the</span><span>
</span><span id="line-1263"></span><span>        </span><span class="hs-comment">-- user-facing type, so we can simply use dataConWrapperType.</span><span>
</span><span id="line-1264"></span><span>        </span><span class="annot"><span class="annottext">DataConRep
</span><a href="GHC.Core.DataCon.html#NoDataConRep"><span class="hs-identifier hs-var">NoDataConRep</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Type
</span><a href="GHC.Core.DataCon.html#dataConWrapperType"><span class="hs-identifier hs-var">dataConWrapperType</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628820"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-1265"></span><span>        </span><span class="hs-comment">-- If the DataCon has a wrapper, then the worker's type is never seen</span><span>
</span><span id="line-1266"></span><span>        </span><span class="hs-comment">-- by the user. The visibilities we pick do not matter here.</span><span>
</span><span id="line-1267"></span><span>        </span><span class="annot"><a href="GHC.Core.DataCon.html#DCR"><span class="hs-identifier hs-type">DCR</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[TyVar] -&gt; Type -&gt; Type
</span><a href="GHC.Core.Type.html#mkInfForAllTys"><span class="hs-identifier hs-var">mkInfForAllTys</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628807"><span class="hs-identifier hs-var">univ_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Type) -&gt; Type -&gt; Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar] -&gt; Type -&gt; Type
</span><a href="GHC.Core.Type.html#mkTyCoInvForAllTys"><span class="hs-identifier hs-var">mkTyCoInvForAllTys</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628808"><span class="hs-identifier hs-var">ex_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Type) -&gt; Type -&gt; Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1268"></span><span>                 </span><span class="annot"><span class="annottext">[Scaled Type] -&gt; Type -&gt; Type
</span><a href="GHC.Core.Type.html#mkScaledFunctionTys"><span class="hs-identifier hs-var">mkScaledFunctionTys</span></a></span><span> </span><span class="annot"><span class="annottext">[Scaled Type]
</span><a href="#local-6989586621681628827"><span class="hs-identifier hs-var">rep_arg_tys</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Type) -&gt; Type -&gt; Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1269"></span><span>                 </span><span class="annot"><span class="annottext">TyCon -&gt; [Type] -&gt; Type
</span><a href="GHC.Core.Type.html#mkTyConApp"><span class="hs-identifier hs-var">mkTyConApp</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681628815"><span class="hs-identifier hs-var">rep_tycon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TyVar] -&gt; [Type]
</span><a href="GHC.Core.TyCo.Rep.html#mkTyVarTys"><span class="hs-identifier hs-var">mkTyVarTys</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628807"><span class="hs-identifier hs-var">univ_tvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1270"></span><span>                 </span><span class="hs-comment">-- res_arg_tys is a mixture of TypeLike and ConstraintLike,</span><span>
</span><span id="line-1271"></span><span>                 </span><span class="hs-comment">-- so we don't know which FunTyFlag to use</span><span>
</span><span id="line-1272"></span><span>                 </span><span class="hs-comment">-- Hence using mkScaledFunctionTys.</span><span>
</span><span id="line-1273"></span><span>
</span><span id="line-1274"></span><span>      </span><span class="hs-comment">-- See Note [Promoted data constructors] in GHC.Core.TyCon</span><span>
</span><span id="line-1275"></span><span>    </span><span id="local-6989586621681628837"><span class="annot"><span class="annottext">prom_tv_bndrs :: [TyConBinder]
</span><a href="#local-6989586621681628837"><span class="hs-identifier hs-var hs-var">prom_tv_bndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ForAllTyFlag -&gt; TyVar -&gt; TyConBinder
</span><a href="GHC.Core.TyCon.html#mkNamedTyConBinder"><span class="hs-identifier hs-var">mkNamedTyConBinder</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Specificity -&gt; ForAllTyFlag
</span><a href="GHC.Types.Var.html#Invisible"><span class="hs-identifier hs-var">Invisible</span></a></span><span> </span><span class="annot"><span class="annottext">Specificity
</span><a href="#local-6989586621681628840"><span class="hs-identifier hs-var">spec</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681628841"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-1276"></span><span>                    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-type">Bndr</span></a></span><span> </span><span id="local-6989586621681628841"><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681628841"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span id="local-6989586621681628840"><span class="annot"><span class="annottext">Specificity
</span><a href="#local-6989586621681628840"><span class="hs-identifier hs-var">spec</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[InvisTVBinder]
</span><a href="#local-6989586621681628809"><span class="hs-identifier hs-var">user_tvbs</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1277"></span><span>
</span><span id="line-1278"></span><span>    </span><span id="local-6989586621681628843"><span class="annot"><span class="annottext">fresh_names :: [Name]
</span><a href="#local-6989586621681628843"><span class="hs-identifier hs-var hs-var">fresh_names</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; [Name]
</span><a href="GHC.Core.DataCon.html#freshNames"><span class="hs-identifier hs-var">freshNames</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(InvisTVBinder -&gt; Name) -&gt; [InvisTVBinder] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">InvisTVBinder -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="annot"><span class="annottext">[InvisTVBinder]
</span><a href="#local-6989586621681628809"><span class="hs-identifier hs-var">user_tvbs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1279"></span><span>      </span><span class="hs-comment">-- fresh_names: make sure that the &quot;anonymous&quot; tyvars don't</span><span>
</span><span id="line-1280"></span><span>      </span><span class="hs-comment">-- clash in name or unique with the universal/existential ones.</span><span>
</span><span id="line-1281"></span><span>      </span><span class="hs-comment">-- Tiresome!  And unnecessary because these tyvars are never looked at</span><span>
</span><span id="line-1282"></span><span>    </span><span id="local-6989586621681628845"><span class="annot"><span class="annottext">prom_theta_bndrs :: [TyConBinder]
</span><a href="#local-6989586621681628845"><span class="hs-identifier hs-var hs-var">prom_theta_bndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TyVar -&gt; TyConBinder
</span><a href="GHC.Core.TyCon.html#mkInvisAnonTyConBinder"><span class="hs-identifier hs-var">mkInvisAnonTyConBinder</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Type -&gt; TyVar
</span><a href="GHC.Types.Var.html#mkTyVar"><span class="hs-identifier hs-var">mkTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681628848"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628849"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1283"></span><span>     </span><span class="hs-comment">{- Invisible -}</span><span>   </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681628848"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681628848"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681628849"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628849"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681628843"><span class="hs-identifier hs-var">fresh_names</span></a></span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; [Type] -&gt; [(Name, Type)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../../base-4.18.3.0/src/GHC.List.html#zip/GHC.List.html#zip"><span class="hs-operator hs-var">`zip`</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628811"><span class="hs-identifier hs-var">theta</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1284"></span><span>    </span><span id="local-6989586621681628850"><span class="annot"><span class="annottext">prom_arg_bndrs :: [TyConBinder]
</span><a href="#local-6989586621681628850"><span class="hs-identifier hs-var hs-var">prom_arg_bndrs</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TyVar -&gt; TyConBinder
</span><a href="GHC.Core.TyCon.html#mkAnonTyConBinder"><span class="hs-identifier hs-var">mkAnonTyConBinder</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Type -&gt; TyVar
</span><a href="GHC.Types.Var.html#mkTyVar"><span class="hs-identifier hs-var">mkTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681628852"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628853"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1285"></span><span>     </span><span class="hs-comment">{- Visible -}</span><span>     </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681628852"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681628852"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681628853"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628853"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Type] -&gt; [Name] -&gt; [Name]
forall b a. [b] -&gt; [a] -&gt; [a]
</span><a href="GHC.Utils.Misc.html#dropList"><span class="hs-identifier hs-var">dropList</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628811"><span class="hs-identifier hs-var">theta</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681628843"><span class="hs-identifier hs-var">fresh_names</span></a></span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; [Type] -&gt; [(Name, Type)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../../base-4.18.3.0/src/GHC.List.html#zip/GHC.List.html#zip"><span class="hs-operator hs-var">`zip`</span></a></span><span> </span><span class="annot"><span class="annottext">(Scaled Type -&gt; Type) -&gt; [Scaled Type] -&gt; [Type]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Scaled Type -&gt; Type
forall a. Scaled a -&gt; a
</span><a href="GHC.Core.TyCo.Rep.html#scaledThing"><span class="hs-identifier hs-var">scaledThing</span></a></span><span> </span><span class="annot"><span class="annottext">[Scaled Type]
</span><a href="#local-6989586621681628812"><span class="hs-identifier hs-var">orig_arg_tys</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1286"></span><span>    </span><span id="local-6989586621681628856"><span class="annot"><span class="annottext">prom_bndrs :: [TyConBinder]
</span><a href="#local-6989586621681628856"><span class="hs-identifier hs-var hs-var">prom_bndrs</span></a></span></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TyConBinder]
</span><a href="#local-6989586621681628837"><span class="hs-identifier hs-var">prom_tv_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">[TyConBinder] -&gt; [TyConBinder] -&gt; [TyConBinder]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[TyConBinder]
</span><a href="#local-6989586621681628845"><span class="hs-identifier hs-var">prom_theta_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">[TyConBinder] -&gt; [TyConBinder] -&gt; [TyConBinder]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[TyConBinder]
</span><a href="#local-6989586621681628850"><span class="hs-identifier hs-var">prom_arg_bndrs</span></a></span><span>
</span><span id="line-1287"></span><span>    </span><span id="local-6989586621681628857"><span class="annot"><span class="annottext">prom_res_kind :: Type
</span><a href="#local-6989586621681628857"><span class="hs-identifier hs-var hs-var">prom_res_kind</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628813"><span class="hs-identifier hs-var">orig_res_ty</span></a></span><span>
</span><span id="line-1288"></span><span>    </span><span id="local-6989586621681628831"><span class="annot"><span class="annottext">promoted :: TyCon
</span><a href="#local-6989586621681628831"><span class="hs-identifier hs-var hs-var">promoted</span></a></span></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon
-&gt; Name
-&gt; Name
-&gt; [TyConBinder]
-&gt; Type
-&gt; [Role]
-&gt; PromDataConInfo
-&gt; TyCon
</span><a href="GHC.Core.TyCon.html#mkPromotedDataCon"><span class="hs-identifier hs-var">mkPromotedDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628820"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681628802"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681628804"><span class="hs-identifier hs-var">prom_info</span></a></span><span> </span><span class="annot"><span class="annottext">[TyConBinder]
</span><a href="#local-6989586621681628856"><span class="hs-identifier hs-var">prom_bndrs</span></a></span><span>
</span><span id="line-1289"></span><span>                                         </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628857"><span class="hs-identifier hs-var">prom_res_kind</span></a></span><span> </span><span class="annot"><span class="annottext">[Role]
</span><a href="#local-6989586621681628859"><span class="hs-identifier hs-var">roles</span></a></span><span> </span><span class="annot"><span class="annottext">PromDataConInfo
</span><a href="#local-6989586621681628814"><span class="hs-identifier hs-var">rep_info</span></a></span><span>
</span><span id="line-1290"></span><span>
</span><span id="line-1291"></span><span>    </span><span id="local-6989586621681628859"><span class="annot"><span class="annottext">roles :: [Role]
</span><a href="#local-6989586621681628859"><span class="hs-identifier hs-var hs-var">roles</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TyVar -&gt; Role) -&gt; [TyVar] -&gt; [Role]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681628860"><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681628860"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">TyVar -&gt; Bool
</span><a href="GHC.Types.Var.html#isTyVar"><span class="hs-identifier hs-var">isTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681628860"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="Language.Haskell.Syntax.Basic.html#Nominal"><span class="hs-identifier hs-var">Nominal</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="Language.Haskell.Syntax.Basic.html#Phantom"><span class="hs-identifier hs-var">Phantom</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1292"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628807"><span class="hs-identifier hs-var">univ_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar] -&gt; [TyVar] -&gt; [TyVar]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628808"><span class="hs-identifier hs-var">ex_tvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1293"></span><span>            </span><span class="annot"><span class="annottext">[Role] -&gt; [Role] -&gt; [Role]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Role) -&gt; [Type] -&gt; [Role]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Role -&gt; Type -&gt; Role
forall a b. a -&gt; b -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#const/GHC.Base.html#const"><span class="hs-identifier hs-var">const</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="Language.Haskell.Syntax.Basic.html#Representational"><span class="hs-identifier hs-var">Representational</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628811"><span class="hs-identifier hs-var">theta</span></a></span><span> </span><span class="annot"><span class="annottext">[Type] -&gt; [Type] -&gt; [Type]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">(Scaled Type -&gt; Type) -&gt; [Scaled Type] -&gt; [Type]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Scaled Type -&gt; Type
forall a. Scaled a -&gt; a
</span><a href="GHC.Core.TyCo.Rep.html#scaledThing"><span class="hs-identifier hs-var">scaledThing</span></a></span><span> </span><span class="annot"><span class="annottext">[Scaled Type]
</span><a href="#local-6989586621681628812"><span class="hs-identifier hs-var">orig_arg_tys</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1294"></span><span>
</span><span id="line-1295"></span><span class="annot"><a href="GHC.Core.DataCon.html#freshNames"><span class="hs-identifier hs-type">freshNames</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1296"></span><span class="hs-comment">-- Make an infinite list of Names whose Uniques and OccNames</span><span>
</span><span id="line-1297"></span><span class="hs-comment">-- differ from those in the 'avoid' list</span><span>
</span><span id="line-1298"></span><span id="freshNames"><span class="annot"><span class="annottext">freshNames :: [Name] -&gt; [Name]
</span><a href="GHC.Core.DataCon.html#freshNames"><span class="hs-identifier hs-var hs-var">freshNames</span></a></span></span><span> </span><span id="local-6989586621681628866"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681628866"><span class="hs-identifier hs-var">avoids</span></a></span></span><span>
</span><span id="line-1299"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Unique -&gt; OccName -&gt; Name
</span><a href="GHC.Types.Name.html#mkSystemName"><span class="hs-identifier hs-var">mkSystemName</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621681628868"><span class="hs-identifier hs-var">uniq</span></a></span><span> </span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621681628869"><span class="hs-identifier hs-var">occ</span></a></span><span>
</span><span id="line-1300"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621681628870"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681628870"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Arity
</span><span class="hs-number">0</span></span><span class="hs-glyph">..</span><span class="hs-special">]</span><span>
</span><span id="line-1301"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681628868"><span class="annot"><span class="annottext">uniq :: Unique
</span><a href="#local-6989586621681628868"><span class="hs-identifier hs-var hs-var">uniq</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arity -&gt; Unique
</span><a href="GHC.Builtin.Uniques.html#mkAlphaTyVarUnique"><span class="hs-identifier hs-var">mkAlphaTyVarUnique</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681628870"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1302"></span><span>          </span><span id="local-6989586621681628869"><span class="annot"><span class="annottext">occ :: OccName
</span><a href="#local-6989586621681628869"><span class="hs-identifier hs-var hs-var">occ</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FastString -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#mkTyVarOccFS"><span class="hs-identifier hs-var">mkTyVarOccFS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#mkFastString"><span class="hs-identifier hs-var">mkFastString</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'x'</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; String -&gt; String
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Arity -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../base-4.18.3.0/src/GHC.Show.html#show/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681628870"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1303"></span><span>
</span><span id="line-1304"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Unique
</span><a href="#local-6989586621681628868"><span class="hs-identifier hs-var">uniq</span></a></span><span> </span><span class="annot"><span class="annottext">Unique -&gt; UniqSet Unique -&gt; Bool
forall a. Uniquable a =&gt; a -&gt; UniqSet a -&gt; Bool
</span><a href="GHC.Types.Unique.Set.html#elementOfUniqSet"><span class="hs-operator hs-var">`elementOfUniqSet`</span></a></span><span> </span><span class="annot"><span class="annottext">UniqSet Unique
</span><a href="#local-6989586621681628876"><span class="hs-identifier hs-var">avoid_uniqs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1305"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OccName
</span><a href="#local-6989586621681628869"><span class="hs-identifier hs-var">occ</span></a></span><span> </span><span class="annot"><span class="annottext">OccName -&gt; OccSet -&gt; Bool
</span><a href="GHC.Types.Name.Occurrence.html#elemOccSet"><span class="hs-operator hs-var">`elemOccSet`</span></a></span><span> </span><span class="annot"><span class="annottext">OccSet
</span><a href="#local-6989586621681628878"><span class="hs-identifier hs-var">avoid_occs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1306"></span><span>
</span><span id="line-1307"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1308"></span><span>    </span><span class="annot"><a href="#local-6989586621681628876"><span class="hs-identifier hs-type">avoid_uniqs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Unique.Set.html#UniqSet"><span class="hs-identifier hs-type">UniqSet</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Unique.html#Unique"><span class="hs-identifier hs-type">Unique</span></a></span><span>
</span><span id="line-1309"></span><span>    </span><span id="local-6989586621681628876"><span class="annot"><span class="annottext">avoid_uniqs :: UniqSet Unique
</span><a href="#local-6989586621681628876"><span class="hs-identifier hs-var hs-var">avoid_uniqs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Unique] -&gt; UniqSet Unique
forall a. Uniquable a =&gt; [a] -&gt; UniqSet a
</span><a href="GHC.Types.Unique.Set.html#mkUniqSet"><span class="hs-identifier hs-var">mkUniqSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Name -&gt; Unique) -&gt; [Name] -&gt; [Unique]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Unique
forall a. Uniquable a =&gt; a -&gt; Unique
</span><a href="GHC.Types.Unique.html#getUnique"><span class="hs-identifier hs-var">getUnique</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681628866"><span class="hs-identifier hs-var">avoids</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1310"></span><span>
</span><span id="line-1311"></span><span>    </span><span class="annot"><a href="#local-6989586621681628878"><span class="hs-identifier hs-type">avoid_occs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.Occurrence.html#OccSet"><span class="hs-identifier hs-type">OccSet</span></a></span><span>
</span><span id="line-1312"></span><span>    </span><span id="local-6989586621681628878"><span class="annot"><span class="annottext">avoid_occs :: OccSet
</span><a href="#local-6989586621681628878"><span class="hs-identifier hs-var hs-var">avoid_occs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[OccName] -&gt; OccSet
</span><a href="GHC.Types.Name.Occurrence.html#mkOccSet"><span class="hs-identifier hs-var">mkOccSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Name -&gt; OccName) -&gt; [Name] -&gt; [OccName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; OccName
forall a. NamedThing a =&gt; a -&gt; OccName
</span><a href="GHC.Types.Name.html#getOccName"><span class="hs-identifier hs-var">getOccName</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621681628866"><span class="hs-identifier hs-var">avoids</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1313"></span><span>
</span><span id="line-1314"></span><span class="annot"><span class="hs-comment">-- | The 'Name' of the 'DataCon', giving it a unique, rooted identification</span></span><span>
</span><span id="line-1315"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConName"><span class="hs-identifier hs-type">dataConName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-1316"></span><span id="dataConName"><span class="annot"><span class="annottext">dataConName :: DataCon -&gt; Name
</span><a href="GHC.Core.DataCon.html#dataConName"><span class="hs-identifier hs-var hs-var">dataConName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Name
</span><a href="GHC.Core.DataCon.html#dcName"><span class="hs-identifier hs-var">dcName</span></a></span><span>
</span><span id="line-1317"></span><span>
</span><span id="line-1318"></span><span class="annot"><span class="hs-comment">-- | The tag used for ordering 'DataCon's</span></span><span>
</span><span id="line-1319"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConTag"><span class="hs-identifier hs-type">dataConTag</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#ConTag"><span class="hs-identifier hs-type">ConTag</span></a></span><span>
</span><span id="line-1320"></span><span id="dataConTag"><span class="annot"><span class="annottext">dataConTag :: DataCon -&gt; Arity
</span><a href="GHC.Core.DataCon.html#dataConTag"><span class="hs-identifier hs-var hs-var">dataConTag</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Arity
</span><a href="GHC.Core.DataCon.html#dcTag"><span class="hs-identifier hs-var">dcTag</span></a></span><span>
</span><span id="line-1321"></span><span>
</span><span id="line-1322"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConTagZ"><span class="hs-identifier hs-type">dataConTagZ</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#ConTagZ"><span class="hs-identifier hs-type">ConTagZ</span></a></span><span>
</span><span id="line-1323"></span><span id="dataConTagZ"><span class="annot"><span class="annottext">dataConTagZ :: DataCon -&gt; Arity
</span><a href="GHC.Core.DataCon.html#dataConTagZ"><span class="hs-identifier hs-var hs-var">dataConTagZ</span></a></span></span><span> </span><span id="local-6989586621681628883"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628883"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Arity
</span><a href="GHC.Core.DataCon.html#dataConTag"><span class="hs-identifier hs-var">dataConTag</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628883"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">Arity -&gt; Arity -&gt; Arity
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#-/GHC.Num.html#-"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="GHC.Types.Basic.html#fIRST_TAG"><span class="hs-identifier hs-var">fIRST_TAG</span></a></span><span>
</span><span id="line-1324"></span><span>
</span><span id="line-1325"></span><span class="annot"><span class="hs-comment">-- | The type constructor that we are building via this data constructor</span></span><span>
</span><span id="line-1326"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConTyCon"><span class="hs-identifier hs-type">dataConTyCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span>
</span><span id="line-1327"></span><span id="dataConTyCon"><span class="annot"><span class="annottext">dataConTyCon :: DataCon -&gt; TyCon
</span><a href="GHC.Core.DataCon.html#dataConTyCon"><span class="hs-identifier hs-var hs-var">dataConTyCon</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; TyCon
</span><a href="GHC.Core.DataCon.html#dcRepTyCon"><span class="hs-identifier hs-var">dcRepTyCon</span></a></span><span>
</span><span id="line-1328"></span><span>
</span><span id="line-1329"></span><span class="hs-comment">-- | The original type constructor used in the definition of this data</span><span>
</span><span id="line-1330"></span><span class="hs-comment">-- constructor.  In case of a data family instance, that will be the family</span><span>
</span><span id="line-1331"></span><span class="hs-comment">-- type constructor.</span><span>
</span><span id="line-1332"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConOrigTyCon"><span class="hs-identifier hs-type">dataConOrigTyCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span>
</span><span id="line-1333"></span><span id="dataConOrigTyCon"><span class="annot"><span class="annottext">dataConOrigTyCon :: DataCon -&gt; TyCon
</span><a href="GHC.Core.DataCon.html#dataConOrigTyCon"><span class="hs-identifier hs-var hs-var">dataConOrigTyCon</span></a></span></span><span> </span><span id="local-6989586621681628884"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628884"><span class="hs-identifier hs-var">dc</span></a></span></span><span>
</span><span id="line-1334"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681628885"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681628885"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Maybe (TyCon, [Type])
</span><a href="GHC.Core.TyCon.html#tyConFamInst_maybe"><span class="hs-identifier hs-var">tyConFamInst_maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; TyCon
</span><a href="GHC.Core.DataCon.html#dcRepTyCon"><span class="hs-identifier hs-var">dcRepTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628884"><span class="hs-identifier hs-var">dc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681628885"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-1335"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>                                          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; TyCon
</span><a href="GHC.Core.DataCon.html#dcRepTyCon"><span class="hs-identifier hs-var">dcRepTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628884"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-1336"></span><span>
</span><span id="line-1337"></span><span class="hs-comment">-- | The representation type of the data constructor, i.e. the sort</span><span>
</span><span id="line-1338"></span><span class="hs-comment">-- type that will represent values of this type at runtime</span><span>
</span><span id="line-1339"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConRepType"><span class="hs-identifier hs-type">dataConRepType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-1340"></span><span id="dataConRepType"><span class="annot"><span class="annottext">dataConRepType :: DataCon -&gt; Type
</span><a href="GHC.Core.DataCon.html#dataConRepType"><span class="hs-identifier hs-var hs-var">dataConRepType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Type
</span><a href="GHC.Core.DataCon.html#dcRepType"><span class="hs-identifier hs-var">dcRepType</span></a></span><span>
</span><span id="line-1341"></span><span>
</span><span id="line-1342"></span><span class="annot"><span class="hs-comment">-- | Should the 'DataCon' be presented infix?</span></span><span>
</span><span id="line-1343"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConIsInfix"><span class="hs-identifier hs-type">dataConIsInfix</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1344"></span><span id="dataConIsInfix"><span class="annot"><span class="annottext">dataConIsInfix :: DataCon -&gt; Bool
</span><a href="GHC.Core.DataCon.html#dataConIsInfix"><span class="hs-identifier hs-var hs-var">dataConIsInfix</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Bool
</span><a href="GHC.Core.DataCon.html#dcInfix"><span class="hs-identifier hs-var">dcInfix</span></a></span><span>
</span><span id="line-1345"></span><span>
</span><span id="line-1346"></span><span class="annot"><span class="hs-comment">-- | The universally-quantified type variables of the constructor</span></span><span>
</span><span id="line-1347"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConUnivTyVars"><span class="hs-identifier hs-type">dataConUnivTyVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1348"></span><span id="dataConUnivTyVars"><span class="annot"><span class="annottext">dataConUnivTyVars :: DataCon -&gt; [TyVar]
</span><a href="GHC.Core.DataCon.html#dataConUnivTyVars"><span class="hs-identifier hs-var hs-var">dataConUnivTyVars</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#MkData"><span class="hs-identifier hs-type">MkData</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dcUnivTyVars :: DataCon -&gt; [TyVar]
</span><a href="GHC.Core.DataCon.html#dcUnivTyVars"><span class="hs-identifier hs-var">dcUnivTyVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628887"><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628887"><span class="hs-identifier hs-var">tvbs</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628887"><span class="hs-identifier hs-var">tvbs</span></a></span><span>
</span><span id="line-1349"></span><span>
</span><span id="line-1350"></span><span class="hs-comment">-- | The existentially-quantified type/coercion variables of the constructor</span><span>
</span><span id="line-1351"></span><span class="hs-comment">-- including dependent (kind-) GADT equalities</span><span>
</span><span id="line-1352"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConExTyCoVars"><span class="hs-identifier hs-type">dataConExTyCoVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyCoVar"><span class="hs-identifier hs-type">TyCoVar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1353"></span><span id="dataConExTyCoVars"><span class="annot"><span class="annottext">dataConExTyCoVars :: DataCon -&gt; [TyVar]
</span><a href="GHC.Core.DataCon.html#dataConExTyCoVars"><span class="hs-identifier hs-var hs-var">dataConExTyCoVars</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#MkData"><span class="hs-identifier hs-type">MkData</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dcExTyCoVars :: DataCon -&gt; [TyVar]
</span><a href="GHC.Core.DataCon.html#dcExTyCoVars"><span class="hs-identifier hs-var">dcExTyCoVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628888"><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628888"><span class="hs-identifier hs-var">tvbs</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628888"><span class="hs-identifier hs-var">tvbs</span></a></span><span>
</span><span id="line-1354"></span><span>
</span><span id="line-1355"></span><span class="annot"><span class="hs-comment">-- | Both the universal and existential type/coercion variables of the constructor</span></span><span>
</span><span id="line-1356"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConUnivAndExTyCoVars"><span class="hs-identifier hs-type">dataConUnivAndExTyCoVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyCoVar"><span class="hs-identifier hs-type">TyCoVar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1357"></span><span id="dataConUnivAndExTyCoVars"><span class="annot"><span class="annottext">dataConUnivAndExTyCoVars :: DataCon -&gt; [TyVar]
</span><a href="GHC.Core.DataCon.html#dataConUnivAndExTyCoVars"><span class="hs-identifier hs-var hs-var">dataConUnivAndExTyCoVars</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#MkData"><span class="hs-identifier hs-type">MkData</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dcUnivTyVars :: DataCon -&gt; [TyVar]
</span><a href="GHC.Core.DataCon.html#dcUnivTyVars"><span class="hs-identifier hs-var">dcUnivTyVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628889"><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628889"><span class="hs-identifier hs-var">univ_tvs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dcExTyCoVars :: DataCon -&gt; [TyVar]
</span><a href="GHC.Core.DataCon.html#dcExTyCoVars"><span class="hs-identifier hs-var">dcExTyCoVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628890"><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628890"><span class="hs-identifier hs-var">ex_tvs</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1358"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628889"><span class="hs-identifier hs-var">univ_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar] -&gt; [TyVar] -&gt; [TyVar]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628890"><span class="hs-identifier hs-var">ex_tvs</span></a></span><span>
</span><span id="line-1359"></span><span>
</span><span id="line-1360"></span><span class="hs-comment">-- See Note [DataCon user type variable binders]</span><span>
</span><span id="line-1361"></span><span class="annot"><span class="hs-comment">-- | The type variables of the constructor, in the order the user wrote them</span></span><span>
</span><span id="line-1362"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConUserTyVars"><span class="hs-identifier hs-type">dataConUserTyVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1363"></span><span id="dataConUserTyVars"><span class="annot"><span class="annottext">dataConUserTyVars :: DataCon -&gt; [TyVar]
</span><a href="GHC.Core.DataCon.html#dataConUserTyVars"><span class="hs-identifier hs-var hs-var">dataConUserTyVars</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#MkData"><span class="hs-identifier hs-type">MkData</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dcUserTyVarBinders :: DataCon -&gt; [InvisTVBinder]
</span><a href="GHC.Core.DataCon.html#dcUserTyVarBinders"><span class="hs-identifier hs-var">dcUserTyVarBinders</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628891"><span class="annot"><span class="annottext">[InvisTVBinder]
</span><a href="#local-6989586621681628891"><span class="hs-identifier hs-var">tvbs</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[InvisTVBinder] -&gt; [TyVar]
forall tv argf. [VarBndr tv argf] -&gt; [tv]
</span><a href="GHC.Types.Var.html#binderVars"><span class="hs-identifier hs-var">binderVars</span></a></span><span> </span><span class="annot"><span class="annottext">[InvisTVBinder]
</span><a href="#local-6989586621681628891"><span class="hs-identifier hs-var">tvbs</span></a></span><span>
</span><span id="line-1364"></span><span>
</span><span id="line-1365"></span><span class="hs-comment">-- See Note [DataCon user type variable binders]</span><span>
</span><span id="line-1366"></span><span class="hs-comment">-- | 'InvisTVBinder's for the type variables of the constructor, in the order the</span><span>
</span><span id="line-1367"></span><span class="hs-comment">-- user wrote them</span><span>
</span><span id="line-1368"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConUserTyVarBinders"><span class="hs-identifier hs-type">dataConUserTyVarBinders</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#InvisTVBinder"><span class="hs-identifier hs-type">InvisTVBinder</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1369"></span><span id="dataConUserTyVarBinders"><span class="annot"><span class="annottext">dataConUserTyVarBinders :: DataCon -&gt; [InvisTVBinder]
</span><a href="GHC.Core.DataCon.html#dataConUserTyVarBinders"><span class="hs-identifier hs-var hs-var">dataConUserTyVarBinders</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; [InvisTVBinder]
</span><a href="GHC.Core.DataCon.html#dcUserTyVarBinders"><span class="hs-identifier hs-var">dcUserTyVarBinders</span></a></span><span>
</span><span id="line-1370"></span><span>
</span><span id="line-1371"></span><span class="hs-comment">-- | Dependent (kind-level) equalities in a constructor.</span><span>
</span><span id="line-1372"></span><span class="hs-comment">-- There are extracted from the existential variables.</span><span>
</span><span id="line-1373"></span><span class="hs-comment">-- See Note [Existential coercion variables]</span><span>
</span><span id="line-1374"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConKindEqSpec"><span class="hs-identifier hs-type">dataConKindEqSpec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.DataCon.html#EqSpec"><span class="hs-identifier hs-type">EqSpec</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1375"></span><span id="dataConKindEqSpec"><span class="annot"><span class="annottext">dataConKindEqSpec :: DataCon -&gt; [EqSpec]
</span><a href="GHC.Core.DataCon.html#dataConKindEqSpec"><span class="hs-identifier hs-var hs-var">dataConKindEqSpec</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#MkData"><span class="hs-identifier hs-type">MkData</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">dcExTyCoVars :: DataCon -&gt; [TyVar]
</span><a href="GHC.Core.DataCon.html#dcExTyCoVars"><span class="hs-identifier hs-var">dcExTyCoVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628894"><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628894"><span class="hs-identifier hs-var">ex_tcvs</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1376"></span><span>  </span><span class="hs-comment">-- It is used in 'dataConEqSpec' (maybe also 'dataConFullSig' in the future),</span><span>
</span><span id="line-1377"></span><span>  </span><span class="hs-comment">-- which are frequently used functions.</span><span>
</span><span id="line-1378"></span><span>  </span><span class="hs-comment">-- For now (Aug 2018) this function always return empty set as we don't really</span><span>
</span><span id="line-1379"></span><span>  </span><span class="hs-comment">-- have coercion variables.</span><span>
</span><span id="line-1380"></span><span>  </span><span class="hs-comment">-- In the future when we do, we might want to cache this information in DataCon</span><span>
</span><span id="line-1381"></span><span>  </span><span class="hs-comment">-- so it won't be computed every time when aforementioned functions are called.</span><span>
</span><span id="line-1382"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TyVar -&gt; Type -&gt; EqSpec
</span><a href="GHC.Core.DataCon.html#EqSpec"><span class="hs-identifier hs-var">EqSpec</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681628895"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628896"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1383"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621681628897"><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681628897"><span class="hs-identifier hs-var">cv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628894"><span class="hs-identifier hs-var">ex_tcvs</span></a></span><span>
</span><span id="line-1384"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyVar -&gt; Bool
</span><a href="GHC.Types.Var.html#isCoVar"><span class="hs-identifier hs-var">isCoVar</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681628897"><span class="hs-identifier hs-var">cv</span></a></span><span>
</span><span id="line-1385"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681628898"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628898"><span class="hs-identifier hs-var">ty1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681628896"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628896"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Role
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; TyVar -&gt; (Type, Type, Type, Type, Role)
TyVar -&gt; (Type, Type, Type, Type, Role)
</span><a href="GHC.Core.Coercion.html#coVarKindsTypesRole"><span class="hs-identifier hs-var">coVarKindsTypesRole</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681628897"><span class="hs-identifier hs-var">cv</span></a></span><span>
</span><span id="line-1386"></span><span>          </span><span id="local-6989586621681628895"><span class="annot"><span class="annottext">tv :: TyVar
</span><a href="#local-6989586621681628895"><span class="hs-identifier hs-var hs-var">tv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Type -&gt; TyVar
Type -&gt; TyVar
</span><a href="GHC.Core.Type.html#getTyVar"><span class="hs-identifier hs-var">getTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628898"><span class="hs-identifier hs-var">ty1</span></a></span><span>
</span><span id="line-1387"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-1388"></span><span>
</span><span id="line-1389"></span><span class="hs-comment">-- | The *full* constraints on the constructor type, including dependent GADT</span><span>
</span><span id="line-1390"></span><span class="hs-comment">-- equalities.</span><span>
</span><span id="line-1391"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConTheta"><span class="hs-identifier hs-type">dataConTheta</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ThetaType"><span class="hs-identifier hs-type">ThetaType</span></a></span><span>
</span><span id="line-1392"></span><span id="dataConTheta"><span class="annot"><span class="annottext">dataConTheta :: DataCon -&gt; [Type]
</span><a href="GHC.Core.DataCon.html#dataConTheta"><span class="hs-identifier hs-var hs-var">dataConTheta</span></a></span></span><span> </span><span id="local-6989586621681628901"><span class="annot"><span class="annottext">con :: DataCon
</span><a href="#local-6989586621681628901"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#MkData"><span class="hs-identifier hs-type">MkData</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dcEqSpec :: DataCon -&gt; [EqSpec]
</span><a href="GHC.Core.DataCon.html#dcEqSpec"><span class="hs-identifier hs-var">dcEqSpec</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628902"><span class="annot"><span class="annottext">[EqSpec]
</span><a href="#local-6989586621681628902"><span class="hs-identifier hs-var">eq_spec</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dcOtherTheta :: DataCon -&gt; [Type]
</span><a href="GHC.Core.DataCon.html#dcOtherTheta"><span class="hs-identifier hs-var">dcOtherTheta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628903"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628903"><span class="hs-identifier hs-var">theta</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1393"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[EqSpec] -&gt; [Type]
</span><a href="GHC.Core.DataCon.html#eqSpecPreds"><span class="hs-identifier hs-var">eqSpecPreds</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; [EqSpec]
</span><a href="GHC.Core.DataCon.html#dataConKindEqSpec"><span class="hs-identifier hs-var">dataConKindEqSpec</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628901"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">[EqSpec] -&gt; [EqSpec] -&gt; [EqSpec]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[EqSpec]
</span><a href="#local-6989586621681628902"><span class="hs-identifier hs-var">eq_spec</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Type] -&gt; [Type] -&gt; [Type]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628903"><span class="hs-identifier hs-var">theta</span></a></span><span>
</span><span id="line-1394"></span><span>
</span><span id="line-1395"></span><span class="hs-comment">-- | Get the Id of the 'DataCon' worker: a function that is the &quot;actual&quot;</span><span>
</span><span id="line-1396"></span><span class="hs-comment">-- constructor and has no top level binding in the program. The type may</span><span>
</span><span id="line-1397"></span><span class="hs-comment">-- be different from the obvious one written in the source program. Panics</span><span>
</span><span id="line-1398"></span><span class="hs-comment">-- if there is no such 'Id' for this 'DataCon'</span><span>
</span><span id="line-1399"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConWorkId"><span class="hs-identifier hs-type">dataConWorkId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-1400"></span><span id="dataConWorkId"><span class="annot"><span class="annottext">dataConWorkId :: DataCon -&gt; TyVar
</span><a href="GHC.Core.DataCon.html#dataConWorkId"><span class="hs-identifier hs-var hs-var">dataConWorkId</span></a></span></span><span> </span><span id="local-6989586621681628904"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628904"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; TyVar
</span><a href="GHC.Core.DataCon.html#dcWorkId"><span class="hs-identifier hs-var">dcWorkId</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628904"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-1401"></span><span>
</span><span id="line-1402"></span><span class="hs-comment">-- | Get the Id of the 'DataCon' wrapper: a function that wraps the &quot;actual&quot;</span><span>
</span><span id="line-1403"></span><span class="hs-comment">-- constructor so it has the type visible in the source program: c.f.</span><span>
</span><span id="line-1404"></span><span class="hs-comment">-- 'dataConWorkId'.</span><span>
</span><span id="line-1405"></span><span class="hs-comment">-- Returns Nothing if there is no wrapper, which occurs for an algebraic data</span><span>
</span><span id="line-1406"></span><span class="hs-comment">-- constructor and also for a newtype (whose constructor is inlined</span><span>
</span><span id="line-1407"></span><span class="hs-comment">-- compulsorily)</span><span>
</span><span id="line-1408"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConWrapId_maybe"><span class="hs-identifier hs-type">dataConWrapId_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-1409"></span><span id="dataConWrapId_maybe"><span class="annot"><span class="annottext">dataConWrapId_maybe :: DataCon -&gt; Maybe TyVar
</span><a href="GHC.Core.DataCon.html#dataConWrapId_maybe"><span class="hs-identifier hs-var hs-var">dataConWrapId_maybe</span></a></span></span><span> </span><span id="local-6989586621681628905"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628905"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; DataConRep
</span><a href="GHC.Core.DataCon.html#dcRep"><span class="hs-identifier hs-var">dcRep</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628905"><span class="hs-identifier hs-var">dc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1410"></span><span>                           </span><span class="annot"><span class="annottext">DataConRep
</span><a href="GHC.Core.DataCon.html#NoDataConRep"><span class="hs-identifier hs-var">NoDataConRep</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe TyVar
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1411"></span><span>                           </span><span class="annot"><a href="GHC.Core.DataCon.html#DCR"><span class="hs-identifier hs-type">DCR</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dcr_wrap_id :: DataConRep -&gt; TyVar
</span><a href="GHC.Core.DataCon.html#dcr_wrap_id"><span class="hs-identifier hs-var">dcr_wrap_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628906"><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681628906"><span class="hs-identifier hs-var">wrap_id</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TyVar -&gt; Maybe TyVar
forall a. a -&gt; Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681628906"><span class="hs-identifier hs-var">wrap_id</span></a></span><span>
</span><span id="line-1412"></span><span>
</span><span id="line-1413"></span><span class="hs-comment">-- | Returns an Id which looks like the Haskell-source constructor by using</span><span>
</span><span id="line-1414"></span><span class="hs-comment">-- the wrapper if it exists (see 'dataConWrapId_maybe') and failing over to</span><span>
</span><span id="line-1415"></span><span class="hs-comment">-- the worker (see 'dataConWorkId')</span><span>
</span><span id="line-1416"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConWrapId"><span class="hs-identifier hs-type">dataConWrapId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-1417"></span><span id="dataConWrapId"><span class="annot"><span class="annottext">dataConWrapId :: DataCon -&gt; TyVar
</span><a href="GHC.Core.DataCon.html#dataConWrapId"><span class="hs-identifier hs-var hs-var">dataConWrapId</span></a></span></span><span> </span><span id="local-6989586621681628907"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628907"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; DataConRep
</span><a href="GHC.Core.DataCon.html#dcRep"><span class="hs-identifier hs-var">dcRep</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628907"><span class="hs-identifier hs-var">dc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1418"></span><span>                     </span><span class="annot"><span class="annottext">DataConRep
</span><a href="GHC.Core.DataCon.html#NoDataConRep"><span class="hs-identifier hs-var">NoDataConRep</span></a></span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; TyVar
</span><a href="GHC.Core.DataCon.html#dcWorkId"><span class="hs-identifier hs-var">dcWorkId</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628907"><span class="hs-identifier hs-var">dc</span></a></span><span>    </span><span class="hs-comment">-- worker=wrapper</span><span>
</span><span id="line-1419"></span><span>                     </span><span class="annot"><a href="GHC.Core.DataCon.html#DCR"><span class="hs-identifier hs-type">DCR</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dcr_wrap_id :: DataConRep -&gt; TyVar
</span><a href="GHC.Core.DataCon.html#dcr_wrap_id"><span class="hs-identifier hs-var">dcr_wrap_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628908"><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681628908"><span class="hs-identifier hs-var">wrap_id</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681628908"><span class="hs-identifier hs-var">wrap_id</span></a></span><span>
</span><span id="line-1420"></span><span>
</span><span id="line-1421"></span><span class="hs-comment">-- | Find all the 'Id's implicitly brought into scope by the data constructor. Currently,</span><span>
</span><span id="line-1422"></span><span class="hs-comment">-- the union of the 'dataConWorkId' and the 'dataConWrapId'</span><span>
</span><span id="line-1423"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConImplicitTyThings"><span class="hs-identifier hs-type">dataConImplicitTyThings</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.TyThing.html#TyThing"><span class="hs-identifier hs-type">TyThing</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1424"></span><span id="dataConImplicitTyThings"><span class="annot"><span class="annottext">dataConImplicitTyThings :: DataCon -&gt; [TyThing]
</span><a href="GHC.Core.DataCon.html#dataConImplicitTyThings"><span class="hs-identifier hs-var hs-var">dataConImplicitTyThings</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#MkData"><span class="hs-identifier hs-type">MkData</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dcWorkId :: DataCon -&gt; TyVar
</span><a href="GHC.Core.DataCon.html#dcWorkId"><span class="hs-identifier hs-var">dcWorkId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628909"><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681628909"><span class="hs-identifier hs-var">work</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dcRep :: DataCon -&gt; DataConRep
</span><a href="GHC.Core.DataCon.html#dcRep"><span class="hs-identifier hs-var">dcRep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628910"><span class="annot"><span class="annottext">DataConRep
</span><a href="#local-6989586621681628910"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1425"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TyVar -&gt; TyThing
</span><a href="GHC.Types.TyThing.html#mkAnId"><span class="hs-identifier hs-var">mkAnId</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681628909"><span class="hs-identifier hs-var">work</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[TyThing] -&gt; [TyThing] -&gt; [TyThing]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[TyThing]
</span><a href="#local-6989586621681628912"><span class="hs-identifier hs-var">wrap_ids</span></a></span><span>
</span><span id="line-1426"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1427"></span><span>    </span><span id="local-6989586621681628912"><span class="annot"><span class="annottext">wrap_ids :: [TyThing]
</span><a href="#local-6989586621681628912"><span class="hs-identifier hs-var hs-var">wrap_ids</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DataConRep
</span><a href="#local-6989586621681628910"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1428"></span><span>                 </span><span class="annot"><span class="annottext">DataConRep
</span><a href="GHC.Core.DataCon.html#NoDataConRep"><span class="hs-identifier hs-var">NoDataConRep</span></a></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1429"></span><span>                 </span><span class="annot"><a href="GHC.Core.DataCon.html#DCR"><span class="hs-identifier hs-type">DCR</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dcr_wrap_id :: DataConRep -&gt; TyVar
</span><a href="GHC.Core.DataCon.html#dcr_wrap_id"><span class="hs-identifier hs-var">dcr_wrap_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628913"><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681628913"><span class="hs-identifier hs-var">wrap</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TyVar -&gt; TyThing
</span><a href="GHC.Types.TyThing.html#mkAnId"><span class="hs-identifier hs-var">mkAnId</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681628913"><span class="hs-identifier hs-var">wrap</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1430"></span><span>
</span><span id="line-1431"></span><span class="annot"><span class="hs-comment">-- | The labels for the fields of this particular 'DataCon'</span></span><span>
</span><span id="line-1432"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConFieldLabels"><span class="hs-identifier hs-type">dataConFieldLabels</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.FieldLabel.html#FieldLabel"><span class="hs-identifier hs-type">FieldLabel</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1433"></span><span id="dataConFieldLabels"><span class="annot"><span class="annottext">dataConFieldLabels :: DataCon -&gt; [FieldLabel]
</span><a href="GHC.Core.DataCon.html#dataConFieldLabels"><span class="hs-identifier hs-var hs-var">dataConFieldLabels</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; [FieldLabel]
</span><a href="GHC.Core.DataCon.html#dcFields"><span class="hs-identifier hs-var">dcFields</span></a></span><span>
</span><span id="line-1434"></span><span>
</span><span id="line-1435"></span><span class="annot"><span class="hs-comment">-- | Extract the type for any given labelled field of the 'DataCon'</span></span><span>
</span><span id="line-1436"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConFieldType"><span class="hs-identifier hs-type">dataConFieldType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#FieldLabelString"><span class="hs-identifier hs-type">FieldLabelString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-1437"></span><span id="dataConFieldType"><span class="annot"><span class="annottext">dataConFieldType :: DataCon -&gt; FieldLabelString -&gt; Type
</span><a href="GHC.Core.DataCon.html#dataConFieldType"><span class="hs-identifier hs-var hs-var">dataConFieldType</span></a></span></span><span> </span><span id="local-6989586621681628914"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628914"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span id="local-6989586621681628915"><span class="annot"><span class="annottext">FieldLabelString
</span><a href="#local-6989586621681628915"><span class="hs-keyword hs-var">label</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; FieldLabelString -&gt; Maybe (FieldLabel, Type)
</span><a href="GHC.Core.DataCon.html#dataConFieldType_maybe"><span class="hs-identifier hs-var">dataConFieldType_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628914"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">FieldLabelString
</span><a href="#local-6989586621681628915"><span class="hs-keyword hs-var">label</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1438"></span><span>      </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldLabel
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681628916"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628916"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628916"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1439"></span><span>      </span><span class="annot"><span class="annottext">Maybe (FieldLabel, Type)
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; Type
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dataConFieldType&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628914"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FieldLabelString -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">FieldLabelString
</span><a href="#local-6989586621681628915"><span class="hs-keyword hs-var">label</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1440"></span><span>
</span><span id="line-1441"></span><span class="hs-comment">-- | Extract the label and type for any given labelled field of the</span><span>
</span><span id="line-1442"></span><span class="hs-comment">-- 'DataCon', or return 'Nothing' if the field does not belong to it</span><span>
</span><span id="line-1443"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConFieldType_maybe"><span class="hs-identifier hs-type">dataConFieldType_maybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#FieldLabelString"><span class="hs-identifier hs-type">FieldLabelString</span></a></span><span>
</span><span id="line-1444"></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.FieldLabel.html#FieldLabel"><span class="hs-identifier hs-type">FieldLabel</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1445"></span><span id="dataConFieldType_maybe"><span class="annot"><span class="annottext">dataConFieldType_maybe :: DataCon -&gt; FieldLabelString -&gt; Maybe (FieldLabel, Type)
</span><a href="GHC.Core.DataCon.html#dataConFieldType_maybe"><span class="hs-identifier hs-var hs-var">dataConFieldType_maybe</span></a></span></span><span> </span><span id="local-6989586621681628918"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628918"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span id="local-6989586621681628919"><span class="annot"><span class="annottext">FieldLabelString
</span><a href="#local-6989586621681628919"><span class="hs-keyword hs-var">label</span></a></span></span><span>
</span><span id="line-1446"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((FieldLabel, Type) -&gt; Bool)
-&gt; [(FieldLabel, Type)] -&gt; Maybe (FieldLabel, Type)
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Maybe a
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#find/Data.Foldable.html#find"><span class="hs-identifier hs-var">find</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldLabelString -&gt; FieldLabelString -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">FieldLabelString
</span><a href="#local-6989586621681628919"><span class="hs-keyword hs-var">label</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(FieldLabelString -&gt; Bool)
-&gt; ((FieldLabel, Type) -&gt; FieldLabelString)
-&gt; (FieldLabel, Type)
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">FieldLabel -&gt; FieldLabelString
</span><a href="GHC.Types.FieldLabel.html#flLabel"><span class="hs-identifier hs-var">flLabel</span></a></span><span> </span><span class="annot"><span class="annottext">(FieldLabel -&gt; FieldLabelString)
-&gt; ((FieldLabel, Type) -&gt; FieldLabel)
-&gt; (FieldLabel, Type)
-&gt; FieldLabelString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(FieldLabel, Type) -&gt; FieldLabel
forall a b. (a, b) -&gt; a
</span><a href="../../base-4.18.3.0/src/Data.Tuple.html#fst/Data.Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; [FieldLabel]
</span><a href="GHC.Core.DataCon.html#dcFields"><span class="hs-identifier hs-var">dcFields</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628918"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldLabel] -&gt; [Type] -&gt; [(FieldLabel, Type)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../../base-4.18.3.0/src/GHC.List.html#zip/GHC.List.html#zip"><span class="hs-operator hs-var">`zip`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Scaled Type -&gt; Type
forall a. Scaled a -&gt; a
</span><a href="GHC.Core.TyCo.Rep.html#scaledThing"><span class="hs-identifier hs-var">scaledThing</span></a></span><span> </span><span class="annot"><span class="annottext">(Scaled Type -&gt; Type) -&gt; [Scaled Type] -&gt; [Type]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/Data.Functor.html#%3C%24%3E/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; [Scaled Type]
</span><a href="GHC.Core.DataCon.html#dcOrigArgTys"><span class="hs-identifier hs-var">dcOrigArgTys</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628918"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1447"></span><span>
</span><span id="line-1448"></span><span class="hs-comment">-- | Strictness/unpack annotations, from user; or, for imported</span><span>
</span><span id="line-1449"></span><span class="hs-comment">-- DataCons, from the interface file</span><span>
</span><span id="line-1450"></span><span class="hs-comment">-- The list is in one-to-one correspondence with the arity of the 'DataCon'</span><span>
</span><span id="line-1451"></span><span>
</span><span id="line-1452"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConSrcBangs"><span class="hs-identifier hs-type">dataConSrcBangs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.DataCon.html#HsSrcBang"><span class="hs-identifier hs-type">HsSrcBang</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1453"></span><span id="dataConSrcBangs"><span class="annot"><span class="annottext">dataConSrcBangs :: DataCon -&gt; [HsSrcBang]
</span><a href="GHC.Core.DataCon.html#dataConSrcBangs"><span class="hs-identifier hs-var hs-var">dataConSrcBangs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; [HsSrcBang]
</span><a href="GHC.Core.DataCon.html#dcSrcBangs"><span class="hs-identifier hs-var">dcSrcBangs</span></a></span><span>
</span><span id="line-1454"></span><span>
</span><span id="line-1455"></span><span class="annot"><span class="hs-comment">-- | Source-level arity of the data constructor</span></span><span>
</span><span id="line-1456"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConSourceArity"><span class="hs-identifier hs-type">dataConSourceArity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Arity"><span class="hs-identifier hs-type">Arity</span></a></span><span>
</span><span id="line-1457"></span><span id="dataConSourceArity"><span class="annot"><span class="annottext">dataConSourceArity :: DataCon -&gt; Arity
</span><a href="GHC.Core.DataCon.html#dataConSourceArity"><span class="hs-identifier hs-var hs-var">dataConSourceArity</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#MkData"><span class="hs-identifier hs-type">MkData</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dcSourceArity :: DataCon -&gt; Arity
</span><a href="GHC.Core.DataCon.html#dcSourceArity"><span class="hs-identifier hs-var">dcSourceArity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628924"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681628924"><span class="hs-identifier hs-var">arity</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681628924"><span class="hs-identifier hs-var">arity</span></a></span><span>
</span><span id="line-1458"></span><span>
</span><span id="line-1459"></span><span class="hs-comment">-- | Gives the number of value arguments (including zero-width coercions)</span><span>
</span><span id="line-1460"></span><span class="hs-comment">-- stored by the given `DataCon`'s worker in its Core representation. This may</span><span>
</span><span id="line-1461"></span><span class="hs-comment">-- differ from the number of arguments that appear in the source code; see also</span><span>
</span><span id="line-1462"></span><span class="hs-comment">-- Note [DataCon arities]</span><span>
</span><span id="line-1463"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConRepArity"><span class="hs-identifier hs-type">dataConRepArity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Arity"><span class="hs-identifier hs-type">Arity</span></a></span><span>
</span><span id="line-1464"></span><span id="dataConRepArity"><span class="annot"><span class="annottext">dataConRepArity :: DataCon -&gt; Arity
</span><a href="GHC.Core.DataCon.html#dataConRepArity"><span class="hs-identifier hs-var hs-var">dataConRepArity</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#MkData"><span class="hs-identifier hs-type">MkData</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dcRepArity :: DataCon -&gt; Arity
</span><a href="GHC.Core.DataCon.html#dcRepArity"><span class="hs-identifier hs-var">dcRepArity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628925"><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681628925"><span class="hs-identifier hs-var">arity</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Arity
</span><a href="#local-6989586621681628925"><span class="hs-identifier hs-var">arity</span></a></span><span>
</span><span id="line-1465"></span><span>
</span><span id="line-1466"></span><span class="hs-comment">-- | Return whether there are any argument types for this 'DataCon's original source type</span><span>
</span><span id="line-1467"></span><span class="hs-comment">-- See Note [DataCon arities]</span><span>
</span><span id="line-1468"></span><span class="annot"><a href="GHC.Core.DataCon.html#isNullarySrcDataCon"><span class="hs-identifier hs-type">isNullarySrcDataCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1469"></span><span id="isNullarySrcDataCon"><span class="annot"><span class="annottext">isNullarySrcDataCon :: DataCon -&gt; Bool
</span><a href="GHC.Core.DataCon.html#isNullarySrcDataCon"><span class="hs-identifier hs-var hs-var">isNullarySrcDataCon</span></a></span></span><span> </span><span id="local-6989586621681628926"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628926"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Arity
</span><a href="GHC.Core.DataCon.html#dataConSourceArity"><span class="hs-identifier hs-var">dataConSourceArity</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628926"><span class="hs-identifier hs-var">dc</span></a></span><span> </span><span class="annot"><span class="annottext">Arity -&gt; Arity -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Arity
</span><span class="hs-number">0</span></span><span>
</span><span id="line-1470"></span><span>
</span><span id="line-1471"></span><span class="hs-comment">-- | Return whether this `DataCon`'s worker, in its Core representation, takes</span><span>
</span><span id="line-1472"></span><span class="hs-comment">-- any value arguments.</span><span>
</span><span id="line-1473"></span><span class="hs-comment">--</span><span>
</span><span id="line-1474"></span><span class="hs-comment">-- In particular, remember that we include coercion arguments in the arity of</span><span>
</span><span id="line-1475"></span><span class="hs-comment">-- the Core representation of the `DataCon` -- both lifted and unlifted</span><span>
</span><span id="line-1476"></span><span class="hs-comment">-- coercions, despite the latter having zero-width runtime representation.</span><span>
</span><span id="line-1477"></span><span class="hs-comment">--</span><span>
</span><span id="line-1478"></span><span class="hs-comment">-- See also Note [DataCon arities].</span><span>
</span><span id="line-1479"></span><span class="annot"><a href="GHC.Core.DataCon.html#isNullaryRepDataCon"><span class="hs-identifier hs-type">isNullaryRepDataCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1480"></span><span id="isNullaryRepDataCon"><span class="annot"><span class="annottext">isNullaryRepDataCon :: DataCon -&gt; Bool
</span><a href="GHC.Core.DataCon.html#isNullaryRepDataCon"><span class="hs-identifier hs-var hs-var">isNullaryRepDataCon</span></a></span></span><span> </span><span id="local-6989586621681628927"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628927"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Arity
</span><a href="GHC.Core.DataCon.html#dataConRepArity"><span class="hs-identifier hs-var">dataConRepArity</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628927"><span class="hs-identifier hs-var">dc</span></a></span><span> </span><span class="annot"><span class="annottext">Arity -&gt; Arity -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Arity
</span><span class="hs-number">0</span></span><span>
</span><span id="line-1481"></span><span>
</span><span id="line-1482"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConRepStrictness"><span class="hs-identifier hs-type">dataConRepStrictness</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.DataCon.html#StrictnessMark"><span class="hs-identifier hs-type">StrictnessMark</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1483"></span><span class="hs-comment">-- ^ Give the demands on the arguments of a</span><span>
</span><span id="line-1484"></span><span class="hs-comment">-- Core constructor application (Con dc args)</span><span>
</span><span id="line-1485"></span><span id="dataConRepStrictness"><span class="annot"><span class="annottext">dataConRepStrictness :: DataCon -&gt; [StrictnessMark]
</span><a href="GHC.Core.DataCon.html#dataConRepStrictness"><span class="hs-identifier hs-var hs-var">dataConRepStrictness</span></a></span></span><span> </span><span id="local-6989586621681628928"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628928"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; DataConRep
</span><a href="GHC.Core.DataCon.html#dcRep"><span class="hs-identifier hs-var">dcRep</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628928"><span class="hs-identifier hs-var">dc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1486"></span><span>                            </span><span class="annot"><span class="annottext">DataConRep
</span><a href="GHC.Core.DataCon.html#NoDataConRep"><span class="hs-identifier hs-var">NoDataConRep</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">StrictnessMark
</span><a href="GHC.Core.DataCon.html#NotMarkedStrict"><span class="hs-identifier hs-var">NotMarkedStrict</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Scaled Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; [Scaled Type]
</span><a href="GHC.Core.DataCon.html#dataConRepArgTys"><span class="hs-identifier hs-var">dataConRepArgTys</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628928"><span class="hs-identifier hs-var">dc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1487"></span><span>                            </span><span class="annot"><a href="GHC.Core.DataCon.html#DCR"><span class="hs-identifier hs-type">DCR</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dcr_stricts :: DataConRep -&gt; [StrictnessMark]
</span><a href="GHC.Core.DataCon.html#dcr_stricts"><span class="hs-identifier hs-var">dcr_stricts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628929"><span class="annot"><span class="annottext">[StrictnessMark]
</span><a href="#local-6989586621681628929"><span class="hs-identifier hs-var">strs</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[StrictnessMark]
</span><a href="#local-6989586621681628929"><span class="hs-identifier hs-var">strs</span></a></span><span>
</span><span id="line-1488"></span><span>
</span><span id="line-1489"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConImplBangs"><span class="hs-identifier hs-type">dataConImplBangs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.DataCon.html#HsImplBang"><span class="hs-identifier hs-type">HsImplBang</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1490"></span><span class="hs-comment">-- The implementation decisions about the strictness/unpack of each</span><span>
</span><span id="line-1491"></span><span class="hs-comment">-- source program argument to the data constructor</span><span>
</span><span id="line-1492"></span><span id="dataConImplBangs"><span class="annot"><span class="annottext">dataConImplBangs :: DataCon -&gt; [HsImplBang]
</span><a href="GHC.Core.DataCon.html#dataConImplBangs"><span class="hs-identifier hs-var hs-var">dataConImplBangs</span></a></span></span><span> </span><span id="local-6989586621681628930"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628930"><span class="hs-identifier hs-var">dc</span></a></span></span><span>
</span><span id="line-1493"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; DataConRep
</span><a href="GHC.Core.DataCon.html#dcRep"><span class="hs-identifier hs-var">dcRep</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628930"><span class="hs-identifier hs-var">dc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1494"></span><span>      </span><span class="annot"><span class="annottext">DataConRep
</span><a href="GHC.Core.DataCon.html#NoDataConRep"><span class="hs-identifier hs-var">NoDataConRep</span></a></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Arity -&gt; HsImplBang -&gt; [HsImplBang]
forall a. Arity -&gt; a -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.List.html#replicate/GHC.List.html#replicate"><span class="hs-identifier hs-var">replicate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; Arity
</span><a href="GHC.Core.DataCon.html#dcSourceArity"><span class="hs-identifier hs-var">dcSourceArity</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628930"><span class="hs-identifier hs-var">dc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsImplBang
</span><a href="GHC.Core.DataCon.html#HsLazy"><span class="hs-identifier hs-var">HsLazy</span></a></span><span>
</span><span id="line-1495"></span><span>      </span><span class="annot"><a href="GHC.Core.DataCon.html#DCR"><span class="hs-identifier hs-type">DCR</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dcr_bangs :: DataConRep -&gt; [HsImplBang]
</span><a href="GHC.Core.DataCon.html#dcr_bangs"><span class="hs-identifier hs-var">dcr_bangs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628932"><span class="annot"><span class="annottext">[HsImplBang]
</span><a href="#local-6989586621681628932"><span class="hs-identifier hs-var">bangs</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[HsImplBang]
</span><a href="#local-6989586621681628932"><span class="hs-identifier hs-var">bangs</span></a></span><span>
</span><span id="line-1496"></span><span>
</span><span id="line-1497"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConBoxer"><span class="hs-identifier hs-type">dataConBoxer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Id.Make.html#DataConBoxer"><span class="hs-identifier hs-type">DataConBoxer</span></a></span><span>
</span><span id="line-1498"></span><span id="dataConBoxer"><span class="annot"><span class="annottext">dataConBoxer :: DataCon -&gt; Maybe DataConBoxer
</span><a href="GHC.Core.DataCon.html#dataConBoxer"><span class="hs-identifier hs-var hs-var">dataConBoxer</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#MkData"><span class="hs-identifier hs-type">MkData</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dcRep :: DataCon -&gt; DataConRep
</span><a href="GHC.Core.DataCon.html#dcRep"><span class="hs-identifier hs-var">dcRep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DCR"><span class="hs-identifier hs-type">DCR</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dcr_boxer :: DataConRep -&gt; DataConBoxer
</span><a href="GHC.Core.DataCon.html#dcr_boxer"><span class="hs-identifier hs-var">dcr_boxer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628933"><span class="annot"><span class="annottext">DataConBoxer
</span><a href="#local-6989586621681628933"><span class="hs-identifier hs-var">boxer</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataConBoxer -&gt; Maybe DataConBoxer
forall a. a -&gt; Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">DataConBoxer
</span><a href="#local-6989586621681628933"><span class="hs-identifier hs-var">boxer</span></a></span><span>
</span><span id="line-1499"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConBoxer"><span class="hs-identifier hs-var">dataConBoxer</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe DataConBoxer
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1500"></span><span>
</span><span id="line-1501"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConInstSig"><span class="hs-identifier hs-type">dataConInstSig</span></a></span><span>
</span><span id="line-1502"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span>
</span><span id="line-1503"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span>    </span><span class="hs-comment">-- Instantiate the *universal* tyvars with these types</span><span>
</span><span id="line-1504"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyCoVar"><span class="hs-identifier hs-type">TyCoVar</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ThetaType"><span class="hs-identifier hs-type">ThetaType</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- Return instantiated existentials</span><span>
</span><span id="line-1505"></span><span>                                     </span><span class="hs-comment">-- theta and arg tys</span><span>
</span><span id="line-1506"></span><span class="hs-comment">-- ^ Instantiate the universal tyvars of a data con,</span><span>
</span><span id="line-1507"></span><span class="hs-comment">--   returning</span><span>
</span><span id="line-1508"></span><span class="hs-comment">--     ( instantiated existentials</span><span>
</span><span id="line-1509"></span><span class="hs-comment">--     , instantiated constraints including dependent GADT equalities</span><span>
</span><span id="line-1510"></span><span class="hs-comment">--         which are *also* listed in the instantiated existentials</span><span>
</span><span id="line-1511"></span><span class="hs-comment">--     , instantiated args)</span><span>
</span><span id="line-1512"></span><span id="dataConInstSig"><span class="annot"><span class="annottext">dataConInstSig :: DataCon -&gt; [Type] -&gt; ([TyVar], [Type], [Type])
</span><a href="GHC.Core.DataCon.html#dataConInstSig"><span class="hs-identifier hs-var hs-var">dataConInstSig</span></a></span></span><span> </span><span id="local-6989586621681628934"><span class="annot"><span class="annottext">con :: DataCon
</span><a href="#local-6989586621681628934"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#MkData"><span class="hs-identifier hs-type">MkData</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dcUnivTyVars :: DataCon -&gt; [TyVar]
</span><a href="GHC.Core.DataCon.html#dcUnivTyVars"><span class="hs-identifier hs-var">dcUnivTyVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628935"><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628935"><span class="hs-identifier hs-var">univ_tvs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dcExTyCoVars :: DataCon -&gt; [TyVar]
</span><a href="GHC.Core.DataCon.html#dcExTyCoVars"><span class="hs-identifier hs-var">dcExTyCoVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628936"><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628936"><span class="hs-identifier hs-var">ex_tvs</span></a></span></span><span>
</span><span id="line-1513"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dcOrigArgTys :: DataCon -&gt; [Scaled Type]
</span><a href="GHC.Core.DataCon.html#dcOrigArgTys"><span class="hs-identifier hs-var">dcOrigArgTys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628937"><span class="annot"><span class="annottext">[Scaled Type]
</span><a href="#local-6989586621681628937"><span class="hs-identifier hs-var">arg_tys</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1514"></span><span>               </span><span id="local-6989586621681628938"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628938"><span class="hs-identifier hs-var">univ_tys</span></a></span></span><span>
</span><span id="line-1515"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628939"><span class="hs-identifier hs-var">ex_tvs'</span></a></span><span>
</span><span id="line-1516"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Subst -&gt; [Type] -&gt; [Type]
Subst -&gt; [Type] -&gt; [Type]
</span><a href="GHC.Core.TyCo.Subst.html#substTheta"><span class="hs-identifier hs-var">substTheta</span></a></span><span> </span><span class="annot"><span class="annottext">Subst
</span><a href="#local-6989586621681628941"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; [Type]
</span><a href="GHC.Core.DataCon.html#dataConTheta"><span class="hs-identifier hs-var">dataConTheta</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628934"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1517"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Subst -&gt; [Type] -&gt; [Type]
Subst -&gt; [Type] -&gt; [Type]
</span><a href="GHC.Core.TyCo.Subst.html#substTys"><span class="hs-identifier hs-var">substTys</span></a></span><span> </span><span class="annot"><span class="annottext">Subst
</span><a href="#local-6989586621681628941"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Scaled Type -&gt; Type) -&gt; [Scaled Type] -&gt; [Type]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Scaled Type -&gt; Type
forall a. Scaled a -&gt; a
</span><a href="GHC.Core.TyCo.Rep.html#scaledThing"><span class="hs-identifier hs-var">scaledThing</span></a></span><span> </span><span class="annot"><span class="annottext">[Scaled Type]
</span><a href="#local-6989586621681628937"><span class="hs-identifier hs-var">arg_tys</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1518"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1519"></span><span>    </span><span id="local-6989586621681628943"><span class="annot"><span class="annottext">univ_subst :: Subst
</span><a href="#local-6989586621681628943"><span class="hs-identifier hs-var hs-var">univ_subst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TyVar] -&gt; [Type] -&gt; Subst
(() :: Constraint) =&gt; [TyVar] -&gt; [Type] -&gt; Subst
</span><a href="GHC.Core.TyCo.Subst.html#zipTvSubst"><span class="hs-identifier hs-var">zipTvSubst</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628935"><span class="hs-identifier hs-var">univ_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628938"><span class="hs-identifier hs-var">univ_tys</span></a></span><span>
</span><span id="line-1520"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681628941"><span class="annot"><span class="annottext">Subst
</span><a href="#local-6989586621681628941"><span class="hs-identifier hs-var">subst</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681628939"><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628939"><span class="hs-identifier hs-var">ex_tvs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Subst -&gt; [TyVar] -&gt; (Subst, [TyVar])
Subst -&gt; [TyVar] -&gt; (Subst, [TyVar])
</span><a href="GHC.Core.TyCo.Subst.html#substVarBndrs"><span class="hs-identifier hs-var">Type.substVarBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">Subst
</span><a href="#local-6989586621681628943"><span class="hs-identifier hs-var">univ_subst</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628936"><span class="hs-identifier hs-var">ex_tvs</span></a></span><span>
</span><span id="line-1521"></span><span>
</span><span id="line-1522"></span><span>
</span><span id="line-1523"></span><span class="hs-comment">-- | The \&quot;full signature\&quot; of the 'DataCon' returns, in order:</span><span>
</span><span id="line-1524"></span><span class="hs-comment">--</span><span>
</span><span id="line-1525"></span><span class="hs-comment">-- 1) The result of 'dataConUnivTyVars'</span><span>
</span><span id="line-1526"></span><span class="hs-comment">--</span><span>
</span><span id="line-1527"></span><span class="hs-comment">-- 2) The result of 'dataConExTyCoVars'</span><span>
</span><span id="line-1528"></span><span class="hs-comment">--</span><span>
</span><span id="line-1529"></span><span class="hs-comment">-- 3) The non-dependent GADT equalities.</span><span>
</span><span id="line-1530"></span><span class="hs-comment">--    Dependent GADT equalities are implied by coercion variables in</span><span>
</span><span id="line-1531"></span><span class="hs-comment">--    return value (2).</span><span>
</span><span id="line-1532"></span><span class="hs-comment">--</span><span>
</span><span id="line-1533"></span><span class="hs-comment">-- 4) The other constraints of the data constructor type, excluding GADT</span><span>
</span><span id="line-1534"></span><span class="hs-comment">-- equalities</span><span>
</span><span id="line-1535"></span><span class="hs-comment">--</span><span>
</span><span id="line-1536"></span><span class="hs-comment">-- 5) The original argument types to the 'DataCon' (i.e. before</span><span>
</span><span id="line-1537"></span><span class="hs-comment">--    any change of the representation of the type) with linearity</span><span>
</span><span id="line-1538"></span><span class="hs-comment">--    annotations</span><span>
</span><span id="line-1539"></span><span class="hs-comment">--</span><span>
</span><span id="line-1540"></span><span class="hs-comment">-- 6) The original result type of the 'DataCon'</span><span>
</span><span id="line-1541"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConFullSig"><span class="hs-identifier hs-type">dataConFullSig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span>
</span><span id="line-1542"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyCoVar"><span class="hs-identifier hs-type">TyCoVar</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.DataCon.html#EqSpec"><span class="hs-identifier hs-type">EqSpec</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ThetaType"><span class="hs-identifier hs-type">ThetaType</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1543"></span><span id="dataConFullSig"><span class="annot"><span class="annottext">dataConFullSig :: DataCon
-&gt; ([TyVar], [TyVar], [EqSpec], [Type], [Scaled Type], Type)
</span><a href="GHC.Core.DataCon.html#dataConFullSig"><span class="hs-identifier hs-var hs-var">dataConFullSig</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#MkData"><span class="hs-identifier hs-type">MkData</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">dcUnivTyVars :: DataCon -&gt; [TyVar]
</span><a href="GHC.Core.DataCon.html#dcUnivTyVars"><span class="hs-identifier hs-var">dcUnivTyVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628946"><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628946"><span class="hs-identifier hs-var">univ_tvs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dcExTyCoVars :: DataCon -&gt; [TyVar]
</span><a href="GHC.Core.DataCon.html#dcExTyCoVars"><span class="hs-identifier hs-var">dcExTyCoVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628947"><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628947"><span class="hs-identifier hs-var">ex_tvs</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1544"></span><span>                        </span><span class="annot"><span class="annottext">dcEqSpec :: DataCon -&gt; [EqSpec]
</span><a href="GHC.Core.DataCon.html#dcEqSpec"><span class="hs-identifier hs-var">dcEqSpec</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628948"><span class="annot"><span class="annottext">[EqSpec]
</span><a href="#local-6989586621681628948"><span class="hs-identifier hs-var">eq_spec</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dcOtherTheta :: DataCon -&gt; [Type]
</span><a href="GHC.Core.DataCon.html#dcOtherTheta"><span class="hs-identifier hs-var">dcOtherTheta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628949"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628949"><span class="hs-identifier hs-var">theta</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1545"></span><span>                        </span><span class="annot"><span class="annottext">dcOrigArgTys :: DataCon -&gt; [Scaled Type]
</span><a href="GHC.Core.DataCon.html#dcOrigArgTys"><span class="hs-identifier hs-var">dcOrigArgTys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628950"><span class="annot"><span class="annottext">[Scaled Type]
</span><a href="#local-6989586621681628950"><span class="hs-identifier hs-var">arg_tys</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dcOrigResTy :: DataCon -&gt; Type
</span><a href="GHC.Core.DataCon.html#dcOrigResTy"><span class="hs-identifier hs-var">dcOrigResTy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628951"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628951"><span class="hs-identifier hs-var">res_ty</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1546"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628946"><span class="hs-identifier hs-var">univ_tvs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628947"><span class="hs-identifier hs-var">ex_tvs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[EqSpec]
</span><a href="#local-6989586621681628948"><span class="hs-identifier hs-var">eq_spec</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628949"><span class="hs-identifier hs-var">theta</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Scaled Type]
</span><a href="#local-6989586621681628950"><span class="hs-identifier hs-var">arg_tys</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628951"><span class="hs-identifier hs-var">res_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1547"></span><span>
</span><span id="line-1548"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConOrigResTy"><span class="hs-identifier hs-type">dataConOrigResTy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-1549"></span><span id="dataConOrigResTy"><span class="annot"><span class="annottext">dataConOrigResTy :: DataCon -&gt; Type
</span><a href="GHC.Core.DataCon.html#dataConOrigResTy"><span class="hs-identifier hs-var hs-var">dataConOrigResTy</span></a></span></span><span> </span><span id="local-6989586621681628952"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628952"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Type
</span><a href="GHC.Core.DataCon.html#dcOrigResTy"><span class="hs-identifier hs-var">dcOrigResTy</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628952"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-1550"></span><span>
</span><span id="line-1551"></span><span class="hs-comment">-- | The \&quot;stupid theta\&quot; of the 'DataCon', such as @data Eq a@ in:</span><span>
</span><span id="line-1552"></span><span class="hs-comment">--</span><span>
</span><span id="line-1553"></span><span class="hs-comment">-- &gt; data Eq a =&gt; T a = ...</span><span>
</span><span id="line-1554"></span><span class="hs-comment">--</span><span>
</span><span id="line-1555"></span><span class="hs-comment">-- See @Note [The stupid context]@.</span><span>
</span><span id="line-1556"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConStupidTheta"><span class="hs-identifier hs-type">dataConStupidTheta</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ThetaType"><span class="hs-identifier hs-type">ThetaType</span></a></span><span>
</span><span id="line-1557"></span><span id="dataConStupidTheta"><span class="annot"><span class="annottext">dataConStupidTheta :: DataCon -&gt; [Type]
</span><a href="GHC.Core.DataCon.html#dataConStupidTheta"><span class="hs-identifier hs-var hs-var">dataConStupidTheta</span></a></span></span><span> </span><span id="local-6989586621681628953"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628953"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; [Type]
</span><a href="GHC.Core.DataCon.html#dcStupidTheta"><span class="hs-identifier hs-var">dcStupidTheta</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628953"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-1558"></span><span>
</span><span id="line-1559"></span><span class="hs-comment">{-
Note [Displaying linear fields]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
A constructor with a linear field can be written either as
MkT :: a %1 -&gt; T a (with -XLinearTypes)
or
MkT :: a  -&gt; T a (with -XNoLinearTypes)

There are three different methods to retrieve a type of a datacon.
They differ in how linear fields are handled.

1. dataConWrapperType:
The type of the wrapper in Core.
For example, dataConWrapperType for Maybe is a %1 -&gt; Just a.

2. dataConNonlinearType:
The type of the constructor, with linear arrows replaced by unrestricted ones.
Used when we don't want to introduce linear types to user (in holes
and in types in hie used by haddock).

3. dataConDisplayType (takes a boolean indicating if -XLinearTypes is enabled):
The type we'd like to show in error messages, :info and -ddump-types.
Ideally, it should reflect the type written by the user;
the function returns a type with arrows that would be required
to write this constructor under the current setting of -XLinearTypes.
In principle, this type can be different from the user's source code
when the value of -XLinearTypes has changed, but we don't
expect this to cause much trouble.

Due to internal plumbing in checkValidDataCon, we can't just return a Doc.
The multiplicity of arrows returned by dataConDisplayType and
dataConDisplayType is used only for pretty-printing.
-}</span><span>
</span><span id="line-1592"></span><span>
</span><span id="line-1593"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConWrapperType"><span class="hs-identifier hs-type">dataConWrapperType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-1594"></span><span class="hs-comment">-- ^ The user-declared type of the data constructor</span><span>
</span><span id="line-1595"></span><span class="hs-comment">-- in the nice-to-read form:</span><span>
</span><span id="line-1596"></span><span class="hs-comment">--</span><span>
</span><span id="line-1597"></span><span class="hs-comment">-- &gt; T :: forall a b. a -&gt; b -&gt; T [a]</span><span>
</span><span id="line-1598"></span><span class="hs-comment">--</span><span>
</span><span id="line-1599"></span><span class="hs-comment">-- rather than:</span><span>
</span><span id="line-1600"></span><span class="hs-comment">--</span><span>
</span><span id="line-1601"></span><span class="hs-comment">-- &gt; T :: forall a c. forall b. (c~[a]) =&gt; a -&gt; b -&gt; T c</span><span>
</span><span id="line-1602"></span><span class="hs-comment">--</span><span>
</span><span id="line-1603"></span><span class="hs-comment">-- The type variables are quantified in the order that the user wrote them.</span><span>
</span><span id="line-1604"></span><span class="hs-comment">-- See @Note [DataCon user type variable binders]@.</span><span>
</span><span id="line-1605"></span><span class="hs-comment">--</span><span>
</span><span id="line-1606"></span><span class="hs-comment">-- NB: If the constructor is part of a data instance, the result type</span><span>
</span><span id="line-1607"></span><span class="hs-comment">-- mentions the family tycon, not the internal one.</span><span>
</span><span id="line-1608"></span><span id="dataConWrapperType"><span class="annot"><span class="annottext">dataConWrapperType :: DataCon -&gt; Type
</span><a href="GHC.Core.DataCon.html#dataConWrapperType"><span class="hs-identifier hs-var hs-var">dataConWrapperType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#MkData"><span class="hs-identifier hs-type">MkData</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dcUserTyVarBinders :: DataCon -&gt; [InvisTVBinder]
</span><a href="GHC.Core.DataCon.html#dcUserTyVarBinders"><span class="hs-identifier hs-var">dcUserTyVarBinders</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628954"><span class="annot"><span class="annottext">[InvisTVBinder]
</span><a href="#local-6989586621681628954"><span class="hs-identifier hs-var">user_tvbs</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1609"></span><span>                             </span><span class="annot"><span class="annottext">dcOtherTheta :: DataCon -&gt; [Type]
</span><a href="GHC.Core.DataCon.html#dcOtherTheta"><span class="hs-identifier hs-var">dcOtherTheta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628955"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628955"><span class="hs-identifier hs-var">theta</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dcOrigArgTys :: DataCon -&gt; [Scaled Type]
</span><a href="GHC.Core.DataCon.html#dcOrigArgTys"><span class="hs-identifier hs-var">dcOrigArgTys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628956"><span class="annot"><span class="annottext">[Scaled Type]
</span><a href="#local-6989586621681628956"><span class="hs-identifier hs-var">arg_tys</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1610"></span><span>                             </span><span class="annot"><span class="annottext">dcOrigResTy :: DataCon -&gt; Type
</span><a href="GHC.Core.DataCon.html#dcOrigResTy"><span class="hs-identifier hs-var">dcOrigResTy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628957"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628957"><span class="hs-identifier hs-var">res_ty</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1611"></span><span>                             </span><span class="annot"><span class="annottext">dcStupidTheta :: DataCon -&gt; [Type]
</span><a href="GHC.Core.DataCon.html#dcStupidTheta"><span class="hs-identifier hs-var">dcStupidTheta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628958"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628958"><span class="hs-identifier hs-var">stupid_theta</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1612"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[InvisTVBinder] -&gt; Type -&gt; Type
</span><a href="GHC.Core.TyCo.Rep.html#mkInvisForAllTys"><span class="hs-identifier hs-var">mkInvisForAllTys</span></a></span><span> </span><span class="annot"><span class="annottext">[InvisTVBinder]
</span><a href="#local-6989586621681628954"><span class="hs-identifier hs-var">user_tvbs</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Type) -&gt; Type -&gt; Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1613"></span><span>    </span><span class="annot"><span class="annottext">[Type] -&gt; Type -&gt; Type
(() :: Constraint) =&gt; [Type] -&gt; Type -&gt; Type
</span><a href="GHC.Core.TyCo.Rep.html#mkInvisFunTys"><span class="hs-identifier hs-var">mkInvisFunTys</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628958"><span class="hs-identifier hs-var">stupid_theta</span></a></span><span> </span><span class="annot"><span class="annottext">[Type] -&gt; [Type] -&gt; [Type]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628955"><span class="hs-identifier hs-var">theta</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Type) -&gt; Type -&gt; Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1614"></span><span>    </span><span class="annot"><span class="annottext">[Scaled Type] -&gt; Type -&gt; Type
(() :: Constraint) =&gt; [Scaled Type] -&gt; Type -&gt; Type
</span><a href="GHC.Core.TyCo.Rep.html#mkScaledFunTys"><span class="hs-identifier hs-var">mkScaledFunTys</span></a></span><span> </span><span class="annot"><span class="annottext">[Scaled Type]
</span><a href="#local-6989586621681628956"><span class="hs-identifier hs-var">arg_tys</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Type) -&gt; Type -&gt; Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1615"></span><span>    </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628957"><span class="hs-identifier hs-var">res_ty</span></a></span><span>
</span><span id="line-1616"></span><span>
</span><span id="line-1617"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConNonlinearType"><span class="hs-identifier hs-type">dataConNonlinearType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-1618"></span><span class="hs-comment">-- Just like dataConWrapperType, but with the</span><span>
</span><span id="line-1619"></span><span class="hs-comment">-- linearity on the arguments all zapped to Many</span><span>
</span><span id="line-1620"></span><span id="dataConNonlinearType"><span class="annot"><span class="annottext">dataConNonlinearType :: DataCon -&gt; Type
</span><a href="GHC.Core.DataCon.html#dataConNonlinearType"><span class="hs-identifier hs-var hs-var">dataConNonlinearType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#MkData"><span class="hs-identifier hs-type">MkData</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dcUserTyVarBinders :: DataCon -&gt; [InvisTVBinder]
</span><a href="GHC.Core.DataCon.html#dcUserTyVarBinders"><span class="hs-identifier hs-var">dcUserTyVarBinders</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628962"><span class="annot"><span class="annottext">[InvisTVBinder]
</span><a href="#local-6989586621681628962"><span class="hs-identifier hs-var">user_tvbs</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1621"></span><span>                               </span><span class="annot"><span class="annottext">dcOtherTheta :: DataCon -&gt; [Type]
</span><a href="GHC.Core.DataCon.html#dcOtherTheta"><span class="hs-identifier hs-var">dcOtherTheta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628963"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628963"><span class="hs-identifier hs-var">theta</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dcOrigArgTys :: DataCon -&gt; [Scaled Type]
</span><a href="GHC.Core.DataCon.html#dcOrigArgTys"><span class="hs-identifier hs-var">dcOrigArgTys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628964"><span class="annot"><span class="annottext">[Scaled Type]
</span><a href="#local-6989586621681628964"><span class="hs-identifier hs-var">arg_tys</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1622"></span><span>                               </span><span class="annot"><span class="annottext">dcOrigResTy :: DataCon -&gt; Type
</span><a href="GHC.Core.DataCon.html#dcOrigResTy"><span class="hs-identifier hs-var">dcOrigResTy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628965"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628965"><span class="hs-identifier hs-var">res_ty</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1623"></span><span>                               </span><span class="annot"><span class="annottext">dcStupidTheta :: DataCon -&gt; [Type]
</span><a href="GHC.Core.DataCon.html#dcStupidTheta"><span class="hs-identifier hs-var">dcStupidTheta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628966"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628966"><span class="hs-identifier hs-var">stupid_theta</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1624"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[InvisTVBinder] -&gt; Type -&gt; Type
</span><a href="GHC.Core.TyCo.Rep.html#mkInvisForAllTys"><span class="hs-identifier hs-var">mkInvisForAllTys</span></a></span><span> </span><span class="annot"><span class="annottext">[InvisTVBinder]
</span><a href="#local-6989586621681628962"><span class="hs-identifier hs-var">user_tvbs</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Type) -&gt; Type -&gt; Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1625"></span><span>    </span><span class="annot"><span class="annottext">[Type] -&gt; Type -&gt; Type
(() :: Constraint) =&gt; [Type] -&gt; Type -&gt; Type
</span><a href="GHC.Core.TyCo.Rep.html#mkInvisFunTys"><span class="hs-identifier hs-var">mkInvisFunTys</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628966"><span class="hs-identifier hs-var">stupid_theta</span></a></span><span> </span><span class="annot"><span class="annottext">[Type] -&gt; [Type] -&gt; [Type]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628963"><span class="hs-identifier hs-var">theta</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Type) -&gt; Type -&gt; Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1626"></span><span>    </span><span class="annot"><span class="annottext">[Scaled Type] -&gt; Type -&gt; Type
(() :: Constraint) =&gt; [Scaled Type] -&gt; Type -&gt; Type
</span><a href="GHC.Core.TyCo.Rep.html#mkScaledFunTys"><span class="hs-identifier hs-var">mkScaledFunTys</span></a></span><span> </span><span class="annot"><span class="annottext">[Scaled Type]
</span><a href="#local-6989586621681628967"><span class="hs-identifier hs-var">arg_tys'</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Type) -&gt; Type -&gt; Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1627"></span><span>    </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628965"><span class="hs-identifier hs-var">res_ty</span></a></span><span>
</span><span id="line-1628"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1629"></span><span>    </span><span id="local-6989586621681628967"><span class="annot"><span class="annottext">arg_tys' :: [Scaled Type]
</span><a href="#local-6989586621681628967"><span class="hs-identifier hs-var hs-var">arg_tys'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Scaled Type -&gt; Scaled Type) -&gt; [Scaled Type] -&gt; [Scaled Type]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span id="local-6989586621681628969"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628969"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621681628970"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628970"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Scaled Type
forall a. Type -&gt; a -&gt; Scaled a
</span><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-var">Scaled</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628969"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="GHC.Core.Type.html#OneTy"><span class="hs-identifier hs-var">OneTy</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="GHC.Core.Type.html#ManyTy"><span class="hs-identifier hs-var">ManyTy</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628969"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681628970"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Scaled Type]
</span><a href="#local-6989586621681628964"><span class="hs-identifier hs-var">arg_tys</span></a></span><span>
</span><span id="line-1630"></span><span>
</span><span id="line-1631"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConDisplayType"><span class="hs-identifier hs-type">dataConDisplayType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-1632"></span><span id="dataConDisplayType"><span class="annot"><span class="annottext">dataConDisplayType :: Bool -&gt; DataCon -&gt; Type
</span><a href="GHC.Core.DataCon.html#dataConDisplayType"><span class="hs-identifier hs-var hs-var">dataConDisplayType</span></a></span></span><span> </span><span id="local-6989586621681628973"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681628973"><span class="hs-identifier hs-var">show_linear_types</span></a></span></span><span> </span><span id="local-6989586621681628974"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628974"><span class="hs-identifier hs-var">dc</span></a></span></span><span>
</span><span id="line-1633"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681628973"><span class="hs-identifier hs-var">show_linear_types</span></a></span><span>
</span><span id="line-1634"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Type
</span><a href="GHC.Core.DataCon.html#dataConWrapperType"><span class="hs-identifier hs-var">dataConWrapperType</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628974"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-1635"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Type
</span><a href="GHC.Core.DataCon.html#dataConNonlinearType"><span class="hs-identifier hs-var">dataConNonlinearType</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628974"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-1636"></span><span>
</span><span id="line-1637"></span><span class="hs-comment">-- | Finds the instantiated types of the arguments required to construct a</span><span>
</span><span id="line-1638"></span><span class="hs-comment">-- 'DataCon' representation</span><span>
</span><span id="line-1639"></span><span class="hs-comment">-- NB: these INCLUDE any dictionary args</span><span>
</span><span id="line-1640"></span><span class="hs-comment">--     but EXCLUDE the data-declaration context, which is discarded</span><span>
</span><span id="line-1641"></span><span class="hs-comment">-- It's all post-flattening etc; this is a representation type</span><span>
</span><span id="line-1642"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConInstArgTys"><span class="hs-identifier hs-type">dataConInstArgTys</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span>    </span><span class="hs-comment">-- ^ A datacon with no existentials or equality constraints</span><span>
</span><span id="line-1643"></span><span>                                </span><span class="hs-comment">-- However, it can have a dcTheta (notably it can be a</span><span>
</span><span id="line-1644"></span><span>                                </span><span class="hs-comment">-- class dictionary, with superclasses)</span><span>
</span><span id="line-1645"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span>     </span><span class="annot"><span class="hs-comment">-- ^ Instantiated at these types</span></span><span>
</span><span id="line-1646"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1647"></span><span id="dataConInstArgTys"><span class="annot"><span class="annottext">dataConInstArgTys :: DataCon -&gt; [Type] -&gt; [Scaled Type]
</span><a href="GHC.Core.DataCon.html#dataConInstArgTys"><span class="hs-identifier hs-var hs-var">dataConInstArgTys</span></a></span></span><span> </span><span id="local-6989586621681628975"><span class="annot"><span class="annottext">dc :: DataCon
</span><a href="#local-6989586621681628975"><span class="hs-identifier hs-var">dc</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#MkData"><span class="hs-identifier hs-type">MkData</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">dcUnivTyVars :: DataCon -&gt; [TyVar]
</span><a href="GHC.Core.DataCon.html#dcUnivTyVars"><span class="hs-identifier hs-var">dcUnivTyVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628976"><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628976"><span class="hs-identifier hs-var">univ_tvs</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1648"></span><span>                              </span><span class="annot"><span class="annottext">dcExTyCoVars :: DataCon -&gt; [TyVar]
</span><a href="GHC.Core.DataCon.html#dcExTyCoVars"><span class="hs-identifier hs-var">dcExTyCoVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628977"><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628977"><span class="hs-identifier hs-var">ex_tvs</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681628978"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628978"><span class="hs-identifier hs-var">inst_tys</span></a></span></span><span>
</span><span id="line-1649"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; [Scaled Type] -&gt; [Scaled Type]
forall a. HasCallStack =&gt; Bool -&gt; SDoc -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.html#assertPpr"><span class="hs-identifier hs-var">assertPpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628976"><span class="hs-identifier hs-var">univ_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar] -&gt; [Type] -&gt; Bool
forall a b. [a] -&gt; [b] -&gt; Bool
</span><a href="GHC.Utils.Misc.html#equalLength"><span class="hs-operator hs-var">`equalLength`</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628978"><span class="hs-identifier hs-var">inst_tys</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1650"></span><span>             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dataConInstArgTys&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628975"><span class="hs-identifier hs-var">dc</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628976"><span class="hs-identifier hs-var">univ_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">[Type] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628978"><span class="hs-identifier hs-var">inst_tys</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Scaled Type] -&gt; [Scaled Type]) -&gt; [Scaled Type] -&gt; [Scaled Type]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1651"></span><span>   </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; [Scaled Type] -&gt; [Scaled Type]
forall a. HasCallStack =&gt; Bool -&gt; SDoc -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.html#assertPpr"><span class="hs-identifier hs-var">assertPpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TyVar] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#null/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628977"><span class="hs-identifier hs-var">ex_tvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628975"><span class="hs-identifier hs-var">dc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Scaled Type] -&gt; [Scaled Type]) -&gt; [Scaled Type] -&gt; [Scaled Type]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1652"></span><span>   </span><span class="annot"><span class="annottext">(Scaled Type -&gt; Scaled Type) -&gt; [Scaled Type] -&gt; [Scaled Type]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Type -&gt; Type) -&gt; Scaled Type -&gt; Scaled Type
</span><a href="GHC.Core.TyCo.Rep.html#mapScaledType"><span class="hs-identifier hs-var">mapScaledType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TyVar] -&gt; [Type] -&gt; Type -&gt; Type
(() :: Constraint) =&gt; [TyVar] -&gt; [Type] -&gt; Type -&gt; Type
</span><a href="GHC.Core.TyCo.Subst.html#substTyWith"><span class="hs-identifier hs-var">substTyWith</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628976"><span class="hs-identifier hs-var">univ_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628978"><span class="hs-identifier hs-var">inst_tys</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; [Scaled Type]
</span><a href="GHC.Core.DataCon.html#dataConRepArgTys"><span class="hs-identifier hs-var">dataConRepArgTys</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628975"><span class="hs-identifier hs-var">dc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1653"></span><span>
</span><span id="line-1654"></span><span class="hs-comment">-- | Returns just the instantiated /value/ argument types of a 'DataCon',</span><span>
</span><span id="line-1655"></span><span class="hs-comment">-- (excluding dictionary args)</span><span>
</span><span id="line-1656"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConInstOrigArgTys"><span class="hs-identifier hs-type">dataConInstOrigArgTys</span></a></span><span>
</span><span id="line-1657"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span>      </span><span class="hs-comment">-- Works for any DataCon</span><span>
</span><span id="line-1658"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span>       </span><span class="hs-comment">-- Includes existential tyvar args, but NOT</span><span>
</span><span id="line-1659"></span><span>                        </span><span class="hs-comment">-- equality constraints or dicts</span><span>
</span><span id="line-1660"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1661"></span><span class="hs-comment">-- For vanilla datacons, it's all quite straightforward</span><span>
</span><span id="line-1662"></span><span class="hs-comment">-- But for the call in GHC.HsToCore.Match.Constructor, we really do want just</span><span>
</span><span id="line-1663"></span><span class="hs-comment">-- the value args</span><span>
</span><span id="line-1664"></span><span id="dataConInstOrigArgTys"><span class="annot"><span class="annottext">dataConInstOrigArgTys :: DataCon -&gt; [Type] -&gt; [Scaled Type]
</span><a href="GHC.Core.DataCon.html#dataConInstOrigArgTys"><span class="hs-identifier hs-var hs-var">dataConInstOrigArgTys</span></a></span></span><span> </span><span id="local-6989586621681628984"><span class="annot"><span class="annottext">dc :: DataCon
</span><a href="#local-6989586621681628984"><span class="hs-identifier hs-var">dc</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#MkData"><span class="hs-identifier hs-type">MkData</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">dcOrigArgTys :: DataCon -&gt; [Scaled Type]
</span><a href="GHC.Core.DataCon.html#dcOrigArgTys"><span class="hs-identifier hs-var">dcOrigArgTys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628985"><span class="annot"><span class="annottext">[Scaled Type]
</span><a href="#local-6989586621681628985"><span class="hs-identifier hs-var">arg_tys</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1665"></span><span>                                  </span><span class="annot"><span class="annottext">dcUnivTyVars :: DataCon -&gt; [TyVar]
</span><a href="GHC.Core.DataCon.html#dcUnivTyVars"><span class="hs-identifier hs-var">dcUnivTyVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628986"><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628986"><span class="hs-identifier hs-var">univ_tvs</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-1666"></span><span>                                  </span><span class="annot"><span class="annottext">dcExTyCoVars :: DataCon -&gt; [TyVar]
</span><a href="GHC.Core.DataCon.html#dcExTyCoVars"><span class="hs-identifier hs-var">dcExTyCoVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681628987"><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628987"><span class="hs-identifier hs-var">ex_tvs</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681628988"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628988"><span class="hs-identifier hs-var">inst_tys</span></a></span></span><span>
</span><span id="line-1667"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; [Scaled Type] -&gt; [Scaled Type]
forall a. HasCallStack =&gt; Bool -&gt; SDoc -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.html#assertPpr"><span class="hs-identifier hs-var">assertPpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628989"><span class="hs-identifier hs-var">tyvars</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar] -&gt; [Type] -&gt; Bool
forall a b. [a] -&gt; [b] -&gt; Bool
</span><a href="GHC.Utils.Misc.html#equalLength"><span class="hs-operator hs-var">`equalLength`</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628988"><span class="hs-identifier hs-var">inst_tys</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1668"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dataConInstOrigArgTys&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628984"><span class="hs-identifier hs-var">dc</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628989"><span class="hs-identifier hs-var">tyvars</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">[Type] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628988"><span class="hs-identifier hs-var">inst_tys</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Scaled Type] -&gt; [Scaled Type]) -&gt; [Scaled Type] -&gt; [Scaled Type]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1669"></span><span>    </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Subst -&gt; [Scaled Type] -&gt; [Scaled Type]
Subst -&gt; [Scaled Type] -&gt; [Scaled Type]
</span><a href="GHC.Core.TyCo.Subst.html#substScaledTys"><span class="hs-identifier hs-var">substScaledTys</span></a></span><span> </span><span class="annot"><span class="annottext">Subst
</span><a href="#local-6989586621681628991"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span class="annot"><span class="annottext">[Scaled Type]
</span><a href="#local-6989586621681628985"><span class="hs-identifier hs-var">arg_tys</span></a></span><span>
</span><span id="line-1670"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1671"></span><span>    </span><span id="local-6989586621681628989"><span class="annot"><span class="annottext">tyvars :: [TyVar]
</span><a href="#local-6989586621681628989"><span class="hs-identifier hs-var hs-var">tyvars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628986"><span class="hs-identifier hs-var">univ_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar] -&gt; [TyVar] -&gt; [TyVar]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628987"><span class="hs-identifier hs-var">ex_tvs</span></a></span><span>
</span><span id="line-1672"></span><span>    </span><span id="local-6989586621681628991"><span class="annot"><span class="annottext">subst :: Subst
</span><a href="#local-6989586621681628991"><span class="hs-identifier hs-var hs-var">subst</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TyVar] -&gt; [Type] -&gt; Subst
(() :: Constraint) =&gt; [TyVar] -&gt; [Type] -&gt; Subst
</span><a href="GHC.Core.TyCo.Subst.html#zipTCvSubst"><span class="hs-identifier hs-var">zipTCvSubst</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628989"><span class="hs-identifier hs-var">tyvars</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628988"><span class="hs-identifier hs-var">inst_tys</span></a></span><span>
</span><span id="line-1673"></span><span>
</span><span id="line-1674"></span><span class="hs-comment">-- | Given a data constructor @dc@ with /n/ universally quantified type</span><span>
</span><span id="line-1675"></span><span class="hs-comment">-- variables @a_{1}@, @a_{2}@, ..., @a_{n}@, and given a list of argument</span><span>
</span><span id="line-1676"></span><span class="hs-comment">-- types @dc_args@ of length /m/ where /m/ &lt;= /n/, then:</span><span>
</span><span id="line-1677"></span><span class="hs-comment">--</span><span>
</span><span id="line-1678"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-1679"></span><span class="hs-comment">-- dataConInstUnivs dc dc_args</span><span>
</span><span id="line-1680"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-1681"></span><span class="hs-comment">--</span><span>
</span><span id="line-1682"></span><span class="hs-comment">-- Will return:</span><span>
</span><span id="line-1683"></span><span class="hs-comment">--</span><span>
</span><span id="line-1684"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-1685"></span><span class="hs-comment">-- [dc_arg_{1}, dc_arg_{2}, ..., dc_arg_{m}, a_{m+1}, ..., a_{n}]</span><span>
</span><span id="line-1686"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-1687"></span><span class="hs-comment">--</span><span>
</span><span id="line-1688"></span><span class="hs-comment">-- That is, return the list of universal type variables with</span><span>
</span><span id="line-1689"></span><span class="hs-comment">-- @a_{1}@, @a_{2}@, ..., @a_{m}@ instantiated with</span><span>
</span><span id="line-1690"></span><span class="hs-comment">-- @dc_arg_{1}@, @dc_arg_{2}@, ..., @dc_arg_{m}@. It is possible for @m@ to</span><span>
</span><span id="line-1691"></span><span class="hs-comment">-- be less than @n@, in which case the remaining @n - m@ elements will simply</span><span>
</span><span id="line-1692"></span><span class="hs-comment">-- be universal type variables (with their kinds possibly instantiated).</span><span>
</span><span id="line-1693"></span><span class="hs-comment">--</span><span>
</span><span id="line-1694"></span><span class="hs-comment">-- Examples:</span><span>
</span><span id="line-1695"></span><span class="hs-comment">--</span><span>
</span><span id="line-1696"></span><span class="hs-comment">-- * Given the data constructor @D :: forall a b. Foo a b@ and</span><span>
</span><span id="line-1697"></span><span class="hs-comment">--   @dc_args@ @[Int, Bool]@, then @dataConInstUnivs D dc_args@ will return</span><span>
</span><span id="line-1698"></span><span class="hs-comment">--   @[Int, Bool]@.</span><span>
</span><span id="line-1699"></span><span class="hs-comment">--</span><span>
</span><span id="line-1700"></span><span class="hs-comment">-- * Given the data constructor @D :: forall a b. Foo a b@ and</span><span>
</span><span id="line-1701"></span><span class="hs-comment">--   @dc_args@ @[Int]@, then @@dataConInstUnivs D dc_args@ will return</span><span>
</span><span id="line-1702"></span><span class="hs-comment">--   @[Int, b]@.</span><span>
</span><span id="line-1703"></span><span class="hs-comment">--</span><span>
</span><span id="line-1704"></span><span class="hs-comment">-- * Given the data constructor @E :: forall k (a :: k). Bar k a@ and</span><span>
</span><span id="line-1705"></span><span class="hs-comment">--   @dc_args@ @[Type]@, then @@dataConInstUnivs D dc_args@ will return</span><span>
</span><span id="line-1706"></span><span class="hs-comment">--   @[Type, (a :: Type)]@.</span><span>
</span><span id="line-1707"></span><span class="hs-comment">--</span><span>
</span><span id="line-1708"></span><span class="hs-comment">-- This is primarily used in @GHC.Tc.Deriv.*@ in service of instantiating data</span><span>
</span><span id="line-1709"></span><span class="hs-comment">-- constructors' field types.</span><span>
</span><span id="line-1710"></span><span class="hs-comment">-- See @Note [Instantiating field types in stock deriving]@ for a notable</span><span>
</span><span id="line-1711"></span><span class="hs-comment">-- example of this.</span><span>
</span><span id="line-1712"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConInstUnivs"><span class="hs-identifier hs-type">dataConInstUnivs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1713"></span><span id="dataConInstUnivs"><span class="annot"><span class="annottext">dataConInstUnivs :: DataCon -&gt; [Type] -&gt; [Type]
</span><a href="GHC.Core.DataCon.html#dataConInstUnivs"><span class="hs-identifier hs-var hs-var">dataConInstUnivs</span></a></span></span><span> </span><span id="local-6989586621681628993"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628993"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span id="local-6989586621681628994"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628994"><span class="hs-identifier hs-var">dc_args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Type] -&gt; [Type] -&gt; [Type]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="GHC.Utils.Misc.html#chkAppend"><span class="hs-identifier hs-var">chkAppend</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628994"><span class="hs-identifier hs-var">dc_args</span></a></span><span> </span><span class="annot"><span class="annottext">([Type] -&gt; [Type]) -&gt; [Type] -&gt; [Type]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(TyVar -&gt; Type) -&gt; [TyVar] -&gt; [Type]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar -&gt; Type
</span><a href="GHC.Core.TyCo.Rep.html#mkTyVarTy"><span class="hs-identifier hs-var">mkTyVarTy</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628996"><span class="hs-identifier hs-var">dc_args_suffix</span></a></span><span>
</span><span id="line-1714"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1715"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681628997"><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628997"><span class="hs-identifier hs-var">dc_univs_prefix</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681628998"><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628998"><span class="hs-identifier hs-var">dc_univs_suffix</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1716"></span><span>                        </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- Assert that m &lt;= n</span><span>
</span><span id="line-1717"></span><span>                          </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; ([TyVar], [TyVar]) -&gt; ([TyVar], [TyVar])
forall a. HasCallStack =&gt; Bool -&gt; SDoc -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.html#assertPpr"><span class="hs-identifier hs-var">assertPpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628994"><span class="hs-identifier hs-var">dc_args</span></a></span><span> </span><span class="annot"><span class="annottext">[Type] -&gt; [TyVar] -&gt; Bool
forall a b. [a] -&gt; [b] -&gt; Bool
</span><a href="GHC.Utils.Misc.html#leLength"><span class="hs-operator hs-var">`leLength`</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; [TyVar]
</span><a href="GHC.Core.DataCon.html#dataConUnivTyVars"><span class="hs-identifier hs-var">dataConUnivTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628993"><span class="hs-identifier hs-var">dc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1718"></span><span>                                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dataConInstUnivs&quot;</span></span><span>
</span><span id="line-1719"></span><span>                                      </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Type] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628994"><span class="hs-identifier hs-var">dc_args</span></a></span><span>
</span><span id="line-1720"></span><span>                                      </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; [TyVar]
</span><a href="GHC.Core.DataCon.html#dataConUnivTyVars"><span class="hs-identifier hs-var">dataConUnivTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628993"><span class="hs-identifier hs-var">dc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(([TyVar], [TyVar]) -&gt; ([TyVar], [TyVar]))
-&gt; ([TyVar], [TyVar]) -&gt; ([TyVar], [TyVar])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1721"></span><span>                          </span><span class="annot"><span class="annottext">[Type] -&gt; [TyVar] -&gt; ([TyVar], [TyVar])
forall b a. [b] -&gt; [a] -&gt; ([a], [a])
</span><a href="GHC.Utils.Misc.html#splitAtList"><span class="hs-identifier hs-var">splitAtList</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628994"><span class="hs-identifier hs-var">dc_args</span></a></span><span> </span><span class="annot"><span class="annottext">([TyVar] -&gt; ([TyVar], [TyVar])) -&gt; [TyVar] -&gt; ([TyVar], [TyVar])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; [TyVar]
</span><a href="GHC.Core.DataCon.html#dataConUnivTyVars"><span class="hs-identifier hs-var">dataConUnivTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681628993"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-1722"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Subst
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681628996"><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628996"><span class="hs-identifier hs-var">dc_args_suffix</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Subst -&gt; [TyVar] -&gt; (Subst, [TyVar])
Subst -&gt; [TyVar] -&gt; (Subst, [TyVar])
</span><a href="GHC.Core.TyCo.Subst.html#substTyVarBndrs"><span class="hs-identifier hs-var">substTyVarBndrs</span></a></span><span> </span><span class="annot"><span class="annottext">Subst
</span><a href="#local-6989586621681629002"><span class="hs-identifier hs-var">prefix_subst</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628998"><span class="hs-identifier hs-var">dc_univs_suffix</span></a></span><span>
</span><span id="line-1723"></span><span>    </span><span id="local-6989586621681629002"><span class="annot"><span class="annottext">prefix_subst :: Subst
</span><a href="#local-6989586621681629002"><span class="hs-identifier hs-var hs-var">prefix_subst</span></a></span></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InScopeSet -&gt; TvSubstEnv -&gt; Subst
</span><a href="GHC.Core.TyCo.Subst.html#mkTvSubst"><span class="hs-identifier hs-var">mkTvSubst</span></a></span><span> </span><span class="annot"><span class="annottext">InScopeSet
</span><a href="#local-6989586621681629004"><span class="hs-identifier hs-var">prefix_in_scope</span></a></span><span> </span><span class="annot"><span class="annottext">TvSubstEnv
</span><a href="#local-6989586621681629005"><span class="hs-identifier hs-var">prefix_env</span></a></span><span>
</span><span id="line-1724"></span><span>    </span><span id="local-6989586621681629004"><span class="annot"><span class="annottext">prefix_in_scope :: InScopeSet
</span><a href="#local-6989586621681629004"><span class="hs-identifier hs-var hs-var">prefix_in_scope</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VarSet -&gt; InScopeSet
</span><a href="GHC.Types.Var.Env.html#mkInScopeSet"><span class="hs-identifier hs-var">mkInScopeSet</span></a></span><span> </span><span class="annot"><span class="annottext">(VarSet -&gt; InScopeSet) -&gt; VarSet -&gt; InScopeSet
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Type] -&gt; VarSet
</span><a href="GHC.Core.TyCo.FVs.html#tyCoVarsOfTypes"><span class="hs-identifier hs-var">tyCoVarsOfTypes</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628994"><span class="hs-identifier hs-var">dc_args</span></a></span><span>
</span><span id="line-1725"></span><span>    </span><span id="local-6989586621681629005"><span class="annot"><span class="annottext">prefix_env :: TvSubstEnv
</span><a href="#local-6989586621681629005"><span class="hs-identifier hs-var hs-var">prefix_env</span></a></span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TyVar] -&gt; [Type] -&gt; TvSubstEnv
(() :: Constraint) =&gt; [TyVar] -&gt; [Type] -&gt; TvSubstEnv
</span><a href="GHC.Core.TyCo.Subst.html#zipTyEnv"><span class="hs-identifier hs-var">zipTyEnv</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681628997"><span class="hs-identifier hs-var">dc_univs_prefix</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681628994"><span class="hs-identifier hs-var">dc_args</span></a></span><span>
</span><span id="line-1726"></span><span>
</span><span id="line-1727"></span><span class="hs-comment">-- | Returns the argument types of the wrapper, excluding all dictionary arguments</span><span>
</span><span id="line-1728"></span><span class="hs-comment">-- and without substituting for any type variables</span><span>
</span><span id="line-1729"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConOrigArgTys"><span class="hs-identifier hs-type">dataConOrigArgTys</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1730"></span><span id="dataConOrigArgTys"><span class="annot"><span class="annottext">dataConOrigArgTys :: DataCon -&gt; [Scaled Type]
</span><a href="GHC.Core.DataCon.html#dataConOrigArgTys"><span class="hs-identifier hs-var hs-var">dataConOrigArgTys</span></a></span></span><span> </span><span id="local-6989586621681629009"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681629009"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; [Scaled Type]
</span><a href="GHC.Core.DataCon.html#dcOrigArgTys"><span class="hs-identifier hs-var">dcOrigArgTys</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681629009"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-1731"></span><span>
</span><span id="line-1732"></span><span class="annot"><span class="hs-comment">-- | Returns constraints in the wrapper type, other than those in the dataConEqSpec</span></span><span>
</span><span id="line-1733"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConOtherTheta"><span class="hs-identifier hs-type">dataConOtherTheta</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ThetaType"><span class="hs-identifier hs-type">ThetaType</span></a></span><span>
</span><span id="line-1734"></span><span id="dataConOtherTheta"><span class="annot"><span class="annottext">dataConOtherTheta :: DataCon -&gt; [Type]
</span><a href="GHC.Core.DataCon.html#dataConOtherTheta"><span class="hs-identifier hs-var hs-var">dataConOtherTheta</span></a></span></span><span> </span><span id="local-6989586621681629010"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681629010"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; [Type]
</span><a href="GHC.Core.DataCon.html#dcOtherTheta"><span class="hs-identifier hs-var">dcOtherTheta</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681629010"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-1735"></span><span>
</span><span id="line-1736"></span><span class="hs-comment">-- | Returns the arg types of the worker, including *all* non-dependent</span><span>
</span><span id="line-1737"></span><span class="hs-comment">-- evidence, after any flattening has been done and without substituting for</span><span>
</span><span id="line-1738"></span><span class="hs-comment">-- any type variables</span><span>
</span><span id="line-1739"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConRepArgTys"><span class="hs-identifier hs-type">dataConRepArgTys</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1740"></span><span id="dataConRepArgTys"><span class="annot"><span class="annottext">dataConRepArgTys :: DataCon -&gt; [Scaled Type]
</span><a href="GHC.Core.DataCon.html#dataConRepArgTys"><span class="hs-identifier hs-var hs-var">dataConRepArgTys</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#MkData"><span class="hs-identifier hs-type">MkData</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dcRep :: DataCon -&gt; DataConRep
</span><a href="GHC.Core.DataCon.html#dcRep"><span class="hs-identifier hs-var">dcRep</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681629011"><span class="annot"><span class="annottext">DataConRep
</span><a href="#local-6989586621681629011"><span class="hs-identifier hs-var">rep</span></a></span></span><span>
</span><span id="line-1741"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dcEqSpec :: DataCon -&gt; [EqSpec]
</span><a href="GHC.Core.DataCon.html#dcEqSpec"><span class="hs-identifier hs-var">dcEqSpec</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681629012"><span class="annot"><span class="annottext">[EqSpec]
</span><a href="#local-6989586621681629012"><span class="hs-identifier hs-var">eq_spec</span></a></span></span><span>
</span><span id="line-1742"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dcOtherTheta :: DataCon -&gt; [Type]
</span><a href="GHC.Core.DataCon.html#dcOtherTheta"><span class="hs-identifier hs-var">dcOtherTheta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681629013"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681629013"><span class="hs-identifier hs-var">theta</span></a></span></span><span>
</span><span id="line-1743"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dcOrigArgTys :: DataCon -&gt; [Scaled Type]
</span><a href="GHC.Core.DataCon.html#dcOrigArgTys"><span class="hs-identifier hs-var">dcOrigArgTys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681629014"><span class="annot"><span class="annottext">[Scaled Type]
</span><a href="#local-6989586621681629014"><span class="hs-identifier hs-var">orig_arg_tys</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1744"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DataConRep
</span><a href="#local-6989586621681629011"><span class="hs-identifier hs-var">rep</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1745"></span><span>      </span><span class="annot"><span class="annottext">DataConRep
</span><a href="GHC.Core.DataCon.html#NoDataConRep"><span class="hs-identifier hs-var">NoDataConRep</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; [Scaled Type] -&gt; [Scaled Type]
forall a. HasCallStack =&gt; Bool -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#assert"><span class="hs-identifier hs-var">assert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[EqSpec] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#null/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[EqSpec]
</span><a href="#local-6989586621681629012"><span class="hs-identifier hs-var">eq_spec</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Scaled Type] -&gt; [Scaled Type]) -&gt; [Scaled Type] -&gt; [Scaled Type]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Scaled Type) -&gt; [Type] -&gt; [Scaled Type]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Scaled Type
forall a. a -&gt; Scaled a
</span><a href="GHC.Core.Type.html#unrestricted"><span class="hs-identifier hs-var">unrestricted</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681629013"><span class="hs-identifier hs-var">theta</span></a></span><span> </span><span class="annot"><span class="annottext">[Scaled Type] -&gt; [Scaled Type] -&gt; [Scaled Type]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Scaled Type]
</span><a href="#local-6989586621681629014"><span class="hs-identifier hs-var">orig_arg_tys</span></a></span><span>
</span><span id="line-1746"></span><span>      </span><span class="annot"><a href="GHC.Core.DataCon.html#DCR"><span class="hs-identifier hs-type">DCR</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dcr_arg_tys :: DataConRep -&gt; [Scaled Type]
</span><a href="GHC.Core.DataCon.html#dcr_arg_tys"><span class="hs-identifier hs-var">dcr_arg_tys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681629017"><span class="annot"><span class="annottext">[Scaled Type]
</span><a href="#local-6989586621681629017"><span class="hs-identifier hs-var">arg_tys</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Scaled Type]
</span><a href="#local-6989586621681629017"><span class="hs-identifier hs-var">arg_tys</span></a></span><span>
</span><span id="line-1747"></span><span>
</span><span id="line-1748"></span><span class="hs-comment">-- | The string @package:module.name@ identifying a constructor, which is attached</span><span>
</span><span id="line-1749"></span><span class="hs-comment">-- to its info table and used by the GHCi debugger and the heap profiler</span><span>
</span><span id="line-1750"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConIdentity"><span class="hs-identifier hs-type">dataConIdentity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../bytestring-0.11.5.4/src/Data.ByteString.Internal.Type.html#ByteString/Data.ByteString.Internal.Type.html#ByteString"><span class="hs-identifier hs-type">ByteString</span></a></span><span>
</span><span id="line-1751"></span><span class="hs-comment">-- We want this string to be UTF-8, so we get the bytes directly from the FastStrings.</span><span>
</span><span id="line-1752"></span><span id="dataConIdentity"><span class="annot"><span class="annottext">dataConIdentity :: DataCon -&gt; ByteString
</span><a href="GHC.Core.DataCon.html#dataConIdentity"><span class="hs-identifier hs-var hs-var">dataConIdentity</span></a></span></span><span> </span><span id="local-6989586621681629018"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681629018"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><a href="../../bytestring-0.11.5.4/src/Data.ByteString.Lazy.Internal.html#toStrict/Data.ByteString.Lazy.Internal.html#toStrict"><span class="hs-identifier hs-var">LBS.toStrict</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; ByteString) -&gt; ByteString -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Builder -&gt; ByteString
</span><a href="../../bytestring-0.11.5.4/src/Data.ByteString.Builder.html#toLazyByteString/Data.ByteString.Builder.html#toLazyByteString"><span class="hs-identifier hs-var">BSB.toLazyByteString</span></a></span><span> </span><span class="annot"><span class="annottext">(Builder -&gt; ByteString) -&gt; Builder -&gt; ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[Builder] -&gt; Builder
forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mconcat/GHC.Base.html#mconcat"><span class="hs-identifier hs-var">mconcat</span></a></span><span>
</span><span id="line-1753"></span><span>   </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Builder
</span><a href="../../bytestring-0.11.5.4/src/Data.ByteString.Builder.Internal.html#shortByteString/Data.ByteString.Builder.Internal.html#shortByteString"><span class="hs-identifier hs-var">BSB.shortByteString</span></a></span><span> </span><span class="annot"><span class="annottext">(ShortByteString -&gt; Builder) -&gt; ShortByteString -&gt; Builder
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; ShortByteString
</span><a href="GHC.Data.FastString.html#fastStringToShortByteString"><span class="hs-identifier hs-var">fastStringToShortByteString</span></a></span><span> </span><span class="annot"><span class="annottext">(FastString -&gt; ShortByteString) -&gt; FastString -&gt; ShortByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1754"></span><span>       </span><span class="annot"><span class="annottext">Unit -&gt; FastString
forall u. IsUnitId u =&gt; u -&gt; FastString
</span><a href="GHC.Unit.Types.html#unitFS"><span class="hs-identifier hs-var">unitFS</span></a></span><span> </span><span class="annot"><span class="annottext">(Unit -&gt; FastString) -&gt; Unit -&gt; FastString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit -&gt; Unit
forall unit. GenModule unit -&gt; unit
</span><a href="GHC.Unit.Types.html#moduleUnit"><span class="hs-identifier hs-var">moduleUnit</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681629025"><span class="hs-identifier hs-var">mod</span></a></span><span>
</span><span id="line-1755"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int8 -&gt; Builder
</span><a href="../../bytestring-0.11.5.4/src/Data.ByteString.Builder.html#int8/Data.ByteString.Builder.html#int8"><span class="hs-identifier hs-var">BSB.int8</span></a></span><span> </span><span class="annot"><span class="annottext">(Int8 -&gt; Builder) -&gt; Int8 -&gt; Builder
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Arity -&gt; Int8
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Real.html#fromIntegral/GHC.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Arity
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#ord/GHC.Base.html#ord"><span class="hs-identifier hs-var">ord</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">':'</span></span><span class="hs-special">)</span><span>
</span><span id="line-1756"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Builder
</span><a href="../../bytestring-0.11.5.4/src/Data.ByteString.Builder.Internal.html#shortByteString/Data.ByteString.Builder.Internal.html#shortByteString"><span class="hs-identifier hs-var">BSB.shortByteString</span></a></span><span> </span><span class="annot"><span class="annottext">(ShortByteString -&gt; Builder) -&gt; ShortByteString -&gt; Builder
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; ShortByteString
</span><a href="GHC.Data.FastString.html#fastStringToShortByteString"><span class="hs-identifier hs-var">fastStringToShortByteString</span></a></span><span> </span><span class="annot"><span class="annottext">(FastString -&gt; ShortByteString) -&gt; FastString -&gt; ShortByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1757"></span><span>       </span><span class="annot"><span class="annottext">ModuleName -&gt; FastString
</span><a href="Language.Haskell.Syntax.Module.Name.html#moduleNameFS"><span class="hs-identifier hs-var">moduleNameFS</span></a></span><span> </span><span class="annot"><span class="annottext">(ModuleName -&gt; FastString) -&gt; ModuleName -&gt; FastString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit -&gt; ModuleName
forall unit. GenModule unit -&gt; ModuleName
</span><a href="GHC.Unit.Types.html#moduleName"><span class="hs-identifier hs-var">moduleName</span></a></span><span> </span><span class="annot"><span class="annottext">GenModule Unit
</span><a href="#local-6989586621681629025"><span class="hs-identifier hs-var">mod</span></a></span><span>
</span><span id="line-1758"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int8 -&gt; Builder
</span><a href="../../bytestring-0.11.5.4/src/Data.ByteString.Builder.html#int8/Data.ByteString.Builder.html#int8"><span class="hs-identifier hs-var">BSB.int8</span></a></span><span> </span><span class="annot"><span class="annottext">(Int8 -&gt; Builder) -&gt; Int8 -&gt; Builder
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Arity -&gt; Int8
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Real.html#fromIntegral/GHC.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Arity
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#ord/GHC.Base.html#ord"><span class="hs-identifier hs-var">ord</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'.'</span></span><span class="hs-special">)</span><span>
</span><span id="line-1759"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ShortByteString -&gt; Builder
</span><a href="../../bytestring-0.11.5.4/src/Data.ByteString.Builder.Internal.html#shortByteString/Data.ByteString.Builder.Internal.html#shortByteString"><span class="hs-identifier hs-var">BSB.shortByteString</span></a></span><span> </span><span class="annot"><span class="annottext">(ShortByteString -&gt; Builder) -&gt; ShortByteString -&gt; Builder
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; ShortByteString
</span><a href="GHC.Data.FastString.html#fastStringToShortByteString"><span class="hs-identifier hs-var">fastStringToShortByteString</span></a></span><span> </span><span class="annot"><span class="annottext">(FastString -&gt; ShortByteString) -&gt; FastString -&gt; ShortByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1760"></span><span>       </span><span class="annot"><span class="annottext">OccName -&gt; FastString
</span><a href="GHC.Types.Name.Occurrence.html#occNameFS"><span class="hs-identifier hs-var">occNameFS</span></a></span><span> </span><span class="annot"><span class="annottext">(OccName -&gt; FastString) -&gt; OccName -&gt; FastString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; OccName
</span><a href="GHC.Types.Name.html#nameOccName"><span class="hs-identifier hs-var">nameOccName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681629032"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-1761"></span><span>   </span><span class="hs-special">]</span><span>
</span><span id="line-1762"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681629032"><span class="annot"><span class="annottext">name :: Name
</span><a href="#local-6989586621681629032"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Name
</span><a href="GHC.Core.DataCon.html#dataConName"><span class="hs-identifier hs-var">dataConName</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681629018"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-1763"></span><span>        </span><span id="local-6989586621681629025"><span class="annot"><span class="annottext">mod :: GenModule Unit
</span><a href="#local-6989586621681629025"><span class="hs-identifier hs-var hs-var">mod</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; GenModule Unit -&gt; GenModule Unit
forall a. HasCallStack =&gt; Bool -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#assert"><span class="hs-identifier hs-var">assert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Bool
</span><a href="GHC.Types.Name.html#isExternalName"><span class="hs-identifier hs-var">isExternalName</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681629032"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(GenModule Unit -&gt; GenModule Unit)
-&gt; GenModule Unit -&gt; GenModule Unit
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Name -&gt; GenModule Unit
Name -&gt; GenModule Unit
</span><a href="GHC.Types.Name.html#nameModule"><span class="hs-identifier hs-var">nameModule</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681629032"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-1764"></span><span>
</span><span id="line-1765"></span><span class="annot"><a href="GHC.Core.DataCon.html#isTupleDataCon"><span class="hs-identifier hs-type">isTupleDataCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1766"></span><span id="isTupleDataCon"><span class="annot"><span class="annottext">isTupleDataCon :: DataCon -&gt; Bool
</span><a href="GHC.Core.DataCon.html#isTupleDataCon"><span class="hs-identifier hs-var hs-var">isTupleDataCon</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#MkData"><span class="hs-identifier hs-type">MkData</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">dcRepTyCon :: DataCon -&gt; TyCon
</span><a href="GHC.Core.DataCon.html#dcRepTyCon"><span class="hs-identifier hs-var">dcRepTyCon</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681629035"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681629035"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isTupleTyCon"><span class="hs-identifier hs-var">isTupleTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681629035"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-1767"></span><span>
</span><span id="line-1768"></span><span class="annot"><a href="GHC.Core.DataCon.html#isBoxedTupleDataCon"><span class="hs-identifier hs-type">isBoxedTupleDataCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1769"></span><span id="isBoxedTupleDataCon"><span class="annot"><span class="annottext">isBoxedTupleDataCon :: DataCon -&gt; Bool
</span><a href="GHC.Core.DataCon.html#isBoxedTupleDataCon"><span class="hs-identifier hs-var hs-var">isBoxedTupleDataCon</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#MkData"><span class="hs-identifier hs-type">MkData</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">dcRepTyCon :: DataCon -&gt; TyCon
</span><a href="GHC.Core.DataCon.html#dcRepTyCon"><span class="hs-identifier hs-var">dcRepTyCon</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681629037"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681629037"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isBoxedTupleTyCon"><span class="hs-identifier hs-var">isBoxedTupleTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681629037"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-1770"></span><span>
</span><span id="line-1771"></span><span class="annot"><a href="GHC.Core.DataCon.html#isUnboxedTupleDataCon"><span class="hs-identifier hs-type">isUnboxedTupleDataCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1772"></span><span id="isUnboxedTupleDataCon"><span class="annot"><span class="annottext">isUnboxedTupleDataCon :: DataCon -&gt; Bool
</span><a href="GHC.Core.DataCon.html#isUnboxedTupleDataCon"><span class="hs-identifier hs-var hs-var">isUnboxedTupleDataCon</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#MkData"><span class="hs-identifier hs-type">MkData</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">dcRepTyCon :: DataCon -&gt; TyCon
</span><a href="GHC.Core.DataCon.html#dcRepTyCon"><span class="hs-identifier hs-var">dcRepTyCon</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681629039"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681629039"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isUnboxedTupleTyCon"><span class="hs-identifier hs-var">isUnboxedTupleTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681629039"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-1773"></span><span>
</span><span id="line-1774"></span><span class="annot"><a href="GHC.Core.DataCon.html#isUnboxedSumDataCon"><span class="hs-identifier hs-type">isUnboxedSumDataCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1775"></span><span id="isUnboxedSumDataCon"><span class="annot"><span class="annottext">isUnboxedSumDataCon :: DataCon -&gt; Bool
</span><a href="GHC.Core.DataCon.html#isUnboxedSumDataCon"><span class="hs-identifier hs-var hs-var">isUnboxedSumDataCon</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#MkData"><span class="hs-identifier hs-type">MkData</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">dcRepTyCon :: DataCon -&gt; TyCon
</span><a href="GHC.Core.DataCon.html#dcRepTyCon"><span class="hs-identifier hs-var">dcRepTyCon</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681629041"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681629041"><span class="hs-identifier hs-var">tc</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isUnboxedSumTyCon"><span class="hs-identifier hs-var">isUnboxedSumTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681629041"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-1776"></span><span>
</span><span id="line-1777"></span><span class="annot"><span class="hs-comment">-- | Vanilla 'DataCon's are those that are nice boring Haskell 98 constructors</span></span><span>
</span><span id="line-1778"></span><span class="annot"><a href="GHC.Core.DataCon.html#isVanillaDataCon"><span class="hs-identifier hs-type">isVanillaDataCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1779"></span><span id="isVanillaDataCon"><span class="annot"><span class="annottext">isVanillaDataCon :: DataCon -&gt; Bool
</span><a href="GHC.Core.DataCon.html#isVanillaDataCon"><span class="hs-identifier hs-var hs-var">isVanillaDataCon</span></a></span></span><span> </span><span id="local-6989586621681629043"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681629043"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Bool
</span><a href="GHC.Core.DataCon.html#dcVanilla"><span class="hs-identifier hs-var">dcVanilla</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681629043"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-1780"></span><span>
</span><span id="line-1781"></span><span class="annot"><span class="hs-comment">-- | Is this the 'DataCon' of a newtype?</span></span><span>
</span><span id="line-1782"></span><span class="annot"><a href="GHC.Core.DataCon.html#isNewDataCon"><span class="hs-identifier hs-type">isNewDataCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1783"></span><span id="isNewDataCon"><span class="annot"><span class="annottext">isNewDataCon :: DataCon -&gt; Bool
</span><a href="GHC.Core.DataCon.html#isNewDataCon"><span class="hs-identifier hs-var hs-var">isNewDataCon</span></a></span></span><span> </span><span id="local-6989586621681629044"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681629044"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isNewTyCon"><span class="hs-identifier hs-var">isNewTyCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; TyCon
</span><a href="GHC.Core.DataCon.html#dataConTyCon"><span class="hs-identifier hs-var">dataConTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681629044"><span class="hs-identifier hs-var">dc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1784"></span><span>
</span><span id="line-1785"></span><span class="hs-comment">-- | Is this data constructor in a &quot;type data&quot; declaration?</span><span>
</span><span id="line-1786"></span><span class="hs-comment">-- See Note [Type data declarations] in GHC.Rename.Module.</span><span>
</span><span id="line-1787"></span><span class="annot"><a href="GHC.Core.DataCon.html#isTypeDataCon"><span class="hs-identifier hs-type">isTypeDataCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1788"></span><span id="isTypeDataCon"><span class="annot"><span class="annottext">isTypeDataCon :: DataCon -&gt; Bool
</span><a href="GHC.Core.DataCon.html#isTypeDataCon"><span class="hs-identifier hs-var hs-var">isTypeDataCon</span></a></span></span><span> </span><span id="local-6989586621681629046"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681629046"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isTypeDataTyCon"><span class="hs-identifier hs-var">isTypeDataTyCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; TyCon
</span><a href="GHC.Core.DataCon.html#dataConTyCon"><span class="hs-identifier hs-var">dataConTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681629046"><span class="hs-identifier hs-var">dc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1789"></span><span>
</span><span id="line-1790"></span><span class="annot"><a href="GHC.Core.DataCon.html#isCovertGadtDataCon"><span class="hs-identifier hs-type">isCovertGadtDataCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1791"></span><span class="hs-comment">-- See Note [isCovertGadtDataCon]</span><span>
</span><span id="line-1792"></span><span id="isCovertGadtDataCon"><span class="annot"><span class="annottext">isCovertGadtDataCon :: DataCon -&gt; Bool
</span><a href="GHC.Core.DataCon.html#isCovertGadtDataCon"><span class="hs-identifier hs-var hs-var">isCovertGadtDataCon</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#MkData"><span class="hs-identifier hs-type">MkData</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dcUnivTyVars :: DataCon -&gt; [TyVar]
</span><a href="GHC.Core.DataCon.html#dcUnivTyVars"><span class="hs-identifier hs-var">dcUnivTyVars</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681629048"><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681629048"><span class="hs-identifier hs-var">univ_tvs</span></a></span></span><span>
</span><span id="line-1793"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dcEqSpec :: DataCon -&gt; [EqSpec]
</span><a href="GHC.Core.DataCon.html#dcEqSpec"><span class="hs-identifier hs-var">dcEqSpec</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681629049"><span class="annot"><span class="annottext">[EqSpec]
</span><a href="#local-6989586621681629049"><span class="hs-identifier hs-var">eq_spec</span></a></span></span><span>
</span><span id="line-1794"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dcRepTyCon :: DataCon -&gt; TyCon
</span><a href="GHC.Core.DataCon.html#dcRepTyCon"><span class="hs-identifier hs-var">dcRepTyCon</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681629050"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681629050"><span class="hs-identifier hs-var">rep_tc</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1795"></span><span>  </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[EqSpec] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#null/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[EqSpec]
</span><a href="#local-6989586621681629049"><span class="hs-identifier hs-var">eq_spec</span></a></span><span class="hs-special">)</span><span>                </span><span class="hs-comment">-- There are some constraints</span><span>
</span><span id="line-1796"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EqSpec -&gt; Bool) -&gt; [EqSpec] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#any/Data.Foldable.html#any"><span class="hs-identifier hs-var">any</span></a></span><span> </span><span class="annot"><span class="annottext">EqSpec -&gt; Bool
</span><a href="#local-6989586621681629052"><span class="hs-identifier hs-var">is_visible_spec</span></a></span><span> </span><span class="annot"><span class="annottext">[EqSpec]
</span><a href="#local-6989586621681629049"><span class="hs-identifier hs-var">eq_spec</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- But none of them are visible</span><span>
</span><span id="line-1797"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1798"></span><span>    </span><span class="annot"><a href="#local-6989586621681629053"><span class="hs-identifier hs-type">visible_univ_tvs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span class="hs-special">]</span><span>  </span><span class="hs-comment">-- Visible arguments in result type</span><span>
</span><span id="line-1799"></span><span>    </span><span id="local-6989586621681629053"><span class="annot"><span class="annottext">visible_univ_tvs :: [TyVar]
</span><a href="#local-6989586621681629053"><span class="hs-identifier hs-var hs-var">visible_univ_tvs</span></a></span></span><span>
</span><span id="line-1800"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681629054"><span class="hs-identifier hs-var">univ_tv</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681629054"><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681629054"><span class="hs-identifier hs-var">univ_tv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681629055"><span class="annot"><span class="annottext">TyConBinder
</span><a href="#local-6989586621681629055"><span class="hs-identifier hs-var">tcb</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681629048"><span class="hs-identifier hs-var">univ_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar] -&gt; [TyConBinder] -&gt; [(TyVar, TyConBinder)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../../base-4.18.3.0/src/GHC.List.html#zip/GHC.List.html#zip"><span class="hs-operator hs-var">`zip`</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; [TyConBinder]
</span><a href="GHC.Core.TyCon.html#tyConBinders"><span class="hs-identifier hs-var">tyConBinders</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681629050"><span class="hs-identifier hs-var">rep_tc</span></a></span><span>
</span><span id="line-1801"></span><span>                  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyConBinder -&gt; Bool
forall tv. VarBndr tv TyConBndrVis -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isVisibleTyConBinder"><span class="hs-identifier hs-var">isVisibleTyConBinder</span></a></span><span> </span><span class="annot"><span class="annottext">TyConBinder
</span><a href="#local-6989586621681629055"><span class="hs-identifier hs-var">tcb</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1802"></span><span>
</span><span id="line-1803"></span><span>    </span><span class="annot"><a href="#local-6989586621681629052"><span class="hs-identifier hs-type">is_visible_spec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#EqSpec"><span class="hs-identifier hs-type">EqSpec</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1804"></span><span>    </span><span id="local-6989586621681629052"><span class="annot"><span class="annottext">is_visible_spec :: EqSpec -&gt; Bool
</span><a href="#local-6989586621681629052"><span class="hs-identifier hs-var hs-var">is_visible_spec</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#EqSpec"><span class="hs-identifier hs-type">EqSpec</span></a></span><span> </span><span id="local-6989586621681629058"><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681629058"><span class="hs-identifier hs-var">univ_tv</span></a></span></span><span> </span><span id="local-6989586621681629059"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681629059"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1805"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681629058"><span class="hs-identifier hs-var">univ_tv</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar -&gt; [TyVar] -&gt; Bool
forall a. Eq a =&gt; a -&gt; [a] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#elem/Data.Foldable.html#elem"><span class="hs-operator hs-var">`elem`</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681629053"><span class="hs-identifier hs-var">visible_univ_tvs</span></a></span><span>
</span><span id="line-1806"></span><span>         </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.Type.html#isTyVarTy"><span class="hs-identifier hs-var">isTyVarTy</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681629059"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- See Note [isCovertGadtDataCon] for</span><span>
</span><span id="line-1807"></span><span>                                </span><span class="hs-comment">-- an example where 'ty' is a tyvar</span><span>
</span><span id="line-1808"></span><span>
</span><span id="line-1809"></span><span class="hs-comment">{- Note [isCovertGadtDataCon]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
(isCovertGadtDataCon K) returns True if K is a GADT data constructor, but
does not /look/ like it. Consider (#21447)
    type T :: TYPE r -&gt; Type
    data T a where { MkT :: b -&gt; T b }
Here MkT doesn't look GADT-like, but it is. If we make the kind applications
explicit we'd see:
    data T a where { MkT :: b -&gt; T @LiftedRep b }

The test for covert-ness is bit tricky, because we want to see if
  - dcEqSpec is non-empty
  - dcEqSpec does not constrain any of the /required/ (i.e. visible)
    arguments of the TyCon to a non-tyvar

In the example above, the DataCon for MkT will have
    dcUnivTyVars: [(r::RuntimeRep), (a :: TYPE r)]
    dcExTyVars:   [(b :: Type)]
    dcEqSpec:     [(r, LiftedRep), (a, b)]
Here
  * `r :: RuntimeRep` is constrained by dcEqSpec to LiftedRep
  * `a :: TYPE r` is constrained by dcEqSpec to `b :: Type`
But the constraint on `a` is not visible to the user, so this counts
as a covert GADT data con.  The declaration
     MkT :: forall (b :: Type). b -&gt; T b
looks entirely non-GADT-ish.

Wrinkles:
* The visibility or otherwise is a property of the /TyCon/ binders
* The dcUnivTyVars may or may not be the same as the TyCon binders
* So we have to zip them together.
* For a data family the TyCon in question is the /representation/ TyCon
  hence dcRepTyCon
-}</span><span>
</span><span id="line-1843"></span><span>
</span><span id="line-1844"></span><span>
</span><span id="line-1845"></span><span class="hs-comment">-- | Should this DataCon be allowed in a type even without -XDataKinds?</span><span>
</span><span id="line-1846"></span><span class="hs-comment">-- Currently, only Lifted &amp; Unlifted</span><span>
</span><span id="line-1847"></span><span class="annot"><a href="GHC.Core.DataCon.html#specialPromotedDc"><span class="hs-identifier hs-type">specialPromotedDc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1848"></span><span id="specialPromotedDc"><span class="annot"><span class="annottext">specialPromotedDc :: DataCon -&gt; Bool
</span><a href="GHC.Core.DataCon.html#specialPromotedDc"><span class="hs-identifier hs-var hs-var">specialPromotedDc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="GHC.Core.TyCon.html#isKindTyCon"><span class="hs-identifier hs-var">isKindTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">(TyCon -&gt; Bool) -&gt; (DataCon -&gt; TyCon) -&gt; DataCon -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; TyCon
</span><a href="GHC.Core.DataCon.html#dataConTyCon"><span class="hs-identifier hs-var">dataConTyCon</span></a></span><span>
</span><span id="line-1849"></span><span>
</span><span id="line-1850"></span><span class="annot"><a href="GHC.Core.DataCon.html#classDataCon"><span class="hs-identifier hs-type">classDataCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.Class.html#Class"><span class="hs-identifier hs-type">Class</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span>
</span><span id="line-1851"></span><span id="classDataCon"><span class="annot"><span class="annottext">classDataCon :: Class -&gt; DataCon
</span><a href="GHC.Core.DataCon.html#classDataCon"><span class="hs-identifier hs-var hs-var">classDataCon</span></a></span></span><span> </span><span id="local-6989586621681629063"><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621681629063"><span class="hs-identifier hs-var">clas</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; [DataCon]
</span><a href="GHC.Core.TyCon.html#tyConDataCons"><span class="hs-identifier hs-var">tyConDataCons</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Class -&gt; TyCon
</span><a href="GHC.Core.Class.html#classTyCon"><span class="hs-identifier hs-var">classTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621681629063"><span class="hs-identifier hs-var">clas</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1852"></span><span>                      </span><span class="hs-special">(</span><span id="local-6989586621681629066"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681629066"><span class="hs-identifier hs-var">dict_constr</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681629067"><span class="annot"><span class="annottext">[DataCon]
</span><a href="#local-6989586621681629067"><span class="hs-identifier hs-var">no_more</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; DataCon -&gt; DataCon
forall a. HasCallStack =&gt; Bool -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#assert"><span class="hs-identifier hs-var">assert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[DataCon] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#null/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[DataCon]
</span><a href="#local-6989586621681629067"><span class="hs-identifier hs-var">no_more</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681629066"><span class="hs-identifier hs-var">dict_constr</span></a></span><span>
</span><span id="line-1853"></span><span>                      </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; DataCon
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;classDataCon&quot;</span></span><span>
</span><span id="line-1854"></span><span>
</span><span id="line-1855"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConCannotMatch"><span class="hs-identifier hs-type">dataConCannotMatch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1856"></span><span class="hs-comment">-- Returns True iff the data con *definitely cannot* match a</span><span>
</span><span id="line-1857"></span><span class="hs-comment">--                  scrutinee of type (T tys)</span><span>
</span><span id="line-1858"></span><span class="hs-comment">--                  where T is the dcRepTyCon for the data con</span><span>
</span><span id="line-1859"></span><span id="dataConCannotMatch"><span class="annot"><span class="annottext">dataConCannotMatch :: [Type] -&gt; DataCon -&gt; Bool
</span><a href="GHC.Core.DataCon.html#dataConCannotMatch"><span class="hs-identifier hs-var hs-var">dataConCannotMatch</span></a></span></span><span> </span><span id="local-6989586621681629068"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681629068"><span class="hs-identifier hs-var">tys</span></a></span></span><span> </span><span id="local-6989586621681629069"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681629069"><span class="hs-identifier hs-var">con</span></a></span></span><span>
</span><span id="line-1860"></span><span>  </span><span class="hs-comment">-- See (U6) in Note [Implementing unsafeCoerce]</span><span>
</span><span id="line-1861"></span><span>  </span><span class="hs-comment">-- in base:Unsafe.Coerce</span><span>
</span><span id="line-1862"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; Name
</span><a href="GHC.Core.DataCon.html#dataConName"><span class="hs-identifier hs-var">dataConName</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681629069"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="GHC.Builtin.Names.html#unsafeReflDataConName"><span class="hs-identifier hs-var">unsafeReflDataConName</span></a></span><span>
</span><span id="line-1863"></span><span>                      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1864"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[Type] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#null/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681629071"><span class="hs-identifier hs-var">inst_theta</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>   </span><span class="hs-comment">-- Common</span><span>
</span><span id="line-1865"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Bool) -&gt; [Type] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#all/Data.Foldable.html#all"><span class="hs-identifier hs-var">all</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Bool
</span><a href="GHC.Core.Type.html#isTyVarTy"><span class="hs-identifier hs-var">isTyVarTy</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681629068"><span class="hs-identifier hs-var">tys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>   </span><span class="hs-comment">-- Also common</span><span>
</span><span id="line-1866"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Type, Type)] -&gt; Bool
</span><a href="GHC.Core.Unify.html#typesCantMatch"><span class="hs-identifier hs-var">typesCantMatch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Type -&gt; [(Type, Type)]) -&gt; [Type] -&gt; [(Type, Type)]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#concatMap/Data.Foldable.html#concatMap"><span class="hs-identifier hs-var">concatMap</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; [(Type, Type)]
</span><a href="#local-6989586621681629075"><span class="hs-identifier hs-var">predEqs</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681629071"><span class="hs-identifier hs-var">inst_theta</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1867"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1868"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TyVar]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681629071"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681629071"><span class="hs-identifier hs-var">inst_theta</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; [Type] -&gt; ([TyVar], [Type], [Type])
</span><a href="GHC.Core.DataCon.html#dataConInstSig"><span class="hs-identifier hs-var">dataConInstSig</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681629069"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681629068"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-1869"></span><span>
</span><span id="line-1870"></span><span>    </span><span class="hs-comment">-- TODO: could gather equalities from superclasses too</span><span>
</span><span id="line-1871"></span><span>    </span><span id="local-6989586621681629075"><span class="annot"><span class="annottext">predEqs :: Type -&gt; [(Type, Type)]
</span><a href="#local-6989586621681629075"><span class="hs-identifier hs-var hs-var">predEqs</span></a></span></span><span> </span><span id="local-6989586621681629079"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681629079"><span class="hs-identifier hs-var">pred</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Pred
</span><a href="GHC.Core.Predicate.html#classifyPredType"><span class="hs-identifier hs-var">classifyPredType</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681629079"><span class="hs-identifier hs-var">pred</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1872"></span><span>                     </span><span class="annot"><a href="GHC.Core.Predicate.html#EqPred"><span class="hs-identifier hs-type">EqPred</span></a></span><span> </span><span class="annot"><span class="annottext">EqRel
</span><a href="GHC.Core.Predicate.html#NomEq"><span class="hs-identifier hs-var">NomEq</span></a></span><span> </span><span id="local-6989586621681629083"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681629083"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621681629084"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681629084"><span class="hs-identifier hs-var">ty2</span></a></span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681629083"><span class="hs-identifier hs-var">ty1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681629084"><span class="hs-identifier hs-var">ty2</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1873"></span><span>                     </span><span class="annot"><a href="GHC.Core.Predicate.html#ClassPred"><span class="hs-identifier hs-type">ClassPred</span></a></span><span> </span><span id="local-6989586621681629086"><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621681629086"><span class="hs-identifier hs-var">eq</span></a></span></span><span> </span><span id="local-6989586621681629087"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681629087"><span class="hs-identifier hs-var">args</span></a></span></span><span>
</span><span id="line-1874"></span><span>                       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621681629086"><span class="hs-identifier hs-var">eq</span></a></span><span> </span><span class="annot"><span class="annottext">Class -&gt; Unique -&gt; Bool
forall a. Uniquable a =&gt; a -&gt; Unique -&gt; Bool
</span><a href="GHC.Types.Unique.html#hasKey"><span class="hs-operator hs-var">`hasKey`</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="GHC.Builtin.Names.html#eqTyConKey"><span class="hs-identifier hs-var">eqTyConKey</span></a></span><span>
</span><span id="line-1875"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681629090"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681629090"><span class="hs-identifier hs-var">ty1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681629091"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681629091"><span class="hs-identifier hs-var">ty2</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681629087"><span class="hs-identifier hs-var">args</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681629090"><span class="hs-identifier hs-var">ty1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681629091"><span class="hs-identifier hs-var">ty2</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1876"></span><span>                       </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="#local-6989586621681629086"><span class="hs-identifier hs-var">eq</span></a></span><span> </span><span class="annot"><span class="annottext">Class -&gt; Unique -&gt; Bool
forall a. Uniquable a =&gt; a -&gt; Unique -&gt; Bool
</span><a href="GHC.Types.Unique.html#hasKey"><span class="hs-operator hs-var">`hasKey`</span></a></span><span> </span><span class="annot"><span class="annottext">Unique
</span><a href="GHC.Builtin.Names.html#heqTyConKey"><span class="hs-identifier hs-var">heqTyConKey</span></a></span><span>
</span><span id="line-1877"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681629093"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681629093"><span class="hs-identifier hs-var">ty1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681629094"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681629094"><span class="hs-identifier hs-var">ty2</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681629087"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681629093"><span class="hs-identifier hs-var">ty1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681629094"><span class="hs-identifier hs-var">ty2</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1878"></span><span>                     </span><span class="annot"><span class="annottext">Pred
</span><span class="hs-identifier">_</span></span><span>                            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1879"></span><span>
</span><span id="line-1880"></span><span class="hs-comment">-- | Were the type variables of the data con written in a different order</span><span>
</span><span id="line-1881"></span><span class="hs-comment">-- than the regular order (universal tyvars followed by existential tyvars)?</span><span>
</span><span id="line-1882"></span><span class="hs-comment">--</span><span>
</span><span id="line-1883"></span><span class="hs-comment">-- This is not a cheap test, so we minimize its use in GHC as much as possible.</span><span>
</span><span id="line-1884"></span><span class="hs-comment">-- Currently, its only call site in the GHC codebase is in 'mkDataConRep' in</span><span>
</span><span id="line-1885"></span><span class="hs-comment">-- &quot;MkId&quot;, and so 'dataConUserTyVarsNeedWrapper' is only called at most once</span><span>
</span><span id="line-1886"></span><span class="hs-comment">-- during a data constructor's lifetime.</span><span>
</span><span id="line-1887"></span><span>
</span><span id="line-1888"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConResRepTyArgs"><span class="hs-identifier hs-type">dataConResRepTyArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1889"></span><span class="hs-comment">-- Returns the arguments of a GADT version of the /representation/ TyCon</span><span>
</span><span id="line-1890"></span><span class="hs-comment">-- Thus   data instance T [(x,y)] z where</span><span>
</span><span id="line-1891"></span><span class="hs-comment">--           MkT :: forall p q. Int -&gt; T [(Int,p)] (Maybe q)</span><span>
</span><span id="line-1892"></span><span class="hs-comment">-- The &quot;GADT version of the representation type&quot; is</span><span>
</span><span id="line-1893"></span><span class="hs-comment">--        data R:T x y z where</span><span>
</span><span id="line-1894"></span><span class="hs-comment">--           MkT :: forall p q. Int -&gt; R:T Int p (Maybe q)</span><span>
</span><span id="line-1895"></span><span class="hs-comment">-- so dataConResRepTyArgs for MkT returns [Int, p, Maybe q]</span><span>
</span><span id="line-1896"></span><span class="hs-comment">-- This is almost the same as (subst eq_spec univ_tvs); but not quite,</span><span>
</span><span id="line-1897"></span><span class="hs-comment">--   because eq_spec omits constraint-kinded equalities</span><span>
</span><span id="line-1898"></span><span id="dataConResRepTyArgs"><span class="annot"><span class="annottext">dataConResRepTyArgs :: DataCon -&gt; [Type]
</span><a href="GHC.Core.DataCon.html#dataConResRepTyArgs"><span class="hs-identifier hs-var hs-var">dataConResRepTyArgs</span></a></span></span><span> </span><span id="local-6989586621681629095"><span class="annot"><span class="annottext">dc :: DataCon
</span><a href="#local-6989586621681629095"><span class="hs-identifier hs-var">dc</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#MkData"><span class="hs-identifier hs-type">MkData</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dcRepTyCon :: DataCon -&gt; TyCon
</span><a href="GHC.Core.DataCon.html#dcRepTyCon"><span class="hs-identifier hs-var">dcRepTyCon</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681629096"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681629096"><span class="hs-identifier hs-var">rep_tc</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dcOrigResTy :: DataCon -&gt; Type
</span><a href="GHC.Core.DataCon.html#dcOrigResTy"><span class="hs-identifier hs-var">dcOrigResTy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681629097"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681629097"><span class="hs-identifier hs-var">orig_res_ty</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1899"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681629098"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681629098"><span class="hs-identifier hs-var">fam_tc</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681629099"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681629099"><span class="hs-identifier hs-var">fam_args</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Maybe (TyCon, [Type])
</span><a href="GHC.Core.TyCon.html#tyConFamInst_maybe"><span class="hs-identifier hs-var">tyConFamInst_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681629096"><span class="hs-identifier hs-var">rep_tc</span></a></span><span>
</span><span id="line-1900"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- fvs(fam_args) = tyConTyVars rep_tc</span><span>
</span><span id="line-1901"></span><span>    </span><span class="hs-comment">-- These tyvars are the domain of subst</span><span>
</span><span id="line-1902"></span><span>    </span><span class="hs-comment">-- Fvs(range(subst)) = tvars of the datacon</span><span>
</span><span id="line-1903"></span><span>    </span><span class="hs-keyword">case</span><span>  </span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; Maybe Subst
</span><a href="GHC.Core.Unify.html#tcMatchTy"><span class="hs-identifier hs-var">tcMatchTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; [Type] -&gt; Type
</span><a href="GHC.Core.Type.html#mkTyConApp"><span class="hs-identifier hs-var">mkTyConApp</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681629098"><span class="hs-identifier hs-var">fam_tc</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681629099"><span class="hs-identifier hs-var">fam_args</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681629097"><span class="hs-identifier hs-var">orig_res_ty</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1904"></span><span>       </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681629101"><span class="annot"><span class="annottext">Subst
</span><a href="#local-6989586621681629101"><span class="hs-identifier hs-var">subst</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(TyVar -&gt; Type) -&gt; [TyVar] -&gt; [Type]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Subst -&gt; TyVar -&gt; Type
</span><a href="GHC.Core.TyCo.Subst.html#substTyVar"><span class="hs-identifier hs-var">substTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Subst
</span><a href="#local-6989586621681629101"><span class="hs-identifier hs-var">subst</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon -&gt; [TyVar]
</span><a href="GHC.Core.TyCon.html#tyConTyVars"><span class="hs-identifier hs-var">tyConTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681629096"><span class="hs-identifier hs-var">rep_tc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1905"></span><span>       </span><span class="annot"><span class="annottext">Maybe Subst
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; [Type]
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;datacOnResRepTyArgs&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; [Type]) -&gt; SDoc -&gt; [Type]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1906"></span><span>                     </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681629095"><span class="hs-identifier hs-var">dc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681629098"><span class="hs-identifier hs-var">fam_tc</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Type] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681629099"><span class="hs-identifier hs-var">fam_args</span></a></span><span>
</span><span id="line-1907"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681629097"><span class="hs-identifier hs-var">orig_res_ty</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1908"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1909"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; Type -&gt; [Type]
Type -&gt; [Type]
</span><a href="GHC.Core.Type.html#tyConAppArgs"><span class="hs-identifier hs-var">tyConAppArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681629097"><span class="hs-identifier hs-var">orig_res_ty</span></a></span><span>
</span><span id="line-1910"></span><span>
</span><span id="line-1911"></span><span class="annot"><a href="GHC.Core.DataCon.html#checkDataConTyVars"><span class="hs-identifier hs-type">checkDataConTyVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1912"></span><span class="hs-comment">-- Check that the worker and wrapper have the same set of type variables</span><span>
</span><span id="line-1913"></span><span class="hs-comment">-- See Note [DataCon user type variable binders]</span><span>
</span><span id="line-1914"></span><span class="hs-comment">-- Also ensures that no user tyvar is in the eq_spec (the eq_spec should</span><span>
</span><span id="line-1915"></span><span class="hs-comment">-- only relate fresh universals from (R2) of the note)</span><span>
</span><span id="line-1916"></span><span id="checkDataConTyVars"><span class="annot"><span class="annottext">checkDataConTyVars :: DataCon -&gt; Bool
</span><a href="GHC.Core.DataCon.html#checkDataConTyVars"><span class="hs-identifier hs-var hs-var">checkDataConTyVars</span></a></span></span><span> </span><span id="local-6989586621681629106"><span class="annot"><span class="annottext">dc :: DataCon
</span><a href="#local-6989586621681629106"><span class="hs-identifier hs-var">dc</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#MkData"><span class="hs-identifier hs-type">MkData</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dcUnivTyVars :: DataCon -&gt; [TyVar]
</span><a href="GHC.Core.DataCon.html#dcUnivTyVars"><span class="hs-identifier hs-var">dcUnivTyVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681629107"><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681629107"><span class="hs-identifier hs-var">univ_tvs</span></a></span></span><span>
</span><span id="line-1917"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dcExTyCoVars :: DataCon -&gt; [TyVar]
</span><a href="GHC.Core.DataCon.html#dcExTyCoVars"><span class="hs-identifier hs-var">dcExTyCoVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681629108"><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681629108"><span class="hs-identifier hs-var">ex_tvs</span></a></span></span><span>
</span><span id="line-1918"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dcEqSpec :: DataCon -&gt; [EqSpec]
</span><a href="GHC.Core.DataCon.html#dcEqSpec"><span class="hs-identifier hs-var">dcEqSpec</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681629109"><span class="annot"><span class="annottext">[EqSpec]
</span><a href="#local-6989586621681629109"><span class="hs-identifier hs-var">eq_spec</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1919"></span><span>     </span><span class="hs-comment">-- use of sets here: (R1) from the Note</span><span>
</span><span id="line-1920"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TyVar] -&gt; UnVarSet
</span><a href="GHC.Data.Graph.UnVar.html#mkUnVarSet"><span class="hs-identifier hs-var">mkUnVarSet</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681629111"><span class="hs-identifier hs-var">depleted_worker_vars</span></a></span><span> </span><span class="annot"><span class="annottext">UnVarSet -&gt; UnVarSet -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">[TyVar] -&gt; UnVarSet
</span><a href="GHC.Data.Graph.UnVar.html#mkUnVarSet"><span class="hs-identifier hs-var">mkUnVarSet</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681629112"><span class="hs-identifier hs-var">depleted_wrapper_vars</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span>
</span><span id="line-1921"></span><span>    </span><span class="annot"><span class="annottext">(TyVar -&gt; Bool) -&gt; [TyVar] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#all/Data.Foldable.html#all"><span class="hs-identifier hs-var">all</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; (TyVar -&gt; Bool) -&gt; TyVar -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar -&gt; Bool
</span><a href="#local-6989586621681629113"><span class="hs-identifier hs-var">is_eq_spec_var</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681629114"><span class="hs-identifier hs-var">wrapper_vars</span></a></span><span>
</span><span id="line-1922"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1923"></span><span>    </span><span id="local-6989586621681629118"><span class="annot"><span class="annottext">is_constraint_var :: TyVar -&gt; Bool
</span><a href="#local-6989586621681629118"><span class="hs-identifier hs-var hs-var">is_constraint_var</span></a></span></span><span> </span><span id="local-6989586621681629119"><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681629119"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Type -&gt; TypeOrConstraint
Type -&gt; TypeOrConstraint
</span><a href="GHC.Core.Type.html#typeTypeOrConstraint"><span class="hs-identifier hs-var">typeTypeOrConstraint</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyVar -&gt; Type
</span><a href="GHC.Types.Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681629119"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TypeOrConstraint -&gt; TypeOrConstraint -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TypeOrConstraint
</span><a href="GHC.Types.Basic.html#ConstraintLike"><span class="hs-identifier hs-var">ConstraintLike</span></a></span><span>
</span><span id="line-1924"></span><span>      </span><span class="hs-comment">-- implements (R3) from the Note</span><span>
</span><span id="line-1925"></span><span>
</span><span id="line-1926"></span><span>    </span><span id="local-6989586621681629123"><span class="annot"><span class="annottext">worker_vars :: [TyVar]
</span><a href="#local-6989586621681629123"><span class="hs-identifier hs-var hs-var">worker_vars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681629107"><span class="hs-identifier hs-var">univ_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar] -&gt; [TyVar] -&gt; [TyVar]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681629108"><span class="hs-identifier hs-var">ex_tvs</span></a></span><span>
</span><span id="line-1927"></span><span>    </span><span id="local-6989586621681629124"><span class="annot"><span class="annottext">eq_spec_tvs :: UnVarSet
</span><a href="#local-6989586621681629124"><span class="hs-identifier hs-var hs-var">eq_spec_tvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TyVar] -&gt; UnVarSet
</span><a href="GHC.Data.Graph.UnVar.html#mkUnVarSet"><span class="hs-identifier hs-var">mkUnVarSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EqSpec -&gt; TyVar) -&gt; [EqSpec] -&gt; [TyVar]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">EqSpec -&gt; TyVar
</span><a href="GHC.Core.DataCon.html#eqSpecTyVar"><span class="hs-identifier hs-var">eqSpecTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">[EqSpec]
</span><a href="#local-6989586621681629109"><span class="hs-identifier hs-var">eq_spec</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1928"></span><span>    </span><span id="local-6989586621681629113"><span class="annot"><span class="annottext">is_eq_spec_var :: TyVar -&gt; Bool
</span><a href="#local-6989586621681629113"><span class="hs-identifier hs-var hs-var">is_eq_spec_var</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyVar -&gt; UnVarSet -&gt; Bool
</span><a href="GHC.Data.Graph.UnVar.html#elemUnVarSet"><span class="hs-operator hs-var">`elemUnVarSet`</span></a></span><span> </span><span class="annot"><span class="annottext">UnVarSet
</span><a href="#local-6989586621681629124"><span class="hs-identifier hs-var">eq_spec_tvs</span></a></span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- (R2) from the Note</span><span>
</span><span id="line-1929"></span><span>    </span><span id="local-6989586621681629111"><span class="annot"><span class="annottext">depleted_worker_vars :: [TyVar]
</span><a href="#local-6989586621681629111"><span class="hs-identifier hs-var hs-var">depleted_worker_vars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TyVar -&gt; Bool) -&gt; [TyVar] -&gt; [TyVar]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="GHC.Utils.Misc.html#filterOut"><span class="hs-identifier hs-var">filterOut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyVar -&gt; Bool
</span><a href="#local-6989586621681629113"><span class="hs-identifier hs-var">is_eq_spec_var</span></a></span><span> </span><span class="annot"><span class="annottext">(TyVar -&gt; Bool) -&gt; (TyVar -&gt; Bool) -&gt; TyVar -&gt; Bool
forall (f :: * -&gt; *). Applicative f =&gt; f Bool -&gt; f Bool -&gt; f Bool
</span><a href="GHC.Utils.Misc.html#%3C%7C%7C%3E"><span class="hs-operator hs-var">&lt;||&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar -&gt; Bool
</span><a href="#local-6989586621681629118"><span class="hs-identifier hs-var">is_constraint_var</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1930"></span><span>                                     </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681629123"><span class="hs-identifier hs-var">worker_vars</span></a></span><span>
</span><span id="line-1931"></span><span>
</span><span id="line-1932"></span><span>    </span><span id="local-6989586621681629114"><span class="annot"><span class="annottext">wrapper_vars :: [TyVar]
</span><a href="#local-6989586621681629114"><span class="hs-identifier hs-var hs-var">wrapper_vars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; [TyVar]
</span><a href="GHC.Core.DataCon.html#dataConUserTyVars"><span class="hs-identifier hs-var">dataConUserTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681629106"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-1933"></span><span>    </span><span id="local-6989586621681629112"><span class="annot"><span class="annottext">depleted_wrapper_vars :: [TyVar]
</span><a href="#local-6989586621681629112"><span class="hs-identifier hs-var hs-var">depleted_wrapper_vars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TyVar -&gt; Bool) -&gt; [TyVar] -&gt; [TyVar]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="GHC.Utils.Misc.html#filterOut"><span class="hs-identifier hs-var">filterOut</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar -&gt; Bool
</span><a href="#local-6989586621681629118"><span class="hs-identifier hs-var">is_constraint_var</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681629114"><span class="hs-identifier hs-var">wrapper_vars</span></a></span><span>
</span><span id="line-1934"></span><span>
</span><span id="line-1935"></span><span class="annot"><a href="GHC.Core.DataCon.html#dataConUserTyVarsNeedWrapper"><span class="hs-identifier hs-type">dataConUserTyVarsNeedWrapper</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1936"></span><span class="hs-comment">-- Check whether the worker and wapper have the same type variables</span><span>
</span><span id="line-1937"></span><span class="hs-comment">-- in the same order. If not, we need a wrapper to swizzle them.</span><span>
</span><span id="line-1938"></span><span class="hs-comment">-- See Note [DataCon user type variable binders], as well as</span><span>
</span><span id="line-1939"></span><span class="hs-comment">-- Note [Data con wrappers and GADT syntax] for an explanation of what</span><span>
</span><span id="line-1940"></span><span class="hs-comment">-- mkDataConRep is doing with this function.</span><span>
</span><span id="line-1941"></span><span id="dataConUserTyVarsNeedWrapper"><span class="annot"><span class="annottext">dataConUserTyVarsNeedWrapper :: DataCon -&gt; Bool
</span><a href="GHC.Core.DataCon.html#dataConUserTyVarsNeedWrapper"><span class="hs-identifier hs-var hs-var">dataConUserTyVarsNeedWrapper</span></a></span></span><span> </span><span id="local-6989586621681629128"><span class="annot"><span class="annottext">dc :: DataCon
</span><a href="#local-6989586621681629128"><span class="hs-identifier hs-var">dc</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#MkData"><span class="hs-identifier hs-type">MkData</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dcUnivTyVars :: DataCon -&gt; [TyVar]
</span><a href="GHC.Core.DataCon.html#dcUnivTyVars"><span class="hs-identifier hs-var">dcUnivTyVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681629129"><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681629129"><span class="hs-identifier hs-var">univ_tvs</span></a></span></span><span>
</span><span id="line-1942"></span><span>                                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dcExTyCoVars :: DataCon -&gt; [TyVar]
</span><a href="GHC.Core.DataCon.html#dcExTyCoVars"><span class="hs-identifier hs-var">dcExTyCoVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681629130"><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681629130"><span class="hs-identifier hs-var">ex_tvs</span></a></span></span><span>
</span><span id="line-1943"></span><span>                                        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dcEqSpec :: DataCon -&gt; [EqSpec]
</span><a href="GHC.Core.DataCon.html#dcEqSpec"><span class="hs-identifier hs-var">dcEqSpec</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681629131"><span class="annot"><span class="annottext">[EqSpec]
</span><a href="#local-6989586621681629131"><span class="hs-identifier hs-var">eq_spec</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1944"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
forall a. HasCallStack =&gt; Bool -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#assert"><span class="hs-identifier hs-var">assert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[EqSpec] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#null/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[EqSpec]
</span><a href="#local-6989586621681629131"><span class="hs-identifier hs-var">eq_spec</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681629133"><span class="hs-identifier hs-var">answer</span></a></span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- all GADTs should say &quot;yes&quot; here</span><span>
</span><span id="line-1945"></span><span>    </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681629133"><span class="hs-identifier hs-var">answer</span></a></span><span>
</span><span id="line-1946"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1947"></span><span>    </span><span id="local-6989586621681629133"><span class="annot"><span class="annottext">answer :: Bool
</span><a href="#local-6989586621681629133"><span class="hs-identifier hs-var hs-var">answer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681629129"><span class="hs-identifier hs-var">univ_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar] -&gt; [TyVar] -&gt; [TyVar]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[TyVar]
</span><a href="#local-6989586621681629130"><span class="hs-identifier hs-var">ex_tvs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TyVar] -&gt; [TyVar] -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; [TyVar]
</span><a href="GHC.Core.DataCon.html#dataConUserTyVars"><span class="hs-identifier hs-var">dataConUserTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681629128"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-1948"></span><span>              </span><span class="hs-comment">-- Worker tyvars         Wrapper tyvars</span><span>
</span><span id="line-1949"></span><span>
</span><span id="line-1950"></span><span>
</span><span id="line-1951"></span><span class="hs-comment">{-
%************************************************************************
%*                                                                      *
        Promoting of data types to the kind level
*                                                                      *
************************************************************************

-}</span><span>
</span><span id="line-1959"></span><span>
</span><span id="line-1960"></span><span class="annot"><a href="GHC.Core.DataCon.html#promoteDataCon"><span class="hs-identifier hs-type">promoteDataCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span>
</span><span id="line-1961"></span><span id="promoteDataCon"><span class="annot"><span class="annottext">promoteDataCon :: DataCon -&gt; TyCon
</span><a href="GHC.Core.DataCon.html#promoteDataCon"><span class="hs-identifier hs-var hs-var">promoteDataCon</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.DataCon.html#MkData"><span class="hs-identifier hs-type">MkData</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dcPromoted :: DataCon -&gt; TyCon
</span><a href="GHC.Core.DataCon.html#dcPromoted"><span class="hs-identifier hs-var">dcPromoted</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681629134"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681629134"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681629134"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-1962"></span><span>
</span><span id="line-1963"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection{Splitting products}
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-1970"></span><span>
</span><span id="line-1971"></span><span class="hs-comment">-- | Extract the type constructor, type argument, data constructor and it's</span><span>
</span><span id="line-1972"></span><span class="hs-comment">-- /representation/ argument types from a type if it is a product type.</span><span>
</span><span id="line-1973"></span><span class="hs-comment">--</span><span>
</span><span id="line-1974"></span><span class="hs-comment">-- Precisely, we return @Just@ for any data type that is all of:</span><span>
</span><span id="line-1975"></span><span class="hs-comment">--</span><span>
</span><span id="line-1976"></span><span class="hs-comment">--  * Concrete (i.e. constructors visible)</span><span>
</span><span id="line-1977"></span><span class="hs-comment">--  * Single-constructor</span><span>
</span><span id="line-1978"></span><span class="hs-comment">--  * ... which has no existentials</span><span>
</span><span id="line-1979"></span><span class="hs-comment">--</span><span>
</span><span id="line-1980"></span><span class="hs-comment">-- Whether the type is a @data@ type or a @newtype@.</span><span>
</span><span id="line-1981"></span><span class="annot"><a href="GHC.Core.DataCon.html#splitDataProductType_maybe"><span class="hs-identifier hs-type">splitDataProductType_maybe</span></a></span><span>
</span><span id="line-1982"></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>                         </span><span class="annot"><span class="hs-comment">-- ^ A product type, perhaps</span></span><span>
</span><span id="line-1983"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span class="hs-special">,</span><span>                </span><span class="hs-comment">-- The type constructor</span><span>
</span><span id="line-1984"></span><span>                  </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>               </span><span class="hs-comment">-- Type args of the tycon</span><span>
</span><span id="line-1985"></span><span>                  </span><span class="annot"><a href="GHC.Core.DataCon.html#DataCon"><span class="hs-identifier hs-type">DataCon</span></a></span><span class="hs-special">,</span><span>              </span><span class="hs-comment">-- The data constructor</span><span>
</span><span id="line-1986"></span><span>                  </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>        </span><span class="hs-comment">-- Its /representation/ arg types</span><span>
</span><span id="line-1987"></span><span>
</span><span id="line-1988"></span><span>        </span><span class="hs-comment">-- Rejecting existentials means we don't have to worry about</span><span>
</span><span id="line-1989"></span><span>        </span><span class="hs-comment">-- freshening and substituting type variables</span><span>
</span><span id="line-1990"></span><span>        </span><span class="hs-comment">-- (See &quot;GHC.Type.Id.Make.dataConArgUnpack&quot;)</span><span>
</span><span id="line-1991"></span><span>
</span><span id="line-1992"></span><span id="splitDataProductType_maybe"><span class="annot"><span class="annottext">splitDataProductType_maybe :: Type -&gt; Maybe (TyCon, [Type], DataCon, [Scaled Type])
</span><a href="GHC.Core.DataCon.html#splitDataProductType_maybe"><span class="hs-identifier hs-var hs-var">splitDataProductType_maybe</span></a></span></span><span> </span><span id="local-6989586621681629135"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681629135"><span class="hs-identifier hs-var">ty</span></a></span></span><span>
</span><span id="line-1993"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681629136"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681629136"><span class="hs-identifier hs-var">tycon</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681629137"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681629137"><span class="hs-identifier hs-var">ty_args</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Type -&gt; Maybe (TyCon, [Type])
Type -&gt; Maybe (TyCon, [Type])
</span><a href="GHC.Core.Type.html#splitTyConApp_maybe"><span class="hs-identifier hs-var">splitTyConApp_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681629135"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1994"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681629139"><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681629139"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Maybe DataCon
</span><a href="GHC.Core.TyCon.html#tyConSingleDataCon_maybe"><span class="hs-identifier hs-var">tyConSingleDataCon_maybe</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681629136"><span class="hs-identifier hs-var">tycon</span></a></span><span>
</span><span id="line-1995"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[TyVar] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#null/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DataCon -&gt; [TyVar]
</span><a href="GHC.Core.DataCon.html#dataConExTyCoVars"><span class="hs-identifier hs-var">dataConExTyCoVars</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681629139"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- no existentials! See above</span><span>
</span><span id="line-1996"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TyCon, [Type], DataCon, [Scaled Type])
-&gt; Maybe (TyCon, [Type], DataCon, [Scaled Type])
forall a. a -&gt; Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681629136"><span class="hs-identifier hs-var">tycon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681629137"><span class="hs-identifier hs-var">ty_args</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681629139"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; [Type] -&gt; [Scaled Type]
</span><a href="GHC.Core.DataCon.html#dataConInstArgTys"><span class="hs-identifier hs-var">dataConInstArgTys</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="#local-6989586621681629139"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681629137"><span class="hs-identifier hs-var">ty_args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1997"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1998"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (TyCon, [Type], DataCon, [Scaled Type])
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1999"></span></pre></body></html>