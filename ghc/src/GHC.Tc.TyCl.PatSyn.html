<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-4"></span><span>
</span><span id="line-5"></span><span class="hs-comment">{-
(c) The University of Glasgow 2006
(c) The GRASP/AQUA Project, Glasgow University, 1992-1998

-}</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span class="annot"><span class="hs-comment">-- | Typechecking pattern synonym declarations</span></span><span>
</span><span id="line-12"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">GHC.Tc.TyCl.PatSyn</span><span>
</span><span id="line-13"></span><span>   </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Tc.TyCl.PatSyn.html#tcPatSynDecl"><span class="hs-identifier">tcPatSynDecl</span></a></span><span>
</span><span id="line-14"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.TyCl.PatSyn.html#tcPatSynBuilderBind"><span class="hs-identifier">tcPatSynBuilderBind</span></a></span><span>
</span><span id="line-15"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.TyCl.PatSyn.html#patSynBuilderOcc"><span class="hs-identifier">patSynBuilderOcc</span></a></span><span>
</span><span id="line-16"></span><span>   </span><span class="hs-special">)</span><span>
</span><span id="line-17"></span><span class="hs-keyword">where</span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Hs.html"><span class="hs-identifier">GHC.Hs</span></a></span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Gen.Pat.html"><span class="hs-identifier">GHC.Tc.Gen.Pat</span></a></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Env.html"><span class="hs-identifier">GHC.Tc.Utils.Env</span></a></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcMType.html"><span class="hs-identifier">GHC.Tc.Utils.TcMType</span></a></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Zonk.html"><span class="hs-identifier">GHC.Tc.Utils.Zonk</span></a></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Errors.Types.html"><span class="hs-identifier">GHC.Tc.Errors.Types</span></a></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Monad.html"><span class="hs-identifier">GHC.Tc.Utils.Monad</span></a></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Gen.Sig.html"><span class="hs-identifier">GHC.Tc.Gen.Sig</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Tc.Gen.Sig.html#TcPragEnv"><span class="hs-identifier">TcPragEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Gen.Sig.html#emptyPragEnv"><span class="hs-identifier">emptyPragEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Gen.Sig.html#completeSigFromId"><span class="hs-identifier">completeSigFromId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Gen.Sig.html#lookupPragEnv"><span class="hs-identifier">lookupPragEnv</span></a></span><span>
</span><span id="line-30"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Gen.Sig.html#addInlinePrags"><span class="hs-identifier">addInlinePrags</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Gen.Sig.html#addInlinePragArity"><span class="hs-identifier">addInlinePragArity</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Solver.html"><span class="hs-identifier">GHC.Tc.Solver</span></a></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.Unify.html"><span class="hs-identifier">GHC.Tc.Utils.Unify</span></a></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html"><span class="hs-identifier">GHC.Tc.Utils.TcType</span></a></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html"><span class="hs-identifier">GHC.Tc.Types.Evidence</span></a></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Origin.html"><span class="hs-identifier">GHC.Tc.Types.Origin</span></a></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.TyCl.Build.html"><span class="hs-identifier">GHC.Tc.TyCl.Build</span></a></span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Multiplicity.html"><span class="hs-identifier">GHC.Core.Multiplicity</span></a></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Type.html"><span class="hs-identifier">GHC.Core.Type</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier">typeKind</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Tidy.html#tidyForAllTyBinders"><span class="hs-identifier">tidyForAllTyBinders</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Tidy.html#tidyTypes"><span class="hs-identifier">tidyTypes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Tidy.html#tidyType"><span class="hs-identifier">tidyType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Type.html#isManyTy"><span class="hs-identifier">isManyTy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Type.html#mkTYPEapp"><span class="hs-identifier">mkTYPEapp</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Subst.html"><span class="hs-identifier">GHC.Core.TyCo.Subst</span></a></span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Subst.html#extendTvSubstWithClone"><span class="hs-identifier">extendTvSubstWithClone</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Predicate.html"><span class="hs-identifier">GHC.Core.Predicate</span></a></span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Types.Prim.html"><span class="hs-identifier">GHC.Builtin.Types.Prim</span></a></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Error.html"><span class="hs-identifier">GHC.Types.Error</span></a></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.html"><span class="hs-identifier">GHC.Types.Name</span></a></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Name.Set.html"><span class="hs-identifier">GHC.Types.Name.Set</span></a></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html"><span class="hs-identifier">GHC.Types.SrcLoc</span></a></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.PatSyn.html"><span class="hs-identifier">GHC.Core.PatSyn</span></a></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html"><span class="hs-identifier">GHC.Data.FastString</span></a></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.html"><span class="hs-identifier">GHC.Types.Var</span></a></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html"><span class="hs-identifier">GHC.Types.Var.Env</span></a></span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#emptyTidyEnv"><span class="hs-identifier">emptyTidyEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.Env.html#mkInScopeSetList"><span class="hs-identifier">mkInScopeSetList</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Id.html"><span class="hs-identifier">GHC.Types.Id</span></a></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html"><span class="hs-identifier">GHC.Types.Id.Info</span></a></span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.Id.Info.html#RecSelParent"><span class="hs-identifier">RecSelParent</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.Gen.Bind.html"><span class="hs-identifier">GHC.Tc.Gen.Bind</span></a></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html"><span class="hs-identifier">GHC.Types.Basic</span></a></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Types.html"><span class="hs-identifier">GHC.Builtin.Types</span></a></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html"><span class="hs-identifier">GHC.Types.Var.Set</span></a></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Tc.TyCl.Utils.html"><span class="hs-identifier">GHC.Tc.TyCl.Utils</span></a></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.ConLike.html"><span class="hs-identifier">GHC.Core.ConLike</span></a></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.FieldLabel.html"><span class="hs-identifier">GHC.Types.FieldLabel</span></a></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.Env.html"><span class="hs-identifier">GHC.Rename.Env</span></a></span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Rename.Utils.html"><span class="hs-identifier">GHC.Rename.Utils</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Rename.Utils.html#wrapGenSpan"><span class="hs-identifier">wrapGenSpan</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html"><span class="hs-identifier">GHC.Data.Bag</span></a></span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html"><span class="hs-identifier">GHC.Driver.Session</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier">getDynFlags</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Driver.Session.html#xopt_FieldSelectors"><span class="hs-identifier">xopt_FieldSelectors</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Maybe.html#/Data.Maybe.html"><span class="hs-identifier">Data.Maybe</span></a></span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Maybe.html#mapMaybe/Data.Maybe.html#mapMaybe"><span class="hs-identifier">mapMaybe</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Control.Monad.html#/Control.Monad.html"><span class="hs-identifier">Control.Monad</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Control.Monad.html#zipWithM/Control.Monad.html#zipWithM"><span class="hs-identifier">zipWithM</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.List.html#/Data.List.html"><span class="hs-identifier">Data.List</span></a></span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.OldList.html#partition/Data.OldList.html#partition"><span class="hs-identifier">partition</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Traversable.html#mapAccumL/Data.Traversable.html#mapAccumL"><span class="hs-identifier">mapAccumL</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
                    Type checking a pattern synonym
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-79"></span><span>
</span><span id="line-80"></span><span class="annot"><a href="GHC.Tc.TyCl.PatSyn.html#tcPatSynDecl"><span class="hs-identifier hs-type">tcPatSynDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatSynBind"><span class="hs-identifier hs-type">PatSynBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcSigFun"><span class="hs-identifier hs-type">TcSigFun</span></a></span><span>
</span><span id="line-82"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Gen.Sig.html#TcPragEnv"><span class="hs-identifier hs-type">TcPragEnv</span></a></span><span> </span><span class="hs-comment">-- See Note [Pragmas for pattern synonyms]</span><span>
</span><span id="line-83"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcGblEnv"><span class="hs-identifier hs-type">TcGblEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span id="tcPatSynDecl"><span class="annot"><span class="annottext">tcPatSynDecl :: LocatedA (PatSynBind GhcRn GhcRn)
-&gt; TcSigFun -&gt; TcPragEnv -&gt; TcM (LHsBinds GhcTc, TcGblEnv)
</span><a href="GHC.Tc.TyCl.PatSyn.html#tcPatSynDecl"><span class="hs-identifier hs-var hs-var">tcPatSynDecl</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682048831"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682048831"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682048832"><span class="annot"><span class="annottext">psb :: PatSynBind GhcRn GhcRn
</span><a href="#local-6989586621682048832"><span class="hs-identifier hs-var">psb</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PSB"><span class="hs-identifier hs-type">PSB</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">psb_id :: forall idL idR. PatSynBind idL idR -&gt; LIdP idL
</span><a href="Language.Haskell.Syntax.Binds.html#psb_id"><span class="hs-identifier hs-var">psb_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682048835"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682048835"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621682048836"><span class="annot"><span class="annottext">TcSigFun
</span><a href="#local-6989586621682048836"><span class="hs-identifier hs-var">sig_fn</span></a></span></span><span> </span><span id="local-6989586621682048837"><span class="annot"><span class="annottext">TcPragEnv
</span><a href="#local-6989586621682048837"><span class="hs-identifier hs-var">prag_fn</span></a></span></span><span>
</span><span id="line-85"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; TcM (LHsBinds GhcTc, TcGblEnv) -&gt; TcM (LHsBinds GhcTc, TcGblEnv)
forall ann a. SrcSpanAnn' ann -&gt; TcRn a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#setSrcSpanA"><span class="hs-identifier hs-var">setSrcSpanA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682048831"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(TcM (LHsBinds GhcTc, TcGblEnv) -&gt; TcM (LHsBinds GhcTc, TcGblEnv))
-&gt; TcM (LHsBinds GhcTc, TcGblEnv) -&gt; TcM (LHsBinds GhcTc, TcGblEnv)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-86"></span><span>    </span><span class="annot"><span class="annottext">SDoc
-&gt; TcM (LHsBinds GhcTc, TcGblEnv) -&gt; TcM (LHsBinds GhcTc, TcGblEnv)
forall a. SDoc -&gt; TcM a -&gt; TcM a
</span><a href="GHC.Tc.Utils.Monad.html#addErrCtxt"><span class="hs-identifier hs-var">addErrCtxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;In the declaration for pattern synonym&quot;</span></span><span>
</span><span id="line-87"></span><span>                </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682048835"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TcM (LHsBinds GhcTc, TcGblEnv) -&gt; TcM (LHsBinds GhcTc, TcGblEnv))
-&gt; TcM (LHsBinds GhcTc, TcGblEnv) -&gt; TcM (LHsBinds GhcTc, TcGblEnv)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-88"></span><span>    </span><span class="annot"><span class="annottext">TcM (LHsBinds GhcTc, TcGblEnv)
-&gt; TcM (LHsBinds GhcTc, TcGblEnv) -&gt; TcM (LHsBinds GhcTc, TcGblEnv)
forall r. TcRn r -&gt; TcRn r -&gt; TcRn r
</span><a href="GHC.Tc.Utils.Monad.html#recoverM"><span class="hs-identifier hs-var">recoverM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatSynBind GhcRn GhcRn -&gt; TcM (LHsBinds GhcTc, TcGblEnv)
</span><a href="GHC.Tc.TyCl.PatSyn.html#recoverPSB"><span class="hs-identifier hs-var">recoverPSB</span></a></span><span> </span><span class="annot"><span class="annottext">PatSynBind GhcRn GhcRn
</span><a href="#local-6989586621682048832"><span class="hs-identifier hs-var">psb</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TcM (LHsBinds GhcTc, TcGblEnv) -&gt; TcM (LHsBinds GhcTc, TcGblEnv))
-&gt; TcM (LHsBinds GhcTc, TcGblEnv) -&gt; TcM (LHsBinds GhcTc, TcGblEnv)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-89"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcSigFun
</span><a href="#local-6989586621682048836"><span class="hs-identifier hs-var">sig_fn</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682048835"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-90"></span><span>      </span><span class="annot"><span class="annottext">Maybe TcSigInfo
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PatSynBind GhcRn GhcRn
-&gt; TcPragEnv -&gt; TcM (LHsBinds GhcTc, TcGblEnv)
</span><a href="GHC.Tc.TyCl.PatSyn.html#tcInferPatSynDecl"><span class="hs-identifier hs-var">tcInferPatSynDecl</span></a></span><span> </span><span class="annot"><span class="annottext">PatSynBind GhcRn GhcRn
</span><a href="#local-6989586621682048832"><span class="hs-identifier hs-var">psb</span></a></span><span> </span><span class="annot"><span class="annottext">TcPragEnv
</span><a href="#local-6989586621682048837"><span class="hs-identifier hs-var">prag_fn</span></a></span><span>
</span><span id="line-91"></span><span>      </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Tc.Types.html#TcPatSynSig"><span class="hs-identifier hs-type">TcPatSynSig</span></a></span><span> </span><span id="local-6989586621682048848"><span class="annot"><span class="annottext">TcPatSynInfo
</span><a href="#local-6989586621682048848"><span class="hs-identifier hs-var">tpsi</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PatSynBind GhcRn GhcRn
-&gt; TcPatSynInfo -&gt; TcPragEnv -&gt; TcM (LHsBinds GhcTc, TcGblEnv)
</span><a href="GHC.Tc.TyCl.PatSyn.html#tcCheckPatSynDecl"><span class="hs-identifier hs-var">tcCheckPatSynDecl</span></a></span><span> </span><span class="annot"><span class="annottext">PatSynBind GhcRn GhcRn
</span><a href="#local-6989586621682048832"><span class="hs-identifier hs-var">psb</span></a></span><span> </span><span class="annot"><span class="annottext">TcPatSynInfo
</span><a href="#local-6989586621682048848"><span class="hs-identifier hs-var">tpsi</span></a></span><span> </span><span class="annot"><span class="annottext">TcPragEnv
</span><a href="#local-6989586621682048837"><span class="hs-identifier hs-var">prag_fn</span></a></span><span>
</span><span id="line-92"></span><span>      </span><span class="annot"><span class="annottext">Maybe TcSigInfo
</span><span class="hs-identifier">_</span></span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
-&gt; TcRn
     (Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)), TcGblEnv)
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tcPatSynDecl&quot;</span></span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span class="annot"><a href="GHC.Tc.TyCl.PatSyn.html#recoverPSB"><span class="hs-identifier hs-type">recoverPSB</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatSynBind"><span class="hs-identifier hs-type">PatSynBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-95"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcGblEnv"><span class="hs-identifier hs-type">TcGblEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span class="hs-comment">-- See Note [Pattern synonym error recovery]</span><span>
</span><span id="line-97"></span><span id="recoverPSB"><span class="annot"><span class="annottext">recoverPSB :: PatSynBind GhcRn GhcRn -&gt; TcM (LHsBinds GhcTc, TcGblEnv)
</span><a href="GHC.Tc.TyCl.PatSyn.html#recoverPSB"><span class="hs-identifier hs-var hs-var">recoverPSB</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PSB"><span class="hs-identifier hs-type">PSB</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">psb_id :: forall idL idR. PatSynBind idL idR -&gt; LIdP idL
</span><a href="Language.Haskell.Syntax.Binds.html#psb_id"><span class="hs-identifier hs-var">psb_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682048851"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682048851"><span class="hs-identifier hs-var">name</span></a></span></span><span>
</span><span id="line-98"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psb_args :: forall idL idR. PatSynBind idL idR -&gt; HsPatSynDetails idR
</span><a href="Language.Haskell.Syntax.Binds.html#psb_args"><span class="hs-identifier hs-var">psb_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682048853"><span class="annot"><span class="annottext">HsPatSynDetails GhcRn
</span><a href="#local-6989586621682048853"><span class="hs-identifier hs-var">details</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-99"></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682048854"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682048854"><span class="hs-identifier hs-var">matcher_name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; (OccName -&gt; OccName) -&gt; TcRnIf TcGblEnv TcLclEnv Name
forall m n. Name -&gt; (OccName -&gt; OccName) -&gt; TcRnIf m n Name
</span><a href="GHC.Tc.TyCl.Build.html#newImplicitBinder"><span class="hs-identifier hs-var">newImplicitBinder</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682048851"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">OccName -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#mkMatcherOcc"><span class="hs-identifier hs-var">mkMatcherOcc</span></a></span><span>
</span><span id="line-100"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682048857"><span class="annot"><span class="annottext">placeholder :: TyThing
</span><a href="#local-6989586621682048857"><span class="hs-identifier hs-var hs-var">placeholder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConLike -&gt; TyThing
</span><a href="GHC.Types.TyThing.html#AConLike"><span class="hs-identifier hs-var">AConLike</span></a></span><span> </span><span class="annot"><span class="annottext">(ConLike -&gt; TyThing) -&gt; ConLike -&gt; TyThing
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">PatSyn -&gt; ConLike
</span><a href="GHC.Core.ConLike.html#PatSynCon"><span class="hs-identifier hs-var">PatSynCon</span></a></span><span> </span><span class="annot"><span class="annottext">(PatSyn -&gt; ConLike) -&gt; PatSyn -&gt; ConLike
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-101"></span><span>                          </span><span class="annot"><span class="annottext">Name -&gt; PatSyn
</span><a href="#local-6989586621682048860"><span class="hs-identifier hs-var">mk_placeholder</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682048854"><span class="hs-identifier hs-var">matcher_name</span></a></span><span>
</span><span id="line-102"></span><span>      </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682048861"><span class="annot"><span class="annottext">TcGblEnv
</span><a href="#local-6989586621682048861"><span class="hs-identifier hs-var">gbl_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[TyThing] -&gt; TcM TcGblEnv -&gt; TcM TcGblEnv
forall r. [TyThing] -&gt; TcM r -&gt; TcM r
</span><a href="GHC.Tc.Utils.Env.html#tcExtendGlobalEnv"><span class="hs-identifier hs-var">tcExtendGlobalEnv</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621682048857"><span class="hs-identifier hs-var">placeholder</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">TcM TcGblEnv
forall gbl lcl. TcRnIf gbl lcl gbl
</span><a href="GHC.Tc.Utils.Monad.html#getGblEnv"><span class="hs-identifier hs-var">getGblEnv</span></a></span><span>
</span><span id="line-103"></span><span>      </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)), TcGblEnv)
-&gt; TcRn
     (Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)), TcGblEnv)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
forall a. Bag a
</span><a href="GHC.Data.Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TcGblEnv
</span><a href="#local-6989586621682048861"><span class="hs-identifier hs-var">gbl_env</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-104"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-105"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621682048865"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621682048865"><span class="hs-identifier hs-var">_arg_names</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682048866"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682048866"><span class="hs-identifier hs-var">is_infix</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsPatSynDetails GhcRn -&gt; ([Name], Bool)
</span><a href="GHC.Tc.TyCl.PatSyn.html#collectPatSynArgInfo"><span class="hs-identifier hs-var">collectPatSynArgInfo</span></a></span><span> </span><span class="annot"><span class="annottext">HsPatSynDetails GhcRn
</span><a href="#local-6989586621682048853"><span class="hs-identifier hs-var">details</span></a></span><span>
</span><span id="line-106"></span><span>    </span><span id="local-6989586621682048860"><span class="annot"><span class="annottext">mk_placeholder :: Name -&gt; PatSyn
</span><a href="#local-6989586621682048860"><span class="hs-identifier hs-var hs-var">mk_placeholder</span></a></span></span><span> </span><span id="local-6989586621682048868"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682048868"><span class="hs-identifier hs-var">matcher_name</span></a></span></span><span>
</span><span id="line-107"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Bool
-&gt; ([VarBndr Id Specificity], [Kind])
-&gt; ([VarBndr Id Specificity], [Kind])
-&gt; [Kind]
-&gt; Kind
-&gt; PatSynMatcher
-&gt; PatSynBuilder
-&gt; [FieldLabel]
-&gt; PatSyn
</span><a href="GHC.Core.PatSyn.html#mkPatSyn"><span class="hs-identifier hs-var">mkPatSyn</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682048851"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682048866"><span class="hs-identifier hs-var">is_infix</span></a></span><span>
</span><span id="line-108"></span><span>                        </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="annottext">Specificity -&gt; Id -&gt; VarBndr Id Specificity
forall vis. vis -&gt; Id -&gt; VarBndr Id vis
</span><a href="GHC.Types.Var.html#mkTyVarBinder"><span class="hs-identifier hs-var">mkTyVarBinder</span></a></span><span> </span><span class="annot"><span class="annottext">Specificity
</span><a href="GHC.Types.Var.html#SpecifiedSpec"><span class="hs-identifier hs-var">SpecifiedSpec</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="GHC.Builtin.Types.Prim.html#alphaTyVar"><span class="hs-identifier hs-var">alphaTyVar</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-109"></span><span>                        </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- Arg tys</span><span>
</span><span id="line-110"></span><span>                        </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.Prim.html#alphaTy"><span class="hs-identifier hs-var">alphaTy</span></a></span><span>
</span><span id="line-111"></span><span>                        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682048868"><span class="hs-identifier hs-var">matcher_name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682048874"><span class="hs-identifier hs-var">matcher_ty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PatSynBuilder
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-112"></span><span>                        </span><span class="hs-special">[</span><span class="hs-special">]</span><span>  </span><span class="hs-comment">-- Field labels</span><span>
</span><span id="line-113"></span><span>       </span><span class="hs-keyword">where</span><span>
</span><span id="line-114"></span><span>         </span><span class="hs-comment">-- The matcher_id is used only by the desugarer, so actually</span><span>
</span><span id="line-115"></span><span>         </span><span class="hs-comment">-- and error-thunk would probably do just as well here.</span><span>
</span><span id="line-116"></span><span>         </span><span id="local-6989586621682048874"><span class="annot"><span class="annottext">matcher_ty :: Kind
</span><a href="#local-6989586621682048874"><span class="hs-identifier hs-var hs-var">matcher_ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Id] -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.Type.html#mkSpecForAllTys"><span class="hs-identifier hs-var">mkSpecForAllTys</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Id
</span><a href="GHC.Builtin.Types.Prim.html#alphaTyVar"><span class="hs-identifier hs-var">alphaTyVar</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.Prim.html#alphaTy"><span class="hs-identifier hs-var">alphaTy</span></a></span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span class="hs-comment">{- Note [Pattern synonym error recovery]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
If type inference for a pattern synonym fails, we can't continue with
the rest of tc_patsyn_finish, because we may get knock-on errors, or
even a crash.  E.g. from
   pattern What = True :: Maybe
we get a kind error; and we must stop right away (#15289).

We stop if there are /any/ unsolved constraints, not just insoluble
ones; because pattern synonyms are top-level things, we will never
solve them later if we can't solve them now.  And if we were to carry
on, tc_patsyn_finish does zonkTcTypeToType, which defaults any
unsolved unification variables to Any, which confuses the error
reporting no end (#15685).

So we use simplifyTop to completely solve the constraint, report
any errors, throw an exception.

Even in the event of such an error we can recover and carry on, just
as we do for value bindings, provided we plug in placeholder for the
pattern synonym: see recoverPSB.  The goal of the placeholder is not
to cause a raft of follow-on errors.  I've used the simplest thing for
now, but we might need to elaborate it a bit later.  (e.g.  I've given
it zero args, which may cause knock-on errors if it is used in a
pattern.) But it'll do for now.

-}</span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span class="annot"><a href="GHC.Tc.TyCl.PatSyn.html#tcInferPatSynDecl"><span class="hs-identifier hs-type">tcInferPatSynDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatSynBind"><span class="hs-identifier hs-type">PatSynBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-147"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Gen.Sig.html#TcPragEnv"><span class="hs-identifier hs-type">TcPragEnv</span></a></span><span>
</span><span id="line-148"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcGblEnv"><span class="hs-identifier hs-type">TcGblEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span id="tcInferPatSynDecl"><span class="annot"><span class="annottext">tcInferPatSynDecl :: PatSynBind GhcRn GhcRn
-&gt; TcPragEnv -&gt; TcM (LHsBinds GhcTc, TcGblEnv)
</span><a href="GHC.Tc.TyCl.PatSyn.html#tcInferPatSynDecl"><span class="hs-identifier hs-var hs-var">tcInferPatSynDecl</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PSB"><span class="hs-identifier hs-type">PSB</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">psb_id :: forall idL idR. PatSynBind idL idR -&gt; LIdP idL
</span><a href="Language.Haskell.Syntax.Binds.html#psb_id"><span class="hs-identifier hs-var">psb_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682048876"><span class="annot"><span class="annottext">lname :: LIdP GhcRn
</span><a href="#local-6989586621682048876"><span class="hs-identifier hs-var">lname</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682048877"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682048877"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psb_args :: forall idL idR. PatSynBind idL idR -&gt; HsPatSynDetails idR
</span><a href="Language.Haskell.Syntax.Binds.html#psb_args"><span class="hs-identifier hs-var">psb_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682048878"><span class="annot"><span class="annottext">HsPatSynDetails GhcRn
</span><a href="#local-6989586621682048878"><span class="hs-identifier hs-var">details</span></a></span></span><span>
</span><span id="line-150"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psb_def :: forall idL idR. PatSynBind idL idR -&gt; LPat idR
</span><a href="Language.Haskell.Syntax.Binds.html#psb_def"><span class="hs-identifier hs-var">psb_def</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682048880"><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621682048880"><span class="hs-identifier hs-var">lpat</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psb_dir :: forall idL idR. PatSynBind idL idR -&gt; HsPatSynDir idR
</span><a href="Language.Haskell.Syntax.Binds.html#psb_dir"><span class="hs-identifier hs-var">psb_dir</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682048882"><span class="annot"><span class="annottext">HsPatSynDir GhcRn
</span><a href="#local-6989586621682048882"><span class="hs-identifier hs-var">dir</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-151"></span><span>                  </span><span id="local-6989586621682048883"><span class="annot"><span class="annottext">TcPragEnv
</span><a href="#local-6989586621682048883"><span class="hs-identifier hs-var">prag_fn</span></a></span></span><span>
</span><span id="line-152"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tcInferPatSynDecl {&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; TcRn ()) -&gt; SDoc -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682048877"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-153"></span><span>
</span><span id="line-154"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682048885"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621682048885"><span class="hs-identifier hs-var">arg_names</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682048886"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682048886"><span class="hs-identifier hs-var">is_infix</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsPatSynDetails GhcRn -&gt; ([Name], Bool)
</span><a href="GHC.Tc.TyCl.PatSyn.html#collectPatSynArgInfo"><span class="hs-identifier hs-var">collectPatSynArgInfo</span></a></span><span> </span><span class="annot"><span class="annottext">HsPatSynDetails GhcRn
</span><a href="#local-6989586621682048878"><span class="hs-identifier hs-var">details</span></a></span><span>
</span><span id="line-155"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682048887"><span class="annot"><span class="annottext">TcLevel
</span><a href="#local-6989586621682048887"><span class="hs-identifier hs-var">tclvl</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682048888"><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621682048888"><span class="hs-identifier hs-var">wanted</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621682048889"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621682048889"><span class="hs-identifier hs-var">lpat'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682048890"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682048890"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621682048891"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682048891"><span class="hs-identifier hs-var">pat_ty</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-156"></span><span>            </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcM ((GenLocated SrcSpanAnnA (Pat GhcTc), [Id]), Kind)
-&gt; TcM
     (TcLevel, WantedConstraints,
      ((GenLocated SrcSpanAnnA (Pat GhcTc), [Id]), Kind))
forall a. TcM a -&gt; TcM (TcLevel, WantedConstraints, a)
</span><a href="GHC.Tc.Utils.Monad.html#pushLevelAndCaptureConstraints"><span class="hs-identifier hs-var">pushLevelAndCaptureConstraints</span></a></span><span>      </span><span class="annot"><span class="annottext">(TcM ((GenLocated SrcSpanAnnA (Pat GhcTc), [Id]), Kind)
 -&gt; TcM
      (TcLevel, WantedConstraints,
       ((GenLocated SrcSpanAnnA (Pat GhcTc), [Id]), Kind)))
-&gt; TcM ((GenLocated SrcSpanAnnA (Pat GhcTc), [Id]), Kind)
-&gt; TcM
     (TcLevel, WantedConstraints,
      ((GenLocated SrcSpanAnnA (Pat GhcTc), [Id]), Kind))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-157"></span><span>               </span><span class="annot"><span class="annottext">FixedRuntimeRepContext
-&gt; HsMatchContext GhcTc
-&gt; LPat GhcRn
-&gt; TcM [Id]
-&gt; TcM ((LPat GhcTc, [Id]), Kind)
forall a.
FixedRuntimeRepContext
-&gt; HsMatchContext GhcTc
-&gt; LPat GhcRn
-&gt; TcM a
-&gt; TcM ((LPat GhcTc, a), Kind)
</span><a href="GHC.Tc.Gen.Pat.html#tcInferPat"><span class="hs-identifier hs-var">tcInferPat</span></a></span><span> </span><span class="annot"><span class="annottext">FixedRuntimeRepContext
</span><a href="GHC.Tc.Types.Origin.html#FRRPatSynArg"><span class="hs-identifier hs-var">FRRPatSynArg</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContext GhcTc
forall p. HsMatchContext p
</span><a href="Language.Haskell.Syntax.Expr.html#PatSyn"><span class="hs-identifier hs-var">PatSyn</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621682048880"><span class="hs-identifier hs-var">lpat</span></a></span><span> </span><span class="annot"><span class="annottext">(TcM [Id] -&gt; TcM ((LPat GhcTc, [Id]), Kind))
-&gt; TcM [Id] -&gt; TcM ((LPat GhcTc, [Id]), Kind)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-158"></span><span>               </span><span class="annot"><span class="annottext">(Name -&gt; IOEnv (Env TcGblEnv TcLclEnv) Id) -&gt; [Name] -&gt; TcM [Id]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="../../base-4.18.3.0/src/Data.Traversable.html#mapM/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; IOEnv (Env TcGblEnv TcLclEnv) Id
</span><a href="GHC.Tc.Utils.Env.html#tcLookupId"><span class="hs-identifier hs-var">tcLookupId</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621682048885"><span class="hs-identifier hs-var">arg_names</span></a></span><span>
</span><span id="line-159"></span><span>
</span><span id="line-160"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682048898"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682048898"><span class="hs-identifier hs-var">ex_tvs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682048899"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682048899"><span class="hs-identifier hs-var">prov_dicts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LPat GhcTc -&gt; ([Id], [Id])
</span><a href="GHC.Tc.TyCl.PatSyn.html#tcCollectEx"><span class="hs-identifier hs-var">tcCollectEx</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621682048889"><span class="hs-identifier hs-var">lpat'</span></a></span><span>
</span><span id="line-161"></span><span>
</span><span id="line-162"></span><span>             </span><span id="local-6989586621682048901"><span class="annot"><span class="annottext">named_taus :: [(Name, Kind)]
</span><a href="#local-6989586621682048901"><span class="hs-identifier hs-var hs-var">named_taus</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682048877"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682048891"><span class="hs-identifier hs-var">pat_ty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Name, Kind) -&gt; [(Name, Kind)] -&gt; [(Name, Kind)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">(Id -&gt; (Name, Kind)) -&gt; [Id] -&gt; [(Name, Kind)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; (Name, Kind)
</span><a href="#local-6989586621682048902"><span class="hs-identifier hs-var">mk_named_tau</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682048890"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-163"></span><span>             </span><span id="local-6989586621682048902"><span class="annot"><span class="annottext">mk_named_tau :: Id -&gt; (Name, Kind)
</span><a href="#local-6989586621682048902"><span class="hs-identifier hs-var hs-var">mk_named_tau</span></a></span></span><span> </span><span id="local-6989586621682048903"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682048903"><span class="hs-identifier hs-var">arg</span></a></span></span><span>
</span><span id="line-164"></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682048903"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Id] -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.Type.html#mkSpecForAllTys"><span class="hs-identifier hs-var">mkSpecForAllTys</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682048898"><span class="hs-identifier hs-var">ex_tvs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Types.Var.html#varType"><span class="hs-identifier hs-var">varType</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682048903"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-165"></span><span>               </span><span class="hs-comment">-- The mkSpecForAllTys is important (#14552), albeit</span><span>
</span><span id="line-166"></span><span>               </span><span class="hs-comment">-- slightly artificial (there is no variable with this funny type).</span><span>
</span><span id="line-167"></span><span>               </span><span class="hs-comment">-- We do not want to quantify over variable (alpha::k)</span><span>
</span><span id="line-168"></span><span>               </span><span class="hs-comment">-- that mention the existentially-bound type variables</span><span>
</span><span id="line-169"></span><span>               </span><span class="hs-comment">-- ex_tvs in its kind k.</span><span>
</span><span id="line-170"></span><span>               </span><span class="hs-comment">-- See Note [Type variables whose kind is captured]</span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621682048906"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682048906"><span class="hs-identifier hs-var">univ_tvs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682048907"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682048907"><span class="hs-identifier hs-var">req_dicts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682048908"><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621682048908"><span class="hs-identifier hs-var">ev_binds</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621682048909"><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621682048909"><span class="hs-identifier hs-var">residual</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-173"></span><span>               </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcM ([Id], [Id], TcEvBinds, Bool)
-&gt; TcM (([Id], [Id], TcEvBinds, Bool), WantedConstraints)
forall a. TcM a -&gt; TcM (a, WantedConstraints)
</span><a href="GHC.Tc.Utils.Monad.html#captureConstraints"><span class="hs-identifier hs-var">captureConstraints</span></a></span><span> </span><span class="annot"><span class="annottext">(TcM ([Id], [Id], TcEvBinds, Bool)
 -&gt; TcM (([Id], [Id], TcEvBinds, Bool), WantedConstraints))
-&gt; TcM ([Id], [Id], TcEvBinds, Bool)
-&gt; TcM (([Id], [Id], TcEvBinds, Bool), WantedConstraints)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-174"></span><span>                  </span><span class="annot"><span class="annottext">TcLevel
-&gt; InferMode
-&gt; [TcIdSigInst]
-&gt; [(Name, Kind)]
-&gt; WantedConstraints
-&gt; TcM ([Id], [Id], TcEvBinds, Bool)
</span><a href="GHC.Tc.Solver.html#simplifyInfer"><span class="hs-identifier hs-var">simplifyInfer</span></a></span><span> </span><span class="annot"><span class="annottext">TcLevel
</span><a href="#local-6989586621682048887"><span class="hs-identifier hs-var">tclvl</span></a></span><span> </span><span class="annot"><span class="annottext">InferMode
</span><a href="GHC.Tc.Solver.html#NoRestrictions"><span class="hs-identifier hs-var">NoRestrictions</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[(Name, Kind)]
</span><a href="#local-6989586621682048901"><span class="hs-identifier hs-var">named_taus</span></a></span><span> </span><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621682048888"><span class="hs-identifier hs-var">wanted</span></a></span><span>
</span><span id="line-175"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682048913"><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621682048913"><span class="hs-identifier hs-var">top_ev_binds</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcM (Bag EvBind) -&gt; TcM (Bag EvBind)
forall r. TcM r -&gt; TcM r
</span><a href="GHC.Tc.Utils.Monad.html#checkNoErrs"><span class="hs-identifier hs-var">checkNoErrs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WantedConstraints -&gt; TcM (Bag EvBind)
</span><a href="GHC.Tc.Solver.html#simplifyTop"><span class="hs-identifier hs-var">simplifyTop</span></a></span><span> </span><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621682048909"><span class="hs-identifier hs-var">residual</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-176"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bag EvBind
-&gt; TcRn
     (Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)), TcGblEnv)
-&gt; TcRn
     (Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)), TcGblEnv)
forall a. Bag EvBind -&gt; TcM a -&gt; TcM a
</span><a href="GHC.Tc.Utils.Monad.html#addTopEvBinds"><span class="hs-identifier hs-var">addTopEvBinds</span></a></span><span> </span><span class="annot"><span class="annottext">Bag EvBind
</span><a href="#local-6989586621682048913"><span class="hs-identifier hs-var">top_ev_binds</span></a></span><span> </span><span class="annot"><span class="annottext">(TcRn
   (Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)), TcGblEnv)
 -&gt; TcRn
      (Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)), TcGblEnv))
-&gt; TcRn
     (Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)), TcGblEnv)
-&gt; TcRn
     (Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)), TcGblEnv)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682048917"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682048917"><span class="hs-identifier hs-var">prov_dicts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) Id) -&gt; [Id] -&gt; TcM [Id]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="../../base-4.18.3.0/src/Data.Traversable.html#mapM/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) Id
</span><a href="GHC.Tc.Utils.TcMType.html#zonkId"><span class="hs-identifier hs-var">zonkId</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682048899"><span class="hs-identifier hs-var">prov_dicts</span></a></span><span>
</span><span id="line-179"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682048919"><span class="annot"><span class="annottext">filtered_prov_dicts :: [Id]
</span><a href="#local-6989586621682048919"><span class="hs-identifier hs-var hs-var">filtered_prov_dicts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Kind) -&gt; [Id] -&gt; [Id]
forall a. (a -&gt; Kind) -&gt; [a] -&gt; [a]
</span><a href="GHC.Tc.Utils.TcType.html#mkMinimalBySCs"><span class="hs-identifier hs-var">mkMinimalBySCs</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Tc.Utils.TcType.html#evVarPred"><span class="hs-identifier hs-var">evVarPred</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682048917"><span class="hs-identifier hs-var">prov_dicts</span></a></span><span>
</span><span id="line-180"></span><span>             </span><span class="hs-comment">-- Filtering: see Note [Remove redundant provided dicts]</span><span>
</span><span id="line-181"></span><span>             </span><span class="hs-special">(</span><span id="local-6989586621682048922"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682048922"><span class="hs-identifier hs-var">prov_theta</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682048923"><span class="annot"><span class="annottext">[EvTerm]
</span><a href="#local-6989586621682048923"><span class="hs-identifier hs-var">prov_evs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-182"></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Kind, EvTerm)] -&gt; ([Kind], [EvTerm])
forall a b. [(a, b)] -&gt; ([a], [b])
</span><a href="../../base-4.18.3.0/src/GHC.List.html#unzip/GHC.List.html#unzip"><span class="hs-identifier hs-var">unzip</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Id -&gt; Maybe (Kind, EvTerm)) -&gt; [Id] -&gt; [(Kind, EvTerm)]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/Data.Maybe.html#mapMaybe/Data.Maybe.html#mapMaybe"><span class="hs-identifier hs-var">mapMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Maybe (Kind, EvTerm)
</span><a href="GHC.Tc.TyCl.PatSyn.html#mkProvEvidence"><span class="hs-identifier hs-var">mkProvEvidence</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682048919"><span class="hs-identifier hs-var">filtered_prov_dicts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-183"></span><span>             </span><span id="local-6989586621682048926"><span class="annot"><span class="annottext">req_theta :: [Kind]
</span><a href="#local-6989586621682048926"><span class="hs-identifier hs-var hs-var">req_theta</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Kind) -&gt; [Id] -&gt; [Kind]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Tc.Utils.TcType.html#evVarPred"><span class="hs-identifier hs-var">evVarPred</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682048907"><span class="hs-identifier hs-var">req_dicts</span></a></span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span>       </span><span class="hs-comment">-- Report coercions that escape</span><span>
</span><span id="line-186"></span><span>       </span><span class="hs-comment">-- See Note [Coercions that escape]</span><span>
</span><span id="line-187"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682048927"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682048927"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) Id) -&gt; [Id] -&gt; TcM [Id]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="../../base-4.18.3.0/src/Data.Traversable.html#mapM/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) Id
</span><a href="GHC.Tc.Utils.TcMType.html#zonkId"><span class="hs-identifier hs-var">zonkId</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682048890"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-188"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682048928"><span class="annot"><span class="annottext">bad_args :: [(Id, DVarSet)]
</span><a href="#local-6989586621682048928"><span class="hs-identifier hs-var hs-var">bad_args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682048929"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DVarSet
</span><a href="#local-6989586621682048930"><span class="hs-identifier hs-var">bad_cos</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621682048929"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682048929"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682048927"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">[Id] -&gt; [Id] -&gt; [Id]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682048917"><span class="hs-identifier hs-var">prov_dicts</span></a></span><span>
</span><span id="line-189"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682048930"><span class="annot"><span class="annottext">bad_cos :: DVarSet
</span><a href="#local-6989586621682048930"><span class="hs-identifier hs-var hs-var">bad_cos</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Bool) -&gt; DVarSet -&gt; DVarSet
</span><a href="GHC.Types.Var.Set.html#filterDVarSet"><span class="hs-identifier hs-var">filterDVarSet</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Bool
</span><a href="GHC.Types.Var.html#isId"><span class="hs-identifier hs-var">isId</span></a></span><span> </span><span class="annot"><span class="annottext">(DVarSet -&gt; DVarSet) -&gt; DVarSet -&gt; DVarSet
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-190"></span><span>                                              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind -&gt; DVarSet
</span><a href="GHC.Core.TyCo.FVs.html#tyCoVarsOfTypeDSet"><span class="hs-identifier hs-var">tyCoVarsOfTypeDSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682048929"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-191"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DVarSet -&gt; Bool
</span><a href="GHC.Types.Var.Set.html#isEmptyDVarSet"><span class="hs-identifier hs-var">isEmptyDVarSet</span></a></span><span> </span><span class="annot"><span class="annottext">DVarSet
</span><a href="#local-6989586621682048930"><span class="hs-identifier hs-var">bad_cos</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-192"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">((Id, DVarSet) -&gt; TcRn ()) -&gt; [(Id, DVarSet)] -&gt; TcRn ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#mapM_/Data.Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="annot"><span class="annottext">(Id, DVarSet) -&gt; TcRn ()
</span><a href="GHC.Tc.TyCl.PatSyn.html#dependentArgErr"><span class="hs-identifier hs-var">dependentArgErr</span></a></span><span> </span><span class="annot"><span class="annottext">[(Id, DVarSet)]
</span><a href="#local-6989586621682048928"><span class="hs-identifier hs-var">bad_args</span></a></span><span>
</span><span id="line-193"></span><span>
</span><span id="line-194"></span><span>       </span><span class="hs-comment">-- Report un-quantifiable type variables:</span><span>
</span><span id="line-195"></span><span>       </span><span class="hs-comment">-- see Note [Unquantified tyvars in a pattern synonym]</span><span>
</span><span id="line-196"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682048939"><span class="annot"><span class="annottext">CandidatesQTvs
</span><a href="#local-6989586621682048939"><span class="hs-identifier hs-var">dvs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Kind] -&gt; TcM CandidatesQTvs
</span><a href="GHC.Tc.Utils.TcMType.html#candidateQTyVarsOfTypes"><span class="hs-identifier hs-var">candidateQTyVarsOfTypes</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682048922"><span class="hs-identifier hs-var">prov_theta</span></a></span><span>
</span><span id="line-197"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682048941"><span class="annot"><span class="annottext">mk_doc :: TidyEnv -&gt; IOEnv (Env TcGblEnv TcLclEnv) (TidyEnv, SDoc)
</span><a href="#local-6989586621682048941"><span class="hs-identifier hs-var hs-var">mk_doc</span></a></span></span><span> </span><span id="local-6989586621682048942"><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621682048942"><span class="hs-identifier hs-var">tidy_env</span></a></span></span><span>
</span><span id="line-198"></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682048943"><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621682048943"><span class="hs-identifier hs-var">tidy_env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682048944"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682048944"><span class="hs-identifier hs-var">theta</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TidyEnv -&gt; [Kind] -&gt; TcM (TidyEnv, [Kind])
</span><a href="GHC.Tc.Utils.TcMType.html#zonkTidyTcTypes"><span class="hs-identifier hs-var">zonkTidyTcTypes</span></a></span><span> </span><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621682048942"><span class="hs-identifier hs-var">tidy_env</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682048922"><span class="hs-identifier hs-var">prov_theta</span></a></span><span>
</span><span id="line-199"></span><span>                    </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(TidyEnv, SDoc) -&gt; IOEnv (Env TcGblEnv TcLclEnv) (TidyEnv, SDoc)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621682048943"><span class="hs-identifier hs-var">tidy_env2</span></a></span><span>
</span><span id="line-200"></span><span>                             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsLine doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;the provided context:&quot;</span></span><span>
</span><span id="line-201"></span><span>                                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Kind] -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprTheta"><span class="hs-identifier hs-var">pprTheta</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682048944"><span class="hs-identifier hs-var">theta</span></a></span><span> </span><span class="hs-special">]</span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-202"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">CandidatesQTvs
-&gt; (TidyEnv -&gt; IOEnv (Env TcGblEnv TcLclEnv) (TidyEnv, SDoc))
-&gt; TcRn ()
</span><a href="GHC.Tc.Utils.TcMType.html#doNotQuantifyTyVars"><span class="hs-identifier hs-var">doNotQuantifyTyVars</span></a></span><span> </span><span class="annot"><span class="annottext">CandidatesQTvs
</span><a href="#local-6989586621682048939"><span class="hs-identifier hs-var">dvs</span></a></span><span> </span><span class="annot"><span class="annottext">TidyEnv -&gt; IOEnv (Env TcGblEnv TcLclEnv) (TidyEnv, SDoc)
</span><a href="#local-6989586621682048941"><span class="hs-identifier hs-var">mk_doc</span></a></span><span>
</span><span id="line-203"></span><span>
</span><span id="line-204"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tcInferPatSynDecl }&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; TcRn ()) -&gt; SDoc -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682048877"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">[Id] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682048898"><span class="hs-identifier hs-var">ex_tvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-205"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682048950"><span class="annot"><span class="annottext">[FieldLabel]
</span><a href="#local-6989586621682048950"><span class="hs-identifier hs-var">rec_fields</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RnM [FieldLabel]
</span><a href="GHC.Rename.Env.html#lookupConstructorFields"><span class="hs-identifier hs-var">lookupConstructorFields</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682048877"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-206"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LocatedN Name
-&gt; HsPatSynDir GhcRn
-&gt; Bool
-&gt; LPat GhcTc
-&gt; TcPragEnv
-&gt; ([VarBndr Id Specificity], [Kind], TcEvBinds, [Id])
-&gt; ([VarBndr Id Specificity], [Kind], [Kind], [EvTerm])
-&gt; ([LHsExpr GhcTc], [Kind])
-&gt; Kind
-&gt; [FieldLabel]
-&gt; TcM (LHsBinds GhcTc, TcGblEnv)
</span><a href="GHC.Tc.TyCl.PatSyn.html#tc_patsyn_finish"><span class="hs-identifier hs-var">tc_patsyn_finish</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcRn
LocatedN Name
</span><a href="#local-6989586621682048876"><span class="hs-identifier hs-var">lname</span></a></span><span> </span><span class="annot"><span class="annottext">HsPatSynDir GhcRn
</span><a href="#local-6989586621682048882"><span class="hs-identifier hs-var">dir</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682048886"><span class="hs-identifier hs-var">is_infix</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621682048889"><span class="hs-identifier hs-var">lpat'</span></a></span><span> </span><span class="annot"><span class="annottext">TcPragEnv
</span><a href="#local-6989586621682048883"><span class="hs-identifier hs-var">prag_fn</span></a></span><span>
</span><span id="line-207"></span><span>                          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Specificity -&gt; [Id] -&gt; [VarBndr Id Specificity]
forall vis. vis -&gt; [Id] -&gt; [VarBndr Id vis]
</span><a href="GHC.Types.Var.html#mkTyVarBinders"><span class="hs-identifier hs-var">mkTyVarBinders</span></a></span><span> </span><span class="annot"><span class="annottext">Specificity
</span><a href="GHC.Types.Var.html#InferredSpec"><span class="hs-identifier hs-var">InferredSpec</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682048906"><span class="hs-identifier hs-var">univ_tvs</span></a></span><span>
</span><span id="line-208"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682048926"><span class="hs-identifier hs-var">req_theta</span></a></span><span class="hs-special">,</span><span>  </span><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621682048908"><span class="hs-identifier hs-var">ev_binds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682048907"><span class="hs-identifier hs-var">req_dicts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-209"></span><span>                          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Specificity -&gt; [Id] -&gt; [VarBndr Id Specificity]
forall vis. vis -&gt; [Id] -&gt; [VarBndr Id vis]
</span><a href="GHC.Types.Var.html#mkTyVarBinders"><span class="hs-identifier hs-var">mkTyVarBinders</span></a></span><span> </span><span class="annot"><span class="annottext">Specificity
</span><a href="GHC.Types.Var.html#InferredSpec"><span class="hs-identifier hs-var">InferredSpec</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682048898"><span class="hs-identifier hs-var">ex_tvs</span></a></span><span>
</span><span id="line-210"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Id] -&gt; [Kind]
</span><a href="GHC.Core.TyCo.Rep.html#mkTyVarTys"><span class="hs-identifier hs-var">mkTyVarTys</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682048898"><span class="hs-identifier hs-var">ex_tvs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682048922"><span class="hs-identifier hs-var">prov_theta</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[EvTerm]
</span><a href="#local-6989586621682048923"><span class="hs-identifier hs-var">prov_evs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-211"></span><span>                          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Id -&gt; LocatedA (HsExpr GhcTc))
-&gt; [Id] -&gt; [LocatedA (HsExpr GhcTc)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">IdP GhcTc -&gt; LHsExpr GhcTc
Id -&gt; LocatedA (HsExpr GhcTc)
forall (p :: Pass) a.
IsSrcSpanAnn p a =&gt;
IdP (GhcPass p) -&gt; LHsExpr (GhcPass p)
</span><a href="GHC.Hs.Utils.html#nlHsVar"><span class="hs-identifier hs-var">nlHsVar</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682048927"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Kind) -&gt; [Id] -&gt; [Kind]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682048927"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-212"></span><span>                          </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682048891"><span class="hs-identifier hs-var">pat_ty</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldLabel]
</span><a href="#local-6989586621682048950"><span class="hs-identifier hs-var">rec_fields</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span class="annot"><a href="GHC.Tc.TyCl.PatSyn.html#mkProvEvidence"><span class="hs-identifier hs-type">mkProvEvidence</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#EvId"><span class="hs-identifier hs-type">EvId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#PredType"><span class="hs-identifier hs-type">PredType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-215"></span><span class="hs-comment">-- See Note [Equality evidence in pattern synonyms]</span><span>
</span><span id="line-216"></span><span id="mkProvEvidence"><span class="annot"><span class="annottext">mkProvEvidence :: Id -&gt; Maybe (Kind, EvTerm)
</span><a href="GHC.Tc.TyCl.PatSyn.html#mkProvEvidence"><span class="hs-identifier hs-var hs-var">mkProvEvidence</span></a></span></span><span> </span><span id="local-6989586621682048959"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682048959"><span class="hs-identifier hs-var">ev_id</span></a></span></span><span>
</span><span id="line-217"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Core.Predicate.html#EqPred"><span class="hs-identifier hs-type">EqPred</span></a></span><span> </span><span id="local-6989586621682048961"><span class="annot"><span class="annottext">EqRel
</span><a href="#local-6989586621682048961"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621682048962"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682048962"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621682048963"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682048963"><span class="hs-identifier hs-var">ty2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Pred
</span><a href="GHC.Core.Predicate.html#classifyPredType"><span class="hs-identifier hs-var">classifyPredType</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682048965"><span class="hs-identifier hs-var">pred</span></a></span><span>
</span><span id="line-218"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682048966"><span class="annot"><span class="annottext">k1 :: Kind
</span><a href="#local-6989586621682048966"><span class="hs-identifier hs-var hs-var">k1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Kind -&gt; Kind
Kind -&gt; Kind
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682048962"><span class="hs-identifier hs-var">ty1</span></a></span><span>
</span><span id="line-219"></span><span>        </span><span id="local-6989586621682048967"><span class="annot"><span class="annottext">k2 :: Kind
</span><a href="#local-6989586621682048967"><span class="hs-identifier hs-var hs-var">k2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Kind -&gt; Kind
Kind -&gt; Kind
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682048963"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-220"></span><span>        </span><span id="local-6989586621682048968"><span class="annot"><span class="annottext">is_homo :: Bool
</span><a href="#local-6989586621682048968"><span class="hs-identifier hs-var hs-var">is_homo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682048966"><span class="hs-identifier hs-var">k1</span></a></span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Kind -&gt; Kind -&gt; Bool
Kind -&gt; Kind -&gt; Bool
</span><a href="GHC.Core.TyCo.Compare.html#tcEqType"><span class="hs-operator hs-var">`tcEqType`</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682048967"><span class="hs-identifier hs-var">k2</span></a></span><span>
</span><span id="line-221"></span><span>        </span><span id="local-6989586621682048970"><span class="annot"><span class="annottext">homo_tys :: [Kind]
</span><a href="#local-6989586621682048970"><span class="hs-identifier hs-var hs-var">homo_tys</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682048966"><span class="hs-identifier hs-var">k1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682048962"><span class="hs-identifier hs-var">ty1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682048963"><span class="hs-identifier hs-var">ty2</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-222"></span><span>        </span><span id="local-6989586621682048971"><span class="annot"><span class="annottext">hetero_tys :: [Kind]
</span><a href="#local-6989586621682048971"><span class="hs-identifier hs-var hs-var">hetero_tys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682048966"><span class="hs-identifier hs-var">k1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682048967"><span class="hs-identifier hs-var">k2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682048962"><span class="hs-identifier hs-var">ty1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682048963"><span class="hs-identifier hs-var">ty2</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-223"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">EqRel
</span><a href="#local-6989586621682048961"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-224"></span><span>      </span><span class="annot"><span class="annottext">EqRel
</span><a href="GHC.Core.Predicate.html#ReprEq"><span class="hs-identifier hs-var">ReprEq</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682048968"><span class="hs-identifier hs-var">is_homo</span></a></span><span>
</span><span id="line-225"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Kind, EvTerm) -&gt; Maybe (Kind, EvTerm)
forall a. a -&gt; Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Class -&gt; [Kind] -&gt; Kind
</span><a href="GHC.Core.Predicate.html#mkClassPred"><span class="hs-identifier hs-var">mkClassPred</span></a></span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="GHC.Builtin.Types.html#coercibleClass"><span class="hs-identifier hs-var">coercibleClass</span></a></span><span>    </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682048970"><span class="hs-identifier hs-var">homo_tys</span></a></span><span>
</span><span id="line-226"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; [Kind] -&gt; [EvExpr] -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#evDataConApp"><span class="hs-identifier hs-var">evDataConApp</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="GHC.Builtin.Types.html#coercibleDataCon"><span class="hs-identifier hs-var">coercibleDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682048970"><span class="hs-identifier hs-var">homo_tys</span></a></span><span> </span><span class="annot"><span class="annottext">[EvExpr]
</span><a href="#local-6989586621682048977"><span class="hs-identifier hs-var">eq_con_args</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-227"></span><span>             </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Kind, EvTerm)
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-228"></span><span>      </span><span class="annot"><span class="annottext">EqRel
</span><a href="GHC.Core.Predicate.html#NomEq"><span class="hs-identifier hs-var">NomEq</span></a></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682048968"><span class="hs-identifier hs-var">is_homo</span></a></span><span>
</span><span id="line-229"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Kind, EvTerm) -&gt; Maybe (Kind, EvTerm)
forall a. a -&gt; Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Class -&gt; [Kind] -&gt; Kind
</span><a href="GHC.Core.Predicate.html#mkClassPred"><span class="hs-identifier hs-var">mkClassPred</span></a></span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="GHC.Builtin.Types.html#eqClass"><span class="hs-identifier hs-var">eqClass</span></a></span><span>    </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682048970"><span class="hs-identifier hs-var">homo_tys</span></a></span><span>
</span><span id="line-230"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; [Kind] -&gt; [EvExpr] -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#evDataConApp"><span class="hs-identifier hs-var">evDataConApp</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="GHC.Builtin.Types.html#eqDataCon"><span class="hs-identifier hs-var">eqDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682048970"><span class="hs-identifier hs-var">homo_tys</span></a></span><span> </span><span class="annot"><span class="annottext">[EvExpr]
</span><a href="#local-6989586621682048977"><span class="hs-identifier hs-var">eq_con_args</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-231"></span><span>             </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-232"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Kind, EvTerm) -&gt; Maybe (Kind, EvTerm)
forall a. a -&gt; Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Class -&gt; [Kind] -&gt; Kind
</span><a href="GHC.Core.Predicate.html#mkClassPred"><span class="hs-identifier hs-var">mkClassPred</span></a></span><span> </span><span class="annot"><span class="annottext">Class
</span><a href="GHC.Builtin.Types.html#heqClass"><span class="hs-identifier hs-var">heqClass</span></a></span><span>    </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682048971"><span class="hs-identifier hs-var">hetero_tys</span></a></span><span>
</span><span id="line-233"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DataCon -&gt; [Kind] -&gt; [EvExpr] -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#evDataConApp"><span class="hs-identifier hs-var">evDataConApp</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="GHC.Builtin.Types.html#heqDataCon"><span class="hs-identifier hs-var">heqDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682048971"><span class="hs-identifier hs-var">hetero_tys</span></a></span><span> </span><span class="annot"><span class="annottext">[EvExpr]
</span><a href="#local-6989586621682048977"><span class="hs-identifier hs-var">eq_con_args</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-234"></span><span>
</span><span id="line-235"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-236"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Kind, EvTerm) -&gt; Maybe (Kind, EvTerm)
forall a. a -&gt; Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682048965"><span class="hs-identifier hs-var">pred</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EvExpr -&gt; EvTerm
</span><a href="GHC.Tc.Types.Evidence.html#EvExpr"><span class="hs-identifier hs-var">EvExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; EvExpr
</span><a href="GHC.Tc.Types.Evidence.html#evId"><span class="hs-identifier hs-var">evId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682048959"><span class="hs-identifier hs-var">ev_id</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-237"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-238"></span><span>    </span><span id="local-6989586621682048965"><span class="annot"><span class="annottext">pred :: Kind
</span><a href="#local-6989586621682048965"><span class="hs-identifier hs-var hs-var">pred</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Tc.Utils.TcType.html#evVarPred"><span class="hs-identifier hs-var">evVarPred</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682048959"><span class="hs-identifier hs-var">ev_id</span></a></span><span>
</span><span id="line-239"></span><span>    </span><span id="local-6989586621682048977"><span class="annot"><span class="annottext">eq_con_args :: [EvExpr]
</span><a href="#local-6989586621682048977"><span class="hs-identifier hs-var hs-var">eq_con_args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Id -&gt; EvExpr
</span><a href="GHC.Tc.Types.Evidence.html#evId"><span class="hs-identifier hs-var">evId</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682048959"><span class="hs-identifier hs-var">ev_id</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-240"></span><span>
</span><span id="line-241"></span><span class="annot"><a href="GHC.Tc.TyCl.PatSyn.html#dependentArgErr"><span class="hs-identifier hs-type">dependentArgErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.Set.html#DTyCoVarSet"><span class="hs-identifier hs-type">DTyCoVarSet</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-242"></span><span class="hs-comment">-- See Note [Coercions that escape]</span><span>
</span><span id="line-243"></span><span id="dependentArgErr"><span class="annot"><span class="annottext">dependentArgErr :: (Id, DVarSet) -&gt; TcRn ()
</span><a href="GHC.Tc.TyCl.PatSyn.html#dependentArgErr"><span class="hs-identifier hs-var hs-var">dependentArgErr</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682048986"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682048986"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682048987"><span class="annot"><span class="annottext">DVarSet
</span><a href="#local-6989586621682048987"><span class="hs-identifier hs-var">bad_cos</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-244"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcRnMessage -&gt; TcRn ()
forall a. TcRnMessage -&gt; TcM a
</span><a href="GHC.Tc.Utils.Monad.html#failWithTc"><span class="hs-identifier hs-var">failWithTc</span></a></span><span> </span><span class="annot"><span class="annottext">(TcRnMessage -&gt; TcRn ()) -&gt; TcRnMessage -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>  </span><span class="hs-comment">-- fail here: otherwise we get downstream errors</span><span>
</span><span id="line-245"></span><span>    </span><span class="annot"><span class="annottext">DiagnosticMessage -&gt; TcRnMessage
forall a.
(Diagnostic a, Typeable a, DiagnosticOpts a ~ NoDiagnosticOpts) =&gt;
a -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#mkTcRnUnknownMessage"><span class="hs-identifier hs-var">mkTcRnUnknownMessage</span></a></span><span> </span><span class="annot"><span class="annottext">(DiagnosticMessage -&gt; TcRnMessage)
-&gt; DiagnosticMessage -&gt; TcRnMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[GhcHint] -&gt; SDoc -&gt; DiagnosticMessage
</span><a href="GHC.Types.Error.html#mkPlainError"><span class="hs-identifier hs-var">mkPlainError</span></a></span><span> </span><span class="annot"><span class="annottext">[GhcHint]
</span><a href="GHC.Types.Error.html#noHints"><span class="hs-identifier hs-var">noHints</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; DiagnosticMessage) -&gt; SDoc -&gt; DiagnosticMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-246"></span><span>    </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Iceland Jack!  Iceland Jack! Stop torturing me!&quot;</span></span><span>
</span><span id="line-247"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Pattern-bound variable&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-248"></span><span>              </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682048986"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682048986"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-249"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#nest"><span class="hs-identifier hs-var">nest</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; SDoc) -&gt; SDoc -&gt; SDoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-250"></span><span>           </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;has a type that mentions pattern-bound coercion&quot;</span></span><span>
</span><span id="line-251"></span><span>                 </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Id] -&gt; SDoc
forall a. [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#plural"><span class="hs-identifier hs-var">plural</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682048998"><span class="hs-identifier hs-var">bad_co_list</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>              </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Id -&gt; SDoc) -&gt; [Id] -&gt; SDoc
forall a. (a -&gt; SDoc) -&gt; [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprWithCommas"><span class="hs-identifier hs-var">pprWithCommas</span></a></span><span> </span><span class="annot"><span class="annottext">Id -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682048998"><span class="hs-identifier hs-var">bad_co_list</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-253"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Hint: use -fprint-explicit-coercions to see the coercions&quot;</span></span><span>
</span><span id="line-254"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Probable fix: add a pattern signature&quot;</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-255"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-256"></span><span>    </span><span id="local-6989586621682048998"><span class="annot"><span class="annottext">bad_co_list :: [Id]
</span><a href="#local-6989586621682048998"><span class="hs-identifier hs-var hs-var">bad_co_list</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DVarSet -&gt; [Id]
</span><a href="GHC.Types.Var.Set.html#dVarSetElems"><span class="hs-identifier hs-var">dVarSetElems</span></a></span><span> </span><span class="annot"><span class="annottext">DVarSet
</span><a href="#local-6989586621682048987"><span class="hs-identifier hs-var">bad_cos</span></a></span><span>
</span><span id="line-257"></span><span>
</span><span id="line-258"></span><span class="hs-comment">{- Note [Type variables whose kind is captured]
~~-~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Consider
  data AST a = Sym [a]
  class Prj s where { prj :: [a] -&gt; Maybe (s a) }
  pattern P x &lt;= Sym (prj -&gt; Just x)

Here we get a matcher with this type
  $mP :: forall s a. Prj s =&gt; AST a -&gt; (s a -&gt; r) -&gt; r -&gt; r

No problem.  But note that 's' is not fixed by the type of the
pattern (AST a), nor is it existentially bound.  It's really only
fixed by the type of the continuation.

#14552 showed that this can go wrong if the kind of 's' mentions
existentially bound variables.  We obviously can't make a type like
  $mP :: forall (s::k-&gt;*) a. Prj s =&gt; AST a -&gt; (forall k. s a -&gt; r)
                                   -&gt; r -&gt; r
But neither is 's' itself existentially bound, so the forall (s::k-&gt;*)
can't go in the inner forall either.  (What would the matcher apply
the continuation to?)

Solution: do not quantify over any unification variable whose kind
mentions the existentials.  We can conveniently do that by making the
&quot;taus&quot; passed to simplifyInfer look like
   forall ex_tvs. arg_ty

After that, Note [Naughty quantification candidates] in GHC.Tc.Utils.TcMType takes
over and errors.

Note [Remove redundant provided dicts]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Recall that
   HRefl :: forall k1 k2 (a1:k1) (a2:k2). (k1 ~ k2, a1 ~ a2)
                                       =&gt; a1 :~~: a2
(NB: technically the (k1~k2) existential dictionary is not necessary,
but it's there at the moment.)

Now consider (#14394):
   pattern Foo = HRefl
in a non-poly-kinded module.  We don't want to get
    pattern Foo :: () =&gt; (* ~ *, b ~ a) =&gt; a :~~: b
with that redundant (* ~ *).  We'd like to remove it; hence the call to
mkMinimalWithSCs.

Similarly consider
  data S a where { MkS :: Ord a =&gt; a -&gt; S a }
  pattern Bam x y &lt;- (MkS (x::a), MkS (y::a)))

The pattern (Bam x y) binds two (Ord a) dictionaries, but we only
need one.  Again mkMimimalWithSCs removes the redundant one.

Note [Equality evidence in pattern synonyms]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Consider
  data X a where
     MkX :: Eq a =&gt; [a] -&gt; X (Maybe a)
  pattern P x = MkG x

Then there is a danger that GHC will infer
  P :: forall a.  () =&gt;
       forall b. (a ~# Maybe b, Eq b) =&gt; [b] -&gt; X a

The 'builder' for P, which is called in user-code, will then
have type
  $bP :: forall a b. (a ~# Maybe b, Eq b) =&gt; [b] -&gt; X a

and that is bad because (a ~# Maybe b) is not a predicate type
(see Note [Types for coercions, predicates, and evidence] in GHC.Core.TyCo.Rep
and is not implicitly instantiated.

So in mkProvEvidence we lift (a ~# b) to (a ~ b).  Tiresome, and
marginally less efficient, if the builder/matcher are not inlined.

See also Note [Lift equality constraints when quantifying] in GHC.Tc.Solver

Note [Coercions that escape]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#14507 showed an example where the inferred type of the matcher
for the pattern synonym was something like
   $mSO :: forall (r :: TYPE rep) kk (a :: k).
           TypeRep k a
           -&gt; ((Bool ~ k) =&gt; TypeRep Bool (a |&gt; co_a2sv) -&gt; r)
           -&gt; (Void# -&gt; r)
           -&gt; r

What is that co_a2sv :: Bool ~# *??  It was bound (via a superclass
selection) by the pattern being matched; and indeed it is implicit in
the context (Bool ~ k).  You could imagine trying to extract it like
this:
   $mSO :: forall (r :: TYPE rep) kk (a :: k).
           TypeRep k a
           -&gt; ( co :: ((Bool :: *) ~ (k :: *)) =&gt;
                  let co_a2sv = sc_sel co
                  in TypeRep Bool (a |&gt; co_a2sv) -&gt; r)
           -&gt; (Void# -&gt; r)
           -&gt; r

But we simply don't allow that in types.  Maybe one day but not now.

How to detect this situation?  We just look for free coercion variables
in the types of any of the arguments to the matcher.  The error message
is not very helpful, but at least we don't get a Lint error.

Note [Unquantified tyvars in a pattern synonym]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Consider (#21479)

   data T a where MkT :: Int -&gt; T Char   -- A GADT
   foo :: forall b. Bool -&gt; T b          -- Somewhat strange type

   pattern T1 &lt;- (foo -&gt; MkT)

In the view pattern, foo is instantiated, let's say b :-&gt; b0
where b0 is a unification variable.  Then matching the GADT
MkT will add the &quot;provided&quot; constraint b0~Char, so we might infer
   pattern T1 :: () =&gt; (b0~Char) =&gt; Int -&gt; Bool

Nothing constrains that `b0`. We don't want to quantify over it.
We don't want to to zonk to Any (we don't like Any showing up in
user-visible types).  So we want to error here. See
Note [Error on unconstrained meta-variables] in GHC.Tc.Utils.TcMType

Hence the call to doNotQuantifyTyVars here.
-}</span><span>
</span><span id="line-383"></span><span>
</span><span id="line-384"></span><span class="annot"><a href="GHC.Tc.TyCl.PatSyn.html#tcCheckPatSynDecl"><span class="hs-identifier hs-type">tcCheckPatSynDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatSynBind"><span class="hs-identifier hs-type">PatSynBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-385"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcPatSynInfo"><span class="hs-identifier hs-type">TcPatSynInfo</span></a></span><span>
</span><span id="line-386"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Gen.Sig.html#TcPragEnv"><span class="hs-identifier hs-type">TcPragEnv</span></a></span><span>
</span><span id="line-387"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcGblEnv"><span class="hs-identifier hs-type">TcGblEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-388"></span><span id="tcCheckPatSynDecl"><span class="annot"><span class="annottext">tcCheckPatSynDecl :: PatSynBind GhcRn GhcRn
-&gt; TcPatSynInfo -&gt; TcPragEnv -&gt; TcM (LHsBinds GhcTc, TcGblEnv)
</span><a href="GHC.Tc.TyCl.PatSyn.html#tcCheckPatSynDecl"><span class="hs-identifier hs-var hs-var">tcCheckPatSynDecl</span></a></span></span><span> </span><span id="local-6989586621682049002"><span class="annot"><span class="annottext">psb :: PatSynBind GhcRn GhcRn
</span><a href="#local-6989586621682049002"><span class="hs-identifier hs-var">psb</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PSB"><span class="hs-identifier hs-type">PSB</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">psb_id :: forall idL idR. PatSynBind idL idR -&gt; LIdP idL
</span><a href="Language.Haskell.Syntax.Binds.html#psb_id"><span class="hs-identifier hs-var">psb_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682049003"><span class="annot"><span class="annottext">lname :: LIdP GhcRn
</span><a href="#local-6989586621682049003"><span class="hs-identifier hs-var">lname</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682049004"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049004"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psb_args :: forall idL idR. PatSynBind idL idR -&gt; HsPatSynDetails idR
</span><a href="Language.Haskell.Syntax.Binds.html#psb_args"><span class="hs-identifier hs-var">psb_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682049005"><span class="annot"><span class="annottext">HsPatSynDetails GhcRn
</span><a href="#local-6989586621682049005"><span class="hs-identifier hs-var">details</span></a></span></span><span>
</span><span id="line-389"></span><span>                         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psb_def :: forall idL idR. PatSynBind idL idR -&gt; LPat idR
</span><a href="Language.Haskell.Syntax.Binds.html#psb_def"><span class="hs-identifier hs-var">psb_def</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682049006"><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621682049006"><span class="hs-identifier hs-var">lpat</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psb_dir :: forall idL idR. PatSynBind idL idR -&gt; HsPatSynDir idR
</span><a href="Language.Haskell.Syntax.Binds.html#psb_dir"><span class="hs-identifier hs-var">psb_dir</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682049007"><span class="annot"><span class="annottext">HsPatSynDir GhcRn
</span><a href="#local-6989586621682049007"><span class="hs-identifier hs-var">dir</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-390"></span><span>                  </span><span class="annot"><a href="GHC.Tc.Types.html#TPSI"><span class="hs-identifier hs-type">TPSI</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">patsig_implicit_bndrs :: TcPatSynInfo -&gt; [VarBndr Id Specificity]
</span><a href="GHC.Tc.Types.html#patsig_implicit_bndrs"><span class="hs-identifier hs-var">patsig_implicit_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682049010"><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049010"><span class="hs-identifier hs-var">implicit_bndrs</span></a></span></span><span>
</span><span id="line-391"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">patsig_univ_bndrs :: TcPatSynInfo -&gt; [VarBndr Id Specificity]
</span><a href="GHC.Tc.Types.html#patsig_univ_bndrs"><span class="hs-identifier hs-var">patsig_univ_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682049012"><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049012"><span class="hs-identifier hs-var">explicit_univ_bndrs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">patsig_req :: TcPatSynInfo -&gt; [Kind]
</span><a href="GHC.Tc.Types.html#patsig_req"><span class="hs-identifier hs-var">patsig_req</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682049014"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049014"><span class="hs-identifier hs-var">req_theta</span></a></span></span><span>
</span><span id="line-392"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">patsig_ex_bndrs :: TcPatSynInfo -&gt; [VarBndr Id Specificity]
</span><a href="GHC.Tc.Types.html#patsig_ex_bndrs"><span class="hs-identifier hs-var">patsig_ex_bndrs</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682049016"><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049016"><span class="hs-identifier hs-var">explicit_ex_bndrs</span></a></span></span><span class="hs-special">,</span><span>   </span><span class="annot"><span class="annottext">patsig_prov :: TcPatSynInfo -&gt; [Kind]
</span><a href="GHC.Tc.Types.html#patsig_prov"><span class="hs-identifier hs-var">patsig_prov</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682049018"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049018"><span class="hs-identifier hs-var">prov_theta</span></a></span></span><span>
</span><span id="line-393"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">patsig_body_ty :: TcPatSynInfo -&gt; Kind
</span><a href="GHC.Tc.Types.html#patsig_body_ty"><span class="hs-identifier hs-var">patsig_body_ty</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682049020"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049020"><span class="hs-identifier hs-var">sig_body_ty</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-394"></span><span>                  </span><span id="local-6989586621682049021"><span class="annot"><span class="annottext">TcPragEnv
</span><a href="#local-6989586621682049021"><span class="hs-identifier hs-var">prag_fn</span></a></span></span><span>
</span><span id="line-395"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tcCheckPatSynDecl&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; TcRn ()) -&gt; SDoc -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-396"></span><span>         </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049010"><span class="hs-identifier hs-var">implicit_bndrs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049012"><span class="hs-identifier hs-var">explicit_univ_bndrs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Kind] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049014"><span class="hs-identifier hs-var">req_theta</span></a></span><span>
</span><span id="line-397"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049016"><span class="hs-identifier hs-var">explicit_ex_bndrs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Kind] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049018"><span class="hs-identifier hs-var">prov_theta</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049020"><span class="hs-identifier hs-var">sig_body_ty</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-398"></span><span>
</span><span id="line-399"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682049022"><span class="annot"><span class="annottext">decl_arity :: Int
</span><a href="#local-6989586621682049022"><span class="hs-identifier hs-var hs-var">decl_arity</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#length/Data.Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621682049024"><span class="hs-identifier hs-var">arg_names</span></a></span><span>
</span><span id="line-400"></span><span>             </span><span class="hs-special">(</span><span id="local-6989586621682049024"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621682049024"><span class="hs-identifier hs-var">arg_names</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049025"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682049025"><span class="hs-identifier hs-var">is_infix</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsPatSynDetails GhcRn -&gt; ([Name], Bool)
</span><a href="GHC.Tc.TyCl.PatSyn.html#collectPatSynArgInfo"><span class="hs-identifier hs-var">collectPatSynArgInfo</span></a></span><span> </span><span class="annot"><span class="annottext">HsPatSynDetails GhcRn
</span><a href="#local-6989586621682049005"><span class="hs-identifier hs-var">details</span></a></span><span>
</span><span id="line-401"></span><span>
</span><span id="line-402"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682049026"><span class="annot"><span class="annottext">[Scaled Kind]
</span><a href="#local-6989586621682049026"><span class="hs-identifier hs-var">arg_tys</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049027"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049027"><span class="hs-identifier hs-var">pat_ty</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Kind -&gt; Either Int ([Scaled Kind], Kind)
</span><a href="GHC.Tc.Utils.TcType.html#tcSplitFunTysN"><span class="hs-identifier hs-var">tcSplitFunTysN</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682049022"><span class="hs-identifier hs-var">decl_arity</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049020"><span class="hs-identifier hs-var">sig_body_ty</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-403"></span><span>                                 </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Either.html#Right/Data.Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621682049029"><span class="annot"><span class="annottext">([Scaled Kind], Kind)
</span><a href="#local-6989586621682049029"><span class="hs-identifier hs-var">stuff</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([Scaled Kind], Kind)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ([Scaled Kind], Kind)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">([Scaled Kind], Kind)
</span><a href="#local-6989586621682049029"><span class="hs-identifier hs-var">stuff</span></a></span><span>
</span><span id="line-404"></span><span>                                 </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Either.html#Left/Data.Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621682049030"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682049030"><span class="hs-identifier hs-var">missing</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Int
-&gt; Int
-&gt; IOEnv (Env TcGblEnv TcLclEnv) ([Scaled Kind], Kind)
forall a. Name -&gt; Int -&gt; Int -&gt; TcM a
</span><a href="GHC.Tc.TyCl.PatSyn.html#wrongNumberOfParmsErr"><span class="hs-identifier hs-var">wrongNumberOfParmsErr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049004"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682049022"><span class="hs-identifier hs-var">decl_arity</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682049030"><span class="hs-identifier hs-var">missing</span></a></span><span>
</span><span id="line-405"></span><span>
</span><span id="line-406"></span><span>       </span><span class="hs-comment">-- Complain about:  pattern P :: () =&gt; forall x. x -&gt; P x</span><span>
</span><span id="line-407"></span><span>       </span><span class="hs-comment">-- The existential 'x' should not appear in the result type</span><span>
</span><span id="line-408"></span><span>       </span><span class="hs-comment">-- Can't check this until we know P's arity (decl_arity above)</span><span>
</span><span id="line-409"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682049032"><span class="annot"><span class="annottext">bad_tvs :: [Id]
</span><a href="#local-6989586621682049032"><span class="hs-identifier hs-var hs-var">bad_tvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Bool) -&gt; [Id] -&gt; [Id]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.List.html#filter/GHC.List.html#filter"><span class="hs-identifier hs-var">filter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; VarSet -&gt; Bool
</span><a href="GHC.Types.Var.Set.html#elemVarSet"><span class="hs-operator hs-var">`elemVarSet`</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; VarSet
</span><a href="GHC.Core.TyCo.FVs.html#tyCoVarsOfType"><span class="hs-identifier hs-var">tyCoVarsOfType</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049027"><span class="hs-identifier hs-var">pat_ty</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Id] -&gt; [Id]) -&gt; [Id] -&gt; [Id]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity] -&gt; [Id]
forall tv argf. [VarBndr tv argf] -&gt; [tv]
</span><a href="GHC.Types.Var.html#binderVars"><span class="hs-identifier hs-var">binderVars</span></a></span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049016"><span class="hs-identifier hs-var">explicit_ex_bndrs</span></a></span><span>
</span><span id="line-410"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TcRnMessage -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#checkTc"><span class="hs-identifier hs-var">checkTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Id] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#null/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682049032"><span class="hs-identifier hs-var">bad_tvs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TcRnMessage -&gt; TcRn ()) -&gt; TcRnMessage -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DiagnosticMessage -&gt; TcRnMessage
forall a.
(Diagnostic a, Typeable a, DiagnosticOpts a ~ NoDiagnosticOpts) =&gt;
a -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#mkTcRnUnknownMessage"><span class="hs-identifier hs-var">mkTcRnUnknownMessage</span></a></span><span> </span><span class="annot"><span class="annottext">(DiagnosticMessage -&gt; TcRnMessage)
-&gt; DiagnosticMessage -&gt; TcRnMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[GhcHint] -&gt; SDoc -&gt; DiagnosticMessage
</span><a href="GHC.Types.Error.html#mkPlainError"><span class="hs-identifier hs-var">mkPlainError</span></a></span><span> </span><span class="annot"><span class="annottext">[GhcHint]
</span><a href="GHC.Types.Error.html#noHints"><span class="hs-identifier hs-var">noHints</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; DiagnosticMessage) -&gt; SDoc -&gt; DiagnosticMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-411"></span><span>         </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsLine doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;The result type of the signature for&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049004"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#comma"><span class="hs-identifier hs-var">comma</span></a></span><span>
</span><span id="line-412"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;namely&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049027"><span class="hs-identifier hs-var">pat_ty</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-413"></span><span>            </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mentions existential type variable&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Id] -&gt; SDoc
forall a. [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#plural"><span class="hs-identifier hs-var">plural</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682049032"><span class="hs-identifier hs-var">bad_tvs</span></a></span><span>
</span><span id="line-414"></span><span>               </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Id] -&gt; SDoc
forall a. Outputable a =&gt; [a] -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#pprQuotedList"><span class="hs-identifier hs-var">pprQuotedList</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682049032"><span class="hs-identifier hs-var">bad_tvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-415"></span><span>
</span><span id="line-416"></span><span>         </span><span class="hs-comment">-- See Note [The pattern-synonym signature splitting rule] in GHC.Tc.Gen.Sig</span><span>
</span><span id="line-417"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682049040"><span class="annot"><span class="annottext">univ_fvs :: VarSet
</span><a href="#local-6989586621682049040"><span class="hs-identifier hs-var hs-var">univ_fvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VarSet -&gt; VarSet
</span><a href="GHC.Core.TyCo.FVs.html#closeOverKinds"><span class="hs-identifier hs-var">closeOverKinds</span></a></span><span> </span><span class="annot"><span class="annottext">(VarSet -&gt; VarSet) -&gt; VarSet -&gt; VarSet
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-418"></span><span>                        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Kind] -&gt; VarSet
</span><a href="GHC.Core.TyCo.FVs.html#tyCoVarsOfTypes"><span class="hs-identifier hs-var">tyCoVarsOfTypes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049027"><span class="hs-identifier hs-var">pat_ty</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; [Kind] -&gt; [Kind]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049014"><span class="hs-identifier hs-var">req_theta</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">VarSet -&gt; [Id] -&gt; VarSet
</span><a href="GHC.Types.Var.Set.html#extendVarSetList"><span class="hs-operator hs-var">`extendVarSetList`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VarBndr Id Specificity] -&gt; [Id]
forall tv argf. [VarBndr tv argf] -&gt; [tv]
</span><a href="GHC.Types.Var.html#binderVars"><span class="hs-identifier hs-var">binderVars</span></a></span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049012"><span class="hs-identifier hs-var">explicit_univ_bndrs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-419"></span><span>             </span><span class="hs-special">(</span><span id="local-6989586621682049044"><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049044"><span class="hs-identifier hs-var">extra_univ</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049045"><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049045"><span class="hs-identifier hs-var">extra_ex</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(VarBndr Id Specificity -&gt; Bool)
-&gt; [VarBndr Id Specificity]
-&gt; ([VarBndr Id Specificity], [VarBndr Id Specificity])
forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><a href="../../base-4.18.3.0/src/Data.OldList.html#partition/Data.OldList.html#partition"><span class="hs-identifier hs-var">partition</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; VarSet -&gt; Bool
</span><a href="GHC.Types.Var.Set.html#elemVarSet"><span class="hs-operator hs-var">`elemVarSet`</span></a></span><span> </span><span class="annot"><span class="annottext">VarSet
</span><a href="#local-6989586621682049040"><span class="hs-identifier hs-var">univ_fvs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; Bool)
-&gt; (VarBndr Id Specificity -&gt; Id) -&gt; VarBndr Id Specificity -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">VarBndr Id Specificity -&gt; Id
forall tv argf. VarBndr tv argf -&gt; tv
</span><a href="GHC.Types.Var.html#binderVar"><span class="hs-identifier hs-var">binderVar</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049010"><span class="hs-identifier hs-var">implicit_bndrs</span></a></span><span>
</span><span id="line-420"></span><span>             </span><span id="local-6989586621682049048"><span class="annot"><span class="annottext">univ_bndrs :: [VarBndr Id Specificity]
</span><a href="#local-6989586621682049048"><span class="hs-identifier hs-var hs-var">univ_bndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049044"><span class="hs-identifier hs-var">extra_univ</span></a></span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
-&gt; [VarBndr Id Specificity] -&gt; [VarBndr Id Specificity]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049012"><span class="hs-identifier hs-var">explicit_univ_bndrs</span></a></span><span>
</span><span id="line-421"></span><span>             </span><span id="local-6989586621682049049"><span class="annot"><span class="annottext">ex_bndrs :: [VarBndr Id Specificity]
</span><a href="#local-6989586621682049049"><span class="hs-identifier hs-var hs-var">ex_bndrs</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049045"><span class="hs-identifier hs-var">extra_ex</span></a></span><span>   </span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
-&gt; [VarBndr Id Specificity] -&gt; [VarBndr Id Specificity]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049016"><span class="hs-identifier hs-var">explicit_ex_bndrs</span></a></span><span>
</span><span id="line-422"></span><span>             </span><span id="local-6989586621682049050"><span class="annot"><span class="annottext">univ_tvs :: [Id]
</span><a href="#local-6989586621682049050"><span class="hs-identifier hs-var hs-var">univ_tvs</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity] -&gt; [Id]
forall tv argf. [VarBndr tv argf] -&gt; [tv]
</span><a href="GHC.Types.Var.html#binderVars"><span class="hs-identifier hs-var">binderVars</span></a></span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049048"><span class="hs-identifier hs-var">univ_bndrs</span></a></span><span>
</span><span id="line-423"></span><span>             </span><span id="local-6989586621682049051"><span class="annot"><span class="annottext">ex_tvs :: [Id]
</span><a href="#local-6989586621682049051"><span class="hs-identifier hs-var hs-var">ex_tvs</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity] -&gt; [Id]
forall tv argf. [VarBndr tv argf] -&gt; [tv]
</span><a href="GHC.Types.Var.html#binderVars"><span class="hs-identifier hs-var">binderVars</span></a></span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049049"><span class="hs-identifier hs-var">ex_bndrs</span></a></span><span>
</span><span id="line-424"></span><span>
</span><span id="line-425"></span><span>         </span><span class="hs-comment">-- Pattern synonyms currently cannot be linear (#18806)</span><span>
</span><span id="line-426"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TcRnMessage -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#checkTc"><span class="hs-identifier hs-var">checkTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Scaled Kind -&gt; Bool) -&gt; [Scaled Kind] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#all/Data.Foldable.html#all"><span class="hs-identifier hs-var">all</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind -&gt; Bool
</span><a href="GHC.Core.Type.html#isManyTy"><span class="hs-identifier hs-var">isManyTy</span></a></span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; Bool) -&gt; (Scaled Kind -&gt; Kind) -&gt; Scaled Kind -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Scaled Kind -&gt; Kind
forall a. Scaled a -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#scaledMult"><span class="hs-identifier hs-var">scaledMult</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Scaled Kind]
</span><a href="#local-6989586621682049026"><span class="hs-identifier hs-var">arg_tys</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TcRnMessage -&gt; TcRn ()) -&gt; TcRnMessage -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-427"></span><span>           </span><span class="annot"><span class="annottext">Kind -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#TcRnLinearPatSyn"><span class="hs-identifier hs-var">TcRnLinearPatSyn</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049020"><span class="hs-identifier hs-var">sig_body_ty</span></a></span><span>
</span><span id="line-428"></span><span>
</span><span id="line-429"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682049055"><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621682049055"><span class="hs-identifier hs-var">skol_info</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SkolemInfoAnon -&gt; IOEnv (Env TcGblEnv TcLclEnv) SkolemInfo
forall (m :: * -&gt; *). MonadIO m =&gt; SkolemInfoAnon -&gt; m SkolemInfo
</span><a href="GHC.Tc.Types.Origin.html#mkSkolemInfo"><span class="hs-identifier hs-var">mkSkolemInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UserTypeCtxt -&gt; Kind -&gt; [(Name, Id)] -&gt; SkolemInfoAnon
</span><a href="GHC.Tc.Types.Origin.html#SigSkol"><span class="hs-identifier hs-var">SigSkol</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; UserTypeCtxt
</span><a href="GHC.Tc.Types.Origin.html#PatSynCtxt"><span class="hs-identifier hs-var">PatSynCtxt</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049004"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049027"><span class="hs-identifier hs-var">pat_ty</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-430"></span><span>                         </span><span class="hs-comment">-- The type here is a bit bogus, but we do not print</span><span>
</span><span id="line-431"></span><span>                         </span><span class="hs-comment">-- the type for PatSynCtxt, so it doesn't matter</span><span>
</span><span id="line-432"></span><span>                         </span><span class="hs-comment">-- See Note [Skolem info for pattern synonyms] in &quot;GHC.Tc.Types.Origin&quot;</span><span>
</span><span id="line-433"></span><span>
</span><span id="line-434"></span><span>         </span><span class="hs-comment">-- Skolemise the quantified type variables. This is necessary</span><span>
</span><span id="line-435"></span><span>         </span><span class="hs-comment">-- in order to check the actual pattern type against the</span><span>
</span><span id="line-436"></span><span>         </span><span class="hs-comment">-- expected type. Even though the tyvars in the type are</span><span>
</span><span id="line-437"></span><span>         </span><span class="hs-comment">-- already skolems, this step changes their TcLevels,</span><span>
</span><span id="line-438"></span><span>         </span><span class="hs-comment">-- avoiding level-check errors when unifying.</span><span>
</span><span id="line-439"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682049059"><span class="annot"><span class="annottext">Subst
</span><a href="#local-6989586621682049059"><span class="hs-identifier hs-var">skol_subst0</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049060"><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049060"><span class="hs-identifier hs-var">skol_univ_bndrs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SkolemInfo
-&gt; Subst
-&gt; [VarBndr Id Specificity]
-&gt; TcM (Subst, [VarBndr Id Specificity])
forall flag.
SkolemInfo
-&gt; Subst -&gt; [VarBndr Id flag] -&gt; TcM (Subst, [VarBndr Id flag])
</span><a href="GHC.Tc.TyCl.PatSyn.html#skolemiseTvBndrsX"><span class="hs-identifier hs-var">skolemiseTvBndrsX</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621682049055"><span class="hs-identifier hs-var">skol_info</span></a></span><span> </span><span class="annot"><span class="annottext">Subst
</span><a href="GHC.Core.TyCo.Subst.html#emptySubst"><span class="hs-identifier hs-var">emptySubst</span></a></span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049048"><span class="hs-identifier hs-var">univ_bndrs</span></a></span><span>
</span><span id="line-440"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682049063"><span class="annot"><span class="annottext">Subst
</span><a href="#local-6989586621682049063"><span class="hs-identifier hs-var">skol_subst</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049064"><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049064"><span class="hs-identifier hs-var">skol_ex_bndrs</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SkolemInfo
-&gt; Subst
-&gt; [VarBndr Id Specificity]
-&gt; TcM (Subst, [VarBndr Id Specificity])
forall flag.
SkolemInfo
-&gt; Subst -&gt; [VarBndr Id flag] -&gt; TcM (Subst, [VarBndr Id flag])
</span><a href="GHC.Tc.TyCl.PatSyn.html#skolemiseTvBndrsX"><span class="hs-identifier hs-var">skolemiseTvBndrsX</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621682049055"><span class="hs-identifier hs-var">skol_info</span></a></span><span> </span><span class="annot"><span class="annottext">Subst
</span><a href="#local-6989586621682049059"><span class="hs-identifier hs-var">skol_subst0</span></a></span><span>   </span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049049"><span class="hs-identifier hs-var">ex_bndrs</span></a></span><span>
</span><span id="line-441"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682049065"><span class="annot"><span class="annottext">skol_univ_tvs :: [Id]
</span><a href="#local-6989586621682049065"><span class="hs-identifier hs-var hs-var">skol_univ_tvs</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity] -&gt; [Id]
forall tv argf. [VarBndr tv argf] -&gt; [tv]
</span><a href="GHC.Types.Var.html#binderVars"><span class="hs-identifier hs-var">binderVars</span></a></span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049060"><span class="hs-identifier hs-var">skol_univ_bndrs</span></a></span><span>
</span><span id="line-442"></span><span>             </span><span id="local-6989586621682049066"><span class="annot"><span class="annottext">skol_ex_tvs :: [Id]
</span><a href="#local-6989586621682049066"><span class="hs-identifier hs-var hs-var">skol_ex_tvs</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity] -&gt; [Id]
forall tv argf. [VarBndr tv argf] -&gt; [tv]
</span><a href="GHC.Types.Var.html#binderVars"><span class="hs-identifier hs-var">binderVars</span></a></span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049064"><span class="hs-identifier hs-var">skol_ex_bndrs</span></a></span><span>
</span><span id="line-443"></span><span>             </span><span id="local-6989586621682049067"><span class="annot"><span class="annottext">skol_req_theta :: [Kind]
</span><a href="#local-6989586621682049067"><span class="hs-identifier hs-var hs-var">skol_req_theta</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Subst -&gt; [Kind] -&gt; [Kind]
Subst -&gt; [Kind] -&gt; [Kind]
</span><a href="GHC.Core.TyCo.Subst.html#substTheta"><span class="hs-identifier hs-var">substTheta</span></a></span><span> </span><span class="annot"><span class="annottext">Subst
</span><a href="#local-6989586621682049059"><span class="hs-identifier hs-var">skol_subst0</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049014"><span class="hs-identifier hs-var">req_theta</span></a></span><span>
</span><span id="line-444"></span><span>             </span><span id="local-6989586621682049069"><span class="annot"><span class="annottext">skol_prov_theta :: [Kind]
</span><a href="#local-6989586621682049069"><span class="hs-identifier hs-var hs-var">skol_prov_theta</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Subst -&gt; [Kind] -&gt; [Kind]
Subst -&gt; [Kind] -&gt; [Kind]
</span><a href="GHC.Core.TyCo.Subst.html#substTheta"><span class="hs-identifier hs-var">substTheta</span></a></span><span> </span><span class="annot"><span class="annottext">Subst
</span><a href="#local-6989586621682049063"><span class="hs-identifier hs-var">skol_subst</span></a></span><span>  </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049018"><span class="hs-identifier hs-var">prov_theta</span></a></span><span>
</span><span id="line-445"></span><span>             </span><span id="local-6989586621682049070"><span class="annot"><span class="annottext">skol_arg_tys :: [Kind]
</span><a href="#local-6989586621682049070"><span class="hs-identifier hs-var hs-var">skol_arg_tys</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Subst -&gt; [Kind] -&gt; [Kind]
Subst -&gt; [Kind] -&gt; [Kind]
</span><a href="GHC.Core.TyCo.Subst.html#substTys"><span class="hs-identifier hs-var">substTys</span></a></span><span>   </span><span class="annot"><span class="annottext">Subst
</span><a href="#local-6989586621682049063"><span class="hs-identifier hs-var">skol_subst</span></a></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Scaled Kind -&gt; Kind) -&gt; [Scaled Kind] -&gt; [Kind]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Scaled Kind -&gt; Kind
forall a. Scaled a -&gt; a
</span><a href="GHC.Core.TyCo.Rep.html#scaledThing"><span class="hs-identifier hs-var">scaledThing</span></a></span><span> </span><span class="annot"><span class="annottext">[Scaled Kind]
</span><a href="#local-6989586621682049026"><span class="hs-identifier hs-var">arg_tys</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-446"></span><span>             </span><span id="local-6989586621682049073"><span class="annot"><span class="annottext">skol_pat_ty :: Kind
</span><a href="#local-6989586621682049073"><span class="hs-identifier hs-var hs-var">skol_pat_ty</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Subst -&gt; Kind -&gt; Kind
Subst -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Subst.html#substTy"><span class="hs-identifier hs-var">substTy</span></a></span><span>    </span><span class="annot"><span class="annottext">Subst
</span><a href="#local-6989586621682049063"><span class="hs-identifier hs-var">skol_subst</span></a></span><span>  </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049027"><span class="hs-identifier hs-var">pat_ty</span></a></span><span>
</span><span id="line-447"></span><span>
</span><span id="line-448"></span><span>             </span><span id="local-6989586621682049075"><span class="annot"><span class="annottext">univ_tv_prs :: [(Name, Id)]
</span><a href="#local-6989586621682049075"><span class="hs-identifier hs-var hs-var">univ_tv_prs</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Name
forall a. NamedThing a =&gt; a -&gt; Name
</span><a href="GHC.Types.Name.html#getName"><span class="hs-identifier hs-var">getName</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049076"><span class="hs-identifier hs-var">orig_univ_tv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049077"><span class="hs-identifier hs-var">skol_univ_tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-449"></span><span>                               </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682049076"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049076"><span class="hs-identifier hs-var">orig_univ_tv</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049077"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049077"><span class="hs-identifier hs-var">skol_univ_tv</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682049050"><span class="hs-identifier hs-var">univ_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">[Id] -&gt; [Id] -&gt; [(Id, Id)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><a href="../../base-4.18.3.0/src/GHC.List.html#zip/GHC.List.html#zip"><span class="hs-operator hs-var">`zip`</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682049065"><span class="hs-identifier hs-var">skol_univ_tvs</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-450"></span><span>
</span><span id="line-451"></span><span>       </span><span class="hs-comment">-- Right!  Let's check the pattern against the signature</span><span>
</span><span id="line-452"></span><span>       </span><span class="hs-comment">-- See Note [Checking against a pattern signature]</span><span>
</span><span id="line-453"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682049078"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682049078"><span class="hs-identifier hs-var">req_dicts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Kind] -&gt; TcM [Id]
</span><a href="GHC.Tc.Utils.TcMType.html#newEvVars"><span class="hs-identifier hs-var">newEvVars</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049067"><span class="hs-identifier hs-var">skol_req_theta</span></a></span><span>
</span><span id="line-454"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682049080"><span class="annot"><span class="annottext">TcLevel
</span><a href="#local-6989586621682049080"><span class="hs-identifier hs-var">tclvl</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049081"><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621682049081"><span class="hs-identifier hs-var">wanted</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682049082"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621682049082"><span class="hs-identifier hs-var">lpat'</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682049083"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682049083"><span class="hs-identifier hs-var">ex_tvs'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049084"><span class="annot"><span class="annottext">[EvTerm]
</span><a href="#local-6989586621682049084"><span class="hs-identifier hs-var">prov_dicts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049085"><span class="annot"><span class="annottext">[LocatedA (HsExpr GhcTc)]
</span><a href="#local-6989586621682049085"><span class="hs-identifier hs-var">args'</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-455"></span><span>           </span><span class="annot"><span class="annottext">Bool
-&gt; SDoc
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (TcLevel, WantedConstraints,
      (GenLocated SrcSpanAnnA (Pat GhcTc),
       ([Id], [EvTerm], [LocatedA (HsExpr GhcTc)])))
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (TcLevel, WantedConstraints,
      (GenLocated SrcSpanAnnA (Pat GhcTc),
       ([Id], [EvTerm], [LocatedA (HsExpr GhcTc)])))
forall a. HasCallStack =&gt; Bool -&gt; SDoc -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.html#assertPpr"><span class="hs-identifier hs-var">assertPpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Name] -&gt; [Scaled Kind] -&gt; Bool
forall a b. [a] -&gt; [b] -&gt; Bool
</span><a href="GHC.Utils.Misc.html#equalLength"><span class="hs-identifier hs-var">equalLength</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621682049024"><span class="hs-identifier hs-var">arg_names</span></a></span><span> </span><span class="annot"><span class="annottext">[Scaled Kind]
</span><a href="#local-6989586621682049026"><span class="hs-identifier hs-var">arg_tys</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049004"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621682049024"><span class="hs-identifier hs-var">arg_names</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">[Scaled Kind] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Scaled Kind]
</span><a href="#local-6989586621682049026"><span class="hs-identifier hs-var">arg_tys</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IOEnv
   (Env TcGblEnv TcLclEnv)
   (TcLevel, WantedConstraints,
    (GenLocated SrcSpanAnnA (Pat GhcTc),
     ([Id], [EvTerm], [LocatedA (HsExpr GhcTc)])))
 -&gt; IOEnv
      (Env TcGblEnv TcLclEnv)
      (TcLevel, WantedConstraints,
       (GenLocated SrcSpanAnnA (Pat GhcTc),
        ([Id], [EvTerm], [LocatedA (HsExpr GhcTc)]))))
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (TcLevel, WantedConstraints,
      (GenLocated SrcSpanAnnA (Pat GhcTc),
       ([Id], [EvTerm], [LocatedA (HsExpr GhcTc)])))
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (TcLevel, WantedConstraints,
      (GenLocated SrcSpanAnnA (Pat GhcTc),
       ([Id], [EvTerm], [LocatedA (HsExpr GhcTc)])))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-456"></span><span>           </span><span class="annot"><span class="annottext">TcM
  (GenLocated SrcSpanAnnA (Pat GhcTc),
   ([Id], [EvTerm], [LocatedA (HsExpr GhcTc)]))
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (TcLevel, WantedConstraints,
      (GenLocated SrcSpanAnnA (Pat GhcTc),
       ([Id], [EvTerm], [LocatedA (HsExpr GhcTc)])))
forall a. TcM a -&gt; TcM (TcLevel, WantedConstraints, a)
</span><a href="GHC.Tc.Utils.Monad.html#pushLevelAndCaptureConstraints"><span class="hs-identifier hs-var">pushLevelAndCaptureConstraints</span></a></span><span>   </span><span class="annot"><span class="annottext">(TcM
   (GenLocated SrcSpanAnnA (Pat GhcTc),
    ([Id], [EvTerm], [LocatedA (HsExpr GhcTc)]))
 -&gt; IOEnv
      (Env TcGblEnv TcLclEnv)
      (TcLevel, WantedConstraints,
       (GenLocated SrcSpanAnnA (Pat GhcTc),
        ([Id], [EvTerm], [LocatedA (HsExpr GhcTc)]))))
-&gt; TcM
     (GenLocated SrcSpanAnnA (Pat GhcTc),
      ([Id], [EvTerm], [LocatedA (HsExpr GhcTc)]))
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (TcLevel, WantedConstraints,
      (GenLocated SrcSpanAnnA (Pat GhcTc),
       ([Id], [EvTerm], [LocatedA (HsExpr GhcTc)])))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-457"></span><span>           </span><span class="annot"><span class="annottext">[(Name, Id)]
-&gt; TcM
     (GenLocated SrcSpanAnnA (Pat GhcTc),
      ([Id], [EvTerm], [LocatedA (HsExpr GhcTc)]))
-&gt; TcM
     (GenLocated SrcSpanAnnA (Pat GhcTc),
      ([Id], [EvTerm], [LocatedA (HsExpr GhcTc)]))
forall r. [(Name, Id)] -&gt; TcM r -&gt; TcM r
</span><a href="GHC.Tc.Utils.Env.html#tcExtendNameTyVarEnv"><span class="hs-identifier hs-var">tcExtendNameTyVarEnv</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, Id)]
</span><a href="#local-6989586621682049075"><span class="hs-identifier hs-var">univ_tv_prs</span></a></span><span> </span><span class="annot"><span class="annottext">(TcM
   (GenLocated SrcSpanAnnA (Pat GhcTc),
    ([Id], [EvTerm], [LocatedA (HsExpr GhcTc)]))
 -&gt; TcM
      (GenLocated SrcSpanAnnA (Pat GhcTc),
       ([Id], [EvTerm], [LocatedA (HsExpr GhcTc)])))
-&gt; TcM
     (GenLocated SrcSpanAnnA (Pat GhcTc),
      ([Id], [EvTerm], [LocatedA (HsExpr GhcTc)]))
-&gt; TcM
     (GenLocated SrcSpanAnnA (Pat GhcTc),
      ([Id], [EvTerm], [LocatedA (HsExpr GhcTc)]))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-458"></span><span>           </span><span class="annot"><span class="annottext">HsMatchContext GhcTc
-&gt; LPat GhcRn
-&gt; Scaled Kind
-&gt; TcM ([Id], [EvTerm], [LocatedA (HsExpr GhcTc)])
-&gt; TcM (LPat GhcTc, ([Id], [EvTerm], [LocatedA (HsExpr GhcTc)]))
forall a.
HsMatchContext GhcTc
-&gt; LPat GhcRn -&gt; Scaled Kind -&gt; TcM a -&gt; TcM (LPat GhcTc, a)
</span><a href="GHC.Tc.Gen.Pat.html#tcCheckPat"><span class="hs-identifier hs-var">tcCheckPat</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContext GhcTc
forall p. HsMatchContext p
</span><a href="Language.Haskell.Syntax.Expr.html#PatSyn"><span class="hs-identifier hs-var">PatSyn</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621682049006"><span class="hs-identifier hs-var">lpat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind -&gt; Scaled Kind
forall a. a -&gt; Scaled a
</span><a href="GHC.Core.Type.html#unrestricted"><span class="hs-identifier hs-var">unrestricted</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049073"><span class="hs-identifier hs-var">skol_pat_ty</span></a></span><span class="hs-special">)</span><span>   </span><span class="annot"><span class="annottext">(TcM ([Id], [EvTerm], [LocatedA (HsExpr GhcTc)])
 -&gt; TcM (LPat GhcTc, ([Id], [EvTerm], [LocatedA (HsExpr GhcTc)])))
-&gt; TcM ([Id], [EvTerm], [LocatedA (HsExpr GhcTc)])
-&gt; TcM (LPat GhcTc, ([Id], [EvTerm], [LocatedA (HsExpr GhcTc)]))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-459"></span><span>           </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682049091"><span class="annot"><span class="annottext">in_scope :: InScopeSet
</span><a href="#local-6989586621682049091"><span class="hs-identifier hs-var hs-var">in_scope</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Id] -&gt; InScopeSet
</span><a href="GHC.Types.Var.Env.html#mkInScopeSetList"><span class="hs-identifier hs-var">mkInScopeSetList</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682049065"><span class="hs-identifier hs-var">skol_univ_tvs</span></a></span><span>
</span><span id="line-460"></span><span>                    </span><span id="local-6989586621682049092"><span class="annot"><span class="annottext">empty_subst :: Subst
</span><a href="#local-6989586621682049092"><span class="hs-identifier hs-var hs-var">empty_subst</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">InScopeSet -&gt; Subst
</span><a href="GHC.Core.TyCo.Subst.html#mkEmptySubst"><span class="hs-identifier hs-var">mkEmptySubst</span></a></span><span> </span><span class="annot"><span class="annottext">InScopeSet
</span><a href="#local-6989586621682049091"><span class="hs-identifier hs-var">in_scope</span></a></span><span>
</span><span id="line-461"></span><span>              </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682049094"><span class="annot"><span class="annottext">Subst
</span><a href="#local-6989586621682049094"><span class="hs-identifier hs-var">inst_subst</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049095"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682049095"><span class="hs-identifier hs-var">ex_tvs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Subst -&gt; Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) (Subst, Id))
-&gt; Subst -&gt; [Id] -&gt; IOEnv (Env TcGblEnv TcLclEnv) (Subst, [Id])
forall (m :: * -&gt; *) (t :: * -&gt; *) acc x y.
(Monad m, Traversable t) =&gt;
(acc -&gt; x -&gt; m (acc, y)) -&gt; acc -&gt; t x -&gt; m (acc, t y)
</span><a href="GHC.Utils.Monad.html#mapAccumLM"><span class="hs-identifier hs-var">mapAccumLM</span></a></span><span> </span><span class="annot"><span class="annottext">Subst -&gt; Id -&gt; IOEnv (Env TcGblEnv TcLclEnv) (Subst, Id)
</span><a href="GHC.Tc.Utils.TcMType.html#newMetaTyVarX"><span class="hs-identifier hs-var">newMetaTyVarX</span></a></span><span> </span><span class="annot"><span class="annottext">Subst
</span><a href="#local-6989586621682049092"><span class="hs-identifier hs-var">empty_subst</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682049066"><span class="hs-identifier hs-var">skol_ex_tvs</span></a></span><span>
</span><span id="line-462"></span><span>                    </span><span class="hs-comment">-- newMetaTyVarX: see the &quot;Existential type variables&quot;</span><span>
</span><span id="line-463"></span><span>                    </span><span class="hs-comment">-- part of Note [Checking against a pattern signature]</span><span>
</span><span id="line-464"></span><span>              </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tcpatsyn1&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Id -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049098"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Types.Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049098"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621682049098"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049098"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682049051"><span class="hs-identifier hs-var">ex_tvs</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-465"></span><span>              </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tcpatsyn2&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Id -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049100"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Types.Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049100"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621682049100"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049100"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682049095"><span class="hs-identifier hs-var">ex_tvs'</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-466"></span><span>              </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682049101"><span class="annot"><span class="annottext">prov_theta' :: [Kind]
</span><a href="#local-6989586621682049101"><span class="hs-identifier hs-var hs-var">prov_theta'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Subst -&gt; [Kind] -&gt; [Kind]
Subst -&gt; [Kind] -&gt; [Kind]
</span><a href="GHC.Core.TyCo.Subst.html#substTheta"><span class="hs-identifier hs-var">substTheta</span></a></span><span> </span><span class="annot"><span class="annottext">Subst
</span><a href="#local-6989586621682049094"><span class="hs-identifier hs-var">inst_subst</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049069"><span class="hs-identifier hs-var">skol_prov_theta</span></a></span><span>
</span><span id="line-467"></span><span>                  </span><span class="hs-comment">-- Add univ_tvs to the in_scope set to</span><span>
</span><span id="line-468"></span><span>                  </span><span class="hs-comment">-- satisfy the substitution invariant. There's no need to</span><span>
</span><span id="line-469"></span><span>                  </span><span class="hs-comment">-- add 'ex_tvs' as they are already in the domain of the</span><span>
</span><span id="line-470"></span><span>                  </span><span class="hs-comment">-- substitution.</span><span>
</span><span id="line-471"></span><span>                  </span><span class="hs-comment">-- See also Note [The substitution invariant] in GHC.Core.TyCo.Subst.</span><span>
</span><span id="line-472"></span><span>              </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682049102"><span class="annot"><span class="annottext">[EvTerm]
</span><a href="#local-6989586621682049102"><span class="hs-identifier hs-var">prov_dicts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvTerm)
-&gt; [Kind] -&gt; IOEnv (Env TcGblEnv TcLclEnv) [EvTerm]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="../../base-4.18.3.0/src/Data.Traversable.html#mapM/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CtOrigin -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) EvTerm
</span><a href="GHC.Tc.Utils.TcMType.html#emitWanted"><span class="hs-identifier hs-var">emitWanted</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatSynBind GhcRn GhcRn -&gt; CtOrigin
</span><a href="GHC.Tc.Types.Origin.html#ProvCtxtOrigin"><span class="hs-identifier hs-var">ProvCtxtOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">PatSynBind GhcRn GhcRn
</span><a href="#local-6989586621682049002"><span class="hs-identifier hs-var">psb</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049101"><span class="hs-identifier hs-var">prov_theta'</span></a></span><span>
</span><span id="line-473"></span><span>              </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682049105"><span class="annot"><span class="annottext">[LocatedA (HsExpr GhcTc)]
</span><a href="#local-6989586621682049105"><span class="hs-identifier hs-var">args'</span></a></span></span><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Name
 -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) (LocatedA (HsExpr GhcTc)))
-&gt; [Name]
-&gt; [Kind]
-&gt; IOEnv (Env TcGblEnv TcLclEnv) [LocatedA (HsExpr GhcTc)]
forall (m :: * -&gt; *) a b c.
Applicative m =&gt;
(a -&gt; b -&gt; m c) -&gt; [a] -&gt; [b] -&gt; m [c]
</span><a href="../../base-4.18.3.0/src/Control.Monad.html#zipWithM/Control.Monad.html#zipWithM"><span class="hs-identifier hs-var">zipWithM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Subst -&gt; Name -&gt; Kind -&gt; TcM (LHsExpr GhcTc)
</span><a href="#local-6989586621682049106"><span class="hs-identifier hs-var">tc_arg</span></a></span><span> </span><span class="annot"><span class="annottext">Subst
</span><a href="#local-6989586621682049094"><span class="hs-identifier hs-var">inst_subst</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621682049024"><span class="hs-identifier hs-var">arg_names</span></a></span><span>
</span><span id="line-474"></span><span>                                       </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049070"><span class="hs-identifier hs-var">skol_arg_tys</span></a></span><span>
</span><span id="line-475"></span><span>              </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">([Id], [EvTerm], [LocatedA (HsExpr GhcTc)])
-&gt; TcM ([Id], [EvTerm], [LocatedA (HsExpr GhcTc)])
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682049095"><span class="hs-identifier hs-var">ex_tvs'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[EvTerm]
</span><a href="#local-6989586621682049102"><span class="hs-identifier hs-var">prov_dicts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LocatedA (HsExpr GhcTc)]
</span><a href="#local-6989586621682049105"><span class="hs-identifier hs-var">args'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-476"></span><span>
</span><span id="line-477"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682049107"><span class="annot"><span class="annottext">Bag Implication
</span><a href="#local-6989586621682049107"><span class="hs-identifier hs-var">implics</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049108"><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621682049108"><span class="hs-identifier hs-var">ev_binds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcLevel
-&gt; SkolemInfoAnon
-&gt; [Id]
-&gt; [Id]
-&gt; WantedConstraints
-&gt; TcM (Bag Implication, TcEvBinds)
</span><a href="GHC.Tc.Utils.Unify.html#buildImplicationFor"><span class="hs-identifier hs-var">buildImplicationFor</span></a></span><span> </span><span class="annot"><span class="annottext">TcLevel
</span><a href="#local-6989586621682049080"><span class="hs-identifier hs-var">tclvl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SkolemInfo -&gt; SkolemInfoAnon
</span><a href="GHC.Tc.Types.Origin.html#getSkolemInfo"><span class="hs-identifier hs-var">getSkolemInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621682049055"><span class="hs-identifier hs-var">skol_info</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682049065"><span class="hs-identifier hs-var">skol_univ_tvs</span></a></span><span>
</span><span id="line-478"></span><span>                                                    </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682049078"><span class="hs-identifier hs-var">req_dicts</span></a></span><span> </span><span class="annot"><span class="annottext">WantedConstraints
</span><a href="#local-6989586621682049081"><span class="hs-identifier hs-var">wanted</span></a></span><span>
</span><span id="line-479"></span><span>
</span><span id="line-480"></span><span>       </span><span class="hs-comment">-- Solve the constraints now, because we are about to make a PatSyn,</span><span>
</span><span id="line-481"></span><span>       </span><span class="hs-comment">-- which should not contain unification variables and the like (#10997)</span><span>
</span><span id="line-482"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bag Implication -&gt; TcRn ()
</span><a href="GHC.Tc.Solver.html#simplifyTopImplic"><span class="hs-identifier hs-var">simplifyTopImplic</span></a></span><span> </span><span class="annot"><span class="annottext">Bag Implication
</span><a href="#local-6989586621682049107"><span class="hs-identifier hs-var">implics</span></a></span><span>
</span><span id="line-483"></span><span>
</span><span id="line-484"></span><span>       </span><span class="hs-comment">-- ToDo: in the bidirectional case, check that the ex_tvs' are all distinct</span><span>
</span><span id="line-485"></span><span>       </span><span class="hs-comment">-- Otherwise we may get a type error when typechecking the builder,</span><span>
</span><span id="line-486"></span><span>       </span><span class="hs-comment">-- when that should be impossible</span><span>
</span><span id="line-487"></span><span>
</span><span id="line-488"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tcCheckPatSynDecl }&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; TcRn ()) -&gt; SDoc -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049004"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-489"></span><span>
</span><span id="line-490"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682049112"><span class="annot"><span class="annottext">[FieldLabel]
</span><a href="#local-6989586621682049112"><span class="hs-identifier hs-var">rec_fields</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RnM [FieldLabel]
</span><a href="GHC.Rename.Env.html#lookupConstructorFields"><span class="hs-identifier hs-var">lookupConstructorFields</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049004"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-491"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LocatedN Name
-&gt; HsPatSynDir GhcRn
-&gt; Bool
-&gt; LPat GhcTc
-&gt; TcPragEnv
-&gt; ([VarBndr Id Specificity], [Kind], TcEvBinds, [Id])
-&gt; ([VarBndr Id Specificity], [Kind], [Kind], [EvTerm])
-&gt; ([LHsExpr GhcTc], [Kind])
-&gt; Kind
-&gt; [FieldLabel]
-&gt; TcM (LHsBinds GhcTc, TcGblEnv)
</span><a href="GHC.Tc.TyCl.PatSyn.html#tc_patsyn_finish"><span class="hs-identifier hs-var">tc_patsyn_finish</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcRn
LocatedN Name
</span><a href="#local-6989586621682049003"><span class="hs-identifier hs-var">lname</span></a></span><span> </span><span class="annot"><span class="annottext">HsPatSynDir GhcRn
</span><a href="#local-6989586621682049007"><span class="hs-identifier hs-var">dir</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682049025"><span class="hs-identifier hs-var">is_infix</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621682049082"><span class="hs-identifier hs-var">lpat'</span></a></span><span> </span><span class="annot"><span class="annottext">TcPragEnv
</span><a href="#local-6989586621682049021"><span class="hs-identifier hs-var">prag_fn</span></a></span><span>
</span><span id="line-492"></span><span>                          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049060"><span class="hs-identifier hs-var">skol_univ_bndrs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049067"><span class="hs-identifier hs-var">skol_req_theta</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621682049108"><span class="hs-identifier hs-var">ev_binds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682049078"><span class="hs-identifier hs-var">req_dicts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-493"></span><span>                          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049064"><span class="hs-identifier hs-var">skol_ex_bndrs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Id] -&gt; [Kind]
</span><a href="GHC.Core.TyCo.Rep.html#mkTyVarTys"><span class="hs-identifier hs-var">mkTyVarTys</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682049083"><span class="hs-identifier hs-var">ex_tvs'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049069"><span class="hs-identifier hs-var">skol_prov_theta</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[EvTerm]
</span><a href="#local-6989586621682049084"><span class="hs-identifier hs-var">prov_dicts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-494"></span><span>                          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LHsExpr GhcTc]
[LocatedA (HsExpr GhcTc)]
</span><a href="#local-6989586621682049085"><span class="hs-identifier hs-var">args'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049070"><span class="hs-identifier hs-var">skol_arg_tys</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-495"></span><span>                          </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049073"><span class="hs-identifier hs-var">skol_pat_ty</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldLabel]
</span><a href="#local-6989586621682049112"><span class="hs-identifier hs-var">rec_fields</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-496"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-497"></span><span>    </span><span class="annot"><a href="#local-6989586621682049106"><span class="hs-identifier hs-type">tc_arg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Subst.html#Subst"><span class="hs-identifier hs-type">Subst</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-498"></span><span>     </span><span class="hs-comment">-- Look up the variable actually bound by lpat</span><span>
</span><span id="line-499"></span><span>     </span><span class="hs-comment">-- and check that it has the expected type</span><span>
</span><span id="line-500"></span><span>    </span><span id="local-6989586621682049106"><span class="annot"><span class="annottext">tc_arg :: Subst -&gt; Name -&gt; Kind -&gt; TcM (LHsExpr GhcTc)
</span><a href="#local-6989586621682049106"><span class="hs-identifier hs-var hs-var">tc_arg</span></a></span></span><span> </span><span id="local-6989586621682049114"><span class="annot"><span class="annottext">Subst
</span><a href="#local-6989586621682049114"><span class="hs-identifier hs-var">subst</span></a></span></span><span> </span><span id="local-6989586621682049115"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049115"><span class="hs-identifier hs-var">arg_name</span></a></span></span><span> </span><span id="local-6989586621682049116"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049116"><span class="hs-identifier hs-var">arg_ty</span></a></span></span><span>
</span><span id="line-501"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; TcM (LHsExpr GhcTc) -&gt; TcM (LHsExpr GhcTc)
forall a. SrcSpan -&gt; TcRn a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#setSrcSpan"><span class="hs-identifier hs-var">setSrcSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; SrcSpan
</span><a href="GHC.Types.Name.html#nameSrcSpan"><span class="hs-identifier hs-var">nameSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049115"><span class="hs-identifier hs-var">arg_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TcM (LHsExpr GhcTc) -&gt; TcM (LHsExpr GhcTc))
-&gt; TcM (LHsExpr GhcTc) -&gt; TcM (LHsExpr GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-502"></span><span>           </span><span class="hs-comment">-- Set the SrcSpan to be the binding site of the Id (#18856)</span><span>
</span><span id="line-503"></span><span>           </span><span class="hs-comment">-- e.g.  pattern P :: Int -&gt; Maybe (Int,Bool)</span><span>
</span><span id="line-504"></span><span>           </span><span class="hs-comment">--       pattern P x = Just (x,True)</span><span>
</span><span id="line-505"></span><span>           </span><span class="hs-comment">-- Before unifying x's actual type with its expected type, in tc_arg, set</span><span>
</span><span id="line-506"></span><span>           </span><span class="hs-comment">-- location to x's binding site in lpat, namely the 'x' in Just (x,True).</span><span>
</span><span id="line-507"></span><span>           </span><span class="hs-comment">-- Else the error message location is wherever tcCheckPat finished,</span><span>
</span><span id="line-508"></span><span>           </span><span class="hs-comment">-- namely the right-hand corner of the pattern</span><span>
</span><span id="line-509"></span><span>        </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682049119"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049119"><span class="hs-identifier hs-var">arg_id</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; IOEnv (Env TcGblEnv TcLclEnv) Id
</span><a href="GHC.Tc.Utils.Env.html#tcLookupId"><span class="hs-identifier hs-var">tcLookupId</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049115"><span class="hs-identifier hs-var">arg_name</span></a></span><span>
</span><span id="line-510"></span><span>           </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682049120"><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682049120"><span class="hs-identifier hs-var">wrap</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CtOrigin -&gt; UserTypeCtxt -&gt; Kind -&gt; Kind -&gt; TcM HsWrapper
</span><a href="GHC.Tc.Utils.Unify.html#tcSubTypeSigma"><span class="hs-identifier hs-var">tcSubTypeSigma</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; CtOrigin
</span><a href="GHC.Tc.Types.Origin.html#OccurrenceOf"><span class="hs-identifier hs-var">OccurrenceOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Name
</span><a href="GHC.Types.Id.html#idName"><span class="hs-identifier hs-var">idName</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049119"><span class="hs-identifier hs-var">arg_id</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-511"></span><span>                                    </span><span class="annot"><span class="annottext">UserTypeCtxt
</span><a href="GHC.Tc.Types.Origin.html#GenSigCtxt"><span class="hs-identifier hs-var">GenSigCtxt</span></a></span><span>
</span><span id="line-512"></span><span>                                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049119"><span class="hs-identifier hs-var">arg_id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-513"></span><span>                                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Subst -&gt; Kind -&gt; Kind
Subst -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Subst.html#substTy"><span class="hs-identifier hs-var">substTy</span></a></span><span> </span><span class="annot"><span class="annottext">Subst
</span><a href="#local-6989586621682049114"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049116"><span class="hs-identifier hs-var">arg_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-514"></span><span>                </span><span class="hs-comment">-- Why do we need tcSubType here?</span><span>
</span><span id="line-515"></span><span>                </span><span class="hs-comment">-- See Note [Pattern synonyms and higher rank types]</span><span>
</span><span id="line-516"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) (LocatedA (HsExpr GhcTc))
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsWrapper -&gt; LHsExpr GhcTc -&gt; LHsExpr GhcTc
</span><a href="GHC.Hs.Utils.html#mkLHsWrap"><span class="hs-identifier hs-var">mkLHsWrap</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682049120"><span class="hs-identifier hs-var">wrap</span></a></span><span> </span><span class="annot"><span class="annottext">(LHsExpr GhcTc -&gt; LHsExpr GhcTc) -&gt; LHsExpr GhcTc -&gt; LHsExpr GhcTc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">IdP GhcTc -&gt; LHsExpr GhcTc
forall (p :: Pass) a.
IsSrcSpanAnn p a =&gt;
IdP (GhcPass p) -&gt; LHsExpr (GhcPass p)
</span><a href="GHC.Hs.Utils.html#nlHsVar"><span class="hs-identifier hs-var">nlHsVar</span></a></span><span> </span><span class="annot"><span class="annottext">IdP GhcTc
Id
</span><a href="#local-6989586621682049119"><span class="hs-identifier hs-var">arg_id</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-517"></span><span>
</span><span id="line-518"></span><span id="local-6989586621682048185"><span class="annot"><a href="GHC.Tc.TyCl.PatSyn.html#skolemiseTvBndrsX"><span class="hs-identifier hs-type">skolemiseTvBndrsX</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Origin.html#SkolemInfo"><span class="hs-identifier hs-type">SkolemInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Subst.html#Subst"><span class="hs-identifier hs-type">Subst</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#VarBndr"><span class="hs-identifier hs-type">VarBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682048185"><span class="hs-identifier hs-type">flag</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-519"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Subst.html#Subst"><span class="hs-identifier hs-type">Subst</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#VarBndr"><span class="hs-identifier hs-type">VarBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682048185"><span class="hs-identifier hs-type">flag</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span></span><span>
</span><span id="line-520"></span><span class="hs-comment">-- Make new TcTyVars, all skolems with levels, but do not clone</span><span>
</span><span id="line-521"></span><span class="hs-comment">-- The level is one level deeper than the current level</span><span>
</span><span id="line-522"></span><span class="hs-comment">-- See Note [Skolemising when checking a pattern synonym]</span><span>
</span><span id="line-523"></span><span id="skolemiseTvBndrsX"><span class="annot"><span class="annottext">skolemiseTvBndrsX :: forall flag.
SkolemInfo
-&gt; Subst -&gt; [VarBndr Id flag] -&gt; TcM (Subst, [VarBndr Id flag])
</span><a href="GHC.Tc.TyCl.PatSyn.html#skolemiseTvBndrsX"><span class="hs-identifier hs-var hs-var">skolemiseTvBndrsX</span></a></span></span><span> </span><span id="local-6989586621682049131"><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621682049131"><span class="hs-identifier hs-var">skol_info</span></a></span></span><span> </span><span id="local-6989586621682049132"><span class="annot"><span class="annottext">Subst
</span><a href="#local-6989586621682049132"><span class="hs-identifier hs-var">orig_subst</span></a></span></span><span> </span><span id="local-6989586621682049133"><span class="annot"><span class="annottext">[VarBndr Id flag]
</span><a href="#local-6989586621682049133"><span class="hs-identifier hs-var">tvs</span></a></span></span><span>
</span><span id="line-524"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682049134"><span class="annot"><span class="annottext">TcLevel
</span><a href="#local-6989586621682049134"><span class="hs-identifier hs-var">tc_lvl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcM TcLevel
</span><a href="GHC.Tc.Utils.Monad.html#getTcLevel"><span class="hs-identifier hs-var">getTcLevel</span></a></span><span>
</span><span id="line-525"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682049136"><span class="annot"><span class="annottext">pushed_lvl :: TcLevel
</span><a href="#local-6989586621682049136"><span class="hs-identifier hs-var hs-var">pushed_lvl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcLevel -&gt; TcLevel
</span><a href="GHC.Tc.Utils.TcType.html#pushTcLevel"><span class="hs-identifier hs-var">pushTcLevel</span></a></span><span> </span><span class="annot"><span class="annottext">TcLevel
</span><a href="#local-6989586621682049134"><span class="hs-identifier hs-var">tc_lvl</span></a></span><span>
</span><span id="line-526"></span><span>             </span><span id="local-6989586621682049138"><span class="annot"><span class="annottext">details :: TcTyVarDetails
</span><a href="#local-6989586621682049138"><span class="hs-identifier hs-var hs-var">details</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SkolemInfo -&gt; TcLevel -&gt; Bool -&gt; TcTyVarDetails
</span><a href="GHC.Tc.Utils.TcType.html#SkolemTv"><span class="hs-identifier hs-var">SkolemTv</span></a></span><span> </span><span class="annot"><span class="annottext">SkolemInfo
</span><a href="#local-6989586621682049131"><span class="hs-identifier hs-var">skol_info</span></a></span><span> </span><span class="annot"><span class="annottext">TcLevel
</span><a href="#local-6989586621682049136"><span class="hs-identifier hs-var">pushed_lvl</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-527"></span><span>
</span><span id="line-528"></span><span>             </span><span id="local-6989586621682048212"><span class="annot"><a href="#local-6989586621682049140"><span class="hs-identifier hs-type">mk_skol_tv_x</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Subst.html#Subst"><span class="hs-identifier hs-type">Subst</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#VarBndr"><span class="hs-identifier hs-type">VarBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682048212"><span class="hs-identifier hs-type">flag</span></a></span><span>
</span><span id="line-529"></span><span>                          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Subst.html#Subst"><span class="hs-identifier hs-type">Subst</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#VarBndr"><span class="hs-identifier hs-type">VarBndr</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682048212"><span class="hs-identifier hs-type">flag</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-530"></span><span>             </span><span id="local-6989586621682049140"><span class="annot"><span class="annottext">mk_skol_tv_x :: forall flag. Subst -&gt; VarBndr Id flag -&gt; (Subst, VarBndr Id flag)
</span><a href="#local-6989586621682049140"><span class="hs-identifier hs-var hs-var">mk_skol_tv_x</span></a></span></span><span> </span><span id="local-6989586621682049141"><span class="annot"><span class="annottext">Subst
</span><a href="#local-6989586621682049141"><span class="hs-identifier hs-var">subst</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-type">Bndr</span></a></span><span> </span><span id="local-6989586621682049143"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049143"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span id="local-6989586621682049144"><span class="annot"><span class="annottext">flag
</span><a href="#local-6989586621682049144"><span class="hs-identifier hs-var">flag</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-531"></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Subst
</span><a href="#local-6989586621682049145"><span class="hs-identifier hs-var">subst'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Id -&gt; flag -&gt; VarBndr Id flag
forall var argf. var -&gt; argf -&gt; VarBndr var argf
</span><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-var">Bndr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049146"><span class="hs-identifier hs-var">new_tv</span></a></span><span> </span><span class="annot"><span class="annottext">flag
</span><a href="#local-6989586621682049144"><span class="hs-identifier hs-var">flag</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-532"></span><span>               </span><span class="hs-keyword">where</span><span>
</span><span id="line-533"></span><span>                 </span><span id="local-6989586621682049147"><span class="annot"><span class="annottext">new_kind :: Kind
</span><a href="#local-6989586621682049147"><span class="hs-identifier hs-var hs-var">new_kind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Subst -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Subst.html#substTyUnchecked"><span class="hs-identifier hs-var">substTyUnchecked</span></a></span><span> </span><span class="annot"><span class="annottext">Subst
</span><a href="#local-6989586621682049141"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Types.Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049143"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-534"></span><span>                 </span><span id="local-6989586621682049146"><span class="annot"><span class="annottext">new_tv :: Id
</span><a href="#local-6989586621682049146"><span class="hs-identifier hs-var hs-var">new_tv</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Kind -&gt; TcTyVarDetails -&gt; Id
</span><a href="GHC.Types.Var.html#mkTcTyVar"><span class="hs-identifier hs-var">mkTcTyVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Name
</span><a href="GHC.Types.Var.html#tyVarName"><span class="hs-identifier hs-var">tyVarName</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049143"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049147"><span class="hs-identifier hs-var">new_kind</span></a></span><span> </span><span class="annot"><span class="annottext">TcTyVarDetails
</span><a href="#local-6989586621682049138"><span class="hs-identifier hs-var">details</span></a></span><span>
</span><span id="line-535"></span><span>                 </span><span id="local-6989586621682049145"><span class="annot"><span class="annottext">subst' :: Subst
</span><a href="#local-6989586621682049145"><span class="hs-identifier hs-var hs-var">subst'</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Subst -&gt; Id -&gt; Id -&gt; Subst
</span><a href="GHC.Core.TyCo.Subst.html#extendTvSubstWithClone"><span class="hs-identifier hs-var">extendTvSubstWithClone</span></a></span><span> </span><span class="annot"><span class="annottext">Subst
</span><a href="#local-6989586621682049141"><span class="hs-identifier hs-var">subst</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049143"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049146"><span class="hs-identifier hs-var">new_tv</span></a></span><span>
</span><span id="line-536"></span><span>
</span><span id="line-537"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(Subst, [VarBndr Id flag]) -&gt; TcM (Subst, [VarBndr Id flag])
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Subst -&gt; VarBndr Id flag -&gt; (Subst, VarBndr Id flag))
-&gt; Subst -&gt; [VarBndr Id flag] -&gt; (Subst, [VarBndr Id flag])
forall (t :: * -&gt; *) s a b.
Traversable t =&gt;
(s -&gt; a -&gt; (s, b)) -&gt; s -&gt; t a -&gt; (s, t b)
</span><a href="../../base-4.18.3.0/src/Data.Traversable.html#mapAccumL/Data.Traversable.html#mapAccumL"><span class="hs-identifier hs-var">mapAccumL</span></a></span><span> </span><span class="annot"><span class="annottext">Subst -&gt; VarBndr Id flag -&gt; (Subst, VarBndr Id flag)
forall flag. Subst -&gt; VarBndr Id flag -&gt; (Subst, VarBndr Id flag)
</span><a href="#local-6989586621682049140"><span class="hs-identifier hs-var">mk_skol_tv_x</span></a></span><span> </span><span class="annot"><span class="annottext">Subst
</span><a href="#local-6989586621682049132"><span class="hs-identifier hs-var">orig_subst</span></a></span><span> </span><span class="annot"><span class="annottext">[VarBndr Id flag]
</span><a href="#local-6989586621682049133"><span class="hs-identifier hs-var">tvs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-538"></span><span>
</span><span id="line-539"></span><span class="hs-comment">{- Note [Skolemising when checking a pattern synonym]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Consider
   pattern P1 :: forall a. a -&gt; Maybe a
   pattern P1 x &lt;- Just x where
      P1 x = Just (x :: a)

The scoped type variable 'a' scopes over the builder RHS, Just (x::a).
But the builder RHS is typechecked much later in tcPatSynBuilderBind,
and gets its scoped type variables from the type of the builder_id.
The easiest way to achieve this is not to clone when skolemising.

Hence a special-purpose skolemiseTvBndrX here, similar to
GHC.Tc.Utils.Instantiate.tcInstSkolTyVarsX except that the latter
does cloning.

Note [Pattern synonyms and higher rank types]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Consider
  data T = MkT (forall a. a-&gt;a)

  pattern P :: (Int -&gt; Int) -&gt; T
  pattern P x &lt;- MkT x

This should work.  But in the matcher we must match against MkT, and then
instantiate its argument 'x', to get a function of type (Int -&gt; Int).
Equality is not enough!  #13752 was an example.


Note [The pattern-synonym signature splitting rule]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Given a pattern signature, we must split
     the kind-generalised variables, and
     the implicitly-bound variables
into universal and existential.  The rule is this
(see discussion on #11224):

     The universal tyvars are the ones mentioned in
          - univ_tvs: the user-specified (forall'd) universals
          - req_theta
          - res_ty
     The existential tyvars are all the rest

For example

   pattern P :: () =&gt; b -&gt; T a
   pattern P x = ...

Here 'a' is universal, and 'b' is existential.  But there is a wrinkle:
how do we split the arg_tys from req_ty?  Consider

   pattern Q :: () =&gt; b -&gt; S c -&gt; T a
   pattern Q x = ...

This is an odd example because Q has only one syntactic argument, and
so presumably is defined by a view pattern matching a function.  But
it can happen (#11977, #12108).

We don't know Q's arity from the pattern signature, so we have to wait
until we see the pattern declaration itself before deciding res_ty is,
and hence which variables are existential and which are universal.

And that in turn is why TcPatSynInfo has a separate field,
patsig_implicit_bndrs, to capture the implicitly bound type variables,
because we don't yet know how to split them up.

It's a slight compromise, because it means we don't really know the
pattern synonym's real signature until we see its declaration.  So,
for example, in hs-boot file, we may need to think what to do...
(eg don't have any implicitly-bound variables).


Note [Checking against a pattern signature]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
When checking the actual supplied pattern against the pattern synonym
signature, we need to be quite careful.

----- Provided constraints
Example

    data T a where
      MkT :: Ord a =&gt; a -&gt; T a

    pattern P :: () =&gt; Eq a =&gt; a -&gt; [T a]
    pattern P x = [MkT x]

We must check that the (Eq a) that P claims to bind (and to
make available to matches against P), is derivable from the
actual pattern.  For example:
    f (P (x::a)) = ...here (Eq a) should be available...
And yes, (Eq a) is derivable from the (Ord a) bound by P's rhs.

----- Existential type variables
Unusually, we instantiate the existential tyvars of the pattern with
*meta* type variables.  For example

    data S where
      MkS :: Eq a =&gt; [a] -&gt; S

    pattern P :: () =&gt; Eq x =&gt; x -&gt; S
    pattern P x &lt;- MkS x

The pattern synonym conceals from its client the fact that MkS has a
list inside it.  The client just thinks it's a type 'x'.  So we must
unify x := [a] during type checking, and then use the instantiating type
[a] (called ex_tys) when building the matcher.  In this case we'll get

   $mP :: S -&gt; (forall x. Ex x =&gt; x -&gt; r) -&gt; r -&gt; r
   $mP x k = case x of
               MkS a (d:Eq a) (ys:[a]) -&gt; let dl :: Eq [a]
                                              dl = $dfunEqList d
                                          in k [a] dl ys

All this applies when type-checking the /matching/ side of
a pattern synonym.  What about the /building/ side?

* For Unidirectional, there is no builder

* For ExplicitBidirectional, the builder is completely separate
  code, typechecked in tcPatSynBuilderBind

* For ImplicitBidirectional, the builder is still typechecked in
  tcPatSynBuilderBind, by converting the pattern to an expression and
  typechecking it.

  At one point, for ImplicitBidirectional I used TyVarTvs (instead of
  TauTvs) in tcCheckPatSynDecl.  But (a) strengthening the check here
  is redundant since tcPatSynBuilderBind does the job, (b) it was
  still incomplete (TyVarTvs can unify with each other), and (c) it
  didn't even work (#13441 was accepted with
  ExplicitBidirectional, but rejected if expressed in
  ImplicitBidirectional form.  Conclusion: trying to be too clever is
  a bad idea.
-}</span><span>
</span><span id="line-673"></span><span>
</span><span id="line-674"></span><span class="annot"><a href="GHC.Tc.TyCl.PatSyn.html#collectPatSynArgInfo"><span class="hs-identifier hs-type">collectPatSynArgInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsPatSynDetails"><span class="hs-identifier hs-type">HsPatSynDetails</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-675"></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span>
</span><span id="line-676"></span><span id="collectPatSynArgInfo"><span class="annot"><span class="annottext">collectPatSynArgInfo :: HsPatSynDetails GhcRn -&gt; ([Name], Bool)
</span><a href="GHC.Tc.TyCl.PatSyn.html#collectPatSynArgInfo"><span class="hs-identifier hs-var hs-var">collectPatSynArgInfo</span></a></span></span><span> </span><span id="local-6989586621682049151"><span class="annot"><span class="annottext">HsPatSynDetails GhcRn
</span><a href="#local-6989586621682049151"><span class="hs-identifier hs-var">details</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-677"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsPatSynDetails GhcRn
</span><a href="#local-6989586621682049151"><span class="hs-identifier hs-var">details</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-678"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#PrefixCon"><span class="hs-identifier hs-type">PrefixCon</span></a></span><span> </span><span class="annot"><span class="annottext">[Void]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682049153"><span class="annot"><span class="annottext">[LIdP GhcRn]
</span><a href="#local-6989586621682049153"><span class="hs-identifier hs-var">names</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LocatedN Name -&gt; Name) -&gt; [LocatedN Name] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN Name -&gt; Name
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">[LIdP GhcRn]
[LocatedN Name]
</span><a href="#local-6989586621682049153"><span class="hs-identifier hs-var">names</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-679"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#InfixCon"><span class="hs-identifier hs-type">InfixCon</span></a></span><span> </span><span id="local-6989586621682049156"><span class="annot"><span class="annottext">LIdP GhcRn
</span><a href="#local-6989586621682049156"><span class="hs-identifier hs-var">name1</span></a></span></span><span> </span><span id="local-6989586621682049157"><span class="annot"><span class="annottext">LIdP GhcRn
</span><a href="#local-6989586621682049157"><span class="hs-identifier hs-var">name2</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LocatedN Name -&gt; Name) -&gt; [LocatedN Name] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN Name -&gt; Name
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LIdP GhcRn
LocatedN Name
</span><a href="#local-6989586621682049156"><span class="hs-identifier hs-var">name1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LIdP GhcRn
LocatedN Name
</span><a href="#local-6989586621682049157"><span class="hs-identifier hs-var">name2</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-680"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#RecCon"><span class="hs-identifier hs-type">RecCon</span></a></span><span> </span><span id="local-6989586621682049159"><span class="annot"><span class="annottext">[RecordPatSynField GhcRn]
</span><a href="#local-6989586621682049159"><span class="hs-identifier hs-var">names</span></a></span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(RecordPatSynField GhcRn -&gt; Name)
-&gt; [RecordPatSynField GhcRn] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN Name -&gt; Name
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">(LocatedN Name -&gt; Name)
-&gt; (RecordPatSynField GhcRn -&gt; LocatedN Name)
-&gt; RecordPatSynField GhcRn
-&gt; Name
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">RecordPatSynField GhcRn -&gt; LIdP GhcRn
RecordPatSynField GhcRn -&gt; LocatedN Name
forall pass. RecordPatSynField pass -&gt; LIdP pass
</span><a href="Language.Haskell.Syntax.Binds.html#recordPatSynPatVar"><span class="hs-identifier hs-var">recordPatSynPatVar</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[RecordPatSynField GhcRn]
</span><a href="#local-6989586621682049159"><span class="hs-identifier hs-var">names</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-681"></span><span>
</span><span id="line-682"></span><span id="local-6989586621682048164"><span class="annot"><a href="GHC.Tc.TyCl.PatSyn.html#wrongNumberOfParmsErr"><span class="hs-identifier hs-type">wrongNumberOfParmsErr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Arity"><span class="hs-identifier hs-type">Arity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#Arity"><span class="hs-identifier hs-type">Arity</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682048164"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-683"></span><span id="wrongNumberOfParmsErr"><span class="annot"><span class="annottext">wrongNumberOfParmsErr :: forall a. Name -&gt; Int -&gt; Int -&gt; TcM a
</span><a href="GHC.Tc.TyCl.PatSyn.html#wrongNumberOfParmsErr"><span class="hs-identifier hs-var hs-var">wrongNumberOfParmsErr</span></a></span></span><span> </span><span id="local-6989586621682049178"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049178"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621682049179"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682049179"><span class="hs-identifier hs-var">decl_arity</span></a></span></span><span> </span><span id="local-6989586621682049180"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682049180"><span class="hs-identifier hs-var">missing</span></a></span></span><span>
</span><span id="line-684"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TcRnMessage -&gt; TcM a
forall a. TcRnMessage -&gt; TcM a
</span><a href="GHC.Tc.Utils.Monad.html#failWithTc"><span class="hs-identifier hs-var">failWithTc</span></a></span><span> </span><span class="annot"><span class="annottext">(TcRnMessage -&gt; TcM a) -&gt; TcRnMessage -&gt; TcM a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DiagnosticMessage -&gt; TcRnMessage
forall a.
(Diagnostic a, Typeable a, DiagnosticOpts a ~ NoDiagnosticOpts) =&gt;
a -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#mkTcRnUnknownMessage"><span class="hs-identifier hs-var">mkTcRnUnknownMessage</span></a></span><span> </span><span class="annot"><span class="annottext">(DiagnosticMessage -&gt; TcRnMessage)
-&gt; DiagnosticMessage -&gt; TcRnMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[GhcHint] -&gt; SDoc -&gt; DiagnosticMessage
</span><a href="GHC.Types.Error.html#mkPlainError"><span class="hs-identifier hs-var">mkPlainError</span></a></span><span> </span><span class="annot"><span class="annottext">[GhcHint]
</span><a href="GHC.Types.Error.html#noHints"><span class="hs-identifier hs-var">noHints</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; DiagnosticMessage) -&gt; SDoc -&gt; DiagnosticMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-685"></span><span>    </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Pattern synonym&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049178"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;has&quot;</span></span><span>
</span><span id="line-686"></span><span>          </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#speakNOf"><span class="hs-identifier hs-var">speakNOf</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682049179"><span class="hs-identifier hs-var">decl_arity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;argument&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-687"></span><span>       </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;but its type signature has&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc
forall doc. IsLine doc =&gt; Int -&gt; doc
</span><a href="GHC.Utils.Outputable.html#int"><span class="hs-identifier hs-var">int</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682049180"><span class="hs-identifier hs-var">missing</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;fewer arrows&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-688"></span><span>
</span><span id="line-689"></span><span class="hs-comment">-------------------------</span><span>
</span><span id="line-690"></span><span class="hs-comment">-- Shared by both tcInferPatSyn and tcCheckPatSyn</span><span>
</span><span id="line-691"></span><span class="annot"><a href="GHC.Tc.TyCl.PatSyn.html#tc_patsyn_finish"><span class="hs-identifier hs-type">tc_patsyn_finish</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>   </span><span class="annot"><span class="hs-comment">-- ^ PatSyn Name</span></span><span>
</span><span id="line-692"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsPatSynDir"><span class="hs-identifier hs-type">HsPatSynDir</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ PatSyn type (Uni/Bidir/ExplicitBidir)</span></span><span>
</span><span id="line-693"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>              </span><span class="annot"><span class="hs-comment">-- ^ Whether infix</span></span><span>
</span><span id="line-694"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>        </span><span class="annot"><span class="hs-comment">-- ^ Pattern of the PatSyn</span></span><span>
</span><span id="line-695"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Gen.Sig.html#TcPragEnv"><span class="hs-identifier hs-type">TcPragEnv</span></a></span><span>
</span><span id="line-696"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcInvisTVBinder"><span class="hs-identifier hs-type">TcInvisTVBinder</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#PredType"><span class="hs-identifier hs-type">PredType</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-697"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcInvisTVBinder"><span class="hs-identifier hs-type">TcInvisTVBinder</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#PredType"><span class="hs-identifier hs-type">PredType</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-698"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcTypeFRR"><span class="hs-identifier hs-type">TcTypeFRR</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-699"></span><span>                   </span><span class="hs-comment">-- ^ Pattern arguments and types.</span><span>
</span><span id="line-700"></span><span>                   </span><span class="hs-comment">-- These must have a syntactically fixed RuntimeRep as per</span><span>
</span><span id="line-701"></span><span>                   </span><span class="hs-comment">-- Note [Fixed RuntimeRep] in GHC.Tc.Utils.Concrete.</span><span>
</span><span id="line-702"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span>            </span><span class="annot"><span class="hs-comment">-- ^ Pattern type</span></span><span>
</span><span id="line-703"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.FieldLabel.html#FieldLabel"><span class="hs-identifier hs-type">FieldLabel</span></a></span><span class="hs-special">]</span><span>      </span><span class="hs-comment">-- ^ Selector names</span><span>
</span><span id="line-704"></span><span>                 </span><span class="hs-comment">-- ^ Whether fields, empty if not record PatSyn</span><span>
</span><span id="line-705"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcGblEnv"><span class="hs-identifier hs-type">TcGblEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-706"></span><span id="tc_patsyn_finish"><span class="annot"><span class="annottext">tc_patsyn_finish :: LocatedN Name
-&gt; HsPatSynDir GhcRn
-&gt; Bool
-&gt; LPat GhcTc
-&gt; TcPragEnv
-&gt; ([VarBndr Id Specificity], [Kind], TcEvBinds, [Id])
-&gt; ([VarBndr Id Specificity], [Kind], [Kind], [EvTerm])
-&gt; ([LHsExpr GhcTc], [Kind])
-&gt; Kind
-&gt; [FieldLabel]
-&gt; TcM (LHsBinds GhcTc, TcGblEnv)
</span><a href="GHC.Tc.TyCl.PatSyn.html#tc_patsyn_finish"><span class="hs-identifier hs-var hs-var">tc_patsyn_finish</span></a></span></span><span> </span><span id="local-6989586621682049187"><span class="annot"><span class="annottext">LocatedN Name
</span><a href="#local-6989586621682049187"><span class="hs-identifier hs-var">lname</span></a></span></span><span> </span><span id="local-6989586621682049188"><span class="annot"><span class="annottext">HsPatSynDir GhcRn
</span><a href="#local-6989586621682049188"><span class="hs-identifier hs-var">dir</span></a></span></span><span> </span><span id="local-6989586621682049189"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682049189"><span class="hs-identifier hs-var">is_infix</span></a></span></span><span> </span><span id="local-6989586621682049190"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621682049190"><span class="hs-identifier hs-var">lpat'</span></a></span></span><span> </span><span id="local-6989586621682049191"><span class="annot"><span class="annottext">TcPragEnv
</span><a href="#local-6989586621682049191"><span class="hs-identifier hs-var">prag_fn</span></a></span></span><span>
</span><span id="line-707"></span><span>                 </span><span class="hs-special">(</span><span id="local-6989586621682049192"><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049192"><span class="hs-identifier hs-var">univ_tvs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049193"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049193"><span class="hs-identifier hs-var">req_theta</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049194"><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621682049194"><span class="hs-identifier hs-var">req_ev_binds</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049195"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682049195"><span class="hs-identifier hs-var">req_dicts</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-708"></span><span>                 </span><span class="hs-special">(</span><span id="local-6989586621682049196"><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049196"><span class="hs-identifier hs-var">ex_tvs</span></a></span></span><span class="hs-special">,</span><span>   </span><span id="local-6989586621682049197"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049197"><span class="hs-identifier hs-var">ex_tys</span></a></span></span><span class="hs-special">,</span><span>    </span><span id="local-6989586621682049198"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049198"><span class="hs-identifier hs-var">prov_theta</span></a></span></span><span class="hs-special">,</span><span>   </span><span id="local-6989586621682049199"><span class="annot"><span class="annottext">[EvTerm]
</span><a href="#local-6989586621682049199"><span class="hs-identifier hs-var">prov_dicts</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-709"></span><span>                 </span><span class="hs-special">(</span><span id="local-6989586621682049200"><span class="annot"><span class="annottext">[LHsExpr GhcTc]
</span><a href="#local-6989586621682049200"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049201"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049201"><span class="hs-identifier hs-var">arg_tys</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-710"></span><span>                 </span><span id="local-6989586621682049202"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049202"><span class="hs-identifier hs-var">pat_ty</span></a></span></span><span> </span><span id="local-6989586621682049203"><span class="annot"><span class="annottext">[FieldLabel]
</span><a href="#local-6989586621682049203"><span class="hs-identifier hs-var">field_labels</span></a></span></span><span>
</span><span id="line-711"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- Zonk everything.  We are about to build a final PatSyn</span><span>
</span><span id="line-712"></span><span>         </span><span class="hs-comment">-- so there had better be no unification variables in there</span><span>
</span><span id="line-713"></span><span>
</span><span id="line-714"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682049204"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621682049204"><span class="hs-identifier hs-var">ze</span></a></span></span><span>              </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkFlexi -&gt; TcM ZonkEnv
</span><a href="GHC.Tc.Utils.Zonk.html#mkEmptyZonkEnv"><span class="hs-identifier hs-var">mkEmptyZonkEnv</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkFlexi
</span><a href="GHC.Tc.Utils.Zonk.html#NoFlexi"><span class="hs-identifier hs-var">NoFlexi</span></a></span><span>
</span><span id="line-715"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682049207"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621682049207"><span class="hs-identifier hs-var">ze</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049208"><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049208"><span class="hs-identifier hs-var">univ_tvs'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; [VarBndr Id Specificity]
-&gt; TcM (ZonkEnv, [VarBndr Id Specificity])
forall vis.
ZonkEnv -&gt; [VarBndr Id vis] -&gt; TcM (ZonkEnv, [VarBndr Id vis])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyVarBindersX"><span class="hs-identifier hs-var">zonkTyVarBindersX</span></a></span><span>   </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621682049204"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049192"><span class="hs-identifier hs-var">univ_tvs</span></a></span><span>
</span><span id="line-716"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682049210"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049210"><span class="hs-identifier hs-var">req_theta'</span></a></span></span><span>      </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [Kind] -&gt; TcM [Kind]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypesToTypesX"><span class="hs-identifier hs-var">zonkTcTypesToTypesX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621682049207"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049193"><span class="hs-identifier hs-var">req_theta</span></a></span><span>
</span><span id="line-717"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682049212"><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621682049212"><span class="hs-identifier hs-var">ze</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049213"><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049213"><span class="hs-identifier hs-var">ex_tvs'</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv
-&gt; [VarBndr Id Specificity]
-&gt; TcM (ZonkEnv, [VarBndr Id Specificity])
forall vis.
ZonkEnv -&gt; [VarBndr Id vis] -&gt; TcM (ZonkEnv, [VarBndr Id vis])
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTyVarBindersX"><span class="hs-identifier hs-var">zonkTyVarBindersX</span></a></span><span>   </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621682049207"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049196"><span class="hs-identifier hs-var">ex_tvs</span></a></span><span>
</span><span id="line-718"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682049214"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049214"><span class="hs-identifier hs-var">prov_theta'</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [Kind] -&gt; TcM [Kind]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypesToTypesX"><span class="hs-identifier hs-var">zonkTcTypesToTypesX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621682049212"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049198"><span class="hs-identifier hs-var">prov_theta</span></a></span><span>
</span><span id="line-719"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682049215"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049215"><span class="hs-identifier hs-var">pat_ty'</span></a></span></span><span>         </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; Kind -&gt; TcM Kind
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypeToTypeX"><span class="hs-identifier hs-var">zonkTcTypeToTypeX</span></a></span><span>   </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621682049212"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049202"><span class="hs-identifier hs-var">pat_ty</span></a></span><span>
</span><span id="line-720"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682049217"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049217"><span class="hs-identifier hs-var">arg_tys'</span></a></span></span><span>        </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ZonkEnv -&gt; [Kind] -&gt; TcM [Kind]
</span><a href="GHC.Tc.Utils.Zonk.html#zonkTcTypesToTypesX"><span class="hs-identifier hs-var">zonkTcTypesToTypesX</span></a></span><span> </span><span class="annot"><span class="annottext">ZonkEnv
</span><a href="#local-6989586621682049212"><span class="hs-identifier hs-var">ze</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049201"><span class="hs-identifier hs-var">arg_tys</span></a></span><span>
</span><span id="line-721"></span><span>
</span><span id="line-722"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682049218"><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621682049218"><span class="hs-identifier hs-var">env1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049219"><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049219"><span class="hs-identifier hs-var">univ_tvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TidyEnv
-&gt; [VarBndr Id Specificity] -&gt; (TidyEnv, [VarBndr Id Specificity])
forall vis.
TidyEnv -&gt; [VarBndr Id vis] -&gt; (TidyEnv, [VarBndr Id vis])
</span><a href="GHC.Core.TyCo.Tidy.html#tidyForAllTyBinders"><span class="hs-identifier hs-var">tidyForAllTyBinders</span></a></span><span> </span><span class="annot"><span class="annottext">TidyEnv
</span><a href="GHC.Types.Var.Env.html#emptyTidyEnv"><span class="hs-identifier hs-var">emptyTidyEnv</span></a></span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049208"><span class="hs-identifier hs-var">univ_tvs'</span></a></span><span>
</span><span id="line-723"></span><span>             </span><span class="hs-special">(</span><span id="local-6989586621682049220"><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621682049220"><span class="hs-identifier hs-var">env2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049221"><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049221"><span class="hs-identifier hs-var">ex_tvs</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TidyEnv
-&gt; [VarBndr Id Specificity] -&gt; (TidyEnv, [VarBndr Id Specificity])
forall vis.
TidyEnv -&gt; [VarBndr Id vis] -&gt; (TidyEnv, [VarBndr Id vis])
</span><a href="GHC.Core.TyCo.Tidy.html#tidyForAllTyBinders"><span class="hs-identifier hs-var">tidyForAllTyBinders</span></a></span><span> </span><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621682049218"><span class="hs-identifier hs-var">env1</span></a></span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049213"><span class="hs-identifier hs-var">ex_tvs'</span></a></span><span>
</span><span id="line-724"></span><span>             </span><span id="local-6989586621682049222"><span class="annot"><span class="annottext">req_theta :: [Kind]
</span><a href="#local-6989586621682049222"><span class="hs-identifier hs-var hs-var">req_theta</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TidyEnv -&gt; [Kind] -&gt; [Kind]
</span><a href="GHC.Core.TyCo.Tidy.html#tidyTypes"><span class="hs-identifier hs-var">tidyTypes</span></a></span><span> </span><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621682049220"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049210"><span class="hs-identifier hs-var">req_theta'</span></a></span><span>
</span><span id="line-725"></span><span>             </span><span id="local-6989586621682049223"><span class="annot"><span class="annottext">prov_theta :: [Kind]
</span><a href="#local-6989586621682049223"><span class="hs-identifier hs-var hs-var">prov_theta</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TidyEnv -&gt; [Kind] -&gt; [Kind]
</span><a href="GHC.Core.TyCo.Tidy.html#tidyTypes"><span class="hs-identifier hs-var">tidyTypes</span></a></span><span> </span><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621682049220"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049214"><span class="hs-identifier hs-var">prov_theta'</span></a></span><span>
</span><span id="line-726"></span><span>             </span><span id="local-6989586621682049224"><span class="annot"><span class="annottext">arg_tys :: [Kind]
</span><a href="#local-6989586621682049224"><span class="hs-identifier hs-var hs-var">arg_tys</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TidyEnv -&gt; [Kind] -&gt; [Kind]
</span><a href="GHC.Core.TyCo.Tidy.html#tidyTypes"><span class="hs-identifier hs-var">tidyTypes</span></a></span><span> </span><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621682049220"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049217"><span class="hs-identifier hs-var">arg_tys'</span></a></span><span>
</span><span id="line-727"></span><span>             </span><span id="local-6989586621682049225"><span class="annot"><span class="annottext">pat_ty :: Kind
</span><a href="#local-6989586621682049225"><span class="hs-identifier hs-var hs-var">pat_ty</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TidyEnv -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Tidy.html#tidyType"><span class="hs-identifier hs-var">tidyType</span></a></span><span>  </span><span class="annot"><span class="annottext">TidyEnv
</span><a href="#local-6989586621682049220"><span class="hs-identifier hs-var">env2</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049215"><span class="hs-identifier hs-var">pat_ty'</span></a></span><span>
</span><span id="line-728"></span><span>
</span><span id="line-729"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc_patsyn_finish {&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; TcRn ()) -&gt; SDoc -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-730"></span><span>           </span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN Name -&gt; Name
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN Name
</span><a href="#local-6989586621682049187"><span class="hs-identifier hs-var">lname</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcTc -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc) -&gt; Pat GhcTc
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621682049190"><span class="hs-identifier hs-var">lpat'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-731"></span><span>           </span><span class="annot"><span class="annottext">([VarBndr Id Specificity], [Kind], TcEvBinds, [Id]) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049219"><span class="hs-identifier hs-var">univ_tvs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049222"><span class="hs-identifier hs-var">req_theta</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621682049194"><span class="hs-identifier hs-var">req_ev_binds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682049195"><span class="hs-identifier hs-var">req_dicts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-732"></span><span>           </span><span class="annot"><span class="annottext">([VarBndr Id Specificity], [Kind], [EvTerm]) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049221"><span class="hs-identifier hs-var">ex_tvs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049223"><span class="hs-identifier hs-var">prov_theta</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[EvTerm]
</span><a href="#local-6989586621682049199"><span class="hs-identifier hs-var">prov_dicts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-733"></span><span>           </span><span class="annot"><span class="annottext">[LocatedA (HsExpr GhcTc)] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsExpr GhcTc]
[LocatedA (HsExpr GhcTc)]
</span><a href="#local-6989586621682049200"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-734"></span><span>           </span><span class="annot"><span class="annottext">[Kind] -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049224"><span class="hs-identifier hs-var">arg_tys</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span>
</span><span id="line-735"></span><span>           </span><span class="annot"><span class="annottext">Kind -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049225"><span class="hs-identifier hs-var">pat_ty</span></a></span><span>
</span><span id="line-736"></span><span>
</span><span id="line-737"></span><span>       </span><span class="hs-comment">-- Make the 'matcher'</span><span>
</span><span id="line-738"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682049226"><span class="annot"><span class="annottext">PatSynMatcher
</span><a href="#local-6989586621682049226"><span class="hs-identifier hs-var">matcher</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049227"><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
</span><a href="#local-6989586621682049227"><span class="hs-identifier hs-var">matcher_bind</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LocatedN Name
-&gt; LPat GhcTc
-&gt; TcPragEnv
-&gt; ([Id], [Kind], TcEvBinds, [Id])
-&gt; ([Id], [Kind], [Kind], [EvTerm])
-&gt; ([LHsExpr GhcTc], [Kind])
-&gt; Kind
-&gt; TcM (PatSynMatcher, LHsBinds GhcTc)
</span><a href="GHC.Tc.TyCl.PatSyn.html#tcPatSynMatcher"><span class="hs-identifier hs-var">tcPatSynMatcher</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN Name
</span><a href="#local-6989586621682049187"><span class="hs-identifier hs-var">lname</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621682049190"><span class="hs-identifier hs-var">lpat'</span></a></span><span> </span><span class="annot"><span class="annottext">TcPragEnv
</span><a href="#local-6989586621682049191"><span class="hs-identifier hs-var">prag_fn</span></a></span><span>
</span><span id="line-739"></span><span>                                         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VarBndr Id Specificity] -&gt; [Id]
forall tv argf. [VarBndr tv argf] -&gt; [tv]
</span><a href="GHC.Types.Var.html#binderVars"><span class="hs-identifier hs-var">binderVars</span></a></span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049219"><span class="hs-identifier hs-var">univ_tvs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049222"><span class="hs-identifier hs-var">req_theta</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621682049194"><span class="hs-identifier hs-var">req_ev_binds</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682049195"><span class="hs-identifier hs-var">req_dicts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-740"></span><span>                                         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VarBndr Id Specificity] -&gt; [Id]
forall tv argf. [VarBndr tv argf] -&gt; [tv]
</span><a href="GHC.Types.Var.html#binderVars"><span class="hs-identifier hs-var">binderVars</span></a></span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049221"><span class="hs-identifier hs-var">ex_tvs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049197"><span class="hs-identifier hs-var">ex_tys</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049223"><span class="hs-identifier hs-var">prov_theta</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[EvTerm]
</span><a href="#local-6989586621682049199"><span class="hs-identifier hs-var">prov_dicts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-741"></span><span>                                         </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LHsExpr GhcTc]
</span><a href="#local-6989586621682049200"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049224"><span class="hs-identifier hs-var">arg_tys</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-742"></span><span>                                         </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049225"><span class="hs-identifier hs-var">pat_ty</span></a></span><span>
</span><span id="line-743"></span><span>
</span><span id="line-744"></span><span>       </span><span class="hs-comment">-- Make the 'builder'</span><span>
</span><span id="line-745"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682049229"><span class="annot"><span class="annottext">PatSynBuilder
</span><a href="#local-6989586621682049229"><span class="hs-identifier hs-var">builder</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsPatSynDir GhcRn
-&gt; LocatedN Name
-&gt; [VarBndr Id Specificity]
-&gt; [Kind]
-&gt; [VarBndr Id Specificity]
-&gt; [Kind]
-&gt; [Kind]
-&gt; Kind
-&gt; TcM PatSynBuilder
forall a.
HsPatSynDir a
-&gt; LocatedN Name
-&gt; [VarBndr Id Specificity]
-&gt; [Kind]
-&gt; [VarBndr Id Specificity]
-&gt; [Kind]
-&gt; [Kind]
-&gt; Kind
-&gt; TcM PatSynBuilder
</span><a href="GHC.Tc.TyCl.PatSyn.html#mkPatSynBuilder"><span class="hs-identifier hs-var">mkPatSynBuilder</span></a></span><span> </span><span class="annot"><span class="annottext">HsPatSynDir GhcRn
</span><a href="#local-6989586621682049188"><span class="hs-identifier hs-var">dir</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN Name
</span><a href="#local-6989586621682049187"><span class="hs-identifier hs-var">lname</span></a></span><span>
</span><span id="line-746"></span><span>                                    </span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049219"><span class="hs-identifier hs-var">univ_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049222"><span class="hs-identifier hs-var">req_theta</span></a></span><span>
</span><span id="line-747"></span><span>                                    </span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049221"><span class="hs-identifier hs-var">ex_tvs</span></a></span><span>   </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049223"><span class="hs-identifier hs-var">prov_theta</span></a></span><span>
</span><span id="line-748"></span><span>                                    </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049224"><span class="hs-identifier hs-var">arg_tys</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049225"><span class="hs-identifier hs-var">pat_ty</span></a></span><span>
</span><span id="line-749"></span><span>
</span><span id="line-750"></span><span>       </span><span class="hs-comment">-- Make the PatSyn itself</span><span>
</span><span id="line-751"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682049231"><span class="annot"><span class="annottext">patSyn :: PatSyn
</span><a href="#local-6989586621682049231"><span class="hs-identifier hs-var hs-var">patSyn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Bool
-&gt; ([VarBndr Id Specificity], [Kind])
-&gt; ([VarBndr Id Specificity], [Kind])
-&gt; [Kind]
-&gt; Kind
-&gt; PatSynMatcher
-&gt; PatSynBuilder
-&gt; [FieldLabel]
-&gt; PatSyn
</span><a href="GHC.Core.PatSyn.html#mkPatSyn"><span class="hs-identifier hs-var">mkPatSyn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN Name -&gt; Name
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN Name
</span><a href="#local-6989586621682049187"><span class="hs-identifier hs-var">lname</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682049189"><span class="hs-identifier hs-var">is_infix</span></a></span><span>
</span><span id="line-752"></span><span>                        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049219"><span class="hs-identifier hs-var">univ_tvs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049222"><span class="hs-identifier hs-var">req_theta</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-753"></span><span>                        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049221"><span class="hs-identifier hs-var">ex_tvs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049223"><span class="hs-identifier hs-var">prov_theta</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-754"></span><span>                        </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049224"><span class="hs-identifier hs-var">arg_tys</span></a></span><span>
</span><span id="line-755"></span><span>                        </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049225"><span class="hs-identifier hs-var">pat_ty</span></a></span><span>
</span><span id="line-756"></span><span>                        </span><span class="annot"><span class="annottext">PatSynMatcher
</span><a href="#local-6989586621682049226"><span class="hs-identifier hs-var">matcher</span></a></span><span> </span><span class="annot"><span class="annottext">PatSynBuilder
</span><a href="#local-6989586621682049229"><span class="hs-identifier hs-var">builder</span></a></span><span>
</span><span id="line-757"></span><span>                        </span><span class="annot"><span class="annottext">[FieldLabel]
</span><a href="#local-6989586621682049203"><span class="hs-identifier hs-var">field_labels</span></a></span><span>
</span><span id="line-758"></span><span>
</span><span id="line-759"></span><span>       </span><span class="hs-comment">-- Selectors</span><span>
</span><span id="line-760"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682049232"><span class="annot"><span class="annottext">FieldSelectors
</span><a href="#local-6989586621682049232"><span class="hs-identifier hs-var">has_sel</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; FieldSelectors
</span><a href="GHC.Driver.Session.html#xopt_FieldSelectors"><span class="hs-identifier hs-var">xopt_FieldSelectors</span></a></span><span> </span><span class="annot"><span class="annottext">(DynFlags -&gt; FieldSelectors)
-&gt; IOEnv (Env TcGblEnv TcLclEnv) DynFlags
-&gt; IOEnv (Env TcGblEnv TcLclEnv) FieldSelectors
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/Data.Functor.html#%3C%24%3E/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) DynFlags
forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-761"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682049234"><span class="annot"><span class="annottext">rn_rec_sel_binds :: [(Id, LHsBind GhcRn)]
</span><a href="#local-6989586621682049234"><span class="hs-identifier hs-var hs-var">rn_rec_sel_binds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatSyn -&gt; [FieldLabel] -&gt; FieldSelectors -&gt; [(Id, LHsBind GhcRn)]
</span><a href="GHC.Tc.TyCl.PatSyn.html#mkPatSynRecSelBinds"><span class="hs-identifier hs-var">mkPatSynRecSelBinds</span></a></span><span> </span><span class="annot"><span class="annottext">PatSyn
</span><a href="#local-6989586621682049231"><span class="hs-identifier hs-var">patSyn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatSyn -&gt; [FieldLabel]
</span><a href="GHC.Core.PatSyn.html#patSynFieldLabels"><span class="hs-identifier hs-var">patSynFieldLabels</span></a></span><span> </span><span class="annot"><span class="annottext">PatSyn
</span><a href="#local-6989586621682049231"><span class="hs-identifier hs-var">patSyn</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FieldSelectors
</span><a href="#local-6989586621682049232"><span class="hs-identifier hs-var">has_sel</span></a></span><span>
</span><span id="line-762"></span><span>             </span><span id="local-6989586621682049237"><span class="annot"><span class="annottext">tything :: TyThing
</span><a href="#local-6989586621682049237"><span class="hs-identifier hs-var hs-var">tything</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConLike -&gt; TyThing
</span><a href="GHC.Types.TyThing.html#AConLike"><span class="hs-identifier hs-var">AConLike</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatSyn -&gt; ConLike
</span><a href="GHC.Core.ConLike.html#PatSynCon"><span class="hs-identifier hs-var">PatSynCon</span></a></span><span> </span><span class="annot"><span class="annottext">PatSyn
</span><a href="#local-6989586621682049231"><span class="hs-identifier hs-var">patSyn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-763"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682049238"><span class="annot"><span class="annottext">TcGblEnv
</span><a href="#local-6989586621682049238"><span class="hs-identifier hs-var">tcg_env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[TyThing] -&gt; TcM TcGblEnv -&gt; TcM TcGblEnv
forall r. [TyThing] -&gt; TcM r -&gt; TcM r
</span><a href="GHC.Tc.Utils.Env.html#tcExtendGlobalEnv"><span class="hs-identifier hs-var">tcExtendGlobalEnv</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">TyThing
</span><a href="#local-6989586621682049237"><span class="hs-identifier hs-var">tything</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(TcM TcGblEnv -&gt; TcM TcGblEnv) -&gt; TcM TcGblEnv -&gt; TcM TcGblEnv
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-764"></span><span>                    </span><span class="annot"><span class="annottext">[(Id, LHsBind GhcRn)] -&gt; TcM TcGblEnv
</span><a href="GHC.Tc.TyCl.Utils.html#tcRecSelBinds"><span class="hs-identifier hs-var">tcRecSelBinds</span></a></span><span> </span><span class="annot"><span class="annottext">[(Id, LHsBind GhcRn)]
</span><a href="#local-6989586621682049234"><span class="hs-identifier hs-var">rn_rec_sel_binds</span></a></span><span>
</span><span id="line-765"></span><span>
</span><span id="line-766"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tc_patsyn_finish }&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-767"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)), TcGblEnv)
-&gt; TcRn
     (Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)), TcGblEnv)
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
</span><a href="#local-6989586621682049227"><span class="hs-identifier hs-var">matcher_bind</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TcGblEnv
</span><a href="#local-6989586621682049238"><span class="hs-identifier hs-var">tcg_env</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-768"></span><span>
</span><span id="line-769"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
         Constructing the &quot;matcher&quot; Id and its binding
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-776"></span><span>
</span><span id="line-777"></span><span class="annot"><a href="GHC.Tc.TyCl.PatSyn.html#tcPatSynMatcher"><span class="hs-identifier hs-type">tcPatSynMatcher</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-778"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>
</span><span id="line-779"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Gen.Sig.html#TcPragEnv"><span class="hs-identifier hs-type">TcPragEnv</span></a></span><span>
</span><span id="line-780"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ThetaType"><span class="hs-identifier hs-type">ThetaType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#TcEvBinds"><span class="hs-identifier hs-type">TcEvBinds</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-781"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TcTyVar"><span class="hs-identifier hs-type">TcTyVar</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ThetaType"><span class="hs-identifier hs-type">ThetaType</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Types.Evidence.html#EvTerm"><span class="hs-identifier hs-type">EvTerm</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-782"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-783"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcType"><span class="hs-identifier hs-type">TcType</span></a></span><span>
</span><span id="line-784"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.PatSyn.html#PatSynMatcher"><span class="hs-identifier hs-type">PatSynMatcher</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-785"></span><span class="hs-comment">-- See Note [Matchers and builders for pattern synonyms] in GHC.Core.PatSyn</span><span>
</span><span id="line-786"></span><span id="tcPatSynMatcher"><span class="annot"><span class="annottext">tcPatSynMatcher :: LocatedN Name
-&gt; LPat GhcTc
-&gt; TcPragEnv
-&gt; ([Id], [Kind], TcEvBinds, [Id])
-&gt; ([Id], [Kind], [Kind], [EvTerm])
-&gt; ([LHsExpr GhcTc], [Kind])
-&gt; Kind
-&gt; TcM (PatSynMatcher, LHsBinds GhcTc)
</span><a href="GHC.Tc.TyCl.PatSyn.html#tcPatSynMatcher"><span class="hs-identifier hs-var hs-var">tcPatSynMatcher</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682049242"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682049242"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682049243"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049243"><span class="hs-identifier hs-var">ps_name</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682049244"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621682049244"><span class="hs-identifier hs-var">lpat</span></a></span></span><span> </span><span id="local-6989586621682049245"><span class="annot"><span class="annottext">TcPragEnv
</span><a href="#local-6989586621682049245"><span class="hs-identifier hs-var">prag_fn</span></a></span></span><span>
</span><span id="line-787"></span><span>                </span><span class="hs-special">(</span><span id="local-6989586621682049246"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682049246"><span class="hs-identifier hs-var">univ_tvs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049247"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049247"><span class="hs-identifier hs-var">req_theta</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049248"><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621682049248"><span class="hs-identifier hs-var">req_ev_binds</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049249"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682049249"><span class="hs-identifier hs-var">req_dicts</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-788"></span><span>                </span><span class="hs-special">(</span><span id="local-6989586621682049250"><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682049250"><span class="hs-identifier hs-var">ex_tvs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049251"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049251"><span class="hs-identifier hs-var">ex_tys</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049252"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049252"><span class="hs-identifier hs-var">prov_theta</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049253"><span class="annot"><span class="annottext">[EvTerm]
</span><a href="#local-6989586621682049253"><span class="hs-identifier hs-var">prov_dicts</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-789"></span><span>                </span><span class="hs-special">(</span><span id="local-6989586621682049254"><span class="annot"><span class="annottext">[LHsExpr GhcTc]
</span><a href="#local-6989586621682049254"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049255"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049255"><span class="hs-identifier hs-var">arg_tys</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682049256"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049256"><span class="hs-identifier hs-var">pat_ty</span></a></span></span><span>
</span><span id="line-790"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682049257"><span class="annot"><span class="annottext">loc' :: SrcSpan
</span><a href="#local-6989586621682049257"><span class="hs-identifier hs-var hs-var">loc'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; SrcSpan
forall a. SrcSpanAnn' a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682049242"><span class="hs-identifier hs-var">loc</span></a></span><span>
</span><span id="line-791"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682049259"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049259"><span class="hs-identifier hs-var">rr_name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; SrcSpan -&gt; TcRnIf TcGblEnv TcLclEnv Name
</span><a href="GHC.Tc.Utils.Monad.html#newNameAt"><span class="hs-identifier hs-var">newNameAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#mkTyVarOccFS"><span class="hs-identifier hs-var">mkTyVarOccFS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rep&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682049257"><span class="hs-identifier hs-var">loc'</span></a></span><span>
</span><span id="line-792"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682049263"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049263"><span class="hs-identifier hs-var">tv_name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OccName -&gt; SrcSpan -&gt; TcRnIf TcGblEnv TcLclEnv Name
</span><a href="GHC.Tc.Utils.Monad.html#newNameAt"><span class="hs-identifier hs-var">newNameAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#mkTyVarOccFS"><span class="hs-identifier hs-var">mkTyVarOccFS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;r&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>   </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621682049257"><span class="hs-identifier hs-var">loc'</span></a></span><span>
</span><span id="line-793"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682049264"><span class="annot"><span class="annottext">rr_tv :: Id
</span><a href="#local-6989586621682049264"><span class="hs-identifier hs-var hs-var">rr_tv</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Var.html#mkTyVar"><span class="hs-identifier hs-var">mkTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049259"><span class="hs-identifier hs-var">rr_name</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.html#runtimeRepTy"><span class="hs-identifier hs-var">runtimeRepTy</span></a></span><span>
</span><span id="line-794"></span><span>             </span><span id="local-6989586621682049267"><span class="annot"><span class="annottext">rr :: Kind
</span><a href="#local-6989586621682049267"><span class="hs-identifier hs-var hs-var">rr</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkTyVarTy"><span class="hs-identifier hs-var">mkTyVarTy</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049264"><span class="hs-identifier hs-var">rr_tv</span></a></span><span>
</span><span id="line-795"></span><span>             </span><span id="local-6989586621682049269"><span class="annot"><span class="annottext">res_tv :: Id
</span><a href="#local-6989586621682049269"><span class="hs-identifier hs-var hs-var">res_tv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Var.html#mkTyVar"><span class="hs-identifier hs-var">mkTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049263"><span class="hs-identifier hs-var">tv_name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind -&gt; Kind
</span><a href="GHC.Core.Type.html#mkTYPEapp"><span class="hs-identifier hs-var">mkTYPEapp</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049267"><span class="hs-identifier hs-var">rr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-796"></span><span>             </span><span id="local-6989586621682049270"><span class="annot"><span class="annottext">res_ty :: Kind
</span><a href="#local-6989586621682049270"><span class="hs-identifier hs-var hs-var">res_ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkTyVarTy"><span class="hs-identifier hs-var">mkTyVarTy</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049269"><span class="hs-identifier hs-var">res_tv</span></a></span><span>
</span><span id="line-797"></span><span>             </span><span id="local-6989586621682049271"><span class="annot"><span class="annottext">is_unlifted :: Bool
</span><a href="#local-6989586621682049271"><span class="hs-identifier hs-var hs-var">is_unlifted</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LocatedA (HsExpr GhcTc)] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#null/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsExpr GhcTc]
[LocatedA (HsExpr GhcTc)]
</span><a href="#local-6989586621682049254"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">[EvTerm] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#null/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[EvTerm]
</span><a href="#local-6989586621682049253"><span class="hs-identifier hs-var">prov_dicts</span></a></span><span>
</span><span id="line-798"></span><span>             </span><span class="hs-special">(</span><span id="local-6989586621682049273"><span class="annot"><span class="annottext">[LocatedA (HsExpr GhcTc)]
</span><a href="#local-6989586621682049273"><span class="hs-identifier hs-var">cont_args</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049274"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049274"><span class="hs-identifier hs-var">cont_arg_tys</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-799"></span><span>               </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682049271"><span class="hs-identifier hs-var">is_unlifted</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="annottext">DataCon -&gt; LHsExpr GhcTc
</span><a href="GHC.Hs.Utils.html#nlHsDataCon"><span class="hs-identifier hs-var">nlHsDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="GHC.Builtin.Types.html#unboxedUnitDataCon"><span class="hs-identifier hs-var">unboxedUnitDataCon</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.html#unboxedUnitTy"><span class="hs-identifier hs-var">unboxedUnitTy</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-800"></span><span>               </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LHsExpr GhcTc]
[LocatedA (HsExpr GhcTc)]
</span><a href="#local-6989586621682049254"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">,</span><span>                             </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049255"><span class="hs-identifier hs-var">arg_tys</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-801"></span><span>             </span><span id="local-6989586621682049278"><span class="annot"><span class="annottext">cont_ty :: Kind
</span><a href="#local-6989586621682049278"><span class="hs-identifier hs-var hs-var">cont_ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Id] -&gt; [Kind] -&gt; Kind -&gt; Kind
(() :: Constraint) =&gt; [Id] -&gt; [Kind] -&gt; Kind -&gt; Kind
</span><a href="GHC.Tc.Utils.TcType.html#mkInfSigmaTy"><span class="hs-identifier hs-var">mkInfSigmaTy</span></a></span><span> </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682049250"><span class="hs-identifier hs-var">ex_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049252"><span class="hs-identifier hs-var">prov_theta</span></a></span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; Kind) -&gt; Kind -&gt; Kind
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-802"></span><span>                       </span><span class="annot"><span class="annottext">[Kind] -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkVisFunTysMany"><span class="hs-identifier hs-var">mkVisFunTysMany</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049274"><span class="hs-identifier hs-var">cont_arg_tys</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049270"><span class="hs-identifier hs-var">res_ty</span></a></span><span>
</span><span id="line-803"></span><span>
</span><span id="line-804"></span><span>             </span><span id="local-6989586621682049281"><span class="annot"><span class="annottext">fail_ty :: Kind
</span><a href="#local-6989586621682049281"><span class="hs-identifier hs-var hs-var">fail_ty</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Kind -&gt; Kind -&gt; Kind
Kind -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkVisFunTyMany"><span class="hs-identifier hs-var">mkVisFunTyMany</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.html#unboxedUnitTy"><span class="hs-identifier hs-var">unboxedUnitTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049270"><span class="hs-identifier hs-var">res_ty</span></a></span><span>
</span><span id="line-805"></span><span>
</span><span id="line-806"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682049283"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049283"><span class="hs-identifier hs-var">matcher_name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; (OccName -&gt; OccName) -&gt; TcRnIf TcGblEnv TcLclEnv Name
forall m n. Name -&gt; (OccName -&gt; OccName) -&gt; TcRnIf m n Name
</span><a href="GHC.Tc.TyCl.Build.html#newImplicitBinder"><span class="hs-identifier hs-var">newImplicitBinder</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049243"><span class="hs-identifier hs-var">ps_name</span></a></span><span> </span><span class="annot"><span class="annottext">OccName -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#mkMatcherOcc"><span class="hs-identifier hs-var">mkMatcherOcc</span></a></span><span>
</span><span id="line-807"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682049284"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049284"><span class="hs-identifier hs-var">scrutinee</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FastString -&gt; Kind -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Id
forall gbl lcl. FastString -&gt; Kind -&gt; Kind -&gt; TcRnIf gbl lcl Id
</span><a href="GHC.Tc.Utils.Monad.html#newSysLocalId"><span class="hs-identifier hs-var">newSysLocalId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;scrut&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Core.Type.html#ManyTy"><span class="hs-identifier hs-var">ManyTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049256"><span class="hs-identifier hs-var">pat_ty</span></a></span><span>
</span><span id="line-808"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682049287"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049287"><span class="hs-identifier hs-var">cont</span></a></span></span><span>         </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FastString -&gt; Kind -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Id
forall gbl lcl. FastString -&gt; Kind -&gt; Kind -&gt; TcRnIf gbl lcl Id
</span><a href="GHC.Tc.Utils.Monad.html#newSysLocalId"><span class="hs-identifier hs-var">newSysLocalId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cont&quot;</span></span><span class="hs-special">)</span><span>  </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Core.Type.html#ManyTy"><span class="hs-identifier hs-var">ManyTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049278"><span class="hs-identifier hs-var">cont_ty</span></a></span><span>
</span><span id="line-809"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682049288"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049288"><span class="hs-identifier hs-var">fail</span></a></span></span><span>         </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FastString -&gt; Kind -&gt; Kind -&gt; IOEnv (Env TcGblEnv TcLclEnv) Id
forall gbl lcl. FastString -&gt; Kind -&gt; Kind -&gt; TcRnIf gbl lcl Id
</span><a href="GHC.Tc.Utils.Monad.html#newSysLocalId"><span class="hs-identifier hs-var">newSysLocalId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; FastString
</span><a href="GHC.Data.FastString.html#fsLit"><span class="hs-identifier hs-var">fsLit</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;fail&quot;</span></span><span class="hs-special">)</span><span>  </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Core.Type.html#ManyTy"><span class="hs-identifier hs-var">ManyTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049281"><span class="hs-identifier hs-var">fail_ty</span></a></span><span>
</span><span id="line-810"></span><span>
</span><span id="line-811"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682049289"><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682049289"><span class="hs-identifier hs-var">dflags</span></a></span></span><span>       </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IOEnv (Env TcGblEnv TcLclEnv) DynFlags
forall (m :: * -&gt; *). HasDynFlags m =&gt; m DynFlags
</span><a href="GHC.Driver.Session.html#getDynFlags"><span class="hs-identifier hs-var">getDynFlags</span></a></span><span>
</span><span id="line-812"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682049290"><span class="annot"><span class="annottext">matcher_tau :: Kind
</span><a href="#local-6989586621682049290"><span class="hs-identifier hs-var hs-var">matcher_tau</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Kind] -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkVisFunTysMany"><span class="hs-identifier hs-var">mkVisFunTysMany</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049256"><span class="hs-identifier hs-var">pat_ty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049278"><span class="hs-identifier hs-var">cont_ty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049281"><span class="hs-identifier hs-var">fail_ty</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049270"><span class="hs-identifier hs-var">res_ty</span></a></span><span>
</span><span id="line-813"></span><span>             </span><span id="local-6989586621682049291"><span class="annot"><span class="annottext">matcher_sigma :: Kind
</span><a href="#local-6989586621682049291"><span class="hs-identifier hs-var hs-var">matcher_sigma</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Id] -&gt; [Kind] -&gt; Kind -&gt; Kind
(() :: Constraint) =&gt; [Id] -&gt; [Kind] -&gt; Kind -&gt; Kind
</span><a href="GHC.Tc.Utils.TcType.html#mkInfSigmaTy"><span class="hs-identifier hs-var">mkInfSigmaTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049264"><span class="hs-identifier hs-var">rr_tv</span></a></span><span class="annot"><span class="annottext">Id -&gt; [Id] -&gt; [Id]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049269"><span class="hs-identifier hs-var">res_tv</span></a></span><span class="annot"><span class="annottext">Id -&gt; [Id] -&gt; [Id]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682049246"><span class="hs-identifier hs-var">univ_tvs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049247"><span class="hs-identifier hs-var">req_theta</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049290"><span class="hs-identifier hs-var">matcher_tau</span></a></span><span>
</span><span id="line-814"></span><span>             </span><span id="local-6989586621682049292"><span class="annot"><span class="annottext">matcher_id :: Id
</span><a href="#local-6989586621682049292"><span class="hs-identifier hs-var hs-var">matcher_id</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Id.html#mkExportedVanillaId"><span class="hs-identifier hs-var">mkExportedVanillaId</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049283"><span class="hs-identifier hs-var">matcher_name</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049291"><span class="hs-identifier hs-var">matcher_sigma</span></a></span><span>
</span><span id="line-815"></span><span>             </span><span id="local-6989586621682049294"><span class="annot"><span class="annottext">patsyn_id :: Id
</span><a href="#local-6989586621682049294"><span class="hs-identifier hs-var hs-var">patsyn_id</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Id.html#mkExportedVanillaId"><span class="hs-identifier hs-var">mkExportedVanillaId</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049243"><span class="hs-identifier hs-var">ps_name</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049291"><span class="hs-identifier hs-var">matcher_sigma</span></a></span><span>
</span><span id="line-816"></span><span>                             </span><span class="hs-comment">-- See Note [Exported LocalIds] in GHC.Types.Id</span><span>
</span><span id="line-817"></span><span>
</span><span id="line-818"></span><span>             </span><span id="local-6989586621682049295"><span class="annot"><span class="annottext">inst_wrap :: HsWrapper
</span><a href="#local-6989586621682049295"><span class="hs-identifier hs-var hs-var">inst_wrap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[EvTerm] -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#mkWpEvApps"><span class="hs-identifier hs-var">mkWpEvApps</span></a></span><span> </span><span class="annot"><span class="annottext">[EvTerm]
</span><a href="#local-6989586621682049253"><span class="hs-identifier hs-var">prov_dicts</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper -&gt; HsWrapper -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind] -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#mkWpTyApps"><span class="hs-identifier hs-var">mkWpTyApps</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049251"><span class="hs-identifier hs-var">ex_tys</span></a></span><span>
</span><span id="line-819"></span><span>             </span><span id="local-6989586621682049299"><span class="annot"><span class="annottext">cont' :: LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621682049299"><span class="hs-identifier hs-var hs-var">cont'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LocatedA (HsExpr GhcTc)
 -&gt; LocatedA (HsExpr GhcTc) -&gt; LocatedA (HsExpr GhcTc))
-&gt; LocatedA (HsExpr GhcTc)
-&gt; [LocatedA (HsExpr GhcTc)]
-&gt; LocatedA (HsExpr GhcTc)
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#foldl%27/Data.Foldable.html#foldl%27"><span class="hs-identifier hs-var">foldl'</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc -&gt; LHsExpr GhcTc -&gt; LHsExpr GhcTc
LocatedA (HsExpr GhcTc)
-&gt; LocatedA (HsExpr GhcTc) -&gt; LocatedA (HsExpr GhcTc)
forall (id :: Pass).
IsPass id =&gt;
LHsExpr (GhcPass id)
-&gt; LHsExpr (GhcPass id) -&gt; LHsExpr (GhcPass id)
</span><a href="GHC.Hs.Utils.html#nlHsApp"><span class="hs-identifier hs-var">nlHsApp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsWrapper -&gt; LHsExpr GhcTc -&gt; LHsExpr GhcTc
</span><a href="GHC.Hs.Utils.html#mkLHsWrap"><span class="hs-identifier hs-var">mkLHsWrap</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><a href="#local-6989586621682049295"><span class="hs-identifier hs-var">inst_wrap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdP GhcTc -&gt; LHsExpr GhcTc
forall (p :: Pass) a.
IsSrcSpanAnn p a =&gt;
IdP (GhcPass p) -&gt; LHsExpr (GhcPass p)
</span><a href="GHC.Hs.Utils.html#nlHsVar"><span class="hs-identifier hs-var">nlHsVar</span></a></span><span> </span><span class="annot"><span class="annottext">IdP GhcTc
Id
</span><a href="#local-6989586621682049287"><span class="hs-identifier hs-var">cont</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LocatedA (HsExpr GhcTc)]
</span><a href="#local-6989586621682049273"><span class="hs-identifier hs-var">cont_args</span></a></span><span>
</span><span id="line-820"></span><span>
</span><span id="line-821"></span><span>             </span><span id="local-6989586621682049302"><span class="annot"><span class="annottext">fail' :: LHsExpr GhcTc
</span><a href="#local-6989586621682049302"><span class="hs-identifier hs-var hs-var">fail'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IdP GhcTc -&gt; [LHsExpr GhcTc] -&gt; LHsExpr GhcTc
forall (p :: Pass) a.
IsSrcSpanAnn p a =&gt;
IdP (GhcPass p) -&gt; [LHsExpr (GhcPass p)] -&gt; LHsExpr (GhcPass p)
</span><a href="GHC.Hs.Utils.html#nlHsApps"><span class="hs-identifier hs-var">nlHsApps</span></a></span><span> </span><span class="annot"><span class="annottext">IdP GhcTc
Id
</span><a href="#local-6989586621682049288"><span class="hs-identifier hs-var">fail</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">DataCon -&gt; LHsExpr GhcTc
</span><a href="GHC.Hs.Utils.html#nlHsDataCon"><span class="hs-identifier hs-var">nlHsDataCon</span></a></span><span> </span><span class="annot"><span class="annottext">DataCon
</span><a href="GHC.Builtin.Types.html#unboxedUnitDataCon"><span class="hs-identifier hs-var">unboxedUnitDataCon</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-822"></span><span>
</span><span id="line-823"></span><span>             </span><span id="local-6989586621682049304"><span class="annot"><span class="annottext">args :: [GenLocated SrcSpanAnnA (Pat GhcTc)]
</span><a href="#local-6989586621682049304"><span class="hs-identifier hs-var hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Id -&gt; GenLocated SrcSpanAnnA (Pat GhcTc))
-&gt; [Id] -&gt; [GenLocated SrcSpanAnnA (Pat GhcTc)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">IdP GhcTc -&gt; LPat GhcTc
Id -&gt; GenLocated SrcSpanAnnA (Pat GhcTc)
forall (p :: Pass) a.
IsSrcSpanAnn p a =&gt;
IdP (GhcPass p) -&gt; LPat (GhcPass p)
</span><a href="GHC.Hs.Utils.html#nlVarPat"><span class="hs-identifier hs-var">nlVarPat</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049284"><span class="hs-identifier hs-var">scrutinee</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049287"><span class="hs-identifier hs-var">cont</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049288"><span class="hs-identifier hs-var">fail</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-824"></span><span>             </span><span id="local-6989586621682049306"><span class="annot"><span class="annottext">lwpat :: GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621682049306"><span class="hs-identifier hs-var hs-var">lwpat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pat GhcTc -&gt; GenLocated SrcSpanAnnA (Pat GhcTc)
forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">(Pat GhcTc -&gt; GenLocated SrcSpanAnnA (Pat GhcTc))
-&gt; Pat GhcTc -&gt; GenLocated SrcSpanAnnA (Pat GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">XWildPat GhcTc -&gt; Pat GhcTc
forall p. XWildPat p -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#WildPat"><span class="hs-identifier hs-var">WildPat</span></a></span><span> </span><span class="annot"><span class="annottext">XWildPat GhcTc
Kind
</span><a href="#local-6989586621682049256"><span class="hs-identifier hs-var">pat_ty</span></a></span><span>
</span><span id="line-825"></span><span>             </span><span id="local-6989586621682049309"><span class="annot"><span class="annottext">cases :: [GenLocated SrcSpanAnnA (Match GhcTc (LocatedA (HsExpr GhcTc)))]
</span><a href="#local-6989586621682049309"><span class="hs-identifier hs-var hs-var">cases</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">DynFlags -&gt; LPat GhcTc -&gt; Bool
forall (p :: Pass).
OutputableBndrId p =&gt;
DynFlags -&gt; LPat (GhcPass p) -&gt; Bool
</span><a href="GHC.Hs.Pat.html#isIrrefutableHsPat"><span class="hs-identifier hs-var">isIrrefutableHsPat</span></a></span><span> </span><span class="annot"><span class="annottext">DynFlags
</span><a href="#local-6989586621682049289"><span class="hs-identifier hs-var">dflags</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621682049244"><span class="hs-identifier hs-var">lpat</span></a></span><span>
</span><span id="line-826"></span><span>                     </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LPat GhcTc
-&gt; LocatedA (HsExpr GhcTc)
-&gt; LMatch GhcTc (LocatedA (HsExpr GhcTc))
forall (p :: Pass) (body :: * -&gt; *).
(Anno (GRHS (GhcPass p) (LocatedA (body (GhcPass p))))
 ~ SrcAnn NoEpAnns,
 Anno (Match (GhcPass p) (LocatedA (body (GhcPass p))))
 ~ SrcSpanAnnA) =&gt;
LPat (GhcPass p)
-&gt; LocatedA (body (GhcPass p))
-&gt; LMatch (GhcPass p) (LocatedA (body (GhcPass p)))
</span><a href="GHC.Hs.Utils.html#mkHsCaseAlt"><span class="hs-identifier hs-var">mkHsCaseAlt</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621682049244"><span class="hs-identifier hs-var">lpat</span></a></span><span>  </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621682049299"><span class="hs-identifier hs-var">cont'</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-827"></span><span>                     </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LPat GhcTc
-&gt; LocatedA (HsExpr GhcTc)
-&gt; LMatch GhcTc (LocatedA (HsExpr GhcTc))
forall (p :: Pass) (body :: * -&gt; *).
(Anno (GRHS (GhcPass p) (LocatedA (body (GhcPass p))))
 ~ SrcAnn NoEpAnns,
 Anno (Match (GhcPass p) (LocatedA (body (GhcPass p))))
 ~ SrcSpanAnnA) =&gt;
LPat (GhcPass p)
-&gt; LocatedA (body (GhcPass p))
-&gt; LMatch (GhcPass p) (LocatedA (body (GhcPass p)))
</span><a href="GHC.Hs.Utils.html#mkHsCaseAlt"><span class="hs-identifier hs-var">mkHsCaseAlt</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621682049244"><span class="hs-identifier hs-var">lpat</span></a></span><span>  </span><span class="annot"><span class="annottext">LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621682049299"><span class="hs-identifier hs-var">cont'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-828"></span><span>                           </span><span class="annot"><span class="annottext">LPat GhcTc
-&gt; LocatedA (HsExpr GhcTc)
-&gt; LMatch GhcTc (LocatedA (HsExpr GhcTc))
forall (p :: Pass) (body :: * -&gt; *).
(Anno (GRHS (GhcPass p) (LocatedA (body (GhcPass p))))
 ~ SrcAnn NoEpAnns,
 Anno (Match (GhcPass p) (LocatedA (body (GhcPass p))))
 ~ SrcSpanAnnA) =&gt;
LPat (GhcPass p)
-&gt; LocatedA (body (GhcPass p))
-&gt; LMatch (GhcPass p) (LocatedA (body (GhcPass p)))
</span><a href="GHC.Hs.Utils.html#mkHsCaseAlt"><span class="hs-identifier hs-var">mkHsCaseAlt</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621682049306"><span class="hs-identifier hs-var">lwpat</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621682049302"><span class="hs-identifier hs-var">fail'</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-829"></span><span>             </span><span id="local-6989586621682049312"><span class="annot"><span class="annottext">body :: LHsExpr GhcTc
</span><a href="#local-6989586621682049312"><span class="hs-identifier hs-var hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsWrapper -&gt; LHsExpr GhcTc -&gt; LHsExpr GhcTc
</span><a href="GHC.Hs.Utils.html#mkLHsWrap"><span class="hs-identifier hs-var">mkLHsWrap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TcEvBinds -&gt; HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#mkWpLet"><span class="hs-identifier hs-var">mkWpLet</span></a></span><span> </span><span class="annot"><span class="annottext">TcEvBinds
</span><a href="#local-6989586621682049248"><span class="hs-identifier hs-var">req_ev_binds</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(LHsExpr GhcTc -&gt; LHsExpr GhcTc) -&gt; LHsExpr GhcTc -&gt; LHsExpr GhcTc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-830"></span><span>                    </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; HsExpr GhcTc -&gt; LocatedA (HsExpr GhcTc)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc) -&gt; SrcSpanAnnA
forall l e. GenLocated l e -&gt; l
</span><a href="GHC.Types.SrcLoc.html#getLoc"><span class="hs-identifier hs-var">getLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621682049244"><span class="hs-identifier hs-var">lpat</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(HsExpr GhcTc -&gt; LocatedA (HsExpr GhcTc))
-&gt; HsExpr GhcTc -&gt; LocatedA (HsExpr GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-831"></span><span>                    </span><span class="annot"><span class="annottext">XCase GhcTc
-&gt; LHsExpr GhcTc
-&gt; MatchGroup GhcTc (LHsExpr GhcTc)
-&gt; HsExpr GhcTc
forall p.
XCase p -&gt; LHsExpr p -&gt; MatchGroup p (LHsExpr p) -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsCase"><span class="hs-identifier hs-var">HsCase</span></a></span><span> </span><span class="annot"><span class="annottext">XCase GhcTc
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IdP GhcTc -&gt; LHsExpr GhcTc
forall (p :: Pass) a.
IsSrcSpanAnn p a =&gt;
IdP (GhcPass p) -&gt; LHsExpr (GhcPass p)
</span><a href="GHC.Hs.Utils.html#nlHsVar"><span class="hs-identifier hs-var">nlHsVar</span></a></span><span> </span><span class="annot"><span class="annottext">IdP GhcTc
Id
</span><a href="#local-6989586621682049284"><span class="hs-identifier hs-var">scrutinee</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(MatchGroup GhcTc (LHsExpr GhcTc) -&gt; HsExpr GhcTc)
-&gt; MatchGroup GhcTc (LHsExpr GhcTc) -&gt; HsExpr GhcTc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-832"></span><span>                    </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MG"><span class="hs-identifier hs-type">MG</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mg_alts :: XRec GhcTc [LMatch GhcTc (LocatedA (HsExpr GhcTc))]
</span><a href="Language.Haskell.Syntax.Expr.html#mg_alts"><span class="hs-identifier hs-var">mg_alts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnL
-&gt; [GenLocated SrcSpanAnnA (Match GhcTc (LocatedA (HsExpr GhcTc)))]
-&gt; GenLocated
     SrcSpanAnnL
     [GenLocated SrcSpanAnnA (Match GhcTc (LocatedA (HsExpr GhcTc)))]
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpanAnnL
forall a ann. SrcSpanAnn' a -&gt; SrcAnn ann
</span><a href="GHC.Parser.Annotation.html#l2l"><span class="hs-identifier hs-var">l2l</span></a></span><span> </span><span class="annot"><span class="annottext">(SrcSpanAnnA -&gt; SrcSpanAnnL) -&gt; SrcSpanAnnA -&gt; SrcSpanAnnL
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc) -&gt; SrcSpanAnnA
forall l e. GenLocated l e -&gt; l
</span><a href="GHC.Types.SrcLoc.html#getLoc"><span class="hs-identifier hs-var">getLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621682049244"><span class="hs-identifier hs-var">lpat</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (Match GhcTc (LocatedA (HsExpr GhcTc)))]
</span><a href="#local-6989586621682049309"><span class="hs-identifier hs-var">cases</span></a></span><span>
</span><span id="line-833"></span><span>                      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mg_ext :: XMG GhcTc (LocatedA (HsExpr GhcTc))
</span><a href="Language.Haskell.Syntax.Expr.html#mg_ext"><span class="hs-identifier hs-var">mg_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Scaled Kind] -&gt; Kind -&gt; Origin -&gt; MatchGroupTc
</span><a href="GHC.Hs.Expr.html#MatchGroupTc"><span class="hs-identifier hs-var">MatchGroupTc</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Kind -&gt; Scaled Kind
forall a. a -&gt; Scaled a
</span><a href="GHC.Core.Type.html#unrestricted"><span class="hs-identifier hs-var">unrestricted</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049256"><span class="hs-identifier hs-var">pat_ty</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049270"><span class="hs-identifier hs-var">res_ty</span></a></span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="GHC.Types.Basic.html#Generated"><span class="hs-identifier hs-var">Generated</span></a></span><span>
</span><span id="line-834"></span><span>                      </span><span class="hs-special">}</span><span>
</span><span id="line-835"></span><span>             </span><span id="local-6989586621682049323"><span class="annot"><span class="annottext">body' :: LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621682049323"><span class="hs-identifier hs-var hs-var">body'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc -&gt; LocatedA (HsExpr GhcTc)
forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">(HsExpr GhcTc -&gt; LocatedA (HsExpr GhcTc))
-&gt; HsExpr GhcTc -&gt; LocatedA (HsExpr GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-836"></span><span>                     </span><span class="annot"><span class="annottext">XLam GhcTc -&gt; MatchGroup GhcTc (LHsExpr GhcTc) -&gt; HsExpr GhcTc
forall p. XLam p -&gt; MatchGroup p (LHsExpr p) -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsLam"><span class="hs-identifier hs-var">HsLam</span></a></span><span> </span><span class="annot"><span class="annottext">XLam GhcTc
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">(MatchGroup GhcTc (LHsExpr GhcTc) -&gt; HsExpr GhcTc)
-&gt; MatchGroup GhcTc (LHsExpr GhcTc) -&gt; HsExpr GhcTc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-837"></span><span>                     </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MG"><span class="hs-identifier hs-type">MG</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mg_alts :: XRec GhcTc [LMatch GhcTc (LocatedA (HsExpr GhcTc))]
</span><a href="Language.Haskell.Syntax.Expr.html#mg_alts"><span class="hs-identifier hs-var">mg_alts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LMatch GhcTc (LocatedA (HsExpr GhcTc))]
-&gt; LocatedAn AnnList [LMatch GhcTc (LocatedA (HsExpr GhcTc))]
forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">HsMatchContext GhcTc
-&gt; [LPat GhcTc]
-&gt; LocatedA (HsExpr GhcTc)
-&gt; LMatch GhcTc (LocatedA (HsExpr GhcTc))
forall (p :: Pass) (body :: * -&gt; *).
(Anno (Match (GhcPass p) (LocatedA (body (GhcPass p))))
 ~ SrcSpanAnnA,
 Anno (GRHS (GhcPass p) (LocatedA (body (GhcPass p))))
 ~ SrcAnn NoEpAnns) =&gt;
HsMatchContext (GhcPass p)
-&gt; [LPat (GhcPass p)]
-&gt; LocatedA (body (GhcPass p))
-&gt; LMatch (GhcPass p) (LocatedA (body (GhcPass p)))
</span><a href="GHC.Hs.Utils.html#mkSimpleMatch"><span class="hs-identifier hs-var">mkSimpleMatch</span></a></span><span> </span><span class="annot"><span class="annottext">HsMatchContext GhcTc
forall p. HsMatchContext p
</span><a href="Language.Haskell.Syntax.Expr.html#LambdaExpr"><span class="hs-identifier hs-var">LambdaExpr</span></a></span><span>
</span><span id="line-838"></span><span>                                                         </span><span class="annot"><span class="annottext">[LPat GhcTc]
[GenLocated SrcSpanAnnA (Pat GhcTc)]
</span><a href="#local-6989586621682049304"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621682049312"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-839"></span><span>                       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mg_ext :: XMG GhcTc (LocatedA (HsExpr GhcTc))
</span><a href="Language.Haskell.Syntax.Expr.html#mg_ext"><span class="hs-identifier hs-var">mg_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Scaled Kind] -&gt; Kind -&gt; Origin -&gt; MatchGroupTc
</span><a href="GHC.Hs.Expr.html#MatchGroupTc"><span class="hs-identifier hs-var">MatchGroupTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Kind -&gt; Scaled Kind) -&gt; [Kind] -&gt; [Scaled Kind]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Scaled Kind
forall a. a -&gt; Scaled a
</span><a href="GHC.Core.Type.html#unrestricted"><span class="hs-identifier hs-var">unrestricted</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049256"><span class="hs-identifier hs-var">pat_ty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049278"><span class="hs-identifier hs-var">cont_ty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049281"><span class="hs-identifier hs-var">fail_ty</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049270"><span class="hs-identifier hs-var">res_ty</span></a></span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="GHC.Types.Basic.html#Generated"><span class="hs-identifier hs-var">Generated</span></a></span><span>
</span><span id="line-840"></span><span>                       </span><span class="hs-special">}</span><span>
</span><span id="line-841"></span><span>             </span><span id="local-6989586621682049327"><span class="annot"><span class="annottext">match :: LMatch GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621682049327"><span class="hs-identifier hs-var hs-var">match</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsMatchContext GhcTc
-&gt; [LPat GhcTc]
-&gt; LHsExpr GhcTc
-&gt; HsLocalBinds GhcTc
-&gt; LMatch GhcTc (LHsExpr GhcTc)
forall (p :: Pass).
IsPass p =&gt;
HsMatchContext (GhcPass p)
-&gt; [LPat (GhcPass p)]
-&gt; LHsExpr (GhcPass p)
-&gt; HsLocalBinds (GhcPass p)
-&gt; LMatch (GhcPass p) (LHsExpr (GhcPass p))
</span><a href="GHC.Hs.Utils.html#mkMatch"><span class="hs-identifier hs-var">mkMatch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LIdP (NoGhcTc GhcTc) -&gt; HsMatchContext GhcTc
forall p. LIdP (NoGhcTc p) -&gt; HsMatchContext p
</span><a href="GHC.Hs.Utils.html#mkPrefixFunRhs"><span class="hs-identifier hs-var">mkPrefixFunRhs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; Name -&gt; LocatedN Name
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682049242"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Name
</span><a href="GHC.Types.Id.html#idName"><span class="hs-identifier hs-var">idName</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049294"><span class="hs-identifier hs-var">patsyn_id</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-842"></span><span>                             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Id] -&gt; [Id] -&gt; LHsExpr GhcTc -&gt; LHsExpr GhcTc
</span><a href="GHC.Hs.Utils.html#mkHsLams"><span class="hs-identifier hs-var">mkHsLams</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049264"><span class="hs-identifier hs-var">rr_tv</span></a></span><span class="annot"><span class="annottext">Id -&gt; [Id] -&gt; [Id]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049269"><span class="hs-identifier hs-var">res_tv</span></a></span><span class="annot"><span class="annottext">Id -&gt; [Id] -&gt; [Id]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682049246"><span class="hs-identifier hs-var">univ_tvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-843"></span><span>                                       </span><span class="annot"><span class="annottext">[Id]
</span><a href="#local-6989586621682049249"><span class="hs-identifier hs-var">req_dicts</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
LocatedA (HsExpr GhcTc)
</span><a href="#local-6989586621682049323"><span class="hs-identifier hs-var">body'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-844"></span><span>                             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XEmptyLocalBinds GhcTc GhcTc -&gt; HsLocalBinds GhcTc
forall idL idR. XEmptyLocalBinds idL idR -&gt; HsLocalBindsLR idL idR
</span><a href="Language.Haskell.Syntax.Binds.html#EmptyLocalBinds"><span class="hs-identifier hs-var">EmptyLocalBinds</span></a></span><span> </span><span class="annot"><span class="annottext">XEmptyLocalBinds GhcTc GhcTc
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-845"></span><span>             </span><span class="annot"><a href="#local-6989586621682049332"><span class="hs-identifier hs-type">mg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MatchGroup"><span class="hs-identifier hs-type">MatchGroup</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-846"></span><span>             </span><span id="local-6989586621682049332"><span class="annot"><span class="annottext">mg :: MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621682049332"><span class="hs-identifier hs-var hs-var">mg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MG"><span class="hs-identifier hs-type">MG</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mg_alts :: XRec GhcTc [LMatch GhcTc (LocatedA (HsExpr GhcTc))]
</span><a href="Language.Haskell.Syntax.Expr.html#mg_alts"><span class="hs-identifier hs-var">mg_alts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnL
-&gt; [GenLocated
      (Anno (Match GhcTc (LocatedA (HsExpr GhcTc))))
      (Match GhcTc (LocatedA (HsExpr GhcTc)))]
-&gt; GenLocated
     SrcSpanAnnL
     [GenLocated
        (Anno (Match GhcTc (LocatedA (HsExpr GhcTc))))
        (Match GhcTc (LocatedA (HsExpr GhcTc)))]
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpanAnnL
forall a ann. SrcSpanAnn' a -&gt; SrcAnn ann
</span><a href="GHC.Parser.Annotation.html#l2l"><span class="hs-identifier hs-var">l2l</span></a></span><span> </span><span class="annot"><span class="annottext">(SrcSpanAnnA -&gt; SrcSpanAnnL) -&gt; SrcSpanAnnA -&gt; SrcSpanAnnL
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Match GhcTc (LocatedA (HsExpr GhcTc)))
-&gt; SrcSpanAnnA
forall l e. GenLocated l e -&gt; l
</span><a href="GHC.Types.SrcLoc.html#getLoc"><span class="hs-identifier hs-var">getLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LMatch GhcTc (LHsExpr GhcTc)
GenLocated SrcSpanAnnA (Match GhcTc (LocatedA (HsExpr GhcTc)))
</span><a href="#local-6989586621682049327"><span class="hs-identifier hs-var">match</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LMatch GhcTc (LHsExpr GhcTc)
GenLocated
  (Anno (Match GhcTc (LocatedA (HsExpr GhcTc))))
  (Match GhcTc (LocatedA (HsExpr GhcTc)))
</span><a href="#local-6989586621682049327"><span class="hs-identifier hs-var">match</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-847"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mg_ext :: XMG GhcTc (LocatedA (HsExpr GhcTc))
</span><a href="Language.Haskell.Syntax.Expr.html#mg_ext"><span class="hs-identifier hs-var">mg_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Scaled Kind] -&gt; Kind -&gt; Origin -&gt; MatchGroupTc
</span><a href="GHC.Hs.Expr.html#MatchGroupTc"><span class="hs-identifier hs-var">MatchGroupTc</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049270"><span class="hs-identifier hs-var">res_ty</span></a></span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="GHC.Types.Basic.html#Generated"><span class="hs-identifier hs-var">Generated</span></a></span><span>
</span><span id="line-848"></span><span>                    </span><span class="hs-special">}</span><span>
</span><span id="line-849"></span><span>             </span><span id="local-6989586621682049333"><span class="annot"><span class="annottext">matcher_arity :: Int
</span><a href="#local-6989586621682049333"><span class="hs-identifier hs-var hs-var">matcher_arity</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Kind] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#length/Data.Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049247"><span class="hs-identifier hs-var">req_theta</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span>
</span><span id="line-850"></span><span>             </span><span class="hs-comment">-- See Note [Pragmas for pattern synonyms]</span><span>
</span><span id="line-851"></span><span>
</span><span id="line-852"></span><span>       </span><span class="hs-comment">-- Add INLINE pragmas; see Note [Pragmas for pattern synonyms]</span><span>
</span><span id="line-853"></span><span>       </span><span class="hs-comment">-- NB: prag_fn is keyed by the PatSyn Name, not the (internal) matcher name</span><span>
</span><span id="line-854"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682049335"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049335"><span class="hs-identifier hs-var">matcher_prag_id</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Id -&gt; [LSig GhcRn] -&gt; IOEnv (Env TcGblEnv TcLclEnv) Id
</span><a href="GHC.Tc.Gen.Sig.html#addInlinePrags"><span class="hs-identifier hs-var">addInlinePrags</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049292"><span class="hs-identifier hs-var">matcher_id</span></a></span><span>              </span><span class="annot"><span class="annottext">([LSig GhcRn] -&gt; IOEnv (Env TcGblEnv TcLclEnv) Id)
-&gt; [LSig GhcRn] -&gt; IOEnv (Env TcGblEnv TcLclEnv) Id
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-855"></span><span>                            </span><span class="annot"><span class="annottext">(LSig GhcRn -&gt; LSig GhcRn) -&gt; [LSig GhcRn] -&gt; [LSig GhcRn]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; LSig GhcRn -&gt; LSig GhcRn
</span><a href="GHC.Tc.Gen.Sig.html#addInlinePragArity"><span class="hs-identifier hs-var">addInlinePragArity</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682049333"><span class="hs-identifier hs-var">matcher_arity</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([LSig GhcRn] -&gt; [LSig GhcRn]) -&gt; [LSig GhcRn] -&gt; [LSig GhcRn]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-856"></span><span>                            </span><span class="annot"><span class="annottext">TcPragEnv -&gt; Name -&gt; [LSig GhcRn]
</span><a href="GHC.Tc.Gen.Sig.html#lookupPragEnv"><span class="hs-identifier hs-var">lookupPragEnv</span></a></span><span> </span><span class="annot"><span class="annottext">TcPragEnv
</span><a href="#local-6989586621682049245"><span class="hs-identifier hs-var">prag_fn</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049243"><span class="hs-identifier hs-var">ps_name</span></a></span><span>
</span><span id="line-857"></span><span>
</span><span id="line-858"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682049336"><span class="annot"><span class="annottext">bind :: HsBindLR GhcTc GhcTc
</span><a href="#local-6989586621682049336"><span class="hs-identifier hs-var hs-var">bind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FunBind"><span class="hs-identifier hs-type">FunBind</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fun_id :: LIdP GhcTc
</span><a href="Language.Haskell.Syntax.Binds.html#fun_id"><span class="hs-identifier hs-var">fun_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; Id -&gt; GenLocated SrcSpanAnnN Id
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682049242"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049335"><span class="hs-identifier hs-var">matcher_prag_id</span></a></span><span>
</span><span id="line-859"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_matches :: MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="Language.Haskell.Syntax.Binds.html#fun_matches"><span class="hs-identifier hs-var">fun_matches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcTc (LHsExpr GhcTc)
</span><a href="#local-6989586621682049332"><span class="hs-identifier hs-var">mg</span></a></span><span>
</span><span id="line-860"></span><span>                           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_ext :: XFunBind GhcTc GhcTc
</span><a href="Language.Haskell.Syntax.Binds.html#fun_ext"><span class="hs-identifier hs-var">fun_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsWrapper
</span><a href="GHC.Tc.Types.Evidence.html#idHsWrapper"><span class="hs-identifier hs-var">idHsWrapper</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-861"></span><span>                           </span><span class="hs-special">}</span><span>
</span><span id="line-862"></span><span>             </span><span id="local-6989586621682049342"><span class="annot"><span class="annottext">matcher_bind :: Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
</span><a href="#local-6989586621682049342"><span class="hs-identifier hs-var hs-var">matcher_bind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)
-&gt; Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
forall a. a -&gt; Bag a
</span><a href="GHC.Data.Bag.html#unitBag"><span class="hs-identifier hs-var">unitBag</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsBindLR GhcTc GhcTc
-&gt; GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)
forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">HsBindLR GhcTc GhcTc
</span><a href="#local-6989586621682049336"><span class="hs-identifier hs-var">bind</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-863"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tcPatSynMatcher&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049243"><span class="hs-identifier hs-var">ps_name</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049292"><span class="hs-identifier hs-var">matcher_id</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-864"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tcPatSynMatcher&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
</span><a href="#local-6989586621682049342"><span class="hs-identifier hs-var">matcher_bind</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-865"></span><span>
</span><span id="line-866"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">(PatSynMatcher,
 Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)))
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (PatSynMatcher,
      Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)))
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049283"><span class="hs-identifier hs-var">matcher_name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049291"><span class="hs-identifier hs-var">matcher_sigma</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682049271"><span class="hs-identifier hs-var">is_unlifted</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
</span><a href="#local-6989586621682049342"><span class="hs-identifier hs-var">matcher_bind</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-867"></span><span>
</span><span id="line-868"></span><span class="annot"><a href="GHC.Tc.TyCl.PatSyn.html#mkPatSynRecSelBinds"><span class="hs-identifier hs-type">mkPatSynRecSelBinds</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.PatSyn.html#PatSyn"><span class="hs-identifier hs-type">PatSyn</span></a></span><span>
</span><span id="line-869"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.FieldLabel.html#FieldLabel"><span class="hs-identifier hs-type">FieldLabel</span></a></span><span class="hs-special">]</span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Visible field labels</span></span><span>
</span><span id="line-870"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.FieldLabel.html#FieldSelectors"><span class="hs-identifier hs-type">FieldSelectors</span></a></span><span>
</span><span id="line-871"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBind"><span class="hs-identifier hs-type">LHsBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-872"></span><span id="mkPatSynRecSelBinds"><span class="annot"><span class="annottext">mkPatSynRecSelBinds :: PatSyn -&gt; [FieldLabel] -&gt; FieldSelectors -&gt; [(Id, LHsBind GhcRn)]
</span><a href="GHC.Tc.TyCl.PatSyn.html#mkPatSynRecSelBinds"><span class="hs-identifier hs-var hs-var">mkPatSynRecSelBinds</span></a></span></span><span> </span><span id="local-6989586621682049344"><span class="annot"><span class="annottext">PatSyn
</span><a href="#local-6989586621682049344"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621682049345"><span class="annot"><span class="annottext">[FieldLabel]
</span><a href="#local-6989586621682049345"><span class="hs-identifier hs-var">fields</span></a></span></span><span> </span><span id="local-6989586621682049346"><span class="annot"><span class="annottext">FieldSelectors
</span><a href="#local-6989586621682049346"><span class="hs-identifier hs-var">has_sel</span></a></span></span><span>
</span><span id="line-873"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[ConLike]
-&gt; RecSelParent
-&gt; FieldLabel
-&gt; FieldSelectors
-&gt; (Id, LHsBind GhcRn)
</span><a href="GHC.Tc.TyCl.Utils.html#mkOneRecordSelector"><span class="hs-identifier hs-var">mkOneRecordSelector</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">PatSyn -&gt; ConLike
</span><a href="GHC.Core.ConLike.html#PatSynCon"><span class="hs-identifier hs-var">PatSynCon</span></a></span><span> </span><span class="annot"><span class="annottext">PatSyn
</span><a href="#local-6989586621682049344"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatSyn -&gt; RecSelParent
</span><a href="GHC.Types.Id.Info.html#RecSelPatSyn"><span class="hs-identifier hs-var">RecSelPatSyn</span></a></span><span> </span><span class="annot"><span class="annottext">PatSyn
</span><a href="#local-6989586621682049344"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FieldLabel
</span><a href="#local-6989586621682049349"><span class="hs-identifier hs-var">fld_lbl</span></a></span><span> </span><span class="annot"><span class="annottext">FieldSelectors
</span><a href="#local-6989586621682049346"><span class="hs-identifier hs-var">has_sel</span></a></span><span>
</span><span id="line-874"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621682049349"><span class="annot"><span class="annottext">FieldLabel
</span><a href="#local-6989586621682049349"><span class="hs-identifier hs-var">fld_lbl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[FieldLabel]
</span><a href="#local-6989586621682049345"><span class="hs-identifier hs-var">fields</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-875"></span><span>
</span><span id="line-876"></span><span id="local-6989586621682048290"><span class="annot"><a href="GHC.Tc.TyCl.PatSyn.html#isUnidirectional"><span class="hs-identifier hs-type">isUnidirectional</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsPatSynDir"><span class="hs-identifier hs-type">HsPatSynDir</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682048290"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-877"></span><span id="isUnidirectional"><span class="annot"><span class="annottext">isUnidirectional :: forall a. HsPatSynDir a -&gt; Bool
</span><a href="GHC.Tc.TyCl.PatSyn.html#isUnidirectional"><span class="hs-identifier hs-var hs-var">isUnidirectional</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsPatSynDir a
</span><a href="Language.Haskell.Syntax.Binds.html#Unidirectional"><span class="hs-identifier hs-var">Unidirectional</span></a></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-878"></span><span class="annot"><a href="GHC.Tc.TyCl.PatSyn.html#isUnidirectional"><span class="hs-identifier hs-var">isUnidirectional</span></a></span><span> </span><span class="annot"><span class="annottext">HsPatSynDir a
</span><a href="Language.Haskell.Syntax.Binds.html#ImplicitBidirectional"><span class="hs-identifier hs-var">ImplicitBidirectional</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-879"></span><span class="annot"><a href="GHC.Tc.TyCl.PatSyn.html#isUnidirectional"><span class="hs-identifier hs-var">isUnidirectional</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ExplicitBidirectional"><span class="hs-identifier hs-type">ExplicitBidirectional</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-880"></span><span>
</span><span id="line-881"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
         Constructing the &quot;builder&quot; Id
*                                                                      *
************************************************************************
-}</span><span>
</span><span id="line-888"></span><span>
</span><span id="line-889"></span><span id="local-6989586621682048230"><span class="annot"><a href="GHC.Tc.TyCl.PatSyn.html#mkPatSynBuilder"><span class="hs-identifier hs-type">mkPatSynBuilder</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#HsPatSynDir"><span class="hs-identifier hs-type">HsPatSynDir</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682048230"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span>
</span><span id="line-890"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#InvisTVBinder"><span class="hs-identifier hs-type">InvisTVBinder</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ThetaType"><span class="hs-identifier hs-type">ThetaType</span></a></span><span>
</span><span id="line-891"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#InvisTVBinder"><span class="hs-identifier hs-type">InvisTVBinder</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ThetaType"><span class="hs-identifier hs-type">ThetaType</span></a></span><span>
</span><span id="line-892"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-893"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="annot"><a href="GHC.Core.PatSyn.html#PatSynBuilder"><span class="hs-identifier hs-type">PatSynBuilder</span></a></span></span><span>
</span><span id="line-894"></span><span id="mkPatSynBuilder"><span class="annot"><span class="annottext">mkPatSynBuilder :: forall a.
HsPatSynDir a
-&gt; LocatedN Name
-&gt; [VarBndr Id Specificity]
-&gt; [Kind]
-&gt; [VarBndr Id Specificity]
-&gt; [Kind]
-&gt; [Kind]
-&gt; Kind
-&gt; TcM PatSynBuilder
</span><a href="GHC.Tc.TyCl.PatSyn.html#mkPatSynBuilder"><span class="hs-identifier hs-var hs-var">mkPatSynBuilder</span></a></span></span><span> </span><span id="local-6989586621682049362"><span class="annot"><span class="annottext">HsPatSynDir a
</span><a href="#local-6989586621682049362"><span class="hs-identifier hs-var">dir</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682049363"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049363"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-895"></span><span>                  </span><span id="local-6989586621682049364"><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049364"><span class="hs-identifier hs-var">univ_bndrs</span></a></span></span><span> </span><span id="local-6989586621682049365"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049365"><span class="hs-identifier hs-var">req_theta</span></a></span></span><span> </span><span id="local-6989586621682049366"><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049366"><span class="hs-identifier hs-var">ex_bndrs</span></a></span></span><span> </span><span id="local-6989586621682049367"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049367"><span class="hs-identifier hs-var">prov_theta</span></a></span></span><span>
</span><span id="line-896"></span><span>                  </span><span id="local-6989586621682049368"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049368"><span class="hs-identifier hs-var">arg_tys</span></a></span></span><span> </span><span id="local-6989586621682049369"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049369"><span class="hs-identifier hs-var">pat_ty</span></a></span></span><span>
</span><span id="line-897"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">HsPatSynDir a -&gt; Bool
forall a. HsPatSynDir a -&gt; Bool
</span><a href="GHC.Tc.TyCl.PatSyn.html#isUnidirectional"><span class="hs-identifier hs-var">isUnidirectional</span></a></span><span> </span><span class="annot"><span class="annottext">HsPatSynDir a
</span><a href="#local-6989586621682049362"><span class="hs-identifier hs-var">dir</span></a></span><span>
</span><span id="line-898"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatSynBuilder -&gt; TcM PatSynBuilder
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">PatSynBuilder
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-899"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-900"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682049370"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049370"><span class="hs-identifier hs-var">builder_name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; (OccName -&gt; OccName) -&gt; TcRnIf TcGblEnv TcLclEnv Name
forall m n. Name -&gt; (OccName -&gt; OccName) -&gt; TcRnIf m n Name
</span><a href="GHC.Tc.TyCl.Build.html#newImplicitBinder"><span class="hs-identifier hs-var">newImplicitBinder</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049363"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">OccName -&gt; OccName
</span><a href="GHC.Types.Name.Occurrence.html#mkBuilderOcc"><span class="hs-identifier hs-var">mkBuilderOcc</span></a></span><span>
</span><span id="line-901"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682049372"><span class="annot"><span class="annottext">theta :: [Kind]
</span><a href="#local-6989586621682049372"><span class="hs-identifier hs-var hs-var">theta</span></a></span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049365"><span class="hs-identifier hs-var">req_theta</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind] -&gt; [Kind] -&gt; [Kind]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049367"><span class="hs-identifier hs-var">prov_theta</span></a></span><span>
</span><span id="line-902"></span><span>             </span><span id="local-6989586621682049373"><span class="annot"><span class="annottext">need_dummy_arg :: Bool
</span><a href="#local-6989586621682049373"><span class="hs-identifier hs-var hs-var">need_dummy_arg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Kind -&gt; Bool
Kind -&gt; Bool
</span><a href="GHC.Core.Type.html#isUnliftedType"><span class="hs-identifier hs-var">isUnliftedType</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049369"><span class="hs-identifier hs-var">pat_ty</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">[Kind] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#null/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049368"><span class="hs-identifier hs-var">arg_tys</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">[Kind] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#null/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049372"><span class="hs-identifier hs-var">theta</span></a></span><span>
</span><span id="line-903"></span><span>                              </span><span class="hs-comment">-- NB: pattern arguments cannot be representation-polymorphic,</span><span>
</span><span id="line-904"></span><span>                              </span><span class="hs-comment">-- as checked in 'tcPatSynSig'. So 'isUnliftedType' is OK here.</span><span>
</span><span id="line-905"></span><span>             </span><span id="local-6989586621682049375"><span class="annot"><span class="annottext">builder_sigma :: Kind
</span><a href="#local-6989586621682049375"><span class="hs-identifier hs-var hs-var">builder_sigma</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Kind -&gt; Kind
</span><a href="GHC.Tc.TyCl.PatSyn.html#add_void"><span class="hs-identifier hs-var">add_void</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682049373"><span class="hs-identifier hs-var">need_dummy_arg</span></a></span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; Kind) -&gt; Kind -&gt; Kind
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-906"></span><span>                              </span><span class="annot"><span class="annottext">[VarBndr Id Specificity] -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkInvisForAllTys"><span class="hs-identifier hs-var">mkInvisForAllTys</span></a></span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049364"><span class="hs-identifier hs-var">univ_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; Kind) -&gt; Kind -&gt; Kind
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-907"></span><span>                              </span><span class="annot"><span class="annottext">[VarBndr Id Specificity] -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkInvisForAllTys"><span class="hs-identifier hs-var">mkInvisForAllTys</span></a></span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><a href="#local-6989586621682049366"><span class="hs-identifier hs-var">ex_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; Kind) -&gt; Kind -&gt; Kind
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-908"></span><span>                              </span><span class="annot"><span class="annottext">[Kind] -&gt; Kind -&gt; Kind
(() :: Constraint) =&gt; [Kind] -&gt; Kind -&gt; Kind
</span><a href="GHC.Tc.Utils.TcType.html#mkPhiTy"><span class="hs-identifier hs-var">mkPhiTy</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049372"><span class="hs-identifier hs-var">theta</span></a></span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; Kind) -&gt; Kind -&gt; Kind
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-909"></span><span>                              </span><span class="annot"><span class="annottext">[Kind] -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkVisFunTysMany"><span class="hs-identifier hs-var">mkVisFunTysMany</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049368"><span class="hs-identifier hs-var">arg_tys</span></a></span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; Kind) -&gt; Kind -&gt; Kind
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-910"></span><span>                              </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049369"><span class="hs-identifier hs-var">pat_ty</span></a></span><span>
</span><span id="line-911"></span><span>
</span><span id="line-912"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">PatSynBuilder -&gt; TcM PatSynBuilder
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatSynMatcher -&gt; PatSynBuilder
forall a. a -&gt; Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049370"><span class="hs-identifier hs-var">builder_name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049375"><span class="hs-identifier hs-var">builder_sigma</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682049373"><span class="hs-identifier hs-var">need_dummy_arg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-913"></span><span>
</span><span id="line-914"></span><span class="annot"><a href="GHC.Tc.TyCl.PatSyn.html#tcPatSynBuilderBind"><span class="hs-identifier hs-type">tcPatSynBuilderBind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Tc.Gen.Sig.html#TcPragEnv"><span class="hs-identifier hs-type">TcPragEnv</span></a></span><span>
</span><span id="line-915"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatSynBind"><span class="hs-identifier hs-type">PatSynBind</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-916"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Tc.Types.html#TcM"><span class="hs-identifier hs-type">TcM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-917"></span><span class="hs-comment">-- See Note [Matchers and builders for pattern synonyms] in GHC.Core.PatSyn</span><span>
</span><span id="line-918"></span><span id="tcPatSynBuilderBind"><span class="annot"><span class="annottext">tcPatSynBuilderBind :: TcPragEnv -&gt; PatSynBind GhcRn GhcRn -&gt; TcM (LHsBinds GhcTc)
</span><a href="GHC.Tc.TyCl.PatSyn.html#tcPatSynBuilderBind"><span class="hs-identifier hs-var hs-var">tcPatSynBuilderBind</span></a></span></span><span> </span><span id="local-6989586621682049379"><span class="annot"><span class="annottext">TcPragEnv
</span><a href="#local-6989586621682049379"><span class="hs-identifier hs-var">prag_fn</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PSB"><span class="hs-identifier hs-type">PSB</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">psb_id :: forall idL idR. PatSynBind idL idR -&gt; LIdP idL
</span><a href="Language.Haskell.Syntax.Binds.html#psb_id"><span class="hs-identifier hs-var">psb_id</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682049380"><span class="annot"><span class="annottext">ps_lname :: LIdP GhcRn
</span><a href="#local-6989586621682049380"><span class="hs-identifier hs-var">ps_lname</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682049381"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682049381"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682049382"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049382"><span class="hs-identifier hs-var">ps_name</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-919"></span><span>                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psb_def :: forall idL idR. PatSynBind idL idR -&gt; LPat idR
</span><a href="Language.Haskell.Syntax.Binds.html#psb_def"><span class="hs-identifier hs-var">psb_def</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682049383"><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621682049383"><span class="hs-identifier hs-var">lpat</span></a></span></span><span>
</span><span id="line-920"></span><span>                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psb_dir :: forall idL idR. PatSynBind idL idR -&gt; HsPatSynDir idR
</span><a href="Language.Haskell.Syntax.Binds.html#psb_dir"><span class="hs-identifier hs-var">psb_dir</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682049384"><span class="annot"><span class="annottext">HsPatSynDir GhcRn
</span><a href="#local-6989586621682049384"><span class="hs-identifier hs-var">dir</span></a></span></span><span>
</span><span id="line-921"></span><span>                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psb_args :: forall idL idR. PatSynBind idL idR -&gt; HsPatSynDetails idR
</span><a href="Language.Haskell.Syntax.Binds.html#psb_args"><span class="hs-identifier hs-var">psb_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682049385"><span class="annot"><span class="annottext">HsPatSynDetails GhcRn
</span><a href="#local-6989586621682049385"><span class="hs-identifier hs-var">details</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-922"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">HsPatSynDir GhcRn -&gt; Bool
forall a. HsPatSynDir a -&gt; Bool
</span><a href="GHC.Tc.TyCl.PatSyn.html#isUnidirectional"><span class="hs-identifier hs-var">isUnidirectional</span></a></span><span> </span><span class="annot"><span class="annottext">HsPatSynDir GhcRn
</span><a href="#local-6989586621682049384"><span class="hs-identifier hs-var">dir</span></a></span><span>
</span><span id="line-923"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)))
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
forall a. Bag a
</span><a href="GHC.Data.Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a></span><span>
</span><span id="line-924"></span><span>
</span><span id="line-925"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Either.html#Left/Data.Either.html#Left"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621682049386"><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682049386"><span class="hs-identifier hs-var">why</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Either
  SDoc (MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))
</span><a href="#local-6989586621682049387"><span class="hs-identifier hs-var">mb_match_group</span></a></span><span>       </span><span class="hs-comment">-- Can't invert the pattern</span><span>
</span><span id="line-926"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; TcM (LHsBinds GhcTc) -&gt; TcM (LHsBinds GhcTc)
forall a. SrcSpan -&gt; TcRn a -&gt; TcRn a
</span><a href="GHC.Tc.Utils.Monad.html#setSrcSpan"><span class="hs-identifier hs-var">setSrcSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcRn) -&gt; SrcSpan
forall a e. GenLocated (SrcSpanAnn' a) e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
GenLocated SrcSpanAnnA (Pat GhcRn)
</span><a href="#local-6989586621682049383"><span class="hs-identifier hs-var">lpat</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TcM (LHsBinds GhcTc) -&gt; TcM (LHsBinds GhcTc))
-&gt; TcM (LHsBinds GhcTc) -&gt; TcM (LHsBinds GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TcRnMessage -&gt; TcM (LHsBinds GhcTc)
forall a. TcRnMessage -&gt; TcM a
</span><a href="GHC.Tc.Utils.Monad.html#failWithTc"><span class="hs-identifier hs-var">failWithTc</span></a></span><span> </span><span class="annot"><span class="annottext">(TcRnMessage -&gt; TcM (LHsBinds GhcTc))
-&gt; TcRnMessage -&gt; TcM (LHsBinds GhcTc)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">DiagnosticMessage -&gt; TcRnMessage
forall a.
(Diagnostic a, Typeable a, DiagnosticOpts a ~ NoDiagnosticOpts) =&gt;
a -&gt; TcRnMessage
</span><a href="GHC.Tc.Errors.Types.html#mkTcRnUnknownMessage"><span class="hs-identifier hs-var">mkTcRnUnknownMessage</span></a></span><span> </span><span class="annot"><span class="annottext">(DiagnosticMessage -&gt; TcRnMessage)
-&gt; DiagnosticMessage -&gt; TcRnMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[GhcHint] -&gt; SDoc -&gt; DiagnosticMessage
</span><a href="GHC.Types.Error.html#mkPlainError"><span class="hs-identifier hs-var">mkPlainError</span></a></span><span> </span><span class="annot"><span class="annottext">[GhcHint]
</span><a href="GHC.Types.Error.html#noHints"><span class="hs-identifier hs-var">noHints</span></a></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; DiagnosticMessage) -&gt; SDoc -&gt; DiagnosticMessage
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-927"></span><span>    </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Invalid right-hand side of bidirectional pattern synonym&quot;</span></span><span>
</span><span id="line-928"></span><span>                 </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049382"><span class="hs-identifier hs-var">ps_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#colon"><span class="hs-identifier hs-var">colon</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-929"></span><span>              </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682049386"><span class="hs-identifier hs-var">why</span></a></span><span>
</span><span id="line-930"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;RHS pattern:&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcRn) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
GenLocated SrcSpanAnnA (Pat GhcRn)
</span><a href="#local-6989586621682049383"><span class="hs-identifier hs-var">lpat</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-931"></span><span>
</span><span id="line-932"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Either.html#Right/Data.Either.html#Right"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621682049389"><span class="annot"><span class="annottext">MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><a href="#local-6989586621682049389"><span class="hs-identifier hs-var">match_group</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Either
  SDoc (MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))
</span><a href="#local-6989586621682049387"><span class="hs-identifier hs-var">mb_match_group</span></a></span><span>  </span><span class="hs-comment">-- Bidirectional</span><span>
</span><span id="line-933"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682049390"><span class="annot"><span class="annottext">PatSyn
</span><a href="#local-6989586621682049390"><span class="hs-identifier hs-var">patsyn</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; TcM PatSyn
</span><a href="GHC.Tc.Utils.Env.html#tcLookupPatSyn"><span class="hs-identifier hs-var">tcLookupPatSyn</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049382"><span class="hs-identifier hs-var">ps_name</span></a></span><span>
</span><span id="line-934"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">PatSyn -&gt; PatSynBuilder
</span><a href="GHC.Core.PatSyn.html#patSynBuilder"><span class="hs-identifier hs-var">patSynBuilder</span></a></span><span> </span><span class="annot"><span class="annottext">PatSyn
</span><a href="#local-6989586621682049390"><span class="hs-identifier hs-var">patsyn</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-935"></span><span>           </span><span class="annot"><span class="annottext">PatSynBuilder
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)))
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
forall a. Bag a
</span><a href="GHC.Data.Bag.html#emptyBag"><span class="hs-identifier hs-var">emptyBag</span></a></span><span> </span><span class="hs-special">;</span><span>
</span><span id="line-936"></span><span>             </span><span class="hs-comment">-- This case happens if we found a type error in the</span><span>
</span><span id="line-937"></span><span>             </span><span class="hs-comment">-- pattern synonym, recovered, and put a placeholder</span><span>
</span><span id="line-938"></span><span>             </span><span class="hs-comment">-- with patSynBuilder=Nothing in the environment</span><span>
</span><span id="line-939"></span><span>
</span><span id="line-940"></span><span>           </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682049393"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049393"><span class="hs-identifier hs-var">builder_name</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049394"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049394"><span class="hs-identifier hs-var">builder_ty</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049395"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682049395"><span class="hs-identifier hs-var">need_dummy_arg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>  </span><span class="hs-comment">-- Normal case</span><span>
</span><span id="line-941"></span><span>    </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- Bidirectional, so patSynBuilder returns Just</span><span>
</span><span id="line-942"></span><span>         </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682049396"><span class="annot"><span class="annottext">builder_id :: Id
</span><a href="#local-6989586621682049396"><span class="hs-identifier hs-var hs-var">builder_id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Kind -&gt; Id
</span><a href="GHC.Types.Id.html#mkExportedVanillaId"><span class="hs-identifier hs-var">mkExportedVanillaId</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049393"><span class="hs-identifier hs-var">builder_name</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049394"><span class="hs-identifier hs-var">builder_ty</span></a></span><span>
</span><span id="line-943"></span><span>                         </span><span class="hs-comment">-- See Note [Exported LocalIds] in GHC.Types.Id</span><span>
</span><span id="line-944"></span><span>
</span><span id="line-945"></span><span>             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049397"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049397"><span class="hs-identifier hs-var">req_theta</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[VarBndr Id Specificity]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049398"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049398"><span class="hs-identifier hs-var">prov_theta</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049399"><span class="annot"><span class="annottext">[Scaled Kind]
</span><a href="#local-6989586621682049399"><span class="hs-identifier hs-var">arg_tys</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Kind
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PatSyn
-&gt; ([VarBndr Id Specificity], [Kind], [VarBndr Id Specificity],
    [Kind], [Scaled Kind], Kind)
</span><a href="GHC.Core.PatSyn.html#patSynSigBndr"><span class="hs-identifier hs-var">patSynSigBndr</span></a></span><span> </span><span class="annot"><span class="annottext">PatSyn
</span><a href="#local-6989586621682049390"><span class="hs-identifier hs-var">patsyn</span></a></span><span>
</span><span id="line-946"></span><span>             </span><span id="local-6989586621682049401"><span class="annot"><span class="annottext">builder_arity :: Int
</span><a href="#local-6989586621682049401"><span class="hs-identifier hs-var hs-var">builder_arity</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Kind] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#length/Data.Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049397"><span class="hs-identifier hs-var">req_theta</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#length/Data.Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621682049398"><span class="hs-identifier hs-var">prov_theta</span></a></span><span>
</span><span id="line-947"></span><span>                             </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">[Scaled Kind] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#length/Data.Foldable.html#length"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[Scaled Kind]
</span><a href="#local-6989586621682049399"><span class="hs-identifier hs-var">arg_tys</span></a></span><span>
</span><span id="line-948"></span><span>                             </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682049395"><span class="hs-identifier hs-var">need_dummy_arg</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-949"></span><span>
</span><span id="line-950"></span><span>       </span><span class="hs-comment">-- Add INLINE pragmas; see Note [Pragmas for pattern synonyms]</span><span>
</span><span id="line-951"></span><span>       </span><span class="hs-comment">-- NB: prag_fn is keyed by the PatSyn Name, not the (internal) builder name</span><span>
</span><span id="line-952"></span><span>       </span><span class="hs-special">;</span><span> </span><span id="local-6989586621682049402"><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049402"><span class="hs-identifier hs-var">builder_id</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Id -&gt; [LSig GhcRn] -&gt; IOEnv (Env TcGblEnv TcLclEnv) Id
</span><a href="GHC.Tc.Gen.Sig.html#addInlinePrags"><span class="hs-identifier hs-var">addInlinePrags</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049396"><span class="hs-identifier hs-var">builder_id</span></a></span><span>              </span><span class="annot"><span class="annottext">([LSig GhcRn] -&gt; IOEnv (Env TcGblEnv TcLclEnv) Id)
-&gt; [LSig GhcRn] -&gt; IOEnv (Env TcGblEnv TcLclEnv) Id
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-953"></span><span>                       </span><span class="annot"><span class="annottext">(LSig GhcRn -&gt; LSig GhcRn) -&gt; [LSig GhcRn] -&gt; [LSig GhcRn]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; LSig GhcRn -&gt; LSig GhcRn
</span><a href="GHC.Tc.Gen.Sig.html#addInlinePragArity"><span class="hs-identifier hs-var">addInlinePragArity</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682049401"><span class="hs-identifier hs-var">builder_arity</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([LSig GhcRn] -&gt; [LSig GhcRn]) -&gt; [LSig GhcRn] -&gt; [LSig GhcRn]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-954"></span><span>                       </span><span class="annot"><span class="annottext">TcPragEnv -&gt; Name -&gt; [LSig GhcRn]
</span><a href="GHC.Tc.Gen.Sig.html#lookupPragEnv"><span class="hs-identifier hs-var">lookupPragEnv</span></a></span><span> </span><span class="annot"><span class="annottext">TcPragEnv
</span><a href="#local-6989586621682049379"><span class="hs-identifier hs-var">prag_fn</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049382"><span class="hs-identifier hs-var">ps_name</span></a></span><span>
</span><span id="line-955"></span><span>
</span><span id="line-956"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682049403"><span class="annot"><span class="annottext">match_group' :: MatchGroup GhcRn (LHsExpr GhcRn)
</span><a href="#local-6989586621682049403"><span class="hs-identifier hs-var hs-var">match_group'</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682049395"><span class="hs-identifier hs-var">need_dummy_arg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsExpr GhcRn)
-&gt; MatchGroup GhcRn (LHsExpr GhcRn)
</span><a href="#local-6989586621682049404"><span class="hs-identifier hs-var">add_dummy_arg</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsExpr GhcRn)
MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><a href="#local-6989586621682049389"><span class="hs-identifier hs-var">match_group</span></a></span><span>
</span><span id="line-957"></span><span>                          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsExpr GhcRn)
MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><a href="#local-6989586621682049389"><span class="hs-identifier hs-var">match_group</span></a></span><span>
</span><span id="line-958"></span><span>
</span><span id="line-959"></span><span>             </span><span id="local-6989586621682049405"><span class="annot"><span class="annottext">bind :: HsBindLR GhcRn GhcRn
</span><a href="#local-6989586621682049405"><span class="hs-identifier hs-var hs-var">bind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#FunBind"><span class="hs-identifier hs-type">FunBind</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fun_id :: LIdP GhcRn
</span><a href="Language.Haskell.Syntax.Binds.html#fun_id"><span class="hs-identifier hs-var">fun_id</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; Name -&gt; LocatedN Name
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682049381"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Name
</span><a href="GHC.Types.Id.html#idName"><span class="hs-identifier hs-var">idName</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049402"><span class="hs-identifier hs-var">builder_id</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-960"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_matches :: MatchGroup GhcRn (LHsExpr GhcRn)
</span><a href="Language.Haskell.Syntax.Binds.html#fun_matches"><span class="hs-identifier hs-var">fun_matches</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsExpr GhcRn)
</span><a href="#local-6989586621682049403"><span class="hs-identifier hs-var">match_group'</span></a></span><span>
</span><span id="line-961"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fun_ext :: XFunBind GhcRn GhcRn
</span><a href="Language.Haskell.Syntax.Binds.html#fun_ext"><span class="hs-identifier hs-var">fun_ext</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XFunBind GhcRn GhcRn
NameSet
</span><a href="GHC.Types.Name.Set.html#emptyNameSet"><span class="hs-identifier hs-var">emptyNameSet</span></a></span><span>
</span><span id="line-962"></span><span>                            </span><span class="hs-special">}</span><span>
</span><span id="line-963"></span><span>
</span><span id="line-964"></span><span>             </span><span id="local-6989586621682049407"><span class="annot"><span class="annottext">sig :: TcIdSigInfo
</span><a href="#local-6989586621682049407"><span class="hs-identifier hs-var hs-var">sig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UserTypeCtxt -&gt; Id -&gt; TcIdSigInfo
</span><a href="GHC.Tc.Gen.Sig.html#completeSigFromId"><span class="hs-identifier hs-var">completeSigFromId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; UserTypeCtxt
</span><a href="GHC.Tc.Types.Origin.html#PatSynCtxt"><span class="hs-identifier hs-var">PatSynCtxt</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049382"><span class="hs-identifier hs-var">ps_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049402"><span class="hs-identifier hs-var">builder_id</span></a></span><span>
</span><span id="line-965"></span><span>
</span><span id="line-966"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tcPatSynBuilderBind {&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; TcRn ()) -&gt; SDoc -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-967"></span><span>         </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">PatSyn -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">PatSyn
</span><a href="#local-6989586621682049390"><span class="hs-identifier hs-var">patsyn</span></a></span><span>
</span><span id="line-968"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Id -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049402"><span class="hs-identifier hs-var">builder_id</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Id -&gt; Kind
</span><a href="GHC.Types.Id.html#idType"><span class="hs-identifier hs-var">idType</span></a></span><span> </span><span class="annot"><span class="annottext">Id
</span><a href="#local-6989586621682049402"><span class="hs-identifier hs-var">builder_id</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-969"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682049408"><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
</span><a href="#local-6989586621682049408"><span class="hs-identifier hs-var">builder_binds</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Id]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TcPragEnv
-&gt; TcIdSigInfo -&gt; LHsBind GhcRn -&gt; TcM (LHsBinds GhcTc, [Id])
</span><a href="GHC.Tc.Gen.Bind.html#tcPolyCheck"><span class="hs-identifier hs-var">tcPolyCheck</span></a></span><span> </span><span class="annot"><span class="annottext">TcPragEnv
</span><a href="GHC.Tc.Gen.Sig.html#emptyPragEnv"><span class="hs-identifier hs-var">emptyPragEnv</span></a></span><span> </span><span class="annot"><span class="annottext">TcIdSigInfo
</span><a href="#local-6989586621682049407"><span class="hs-identifier hs-var">sig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsBindLR GhcRn GhcRn
-&gt; LocatedAn AnnListItem (HsBindLR GhcRn GhcRn)
forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">HsBindLR GhcRn GhcRn
</span><a href="#local-6989586621682049405"><span class="hs-identifier hs-var">bind</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-970"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; TcRn ()
</span><a href="GHC.Tc.Utils.Monad.html#traceTc"><span class="hs-identifier hs-var">traceTc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tcPatSynBuilderBind }&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; TcRn ()) -&gt; SDoc -&gt; TcRn ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
</span><a href="#local-6989586621682049408"><span class="hs-identifier hs-var">builder_binds</span></a></span><span>
</span><span id="line-971"></span><span>       </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
-&gt; IOEnv
     (Env TcGblEnv TcLclEnv)
     (Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc)))
forall a. a -&gt; IOEnv (Env TcGblEnv TcLclEnv) a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBindLR GhcTc GhcTc))
</span><a href="#local-6989586621682049408"><span class="hs-identifier hs-var">builder_binds</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span class="hs-cpp">

#if __GLASGOW_HASKELL__ &lt;= 810
</span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier">otherwise</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">panic</span><span> </span><span class="hs-string">&quot;tcPatSynBuilderBind&quot;</span><span>  </span><span class="hs-comment">-- Both cases dealt with</span><span class="hs-cpp">
#endif
</span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-977"></span><span>    </span><span id="local-6989586621682049387"><span class="annot"><span class="annottext">mb_match_group :: Either
  SDoc (MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))
</span><a href="#local-6989586621682049387"><span class="hs-identifier hs-var hs-var">mb_match_group</span></a></span></span><span>
</span><span id="line-978"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsPatSynDir GhcRn
</span><a href="#local-6989586621682049384"><span class="hs-identifier hs-var">dir</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-979"></span><span>           </span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ExplicitBidirectional"><span class="hs-identifier hs-type">ExplicitBidirectional</span></a></span><span> </span><span id="local-6989586621682049410"><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsExpr GhcRn)
</span><a href="#local-6989586621682049410"><span class="hs-identifier hs-var">explicit_mg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))
-&gt; Either
     SDoc (MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))
forall a b. b -&gt; Either a b
</span><a href="../../base-4.18.3.0/src/Data.Either.html#Right/Data.Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsExpr GhcRn)
MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><a href="#local-6989586621682049410"><span class="hs-identifier hs-var">explicit_mg</span></a></span><span>
</span><span id="line-980"></span><span>           </span><span class="annot"><span class="annottext">HsPatSynDir GhcRn
</span><a href="Language.Haskell.Syntax.Binds.html#ImplicitBidirectional"><span class="hs-identifier hs-var">ImplicitBidirectional</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsExpr GhcRn)
 -&gt; MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))
-&gt; Either SDoc (GenLocated SrcSpanAnnA (HsExpr GhcRn))
-&gt; Either
     SDoc (MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))
forall a b. (a -&gt; b) -&gt; Either SDoc a -&gt; Either SDoc b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#fmap/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn -&gt; MatchGroup GhcRn (LHsExpr GhcRn)
GenLocated SrcSpanAnnA (HsExpr GhcRn)
-&gt; MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><a href="#local-6989586621682049411"><span class="hs-identifier hs-var">mk_mg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
-&gt; [LocatedN Name] -&gt; LPat GhcRn -&gt; Either SDoc (LHsExpr GhcRn)
</span><a href="GHC.Tc.TyCl.PatSyn.html#tcPatToExpr"><span class="hs-identifier hs-var">tcPatToExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049382"><span class="hs-identifier hs-var">ps_name</span></a></span><span> </span><span class="annot"><span class="annottext">[LIdP GhcRn]
[LocatedN Name]
</span><a href="#local-6989586621682049413"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621682049383"><span class="hs-identifier hs-var">lpat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-981"></span><span>           </span><span class="annot"><span class="annottext">HsPatSynDir GhcRn
</span><a href="Language.Haskell.Syntax.Binds.html#Unidirectional"><span class="hs-identifier hs-var">Unidirectional</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
-&gt; Either
     SDoc (MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tcPatSynBuilderBind&quot;</span></span><span>
</span><span id="line-982"></span><span>
</span><span id="line-983"></span><span>    </span><span class="annot"><a href="#local-6989586621682049411"><span class="hs-identifier hs-type">mk_mg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MatchGroup"><span class="hs-identifier hs-type">MatchGroup</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-984"></span><span>    </span><span id="local-6989586621682049411"><span class="annot"><span class="annottext">mk_mg :: LHsExpr GhcRn -&gt; MatchGroup GhcRn (LHsExpr GhcRn)
</span><a href="#local-6989586621682049411"><span class="hs-identifier hs-var hs-var">mk_mg</span></a></span></span><span> </span><span id="local-6989586621682049414"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621682049414"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Origin
-&gt; LocatedL
     [LocatedA (Match GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
-&gt; MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))
forall (p :: Pass) (body :: * -&gt; *).
AnnoBody p body =&gt;
Origin
-&gt; LocatedL
     [LocatedA (Match (GhcPass p) (LocatedA (body (GhcPass p))))]
-&gt; MatchGroup (GhcPass p) (LocatedA (body (GhcPass p)))
</span><a href="GHC.Hs.Utils.html#mkMatchGroup"><span class="hs-identifier hs-var">mkMatchGroup</span></a></span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="GHC.Types.Basic.html#Generated"><span class="hs-identifier hs-var">Generated</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LocatedA (Match GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
-&gt; LocatedL
     [LocatedA (Match GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LMatch GhcRn (LHsExpr GhcRn)
LocatedA (Match GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)))
</span><a href="#local-6989586621682049416"><span class="hs-identifier hs-var">builder_match</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-985"></span><span>          </span><span class="hs-keyword">where</span><span>
</span><span id="line-986"></span><span>            </span><span id="local-6989586621682049417"><span class="annot"><span class="annottext">builder_args :: [GenLocated SrcSpanAnnA (Pat GhcRn)]
</span><a href="#local-6989586621682049417"><span class="hs-identifier hs-var hs-var">builder_args</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; Pat GhcRn -&gt; GenLocated SrcSpanAnnA (Pat GhcRn)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; SrcSpanAnnA
forall a ann. SrcSpanAnn' a -&gt; SrcAnn ann
</span><a href="GHC.Parser.Annotation.html#na2la"><span class="hs-identifier hs-var">na2la</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682049419"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XVarPat GhcRn -&gt; LIdP GhcRn -&gt; Pat GhcRn
forall p. XVarPat p -&gt; LIdP p -&gt; Pat p
</span><a href="Language.Haskell.Syntax.Pat.html#VarPat"><span class="hs-identifier hs-var">VarPat</span></a></span><span> </span><span class="annot"><span class="annottext">XVarPat GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; Name -&gt; LocatedN Name
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682049419"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049421"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-987"></span><span>                            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682049419"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682049419"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682049421"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049421"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[LIdP GhcRn]
[LocatedN Name]
</span><a href="#local-6989586621682049413"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-988"></span><span>            </span><span id="local-6989586621682049416"><span class="annot"><span class="annottext">builder_match :: LMatch GhcRn (LHsExpr GhcRn)
</span><a href="#local-6989586621682049416"><span class="hs-identifier hs-var hs-var">builder_match</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsMatchContext GhcRn
-&gt; [LPat GhcRn]
-&gt; LHsExpr GhcRn
-&gt; HsLocalBinds GhcRn
-&gt; LMatch GhcRn (LHsExpr GhcRn)
forall (p :: Pass).
IsPass p =&gt;
HsMatchContext (GhcPass p)
-&gt; [LPat (GhcPass p)]
-&gt; LHsExpr (GhcPass p)
-&gt; HsLocalBinds (GhcPass p)
-&gt; LMatch (GhcPass p) (LHsExpr (GhcPass p))
</span><a href="GHC.Hs.Utils.html#mkMatch"><span class="hs-identifier hs-var">mkMatch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LIdP (NoGhcTc GhcRn) -&gt; HsMatchContext GhcRn
forall p. LIdP (NoGhcTc p) -&gt; HsMatchContext p
</span><a href="GHC.Hs.Utils.html#mkPrefixFunRhs"><span class="hs-identifier hs-var">mkPrefixFunRhs</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP (NoGhcTc GhcRn)
LIdP GhcRn
</span><a href="#local-6989586621682049380"><span class="hs-identifier hs-var">ps_lname</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-989"></span><span>                                    </span><span class="annot"><span class="annottext">[LPat GhcRn]
[GenLocated SrcSpanAnnA (Pat GhcRn)]
</span><a href="#local-6989586621682049417"><span class="hs-identifier hs-var">builder_args</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621682049414"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-990"></span><span>                                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XEmptyLocalBinds GhcRn GhcRn -&gt; HsLocalBinds GhcRn
forall idL idR. XEmptyLocalBinds idL idR -&gt; HsLocalBindsLR idL idR
</span><a href="Language.Haskell.Syntax.Binds.html#EmptyLocalBinds"><span class="hs-identifier hs-var">EmptyLocalBinds</span></a></span><span> </span><span class="annot"><span class="annottext">XEmptyLocalBinds GhcRn GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-991"></span><span>
</span><span id="line-992"></span><span>    </span><span id="local-6989586621682049413"><span class="annot"><span class="annottext">args :: [LIdP GhcRn]
</span><a href="#local-6989586621682049413"><span class="hs-identifier hs-var hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsPatSynDetails GhcRn
</span><a href="#local-6989586621682049385"><span class="hs-identifier hs-var">details</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-993"></span><span>              </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#PrefixCon"><span class="hs-identifier hs-type">PrefixCon</span></a></span><span> </span><span class="annot"><span class="annottext">[Void]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682049422"><span class="annot"><span class="annottext">[LIdP GhcRn]
</span><a href="#local-6989586621682049422"><span class="hs-identifier hs-var">args</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[LIdP GhcRn]
</span><a href="#local-6989586621682049422"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-994"></span><span>              </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#InfixCon"><span class="hs-identifier hs-type">InfixCon</span></a></span><span> </span><span id="local-6989586621682049423"><span class="annot"><span class="annottext">LIdP GhcRn
</span><a href="#local-6989586621682049423"><span class="hs-identifier hs-var">arg1</span></a></span></span><span> </span><span id="local-6989586621682049424"><span class="annot"><span class="annottext">LIdP GhcRn
</span><a href="#local-6989586621682049424"><span class="hs-identifier hs-var">arg2</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LIdP GhcRn
</span><a href="#local-6989586621682049423"><span class="hs-identifier hs-var">arg1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LIdP GhcRn
</span><a href="#local-6989586621682049424"><span class="hs-identifier hs-var">arg2</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-995"></span><span>              </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#RecCon"><span class="hs-identifier hs-type">RecCon</span></a></span><span> </span><span id="local-6989586621682049425"><span class="annot"><span class="annottext">[RecordPatSynField GhcRn]
</span><a href="#local-6989586621682049425"><span class="hs-identifier hs-var">args</span></a></span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(RecordPatSynField GhcRn -&gt; LocatedN Name)
-&gt; [RecordPatSynField GhcRn] -&gt; [LocatedN Name]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">RecordPatSynField GhcRn -&gt; LIdP GhcRn
RecordPatSynField GhcRn -&gt; LocatedN Name
forall pass. RecordPatSynField pass -&gt; LIdP pass
</span><a href="Language.Haskell.Syntax.Binds.html#recordPatSynPatVar"><span class="hs-identifier hs-var">recordPatSynPatVar</span></a></span><span> </span><span class="annot"><span class="annottext">[RecordPatSynField GhcRn]
</span><a href="#local-6989586621682049425"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-996"></span><span>
</span><span id="line-997"></span><span>    </span><span class="annot"><a href="#local-6989586621682049404"><span class="hs-identifier hs-type">add_dummy_arg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MatchGroup"><span class="hs-identifier hs-type">MatchGroup</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-998"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MatchGroup"><span class="hs-identifier hs-type">MatchGroup</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-999"></span><span>    </span><span id="local-6989586621682049404"><span class="annot"><span class="annottext">add_dummy_arg :: MatchGroup GhcRn (LHsExpr GhcRn)
-&gt; MatchGroup GhcRn (LHsExpr GhcRn)
</span><a href="#local-6989586621682049404"><span class="hs-identifier hs-var hs-var">add_dummy_arg</span></a></span></span><span> </span><span id="local-6989586621682049426"><span class="annot"><span class="annottext">mg :: MatchGroup GhcRn (LHsExpr GhcRn)
</span><a href="#local-6989586621682049426"><span class="hs-identifier hs-var">mg</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#MG"><span class="hs-identifier hs-type">MG</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mg_alts :: forall p body. MatchGroup p body -&gt; XRec p [LMatch p body]
</span><a href="Language.Haskell.Syntax.Expr.html#mg_alts"><span class="hs-identifier hs-var">mg_alts</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1000"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682049427"><span class="annot"><span class="annottext">SrcSpanAnnL
</span><a href="#local-6989586621682049427"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682049428"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682049428"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682049429"><span class="annot"><span class="annottext">match :: Match GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><a href="#local-6989586621682049429"><span class="hs-identifier hs-var">match</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">m_pats :: forall p body. Match p body -&gt; [LPat p]
</span><a href="Language.Haskell.Syntax.Expr.html#m_pats"><span class="hs-identifier hs-var">m_pats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682049432"><span class="annot"><span class="annottext">[LPat GhcRn]
</span><a href="#local-6989586621682049432"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1001"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsExpr GhcRn)
</span><a href="#local-6989586621682049426"><span class="hs-identifier hs-var">mg</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#mg_alts"><span class="hs-identifier hs-var">mg_alts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682049427"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><a href="#local-6989586621682049428"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621682049429"><span class="hs-identifier hs-type">match</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#m_pats"><span class="hs-identifier hs-var">m_pats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Hs.Utils.html#nlWildPatName"><span class="hs-identifier hs-type">nlWildPatName</span></a></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><a href="#local-6989586621682049432"><span class="hs-identifier hs-type">pats</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1002"></span><span>    </span><span class="annot"><a href="#local-6989586621682049404"><span class="hs-identifier hs-var">add_dummy_arg</span></a></span><span> </span><span id="local-6989586621682049434"><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsExpr GhcRn)
</span><a href="#local-6989586621682049434"><span class="hs-identifier hs-var">other_mg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; MatchGroup GhcRn (LHsExpr GhcRn)
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;add_dummy_arg&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; MatchGroup GhcRn (LHsExpr GhcRn))
-&gt; SDoc -&gt; MatchGroup GhcRn (LHsExpr GhcRn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1003"></span><span>                             </span><span class="annot"><span class="annottext">MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn)) -&gt; SDoc
forall (idR :: Pass) body.
(OutputableBndrId idR, Outputable body) =&gt;
MatchGroup (GhcPass idR) body -&gt; SDoc
</span><a href="GHC.Hs.Expr.html#pprMatches"><span class="hs-identifier hs-var">pprMatches</span></a></span><span> </span><span class="annot"><span class="annottext">MatchGroup GhcRn (LHsExpr GhcRn)
MatchGroup GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><a href="#local-6989586621682049434"><span class="hs-identifier hs-var">other_mg</span></a></span><span>
</span><span id="line-1004"></span><span>
</span><span id="line-1005"></span><span class="annot"><a href="GHC.Tc.TyCl.PatSyn.html#patSynBuilderOcc"><span class="hs-identifier hs-type">patSynBuilderOcc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.PatSyn.html#PatSyn"><span class="hs-identifier hs-type">PatSyn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Tc.Utils.TcType.html#TcSigmaType"><span class="hs-identifier hs-type">TcSigmaType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1006"></span><span id="patSynBuilderOcc"><span class="annot"><span class="annottext">patSynBuilderOcc :: PatSyn -&gt; Maybe (HsExpr GhcTc, Kind)
</span><a href="GHC.Tc.TyCl.PatSyn.html#patSynBuilderOcc"><span class="hs-identifier hs-var hs-var">patSynBuilderOcc</span></a></span></span><span> </span><span id="local-6989586621682049438"><span class="annot"><span class="annottext">PatSyn
</span><a href="#local-6989586621682049438"><span class="hs-identifier hs-var">ps</span></a></span></span><span>
</span><span id="line-1007"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049439"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049439"><span class="hs-identifier hs-var">builder_ty</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049440"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682049440"><span class="hs-identifier hs-var">add_void_arg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">PatSyn -&gt; PatSynBuilder
</span><a href="GHC.Core.PatSyn.html#patSynBuilder"><span class="hs-identifier hs-var">patSynBuilder</span></a></span><span> </span><span class="annot"><span class="annottext">PatSyn
</span><a href="#local-6989586621682049438"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1008"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682049441"><span class="annot"><span class="annottext">builder_expr :: HsExpr GhcTc
</span><a href="#local-6989586621682049441"><span class="hs-identifier hs-var hs-var">builder_expr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConLike -&gt; HsExpr GhcTc
</span><a href="GHC.Hs.Utils.html#mkConLikeTc"><span class="hs-identifier hs-var">mkConLikeTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PatSyn -&gt; ConLike
</span><a href="GHC.Core.ConLike.html#PatSynCon"><span class="hs-identifier hs-var">PatSynCon</span></a></span><span> </span><span class="annot"><span class="annottext">PatSyn
</span><a href="#local-6989586621682049438"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1009"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HsExpr GhcTc, Kind) -&gt; Maybe (HsExpr GhcTc, Kind)
forall a. a -&gt; Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">((HsExpr GhcTc, Kind) -&gt; Maybe (HsExpr GhcTc, Kind))
-&gt; (HsExpr GhcTc, Kind) -&gt; Maybe (HsExpr GhcTc, Kind)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1010"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682049440"><span class="hs-identifier hs-var">add_void_arg</span></a></span><span>
</span><span id="line-1011"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621682049441"><span class="hs-identifier hs-var">builder_expr</span></a></span><span>   </span><span class="hs-comment">-- still just return builder_expr; the void# arg</span><span>
</span><span id="line-1012"></span><span>                          </span><span class="hs-comment">-- is added by dsConLike in the desugarer</span><span>
</span><span id="line-1013"></span><span>         </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Kind
</span><a href="GHC.Tc.Utils.TcType.html#tcFunResultTy"><span class="hs-identifier hs-var">tcFunResultTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049439"><span class="hs-identifier hs-var">builder_ty</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-1014"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsExpr GhcTc
</span><a href="#local-6989586621682049441"><span class="hs-identifier hs-var">builder_expr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049439"><span class="hs-identifier hs-var">builder_ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1015"></span><span>
</span><span id="line-1016"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>  </span><span class="hs-comment">-- Unidirectional</span><span>
</span><span id="line-1017"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (HsExpr GhcTc, Kind)
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1018"></span><span>
</span><span id="line-1019"></span><span class="annot"><a href="GHC.Tc.TyCl.PatSyn.html#add_void"><span class="hs-identifier hs-type">add_void</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-1020"></span><span id="add_void"><span class="annot"><span class="annottext">add_void :: Bool -&gt; Kind -&gt; Kind
</span><a href="GHC.Tc.TyCl.PatSyn.html#add_void"><span class="hs-identifier hs-var hs-var">add_void</span></a></span></span><span> </span><span id="local-6989586621682049444"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682049444"><span class="hs-identifier hs-var">need_dummy_arg</span></a></span></span><span> </span><span id="local-6989586621682049445"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049445"><span class="hs-identifier hs-var">ty</span></a></span></span><span>
</span><span id="line-1021"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621682049444"><span class="hs-identifier hs-var">need_dummy_arg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Kind -&gt; Kind -&gt; Kind
Kind -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkVisFunTyMany"><span class="hs-identifier hs-var">mkVisFunTyMany</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.html#unboxedUnitTy"><span class="hs-identifier hs-var">unboxedUnitTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049445"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1022"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621682049445"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1023"></span><span>
</span><span id="line-1024"></span><span class="annot"><a href="GHC.Tc.TyCl.PatSyn.html#tcPatToExpr"><span class="hs-identifier hs-type">tcPatToExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span>
</span><span id="line-1025"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Either.html#Either/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1026"></span><span class="hs-comment">-- Given a /pattern/, return an /expression/ that builds a value</span><span>
</span><span id="line-1027"></span><span class="hs-comment">-- that matches the pattern.  E.g. if the pattern is (Just [x]),</span><span>
</span><span id="line-1028"></span><span class="hs-comment">-- the expression is (Just [x]).  They look the same, but the</span><span>
</span><span id="line-1029"></span><span class="hs-comment">-- input uses constructors from HsPat and the output uses constructors</span><span>
</span><span id="line-1030"></span><span class="hs-comment">-- from HsExpr.</span><span>
</span><span id="line-1031"></span><span class="hs-comment">--</span><span>
</span><span id="line-1032"></span><span class="hs-comment">-- Returns (Left r) if the pattern is not invertible, for reason r.</span><span>
</span><span id="line-1033"></span><span class="hs-comment">-- See Note [Builder for a bidirectional pattern synonym]</span><span>
</span><span id="line-1034"></span><span id="tcPatToExpr"><span class="annot"><span class="annottext">tcPatToExpr :: Name
-&gt; [LocatedN Name] -&gt; LPat GhcRn -&gt; Either SDoc (LHsExpr GhcRn)
</span><a href="GHC.Tc.TyCl.PatSyn.html#tcPatToExpr"><span class="hs-identifier hs-var hs-var">tcPatToExpr</span></a></span></span><span> </span><span id="local-6989586621682049446"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049446"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621682049447"><span class="annot"><span class="annottext">[LocatedN Name]
</span><a href="#local-6989586621682049447"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span id="local-6989586621682049448"><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621682049448"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LPat GhcRn -&gt; Either SDoc (LHsExpr GhcRn)
</span><a href="#local-6989586621682049449"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621682049448"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1035"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1036"></span><span>    </span><span id="local-6989586621682049450"><span class="annot"><span class="annottext">lhsVars :: NameSet
</span><a href="#local-6989586621682049450"><span class="hs-identifier hs-var hs-var">lhsVars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Name] -&gt; NameSet
</span><a href="GHC.Types.Name.Set.html#mkNameSet"><span class="hs-identifier hs-var">mkNameSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LocatedN Name -&gt; Name) -&gt; [LocatedN Name] -&gt; [Name]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN Name -&gt; Name
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">[LocatedN Name]
</span><a href="#local-6989586621682049447"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1037"></span><span>
</span><span id="line-1038"></span><span>    </span><span class="hs-comment">-- Make a prefix con for prefix and infix patterns for simplicity</span><span>
</span><span id="line-1039"></span><span>    </span><span class="annot"><a href="#local-6989586621682049452"><span class="hs-identifier hs-type">mkPrefixConExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1040"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Either.html#Either/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1041"></span><span>    </span><span id="local-6989586621682049452"><span class="annot"><span class="annottext">mkPrefixConExpr :: LocatedN Name -&gt; [LPat GhcRn] -&gt; Either SDoc (HsExpr GhcRn)
</span><a href="#local-6989586621682049452"><span class="hs-identifier hs-var hs-var">mkPrefixConExpr</span></a></span></span><span> </span><span id="local-6989586621682049453"><span class="annot"><span class="annottext">lcon :: LocatedN Name
</span><a href="#local-6989586621682049453"><span class="hs-identifier hs-var">lcon</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682049454"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682049454"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682049455"><span class="annot"><span class="annottext">[LPat GhcRn]
</span><a href="#local-6989586621682049455"><span class="hs-identifier hs-var">pats</span></a></span></span><span>
</span><span id="line-1042"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682049456"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsExpr GhcRn)]
</span><a href="#local-6989586621682049456"><span class="hs-identifier hs-var">exprs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (Pat GhcRn)
 -&gt; Either SDoc (GenLocated SrcSpanAnnA (HsExpr GhcRn)))
-&gt; [GenLocated SrcSpanAnnA (Pat GhcRn)]
-&gt; Either SDoc [GenLocated SrcSpanAnnA (HsExpr GhcRn)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="../../base-4.18.3.0/src/Data.Traversable.html#mapM/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn -&gt; Either SDoc (LHsExpr GhcRn)
GenLocated SrcSpanAnnA (Pat GhcRn)
-&gt; Either SDoc (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><a href="#local-6989586621682049449"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[LPat GhcRn]
[GenLocated SrcSpanAnnA (Pat GhcRn)]
</span><a href="#local-6989586621682049455"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-1043"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621682049457"><span class="annot"><span class="annottext">con :: GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621682049457"><span class="hs-identifier hs-var hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsExpr GhcRn -&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; SrcSpanAnnA
forall a ann. SrcSpanAnn' a -&gt; SrcAnn ann
</span><a href="GHC.Parser.Annotation.html#l2l"><span class="hs-identifier hs-var">l2l</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682049454"><span class="hs-identifier hs-var">loc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XVar GhcRn -&gt; LIdP GhcRn -&gt; HsExpr GhcRn
forall p. XVar p -&gt; LIdP p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsVar"><span class="hs-identifier hs-var">HsVar</span></a></span><span> </span><span class="annot"><span class="annottext">XVar GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcRn
LocatedN Name
</span><a href="#local-6989586621682049453"><span class="hs-identifier hs-var">lcon</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1044"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; Either SDoc (HsExpr GhcRn)
forall a. a -&gt; Either SDoc a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; HsExpr GhcRn
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; HsExpr GhcRn)
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; HsExpr GhcRn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn -&gt; [LHsExpr GhcRn] -&gt; LHsExpr GhcRn
forall (id :: Pass).
LHsExpr (GhcPass id)
-&gt; [LHsExpr (GhcPass id)] -&gt; LHsExpr (GhcPass id)
</span><a href="GHC.Hs.Utils.html#mkHsApps"><span class="hs-identifier hs-var">mkHsApps</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
GenLocated SrcSpanAnnA (HsExpr GhcRn)
</span><a href="#local-6989586621682049457"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsExpr GhcRn]
[GenLocated SrcSpanAnnA (HsExpr GhcRn)]
</span><a href="#local-6989586621682049456"><span class="hs-identifier hs-var">exprs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1045"></span><span>           </span><span class="hs-special">}</span><span>
</span><span id="line-1046"></span><span>
</span><span id="line-1047"></span><span>    </span><span class="annot"><a href="#local-6989586621682049460"><span class="hs-identifier hs-type">mkRecordConExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedN"><span class="hs-identifier hs-type">LocatedN</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Name.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsRecFields"><span class="hs-identifier hs-type">HsRecFields</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1048"></span><span>                    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Either.html#Either/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1049"></span><span>    </span><span id="local-6989586621682049460"><span class="annot"><span class="annottext">mkRecordConExpr :: LocatedN Name
-&gt; HsRecFields GhcRn (LPat GhcRn) -&gt; Either SDoc (HsExpr GhcRn)
</span><a href="#local-6989586621682049460"><span class="hs-identifier hs-var hs-var">mkRecordConExpr</span></a></span></span><span> </span><span id="local-6989586621682049461"><span class="annot"><span class="annottext">LocatedN Name
</span><a href="#local-6989586621682049461"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsRecFields"><span class="hs-identifier hs-type">HsRecFields</span></a></span><span> </span><span id="local-6989586621682049463"><span class="annot"><span class="annottext">[LHsRecField GhcRn (LPat GhcRn)]
</span><a href="#local-6989586621682049463"><span class="hs-identifier hs-var">fields</span></a></span></span><span> </span><span id="local-6989586621682049464"><span class="annot"><span class="annottext">Maybe (XRec GhcRn RecFieldsDotDot)
</span><a href="#local-6989586621682049464"><span class="hs-identifier hs-var">dd</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1050"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682049465"><span class="annot"><span class="annottext">[GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated (SrcAnn NoEpAnns) (FieldOcc GhcRn))
      (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
</span><a href="#local-6989586621682049465"><span class="hs-identifier hs-var">exprFields</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated (SrcAnn NoEpAnns) (FieldOcc GhcRn))
      (GenLocated SrcSpanAnnA (Pat GhcRn)))
 -&gt; Either
      SDoc
      (GenLocated
         SrcSpanAnnA
         (HsFieldBind
            (GenLocated (SrcAnn NoEpAnns) (FieldOcc GhcRn))
            (GenLocated SrcSpanAnnA (HsExpr GhcRn)))))
-&gt; [GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated (SrcAnn NoEpAnns) (FieldOcc GhcRn))
         (GenLocated SrcSpanAnnA (Pat GhcRn)))]
-&gt; Either
     SDoc
     [GenLocated
        SrcSpanAnnA
        (HsFieldBind
           (GenLocated (SrcAnn NoEpAnns) (FieldOcc GhcRn))
           (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="../../base-4.18.3.0/src/Data.Traversable.html#mapM/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">LHsRecField GhcRn (LPat GhcRn)
-&gt; Either SDoc (LHsRecField GhcRn (LHsExpr GhcRn))
GenLocated
  SrcSpanAnnA
  (HsFieldBind
     (GenLocated (SrcAnn NoEpAnns) (FieldOcc GhcRn))
     (GenLocated SrcSpanAnnA (Pat GhcRn)))
-&gt; Either
     SDoc
     (GenLocated
        SrcSpanAnnA
        (HsFieldBind
           (GenLocated (SrcAnn NoEpAnns) (FieldOcc GhcRn))
           (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
</span><a href="#local-6989586621682049466"><span class="hs-identifier hs-var">go'</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsRecField GhcRn (LPat GhcRn)]
[GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated (SrcAnn NoEpAnns) (FieldOcc GhcRn))
      (GenLocated SrcSpanAnnA (Pat GhcRn)))]
</span><a href="#local-6989586621682049463"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-1051"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; Either SDoc (HsExpr GhcRn)
forall a. a -&gt; Either SDoc a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XRecordCon GhcRn
-&gt; XRec GhcRn (ConLikeP GhcRn)
-&gt; HsRecordBinds GhcRn
-&gt; HsExpr GhcRn
forall p.
XRecordCon p -&gt; XRec p (ConLikeP p) -&gt; HsRecordBinds p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#RecordCon"><span class="hs-identifier hs-var">RecordCon</span></a></span><span> </span><span class="annot"><span class="annottext">XRecordCon GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (ConLikeP GhcRn)
LocatedN Name
</span><a href="#local-6989586621682049461"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LHsRecField GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))]
-&gt; Maybe (XRec GhcRn RecFieldsDotDot)
-&gt; HsRecFields GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))
forall p arg.
[LHsRecField p arg]
-&gt; Maybe (XRec p RecFieldsDotDot) -&gt; HsRecFields p arg
</span><a href="Language.Haskell.Syntax.Pat.html#HsRecFields"><span class="hs-identifier hs-var">HsRecFields</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsRecField GhcRn (GenLocated SrcSpanAnnA (HsExpr GhcRn))]
[GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated (SrcAnn NoEpAnns) (FieldOcc GhcRn))
      (GenLocated SrcSpanAnnA (HsExpr GhcRn)))]
</span><a href="#local-6989586621682049465"><span class="hs-identifier hs-var">exprFields</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (XRec GhcRn RecFieldsDotDot)
</span><a href="#local-6989586621682049464"><span class="hs-identifier hs-var">dd</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1052"></span><span>
</span><span id="line-1053"></span><span>    </span><span class="annot"><a href="#local-6989586621682049466"><span class="hs-identifier hs-type">go'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LHsRecField"><span class="hs-identifier hs-type">LHsRecField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Either.html#Either/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LHsRecField"><span class="hs-identifier hs-type">LHsRecField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1054"></span><span>    </span><span id="local-6989586621682049466"><span class="annot"><span class="annottext">go' :: LHsRecField GhcRn (LPat GhcRn)
-&gt; Either SDoc (LHsRecField GhcRn (LHsExpr GhcRn))
</span><a href="#local-6989586621682049466"><span class="hs-identifier hs-var hs-var">go'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682049468"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682049468"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682049469"><span class="annot"><span class="annottext">HsFieldBind
  (GenLocated (SrcAnn NoEpAnns) (FieldOcc GhcRn))
  (GenLocated SrcSpanAnnA (Pat GhcRn))
</span><a href="#local-6989586621682049469"><span class="hs-identifier hs-var">rf</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsFieldBind
     (GenLocated (SrcAnn NoEpAnns) (FieldOcc GhcRn))
     (GenLocated SrcSpanAnnA (HsExpr GhcRn))
-&gt; GenLocated
     SrcSpanAnnA
     (HsFieldBind
        (GenLocated (SrcAnn NoEpAnns) (FieldOcc GhcRn))
        (GenLocated SrcSpanAnnA (HsExpr GhcRn)))
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682049468"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(HsFieldBind
   (GenLocated (SrcAnn NoEpAnns) (FieldOcc GhcRn))
   (GenLocated SrcSpanAnnA (HsExpr GhcRn))
 -&gt; GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated (SrcAnn NoEpAnns) (FieldOcc GhcRn))
         (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
-&gt; Either
     SDoc
     (HsFieldBind
        (GenLocated (SrcAnn NoEpAnns) (FieldOcc GhcRn))
        (GenLocated SrcSpanAnnA (HsExpr GhcRn)))
-&gt; Either
     SDoc
     (GenLocated
        SrcSpanAnnA
        (HsFieldBind
           (GenLocated (SrcAnn NoEpAnns) (FieldOcc GhcRn))
           (GenLocated SrcSpanAnnA (HsExpr GhcRn))))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/Data.Functor.html#%3C%24%3E/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (Pat GhcRn)
 -&gt; Either SDoc (GenLocated SrcSpanAnnA (HsExpr GhcRn)))
-&gt; HsFieldBind
     (GenLocated (SrcAnn NoEpAnns) (FieldOcc GhcRn))
     (GenLocated SrcSpanAnnA (Pat GhcRn))
-&gt; Either
     SDoc
     (HsFieldBind
        (GenLocated (SrcAnn NoEpAnns) (FieldOcc GhcRn))
        (GenLocated SrcSpanAnnA (HsExpr GhcRn)))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b)
-&gt; HsFieldBind (GenLocated (SrcAnn NoEpAnns) (FieldOcc GhcRn)) a
-&gt; f (HsFieldBind
        (GenLocated (SrcAnn NoEpAnns) (FieldOcc GhcRn)) b)
</span><a href="../../base-4.18.3.0/src/Data.Traversable.html#traverse/Data.Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn -&gt; Either SDoc (LHsExpr GhcRn)
GenLocated SrcSpanAnnA (Pat GhcRn)
-&gt; Either SDoc (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><a href="#local-6989586621682049449"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">HsFieldBind
  (GenLocated (SrcAnn NoEpAnns) (FieldOcc GhcRn))
  (GenLocated SrcSpanAnnA (Pat GhcRn))
</span><a href="#local-6989586621682049469"><span class="hs-identifier hs-var">rf</span></a></span><span>
</span><span id="line-1055"></span><span>
</span><span id="line-1056"></span><span>    </span><span class="annot"><a href="#local-6989586621682049449"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Either.html#Either/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#LHsExpr"><span class="hs-identifier hs-type">LHsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1057"></span><span>    </span><span id="local-6989586621682049449"><span class="annot"><span class="annottext">go :: LPat GhcRn -&gt; Either SDoc (LHsExpr GhcRn)
</span><a href="#local-6989586621682049449"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682049471"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682049471"><span class="hs-identifier hs-var">loc</span></a></span></span><span> </span><span id="local-6989586621682049472"><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621682049472"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsExpr GhcRn -&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621682049471"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">(HsExpr GhcRn -&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn))
-&gt; Either SDoc (HsExpr GhcRn)
-&gt; Either SDoc (GenLocated SrcSpanAnnA (HsExpr GhcRn))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/Data.Functor.html#%3C%24%3E/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcRn -&gt; Either SDoc (HsExpr GhcRn)
</span><a href="#local-6989586621682049473"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621682049472"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1058"></span><span>
</span><span id="line-1059"></span><span>    </span><span class="annot"><a href="#local-6989586621682049473"><span class="hs-identifier hs-type">go1</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Either.html#Either/Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Expr.html#HsExpr"><span class="hs-identifier hs-type">HsExpr</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcRn"><span class="hs-identifier hs-type">GhcRn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1060"></span><span>    </span><span id="local-6989586621682049473"><span class="annot"><span class="annottext">go1 :: Pat GhcRn -&gt; Either SDoc (HsExpr GhcRn)
</span><a href="#local-6989586621682049473"><span class="hs-identifier hs-var hs-var">go1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ConPat"><span class="hs-identifier hs-type">ConPat</span></a></span><span> </span><span class="annot"><span class="annottext">XConPat GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#NoExtField"><span class="hs-identifier hs-var">NoExtField</span></a></span><span> </span><span id="local-6989586621682049476"><span class="annot"><span class="annottext">XRec GhcRn (ConLikeP GhcRn)
</span><a href="#local-6989586621682049476"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span id="local-6989586621682049477"><span class="annot"><span class="annottext">HsConPatDetails GhcRn
</span><a href="#local-6989586621682049477"><span class="hs-identifier hs-var">info</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1061"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsConPatDetails GhcRn
</span><a href="#local-6989586621682049477"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1062"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#PrefixCon"><span class="hs-identifier hs-type">PrefixCon</span></a></span><span> </span><span class="annot"><span class="annottext">[HsConPatTyArg (NoGhcTc GhcRn)]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682049478"><span class="annot"><span class="annottext">[LPat GhcRn]
</span><a href="#local-6989586621682049478"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocatedN Name -&gt; [LPat GhcRn] -&gt; Either SDoc (HsExpr GhcRn)
</span><a href="#local-6989586621682049452"><span class="hs-identifier hs-var">mkPrefixConExpr</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (ConLikeP GhcRn)
LocatedN Name
</span><a href="#local-6989586621682049476"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">[LPat GhcRn]
</span><a href="#local-6989586621682049478"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1063"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#InfixCon"><span class="hs-identifier hs-type">InfixCon</span></a></span><span> </span><span id="local-6989586621682049479"><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621682049479"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682049480"><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621682049480"><span class="hs-identifier hs-var">r</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocatedN Name -&gt; [LPat GhcRn] -&gt; Either SDoc (HsExpr GhcRn)
</span><a href="#local-6989586621682049452"><span class="hs-identifier hs-var">mkPrefixConExpr</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (ConLikeP GhcRn)
LocatedN Name
</span><a href="#local-6989586621682049476"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621682049479"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621682049480"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1064"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#RecCon"><span class="hs-identifier hs-type">RecCon</span></a></span><span> </span><span id="local-6989586621682049481"><span class="annot"><span class="annottext">HsRecFields GhcRn (LPat GhcRn)
</span><a href="#local-6989586621682049481"><span class="hs-identifier hs-var">fields</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocatedN Name
-&gt; HsRecFields GhcRn (LPat GhcRn) -&gt; Either SDoc (HsExpr GhcRn)
</span><a href="#local-6989586621682049460"><span class="hs-identifier hs-var">mkRecordConExpr</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcRn (ConLikeP GhcRn)
LocatedN Name
</span><a href="#local-6989586621682049476"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">HsRecFields GhcRn (LPat GhcRn)
</span><a href="#local-6989586621682049481"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-1065"></span><span>
</span><span id="line-1066"></span><span>    </span><span class="annot"><a href="#local-6989586621682049473"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#SigPat"><span class="hs-identifier hs-type">SigPat</span></a></span><span> </span><span class="annot"><span class="annottext">XSigPat GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682049483"><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621682049483"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsPatSigType (NoGhcTc GhcRn)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pat GhcRn -&gt; Either SDoc (HsExpr GhcRn)
</span><a href="#local-6989586621682049473"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcRn) -&gt; Pat GhcRn
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
GenLocated SrcSpanAnnA (Pat GhcRn)
</span><a href="#local-6989586621682049483"><span class="hs-identifier hs-var">pat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1067"></span><span>        </span><span class="hs-comment">-- See Note [Type signatures and the builder expression]</span><span>
</span><span id="line-1068"></span><span>
</span><span id="line-1069"></span><span>    </span><span class="annot"><a href="#local-6989586621682049473"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#VarPat"><span class="hs-identifier hs-type">VarPat</span></a></span><span> </span><span class="annot"><span class="annottext">XVarPat GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621682049484"><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682049484"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621682049485"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049485"><span class="hs-identifier hs-var">var</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1070"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049485"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; NameSet -&gt; Bool
</span><a href="GHC.Types.Name.Set.html#elemNameSet"><span class="hs-operator hs-var">`elemNameSet`</span></a></span><span> </span><span class="annot"><span class="annottext">NameSet
</span><a href="#local-6989586621682049450"><span class="hs-identifier hs-var">lhsVars</span></a></span><span>
</span><span id="line-1071"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; Either SDoc (HsExpr GhcRn)
forall a. a -&gt; Either SDoc a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(HsExpr GhcRn -&gt; Either SDoc (HsExpr GhcRn))
-&gt; HsExpr GhcRn -&gt; Either SDoc (HsExpr GhcRn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">XVar GhcRn -&gt; LIdP GhcRn -&gt; HsExpr GhcRn
forall p. XVar p -&gt; LIdP p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsVar"><span class="hs-identifier hs-var">HsVar</span></a></span><span> </span><span class="annot"><span class="annottext">XVar GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnN -&gt; Name -&gt; LocatedN Name
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnN
</span><a href="#local-6989586621682049484"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049485"><span class="hs-identifier hs-var">var</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1072"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-1073"></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Either SDoc (HsExpr GhcRn)
forall a b. a -&gt; Either a b
</span><a href="../../base-4.18.3.0/src/Data.Either.html#Left/Data.Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049485"><span class="hs-identifier hs-var">var</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;is not bound by the LHS of the pattern synonym&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1074"></span><span>    </span><span class="annot"><a href="#local-6989586621682049473"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ParPat"><span class="hs-identifier hs-type">ParPat</span></a></span><span> </span><span class="annot"><span class="annottext">XParPat GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682049488"><span class="annot"><span class="annottext">LHsToken &quot;(&quot; GhcRn
</span><a href="#local-6989586621682049488"><span class="hs-identifier hs-var">lpar</span></a></span></span><span> </span><span id="local-6989586621682049489"><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621682049489"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621682049490"><span class="annot"><span class="annottext">LHsToken &quot;)&quot; GhcRn
</span><a href="#local-6989586621682049490"><span class="hs-identifier hs-var">rpar</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LHsExpr GhcRn -&gt; HsExpr GhcRn)
-&gt; Either SDoc (LHsExpr GhcRn) -&gt; Either SDoc (HsExpr GhcRn)
forall a b. (a -&gt; b) -&gt; Either SDoc a -&gt; Either SDoc b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#fmap/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621682049491"><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621682049491"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">XPar GhcRn
-&gt; LHsToken &quot;(&quot; GhcRn
-&gt; LHsExpr GhcRn
-&gt; LHsToken &quot;)&quot; GhcRn
-&gt; HsExpr GhcRn
forall p.
XPar p -&gt; LHsToken &quot;(&quot; p -&gt; LHsExpr p -&gt; LHsToken &quot;)&quot; p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsPar"><span class="hs-identifier hs-var">HsPar</span></a></span><span> </span><span class="annot"><span class="annottext">XPar GhcRn
EpAnn NoEpAnns
forall a. EpAnn a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="annot"><span class="annottext">LHsToken &quot;(&quot; GhcRn
</span><a href="#local-6989586621682049488"><span class="hs-identifier hs-var">lpar</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><a href="#local-6989586621682049491"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">LHsToken &quot;)&quot; GhcRn
</span><a href="#local-6989586621682049490"><span class="hs-identifier hs-var">rpar</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Either SDoc (LHsExpr GhcRn) -&gt; Either SDoc (HsExpr GhcRn))
-&gt; Either SDoc (LHsExpr GhcRn) -&gt; Either SDoc (HsExpr GhcRn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn -&gt; Either SDoc (LHsExpr GhcRn)
</span><a href="#local-6989586621682049449"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621682049489"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1075"></span><span>    </span><span class="annot"><a href="#local-6989586621682049473"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ListPat"><span class="hs-identifier hs-type">ListPat</span></a></span><span> </span><span class="annot"><span class="annottext">XListPat GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682049495"><span class="annot"><span class="annottext">[LPat GhcRn]
</span><a href="#local-6989586621682049495"><span class="hs-identifier hs-var">pats</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1076"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682049496"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsExpr GhcRn)]
</span><a href="#local-6989586621682049496"><span class="hs-identifier hs-var">exprs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (Pat GhcRn)
 -&gt; Either SDoc (GenLocated SrcSpanAnnA (HsExpr GhcRn)))
-&gt; [GenLocated SrcSpanAnnA (Pat GhcRn)]
-&gt; Either SDoc [GenLocated SrcSpanAnnA (HsExpr GhcRn)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="../../base-4.18.3.0/src/Data.Traversable.html#mapM/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn -&gt; Either SDoc (LHsExpr GhcRn)
GenLocated SrcSpanAnnA (Pat GhcRn)
-&gt; Either SDoc (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><a href="#local-6989586621682049449"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[LPat GhcRn]
[GenLocated SrcSpanAnnA (Pat GhcRn)]
</span><a href="#local-6989586621682049495"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-1077"></span><span>           </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; Either SDoc (HsExpr GhcRn)
forall a. a -&gt; Either SDoc a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(HsExpr GhcRn -&gt; Either SDoc (HsExpr GhcRn))
-&gt; HsExpr GhcRn -&gt; Either SDoc (HsExpr GhcRn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">XExplicitList GhcRn -&gt; [LHsExpr GhcRn] -&gt; HsExpr GhcRn
forall p. XExplicitList p -&gt; [LHsExpr p] -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#ExplicitList"><span class="hs-identifier hs-var">ExplicitList</span></a></span><span> </span><span class="annot"><span class="annottext">XExplicitList GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsExpr GhcRn]
[GenLocated SrcSpanAnnA (HsExpr GhcRn)]
</span><a href="#local-6989586621682049496"><span class="hs-identifier hs-var">exprs</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1078"></span><span>    </span><span class="annot"><a href="#local-6989586621682049473"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#TuplePat"><span class="hs-identifier hs-type">TuplePat</span></a></span><span> </span><span class="annot"><span class="annottext">XTuplePat GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682049499"><span class="annot"><span class="annottext">[LPat GhcRn]
</span><a href="#local-6989586621682049499"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span id="local-6989586621682049500"><span class="annot"><span class="annottext">Boxity
</span><a href="#local-6989586621682049500"><span class="hs-identifier hs-var">box</span></a></span></span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682049501"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsExpr GhcRn)]
</span><a href="#local-6989586621682049501"><span class="hs-identifier hs-var">exprs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (Pat GhcRn)
 -&gt; Either SDoc (GenLocated SrcSpanAnnA (HsExpr GhcRn)))
-&gt; [GenLocated SrcSpanAnnA (Pat GhcRn)]
-&gt; Either SDoc [GenLocated SrcSpanAnnA (HsExpr GhcRn)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="../../base-4.18.3.0/src/Data.Traversable.html#mapM/Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn -&gt; Either SDoc (LHsExpr GhcRn)
GenLocated SrcSpanAnnA (Pat GhcRn)
-&gt; Either SDoc (GenLocated SrcSpanAnnA (HsExpr GhcRn))
</span><a href="#local-6989586621682049449"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[LPat GhcRn]
[GenLocated SrcSpanAnnA (Pat GhcRn)]
</span><a href="#local-6989586621682049499"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-1079"></span><span>                                         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; Either SDoc (HsExpr GhcRn)
forall a. a -&gt; Either SDoc a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(HsExpr GhcRn -&gt; Either SDoc (HsExpr GhcRn))
-&gt; HsExpr GhcRn -&gt; Either SDoc (HsExpr GhcRn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">XExplicitTuple GhcRn -&gt; [HsTupArg GhcRn] -&gt; Boxity -&gt; HsExpr GhcRn
forall p. XExplicitTuple p -&gt; [HsTupArg p] -&gt; Boxity -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#ExplicitTuple"><span class="hs-identifier hs-var">ExplicitTuple</span></a></span><span> </span><span class="annot"><span class="annottext">XExplicitTuple GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span>
</span><span id="line-1080"></span><span>                                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; HsTupArg GhcRn)
-&gt; [GenLocated SrcSpanAnnA (HsExpr GhcRn)] -&gt; [HsTupArg GhcRn]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XPresent GhcRn -&gt; LHsExpr GhcRn -&gt; HsTupArg GhcRn
forall id. XPresent id -&gt; LHsExpr id -&gt; HsTupArg id
</span><a href="Language.Haskell.Syntax.Expr.html#Present"><span class="hs-identifier hs-var">Present</span></a></span><span> </span><span class="annot"><span class="annottext">XPresent GhcRn
EpAnn [AddEpAnn]
forall a. EpAnn a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsExpr GhcRn)]
</span><a href="#local-6989586621682049501"><span class="hs-identifier hs-var">exprs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Boxity
</span><a href="#local-6989586621682049500"><span class="hs-identifier hs-var">box</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1081"></span><span>    </span><span class="annot"><a href="#local-6989586621682049473"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#SumPat"><span class="hs-identifier hs-type">SumPat</span></a></span><span> </span><span class="annot"><span class="annottext">XSumPat GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682049505"><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621682049505"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621682049506"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682049506"><span class="hs-identifier hs-var">alt</span></a></span></span><span> </span><span id="local-6989586621682049507"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682049507"><span class="hs-identifier hs-var">arity</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621682049508"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621682049508"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Pat GhcRn -&gt; Either SDoc (HsExpr GhcRn)
</span><a href="#local-6989586621682049473"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcRn) -&gt; Pat GhcRn
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
GenLocated SrcSpanAnnA (Pat GhcRn)
</span><a href="#local-6989586621682049505"><span class="hs-identifier hs-var">pat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1082"></span><span>                                         </span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; Either SDoc (HsExpr GhcRn)
forall a. a -&gt; Either SDoc a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(HsExpr GhcRn -&gt; Either SDoc (HsExpr GhcRn))
-&gt; HsExpr GhcRn -&gt; Either SDoc (HsExpr GhcRn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">XExplicitSum GhcRn -&gt; Int -&gt; Int -&gt; LHsExpr GhcRn -&gt; HsExpr GhcRn
forall p. XExplicitSum p -&gt; Int -&gt; Int -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#ExplicitSum"><span class="hs-identifier hs-var">ExplicitSum</span></a></span><span> </span><span class="annot"><span class="annottext">XExplicitSum GhcRn
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682049506"><span class="hs-identifier hs-var">alt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621682049507"><span class="hs-identifier hs-var">arity</span></a></span><span>
</span><span id="line-1083"></span><span>                                                                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn)
forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621682049508"><span class="hs-identifier hs-var">expr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1084"></span><span>                                         </span><span class="hs-special">}</span><span>
</span><span id="line-1085"></span><span>    </span><span class="annot"><a href="#local-6989586621682049473"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LitPat"><span class="hs-identifier hs-type">LitPat</span></a></span><span> </span><span class="annot"><span class="annottext">XLitPat GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682049511"><span class="annot"><span class="annottext">HsLit GhcRn
</span><a href="#local-6989586621682049511"><span class="hs-identifier hs-var">lit</span></a></span></span><span class="hs-special">)</span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; Either SDoc (HsExpr GhcRn)
forall a. a -&gt; Either SDoc a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(HsExpr GhcRn -&gt; Either SDoc (HsExpr GhcRn))
-&gt; HsExpr GhcRn -&gt; Either SDoc (HsExpr GhcRn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">XLitE GhcRn -&gt; HsLit GhcRn -&gt; HsExpr GhcRn
forall p. XLitE p -&gt; HsLit p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsLit"><span class="hs-identifier hs-var">HsLit</span></a></span><span> </span><span class="annot"><span class="annottext">XLitE GhcRn
EpAnn NoEpAnns
</span><a href="GHC.Parser.Annotation.html#noComments"><span class="hs-identifier hs-var">noComments</span></a></span><span> </span><span class="annot"><span class="annottext">HsLit GhcRn
</span><a href="#local-6989586621682049511"><span class="hs-identifier hs-var">lit</span></a></span><span>
</span><span id="line-1086"></span><span>    </span><span class="annot"><a href="#local-6989586621682049473"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#NPat"><span class="hs-identifier hs-type">NPat</span></a></span><span> </span><span class="annot"><span class="annottext">XNPat GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcAnn NoEpAnns
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682049515"><span class="annot"><span class="annottext">HsOverLit GhcRn
</span><a href="#local-6989586621682049515"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621682049516"><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcRn)
</span><a href="#local-6989586621682049516"><span class="hs-identifier hs-var">mb_neg</span></a></span></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcRn
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-1087"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#SyntaxExprRn"><span class="hs-identifier hs-type">SyntaxExprRn</span></a></span><span> </span><span id="local-6989586621682049518"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621682049518"><span class="hs-identifier hs-var">neg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe (SyntaxExpr GhcRn)
</span><a href="#local-6989586621682049516"><span class="hs-identifier hs-var">mb_neg</span></a></span><span>
</span><span id="line-1088"></span><span>                                    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; Either SDoc (HsExpr GhcRn)
forall a. a -&gt; Either SDoc a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(HsExpr GhcRn -&gt; Either SDoc (HsExpr GhcRn))
-&gt; HsExpr GhcRn -&gt; Either SDoc (HsExpr GhcRn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; HsExpr GhcRn
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; HsExpr GhcRn)
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn) -&gt; HsExpr GhcRn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsExpr GhcRn)
 -&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn)
 -&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn))
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn)
-&gt; [GenLocated SrcSpanAnnA (HsExpr GhcRn)]
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn)
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#foldl%27/Data.Foldable.html#foldl%27"><span class="hs-identifier hs-var">foldl'</span></a></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn -&gt; LHsExpr GhcRn -&gt; LHsExpr GhcRn
GenLocated SrcSpanAnnA (HsExpr GhcRn)
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn)
-&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn)
forall (id :: Pass).
IsPass id =&gt;
LHsExpr (GhcPass id)
-&gt; LHsExpr (GhcPass id) -&gt; LHsExpr (GhcPass id)
</span><a href="GHC.Hs.Utils.html#nlHsApp"><span class="hs-identifier hs-var">nlHsApp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn)
forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621682049518"><span class="hs-identifier hs-var">neg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1089"></span><span>                                                       </span><span class="hs-special">[</span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn)
forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Parser.Annotation.html#noLocA"><span class="hs-identifier hs-var">noLocA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XOverLitE GhcRn -&gt; HsOverLit GhcRn -&gt; HsExpr GhcRn
forall p. XOverLitE p -&gt; HsOverLit p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsOverLit"><span class="hs-identifier hs-var">HsOverLit</span></a></span><span> </span><span class="annot"><span class="annottext">XOverLitE GhcRn
EpAnn NoEpAnns
forall a. EpAnn a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcRn
</span><a href="#local-6989586621682049515"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1090"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; Either SDoc (HsExpr GhcRn)
forall a. a -&gt; Either SDoc a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(HsExpr GhcRn -&gt; Either SDoc (HsExpr GhcRn))
-&gt; HsExpr GhcRn -&gt; Either SDoc (HsExpr GhcRn)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">XOverLitE GhcRn -&gt; HsOverLit GhcRn -&gt; HsExpr GhcRn
forall p. XOverLitE p -&gt; HsOverLit p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsOverLit"><span class="hs-identifier hs-var">HsOverLit</span></a></span><span> </span><span class="annot"><span class="annottext">XOverLitE GhcRn
EpAnn NoEpAnns
forall a. EpAnn a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcRn
</span><a href="#local-6989586621682049515"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1091"></span><span>    </span><span class="annot"><a href="#local-6989586621682049473"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#SplicePat"><span class="hs-identifier hs-type">SplicePat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsUntypedSpliceTop"><span class="hs-identifier hs-type">HsUntypedSpliceTop</span></a></span><span> </span><span class="annot"><span class="annottext">ThModFinalizers
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682049522"><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621682049522"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsUntypedSplice GhcRn
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pat GhcRn -&gt; Either SDoc (HsExpr GhcRn)
</span><a href="#local-6989586621682049473"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621682049522"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1092"></span><span>    </span><span class="annot"><a href="#local-6989586621682049473"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#SplicePat"><span class="hs-identifier hs-type">SplicePat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Expr.html#HsUntypedSpliceNested"><span class="hs-identifier hs-type">HsUntypedSpliceNested</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsUntypedSplice GhcRn
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Either SDoc (HsExpr GhcRn)
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tcPatToExpr: invalid nested splice&quot;</span></span><span>
</span><span id="line-1093"></span><span>    </span><span class="annot"><a href="#local-6989586621682049473"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#XPat"><span class="hs-identifier hs-type">XPat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Pat.html#HsPatExpanded"><span class="hs-identifier hs-type">HsPatExpanded</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682049526"><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621682049526"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pat GhcRn -&gt; Either SDoc (HsExpr GhcRn)
</span><a href="#local-6989586621682049473"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621682049526"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1094"></span><span>
</span><span id="line-1095"></span><span>    </span><span class="hs-comment">-- See Note [Invertible view patterns]</span><span>
</span><span id="line-1096"></span><span>    </span><span class="annot"><a href="#local-6989586621682049473"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span id="local-6989586621682049527"><span class="annot"><span class="annottext">p :: Pat GhcRn
</span><a href="#local-6989586621682049527"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ViewPat"><span class="hs-identifier hs-type">ViewPat</span></a></span><span> </span><span id="local-6989586621682049529"><span class="annot"><span class="annottext">XViewPat GhcRn
</span><a href="#local-6989586621682049529"><span class="hs-identifier hs-var">mbInverse</span></a></span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682049530"><span class="annot"><span class="annottext">LPat GhcRn
</span><a href="#local-6989586621682049530"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">XViewPat GhcRn
</span><a href="#local-6989586621682049529"><span class="hs-identifier hs-var">mbInverse</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1097"></span><span>      </span><span class="annot"><span class="annottext">Maybe (HsExpr GhcRn)
XViewPat GhcRn
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pat GhcRn -&gt; Either SDoc (HsExpr GhcRn)
</span><a href="#local-6989586621682049531"><span class="hs-identifier hs-var">notInvertible</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621682049527"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1098"></span><span>      </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621682049532"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621682049532"><span class="hs-identifier hs-var">inverse</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1099"></span><span>        </span><span class="annot"><span class="annottext">(HsExpr GhcRn -&gt; HsExpr GhcRn)
-&gt; Either SDoc (HsExpr GhcRn) -&gt; Either SDoc (HsExpr GhcRn)
forall a b. (a -&gt; b) -&gt; Either SDoc a -&gt; Either SDoc b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#fmap/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span>
</span><span id="line-1100"></span><span>          </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621682049533"><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621682049533"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">XApp GhcRn -&gt; LHsExpr GhcRn -&gt; LHsExpr GhcRn -&gt; HsExpr GhcRn
forall p. XApp p -&gt; LHsExpr p -&gt; LHsExpr p -&gt; HsExpr p
</span><a href="Language.Haskell.Syntax.Expr.html#HsApp"><span class="hs-identifier hs-var">HsApp</span></a></span><span> </span><span class="annot"><span class="annottext">XApp GhcRn
EpAnn NoEpAnns
forall a. EpAnn a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn)
forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Rename.Utils.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621682049532"><span class="hs-identifier hs-var">inverse</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsExpr GhcRn -&gt; GenLocated SrcSpanAnnA (HsExpr GhcRn)
forall a an. a -&gt; LocatedAn an a
</span><a href="GHC.Rename.Utils.html#wrapGenSpan"><span class="hs-identifier hs-var">wrapGenSpan</span></a></span><span> </span><span class="annot"><span class="annottext">HsExpr GhcRn
</span><a href="#local-6989586621682049533"><span class="hs-identifier hs-var">expr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1101"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pat GhcRn -&gt; Either SDoc (HsExpr GhcRn)
</span><a href="#local-6989586621682049473"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcRn) -&gt; Pat GhcRn
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
GenLocated SrcSpanAnnA (Pat GhcRn)
</span><a href="#local-6989586621682049530"><span class="hs-identifier hs-var">pat</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1102"></span><span>
</span><span id="line-1103"></span><span>    </span><span class="hs-comment">-- The following patterns are not invertible.</span><span>
</span><span id="line-1104"></span><span>    </span><span class="annot"><a href="#local-6989586621682049473"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span id="local-6989586621682049535"><span class="annot"><span class="annottext">p :: Pat GhcRn
</span><a href="#local-6989586621682049535"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#BangPat"><span class="hs-identifier hs-type">BangPat</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>                       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pat GhcRn -&gt; Either SDoc (HsExpr GhcRn)
</span><a href="#local-6989586621682049531"><span class="hs-identifier hs-var">notInvertible</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621682049535"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-comment">-- #14112</span><span>
</span><span id="line-1105"></span><span>    </span><span class="annot"><a href="#local-6989586621682049473"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span id="local-6989586621682049537"><span class="annot"><span class="annottext">p :: Pat GhcRn
</span><a href="#local-6989586621682049537"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LazyPat"><span class="hs-identifier hs-type">LazyPat</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>                       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pat GhcRn -&gt; Either SDoc (HsExpr GhcRn)
</span><a href="#local-6989586621682049531"><span class="hs-identifier hs-var">notInvertible</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621682049537"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1106"></span><span>    </span><span class="annot"><a href="#local-6989586621682049473"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span id="local-6989586621682049539"><span class="annot"><span class="annottext">p :: Pat GhcRn
</span><a href="#local-6989586621682049539"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#WildPat"><span class="hs-identifier hs-type">WildPat</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>                       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pat GhcRn -&gt; Either SDoc (HsExpr GhcRn)
</span><a href="#local-6989586621682049531"><span class="hs-identifier hs-var">notInvertible</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621682049539"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1107"></span><span>    </span><span class="annot"><a href="#local-6989586621682049473"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span id="local-6989586621682049540"><span class="annot"><span class="annottext">p :: Pat GhcRn
</span><a href="#local-6989586621682049540"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#AsPat"><span class="hs-identifier hs-type">AsPat</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>                         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pat GhcRn -&gt; Either SDoc (HsExpr GhcRn)
</span><a href="#local-6989586621682049531"><span class="hs-identifier hs-var">notInvertible</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621682049540"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1108"></span><span>    </span><span class="annot"><a href="#local-6989586621682049473"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span id="local-6989586621682049542"><span class="annot"><span class="annottext">p :: Pat GhcRn
</span><a href="#local-6989586621682049542"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#NPlusKPat"><span class="hs-identifier hs-type">NPlusKPat</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>                     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pat GhcRn -&gt; Either SDoc (HsExpr GhcRn)
</span><a href="#local-6989586621682049531"><span class="hs-identifier hs-var">notInvertible</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621682049542"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1109"></span><span>
</span><span id="line-1110"></span><span>    </span><span id="local-6989586621682049531"><span class="annot"><span class="annottext">notInvertible :: Pat GhcRn -&gt; Either SDoc (HsExpr GhcRn)
</span><a href="#local-6989586621682049531"><span class="hs-identifier hs-var hs-var">notInvertible</span></a></span></span><span> </span><span id="local-6989586621682049544"><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621682049544"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Either SDoc (HsExpr GhcRn)
forall a b. a -&gt; Either a b
</span><a href="../../base-4.18.3.0/src/Data.Either.html#Left/Data.Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pat GhcRn -&gt; SDoc
</span><a href="#local-6989586621682049545"><span class="hs-identifier hs-var">not_invertible_msg</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621682049544"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1111"></span><span>
</span><span id="line-1112"></span><span>    </span><span id="local-6989586621682049545"><span class="annot"><span class="annottext">not_invertible_msg :: Pat GhcRn -&gt; SDoc
</span><a href="#local-6989586621682049545"><span class="hs-identifier hs-var hs-var">not_invertible_msg</span></a></span></span><span> </span><span id="local-6989586621682049546"><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621682049546"><span class="hs-identifier hs-var">p</span></a></span></span><span>
</span><span id="line-1113"></span><span>      </span><span class="hs-glyph">=</span><span>   </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Pattern&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pat GhcRn -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcRn
</span><a href="#local-6989586621682049546"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;is not invertible&quot;</span></span><span>
</span><span id="line-1114"></span><span>      </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#%24%2B%24"><span class="hs-operator hs-var">$+$</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Suggestion: instead use an explicitly bidirectional&quot;</span></span><span>
</span><span id="line-1115"></span><span>                </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;pattern synonym, e.g.&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1116"></span><span>             </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc -&gt; Int -&gt; SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#hang"><span class="hs-identifier hs-var">hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;pattern&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682049548"><span class="hs-identifier hs-var">pp_name</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682049549"><span class="hs-identifier hs-var">pp_args</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#larrow"><span class="hs-identifier hs-var">larrow</span></a></span><span>
</span><span id="line-1117"></span><span>                      </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcRn) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcRn
GenLocated SrcSpanAnnA (Pat GhcRn)
</span><a href="#local-6989586621682049448"><span class="hs-identifier hs-var">pat</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;where&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1118"></span><span>                   </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682049548"><span class="hs-identifier hs-var">pp_name</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="#local-6989586621682049549"><span class="hs-identifier hs-var">pp_args</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsLine doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#equals"><span class="hs-identifier hs-var">equals</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;...&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1119"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1120"></span><span>        </span><span id="local-6989586621682049548"><span class="annot"><span class="annottext">pp_name :: SDoc
</span><a href="#local-6989586621682049548"><span class="hs-identifier hs-var hs-var">pp_name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621682049446"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-1121"></span><span>        </span><span id="local-6989586621682049549"><span class="annot"><span class="annottext">pp_args :: SDoc
</span><a href="#local-6989586621682049549"><span class="hs-identifier hs-var hs-var">pp_args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsLine doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LocatedN Name -&gt; SDoc) -&gt; [LocatedN Name] -&gt; [SDoc]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN Name -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">[LocatedN Name]
</span><a href="#local-6989586621682049447"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1122"></span><span>
</span><span id="line-1123"></span><span>
</span><span id="line-1124"></span><span class="hs-comment">{- Note [Builder for a bidirectional pattern synonym]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
For a bidirectional pattern synonym, the function 'tcPatToExpr'
needs to produce an /expression/ that matches the supplied /pattern/,
given values for the arguments of the pattern synonym. For example:
  pattern F x y = (Just x, [y])
The 'builder' for F looks like
  $builderF x y = (Just x, [y])

We can't always do this:
 * Some patterns aren't invertible; e.g. general view patterns
      pattern F x = (f -&gt; x)
   as we don't have the ability to write down an expression that matches
   the view pattern specified by an arbitrary view function `f`.
   It is however sometimes possible to write down an inverse;
     see Note [Invertible view patterns].

 * The RHS pattern might bind more variables than the pattern
   synonym, so again we can't invert it
      pattern F x = (x,y)

 * Ditto wildcards
      pattern F x = (x,_)

Note [Invertible view patterns]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
For some view patterns, such as those that arise from expansion of overloaded
patterns (as detailed in Note [Handling overloaded and rebindable patterns]),
we are able to explicitly write out an inverse (in the sense of the previous
Note [Builder for a bidirectional pattern synonym]).
For instance, the inverse to the pattern

  (toList -&gt; [True, False])

is the expression

  (fromListN 2 [True,False])

Keeping track of the inverse for such view patterns fixed #14380.

Note [Redundant constraints for builder]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The builder can have redundant constraints, which are awkward to eliminate.
Consider
   pattern P = Just 34
To match against this pattern we need (Eq a, Num a).  But to build
(Just 34) we need only (Num a).  Fortunately instTcSigFromId sets
sig_warn_redundant to False.

************************************************************************
*                                                                      *
         Helper functions
*                                                                      *
************************************************************************

Note [As-patterns in pattern synonym definitions]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The rationale for rejecting as-patterns in pattern synonym definitions
is that an as-pattern would introduce nonindependent pattern synonym
arguments, e.g. given a pattern synonym like:

        pattern K x y = x@(Just y)

one could write a nonsensical function like

        f (K Nothing x) = ...

or
        g (K (Just True) False) = ...

Note [Type signatures and the builder expression]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Consider
   pattern L x = Left x :: Either [a] [b]

In tc{Infer/Check}PatSynDecl we will check that the pattern has the
specified type.  We check the pattern *as a pattern*, so the type
signature is a pattern signature, and so brings 'a' and 'b' into
scope.  But we don't have a way to bind 'a, b' in the LHS, as we do
'x', say.  Nevertheless, the signature may be useful to constrain
the type.

When making the binding for the *builder*, though, we don't want
  $buildL x = Left x :: Either [a] [b]
because that wil either mean (forall a b. Either [a] [b]), or we'll
get a complaint that 'a' and 'b' are out of scope. (Actually the
latter; #9867.)  No, the job of the signature is done, so when
converting the pattern to an expression (for the builder RHS) we
simply discard the signature.

Note [Record PatSyn Desugaring]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
It is important that prov_theta comes before req_theta as this ordering is used
when desugaring record pattern synonym updates.

Any change to this ordering should make sure to change GHC.HsToCore.Expr if you
want to avoid difficult to decipher core lint errors!

Note [Pragmas for pattern synonyms]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
INLINE and NOINLINE pragmas are supported for pattern synonyms.
They affect both the matcher and the builder.
(See Note [Matchers and builders for pattern synonyms] in PatSyn)

For example:
    pattern InlinedPattern x = [x]
    {-# INLINE InlinedPattern #-}

    pattern NonInlinedPattern x = [x]
    {-# NOINLINE NonInlinedPattern #-}

For pattern synonyms with explicit builders, only a pragma for the
entire pattern synonym is supported. For example:
    pattern HeadC x &lt;- x:xs where
      HeadC x = [x]
      -- This wouldn't compile: {-# INLINE HeadC #-}
    {-# INLINE HeadC #-} -- But this works

When no pragma is provided for a pattern, the inlining decision might change
between different versions of GHC.

Implementation notes.  The prag_fn passed in to tcPatSynDecl will have a binding
for the /pattern synonym/ Name, thus
      InlinedPattern :-&gt; INLINE
From this we cook up an INLINE pragma for the matcher (in tcPatSynMatcher)
and builder (in tcPatSynBuilderBind), by looking up the /pattern synonym/
Name in the prag_fn, and then using addInlinePragArity to add the right
inl_sat field to that INLINE pragma for the matcher or builder respectively.
 -}</span><span>
</span><span id="line-1253"></span><span>
</span><span id="line-1254"></span><span>
</span><span id="line-1255"></span><span class="hs-comment">-- Walk the whole pattern and for all ConPatOuts, collect the</span><span>
</span><span id="line-1256"></span><span class="hs-comment">-- existentially-bound type variables and evidence binding variables.</span><span>
</span><span id="line-1257"></span><span class="hs-comment">--</span><span>
</span><span id="line-1258"></span><span class="hs-comment">-- These are used in computing the type of a pattern synonym and also</span><span>
</span><span id="line-1259"></span><span class="hs-comment">-- in generating matcher functions, since success continuations need</span><span>
</span><span id="line-1260"></span><span class="hs-comment">-- to be passed these pattern-bound evidences.</span><span>
</span><span id="line-1261"></span><span class="annot"><a href="GHC.Tc.TyCl.PatSyn.html#tcCollectEx"><span class="hs-identifier hs-type">tcCollectEx</span></a></span><span>
</span><span id="line-1262"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span>
</span><span id="line-1263"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span class="hs-special">]</span><span>        </span><span class="hs-comment">-- Existentially-bound type variables</span><span>
</span><span id="line-1264"></span><span>                      </span><span class="hs-comment">-- in correctly-scoped order; e.g. [ k:*, x:k ]</span><span>
</span><span id="line-1265"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">)</span><span>      </span><span class="hs-comment">-- and evidence variables</span><span>
</span><span id="line-1266"></span><span>
</span><span id="line-1267"></span><span id="tcCollectEx"><span class="annot"><span class="annottext">tcCollectEx :: LPat GhcTc -&gt; ([Id], [Id])
</span><a href="GHC.Tc.TyCl.PatSyn.html#tcCollectEx"><span class="hs-identifier hs-var hs-var">tcCollectEx</span></a></span></span><span> </span><span id="local-6989586621682049553"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621682049553"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LPat GhcTc -&gt; ([Id], [Id])
</span><a href="#local-6989586621682049554"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621682049553"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-1268"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1269"></span><span>    </span><span class="annot"><a href="#local-6989586621682049554"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1270"></span><span>    </span><span id="local-6989586621682049554"><span class="annot"><span class="annottext">go :: LPat GhcTc -&gt; ([Id], [Id])
</span><a href="#local-6989586621682049554"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pat GhcTc -&gt; ([Id], [Id])
</span><a href="#local-6989586621682049555"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span class="annot"><span class="annottext">(Pat GhcTc -&gt; ([Id], [Id]))
-&gt; (GenLocated SrcSpanAnnA (Pat GhcTc) -&gt; Pat GhcTc)
-&gt; GenLocated SrcSpanAnnA (Pat GhcTc)
-&gt; ([Id], [Id])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc) -&gt; Pat GhcTc
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span>
</span><span id="line-1271"></span><span>
</span><span id="line-1272"></span><span>    </span><span class="annot"><a href="#local-6989586621682049555"><span class="hs-identifier hs-type">go1</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1273"></span><span>    </span><span id="local-6989586621682049555"><span class="annot"><span class="annottext">go1 :: Pat GhcTc -&gt; ([Id], [Id])
</span><a href="#local-6989586621682049555"><span class="hs-identifier hs-var hs-var">go1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LazyPat"><span class="hs-identifier hs-type">LazyPat</span></a></span><span> </span><span class="annot"><span class="annottext">XLazyPat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682049556"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621682049556"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LPat GhcTc -&gt; ([Id], [Id])
</span><a href="#local-6989586621682049554"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621682049556"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1274"></span><span>    </span><span class="annot"><a href="#local-6989586621682049555"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#AsPat"><span class="hs-identifier hs-type">AsPat</span></a></span><span> </span><span class="annot"><span class="annottext">XAsPat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LIdP GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LHsToken &quot;@&quot; GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682049557"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621682049557"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LPat GhcTc -&gt; ([Id], [Id])
</span><a href="#local-6989586621682049554"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621682049557"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1275"></span><span>    </span><span class="annot"><a href="#local-6989586621682049555"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ParPat"><span class="hs-identifier hs-type">ParPat</span></a></span><span> </span><span class="annot"><span class="annottext">XParPat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LHsToken &quot;(&quot; GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682049558"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621682049558"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">LHsToken &quot;)&quot; GhcTc
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LPat GhcTc -&gt; ([Id], [Id])
</span><a href="#local-6989586621682049554"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621682049558"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1276"></span><span>    </span><span class="annot"><a href="#local-6989586621682049555"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#BangPat"><span class="hs-identifier hs-type">BangPat</span></a></span><span> </span><span class="annot"><span class="annottext">XBangPat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682049559"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621682049559"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LPat GhcTc -&gt; ([Id], [Id])
</span><a href="#local-6989586621682049554"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621682049559"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1277"></span><span>    </span><span class="annot"><a href="#local-6989586621682049555"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ListPat"><span class="hs-identifier hs-type">ListPat</span></a></span><span> </span><span class="annot"><span class="annottext">XListPat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682049560"><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621682049560"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[([Id], [Id])] -&gt; ([Id], [Id])
forall {a} {a}. [([a], [a])] -&gt; ([a], [a])
</span><a href="#local-6989586621682049561"><span class="hs-identifier hs-var">mergeMany</span></a></span><span> </span><span class="annot"><span class="annottext">([([Id], [Id])] -&gt; ([Id], [Id]))
-&gt; ([LPat GhcTc] -&gt; [([Id], [Id])]) -&gt; [LPat GhcTc] -&gt; ([Id], [Id])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (Pat GhcTc) -&gt; ([Id], [Id]))
-&gt; [GenLocated SrcSpanAnnA (Pat GhcTc)] -&gt; [([Id], [Id])]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc -&gt; ([Id], [Id])
GenLocated SrcSpanAnnA (Pat GhcTc) -&gt; ([Id], [Id])
</span><a href="#local-6989586621682049554"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">([LPat GhcTc] -&gt; ([Id], [Id])) -&gt; [LPat GhcTc] -&gt; ([Id], [Id])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621682049560"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1278"></span><span>    </span><span class="annot"><a href="#local-6989586621682049555"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#TuplePat"><span class="hs-identifier hs-type">TuplePat</span></a></span><span> </span><span class="annot"><span class="annottext">XTuplePat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682049562"><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621682049562"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="annot"><span class="annottext">Boxity
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[([Id], [Id])] -&gt; ([Id], [Id])
forall {a} {a}. [([a], [a])] -&gt; ([a], [a])
</span><a href="#local-6989586621682049561"><span class="hs-identifier hs-var">mergeMany</span></a></span><span> </span><span class="annot"><span class="annottext">([([Id], [Id])] -&gt; ([Id], [Id]))
-&gt; ([LPat GhcTc] -&gt; [([Id], [Id])]) -&gt; [LPat GhcTc] -&gt; ([Id], [Id])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (Pat GhcTc) -&gt; ([Id], [Id]))
-&gt; [GenLocated SrcSpanAnnA (Pat GhcTc)] -&gt; [([Id], [Id])]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc -&gt; ([Id], [Id])
GenLocated SrcSpanAnnA (Pat GhcTc) -&gt; ([Id], [Id])
</span><a href="#local-6989586621682049554"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">([LPat GhcTc] -&gt; ([Id], [Id])) -&gt; [LPat GhcTc] -&gt; ([Id], [Id])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621682049562"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1279"></span><span>    </span><span class="annot"><a href="#local-6989586621682049555"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#SumPat"><span class="hs-identifier hs-type">SumPat</span></a></span><span> </span><span class="annot"><span class="annottext">XSumPat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682049563"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621682049563"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LPat GhcTc -&gt; ([Id], [Id])
</span><a href="#local-6989586621682049554"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621682049563"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1280"></span><span>    </span><span class="annot"><a href="#local-6989586621682049555"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ViewPat"><span class="hs-identifier hs-type">ViewPat</span></a></span><span> </span><span class="annot"><span class="annottext">XViewPat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">LHsExpr GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682049564"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621682049564"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LPat GhcTc -&gt; ([Id], [Id])
</span><a href="#local-6989586621682049554"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621682049564"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1281"></span><span>    </span><span class="annot"><a href="#local-6989586621682049555"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span id="local-6989586621682049565"><span class="annot"><span class="annottext">con :: Pat GhcTc
</span><a href="#local-6989586621682049565"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#ConPat"><span class="hs-identifier hs-type">ConPat</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">pat_con_ext :: forall p. Pat p -&gt; XConPat p
</span><a href="Language.Haskell.Syntax.Pat.html#pat_con_ext"><span class="hs-identifier hs-var">pat_con_ext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682049567"><span class="annot"><span class="annottext">XConPat GhcTc
</span><a href="#local-6989586621682049567"><span class="hs-identifier hs-var">con'</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1282"></span><span>                           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([Id], [Id]) -&gt; ([Id], [Id]) -&gt; ([Id], [Id])
forall {a} {a}. ([a], [a]) -&gt; ([a], [a]) -&gt; ([a], [a])
</span><a href="#local-6989586621682049568"><span class="hs-identifier hs-var">merge</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConPatTc -&gt; [Id]
</span><a href="GHC.Hs.Pat.html#cpt_tvs"><span class="hs-identifier hs-var">cpt_tvs</span></a></span><span> </span><span class="annot"><span class="annottext">XConPat GhcTc
ConPatTc
</span><a href="#local-6989586621682049567"><span class="hs-identifier hs-var">con'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ConPatTc -&gt; [Id]
</span><a href="GHC.Hs.Pat.html#cpt_dicts"><span class="hs-identifier hs-var">cpt_dicts</span></a></span><span> </span><span class="annot"><span class="annottext">XConPat GhcTc
ConPatTc
</span><a href="#local-6989586621682049567"><span class="hs-identifier hs-var">con'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(([Id], [Id]) -&gt; ([Id], [Id])) -&gt; ([Id], [Id]) -&gt; ([Id], [Id])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1283"></span><span>                              </span><span class="annot"><span class="annottext">HsConPatDetails GhcTc -&gt; ([Id], [Id])
</span><a href="#local-6989586621682049571"><span class="hs-identifier hs-var">goConDetails</span></a></span><span> </span><span class="annot"><span class="annottext">(HsConPatDetails GhcTc -&gt; ([Id], [Id]))
-&gt; HsConPatDetails GhcTc -&gt; ([Id], [Id])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcTc -&gt; HsConPatDetails GhcTc
forall p. Pat p -&gt; HsConPatDetails p
</span><a href="Language.Haskell.Syntax.Pat.html#pat_args"><span class="hs-identifier hs-var">pat_args</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcTc
</span><a href="#local-6989586621682049565"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-1284"></span><span>    </span><span class="annot"><a href="#local-6989586621682049555"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#SigPat"><span class="hs-identifier hs-type">SigPat</span></a></span><span> </span><span class="annot"><span class="annottext">XSigPat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682049573"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621682049573"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsPatSigType (NoGhcTc GhcTc)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LPat GhcTc -&gt; ([Id], [Id])
</span><a href="#local-6989586621682049554"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621682049573"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1285"></span><span>    </span><span class="annot"><a href="#local-6989586621682049555"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#XPat"><span class="hs-identifier hs-type">XPat</span></a></span><span> </span><span id="local-6989586621682049574"><span class="annot"><span class="annottext">XXPat GhcTc
</span><a href="#local-6989586621682049574"><span class="hs-identifier hs-var">ext</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">XXPat GhcTc
</span><a href="#local-6989586621682049574"><span class="hs-identifier hs-var">ext</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1286"></span><span>      </span><span class="annot"><a href="GHC.Hs.Pat.html#CoPat"><span class="hs-identifier hs-type">CoPat</span></a></span><span> </span><span class="annot"><span class="annottext">HsWrapper
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682049576"><span class="annot"><span class="annottext">Pat GhcTc
</span><a href="#local-6989586621682049576"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">Kind
</span><span class="hs-identifier">_</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pat GhcTc -&gt; ([Id], [Id])
</span><a href="#local-6989586621682049555"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcTc
</span><a href="#local-6989586621682049576"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1287"></span><span>      </span><span class="annot"><a href="GHC.Hs.Pat.html#ExpansionPat"><span class="hs-identifier hs-type">ExpansionPat</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcRn
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682049578"><span class="annot"><span class="annottext">Pat GhcTc
</span><a href="#local-6989586621682049578"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pat GhcTc -&gt; ([Id], [Id])
</span><a href="#local-6989586621682049555"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcTc
</span><a href="#local-6989586621682049578"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1288"></span><span>    </span><span class="annot"><a href="#local-6989586621682049555"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#NPlusKPat"><span class="hs-identifier hs-type">NPlusKPat</span></a></span><span> </span><span class="annot"><span class="annottext">XNPlusKPat GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682049579"><span class="annot"><span class="annottext">LIdP GhcTc
</span><a href="#local-6989586621682049579"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621682049580"><span class="annot"><span class="annottext">XRec GhcTc (HsOverLit GhcTc)
</span><a href="#local-6989586621682049580"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsOverLit GhcTc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682049581"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621682049581"><span class="hs-identifier hs-var">geq</span></a></span></span><span> </span><span id="local-6989586621682049582"><span class="annot"><span class="annottext">SyntaxExpr GhcTc
</span><a href="#local-6989586621682049582"><span class="hs-identifier hs-var">subtract</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1289"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; ([Id], [Id])
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;TODO: NPlusKPat&quot;</span></span><span> </span><span class="annot"><span class="annottext">(SDoc -&gt; ([Id], [Id])) -&gt; SDoc -&gt; ([Id], [Id])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnN Id -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcTc
GenLocated SrcSpanAnnN Id
</span><a href="#local-6989586621682049579"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated (SrcAnn NoEpAnns) (HsOverLit GhcTc) -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">XRec GhcTc (HsOverLit GhcTc)
GenLocated (SrcAnn NoEpAnns) (HsOverLit GhcTc)
</span><a href="#local-6989586621682049580"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
SyntaxExprTc
</span><a href="#local-6989586621682049581"><span class="hs-identifier hs-var">geq</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsDoc doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%24%24"><span class="hs-operator hs-var">$$</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExprTc -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">SyntaxExpr GhcTc
SyntaxExprTc
</span><a href="#local-6989586621682049582"><span class="hs-identifier hs-var">subtract</span></a></span><span>
</span><span id="line-1290"></span><span>    </span><span class="annot"><a href="#local-6989586621682049555"><span class="hs-identifier hs-var">go1</span></a></span><span> </span><span class="annot"><span class="annottext">Pat GhcTc
</span><span class="hs-identifier">_</span></span><span>                   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([Id], [Id])
forall {a} {a}. ([a], [a])
</span><a href="#local-6989586621682049583"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-1291"></span><span>
</span><span id="line-1292"></span><span>    </span><span class="annot"><a href="#local-6989586621682049571"><span class="hs-identifier hs-type">goConDetails</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsConPatDetails"><span class="hs-identifier hs-type">HsConPatDetails</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1293"></span><span>    </span><span id="local-6989586621682049571"><span class="annot"><span class="annottext">goConDetails :: HsConPatDetails GhcTc -&gt; ([Id], [Id])
</span><a href="#local-6989586621682049571"><span class="hs-identifier hs-var hs-var">goConDetails</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#PrefixCon"><span class="hs-identifier hs-type">PrefixCon</span></a></span><span> </span><span class="annot"><span class="annottext">[HsConPatTyArg (NoGhcTc GhcTc)]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621682049584"><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621682049584"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[([Id], [Id])] -&gt; ([Id], [Id])
forall {a} {a}. [([a], [a])] -&gt; ([a], [a])
</span><a href="#local-6989586621682049561"><span class="hs-identifier hs-var">mergeMany</span></a></span><span> </span><span class="annot"><span class="annottext">([([Id], [Id])] -&gt; ([Id], [Id]))
-&gt; ([LPat GhcTc] -&gt; [([Id], [Id])]) -&gt; [LPat GhcTc] -&gt; ([Id], [Id])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (Pat GhcTc) -&gt; ([Id], [Id]))
-&gt; [GenLocated SrcSpanAnnA (Pat GhcTc)] -&gt; [([Id], [Id])]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc -&gt; ([Id], [Id])
GenLocated SrcSpanAnnA (Pat GhcTc) -&gt; ([Id], [Id])
</span><a href="#local-6989586621682049554"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">([LPat GhcTc] -&gt; ([Id], [Id])) -&gt; [LPat GhcTc] -&gt; ([Id], [Id])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[LPat GhcTc]
</span><a href="#local-6989586621682049584"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1294"></span><span>    </span><span class="annot"><a href="#local-6989586621682049571"><span class="hs-identifier hs-var">goConDetails</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#InfixCon"><span class="hs-identifier hs-type">InfixCon</span></a></span><span> </span><span id="local-6989586621682049585"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621682049585"><span class="hs-identifier hs-var">p1</span></a></span></span><span> </span><span id="local-6989586621682049586"><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621682049586"><span class="hs-identifier hs-var">p2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LPat GhcTc -&gt; ([Id], [Id])
</span><a href="#local-6989586621682049554"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621682049585"><span class="hs-identifier hs-var">p1</span></a></span><span> </span><span class="annot"><span class="annottext">([Id], [Id]) -&gt; ([Id], [Id]) -&gt; ([Id], [Id])
forall {a} {a}. ([a], [a]) -&gt; ([a], [a]) -&gt; ([a], [a])
</span><a href="#local-6989586621682049568"><span class="hs-operator hs-var">`merge`</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc -&gt; ([Id], [Id])
</span><a href="#local-6989586621682049554"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
</span><a href="#local-6989586621682049586"><span class="hs-identifier hs-var">p2</span></a></span><span>
</span><span id="line-1295"></span><span>    </span><span class="annot"><a href="#local-6989586621682049571"><span class="hs-identifier hs-var">goConDetails</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#RecCon"><span class="hs-identifier hs-type">RecCon</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsRecFields"><span class="hs-identifier hs-type">HsRecFields</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rec_flds :: forall p arg. HsRecFields p arg -&gt; [LHsRecField p arg]
</span><a href="Language.Haskell.Syntax.Pat.html#rec_flds"><span class="hs-identifier hs-var">rec_flds</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682049588"><span class="annot"><span class="annottext">[LHsRecField GhcTc (LPat GhcTc)]
</span><a href="#local-6989586621682049588"><span class="hs-identifier hs-var">flds</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1296"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[([Id], [Id])] -&gt; ([Id], [Id])
forall {a} {a}. [([a], [a])] -&gt; ([a], [a])
</span><a href="#local-6989586621682049561"><span class="hs-identifier hs-var">mergeMany</span></a></span><span> </span><span class="annot"><span class="annottext">([([Id], [Id])] -&gt; ([Id], [Id]))
-&gt; ([LHsRecField GhcTc (LPat GhcTc)] -&gt; [([Id], [Id])])
-&gt; [LHsRecField GhcTc (LPat GhcTc)]
-&gt; ([Id], [Id])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(GenLocated
   SrcSpanAnnA
   (HsFieldBind
      (GenLocated (SrcAnn NoEpAnns) (FieldOcc GhcTc))
      (GenLocated SrcSpanAnnA (Pat GhcTc)))
 -&gt; ([Id], [Id]))
-&gt; [GenLocated
      SrcSpanAnnA
      (HsFieldBind
         (GenLocated (SrcAnn NoEpAnns) (FieldOcc GhcTc))
         (GenLocated SrcSpanAnnA (Pat GhcTc)))]
-&gt; [([Id], [Id])]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">LHsRecField GhcTc (LPat GhcTc) -&gt; ([Id], [Id])
GenLocated
  SrcSpanAnnA
  (HsFieldBind
     (GenLocated (SrcAnn NoEpAnns) (FieldOcc GhcTc))
     (GenLocated SrcSpanAnnA (Pat GhcTc)))
-&gt; ([Id], [Id])
</span><a href="#local-6989586621682049589"><span class="hs-identifier hs-var">goRecFd</span></a></span><span> </span><span class="annot"><span class="annottext">([LHsRecField GhcTc (LPat GhcTc)] -&gt; ([Id], [Id]))
-&gt; [LHsRecField GhcTc (LPat GhcTc)] -&gt; ([Id], [Id])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsRecField GhcTc (LPat GhcTc)]
</span><a href="#local-6989586621682049588"><span class="hs-identifier hs-var">flds</span></a></span><span>
</span><span id="line-1297"></span><span>
</span><span id="line-1298"></span><span>    </span><span class="annot"><a href="#local-6989586621682049589"><span class="hs-identifier hs-type">goRecFd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LHsRecField"><span class="hs-identifier hs-type">LHsRecField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#LPat"><span class="hs-identifier hs-type">LPat</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcTc"><span class="hs-identifier hs-type">GhcTc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#EvVar"><span class="hs-identifier hs-type">EvVar</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1299"></span><span>    </span><span id="local-6989586621682049589"><span class="annot"><span class="annottext">goRecFd :: LHsRecField GhcTc (LPat GhcTc) -&gt; ([Id], [Id])
</span><a href="#local-6989586621682049589"><span class="hs-identifier hs-var hs-var">goRecFd</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Pat.html#HsFieldBind"><span class="hs-identifier hs-type">HsFieldBind</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hfbRHS :: forall lhs rhs. HsFieldBind lhs rhs -&gt; rhs
</span><a href="Language.Haskell.Syntax.Pat.html#hfbRHS"><span class="hs-identifier hs-var">hfbRHS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621682049592"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621682049592"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LPat GhcTc -&gt; ([Id], [Id])
</span><a href="#local-6989586621682049554"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">LPat GhcTc
GenLocated SrcSpanAnnA (Pat GhcTc)
</span><a href="#local-6989586621682049592"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1300"></span><span>
</span><span id="line-1301"></span><span>    </span><span id="local-6989586621682049568"><span class="annot"><span class="annottext">merge :: ([a], [a]) -&gt; ([a], [a]) -&gt; ([a], [a])
</span><a href="#local-6989586621682049568"><span class="hs-identifier hs-var hs-var">merge</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621682049593"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682049593"><span class="hs-identifier hs-var">vs1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049594"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682049594"><span class="hs-identifier hs-var">evs1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621682049595"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682049595"><span class="hs-identifier hs-var">vs2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621682049596"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682049596"><span class="hs-identifier hs-var">evs2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682049593"><span class="hs-identifier hs-var">vs1</span></a></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; [a] -&gt; [a]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682049595"><span class="hs-identifier hs-var">vs2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682049594"><span class="hs-identifier hs-var">evs1</span></a></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; [a] -&gt; [a]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621682049596"><span class="hs-identifier hs-var">evs2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1302"></span><span>    </span><span id="local-6989586621682049561"><span class="annot"><span class="annottext">mergeMany :: [([a], [a])] -&gt; ([a], [a])
</span><a href="#local-6989586621682049561"><span class="hs-identifier hs-var hs-var">mergeMany</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(([a], [a]) -&gt; ([a], [a]) -&gt; ([a], [a]))
-&gt; ([a], [a]) -&gt; [([a], [a])] -&gt; ([a], [a])
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#foldr/Data.Foldable.html#foldr"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="annot"><span class="annottext">([a], [a]) -&gt; ([a], [a]) -&gt; ([a], [a])
forall {a} {a}. ([a], [a]) -&gt; ([a], [a]) -&gt; ([a], [a])
</span><a href="#local-6989586621682049568"><span class="hs-identifier hs-var">merge</span></a></span><span> </span><span class="annot"><span class="annottext">([a], [a])
forall {a} {a}. ([a], [a])
</span><a href="#local-6989586621682049583"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-1303"></span><span>    </span><span id="local-6989586621682049583"><span class="annot"><span class="annottext">empty :: ([a], [a])
</span><a href="#local-6989586621682049583"><span class="hs-identifier hs-var hs-var">empty</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1304"></span></pre></body></html>