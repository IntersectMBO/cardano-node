<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">GHC.Cmm.Type</span><span>
</span><span id="line-2"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier">CmmType</span></a></span><span>   </span><span class="hs-comment">-- Abstract</span><span>
</span><span id="line-3"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#b8"><span class="hs-identifier">b8</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#b16"><span class="hs-identifier">b16</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#b32"><span class="hs-identifier">b32</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#b64"><span class="hs-identifier">b64</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#b128"><span class="hs-identifier">b128</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#b256"><span class="hs-identifier">b256</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#b512"><span class="hs-identifier">b512</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#f32"><span class="hs-identifier">f32</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#f64"><span class="hs-identifier">f64</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#bWord"><span class="hs-identifier">bWord</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#bHalfWord"><span class="hs-identifier">bHalfWord</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#gcWord"><span class="hs-identifier">gcWord</span></a></span><span>
</span><span id="line-4"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#cInt"><span class="hs-identifier">cInt</span></a></span><span>
</span><span id="line-5"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#cmmBits"><span class="hs-identifier">cmmBits</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#cmmFloat"><span class="hs-identifier">cmmFloat</span></a></span><span>
</span><span id="line-6"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#typeWidth"><span class="hs-identifier">typeWidth</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#cmmEqType"><span class="hs-identifier">cmmEqType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#cmmEqType_ignoring_ptrhood"><span class="hs-identifier">cmmEqType_ignoring_ptrhood</span></a></span><span>
</span><span id="line-7"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#isFloatType"><span class="hs-identifier">isFloatType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#isGcPtrType"><span class="hs-identifier">isGcPtrType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#isBitsType"><span class="hs-identifier">isBitsType</span></a></span><span>
</span><span id="line-8"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#isWordAny"><span class="hs-identifier">isWordAny</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#isWord32"><span class="hs-identifier">isWord32</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#isWord64"><span class="hs-identifier">isWord64</span></a></span><span>
</span><span id="line-9"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#isFloat64"><span class="hs-identifier">isFloat64</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#isFloat32"><span class="hs-identifier">isFloat32</span></a></span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier">Width</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-12"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#widthInBits"><span class="hs-identifier">widthInBits</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#widthInBytes"><span class="hs-identifier">widthInBytes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#widthInLog"><span class="hs-identifier">widthInLog</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#widthFromBytes"><span class="hs-identifier">widthFromBytes</span></a></span><span>
</span><span id="line-13"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#wordWidth"><span class="hs-identifier">wordWidth</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#halfWordWidth"><span class="hs-identifier">halfWordWidth</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#cIntWidth"><span class="hs-identifier">cIntWidth</span></a></span><span>
</span><span id="line-14"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#halfWordMask"><span class="hs-identifier">halfWordMask</span></a></span><span>
</span><span id="line-15"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#narrowU"><span class="hs-identifier">narrowU</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#narrowS"><span class="hs-identifier">narrowS</span></a></span><span>
</span><span id="line-16"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#rEP_CostCentreStack_mem_alloc"><span class="hs-identifier">rEP_CostCentreStack_mem_alloc</span></a></span><span>
</span><span id="line-17"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#rEP_CostCentreStack_scc_count"><span class="hs-identifier">rEP_CostCentreStack_scc_count</span></a></span><span>
</span><span id="line-18"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#rEP_StgEntCounter_allocs"><span class="hs-identifier">rEP_StgEntCounter_allocs</span></a></span><span>
</span><span id="line-19"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#rEP_StgEntCounter_allocd"><span class="hs-identifier">rEP_StgEntCounter_allocd</span></a></span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#ForeignHint"><span class="hs-identifier">ForeignHint</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Length"><span class="hs-identifier">Length</span></a></span><span>
</span><span id="line-24"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#vec"><span class="hs-identifier">vec</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#vec2"><span class="hs-identifier">vec2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#vec4"><span class="hs-identifier">vec4</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#vec8"><span class="hs-identifier">vec8</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#vec16"><span class="hs-identifier">vec16</span></a></span><span>
</span><span id="line-25"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#vec2f64"><span class="hs-identifier">vec2f64</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#vec2b64"><span class="hs-identifier">vec2b64</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#vec4f32"><span class="hs-identifier">vec4f32</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#vec4b32"><span class="hs-identifier">vec4b32</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#vec8b16"><span class="hs-identifier">vec8b16</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#vec16b8"><span class="hs-identifier">vec16b8</span></a></span><span>
</span><span id="line-26"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#cmmVec"><span class="hs-identifier">cmmVec</span></a></span><span>
</span><span id="line-27"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#vecLength"><span class="hs-identifier">vecLength</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#vecElemType"><span class="hs-identifier">vecElemType</span></a></span><span>
</span><span id="line-28"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#isVecType"><span class="hs-identifier">isVecType</span></a></span><span>
</span><span id="line-29"></span><span>
</span><span id="line-30"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#DoAlignSanitisation"><span class="hs-identifier">DoAlignSanitisation</span></a></span><span>
</span><span id="line-31"></span><span>   </span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span class="hs-keyword">where</span><span>
</span><span id="line-33"></span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Platform.html"><span class="hs-identifier">GHC.Platform</span></a></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/Data.Word.html#/Data.Word.html"><span class="hs-identifier">Data.Word</span></a></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/Data.Int.html#/Data.Int.html"><span class="hs-identifier">Data.Int</span></a></span><span>
</span><span id="line-43"></span><span>
</span><span id="line-44"></span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-45"></span><span class="hs-comment">--              CmmType</span><span>
</span><span id="line-46"></span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span>  </span><span class="hs-comment">-- NOTE: CmmType is an abstract type, not exported from this</span><span>
</span><span id="line-49"></span><span>  </span><span class="hs-comment">--       module so you can easily change its representation</span><span>
</span><span id="line-50"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-51"></span><span>  </span><span class="hs-comment">-- However Width is exported in a concrete way,</span><span>
</span><span id="line-52"></span><span>  </span><span class="hs-comment">-- and is used extensively in pattern-matching</span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span class="hs-keyword">data</span><span> </span><span id="CmmType"><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-var">CmmType</span></a></span></span><span>    </span><span class="hs-comment">-- The important one!</span><span>
</span><span id="line-55"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="CmmType"><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-var">CmmType</span></a></span></span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmCat"><span class="hs-identifier hs-type">CmmCat</span></a></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span>
</span><span id="line-56"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621681538981"><span id="local-6989586621681538989"><span id="local-6989586621681538993"><span class="annot"><span class="annottext">Int -&gt; CmmType -&gt; ShowS
[CmmType] -&gt; ShowS
CmmType -&gt; String
(Int -&gt; CmmType -&gt; ShowS)
-&gt; (CmmType -&gt; String) -&gt; ([CmmType] -&gt; ShowS) -&gt; Show CmmType
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; CmmType -&gt; ShowS
showsPrec :: Int -&gt; CmmType -&gt; ShowS
$cshow :: CmmType -&gt; String
show :: CmmType -&gt; String
$cshowList :: [CmmType] -&gt; ShowS
showList :: [CmmType] -&gt; ShowS
</span><a href="../../base-4.18.2.1/src/GHC.Show.html#Show/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span class="hs-keyword">data</span><span> </span><span id="CmmCat"><span class="annot"><a href="GHC.Cmm.Type.html#CmmCat"><span class="hs-identifier hs-var">CmmCat</span></a></span></span><span>                </span><span class="hs-comment">-- &quot;Category&quot; (not exported)</span><span>
</span><span id="line-59"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span id="GcPtrCat"><span class="annot"><a href="GHC.Cmm.Type.html#GcPtrCat"><span class="hs-identifier hs-var">GcPtrCat</span></a></span></span><span>              </span><span class="hs-comment">-- GC pointer</span><span>
</span><span id="line-60"></span><span>   </span><span class="hs-glyph">|</span><span> </span><span id="BitsCat"><span class="annot"><a href="GHC.Cmm.Type.html#BitsCat"><span class="hs-identifier hs-var">BitsCat</span></a></span></span><span>               </span><span class="hs-comment">-- Non-pointer</span><span>
</span><span id="line-61"></span><span>   </span><span class="hs-glyph">|</span><span> </span><span id="FloatCat"><span class="annot"><a href="GHC.Cmm.Type.html#FloatCat"><span class="hs-identifier hs-var">FloatCat</span></a></span></span><span>              </span><span class="hs-comment">-- Float</span><span>
</span><span id="line-62"></span><span>   </span><span class="hs-glyph">|</span><span> </span><span id="VecCat"><span class="annot"><a href="GHC.Cmm.Type.html#VecCat"><span class="hs-identifier hs-var">VecCat</span></a></span></span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Length"><span class="hs-identifier hs-type">Length</span></a></span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmCat"><span class="hs-identifier hs-type">CmmCat</span></a></span><span>  </span><span class="hs-comment">-- Vector</span><span>
</span><span id="line-63"></span><span>   </span><span class="hs-keyword">deriving</span><span class="hs-special">(</span><span> </span><span id="local-6989586621681539001"><span id="local-6989586621681539005"><span class="annot"><span class="annottext">CmmCat -&gt; CmmCat -&gt; Bool
(CmmCat -&gt; CmmCat -&gt; Bool)
-&gt; (CmmCat -&gt; CmmCat -&gt; Bool) -&gt; Eq CmmCat
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: CmmCat -&gt; CmmCat -&gt; Bool
== :: CmmCat -&gt; CmmCat -&gt; Bool
$c/= :: CmmCat -&gt; CmmCat -&gt; Bool
/= :: CmmCat -&gt; CmmCat -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681539009"><span id="local-6989586621681539014"><span id="local-6989586621681539017"><span class="annot"><span class="annottext">Int -&gt; CmmCat -&gt; ShowS
[CmmCat] -&gt; ShowS
CmmCat -&gt; String
(Int -&gt; CmmCat -&gt; ShowS)
-&gt; (CmmCat -&gt; String) -&gt; ([CmmCat] -&gt; ShowS) -&gt; Show CmmCat
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; CmmCat -&gt; ShowS
showsPrec :: Int -&gt; CmmCat -&gt; ShowS
$cshow :: CmmCat -&gt; String
show :: CmmCat -&gt; String
$cshowList :: [CmmCat] -&gt; ShowS
showList :: [CmmCat] -&gt; ShowS
</span><a href="../../base-4.18.2.1/src/GHC.Show.html#Show/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span>        </span><span class="hs-comment">-- See Note [Signed vs unsigned] at the end</span><span>
</span><span id="line-65"></span><span>
</span><span id="line-66"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-67"></span><span>  </span><span id="local-6989586621681539027"><span class="annot"><span class="annottext">ppr :: CmmType -&gt; SDoc
</span><a href="#local-6989586621681539027"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span id="local-6989586621681539029"><span class="annot"><span class="annottext">CmmCat
</span><a href="#local-6989586621681539029"><span class="hs-identifier hs-var">cat</span></a></span></span><span> </span><span id="local-6989586621681539030"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681539030"><span class="hs-identifier hs-var">wid</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmCat -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CmmCat
</span><a href="#local-6989586621681539029"><span class="hs-identifier hs-var">cat</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; Int
</span><a href="GHC.Cmm.Type.html#widthInBits"><span class="hs-identifier hs-var">widthInBits</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681539030"><span class="hs-identifier hs-var">wid</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmCat"><span class="hs-identifier hs-type">CmmCat</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-70"></span><span>  </span><span id="local-6989586621681539043"><span class="annot"><span class="annottext">ppr :: CmmCat -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="annot"><span class="annottext">CmmCat
</span><a href="GHC.Cmm.Type.html#FloatCat"><span class="hs-identifier hs-var">FloatCat</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;F&quot;</span></span><span>
</span><span id="line-71"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CmmCat
</span><a href="GHC.Cmm.Type.html#GcPtrCat"><span class="hs-identifier hs-var">GcPtrCat</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;P&quot;</span></span><span>
</span><span id="line-72"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CmmCat
</span><a href="GHC.Cmm.Type.html#BitsCat"><span class="hs-identifier hs-var">BitsCat</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;I&quot;</span></span><span>
</span><span id="line-73"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Type.html#VecCat"><span class="hs-identifier hs-type">VecCat</span></a></span><span> </span><span id="local-6989586621681539045"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681539045"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681539046"><span class="annot"><span class="annottext">CmmCat
</span><a href="#local-6989586621681539046"><span class="hs-identifier hs-var">cat</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmCat -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CmmCat
</span><a href="#local-6989586621681539046"><span class="hs-identifier hs-var">cat</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;x&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681539045"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;V&quot;</span></span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span class="hs-comment">-- Why is CmmType stratified?  For native code generation,</span><span>
</span><span id="line-76"></span><span class="hs-comment">-- most of the time you just want to know what sort of register</span><span>
</span><span id="line-77"></span><span class="hs-comment">-- to put the thing in, and for this you need to know how</span><span>
</span><span id="line-78"></span><span class="hs-comment">-- many bits thing has, and whether it goes in a floating-point</span><span>
</span><span id="line-79"></span><span class="hs-comment">-- register.  By contrast, the distinction between GcPtr and</span><span>
</span><span id="line-80"></span><span class="hs-comment">-- GcNonPtr is of interest to only a few parts of the code generator.</span><span>
</span><span id="line-81"></span><span>
</span><span id="line-82"></span><span class="hs-comment">-------- Equality on CmmType --------------</span><span>
</span><span id="line-83"></span><span class="hs-comment">-- CmmType is *not* an instance of Eq; sometimes we care about the</span><span>
</span><span id="line-84"></span><span class="hs-comment">-- Gc/NonGc distinction, and sometimes we don't</span><span>
</span><span id="line-85"></span><span class="hs-comment">-- So we use an explicit function to force you to think about it</span><span>
</span><span id="line-86"></span><span class="annot"><a href="GHC.Cmm.Type.html#cmmEqType"><span class="hs-identifier hs-type">cmmEqType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-comment">-- Exact equality</span><span>
</span><span id="line-87"></span><span id="cmmEqType"><span class="annot"><span class="annottext">cmmEqType :: CmmType -&gt; CmmType -&gt; Bool
</span><a href="GHC.Cmm.Type.html#cmmEqType"><span class="hs-identifier hs-var hs-var">cmmEqType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span id="local-6989586621681539047"><span class="annot"><span class="annottext">CmmCat
</span><a href="#local-6989586621681539047"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span id="local-6989586621681539048"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681539048"><span class="hs-identifier hs-var">w1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span id="local-6989586621681539049"><span class="annot"><span class="annottext">CmmCat
</span><a href="#local-6989586621681539049"><span class="hs-identifier hs-var">c2</span></a></span></span><span> </span><span id="local-6989586621681539050"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681539050"><span class="hs-identifier hs-var">w2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmCat
</span><a href="#local-6989586621681539047"><span class="hs-identifier hs-var">c1</span></a></span><span class="annot"><span class="annottext">CmmCat -&gt; CmmCat -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span class="annot"><span class="annottext">CmmCat
</span><a href="#local-6989586621681539049"><span class="hs-identifier hs-var">c2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681539048"><span class="hs-identifier hs-var">w1</span></a></span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681539050"><span class="hs-identifier hs-var">w2</span></a></span><span>
</span><span id="line-88"></span><span>
</span><span id="line-89"></span><span class="annot"><a href="GHC.Cmm.Type.html#cmmEqType_ignoring_ptrhood"><span class="hs-identifier hs-type">cmmEqType_ignoring_ptrhood</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-90"></span><span>  </span><span class="hs-comment">-- This equality is temporary; used in CmmLint</span><span>
</span><span id="line-91"></span><span>  </span><span class="hs-comment">-- but the RTS files are not yet well-typed wrt pointers</span><span>
</span><span id="line-92"></span><span id="cmmEqType_ignoring_ptrhood"><span class="annot"><span class="annottext">cmmEqType_ignoring_ptrhood :: CmmType -&gt; CmmType -&gt; Bool
</span><a href="GHC.Cmm.Type.html#cmmEqType_ignoring_ptrhood"><span class="hs-identifier hs-var hs-var">cmmEqType_ignoring_ptrhood</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span id="local-6989586621681539052"><span class="annot"><span class="annottext">CmmCat
</span><a href="#local-6989586621681539052"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span id="local-6989586621681539053"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681539053"><span class="hs-identifier hs-var">w1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span id="local-6989586621681539054"><span class="annot"><span class="annottext">CmmCat
</span><a href="#local-6989586621681539054"><span class="hs-identifier hs-var">c2</span></a></span></span><span> </span><span id="local-6989586621681539055"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681539055"><span class="hs-identifier hs-var">w2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmCat
</span><a href="#local-6989586621681539052"><span class="hs-identifier hs-var">c1</span></a></span><span> </span><span class="annot"><span class="annottext">CmmCat -&gt; CmmCat -&gt; Bool
</span><a href="#local-6989586621681539056"><span class="hs-operator hs-var">`weak_eq`</span></a></span><span> </span><span class="annot"><span class="annottext">CmmCat
</span><a href="#local-6989586621681539054"><span class="hs-identifier hs-var">c2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681539053"><span class="hs-identifier hs-var">w1</span></a></span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681539055"><span class="hs-identifier hs-var">w2</span></a></span><span>
</span><span id="line-94"></span><span>   </span><span class="hs-keyword">where</span><span>
</span><span id="line-95"></span><span>     </span><span class="annot"><a href="#local-6989586621681539056"><span class="hs-identifier hs-type">weak_eq</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmCat"><span class="hs-identifier hs-type">CmmCat</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmCat"><span class="hs-identifier hs-type">CmmCat</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-96"></span><span>     </span><span class="annot"><span class="annottext">CmmCat
</span><a href="GHC.Cmm.Type.html#FloatCat"><span class="hs-identifier hs-var">FloatCat</span></a></span><span>         </span><span id="local-6989586621681539056"><span class="annot"><span class="annottext">weak_eq :: CmmCat -&gt; CmmCat -&gt; Bool
</span><a href="#local-6989586621681539056"><span class="hs-operator hs-var hs-var">`weak_eq`</span></a></span></span><span> </span><span class="annot"><span class="annottext">CmmCat
</span><a href="GHC.Cmm.Type.html#FloatCat"><span class="hs-identifier hs-var">FloatCat</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-97"></span><span>     </span><span class="annot"><span class="annottext">CmmCat
</span><a href="GHC.Cmm.Type.html#FloatCat"><span class="hs-identifier hs-var">FloatCat</span></a></span><span>         </span><span class="annot"><a href="#local-6989586621681539056"><span class="hs-operator hs-var">`weak_eq`</span></a></span><span> </span><span id="local-6989586621681539057"><span class="annot"><span class="annottext">CmmCat
</span><a href="#local-6989586621681539057"><span class="hs-identifier hs-var">_other</span></a></span></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-98"></span><span>     </span><span id="local-6989586621681539058"><span class="annot"><span class="annottext">CmmCat
</span><a href="#local-6989586621681539058"><span class="hs-identifier hs-var">_other</span></a></span></span><span>           </span><span class="annot"><a href="#local-6989586621681539056"><span class="hs-operator hs-var">`weak_eq`</span></a></span><span> </span><span class="annot"><span class="annottext">CmmCat
</span><a href="GHC.Cmm.Type.html#FloatCat"><span class="hs-identifier hs-var">FloatCat</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-99"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Type.html#VecCat"><span class="hs-identifier hs-type">VecCat</span></a></span><span> </span><span id="local-6989586621681539059"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681539059"><span class="hs-identifier hs-var">l1</span></a></span></span><span> </span><span id="local-6989586621681539060"><span class="annot"><span class="annottext">CmmCat
</span><a href="#local-6989586621681539060"><span class="hs-identifier hs-var">cat1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681539056"><span class="hs-operator hs-var">`weak_eq`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Type.html#VecCat"><span class="hs-identifier hs-type">VecCat</span></a></span><span> </span><span id="local-6989586621681539061"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681539061"><span class="hs-identifier hs-var">l2</span></a></span></span><span> </span><span id="local-6989586621681539062"><span class="annot"><span class="annottext">CmmCat
</span><a href="#local-6989586621681539062"><span class="hs-identifier hs-var">cat2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681539059"><span class="hs-identifier hs-var">l1</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681539061"><span class="hs-identifier hs-var">l2</span></a></span><span>
</span><span id="line-100"></span><span>                                                   </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">CmmCat
</span><a href="#local-6989586621681539060"><span class="hs-identifier hs-var">cat1</span></a></span><span> </span><span class="annot"><span class="annottext">CmmCat -&gt; CmmCat -&gt; Bool
</span><a href="#local-6989586621681539056"><span class="hs-operator hs-var">`weak_eq`</span></a></span><span> </span><span class="annot"><span class="annottext">CmmCat
</span><a href="#local-6989586621681539062"><span class="hs-identifier hs-var">cat2</span></a></span><span>
</span><span id="line-101"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Type.html#VecCat"><span class="hs-identifier hs-type">VecCat</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>      </span><span class="annot"><a href="#local-6989586621681539056"><span class="hs-operator hs-var">`weak_eq`</span></a></span><span> </span><span id="local-6989586621681539063"><span class="annot"><span class="annottext">CmmCat
</span><a href="#local-6989586621681539063"><span class="hs-identifier hs-var">_other</span></a></span></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-102"></span><span>     </span><span id="local-6989586621681539064"><span class="annot"><span class="annottext">CmmCat
</span><a href="#local-6989586621681539064"><span class="hs-identifier hs-var">_other</span></a></span></span><span>           </span><span class="annot"><a href="#local-6989586621681539056"><span class="hs-operator hs-var">`weak_eq`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Type.html#VecCat"><span class="hs-identifier hs-type">VecCat</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-103"></span><span>     </span><span id="local-6989586621681539065"><span class="annot"><span class="annottext">CmmCat
</span><a href="#local-6989586621681539065"><span class="hs-identifier hs-var">_word1</span></a></span></span><span>           </span><span class="annot"><a href="#local-6989586621681539056"><span class="hs-operator hs-var">`weak_eq`</span></a></span><span> </span><span id="local-6989586621681539066"><span class="annot"><span class="annottext">CmmCat
</span><a href="#local-6989586621681539066"><span class="hs-identifier hs-var">_word2</span></a></span></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>        </span><span class="hs-comment">-- Ignores GcPtr</span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span class="hs-comment">--- Simple operations on CmmType -----</span><span>
</span><span id="line-106"></span><span class="annot"><a href="GHC.Cmm.Type.html#typeWidth"><span class="hs-identifier hs-type">typeWidth</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span>
</span><span id="line-107"></span><span id="typeWidth"><span class="annot"><span class="annottext">typeWidth :: CmmType -&gt; Width
</span><a href="GHC.Cmm.Type.html#typeWidth"><span class="hs-identifier hs-var hs-var">typeWidth</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmCat
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681539067"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681539067"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681539067"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span class="annot"><a href="GHC.Cmm.Type.html#cmmBits"><span class="hs-identifier hs-type">cmmBits</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#cmmFloat"><span class="hs-identifier hs-type">cmmFloat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span>
</span><span id="line-110"></span><span id="cmmBits"><span class="annot"><span class="annottext">cmmBits :: Width -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#cmmBits"><span class="hs-identifier hs-var hs-var">cmmBits</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmCat -&gt; Width -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-var">CmmType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmCat
</span><a href="GHC.Cmm.Type.html#BitsCat"><span class="hs-identifier hs-var">BitsCat</span></a></span><span>
</span><span id="line-111"></span><span id="cmmFloat"><span class="annot"><span class="annottext">cmmFloat :: Width -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#cmmFloat"><span class="hs-identifier hs-var hs-var">cmmFloat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmCat -&gt; Width -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-var">CmmType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmCat
</span><a href="GHC.Cmm.Type.html#FloatCat"><span class="hs-identifier hs-var">FloatCat</span></a></span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span class="hs-comment">-------- Common CmmTypes ------------</span><span>
</span><span id="line-114"></span><span class="hs-comment">-- Floats and words of specific widths</span><span>
</span><span id="line-115"></span><span class="annot"><a href="GHC.Cmm.Type.html#b8"><span class="hs-identifier hs-type">b8</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#b16"><span class="hs-identifier hs-type">b16</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#b32"><span class="hs-identifier hs-type">b32</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#b64"><span class="hs-identifier hs-type">b64</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#b128"><span class="hs-identifier hs-type">b128</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#b256"><span class="hs-identifier hs-type">b256</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#b512"><span class="hs-identifier hs-type">b512</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#f32"><span class="hs-identifier hs-type">f32</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#f64"><span class="hs-identifier hs-type">f64</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span>
</span><span id="line-116"></span><span id="b8"><span class="annot"><span class="annottext">b8 :: CmmType
</span><a href="GHC.Cmm.Type.html#b8"><span class="hs-identifier hs-var hs-var">b8</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#cmmBits"><span class="hs-identifier hs-var">cmmBits</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W8"><span class="hs-identifier hs-var">W8</span></a></span><span>
</span><span id="line-117"></span><span id="b16"><span class="annot"><span class="annottext">b16 :: CmmType
</span><a href="GHC.Cmm.Type.html#b16"><span class="hs-identifier hs-var hs-var">b16</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#cmmBits"><span class="hs-identifier hs-var">cmmBits</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W16"><span class="hs-identifier hs-var">W16</span></a></span><span>
</span><span id="line-118"></span><span id="b32"><span class="annot"><span class="annottext">b32 :: CmmType
</span><a href="GHC.Cmm.Type.html#b32"><span class="hs-identifier hs-var hs-var">b32</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#cmmBits"><span class="hs-identifier hs-var">cmmBits</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span>
</span><span id="line-119"></span><span id="b64"><span class="annot"><span class="annottext">b64 :: CmmType
</span><a href="GHC.Cmm.Type.html#b64"><span class="hs-identifier hs-var hs-var">b64</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#cmmBits"><span class="hs-identifier hs-var">cmmBits</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span>
</span><span id="line-120"></span><span id="b128"><span class="annot"><span class="annottext">b128 :: CmmType
</span><a href="GHC.Cmm.Type.html#b128"><span class="hs-identifier hs-var hs-var">b128</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#cmmBits"><span class="hs-identifier hs-var">cmmBits</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W128"><span class="hs-identifier hs-var">W128</span></a></span><span>
</span><span id="line-121"></span><span id="b256"><span class="annot"><span class="annottext">b256 :: CmmType
</span><a href="GHC.Cmm.Type.html#b256"><span class="hs-identifier hs-var hs-var">b256</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#cmmBits"><span class="hs-identifier hs-var">cmmBits</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W256"><span class="hs-identifier hs-var">W256</span></a></span><span>
</span><span id="line-122"></span><span id="b512"><span class="annot"><span class="annottext">b512 :: CmmType
</span><a href="GHC.Cmm.Type.html#b512"><span class="hs-identifier hs-var hs-var">b512</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#cmmBits"><span class="hs-identifier hs-var">cmmBits</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W512"><span class="hs-identifier hs-var">W512</span></a></span><span>
</span><span id="line-123"></span><span id="f32"><span class="annot"><span class="annottext">f32 :: CmmType
</span><a href="GHC.Cmm.Type.html#f32"><span class="hs-identifier hs-var hs-var">f32</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#cmmFloat"><span class="hs-identifier hs-var">cmmFloat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span>
</span><span id="line-124"></span><span id="f64"><span class="annot"><span class="annottext">f64 :: CmmType
</span><a href="GHC.Cmm.Type.html#f64"><span class="hs-identifier hs-var hs-var">f64</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#cmmFloat"><span class="hs-identifier hs-var">cmmFloat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span class="hs-comment">-- CmmTypes of native word widths</span><span>
</span><span id="line-127"></span><span class="annot"><a href="GHC.Cmm.Type.html#bWord"><span class="hs-identifier hs-type">bWord</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Platform.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span>
</span><span id="line-128"></span><span id="bWord"><span class="annot"><span class="annottext">bWord :: Platform -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#bWord"><span class="hs-identifier hs-var hs-var">bWord</span></a></span></span><span> </span><span id="local-6989586621681539075"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681539075"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#cmmBits"><span class="hs-identifier hs-var">cmmBits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; Width
</span><a href="GHC.Cmm.Type.html#wordWidth"><span class="hs-identifier hs-var">wordWidth</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681539075"><span class="hs-identifier hs-var">platform</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-129"></span><span>
</span><span id="line-130"></span><span class="annot"><a href="GHC.Cmm.Type.html#bHalfWord"><span class="hs-identifier hs-type">bHalfWord</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Platform.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span>
</span><span id="line-131"></span><span id="bHalfWord"><span class="annot"><span class="annottext">bHalfWord :: Platform -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#bHalfWord"><span class="hs-identifier hs-var hs-var">bHalfWord</span></a></span></span><span> </span><span id="local-6989586621681539076"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681539076"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#cmmBits"><span class="hs-identifier hs-var">cmmBits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; Width
</span><a href="GHC.Cmm.Type.html#halfWordWidth"><span class="hs-identifier hs-var">halfWordWidth</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681539076"><span class="hs-identifier hs-var">platform</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span>
</span><span id="line-133"></span><span class="annot"><a href="GHC.Cmm.Type.html#gcWord"><span class="hs-identifier hs-type">gcWord</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Platform.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span>
</span><span id="line-134"></span><span id="gcWord"><span class="annot"><span class="annottext">gcWord :: Platform -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#gcWord"><span class="hs-identifier hs-var hs-var">gcWord</span></a></span></span><span> </span><span id="local-6989586621681539077"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681539077"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmCat -&gt; Width -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-var">CmmType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmCat
</span><a href="GHC.Cmm.Type.html#GcPtrCat"><span class="hs-identifier hs-var">GcPtrCat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; Width
</span><a href="GHC.Cmm.Type.html#wordWidth"><span class="hs-identifier hs-var">wordWidth</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681539077"><span class="hs-identifier hs-var">platform</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span class="annot"><a href="GHC.Cmm.Type.html#cInt"><span class="hs-identifier hs-type">cInt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Platform.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span>
</span><span id="line-137"></span><span id="cInt"><span class="annot"><span class="annottext">cInt :: Platform -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#cInt"><span class="hs-identifier hs-var hs-var">cInt</span></a></span></span><span> </span><span id="local-6989586621681539078"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681539078"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#cmmBits"><span class="hs-identifier hs-var">cmmBits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; Width
</span><a href="GHC.Cmm.Type.html#cIntWidth"><span class="hs-identifier hs-var">cIntWidth</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681539078"><span class="hs-identifier hs-var">platform</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span class="hs-comment">------------ Predicates ----------------</span><span>
</span><span id="line-140"></span><span class="annot"><a href="GHC.Cmm.Type.html#isFloatType"><span class="hs-identifier hs-type">isFloatType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#isGcPtrType"><span class="hs-identifier hs-type">isGcPtrType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#isBitsType"><span class="hs-identifier hs-type">isBitsType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-141"></span><span id="isFloatType"><span class="annot"><span class="annottext">isFloatType :: CmmType -&gt; Bool
</span><a href="GHC.Cmm.Type.html#isFloatType"><span class="hs-identifier hs-var hs-var">isFloatType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmCat
</span><a href="GHC.Cmm.Type.html#FloatCat"><span class="hs-identifier hs-var">FloatCat</span></a></span><span>    </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-142"></span><span class="annot"><a href="GHC.Cmm.Type.html#isFloatType"><span class="hs-identifier hs-var">isFloatType</span></a></span><span> </span><span id="local-6989586621681539079"><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621681539079"><span class="hs-identifier hs-var">_other</span></a></span></span><span>                  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-143"></span><span>
</span><span id="line-144"></span><span id="isGcPtrType"><span class="annot"><span class="annottext">isGcPtrType :: CmmType -&gt; Bool
</span><a href="GHC.Cmm.Type.html#isGcPtrType"><span class="hs-identifier hs-var hs-var">isGcPtrType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmCat
</span><a href="GHC.Cmm.Type.html#GcPtrCat"><span class="hs-identifier hs-var">GcPtrCat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-145"></span><span class="annot"><a href="GHC.Cmm.Type.html#isGcPtrType"><span class="hs-identifier hs-var">isGcPtrType</span></a></span><span> </span><span id="local-6989586621681539080"><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621681539080"><span class="hs-identifier hs-var">_other</span></a></span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-146"></span><span>
</span><span id="line-147"></span><span id="isBitsType"><span class="annot"><span class="annottext">isBitsType :: CmmType -&gt; Bool
</span><a href="GHC.Cmm.Type.html#isBitsType"><span class="hs-identifier hs-var hs-var">isBitsType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmCat
</span><a href="GHC.Cmm.Type.html#BitsCat"><span class="hs-identifier hs-var">BitsCat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-148"></span><span class="annot"><a href="GHC.Cmm.Type.html#isBitsType"><span class="hs-identifier hs-var">isBitsType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><span class="hs-identifier">_</span></span><span>                   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span class="annot"><a href="GHC.Cmm.Type.html#isWordAny"><span class="hs-identifier hs-type">isWordAny</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#isWord32"><span class="hs-identifier hs-type">isWord32</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#isWord64"><span class="hs-identifier hs-type">isWord64</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-151"></span><span>  </span><span class="annot"><a href="GHC.Cmm.Type.html#isFloat32"><span class="hs-identifier hs-type">isFloat32</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#isFloat64"><span class="hs-identifier hs-type">isFloat64</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-152"></span><span class="hs-comment">-- isWord64 is true of 64-bit non-floats (both gc-ptrs and otherwise)</span><span>
</span><span id="line-153"></span><span class="hs-comment">-- isFloat32 and 64 are obvious</span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span id="isWordAny"><span class="annot"><span class="annottext">isWordAny :: CmmType -&gt; Bool
</span><a href="GHC.Cmm.Type.html#isWordAny"><span class="hs-identifier hs-var hs-var">isWordAny</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmCat
</span><a href="GHC.Cmm.Type.html#BitsCat"><span class="hs-identifier hs-var">BitsCat</span></a></span><span>  </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-156"></span><span class="annot"><a href="GHC.Cmm.Type.html#isWordAny"><span class="hs-identifier hs-var">isWordAny</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmCat
</span><a href="GHC.Cmm.Type.html#GcPtrCat"><span class="hs-identifier hs-var">GcPtrCat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-157"></span><span class="annot"><a href="GHC.Cmm.Type.html#isWordAny"><span class="hs-identifier hs-var">isWordAny</span></a></span><span> </span><span id="local-6989586621681539081"><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621681539081"><span class="hs-identifier hs-var">_other</span></a></span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span id="isWord64"><span class="annot"><span class="annottext">isWord64 :: CmmType -&gt; Bool
</span><a href="GHC.Cmm.Type.html#isWord64"><span class="hs-identifier hs-var hs-var">isWord64</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmCat
</span><a href="GHC.Cmm.Type.html#BitsCat"><span class="hs-identifier hs-var">BitsCat</span></a></span><span>  </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-160"></span><span class="annot"><a href="GHC.Cmm.Type.html#isWord64"><span class="hs-identifier hs-var">isWord64</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmCat
</span><a href="GHC.Cmm.Type.html#GcPtrCat"><span class="hs-identifier hs-var">GcPtrCat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-161"></span><span class="annot"><a href="GHC.Cmm.Type.html#isWord64"><span class="hs-identifier hs-var">isWord64</span></a></span><span> </span><span id="local-6989586621681539082"><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621681539082"><span class="hs-identifier hs-var">_other</span></a></span></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-162"></span><span>
</span><span id="line-163"></span><span id="isWord32"><span class="annot"><span class="annottext">isWord32 :: CmmType -&gt; Bool
</span><a href="GHC.Cmm.Type.html#isWord32"><span class="hs-identifier hs-var hs-var">isWord32</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmCat
</span><a href="GHC.Cmm.Type.html#BitsCat"><span class="hs-identifier hs-var">BitsCat</span></a></span><span>  </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-164"></span><span class="annot"><a href="GHC.Cmm.Type.html#isWord32"><span class="hs-identifier hs-var">isWord32</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmCat
</span><a href="GHC.Cmm.Type.html#GcPtrCat"><span class="hs-identifier hs-var">GcPtrCat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-165"></span><span class="annot"><a href="GHC.Cmm.Type.html#isWord32"><span class="hs-identifier hs-var">isWord32</span></a></span><span> </span><span id="local-6989586621681539083"><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621681539083"><span class="hs-identifier hs-var">_other</span></a></span></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-166"></span><span>
</span><span id="line-167"></span><span id="isFloat32"><span class="annot"><span class="annottext">isFloat32 :: CmmType -&gt; Bool
</span><a href="GHC.Cmm.Type.html#isFloat32"><span class="hs-identifier hs-var hs-var">isFloat32</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmCat
</span><a href="GHC.Cmm.Type.html#FloatCat"><span class="hs-identifier hs-var">FloatCat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-168"></span><span class="annot"><a href="GHC.Cmm.Type.html#isFloat32"><span class="hs-identifier hs-var">isFloat32</span></a></span><span> </span><span id="local-6989586621681539084"><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621681539084"><span class="hs-identifier hs-var">_other</span></a></span></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span id="isFloat64"><span class="annot"><span class="annottext">isFloat64 :: CmmType -&gt; Bool
</span><a href="GHC.Cmm.Type.html#isFloat64"><span class="hs-identifier hs-var hs-var">isFloat64</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmCat
</span><a href="GHC.Cmm.Type.html#FloatCat"><span class="hs-identifier hs-var">FloatCat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-171"></span><span class="annot"><a href="GHC.Cmm.Type.html#isFloat64"><span class="hs-identifier hs-var">isFloat64</span></a></span><span> </span><span id="local-6989586621681539085"><span class="annot"><span class="annottext">CmmType
</span><a href="#local-6989586621681539085"><span class="hs-identifier hs-var">_other</span></a></span></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-172"></span><span>
</span><span id="line-173"></span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-174"></span><span class="hs-comment">--              Width</span><span>
</span><span id="line-175"></span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-176"></span><span>
</span><span id="line-177"></span><span class="hs-keyword">data</span><span> </span><span id="Width"><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-var">Width</span></a></span></span><span>
</span><span id="line-178"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="W8"><span class="annot"><a href="GHC.Cmm.Type.html#W8"><span class="hs-identifier hs-var">W8</span></a></span></span><span>
</span><span id="line-179"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="W16"><span class="annot"><a href="GHC.Cmm.Type.html#W16"><span class="hs-identifier hs-var">W16</span></a></span></span><span>
</span><span id="line-180"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="W32"><span class="annot"><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span></span><span>
</span><span id="line-181"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="W64"><span class="annot"><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span></span><span>
</span><span id="line-182"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="W128"><span class="annot"><a href="GHC.Cmm.Type.html#W128"><span class="hs-identifier hs-var">W128</span></a></span></span><span>
</span><span id="line-183"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="W256"><span class="annot"><a href="GHC.Cmm.Type.html#W256"><span class="hs-identifier hs-var">W256</span></a></span></span><span>
</span><span id="line-184"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="W512"><span class="annot"><a href="GHC.Cmm.Type.html#W512"><span class="hs-identifier hs-var">W512</span></a></span></span><span>
</span><span id="line-185"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681539087"><span id="local-6989586621681539089"><span class="annot"><span class="annottext">Width -&gt; Width -&gt; Bool
(Width -&gt; Width -&gt; Bool) -&gt; (Width -&gt; Width -&gt; Bool) -&gt; Eq Width
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: Width -&gt; Width -&gt; Bool
== :: Width -&gt; Width -&gt; Bool
$c/= :: Width -&gt; Width -&gt; Bool
/= :: Width -&gt; Width -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681539094"><span id="local-6989586621681539096"><span id="local-6989586621681539098"><span id="local-6989586621681539102"><span id="local-6989586621681539105"><span id="local-6989586621681539108"><span id="local-6989586621681539111"><span class="annot"><span class="annottext">Eq Width
Eq Width =&gt;
(Width -&gt; Width -&gt; Ordering)
-&gt; (Width -&gt; Width -&gt; Bool)
-&gt; (Width -&gt; Width -&gt; Bool)
-&gt; (Width -&gt; Width -&gt; Bool)
-&gt; (Width -&gt; Width -&gt; Bool)
-&gt; (Width -&gt; Width -&gt; Width)
-&gt; (Width -&gt; Width -&gt; Width)
-&gt; Ord Width
Width -&gt; Width -&gt; Bool
Width -&gt; Width -&gt; Ordering
Width -&gt; Width -&gt; Width
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: Width -&gt; Width -&gt; Ordering
compare :: Width -&gt; Width -&gt; Ordering
$c&lt; :: Width -&gt; Width -&gt; Bool
&lt; :: Width -&gt; Width -&gt; Bool
$c&lt;= :: Width -&gt; Width -&gt; Bool
&lt;= :: Width -&gt; Width -&gt; Bool
$c&gt; :: Width -&gt; Width -&gt; Bool
&gt; :: Width -&gt; Width -&gt; Bool
$c&gt;= :: Width -&gt; Width -&gt; Bool
&gt;= :: Width -&gt; Width -&gt; Bool
$cmax :: Width -&gt; Width -&gt; Width
max :: Width -&gt; Width -&gt; Width
$cmin :: Width -&gt; Width -&gt; Width
min :: Width -&gt; Width -&gt; Width
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681539115"><span id="local-6989586621681539117"><span id="local-6989586621681539120"><span class="annot"><span class="annottext">Int -&gt; Width -&gt; ShowS
[Width] -&gt; ShowS
Width -&gt; String
(Int -&gt; Width -&gt; ShowS)
-&gt; (Width -&gt; String) -&gt; ([Width] -&gt; ShowS) -&gt; Show Width
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; Width -&gt; ShowS
showsPrec :: Int -&gt; Width -&gt; ShowS
$cshow :: Width -&gt; String
show :: Width -&gt; String
$cshowList :: [Width] -&gt; ShowS
showList :: [Width] -&gt; ShowS
</span><a href="../../base-4.18.2.1/src/GHC.Show.html#Show/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-186"></span><span>
</span><span id="line-187"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-188"></span><span>   </span><span id="local-6989586621681539126"><span class="annot"><span class="annottext">ppr :: Width -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span id="local-6989586621681539127"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681539127"><span class="hs-identifier hs-var">rep</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../base-4.18.2.1/src/GHC.Show.html#show/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681539127"><span class="hs-identifier hs-var">rep</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-189"></span><span>
</span><span id="line-190"></span><span class="hs-comment">-------- Common Widths  ------------</span><span>
</span><span id="line-191"></span><span>
</span><span id="line-192"></span><span class="annot"><span class="hs-comment">-- | The width of the current platform's word size.</span></span><span>
</span><span id="line-193"></span><span class="annot"><a href="GHC.Cmm.Type.html#wordWidth"><span class="hs-identifier hs-type">wordWidth</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Platform.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span>
</span><span id="line-194"></span><span id="wordWidth"><span class="annot"><span class="annottext">wordWidth :: Platform -&gt; Width
</span><a href="GHC.Cmm.Type.html#wordWidth"><span class="hs-identifier hs-var hs-var">wordWidth</span></a></span></span><span> </span><span id="local-6989586621681539129"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681539129"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; PlatformWordSize
</span><a href="GHC.Platform.html#platformWordSize"><span class="hs-identifier hs-var">platformWordSize</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681539129"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-195"></span><span> </span><span class="annot"><span class="annottext">PlatformWordSize
</span><a href="GHC.Platform.html#PW4"><span class="hs-identifier hs-var">PW4</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span>
</span><span id="line-196"></span><span> </span><span class="annot"><span class="annottext">PlatformWordSize
</span><a href="GHC.Platform.html#PW8"><span class="hs-identifier hs-var">PW8</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span>
</span><span id="line-197"></span><span>
</span><span id="line-198"></span><span class="annot"><span class="hs-comment">-- | The width of the current platform's half-word size.</span></span><span>
</span><span id="line-199"></span><span class="annot"><a href="GHC.Cmm.Type.html#halfWordWidth"><span class="hs-identifier hs-type">halfWordWidth</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Platform.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span>
</span><span id="line-200"></span><span id="halfWordWidth"><span class="annot"><span class="annottext">halfWordWidth :: Platform -&gt; Width
</span><a href="GHC.Cmm.Type.html#halfWordWidth"><span class="hs-identifier hs-var hs-var">halfWordWidth</span></a></span></span><span> </span><span id="local-6989586621681539133"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681539133"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; PlatformWordSize
</span><a href="GHC.Platform.html#platformWordSize"><span class="hs-identifier hs-var">platformWordSize</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681539133"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-201"></span><span> </span><span class="annot"><span class="annottext">PlatformWordSize
</span><a href="GHC.Platform.html#PW4"><span class="hs-identifier hs-var">PW4</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W16"><span class="hs-identifier hs-var">W16</span></a></span><span>
</span><span id="line-202"></span><span> </span><span class="annot"><span class="annottext">PlatformWordSize
</span><a href="GHC.Platform.html#PW8"><span class="hs-identifier hs-var">PW8</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span>
</span><span id="line-203"></span><span>
</span><span id="line-204"></span><span class="annot"><span class="hs-comment">-- | A bit-mask for the lower half-word of current platform.</span></span><span>
</span><span id="line-205"></span><span class="annot"><a href="GHC.Cmm.Type.html#halfWordMask"><span class="hs-identifier hs-type">halfWordMask</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Platform.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span>
</span><span id="line-206"></span><span id="halfWordMask"><span class="annot"><span class="annottext">halfWordMask :: Platform -&gt; Integer
</span><a href="GHC.Cmm.Type.html#halfWordMask"><span class="hs-identifier hs-var hs-var">halfWordMask</span></a></span></span><span> </span><span id="local-6989586621681539134"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681539134"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; PlatformWordSize
</span><a href="GHC.Platform.html#platformWordSize"><span class="hs-identifier hs-var">platformWordSize</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681539134"><span class="hs-identifier hs-var">platform</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-207"></span><span> </span><span class="annot"><span class="annottext">PlatformWordSize
</span><a href="GHC.Platform.html#PW4"><span class="hs-identifier hs-var">PW4</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0xFFFF</span></span><span>
</span><span id="line-208"></span><span> </span><span class="annot"><span class="annottext">PlatformWordSize
</span><a href="GHC.Platform.html#PW8"><span class="hs-identifier hs-var">PW8</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0xFFFFFFFF</span></span><span>
</span><span id="line-209"></span><span>
</span><span id="line-210"></span><span class="hs-comment">-- cIntRep is the Width for a C-language 'int'</span><span>
</span><span id="line-211"></span><span class="annot"><a href="GHC.Cmm.Type.html#cIntWidth"><span class="hs-identifier hs-type">cIntWidth</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Platform.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span>
</span><span id="line-212"></span><span id="cIntWidth"><span class="annot"><span class="annottext">cIntWidth :: Platform -&gt; Width
</span><a href="GHC.Cmm.Type.html#cIntWidth"><span class="hs-identifier hs-var hs-var">cIntWidth</span></a></span></span><span> </span><span id="local-6989586621681539135"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681539135"><span class="hs-identifier hs-var">platform</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">PlatformConstants -&gt; Int
</span><a href="GHC.Platform.Constants.html#pc_CINT_SIZE"><span class="hs-identifier hs-var">pc_CINT_SIZE</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Platform -&gt; PlatformConstants
</span><a href="GHC.Platform.html#platformConstants"><span class="hs-identifier hs-var">platformConstants</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681539135"><span class="hs-identifier hs-var">platform</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-213"></span><span>                   </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span>
</span><span id="line-214"></span><span>                   </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span>
</span><span id="line-215"></span><span>                   </span><span id="local-6989586621681539138"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681539138"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Width
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cIntWidth: Unknown cINT_SIZE: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../base-4.18.2.1/src/GHC.Show.html#show/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681539138"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span class="annot"><span class="hs-comment">-- | A width in bits.</span></span><span>
</span><span id="line-218"></span><span class="annot"><a href="GHC.Cmm.Type.html#widthInBits"><span class="hs-identifier hs-type">widthInBits</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-219"></span><span id="widthInBits"><span class="annot"><span class="annottext">widthInBits :: Width -&gt; Int
</span><a href="GHC.Cmm.Type.html#widthInBits"><span class="hs-identifier hs-var hs-var">widthInBits</span></a></span></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W8"><span class="hs-identifier hs-var">W8</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span>
</span><span id="line-220"></span><span class="annot"><a href="GHC.Cmm.Type.html#widthInBits"><span class="hs-identifier hs-var">widthInBits</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W16"><span class="hs-identifier hs-var">W16</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">16</span></span><span>
</span><span id="line-221"></span><span class="annot"><a href="GHC.Cmm.Type.html#widthInBits"><span class="hs-identifier hs-var">widthInBits</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">32</span></span><span>
</span><span id="line-222"></span><span class="annot"><a href="GHC.Cmm.Type.html#widthInBits"><span class="hs-identifier hs-var">widthInBits</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">64</span></span><span>
</span><span id="line-223"></span><span class="annot"><a href="GHC.Cmm.Type.html#widthInBits"><span class="hs-identifier hs-var">widthInBits</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W128"><span class="hs-identifier hs-var">W128</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">128</span></span><span>
</span><span id="line-224"></span><span class="annot"><a href="GHC.Cmm.Type.html#widthInBits"><span class="hs-identifier hs-var">widthInBits</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W256"><span class="hs-identifier hs-var">W256</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">256</span></span><span>
</span><span id="line-225"></span><span class="annot"><a href="GHC.Cmm.Type.html#widthInBits"><span class="hs-identifier hs-var">widthInBits</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W512"><span class="hs-identifier hs-var">W512</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">512</span></span><span>
</span><span id="line-226"></span><span>
</span><span id="line-227"></span><span class="hs-comment">-- | A width in bytes.</span><span>
</span><span id="line-228"></span><span class="hs-comment">--</span><span>
</span><span id="line-229"></span><span class="hs-comment">-- &gt; widthFromBytes (widthInBytes w) === w</span><span>
</span><span id="line-230"></span><span class="annot"><a href="GHC.Cmm.Type.html#widthInBytes"><span class="hs-identifier hs-type">widthInBytes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-231"></span><span id="widthInBytes"><span class="annot"><span class="annottext">widthInBytes :: Width -&gt; Int
</span><a href="GHC.Cmm.Type.html#widthInBytes"><span class="hs-identifier hs-var hs-var">widthInBytes</span></a></span></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W8"><span class="hs-identifier hs-var">W8</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-232"></span><span class="annot"><a href="GHC.Cmm.Type.html#widthInBytes"><span class="hs-identifier hs-var">widthInBytes</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W16"><span class="hs-identifier hs-var">W16</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span>
</span><span id="line-233"></span><span class="annot"><a href="GHC.Cmm.Type.html#widthInBytes"><span class="hs-identifier hs-var">widthInBytes</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span>
</span><span id="line-234"></span><span class="annot"><a href="GHC.Cmm.Type.html#widthInBytes"><span class="hs-identifier hs-var">widthInBytes</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span>
</span><span id="line-235"></span><span class="annot"><a href="GHC.Cmm.Type.html#widthInBytes"><span class="hs-identifier hs-var">widthInBytes</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W128"><span class="hs-identifier hs-var">W128</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">16</span></span><span>
</span><span id="line-236"></span><span class="annot"><a href="GHC.Cmm.Type.html#widthInBytes"><span class="hs-identifier hs-var">widthInBytes</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W256"><span class="hs-identifier hs-var">W256</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">32</span></span><span>
</span><span id="line-237"></span><span class="annot"><a href="GHC.Cmm.Type.html#widthInBytes"><span class="hs-identifier hs-var">widthInBytes</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W512"><span class="hs-identifier hs-var">W512</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">64</span></span><span>
</span><span id="line-238"></span><span>
</span><span id="line-239"></span><span>
</span><span id="line-240"></span><span class="annot"><span class="hs-comment">-- | *Partial* A width from the number of bytes.</span></span><span>
</span><span id="line-241"></span><span class="annot"><a href="GHC.Cmm.Type.html#widthFromBytes"><span class="hs-identifier hs-type">widthFromBytes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span>
</span><span id="line-242"></span><span id="widthFromBytes"><span class="annot"><span class="annottext">widthFromBytes :: Int -&gt; Width
</span><a href="GHC.Cmm.Type.html#widthFromBytes"><span class="hs-identifier hs-var hs-var">widthFromBytes</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W8"><span class="hs-identifier hs-var">W8</span></a></span><span>
</span><span id="line-243"></span><span class="annot"><a href="GHC.Cmm.Type.html#widthFromBytes"><span class="hs-identifier hs-var">widthFromBytes</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W16"><span class="hs-identifier hs-var">W16</span></a></span><span>
</span><span id="line-244"></span><span class="annot"><a href="GHC.Cmm.Type.html#widthFromBytes"><span class="hs-identifier hs-var">widthFromBytes</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span>
</span><span id="line-245"></span><span class="annot"><a href="GHC.Cmm.Type.html#widthFromBytes"><span class="hs-identifier hs-var">widthFromBytes</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span>
</span><span id="line-246"></span><span class="annot"><a href="GHC.Cmm.Type.html#widthFromBytes"><span class="hs-identifier hs-var">widthFromBytes</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">16</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W128"><span class="hs-identifier hs-var">W128</span></a></span><span>
</span><span id="line-247"></span><span class="annot"><a href="GHC.Cmm.Type.html#widthFromBytes"><span class="hs-identifier hs-var">widthFromBytes</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">32</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W256"><span class="hs-identifier hs-var">W256</span></a></span><span>
</span><span id="line-248"></span><span class="annot"><a href="GHC.Cmm.Type.html#widthFromBytes"><span class="hs-identifier hs-var">widthFromBytes</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">64</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W512"><span class="hs-identifier hs-var">W512</span></a></span><span>
</span><span id="line-249"></span><span>
</span><span id="line-250"></span><span class="annot"><a href="GHC.Cmm.Type.html#widthFromBytes"><span class="hs-identifier hs-var">widthFromBytes</span></a></span><span> </span><span id="local-6989586621681539140"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681539140"><span class="hs-identifier hs-var">n</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc -&gt; Width
forall a. HasCallStack =&gt; String -&gt; SDoc -&gt; a
</span><a href="GHC.Utils.Panic.html#pprPanic"><span class="hs-identifier hs-var">pprPanic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;no width for given number of bytes&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681539140"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span><span class="annot"><span class="hs-comment">-- | log_2 of the width in bytes, useful for generating shifts.</span></span><span>
</span><span id="line-253"></span><span class="annot"><a href="GHC.Cmm.Type.html#widthInLog"><span class="hs-identifier hs-type">widthInLog</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-254"></span><span id="widthInLog"><span class="annot"><span class="annottext">widthInLog :: Width -&gt; Int
</span><a href="GHC.Cmm.Type.html#widthInLog"><span class="hs-identifier hs-var hs-var">widthInLog</span></a></span></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W8"><span class="hs-identifier hs-var">W8</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-255"></span><span class="annot"><a href="GHC.Cmm.Type.html#widthInLog"><span class="hs-identifier hs-var">widthInLog</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W16"><span class="hs-identifier hs-var">W16</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-256"></span><span class="annot"><a href="GHC.Cmm.Type.html#widthInLog"><span class="hs-identifier hs-var">widthInLog</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span>
</span><span id="line-257"></span><span class="annot"><a href="GHC.Cmm.Type.html#widthInLog"><span class="hs-identifier hs-var">widthInLog</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span>
</span><span id="line-258"></span><span class="annot"><a href="GHC.Cmm.Type.html#widthInLog"><span class="hs-identifier hs-var">widthInLog</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W128"><span class="hs-identifier hs-var">W128</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span>
</span><span id="line-259"></span><span class="annot"><a href="GHC.Cmm.Type.html#widthInLog"><span class="hs-identifier hs-var">widthInLog</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W256"><span class="hs-identifier hs-var">W256</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">5</span></span><span>
</span><span id="line-260"></span><span class="annot"><a href="GHC.Cmm.Type.html#widthInLog"><span class="hs-identifier hs-var">widthInLog</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W512"><span class="hs-identifier hs-var">W512</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">6</span></span><span>
</span><span id="line-261"></span><span>
</span><span id="line-262"></span><span>
</span><span id="line-263"></span><span class="hs-comment">-- widening / narrowing</span><span>
</span><span id="line-264"></span><span>
</span><span id="line-265"></span><span class="hs-comment">-- | Narrow a signed or unsigned value to the given width. The result will</span><span>
</span><span id="line-266"></span><span class="hs-comment">-- reside in @[0, +2^width)@.</span><span>
</span><span id="line-267"></span><span class="hs-comment">--</span><span>
</span><span id="line-268"></span><span class="hs-comment">-- &gt;&gt;&gt; narrowU W8 256    == 256</span><span>
</span><span id="line-269"></span><span class="hs-comment">-- &gt;&gt;&gt; narrowU W8 255    == 255</span><span>
</span><span id="line-270"></span><span class="hs-comment">-- &gt;&gt;&gt; narrowU W8 128    == 128</span><span>
</span><span id="line-271"></span><span class="hs-comment">-- &gt;&gt;&gt; narrowU W8 127    == 127</span><span>
</span><span id="line-272"></span><span class="hs-comment">-- &gt;&gt;&gt; narrowU W8 0      == 0</span><span>
</span><span id="line-273"></span><span class="hs-comment">-- &gt;&gt;&gt; narrowU W8 (-127) == 129</span><span>
</span><span id="line-274"></span><span class="hs-comment">-- &gt;&gt;&gt; narrowU W8 (-128) == 128</span><span>
</span><span id="line-275"></span><span class="hs-comment">-- &gt;&gt;&gt; narrowU W8 (-129) == 127</span><span>
</span><span id="line-276"></span><span class="hs-comment">-- &gt;&gt;&gt; narrowU W8 (-255) == 1</span><span>
</span><span id="line-277"></span><span class="hs-comment">-- &gt;&gt;&gt; narrowU W8 (-256) == 0</span><span>
</span><span id="line-278"></span><span class="hs-comment">--</span><span>
</span><span id="line-279"></span><span class="annot"><a href="GHC.Cmm.Type.html#narrowU"><span class="hs-identifier hs-type">narrowU</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span>
</span><span id="line-280"></span><span id="narrowU"><span class="annot"><span class="annottext">narrowU :: Width -&gt; Integer -&gt; Integer
</span><a href="GHC.Cmm.Type.html#narrowU"><span class="hs-identifier hs-var hs-var">narrowU</span></a></span></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W8"><span class="hs-identifier hs-var">W8</span></a></span><span>  </span><span id="local-6989586621681539142"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681539142"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word8 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Real.html#fromIntegral/GHC.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Word8
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Real.html#fromIntegral/GHC.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681539142"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Word.html#Word8/GHC.Word.html#Word8"><span class="hs-identifier hs-type">Word8</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-281"></span><span class="annot"><a href="GHC.Cmm.Type.html#narrowU"><span class="hs-identifier hs-var">narrowU</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W16"><span class="hs-identifier hs-var">W16</span></a></span><span> </span><span id="local-6989586621681539143"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681539143"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word16 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Real.html#fromIntegral/GHC.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Word16
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Real.html#fromIntegral/GHC.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681539143"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Word.html#Word16/GHC.Word.html#Word16"><span class="hs-identifier hs-type">Word16</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-282"></span><span class="annot"><a href="GHC.Cmm.Type.html#narrowU"><span class="hs-identifier hs-var">narrowU</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span id="local-6989586621681539144"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681539144"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Real.html#fromIntegral/GHC.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Word32
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Real.html#fromIntegral/GHC.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681539144"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Word.html#Word32/GHC.Word.html#Word32"><span class="hs-identifier hs-type">Word32</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-283"></span><span class="annot"><a href="GHC.Cmm.Type.html#narrowU"><span class="hs-identifier hs-var">narrowU</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span> </span><span id="local-6989586621681539145"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681539145"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Real.html#fromIntegral/GHC.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Word64
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Real.html#fromIntegral/GHC.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681539145"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Word.html#Word64/GHC.Word.html#Word64"><span class="hs-identifier hs-type">Word64</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-284"></span><span class="annot"><a href="GHC.Cmm.Type.html#narrowU"><span class="hs-identifier hs-var">narrowU</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Integer
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;narrowTo&quot;</span></span><span>
</span><span id="line-285"></span><span>
</span><span id="line-286"></span><span class="hs-comment">-- | Narrow a signed value to the given width. The result will reside</span><span>
</span><span id="line-287"></span><span class="hs-comment">-- in @[-2^(width-1), +2^(width-1))@.</span><span>
</span><span id="line-288"></span><span class="hs-comment">--</span><span>
</span><span id="line-289"></span><span class="hs-comment">-- &gt;&gt;&gt; narrowS W8 256    == 0</span><span>
</span><span id="line-290"></span><span class="hs-comment">-- &gt;&gt;&gt; narrowS W8 255    == -1</span><span>
</span><span id="line-291"></span><span class="hs-comment">-- &gt;&gt;&gt; narrowS W8 128    == -128</span><span>
</span><span id="line-292"></span><span class="hs-comment">-- &gt;&gt;&gt; narrowS W8 127    == 127</span><span>
</span><span id="line-293"></span><span class="hs-comment">-- &gt;&gt;&gt; narrowS W8 0      == 0</span><span>
</span><span id="line-294"></span><span class="hs-comment">-- &gt;&gt;&gt; narrowS W8 (-127) == -127</span><span>
</span><span id="line-295"></span><span class="hs-comment">-- &gt;&gt;&gt; narrowS W8 (-128) == -128</span><span>
</span><span id="line-296"></span><span class="hs-comment">-- &gt;&gt;&gt; narrowS W8 (-129) == 127</span><span>
</span><span id="line-297"></span><span class="hs-comment">-- &gt;&gt;&gt; narrowS W8 (-255) == 1</span><span>
</span><span id="line-298"></span><span class="hs-comment">-- &gt;&gt;&gt; narrowS W8 (-256) == 0</span><span>
</span><span id="line-299"></span><span class="hs-comment">--</span><span>
</span><span id="line-300"></span><span class="annot"><a href="GHC.Cmm.Type.html#narrowS"><span class="hs-identifier hs-type">narrowS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span>
</span><span id="line-301"></span><span id="narrowS"><span class="annot"><span class="annottext">narrowS :: Width -&gt; Integer -&gt; Integer
</span><a href="GHC.Cmm.Type.html#narrowS"><span class="hs-identifier hs-var hs-var">narrowS</span></a></span></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W8"><span class="hs-identifier hs-var">W8</span></a></span><span>  </span><span id="local-6989586621681539146"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681539146"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int8 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Real.html#fromIntegral/GHC.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Int8
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Real.html#fromIntegral/GHC.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681539146"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Int.html#Int8/GHC.Int.html#Int8"><span class="hs-identifier hs-type">Int8</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-302"></span><span class="annot"><a href="GHC.Cmm.Type.html#narrowS"><span class="hs-identifier hs-var">narrowS</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W16"><span class="hs-identifier hs-var">W16</span></a></span><span> </span><span id="local-6989586621681539147"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681539147"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int16 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Real.html#fromIntegral/GHC.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Int16
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Real.html#fromIntegral/GHC.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681539147"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Int.html#Int16/GHC.Int.html#Int16"><span class="hs-identifier hs-type">Int16</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-303"></span><span class="annot"><a href="GHC.Cmm.Type.html#narrowS"><span class="hs-identifier hs-var">narrowS</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W32"><span class="hs-identifier hs-var">W32</span></a></span><span> </span><span id="local-6989586621681539148"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681539148"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int32 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Real.html#fromIntegral/GHC.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Int32
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Real.html#fromIntegral/GHC.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681539148"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Int.html#Int32/GHC.Int.html#Int32"><span class="hs-identifier hs-type">Int32</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-304"></span><span class="annot"><a href="GHC.Cmm.Type.html#narrowS"><span class="hs-identifier hs-var">narrowS</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="GHC.Cmm.Type.html#W64"><span class="hs-identifier hs-var">W64</span></a></span><span> </span><span id="local-6989586621681539149"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681539149"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Real.html#fromIntegral/GHC.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Int64
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../../base-4.18.2.1/src/GHC.Real.html#fromIntegral/GHC.Real.html#fromIntegral"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681539149"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Int.html#Int64/GHC.Int.html#Int64"><span class="hs-identifier hs-type">Int64</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-305"></span><span class="annot"><a href="GHC.Cmm.Type.html#narrowS"><span class="hs-identifier hs-var">narrowS</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Integer
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;narrowTo&quot;</span></span><span>
</span><span id="line-306"></span><span>
</span><span id="line-307"></span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-308"></span><span class="hs-comment">--              SIMD</span><span>
</span><span id="line-309"></span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><span id="line-310"></span><span>
</span><span id="line-311"></span><span class="hs-keyword">type</span><span> </span><span id="Length"><span class="annot"><a href="GHC.Cmm.Type.html#Length"><span class="hs-identifier hs-var">Length</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-312"></span><span>
</span><span id="line-313"></span><span class="annot"><a href="GHC.Cmm.Type.html#vec"><span class="hs-identifier hs-type">vec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Length"><span class="hs-identifier hs-type">Length</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span>
</span><span id="line-314"></span><span id="vec"><span class="annot"><span class="annottext">vec :: Int -&gt; CmmType -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#vec"><span class="hs-identifier hs-var hs-var">vec</span></a></span></span><span> </span><span id="local-6989586621681539150"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681539150"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span id="local-6989586621681539151"><span class="annot"><span class="annottext">CmmCat
</span><a href="#local-6989586621681539151"><span class="hs-identifier hs-var">cat</span></a></span></span><span> </span><span id="local-6989586621681539152"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681539152"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmCat -&gt; Width -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-var">CmmType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; CmmCat -&gt; CmmCat
</span><a href="GHC.Cmm.Type.html#VecCat"><span class="hs-identifier hs-var">VecCat</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681539150"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">CmmCat
</span><a href="#local-6989586621681539151"><span class="hs-identifier hs-var">cat</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681539153"><span class="hs-identifier hs-var">vecw</span></a></span><span>
</span><span id="line-315"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-316"></span><span>    </span><span class="annot"><a href="#local-6989586621681539153"><span class="hs-identifier hs-type">vecw</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span>
</span><span id="line-317"></span><span>    </span><span id="local-6989586621681539153"><span class="annot"><span class="annottext">vecw :: Width
</span><a href="#local-6989586621681539153"><span class="hs-identifier hs-var hs-var">vecw</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Width
</span><a href="GHC.Cmm.Type.html#widthFromBytes"><span class="hs-identifier hs-var">widthFromBytes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681539150"><span class="hs-identifier hs-var">l</span></a></span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#%2A/GHC.Num.html#%2A"><span class="hs-operator hs-var">*</span></a></span><span class="annot"><span class="annottext">Width -&gt; Int
</span><a href="GHC.Cmm.Type.html#widthInBytes"><span class="hs-identifier hs-var">widthInBytes</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681539152"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-318"></span><span>
</span><span id="line-319"></span><span class="annot"><a href="GHC.Cmm.Type.html#vec2"><span class="hs-identifier hs-type">vec2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#vec4"><span class="hs-identifier hs-type">vec4</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#vec8"><span class="hs-identifier hs-type">vec8</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#vec16"><span class="hs-identifier hs-type">vec16</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span>
</span><span id="line-320"></span><span id="vec2"><span class="annot"><span class="annottext">vec2 :: CmmType -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#vec2"><span class="hs-identifier hs-var hs-var">vec2</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; CmmType -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#vec"><span class="hs-identifier hs-var">vec</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span>
</span><span id="line-321"></span><span id="vec4"><span class="annot"><span class="annottext">vec4 :: CmmType -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#vec4"><span class="hs-identifier hs-var hs-var">vec4</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; CmmType -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#vec"><span class="hs-identifier hs-var">vec</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span>
</span><span id="line-322"></span><span id="vec8"><span class="annot"><span class="annottext">vec8 :: CmmType -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#vec8"><span class="hs-identifier hs-var hs-var">vec8</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; CmmType -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#vec"><span class="hs-identifier hs-var">vec</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span>
</span><span id="line-323"></span><span id="vec16"><span class="annot"><span class="annottext">vec16 :: CmmType -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#vec16"><span class="hs-identifier hs-var hs-var">vec16</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; CmmType -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#vec"><span class="hs-identifier hs-var">vec</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">16</span></span><span>
</span><span id="line-324"></span><span>
</span><span id="line-325"></span><span class="annot"><a href="GHC.Cmm.Type.html#vec2f64"><span class="hs-identifier hs-type">vec2f64</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#vec2b64"><span class="hs-identifier hs-type">vec2b64</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#vec4f32"><span class="hs-identifier hs-type">vec4f32</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#vec4b32"><span class="hs-identifier hs-type">vec4b32</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#vec8b16"><span class="hs-identifier hs-type">vec8b16</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#vec16b8"><span class="hs-identifier hs-type">vec16b8</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span>
</span><span id="line-326"></span><span id="vec2f64"><span class="annot"><span class="annottext">vec2f64 :: CmmType
</span><a href="GHC.Cmm.Type.html#vec2f64"><span class="hs-identifier hs-var hs-var">vec2f64</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; CmmType -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#vec"><span class="hs-identifier hs-var">vec</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="GHC.Cmm.Type.html#f64"><span class="hs-identifier hs-var">f64</span></a></span><span>
</span><span id="line-327"></span><span id="vec2b64"><span class="annot"><span class="annottext">vec2b64 :: CmmType
</span><a href="GHC.Cmm.Type.html#vec2b64"><span class="hs-identifier hs-var hs-var">vec2b64</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; CmmType -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#vec"><span class="hs-identifier hs-var">vec</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="GHC.Cmm.Type.html#b64"><span class="hs-identifier hs-var">b64</span></a></span><span>
</span><span id="line-328"></span><span id="vec4f32"><span class="annot"><span class="annottext">vec4f32 :: CmmType
</span><a href="GHC.Cmm.Type.html#vec4f32"><span class="hs-identifier hs-var hs-var">vec4f32</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; CmmType -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#vec"><span class="hs-identifier hs-var">vec</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="GHC.Cmm.Type.html#f32"><span class="hs-identifier hs-var">f32</span></a></span><span>
</span><span id="line-329"></span><span id="vec4b32"><span class="annot"><span class="annottext">vec4b32 :: CmmType
</span><a href="GHC.Cmm.Type.html#vec4b32"><span class="hs-identifier hs-var hs-var">vec4b32</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; CmmType -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#vec"><span class="hs-identifier hs-var">vec</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="GHC.Cmm.Type.html#b32"><span class="hs-identifier hs-var">b32</span></a></span><span>
</span><span id="line-330"></span><span id="vec8b16"><span class="annot"><span class="annottext">vec8b16 :: CmmType
</span><a href="GHC.Cmm.Type.html#vec8b16"><span class="hs-identifier hs-var hs-var">vec8b16</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; CmmType -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#vec"><span class="hs-identifier hs-var">vec</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="GHC.Cmm.Type.html#b16"><span class="hs-identifier hs-var">b16</span></a></span><span>
</span><span id="line-331"></span><span id="vec16b8"><span class="annot"><span class="annottext">vec16b8 :: CmmType
</span><a href="GHC.Cmm.Type.html#vec16b8"><span class="hs-identifier hs-var hs-var">vec16b8</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; CmmType -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#vec"><span class="hs-identifier hs-var">vec</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">16</span></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><a href="GHC.Cmm.Type.html#b8"><span class="hs-identifier hs-var">b8</span></a></span><span>
</span><span id="line-332"></span><span>
</span><span id="line-333"></span><span class="annot"><a href="GHC.Cmm.Type.html#cmmVec"><span class="hs-identifier hs-type">cmmVec</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span>
</span><span id="line-334"></span><span id="cmmVec"><span class="annot"><span class="annottext">cmmVec :: Int -&gt; CmmType -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#cmmVec"><span class="hs-identifier hs-var hs-var">cmmVec</span></a></span></span><span> </span><span id="local-6989586621681539155"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681539155"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span id="local-6989586621681539156"><span class="annot"><span class="annottext">CmmCat
</span><a href="#local-6989586621681539156"><span class="hs-identifier hs-var">cat</span></a></span></span><span> </span><span id="local-6989586621681539157"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681539157"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-335"></span><span>    </span><span class="annot"><span class="annottext">CmmCat -&gt; Width -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-var">CmmType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; CmmCat -&gt; CmmCat
</span><a href="GHC.Cmm.Type.html#VecCat"><span class="hs-identifier hs-var">VecCat</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681539155"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">CmmCat
</span><a href="#local-6989586621681539156"><span class="hs-identifier hs-var">cat</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Width
</span><a href="GHC.Cmm.Type.html#widthFromBytes"><span class="hs-identifier hs-var">widthFromBytes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681539155"><span class="hs-identifier hs-var">n</span></a></span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Num.html#%2A/GHC.Num.html#%2A"><span class="hs-operator hs-var">*</span></a></span><span class="annot"><span class="annottext">Width -&gt; Int
</span><a href="GHC.Cmm.Type.html#widthInBytes"><span class="hs-identifier hs-var">widthInBytes</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681539157"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-336"></span><span>
</span><span id="line-337"></span><span class="annot"><a href="GHC.Cmm.Type.html#vecLength"><span class="hs-identifier hs-type">vecLength</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Length"><span class="hs-identifier hs-type">Length</span></a></span><span>
</span><span id="line-338"></span><span id="vecLength"><span class="annot"><span class="annottext">vecLength :: CmmType -&gt; Int
</span><a href="GHC.Cmm.Type.html#vecLength"><span class="hs-identifier hs-var hs-var">vecLength</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Type.html#VecCat"><span class="hs-identifier hs-type">VecCat</span></a></span><span> </span><span id="local-6989586621681539158"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681539158"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">CmmCat
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681539158"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-339"></span><span class="annot"><a href="GHC.Cmm.Type.html#vecLength"><span class="hs-identifier hs-var">vecLength</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><span class="hs-identifier">_</span></span><span>                        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Int
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;vecLength: not a vector&quot;</span></span><span>
</span><span id="line-340"></span><span>
</span><span id="line-341"></span><span class="annot"><a href="GHC.Cmm.Type.html#vecElemType"><span class="hs-identifier hs-type">vecElemType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span>
</span><span id="line-342"></span><span id="vecElemType"><span class="annot"><span class="annottext">vecElemType :: CmmType -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#vecElemType"><span class="hs-identifier hs-var hs-var">vecElemType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Type.html#VecCat"><span class="hs-identifier hs-type">VecCat</span></a></span><span> </span><span id="local-6989586621681539159"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681539159"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681539160"><span class="annot"><span class="annottext">CmmCat
</span><a href="#local-6989586621681539160"><span class="hs-identifier hs-var">cat</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681539161"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681539161"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CmmCat -&gt; Width -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-var">CmmType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmCat
</span><a href="#local-6989586621681539160"><span class="hs-identifier hs-var">cat</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681539162"><span class="hs-identifier hs-var">scalw</span></a></span><span>
</span><span id="line-343"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-344"></span><span>    </span><span class="annot"><a href="#local-6989586621681539162"><span class="hs-identifier hs-type">scalw</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span>
</span><span id="line-345"></span><span>    </span><span id="local-6989586621681539162"><span class="annot"><span class="annottext">scalw :: Width
</span><a href="#local-6989586621681539162"><span class="hs-identifier hs-var hs-var">scalw</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Width
</span><a href="GHC.Cmm.Type.html#widthFromBytes"><span class="hs-identifier hs-var">widthFromBytes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; Int
</span><a href="GHC.Cmm.Type.html#widthInBytes"><span class="hs-identifier hs-var">widthInBytes</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681539161"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.2.1/src/GHC.Real.html#div/GHC.Real.html#div"><span class="hs-operator hs-var">`div`</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681539159"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-346"></span><span class="annot"><a href="GHC.Cmm.Type.html#vecElemType"><span class="hs-identifier hs-var">vecElemType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; CmmType
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;vecElemType: not a vector&quot;</span></span><span>
</span><span id="line-347"></span><span>
</span><span id="line-348"></span><span class="annot"><a href="GHC.Cmm.Type.html#isVecType"><span class="hs-identifier hs-type">isVecType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-349"></span><span id="isVecType"><span class="annot"><span class="annottext">isVecType :: CmmType -&gt; Bool
</span><a href="GHC.Cmm.Type.html#isVecType"><span class="hs-identifier hs-var hs-var">isVecType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Cmm.Type.html#VecCat"><span class="hs-identifier hs-type">VecCat</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-350"></span><span class="annot"><a href="GHC.Cmm.Type.html#isVecType"><span class="hs-identifier hs-var">isVecType</span></a></span><span> </span><span class="annot"><span class="annottext">CmmType
</span><span class="hs-identifier">_</span></span><span>                       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-351"></span><span>
</span><span id="line-352"></span><span class="hs-comment">-------------------------------------------------------------------------</span><span>
</span><span id="line-353"></span><span class="hs-comment">-- Hints</span><span>
</span><span id="line-354"></span><span>
</span><span id="line-355"></span><span class="hs-comment">-- Hints are extra type information we attach to the arguments and</span><span>
</span><span id="line-356"></span><span class="hs-comment">-- results of a foreign call, where more type information is sometimes</span><span>
</span><span id="line-357"></span><span class="hs-comment">-- needed by the ABI to make the correct kind of call.</span><span>
</span><span id="line-358"></span><span class="hs-comment">--</span><span>
</span><span id="line-359"></span><span class="hs-comment">-- See Note [Signed vs unsigned] for one case where this is used.</span><span>
</span><span id="line-360"></span><span>
</span><span id="line-361"></span><span class="hs-keyword">data</span><span> </span><span id="ForeignHint"><span class="annot"><a href="GHC.Cmm.Type.html#ForeignHint"><span class="hs-identifier hs-var">ForeignHint</span></a></span></span><span>
</span><span id="line-362"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="NoHint"><span class="annot"><a href="GHC.Cmm.Type.html#NoHint"><span class="hs-identifier hs-var">NoHint</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="AddrHint"><span class="annot"><a href="GHC.Cmm.Type.html#AddrHint"><span class="hs-identifier hs-var">AddrHint</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="SignedHint"><span class="annot"><a href="GHC.Cmm.Type.html#SignedHint"><span class="hs-identifier hs-var">SignedHint</span></a></span></span><span>
</span><span id="line-363"></span><span>  </span><span class="hs-keyword">deriving</span><span class="hs-special">(</span><span> </span><span id="local-6989586621681539168"><span id="local-6989586621681539170"><span class="annot"><span class="annottext">ForeignHint -&gt; ForeignHint -&gt; Bool
(ForeignHint -&gt; ForeignHint -&gt; Bool)
-&gt; (ForeignHint -&gt; ForeignHint -&gt; Bool) -&gt; Eq ForeignHint
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: ForeignHint -&gt; ForeignHint -&gt; Bool
== :: ForeignHint -&gt; ForeignHint -&gt; Bool
$c/= :: ForeignHint -&gt; ForeignHint -&gt; Bool
/= :: ForeignHint -&gt; ForeignHint -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-364"></span><span>        </span><span class="hs-comment">-- Used to give extra per-argument or per-result</span><span>
</span><span id="line-365"></span><span>        </span><span class="hs-comment">-- information needed by foreign calling conventions</span><span>
</span><span id="line-366"></span><span>
</span><span id="line-367"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#ForeignHint"><span class="hs-identifier hs-type">ForeignHint</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-368"></span><span>  </span><span id="local-6989586621681539179"><span class="annot"><span class="annottext">ppr :: ForeignHint -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="annot"><span class="annottext">ForeignHint
</span><a href="GHC.Cmm.Type.html#NoHint"><span class="hs-identifier hs-var">NoHint</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc
forall doc. IsOutput doc =&gt; doc
</span><a href="GHC.Utils.Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-369"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignHint
</span><a href="GHC.Cmm.Type.html#SignedHint"><span class="hs-identifier hs-var">SignedHint</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#quotes"><span class="hs-identifier hs-var">quotes</span></a></span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;signed&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-370"></span><span class="hs-comment">--  ppr AddrHint   = quotes(text &quot;address&quot;)</span><span>
</span><span id="line-371"></span><span class="hs-comment">-- Temp Jan08</span><span>
</span><span id="line-372"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignHint
</span><a href="GHC.Cmm.Type.html#AddrHint"><span class="hs-identifier hs-var">AddrHint</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;PtrHint&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-373"></span><span>
</span><span id="line-374"></span><span>
</span><span id="line-375"></span><span class="hs-comment">-------------------------------------------------------------------------</span><span>
</span><span id="line-376"></span><span>
</span><span id="line-377"></span><span class="hs-comment">-- These don't really belong here, but I don't know where is best to</span><span>
</span><span id="line-378"></span><span class="hs-comment">-- put them.</span><span>
</span><span id="line-379"></span><span>
</span><span id="line-380"></span><span class="annot"><a href="GHC.Cmm.Type.html#rEP_CostCentreStack_mem_alloc"><span class="hs-identifier hs-type">rEP_CostCentreStack_mem_alloc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Platform.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span>
</span><span id="line-381"></span><span id="rEP_CostCentreStack_mem_alloc"><span class="annot"><span class="annottext">rEP_CostCentreStack_mem_alloc :: Platform -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#rEP_CostCentreStack_mem_alloc"><span class="hs-identifier hs-var hs-var">rEP_CostCentreStack_mem_alloc</span></a></span></span><span> </span><span id="local-6989586621681539182"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681539182"><span class="hs-identifier hs-var">platform</span></a></span></span><span>
</span><span id="line-382"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#cmmBits"><span class="hs-identifier hs-var">cmmBits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Width
</span><a href="GHC.Cmm.Type.html#widthFromBytes"><span class="hs-identifier hs-var">widthFromBytes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PlatformConstants -&gt; Int
</span><a href="GHC.Platform.Constants.html#pc_REP_CostCentreStack_mem_alloc"><span class="hs-identifier hs-var">pc_REP_CostCentreStack_mem_alloc</span></a></span><span> </span><span class="annot"><span class="annottext">PlatformConstants
</span><a href="#local-6989586621681539184"><span class="hs-identifier hs-var">pc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-383"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681539184"><span class="annot"><span class="annottext">pc :: PlatformConstants
</span><a href="#local-6989586621681539184"><span class="hs-identifier hs-var hs-var">pc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; PlatformConstants
</span><a href="GHC.Platform.html#platformConstants"><span class="hs-identifier hs-var">platformConstants</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681539182"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-384"></span><span>
</span><span id="line-385"></span><span class="annot"><a href="GHC.Cmm.Type.html#rEP_CostCentreStack_scc_count"><span class="hs-identifier hs-type">rEP_CostCentreStack_scc_count</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Platform.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span>
</span><span id="line-386"></span><span id="rEP_CostCentreStack_scc_count"><span class="annot"><span class="annottext">rEP_CostCentreStack_scc_count :: Platform -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#rEP_CostCentreStack_scc_count"><span class="hs-identifier hs-var hs-var">rEP_CostCentreStack_scc_count</span></a></span></span><span> </span><span id="local-6989586621681539185"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681539185"><span class="hs-identifier hs-var">platform</span></a></span></span><span>
</span><span id="line-387"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#cmmBits"><span class="hs-identifier hs-var">cmmBits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Width
</span><a href="GHC.Cmm.Type.html#widthFromBytes"><span class="hs-identifier hs-var">widthFromBytes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PlatformConstants -&gt; Int
</span><a href="GHC.Platform.Constants.html#pc_REP_CostCentreStack_scc_count"><span class="hs-identifier hs-var">pc_REP_CostCentreStack_scc_count</span></a></span><span> </span><span class="annot"><span class="annottext">PlatformConstants
</span><a href="#local-6989586621681539187"><span class="hs-identifier hs-var">pc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-388"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681539187"><span class="annot"><span class="annottext">pc :: PlatformConstants
</span><a href="#local-6989586621681539187"><span class="hs-identifier hs-var hs-var">pc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; PlatformConstants
</span><a href="GHC.Platform.html#platformConstants"><span class="hs-identifier hs-var">platformConstants</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681539185"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-389"></span><span>
</span><span id="line-390"></span><span class="annot"><a href="GHC.Cmm.Type.html#rEP_StgEntCounter_allocs"><span class="hs-identifier hs-type">rEP_StgEntCounter_allocs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Platform.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span>
</span><span id="line-391"></span><span id="rEP_StgEntCounter_allocs"><span class="annot"><span class="annottext">rEP_StgEntCounter_allocs :: Platform -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#rEP_StgEntCounter_allocs"><span class="hs-identifier hs-var hs-var">rEP_StgEntCounter_allocs</span></a></span></span><span> </span><span id="local-6989586621681539188"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681539188"><span class="hs-identifier hs-var">platform</span></a></span></span><span>
</span><span id="line-392"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#cmmBits"><span class="hs-identifier hs-var">cmmBits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Width
</span><a href="GHC.Cmm.Type.html#widthFromBytes"><span class="hs-identifier hs-var">widthFromBytes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PlatformConstants -&gt; Int
</span><a href="GHC.Platform.Constants.html#pc_REP_StgEntCounter_allocs"><span class="hs-identifier hs-var">pc_REP_StgEntCounter_allocs</span></a></span><span> </span><span class="annot"><span class="annottext">PlatformConstants
</span><a href="#local-6989586621681539190"><span class="hs-identifier hs-var">pc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-393"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681539190"><span class="annot"><span class="annottext">pc :: PlatformConstants
</span><a href="#local-6989586621681539190"><span class="hs-identifier hs-var hs-var">pc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; PlatformConstants
</span><a href="GHC.Platform.html#platformConstants"><span class="hs-identifier hs-var">platformConstants</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681539188"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-394"></span><span>
</span><span id="line-395"></span><span class="annot"><a href="GHC.Cmm.Type.html#rEP_StgEntCounter_allocd"><span class="hs-identifier hs-type">rEP_StgEntCounter_allocd</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Platform.html#Platform"><span class="hs-identifier hs-type">Platform</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Cmm.Type.html#CmmType"><span class="hs-identifier hs-type">CmmType</span></a></span><span>
</span><span id="line-396"></span><span id="rEP_StgEntCounter_allocd"><span class="annot"><span class="annottext">rEP_StgEntCounter_allocd :: Platform -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#rEP_StgEntCounter_allocd"><span class="hs-identifier hs-var hs-var">rEP_StgEntCounter_allocd</span></a></span></span><span> </span><span id="local-6989586621681539191"><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681539191"><span class="hs-identifier hs-var">platform</span></a></span></span><span>
</span><span id="line-397"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; CmmType
</span><a href="GHC.Cmm.Type.html#cmmBits"><span class="hs-identifier hs-var">cmmBits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Width
</span><a href="GHC.Cmm.Type.html#widthFromBytes"><span class="hs-identifier hs-var">widthFromBytes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PlatformConstants -&gt; Int
</span><a href="GHC.Platform.Constants.html#pc_REP_StgEntCounter_allocd"><span class="hs-identifier hs-var">pc_REP_StgEntCounter_allocd</span></a></span><span> </span><span class="annot"><span class="annottext">PlatformConstants
</span><a href="#local-6989586621681539193"><span class="hs-identifier hs-var">pc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-398"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681539193"><span class="annot"><span class="annottext">pc :: PlatformConstants
</span><a href="#local-6989586621681539193"><span class="hs-identifier hs-var hs-var">pc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Platform -&gt; PlatformConstants
</span><a href="GHC.Platform.html#platformConstants"><span class="hs-identifier hs-var">platformConstants</span></a></span><span> </span><span class="annot"><span class="annottext">Platform
</span><a href="#local-6989586621681539191"><span class="hs-identifier hs-var">platform</span></a></span><span>
</span><span id="line-399"></span><span>
</span><span id="line-400"></span><span class="hs-comment">-------------------------------------------------------------------------</span><span>
</span><span id="line-401"></span><span class="hs-comment">{-      Note [Signed vs unsigned]
        ~~~~~~~~~~~~~~~~~~~~~~~~~
Should a CmmType include a signed vs. unsigned distinction?

This is very much like a &quot;hint&quot; in C-- terminology: it isn't necessary
in order to generate correct code, but it might be useful in that the
compiler can generate better code if it has access to higher-level
hints about data.  This is important at call boundaries, because the
definition of a function is not visible at all of its call sites, so
the compiler cannot infer the hints.

Here in Cmm, we're taking a slightly different approach.  We include
the int vs. float hint in the CmmType, because (a) the majority of
platforms have a strong distinction between float and int registers,
and (b) we don't want to do any heavyweight hint-inference in the
native code backend in order to get good code.  We're treating the
hint more like a type: our Cmm is always completely consistent with
respect to hints.  All coercions between float and int are explicit.

What about the signed vs. unsigned hint?  This information might be
useful if we want to keep sub-word-sized values in word-size
registers, which we must do if we only have word-sized registers.

On such a system, there are two straightforward conventions for
representing sub-word-sized values:

(a) Leave the upper bits undefined.  Comparison operations must
    sign- or zero-extend both operands before comparing them,
    depending on whether the comparison is signed or unsigned.

(b) Always keep the values sign- or zero-extended as appropriate.
    Arithmetic operations must narrow the result to the appropriate
    size.

A clever compiler might not use either (a) or (b) exclusively, instead
it would attempt to minimize the coercions by analysis: the same kind
of analysis that propagates hints around.  In Cmm we don't want to
have to do this, so we plump for having richer types and keeping the
type information consistent.

If signed/unsigned hints are missing from CmmType, then the only
choice we have is (a), because we don't know whether the result of an
operation should be sign- or zero-extended.

Many architectures have extending load operations, which work well
with (b).  To make use of them with (a), you need to know whether the
value is going to be sign- or zero-extended by an enclosing comparison
(for example), which involves knowing above the context.  This is
doable but more complex.

Further complicating the issue is foreign calls: a foreign calling
convention can specify that signed 8-bit quantities are passed as
sign-extended 32 bit quantities, for example (this is the case on the
PowerPC).  So we *do* need sign information on foreign call arguments.

Pros for adding signed vs. unsigned to CmmType:

  - It would let us use convention (b) above, and get easier
    code generation for extending loads.

  - Less information required on foreign calls.

  - MachOp type would be simpler

Cons:

  - More complexity

  - What is the CmmType for a VanillaReg?  Currently it is
    always wordRep, but now we have to decide whether it is
    signed or unsigned.  The same VanillaReg can thus have
    different CmmType in different parts of the program.

  - Extra coercions cluttering up expressions.

Currently for GHC, the foreign call point is moot, because we do our
own promotion of sub-word-sized values to word-sized values.  The Int8
type is represented by an Int# which is kept sign-extended at all times
(this is slightly naughty, because we're making assumptions about the
C calling convention rather early on in the compiler).  However, given
this, the cons outweigh the pros.

-}</span><span>
</span><span id="line-484"></span><span>
</span><span id="line-485"></span><span class="annot"><span class="hs-comment">-- | is @-falignment-sanitisation@ enabled?</span></span><span>
</span><span id="line-486"></span><span class="hs-keyword">type</span><span> </span><span id="DoAlignSanitisation"><span class="annot"><a href="GHC.Cmm.Type.html#DoAlignSanitisation"><span class="hs-identifier hs-var">DoAlignSanitisation</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-487"></span></pre></body></html>