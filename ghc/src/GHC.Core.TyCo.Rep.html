<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span id="local-6989586621681600139"><span id="local-6989586621681600140"><span id="local-6989586621681600141"><span id="local-6989586621681600142"><span id="local-6989586621681600143"><span id="local-6989586621681600144"><span id="local-6989586621681600145"><span id="local-6989586621681600146"><span id="local-6989586621681600147"><span id="local-6989586621681600148"><span id="local-6989586621681600149"><span id="local-6989586621681600150"><span id="local-6989586621681600151"><span id="local-6989586621681600152"><span id="local-6989586621681600153"><span id="local-6989586621681600154"><span id="local-6989586621681600155"><span id="local-6989586621681600156"><span id="local-6989586621681600157"><span id="local-6989586621681600158"><span id="local-6989586621681600159"><span id="local-6989586621681600160"><span id="local-6989586621681600161"><span id="local-6989586621681600162"><span id="local-6989586621681600163"><span id="local-6989586621681600164"><span id="local-6989586621681600165"><span id="local-6989586621681600166"><span id="local-6989586621681600167"><span id="local-6989586621681600168"><span id="local-6989586621681600169"><span id="local-6989586621681600170"><span id="local-6989586621681600171"><span id="local-6989586621681600172"><span id="local-6989586621681600173"><span id="local-6989586621681600174"><span id="local-6989586621681600175"><span id="local-6989586621681600176"><span id="local-6989586621681600177"><span id="local-6989586621681600178"><span id="local-6989586621681600179"><span id="local-6989586621681600180"><span id="local-6989586621681600181"><span id="local-6989586621681600182"><span id="local-6989586621681600183"><span id="local-6989586621681600184"><span id="local-6989586621681600185"><span id="local-6989586621681600186"><span id="local-6989586621681600187"><span id="local-6989586621681600188"></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DeriveDataTypeable #-}</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# OPTIONS_HADDOCK not-home #-}</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-comment">{-
(c) The University of Glasgow 2006
(c) The GRASP/AQUA Project, Glasgow University, 1998
\section[GHC.Core.TyCo.Rep]{Type and Coercion - friends' interface}

Note [The Type-related module hierarchy]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  GHC.Core.Class
  GHC.Core.Coercion.Axiom
  GHC.Core.TyCon           imports GHC.Core.{Class, Coercion.Axiom}
  GHC.Core.TyCo.Rep        imports GHC.Core.{Class, Coercion.Axiom, TyCon}
  GHC.Core.TyCo.Ppr        imports GHC.Core.TyCo.Rep
  GHC.Core.TyCo.FVs        imports GHC.Core.TyCo.Rep
  GHC.Core.TyCo.Subst      imports GHC.Core.TyCo.{Rep, FVs, Ppr}
  GHC.Core.TyCo.Tidy       imports GHC.Core.TyCo.{Rep, FVs}
  GHC.Builtin.Types.Prim   imports GHC.Core.TyCo.Rep ( including mkTyConTy )
  GHC.Core.Coercion        imports GHC.Core.Type
-}</span><span>
</span><span id="line-24"></span><span>
</span><span id="line-25"></span><span class="hs-comment">-- We expose the relevant stuff from this module via the Type module</span><span>
</span><span id="line-26"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">GHC.Core.TyCo.Rep</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-27"></span><span>
</span><span id="line-28"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Types</span></span><span>
</span><span id="line-29"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier">Type</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyLit"><span class="hs-identifier">TyLit</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#KindOrType"><span class="hs-identifier">KindOrType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Kind"><span class="hs-identifier">Kind</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#RuntimeRepType"><span class="hs-identifier">RuntimeRepType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#LevityType"><span class="hs-identifier">LevityType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#KnotTied"><span class="hs-identifier">KnotTied</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#PredType"><span class="hs-identifier">PredType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ThetaType"><span class="hs-identifier">ThetaType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FRRType"><span class="hs-identifier">FRRType</span></a></span><span class="hs-special">,</span><span>     </span><span class="hs-comment">-- Synonyms</span><span>
</span><span id="line-36"></span><span>        </span><span class="annot"><a href="GHC.Types.Var.html#ForAllTyFlag"><span class="hs-identifier">ForAllTyFlag</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#FunTyFlag"><span class="hs-identifier">FunTyFlag</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Coercions</span></span><span>
</span><span id="line-39"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier">Coercion</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoSel"><span class="hs-identifier">CoSel</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunSel"><span class="hs-identifier">FunSel</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#UnivCoProvenance"><span class="hs-identifier">UnivCoProvenance</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier">CoercionHole</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#coHoleCoVar"><span class="hs-identifier">coHoleCoVar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#setCoHoleCoVar"><span class="hs-identifier">setCoHoleCoVar</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionN"><span class="hs-identifier">CoercionN</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionR"><span class="hs-identifier">CoercionR</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionP"><span class="hs-identifier">CoercionP</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#KindCoercion"><span class="hs-identifier">KindCoercion</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#MCoercion"><span class="hs-identifier">MCoercion</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#MCoercionR"><span class="hs-identifier">MCoercionR</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#MCoercionN"><span class="hs-identifier">MCoercionN</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Functions over types</span></span><span>
</span><span id="line-46"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkNakedTyConTy"><span class="hs-identifier">mkNakedTyConTy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkTyVarTy"><span class="hs-identifier">mkTyVarTy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkTyVarTys"><span class="hs-identifier">mkTyVarTys</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkTyCoVarTy"><span class="hs-identifier">mkTyCoVarTy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkTyCoVarTys"><span class="hs-identifier">mkTyCoVarTys</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkFunTy"><span class="hs-identifier">mkFunTy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkNakedFunTy"><span class="hs-identifier">mkNakedFunTy</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkVisFunTy"><span class="hs-identifier">mkVisFunTy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkScaledFunTys"><span class="hs-identifier">mkScaledFunTys</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkInvisFunTy"><span class="hs-identifier">mkInvisFunTy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkInvisFunTys"><span class="hs-identifier">mkInvisFunTys</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#tcMkVisFunTy"><span class="hs-identifier">tcMkVisFunTy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#tcMkInvisFunTy"><span class="hs-identifier">tcMkInvisFunTy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#tcMkScaledFunTys"><span class="hs-identifier">tcMkScaledFunTys</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkForAllTy"><span class="hs-identifier">mkForAllTy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkForAllTys"><span class="hs-identifier">mkForAllTys</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkInvisForAllTys"><span class="hs-identifier">mkInvisForAllTys</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkPiTy"><span class="hs-identifier">mkPiTy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkPiTys"><span class="hs-identifier">mkPiTys</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkVisFunTyMany"><span class="hs-identifier">mkVisFunTyMany</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkVisFunTysMany"><span class="hs-identifier">mkVisFunTysMany</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#nonDetCmpTyLit"><span class="hs-identifier">nonDetCmpTyLit</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#cmpTyLit"><span class="hs-identifier">cmpTyLit</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Functions over coercions</span></span><span>
</span><span id="line-58"></span><span>        </span><span class="annot"><a href="GHC.Types.Basic.html#pickLR"><span class="hs-identifier">pickLR</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span>        </span><span class="annot"><span class="hs-comment">-- ** Analyzing types</span></span><span>
</span><span id="line-61"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyCoFolder"><span class="hs-identifier">TyCoFolder</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#foldTyCo"><span class="hs-identifier">foldTyCo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#noView"><span class="hs-identifier">noView</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>
</span><span id="line-63"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Sizes</span></span><span>
</span><span id="line-64"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#typeSize"><span class="hs-identifier">typeSize</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier">coercionSize</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#provSize"><span class="hs-identifier">provSize</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>
</span><span id="line-66"></span><span>        </span><span class="annot"><span class="hs-comment">-- * Multiplicities</span></span><span>
</span><span id="line-67"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier">Scaled</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#scaledMult"><span class="hs-identifier">scaledMult</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#scaledThing"><span class="hs-identifier">scaledThing</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mapScaledType"><span class="hs-identifier">mapScaledType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier">Mult</span></a></span><span>
</span><span id="line-68"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Ppr.html"><span class="hs-identifier">GHC.Core.TyCo.Ppr</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Ppr.html#pprType"><span class="hs-identifier">pprType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Ppr.html#pprCo"><span class="hs-identifier">pprCo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Ppr.html#pprTyLit"><span class="hs-identifier">pprTyLit</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><a href="GHC.Builtin.Types.html"><span class="hs-identifier">GHC.Builtin.Types</span></a></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><a href="GHC.Core.Type.html"><span class="hs-identifier">GHC.Core.Type</span></a></span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Core.Type.html#chooseFunTyFlag"><span class="hs-identifier">chooseFunTyFlag</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier">typeKind</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.Type.html#typeTypeOrConstraint"><span class="hs-identifier">typeTypeOrConstraint</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span>
</span><span id="line-76"></span><span>   </span><span class="hs-comment">-- Transitively pulls in a LOT of stuff, better to break the loop</span><span>
</span><span id="line-77"></span><span>
</span><span id="line-78"></span><span class="hs-comment">-- friends:</span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.html"><span class="hs-identifier">GHC.Types.Var</span></a></span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html"><span class="hs-identifier">GHC.Core.TyCon</span></a></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html"><span class="hs-identifier">GHC.Core.Coercion.Axiom</span></a></span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span class="hs-comment">-- others</span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Builtin.Names.html"><span class="hs-identifier">GHC.Builtin.Names</span></a></span><span>
</span><span id="line-85"></span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html"><span class="hs-identifier">GHC.Types.Basic</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#LeftOrRight"><span class="hs-identifier">LeftOrRight</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#pickLR"><span class="hs-identifier">pickLR</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.FastString.html"><span class="hs-identifier">GHC.Data.FastString</span></a></span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Binary.html"><span class="hs-identifier">GHC.Utils.Binary</span></a></span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span class="hs-comment">-- libraries</span><span>
</span><span id="line-94"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Data.html#/Data.Data.html"><span class="hs-identifier">Data.Data</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Data</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">TyCon</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.IORef.html#/Data.IORef.html"><span class="hs-identifier">Data.IORef</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.IORef.html#IORef/GHC.IORef.html#IORef"><span class="hs-identifier">IORef</span></a></span><span> </span><span class="hs-special">)</span><span>   </span><span class="hs-comment">-- for CoercionHole</span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../deepseq-1.4.8.1/src/Control.DeepSeq.html#/Control.DeepSeq.html"><span class="hs-identifier">Control.DeepSeq</span></a></span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span class="annot"><span class="hs-comment">{- **********************************************************************
*                                                                       *
                        Type
*                                                                       *
********************************************************************** -}</span></span><span>
</span><span id="line-103"></span><span>
</span><span id="line-104"></span><span class="annot"><span class="hs-comment">-- | The key representation of types within the compiler</span></span><span>
</span><span id="line-105"></span><span>
</span><span id="line-106"></span><span class="hs-keyword">type</span><span> </span><span id="KindOrType"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#KindOrType"><span class="hs-identifier hs-var">KindOrType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-comment">-- See Note [Arguments to type constructors]</span><span>
</span><span id="line-107"></span><span>
</span><span id="line-108"></span><span class="annot"><span class="hs-comment">-- | The key type representing kinds in the compiler.</span></span><span>
</span><span id="line-109"></span><span class="hs-keyword">type</span><span> </span><span id="Kind"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Kind"><span class="hs-identifier hs-var">Kind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span class="annot"><span class="hs-comment">-- | Type synonym used for types of kind RuntimeRep.</span></span><span>
</span><span id="line-112"></span><span class="hs-keyword">type</span><span> </span><span id="RuntimeRepType"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#RuntimeRepType"><span class="hs-identifier hs-var">RuntimeRepType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-113"></span><span>
</span><span id="line-114"></span><span class="annot"><span class="hs-comment">-- | Type synonym used for types of kind Levity.</span></span><span>
</span><span id="line-115"></span><span class="hs-keyword">type</span><span> </span><span id="LevityType"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#LevityType"><span class="hs-identifier hs-var">LevityType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span class="hs-comment">-- A type with a syntactically fixed RuntimeRep, in the sense</span><span>
</span><span id="line-118"></span><span class="hs-comment">-- of Note [Fixed RuntimeRep] in GHC.Tc.Utils.Concrete.</span><span>
</span><span id="line-119"></span><span class="hs-keyword">type</span><span> </span><span id="FRRType"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FRRType"><span class="hs-identifier hs-var">FRRType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span class="hs-comment">-- If you edit this type, you may need to update the GHC formalism</span><span>
</span><span id="line-122"></span><span class="hs-comment">-- See Note [GHC Formalism] in GHC.Core.Lint</span><span>
</span><span id="line-123"></span><span class="hs-keyword">data</span><span> </span><span id="Type"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-var">Type</span></a></span></span><span>
</span><span id="line-124"></span><span>  </span><span class="hs-comment">-- See Note [Non-trivial definitional equality]</span><span>
</span><span id="line-125"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="TyVarTy"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyVarTy"><span class="hs-identifier hs-var">TyVarTy</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Vanilla type or kind variable (*never* a coercion variable)</span></span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="AppTy"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AppTy"><span class="hs-identifier hs-var">AppTy</span></a></span></span><span>
</span><span id="line-128"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-129"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>            </span><span class="hs-comment">-- ^ Type application to something other than a 'TyCon'. Parameters:</span><span>
</span><span id="line-130"></span><span>                        </span><span class="hs-comment">--</span><span>
</span><span id="line-131"></span><span>                        </span><span class="hs-comment">--  1) Function: must /not/ be a 'TyConApp' or 'CastTy',</span><span>
</span><span id="line-132"></span><span>                        </span><span class="hs-comment">--     must be another 'AppTy', or 'TyVarTy'</span><span>
</span><span id="line-133"></span><span>                        </span><span class="hs-comment">--     See Note [Respecting definitional equality] \(EQ1) about the</span><span>
</span><span id="line-134"></span><span>                        </span><span class="hs-comment">--     no 'CastTy' requirement</span><span>
</span><span id="line-135"></span><span>                        </span><span class="hs-comment">--</span><span>
</span><span id="line-136"></span><span>                        </span><span class="hs-comment">--  2) Argument type</span><span>
</span><span id="line-137"></span><span>
</span><span id="line-138"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="TyConApp"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-var">TyConApp</span></a></span></span><span>
</span><span id="line-139"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span>
</span><span id="line-140"></span><span>        </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#KindOrType"><span class="hs-identifier hs-type">KindOrType</span></a></span><span class="hs-special">]</span><span>    </span><span class="hs-comment">-- ^ Application of a 'TyCon', including newtypes /and/ synonyms.</span><span>
</span><span id="line-141"></span><span>                        </span><span class="hs-comment">-- Invariant: saturated applications of 'FunTyCon' must</span><span>
</span><span id="line-142"></span><span>                        </span><span class="hs-comment">-- use 'FunTy' and saturated synonyms must use their own</span><span>
</span><span id="line-143"></span><span>                        </span><span class="hs-comment">-- constructors. However, /unsaturated/ 'FunTyCon's</span><span>
</span><span id="line-144"></span><span>                        </span><span class="hs-comment">-- do appear as 'TyConApp's.</span><span>
</span><span id="line-145"></span><span>                        </span><span class="hs-comment">-- Parameters:</span><span>
</span><span id="line-146"></span><span>                        </span><span class="hs-comment">--</span><span>
</span><span id="line-147"></span><span>                        </span><span class="hs-comment">-- 1) Type constructor being applied to.</span><span>
</span><span id="line-148"></span><span>                        </span><span class="hs-comment">--</span><span>
</span><span id="line-149"></span><span>                        </span><span class="hs-comment">-- 2) Type arguments. Might not have enough type arguments</span><span>
</span><span id="line-150"></span><span>                        </span><span class="hs-comment">--    here to saturate the constructor.</span><span>
</span><span id="line-151"></span><span>                        </span><span class="hs-comment">--    Even type synonyms are not necessarily saturated;</span><span>
</span><span id="line-152"></span><span>                        </span><span class="hs-comment">--    for example unsaturated type synonyms</span><span>
</span><span id="line-153"></span><span>                        </span><span class="hs-comment">--    can appear as the right hand side of a type synonym.</span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ForAllTy"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ForAllTy"><span class="hs-identifier hs-var">ForAllTy</span></a></span></span><span>
</span><span id="line-156"></span><span>        </span><span class="hs-pragma">{-# UNPACK</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Types.Var.html#ForAllTyBinder"><span class="hs-identifier hs-type">ForAllTyBinder</span></a></span><span>
</span><span id="line-157"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>            </span><span class="hs-comment">-- ^ A &#928; type.</span><span>
</span><span id="line-158"></span><span>             </span><span class="hs-comment">-- Note [When we quantify over a coercion variable]</span><span>
</span><span id="line-159"></span><span>             </span><span class="hs-comment">-- INVARIANT: If the binder is a coercion variable, it must</span><span>
</span><span id="line-160"></span><span>             </span><span class="hs-comment">-- be mentioned in the Type. See</span><span>
</span><span id="line-161"></span><span>             </span><span class="hs-comment">-- Note [Unused coercion variable in ForAllTy]</span><span>
</span><span id="line-162"></span><span>
</span><span id="line-163"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="FunTy"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunTy"><span class="hs-identifier hs-var">FunTy</span></a></span></span><span>      </span><span class="hs-comment">-- ^ FUN m t1 t2   Very common, so an important special case</span><span>
</span><span id="line-164"></span><span>                </span><span class="hs-comment">-- See Note [Function types]</span><span>
</span><span id="line-165"></span><span>     </span><span class="hs-special">{</span><span> </span><span id="ft_af"><span class="annot"><span class="annottext">Kind -&gt; FunTyFlag
</span><a href="GHC.Core.TyCo.Rep.html#ft_af"><span class="hs-identifier hs-var hs-var">ft_af</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#FunTyFlag"><span class="hs-identifier hs-type">FunTyFlag</span></a></span><span>    </span><span class="hs-comment">-- Is this (-&gt;/FUN) or (=&gt;) or (==&gt;)?</span><span>
</span><span id="line-166"></span><span>                                 </span><span class="hs-comment">-- This info is fully specified by the kinds in</span><span>
</span><span id="line-167"></span><span>                                 </span><span class="hs-comment">--      ft_arg and ft_res</span><span>
</span><span id="line-168"></span><span>                                 </span><span class="hs-comment">-- Note [FunTyFlag] in GHC.Types.Var</span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span>     </span><span class="hs-special">,</span><span> </span><span id="ft_mult"><span class="annot"><span class="annottext">Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#ft_mult"><span class="hs-identifier hs-var hs-var">ft_mult</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-type">Mult</span></a></span><span>           </span><span class="hs-comment">-- Multiplicity; always Many for (=&gt;) and (==&gt;)</span><span>
</span><span id="line-171"></span><span>     </span><span class="hs-special">,</span><span> </span><span id="ft_arg"><span class="annot"><span class="annottext">Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#ft_arg"><span class="hs-identifier hs-var hs-var">ft_arg</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>           </span><span class="hs-comment">-- Argument type</span><span>
</span><span id="line-172"></span><span>     </span><span class="hs-special">,</span><span> </span><span id="ft_res"><span class="annot"><span class="annottext">Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#ft_res"><span class="hs-identifier hs-var hs-var">ft_res</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-special">}</span><span>         </span><span class="hs-comment">-- Result type</span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="LitTy"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#LitTy"><span class="hs-identifier hs-var">LitTy</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyLit"><span class="hs-identifier hs-type">TyLit</span></a></span><span>     </span><span class="annot"><span class="hs-comment">-- ^ Type literals are similar to type constructors.</span></span><span>
</span><span id="line-175"></span><span>
</span><span id="line-176"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="CastTy"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CastTy"><span class="hs-identifier hs-var">CastTy</span></a></span></span><span>
</span><span id="line-177"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-178"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#KindCoercion"><span class="hs-identifier hs-type">KindCoercion</span></a></span><span>  </span><span class="hs-comment">-- ^ A kind cast. The coercion is always nominal.</span><span>
</span><span id="line-179"></span><span>                      </span><span class="hs-comment">-- INVARIANT: The cast is never reflexive \(EQ2)</span><span>
</span><span id="line-180"></span><span>                      </span><span class="hs-comment">-- INVARIANT: The Type is not a CastTy (use TransCo instead) \(EQ3)</span><span>
</span><span id="line-181"></span><span>                      </span><span class="hs-comment">-- INVARIANT: The Type is not a ForAllTy over a tyvar \(EQ4)</span><span>
</span><span id="line-182"></span><span>                      </span><span class="hs-comment">-- See Note [Respecting definitional equality]</span><span>
</span><span id="line-183"></span><span>
</span><span id="line-184"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="CoercionTy"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionTy"><span class="hs-identifier hs-var">CoercionTy</span></a></span></span><span>
</span><span id="line-185"></span><span>        </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span>    </span><span class="hs-comment">-- ^ Injection of a Coercion into a type</span><span>
</span><span id="line-186"></span><span>                    </span><span class="hs-comment">-- This should only ever be used in the RHS of an AppTy,</span><span>
</span><span id="line-187"></span><span>                    </span><span class="hs-comment">-- in the list of a TyConApp, when applying a promoted</span><span>
</span><span id="line-188"></span><span>                    </span><span class="hs-comment">-- GADT data constructor</span><span>
</span><span id="line-189"></span><span>
</span><span id="line-190"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621681600336"><span id="local-6989586621681600362"><span id="local-6989586621681600380"><span id="local-6989586621681600382"><span id="local-6989586621681600384"><span id="local-6989586621681600389"><span id="local-6989586621681600394"><span id="local-6989586621681600397"><span id="local-6989586621681600400"><span id="local-6989586621681600403"><span id="local-6989586621681600406"><span id="local-6989586621681600409"><span id="local-6989586621681600414"><span id="local-6989586621681600419"><span class="annot"><span class="annottext">Typeable Kind
Typeable Kind =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; Kind -&gt; c Kind)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c Kind)
-&gt; (Kind -&gt; Constr)
-&gt; (Kind -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c Kind))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c Kind))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; Kind -&gt; Kind)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Kind -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Kind -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; Kind -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Kind -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; Kind -&gt; m Kind)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; Kind -&gt; m Kind)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; Kind -&gt; m Kind)
-&gt; Data Kind
Kind -&gt; Constr
Kind -&gt; DataType
(forall b. Data b =&gt; b -&gt; b) -&gt; Kind -&gt; Kind
forall a.
Typeable a =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Kind -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; Kind -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Kind -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Kind -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Kind -&gt; m Kind
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Kind -&gt; m Kind
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c Kind
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; Kind -&gt; c Kind
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c Kind)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c Kind)
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; Kind -&gt; c Kind
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; Kind -&gt; c Kind
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c Kind
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c Kind
$ctoConstr :: Kind -&gt; Constr
toConstr :: Kind -&gt; Constr
$cdataTypeOf :: Kind -&gt; DataType
dataTypeOf :: Kind -&gt; DataType
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c Kind)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c Kind)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c Kind)
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c Kind)
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; Kind -&gt; Kind
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; Kind -&gt; Kind
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Kind -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Kind -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Kind -&gt; r
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Kind -&gt; r
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; Kind -&gt; [u]
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; Kind -&gt; [u]
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Kind -&gt; u
gmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Kind -&gt; u
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Kind -&gt; m Kind
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Kind -&gt; m Kind
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Kind -&gt; m Kind
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Kind -&gt; m Kind
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Kind -&gt; m Kind
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Kind -&gt; m Kind
</span><a href="../../base-4.18.3.0/src/Data.Data.html#Data/Data.Data.html#Data"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data.Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-191"></span><span>
</span><span id="line-192"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-193"></span><span>  </span><span id="local-6989586621681600427"><span class="annot"><span class="annottext">ppr :: Kind -&gt; SDoc
</span><a href="#local-6989586621681600427"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprType"><span class="hs-identifier hs-var">pprType</span></a></span><span>
</span><span id="line-194"></span><span>
</span><span id="line-195"></span><span class="hs-comment">-- NOTE:  Other parts of the code assume that type literals do not contain</span><span>
</span><span id="line-196"></span><span class="hs-comment">-- types or type variables.</span><span>
</span><span id="line-197"></span><span class="hs-keyword">data</span><span> </span><span id="TyLit"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyLit"><span class="hs-identifier hs-var">TyLit</span></a></span></span><span>
</span><span id="line-198"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="NumTyLit"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#NumTyLit"><span class="hs-identifier hs-var">NumTyLit</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span>
</span><span id="line-199"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="StrTyLit"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#StrTyLit"><span class="hs-identifier hs-var">StrTyLit</span></a></span></span><span> </span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span>
</span><span id="line-200"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="CharTyLit"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CharTyLit"><span class="hs-identifier hs-var">CharTyLit</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span>
</span><span id="line-201"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681600433"><span id="local-6989586621681600441"><span class="annot"><span class="annottext">TyLit -&gt; TyLit -&gt; Bool
(TyLit -&gt; TyLit -&gt; Bool) -&gt; (TyLit -&gt; TyLit -&gt; Bool) -&gt; Eq TyLit
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: TyLit -&gt; TyLit -&gt; Bool
== :: TyLit -&gt; TyLit -&gt; Bool
$c/= :: TyLit -&gt; TyLit -&gt; Bool
/= :: TyLit -&gt; TyLit -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681600448"><span id="local-6989586621681600456"><span id="local-6989586621681600461"><span id="local-6989586621681600463"><span id="local-6989586621681600465"><span id="local-6989586621681600470"><span id="local-6989586621681600475"><span id="local-6989586621681600478"><span id="local-6989586621681600481"><span id="local-6989586621681600484"><span id="local-6989586621681600487"><span id="local-6989586621681600490"><span id="local-6989586621681600495"><span id="local-6989586621681600500"><span class="annot"><span class="annottext">Typeable TyLit
Typeable TyLit =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; TyLit -&gt; c TyLit)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c TyLit)
-&gt; (TyLit -&gt; Constr)
-&gt; (TyLit -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c TyLit))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c TyLit))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; TyLit -&gt; TyLit)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; TyLit -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; TyLit -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; TyLit -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; TyLit -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; TyLit -&gt; m TyLit)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; TyLit -&gt; m TyLit)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; TyLit -&gt; m TyLit)
-&gt; Data TyLit
TyLit -&gt; Constr
TyLit -&gt; DataType
(forall b. Data b =&gt; b -&gt; b) -&gt; TyLit -&gt; TyLit
forall a.
Typeable a =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; TyLit -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; TyLit -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; TyLit -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; TyLit -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; TyLit -&gt; m TyLit
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; TyLit -&gt; m TyLit
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c TyLit
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; TyLit -&gt; c TyLit
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c TyLit)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c TyLit)
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; TyLit -&gt; c TyLit
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; TyLit -&gt; c TyLit
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c TyLit
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c TyLit
$ctoConstr :: TyLit -&gt; Constr
toConstr :: TyLit -&gt; Constr
$cdataTypeOf :: TyLit -&gt; DataType
dataTypeOf :: TyLit -&gt; DataType
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c TyLit)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c TyLit)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c TyLit)
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c TyLit)
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; TyLit -&gt; TyLit
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; TyLit -&gt; TyLit
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; TyLit -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; TyLit -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; TyLit -&gt; r
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; TyLit -&gt; r
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; TyLit -&gt; [u]
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; TyLit -&gt; [u]
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; TyLit -&gt; u
gmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; TyLit -&gt; u
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; TyLit -&gt; m TyLit
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; TyLit -&gt; m TyLit
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; TyLit -&gt; m TyLit
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; TyLit -&gt; m TyLit
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; TyLit -&gt; m TyLit
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; TyLit -&gt; m TyLit
</span><a href="../../base-4.18.3.0/src/Data.Data.html#Data/Data.Data.html#Data"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data.Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-202"></span><span>
</span><span id="line-203"></span><span class="hs-comment">-- Non-determinism arises due to uniqCompareFS</span><span>
</span><span id="line-204"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#nonDetCmpTyLit"><span class="hs-identifier hs-type">nonDetCmpTyLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyLit"><span class="hs-identifier hs-type">TyLit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyLit"><span class="hs-identifier hs-type">TyLit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ordering</span></span><span>
</span><span id="line-205"></span><span id="nonDetCmpTyLit"><span class="annot"><span class="annottext">nonDetCmpTyLit :: TyLit -&gt; TyLit -&gt; Ordering
</span><a href="GHC.Core.TyCo.Rep.html#nonDetCmpTyLit"><span class="hs-identifier hs-var hs-var">nonDetCmpTyLit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(FastString -&gt; NonDetFastString) -&gt; TyLit -&gt; TyLit -&gt; Ordering
forall r. Ord r =&gt; (FastString -&gt; r) -&gt; TyLit -&gt; TyLit -&gt; Ordering
</span><a href="GHC.Core.TyCo.Rep.html#cmpTyLitWith"><span class="hs-identifier hs-var">cmpTyLitWith</span></a></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; NonDetFastString
</span><a href="GHC.Data.FastString.html#NonDetFastString"><span class="hs-identifier hs-var">NonDetFastString</span></a></span><span>
</span><span id="line-206"></span><span>
</span><span id="line-207"></span><span class="hs-comment">-- Slower than nonDetCmpTyLit but deterministic</span><span>
</span><span id="line-208"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#cmpTyLit"><span class="hs-identifier hs-type">cmpTyLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyLit"><span class="hs-identifier hs-type">TyLit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyLit"><span class="hs-identifier hs-type">TyLit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ordering</span></span><span>
</span><span id="line-209"></span><span id="cmpTyLit"><span class="annot"><span class="annottext">cmpTyLit :: TyLit -&gt; TyLit -&gt; Ordering
</span><a href="GHC.Core.TyCo.Rep.html#cmpTyLit"><span class="hs-identifier hs-var hs-var">cmpTyLit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(FastString -&gt; LexicalFastString) -&gt; TyLit -&gt; TyLit -&gt; Ordering
forall r. Ord r =&gt; (FastString -&gt; r) -&gt; TyLit -&gt; TyLit -&gt; Ordering
</span><a href="GHC.Core.TyCo.Rep.html#cmpTyLitWith"><span class="hs-identifier hs-var">cmpTyLitWith</span></a></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; LexicalFastString
</span><a href="GHC.Data.FastString.html#LexicalFastString"><span class="hs-identifier hs-var">LexicalFastString</span></a></span><span>
</span><span id="line-210"></span><span>
</span><span id="line-211"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#cmpTyLitWith"><span class="hs-pragma hs-type">cmpTyLitWith</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-212"></span><span id="local-6989586621681599824"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#cmpTyLitWith"><span class="hs-identifier hs-type">cmpTyLitWith</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681599824"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.FastString.html#FastString"><span class="hs-identifier hs-type">FastString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681599824"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyLit"><span class="hs-identifier hs-type">TyLit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyLit"><span class="hs-identifier hs-type">TyLit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ordering</span></span></span><span>
</span><span id="line-213"></span><span id="cmpTyLitWith"><span class="annot"><span class="annottext">cmpTyLitWith :: forall r. Ord r =&gt; (FastString -&gt; r) -&gt; TyLit -&gt; TyLit -&gt; Ordering
</span><a href="GHC.Core.TyCo.Rep.html#cmpTyLitWith"><span class="hs-identifier hs-var hs-var">cmpTyLitWith</span></a></span></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; r
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#NumTyLit"><span class="hs-identifier hs-type">NumTyLit</span></a></span><span>  </span><span id="local-6989586621681600515"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681600515"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#NumTyLit"><span class="hs-identifier hs-type">NumTyLit</span></a></span><span>  </span><span id="local-6989586621681600516"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681600516"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681600515"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681600516"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-214"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#cmpTyLitWith"><span class="hs-identifier hs-var">cmpTyLitWith</span></a></span><span> </span><span id="local-6989586621681600518"><span class="annot"><span class="annottext">FastString -&gt; r
</span><a href="#local-6989586621681600518"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#StrTyLit"><span class="hs-identifier hs-type">StrTyLit</span></a></span><span>  </span><span id="local-6989586621681600519"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681600519"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#StrTyLit"><span class="hs-identifier hs-type">StrTyLit</span></a></span><span>  </span><span id="local-6989586621681600520"><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681600520"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">r -&gt; r -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; r
</span><a href="#local-6989586621681600518"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681600519"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FastString -&gt; r
</span><a href="#local-6989586621681600518"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">FastString
</span><a href="#local-6989586621681600520"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-215"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#cmpTyLitWith"><span class="hs-identifier hs-var">cmpTyLitWith</span></a></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; r
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CharTyLit"><span class="hs-identifier hs-type">CharTyLit</span></a></span><span> </span><span id="local-6989586621681600521"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621681600521"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CharTyLit"><span class="hs-identifier hs-type">CharTyLit</span></a></span><span> </span><span id="local-6989586621681600522"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621681600522"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621681600521"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621681600522"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-216"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#cmpTyLitWith"><span class="hs-identifier hs-var">cmpTyLitWith</span></a></span><span> </span><span class="annot"><span class="annottext">FastString -&gt; r
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681600523"><span class="annot"><span class="annottext">TyLit
</span><a href="#local-6989586621681600523"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681600524"><span class="annot"><span class="annottext">TyLit
</span><a href="#local-6989586621681600524"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyLit -&gt; Int
</span><a href="#local-6989586621681600525"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="annot"><span class="annottext">TyLit
</span><a href="#local-6989586621681600523"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyLit -&gt; Int
</span><a href="#local-6989586621681600525"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="annot"><span class="annottext">TyLit
</span><a href="#local-6989586621681600524"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-217"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-218"></span><span>    </span><span class="annot"><a href="#local-6989586621681600525"><span class="hs-identifier hs-type">tag</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyLit"><span class="hs-identifier hs-type">TyLit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-219"></span><span>    </span><span id="local-6989586621681600525"><span class="annot"><span class="annottext">tag :: TyLit -&gt; Int
</span><a href="#local-6989586621681600525"><span class="hs-identifier hs-var hs-var">tag</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#NumTyLit"><span class="hs-identifier hs-type">NumTyLit</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-220"></span><span>    </span><span class="annot"><a href="#local-6989586621681600525"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#StrTyLit"><span class="hs-identifier hs-type">StrTyLit</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-221"></span><span>    </span><span class="annot"><a href="#local-6989586621681600525"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CharTyLit"><span class="hs-identifier hs-type">CharTyLit</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span>
</span><span id="line-222"></span><span>
</span><span id="line-223"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyLit"><span class="hs-identifier hs-type">TyLit</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-224"></span><span>   </span><span id="local-6989586621681600528"><span class="annot"><span class="annottext">ppr :: TyLit -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyLit -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprTyLit"><span class="hs-identifier hs-var">pprTyLit</span></a></span><span>
</span><span id="line-225"></span><span>
</span><span id="line-226"></span><span class="hs-comment">{- Note [Function types]
~~~~~~~~~~~~~~~~~~~~~~~~
FunTy is the constructor for a function type.  Here are the details:

* The primitive function type constructor FUN has kind
     FUN :: forall (m :: Multiplicity) -&gt;
            forall {r1 :: RuntimeRep} {r2 :: RuntimeRep}.
            TYPE r1 -&gt;
            TYPE r2 -&gt;
            Type
  mkTyConApp ensures that we convert a saturated application
    TyConApp FUN [m,r1,r2,t1,t2] into FunTy FTF_T_T m t1 t2
  dropping the 'r1' and 'r2' arguments; they are easily recovered
  from 't1' and 't2'. The FunTyFlag is always FTF_T_T, because
  we build constraint arrows (=&gt;) with e.g. mkPhiTy and friends,
  never `mkTyConApp funTyCon args`.

* For the time being its RuntimeRep quantifiers are left
  inferred. This is to allow for it to evolve.

* Because the RuntimeRep args came first historically (that is,
  the arrow type constructor gained these arguments before gaining
  the Multiplicity argument), we wanted to be able to say
    type (-&gt;) = FUN Many
  which we do in library module GHC.Types. This means that the
  Multiplicity argument must precede the RuntimeRep arguments --
  and it means changing the name of the primitive constructor from
  (-&gt;) to FUN.

* The multiplicity argument is dependent, because Typeable does not
  support a type such as `Multiplicity -&gt; forall {r1 r2 :: RuntimeRep}. ...`.
  There is a plan to change the argument order and make the
  multiplicity argument nondependent in #20164.

* Re the ft_af field: see Note [FunTyFlag] in GHC.Types.Var
  See Note [Types for coercions, predicates, and evidence]
  This visibility info makes no difference in Core; it matters
  only when we regard the type as a Haskell source type.

Note [Types for coercions, predicates, and evidence]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
We treat differently:

  (a) Predicate types
        Test: isPredTy
        Binders: DictIds
        Kind: Constraint
        Examples: (Eq a), and (a ~ b)

  (b) Coercion types are primitive, unboxed equalities
        Test: isCoVarTy
        Binders: CoVars (can appear in coercions)
        Kind: TYPE (TupleRep [])
        Examples: (t1 ~# t2) or (t1 ~R# t2)

  (c) Evidence types is the type of evidence manipulated by
      the type constraint solver.
        Test: isEvVarType
        Binders: EvVars
        Kind: Constraint or TYPE (TupleRep [])
        Examples: all coercion types and predicate types

Coercion types and predicate types are mutually exclusive,
but evidence types are a superset of both.

When treated as a user type,

  - Predicates (of kind Constraint) are invisible and are
    implicitly instantiated

  - Coercion types, and non-pred evidence types (i.e. not
    of kind Constrain), are just regular old types, are
    visible, and are not implicitly instantiated.

In a FunTy { ft_af = af } and af = FTF_C_T or FTF_C_C, the argument
type is always a Predicate type.

Note [Weird typing rule for ForAllTy]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Here are the typing rules for ForAllTy:

tyvar : Type
inner : TYPE r
tyvar does not occur in r
------------------------------------
ForAllTy (Bndr tyvar vis) inner : TYPE r

inner : TYPE r
------------------------------------
ForAllTy (Bndr covar vis) inner : Type

Note that the kind of the result depends on whether the binder is a
tyvar or a covar. The kind of a forall-over-tyvar is the same as
the kind of the inner type. This is because quantification over types
is erased before runtime. By contrast, the kind of a forall-over-covar
is always Type, because a forall-over-covar is compiled into a function
taking a 0-bit-wide erased coercion argument.

Because the tyvar form above includes r in its result, we must
be careful not to let any variables escape -- thus the last premise
of the rule above.

Note [Constraints in kinds]
~~~~~~~~~~~~~~~~~~~~~~~~~~~
Do we allow a type constructor to have a kind like
   S :: Eq a =&gt; a -&gt; Type

No, we do not.  Doing so would mean would need a TyConApp like
   S @k @(d :: Eq k) (ty :: k)
 and we have no way to build, or decompose, evidence like
 (d :: Eq k) at the type level.

But we admit one exception: equality.  We /do/ allow, say,
   MkT :: (a ~ b) =&gt; a -&gt; b -&gt; Type a b

Why?  Because we can, without much difficulty.  Moreover
we can promote a GADT data constructor (see TyCon
Note [Promoted data constructors]), like
  data GT a b where
    MkGT : a -&gt; a -&gt; GT a a
so programmers might reasonably expect to be able to
promote MkT as well.

How does this work?

* In GHC.Tc.Validity.checkConstraintsOK we reject kinds that
  have constraints other than (a~b) and (a~~b).

* In Inst.tcInstInvisibleTyBinder we instantiate a call
  of MkT by emitting
     [W] co :: alpha ~# beta
  and producing the elaborated term
     MkT @alpha @beta (Eq# alpha beta co)
  We don't generate a boxed &quot;Wanted&quot;; we generate only a
  regular old /unboxed/ primitive-equality Wanted, and build
  the box on the spot.

* How can we get such a MkT?  By promoting a GADT-style data
  constructor, written with an explicit equality constraint.
     data T a b where
       MkT :: (a~b) =&gt; a -&gt; b -&gt; T a b
  See DataCon.mkPromotedDataCon
  and Note [Promoted data constructors] in GHC.Core.TyCon

* We support both homogeneous (~) and heterogeneous (~~)
  equality.  (See Note [The equality types story]
  in GHC.Builtin.Types.Prim for a primer on these equality types.)

* How do we prevent a MkT having an illegal constraint like
  Eq a?  We check for this at use-sites; see GHC.Tc.Gen.HsType.tcTyVar,
  specifically dc_theta_illegal_constraint.

* Notice that nothing special happens if
    K :: (a ~# b) =&gt; blah
  because (a ~# b) is not a predicate type, and is never
  implicitly instantiated. (Mind you, it's not clear how you
  could creates a type constructor with such a kind.) See
  Note [Types for coercions, predicates, and evidence]

* The existence of promoted MkT with an equality-constraint
  argument is the (only) reason that the AnonTCB constructor
  of TyConBndrVis carries an FunTyFlag.
  For example, when we promote the data constructor
     MkT :: forall a b. (a~b) =&gt; a -&gt; b -&gt; T a b
  we get a PromotedDataCon with tyConBinders
      Bndr (a :: Type)  (NamedTCB Inferred)
      Bndr (b :: Type)  (NamedTCB Inferred)
      Bndr (_ :: a ~ b) (AnonTCB FTF_C_T)
      Bndr (_ :: a)     (AnonTCB FTF_T_T))
      Bndr (_ :: b)     (AnonTCB FTF_T_T))

* One might reasonably wonder who *unpacks* these boxes once they are
  made. After all, there is no type-level `case` construct. The
  surprising answer is that no one ever does. Instead, if a GADT
  constructor is used on the left-hand side of a type family equation,
  that occurrence forces GHC to unify the types in question. For
  example:

  data G a where
    MkG :: G Bool

  type family F (x :: G a) :: a where
    F MkG = False

  When checking the LHS `F MkG`, GHC sees the MkG constructor and then must
  unify F's implicit parameter `a` with Bool. This succeeds, making the equation

    F Bool (MkG @Bool &lt;Bool&gt;) = False

  Note that we never need unpack the coercion. This is because type
  family equations are *not* parametric in their kind variables. That
  is, we could have just said

  type family H (x :: G a) :: a where
    H _ = False

  The presence of False on the RHS also forces `a` to become Bool,
  giving us

    H Bool _ = False

  The fact that any of this works stems from the lack of phase
  separation between types and kinds (unlike the very present phase
  separation between terms and types).

  Once we have the ability to pattern-match on types below top-level,
  this will no longer cut it, but it seems fine for now.


Note [Arguments to type constructors]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Because of kind polymorphism, in addition to type application we now
have kind instantiation. We reuse the same notations to do so.

For example:

  Just (* -&gt; *) Maybe
  Right * Nat Zero

are represented by:

  TyConApp (PromotedDataCon Just) [* -&gt; *, Maybe]
  TyConApp (PromotedDataCon Right) [*, Nat, (PromotedDataCon Zero)]

Important note: Nat is used as a *kind* and not as a type. This can be
confusing, since type-level Nat and kind-level Nat are identical. We
use the kind of (PromotedDataCon Right) to know if its arguments are
kinds or types.

This kind instantiation only happens in TyConApp currently.

Note [Non-trivial definitional equality]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Is Int |&gt; &lt;*&gt; the same as Int? YES! In order to reduce headaches,
we decide that any reflexive casts in types are just ignored.
(Indeed they must be. See Note [Respecting definitional equality].)
More generally, the `eqType` function, which defines Core's type equality
relation, ignores casts and coercion arguments, as long as the
two types have the same kind. This allows us to be a little sloppier
in keeping track of coercions, which is a good thing. It also means
that eqType does not depend on eqCoercion, which is also a good thing.

Why is this sensible? That is, why is something different than &#945;-equivalence
appropriate for the implementation of eqType?

Anything smaller than ~ and homogeneous is an appropriate definition for
equality. The type safety of FC depends only on ~. Let's say &#951; : &#964; ~ &#963;. Any
expression of type &#964; can be transmuted to one of type &#963; at any point by
casting. The same is true of expressions of type &#963;. So in some sense, &#964; and &#963;
are interchangeable.

But let's be more precise. If we examine the typing rules of FC (say, those in
https://richarde.dev/papers/2015/equalities/equalities.pdf)
there are several places where the same metavariable is used in two different
premises to a rule. (For example, see Ty_App.) There is an implicit equality
check here. What definition of equality should we use? By convention, we use
&#945;-equivalence. Take any rule with one (or more) of these implicit equality
checks. Then there is an admissible rule that uses ~ instead of the implicit
check, adding in casts as appropriate.

The only problem here is that ~ is heterogeneous. To make the kinds work out
in the admissible rule that uses ~, it is necessary to homogenize the
coercions. That is, if we have &#951; : (&#964; : &#954;1) ~ (&#963; : &#954;2), then we don't use &#951;;
we use &#951; |&gt; kind &#951;, which is homogeneous.

The effect of this all is that eqType, the implementation of the implicit
equality check, can use any homogeneous relation that is smaller than ~, as
those rules must also be admissible.

A more drawn out argument around all of this is presented in Section 7.2 of
Richard E's thesis (http://richarde.dev/papers/2016/thesis/eisenberg-thesis.pdf).

What would go wrong if we insisted on the casts matching? See the beginning of
Section 8 in the unpublished paper above. Theoretically, nothing at all goes
wrong. But in practical terms, getting the coercions right proved to be
nightmarish. And types would explode: during kind-checking, we often produce
reflexive kind coercions. When we try to cast by these, mkCastTy just discards
them. But if we used an eqType that distinguished between Int and Int |&gt; &lt;*&gt;,
then we couldn't discard -- the output of kind-checking would be enormous,
and we would need enormous casts with lots of CoherenceCo's to straighten
them out.

Would anything go wrong if eqType looked through type families? No, not at
all. But that makes eqType rather hard to implement.

Thus, the guideline for eqType is that it should be the largest
easy-to-implement relation that is still smaller than ~ and homogeneous. The
precise choice of relation is somewhat incidental, as long as the smart
constructors and destructors in Type respect whatever relation is chosen.

Another helpful principle with eqType is this:

 (EQ) If (t1 `eqType` t2) then I can replace t1 by t2 anywhere.

This principle also tells us that eqType must relate only types with the
same kinds.

Interestingly, it must be the case that the free variables of t1 and t2
might be different, even if t1 `eqType` t2. A simple example of this is
if we have both cv1 :: k1 ~ k2 and cv2 :: k1 ~ k2 in the environment.
Then t1 = t |&gt; cv1 and t2 = t |&gt; cv2 are eqType; yet cv1 is in the free
vars of t1 and cv2 is in the free vars of t2. Unless we choose to implement
eqType to be just &#945;-equivalence, this wrinkle around free variables
remains.

Yet not all is lost: we can say that any two equal types share the same
*relevant* free variables. Here, a relevant variable is a shallow
free variable (see Note [Shallow and deep free variables] in GHC.Core.TyCo.FVs)
that does not appear within a coercion. Note that type variables can
appear within coercions (in, say, a Refl node), but that coercion variables
cannot appear outside a coercion. We do not (yet) have a function to
extract relevant free variables, but it would not be hard to write if
the need arises.

Note [Respecting definitional equality]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Note [Non-trivial definitional equality] introduces the property (EQ).
How is this upheld?

Any function that pattern matches on all the constructors will have to
consider the possibility of CastTy. Presumably, those functions will handle
CastTy appropriately and we'll be OK.

More dangerous are the splitXXX functions. Let's focus on splitTyConApp.
We don't want it to fail on (T a b c |&gt; co). Happily, if we have
  (T a b c |&gt; co) `eqType` (T d e f)
then co must be reflexive. Why? eqType checks that the kinds are equal, as
well as checking that (a `eqType` d), (b `eqType` e), and (c `eqType` f).
By the kind check, we know that (T a b c |&gt; co) and (T d e f) have the same
kind. So the only way that co could be non-reflexive is for (T a b c) to have
a different kind than (T d e f). But because T's kind is closed (all tycon kinds
are closed), the only way for this to happen is that one of the arguments has
to differ, leading to a contradiction. Thus, co is reflexive.

Accordingly, by eliminating reflexive casts, splitTyConApp need not worry
about outermost casts to uphold (EQ). Eliminating reflexive casts is done
in mkCastTy. This is (EQ1) below.

Unfortunately, that's not the end of the story. Consider comparing
  (T a b c)      =?       (T a b |&gt; (co -&gt; &lt;Type&gt;)) (c |&gt; co)
These two types have the same kind (Type), but the left type is a TyConApp
while the right type is not. To handle this case, we say that the right-hand
type is ill-formed, requiring an AppTy never to have a casted TyConApp
on its left. It is easy enough to pull around the coercions to maintain
this invariant, as done in Type.mkAppTy. In the example above, trying to
form the right-hand type will instead yield (T a b (c |&gt; co |&gt; sym co) |&gt; &lt;Type&gt;).
Both the casts there are reflexive and will be dropped. Huzzah.

This idea of pulling coercions to the right works for splitAppTy as well.

However, there is one hiccup: it's possible that a coercion doesn't relate two
Pi-types. For example, if we have @type family Fun a b where Fun a b = a -&gt; b@,
then we might have (T :: Fun Type Type) and (T |&gt; axFun) Int. That axFun can't
be pulled to the right. But we don't need to pull it: (T |&gt; axFun) Int is not
`eqType` to any proper TyConApp -- thus, leaving it where it is doesn't violate
our (EQ) property.

In order to detect reflexive casts reliably, we must make sure not
to have nested casts: we update (t |&gt; co1 |&gt; co2) to (t |&gt; (co1 `TransCo` co2)).
This is (EQ2) below.

One other troublesome case is ForAllTy. See Note [Weird typing rule for ForAllTy].
The kind of the body is the same as the kind of the ForAllTy. Accordingly,

  ForAllTy tv (ty |&gt; co)     and     (ForAllTy tv ty) |&gt; co

are `eqType`. But only the first can be split by splitForAllTy. So we forbid
the second form, instead pushing the coercion inside to get the first form.
This is done in mkCastTy.

In sum, in order to uphold (EQ), we need the following invariants:

  (EQ1) No decomposable CastTy to the left of an AppTy, where a decomposable
        cast is one that relates either a FunTy to a FunTy or a
        ForAllTy to a ForAllTy.
  (EQ2) No reflexive casts in CastTy.
  (EQ3) No nested CastTys.
  (EQ4) No CastTy over (ForAllTy (Bndr tyvar vis) body).
        See Note [Weird typing rule for ForAllTy]

These invariants are all documented above, in the declaration for Type.

Note [Equality on FunTys]
~~~~~~~~~~~~~~~~~~~~~~~~~
A (FunTy vis mult arg res) is just an abbreviation for a
  TyConApp funTyCon [mult, arg_rep, res_rep, arg, res]
where
  arg :: TYPE arg_rep
  res :: TYPE res_rep
Note that the vis field of a FunTy appears nowhere in the
equivalent TyConApp. In Core, this is OK, because we no longer
care about the visibility of the argument in a FunTy
(the vis distinguishes between arg -&gt; res and arg =&gt; res).
In the type-checker, we are careful not to decompose FunTys
with an invisible argument. See also Note [Decomposing fat arrow c=&gt;t]
in GHC.Core.Type.

In order to compare FunTys while respecting how they could
expand into TyConApps, we must check
the kinds of the arg and the res.

Note [When we quantify over a coercion variable]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The ForAllTyBinder in a ForAllTy can be (most often) a TyVar or (rarely)
a CoVar. We support quantifying over a CoVar here in order to support
a homogeneous (~#) relation (someday -- not yet implemented). Here is
the example:

  type (:~~:) :: forall k1 k2. k1 -&gt; k2 -&gt; Type
  data a :~~: b where
    HRefl :: a :~~: a

Assuming homogeneous equality (that is, with
  (~#) :: forall k. k -&gt; k -&gt; TYPE (TupleRep '[])
) after rejigging to make equalities explicit, we get a constructor that
looks like

  HRefl :: forall k1 k2 (a :: k1) (b :: k2).
           forall (cv :: k1 ~# k2). (a |&gt; cv) ~# b
        =&gt; (:~~:) k1 k2 a b

Note that we must cast `a` by a cv bound in the same type in order to
make this work out.

See also https://gitlab.haskell.org/ghc/ghc/-/wikis/dependent-haskell/phase2
which gives a general road map that covers this space.

Having this feature in Core does *not* mean we have it in source Haskell.
See #15710 about that.

Note [Unused coercion variable in ForAllTy]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Suppose we have
  \(co:t1 ~# t2). e

What type should we give to the above expression?
  (1) forall (co:t1 ~# t2) -&gt; t
  (2) (t1 ~# t2) -&gt; t

If co is used in t, (1) should be the right choice.
if co is not used in t, we would like to have (1) and (2) equivalent.

However, we want to keep eqType simple and don't want eqType (1) (2) to return
True in any case.

We decide to always construct (2) if co is not used in t.

Thus in mkLamType, we check whether the variable is a coercion
variable (of type (t1 ~# t2), and whether it is un-used in the
body. If so, it returns a FunTy instead of a ForAllTy.

There are cases we want to skip the check. For example, the check is
unnecessary when it is known from the context that the input variable
is a type variable.  In those cases, we use mkForAllTy.

Note [Weird typing rule for ForAllTy]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Here is the (truncated) typing rule for the dependent ForAllTy:

  inner : TYPE r
  tyvar is not free in r
  ----------------------------------------
  ForAllTy (Bndr tyvar vis) inner : TYPE r

Note that the kind of `inner` is the kind of the overall ForAllTy. This is
necessary because every ForAllTy over a type variable is erased at runtime.
Thus the runtime representation of a ForAllTy (as encoded, via TYPE rep, in
the kind) must be the same as the representation of the body. We must check
for skolem-escape, though. The skolem-escape would prevent a definition like

  undefined :: forall (r :: RuntimeRep) (a :: TYPE r). a

because the type's kind (TYPE r) mentions the out-of-scope r. Luckily, the real
type of undefined is

  undefined :: forall (r :: RuntimeRep) (a :: TYPE r). HasCallStack =&gt; a

and that HasCallStack constraint neatly sidesteps the potential skolem-escape
problem.

If the bound variable is a coercion variable:

  inner : TYPE r
  covar is free in inner
  ------------------------------------
  ForAllTy (Bndr covar vis) inner : Type

Here, the kind of the ForAllTy is just Type, because coercion abstractions
are *not* erased. The &quot;covar is free in inner&quot; premise is solely to maintain
the representation invariant documented in
Note [Unused coercion variable in ForAllTy]. Though there is surface similarity
between this free-var check and the one in the tyvar rule, these two restrictions
are truly unrelated.

-}</span><span>
</span><span id="line-721"></span><span>
</span><span id="line-722"></span><span class="hs-comment">-- | A type labeled 'KnotTied' might have knot-tied tycons in it. See</span><span>
</span><span id="line-723"></span><span class="hs-comment">-- Note [Type checking recursive type and class declarations] in</span><span>
</span><span id="line-724"></span><span class="hs-comment">-- &quot;GHC.Tc.TyCl&quot;</span><span>
</span><span id="line-725"></span><span class="hs-keyword">type</span><span> </span><span id="KnotTied"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#KnotTied"><span class="hs-identifier hs-var">KnotTied</span></a></span></span><span> </span><span id="local-6989586621681600529"><span class="annot"><a href="#local-6989586621681600529"><span class="hs-identifier hs-type">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621681600529"><span class="hs-identifier hs-type">ty</span></a></span><span>
</span><span id="line-726"></span><span>
</span><span id="line-727"></span><span class="annot"><span class="hs-comment">{- **********************************************************************
*                                                                       *
                        PredType
*                                                                       *
********************************************************************** -}</span></span><span>
</span><span id="line-732"></span><span>
</span><span id="line-733"></span><span>
</span><span id="line-734"></span><span class="hs-comment">-- | A type of the form @p@ of constraint kind represents a value whose type is</span><span>
</span><span id="line-735"></span><span class="hs-comment">-- the Haskell predicate @p@, where a predicate is what occurs before</span><span>
</span><span id="line-736"></span><span class="hs-comment">-- the @=&gt;@ in a Haskell type.</span><span>
</span><span id="line-737"></span><span class="hs-comment">--</span><span>
</span><span id="line-738"></span><span class="hs-comment">-- We use 'PredType' as documentation to mark those types that we guarantee to</span><span>
</span><span id="line-739"></span><span class="hs-comment">-- have this kind.</span><span>
</span><span id="line-740"></span><span class="hs-comment">--</span><span>
</span><span id="line-741"></span><span class="hs-comment">-- It can be expanded into its representation, but:</span><span>
</span><span id="line-742"></span><span class="hs-comment">--</span><span>
</span><span id="line-743"></span><span class="hs-comment">-- * The type checker must treat it as opaque</span><span>
</span><span id="line-744"></span><span class="hs-comment">--</span><span>
</span><span id="line-745"></span><span class="hs-comment">-- * The rest of the compiler treats it as transparent</span><span>
</span><span id="line-746"></span><span class="hs-comment">--</span><span>
</span><span id="line-747"></span><span class="hs-comment">-- Consider these examples:</span><span>
</span><span id="line-748"></span><span class="hs-comment">--</span><span>
</span><span id="line-749"></span><span class="hs-comment">-- &gt; f :: (Eq a) =&gt; a -&gt; Int</span><span>
</span><span id="line-750"></span><span class="hs-comment">-- &gt; g :: (?x :: Int -&gt; Int) =&gt; a -&gt; Int</span><span>
</span><span id="line-751"></span><span class="hs-comment">-- &gt; h :: (r\l) =&gt; {r} =&gt; {l::Int | r}</span><span>
</span><span id="line-752"></span><span class="hs-comment">--</span><span>
</span><span id="line-753"></span><span class="hs-comment">-- Here the @Eq a@ and @?x :: Int -&gt; Int@ and @r\l@ are all called \&quot;predicates\&quot;</span><span>
</span><span id="line-754"></span><span class="hs-keyword">type</span><span> </span><span id="PredType"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#PredType"><span class="hs-identifier hs-var">PredType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-755"></span><span>
</span><span id="line-756"></span><span class="annot"><span class="hs-comment">-- | A collection of 'PredType's</span></span><span>
</span><span id="line-757"></span><span class="hs-keyword">type</span><span> </span><span id="ThetaType"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ThetaType"><span class="hs-identifier hs-var">ThetaType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#PredType"><span class="hs-identifier hs-type">PredType</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-758"></span><span>
</span><span id="line-759"></span><span class="hs-comment">{-
(We don't support TREX records yet, but the setup is designed
to expand to allow them.)

A Haskell qualified type, such as that for f,g,h above, is
represented using
        * a FunTy for the double arrow
        * with a type of kind Constraint as the function argument

The predicate really does turn into a real extra argument to the
function.  If the argument has type (p :: Constraint) then the predicate p is
represented by evidence of type p.


%************************************************************************
%*                                                                      *
            Simple constructors
%*                                                                      *
%************************************************************************

These functions are here so that they can be used by GHC.Builtin.Types.Prim,
which in turn is imported by Type
-}</span><span>
</span><span id="line-782"></span><span>
</span><span id="line-783"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkTyVarTy"><span class="hs-identifier hs-type">mkTyVarTy</span></a></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-784"></span><span id="mkTyVarTy"><span class="annot"><span class="annottext">mkTyVarTy :: TyVar -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkTyVarTy"><span class="hs-identifier hs-var hs-var">mkTyVarTy</span></a></span></span><span> </span><span id="local-6989586621681600530"><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681600530"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; Kind -&gt; Kind
forall a. HasCallStack =&gt; Bool -&gt; SDoc -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.html#assertPpr"><span class="hs-identifier hs-var">assertPpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyVar -&gt; Bool
</span><a href="GHC.Types.Var.html#isTyVar"><span class="hs-identifier hs-var">isTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681600530"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyVar -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681600530"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyVar -&gt; Kind
</span><a href="GHC.Types.Var.html#tyVarKind"><span class="hs-identifier hs-var">tyVarKind</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681600530"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; Kind) -&gt; Kind -&gt; Kind
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-785"></span><span>              </span><span class="annot"><span class="annottext">TyVar -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#TyVarTy"><span class="hs-identifier hs-var">TyVarTy</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681600530"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-786"></span><span>
</span><span id="line-787"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkTyVarTys"><span class="hs-identifier hs-type">mkTyVarTys</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-788"></span><span id="mkTyVarTys"><span class="annot"><span class="annottext">mkTyVarTys :: [TyVar] -&gt; [Kind]
</span><a href="GHC.Core.TyCo.Rep.html#mkTyVarTys"><span class="hs-identifier hs-var hs-var">mkTyVarTys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TyVar -&gt; Kind) -&gt; [TyVar] -&gt; [Kind]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkTyVarTy"><span class="hs-identifier hs-var">mkTyVarTy</span></a></span><span> </span><span class="hs-comment">-- a common use of mkTyVarTy</span><span>
</span><span id="line-789"></span><span>
</span><span id="line-790"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkTyCoVarTy"><span class="hs-identifier hs-type">mkTyCoVarTy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyCoVar"><span class="hs-identifier hs-type">TyCoVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-791"></span><span id="mkTyCoVarTy"><span class="annot"><span class="annottext">mkTyCoVarTy :: TyVar -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkTyCoVarTy"><span class="hs-identifier hs-var hs-var">mkTyCoVarTy</span></a></span></span><span> </span><span id="local-6989586621681600537"><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681600537"><span class="hs-identifier hs-var">v</span></a></span></span><span>
</span><span id="line-792"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyVar -&gt; Bool
</span><a href="GHC.Types.Var.html#isTyVar"><span class="hs-identifier hs-var">isTyVar</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681600537"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-793"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyVar -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#TyVarTy"><span class="hs-identifier hs-var">TyVarTy</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681600537"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-794"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>
</span><span id="line-795"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">KindCoercion -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#CoercionTy"><span class="hs-identifier hs-var">CoercionTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyVar -&gt; KindCoercion
</span><a href="GHC.Core.TyCo.Rep.html#CoVarCo"><span class="hs-identifier hs-var">CoVarCo</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681600537"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-796"></span><span>
</span><span id="line-797"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkTyCoVarTys"><span class="hs-identifier hs-type">mkTyCoVarTys</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#TyCoVar"><span class="hs-identifier hs-type">TyCoVar</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-798"></span><span id="mkTyCoVarTys"><span class="annot"><span class="annottext">mkTyCoVarTys :: [TyVar] -&gt; [Kind]
</span><a href="GHC.Core.TyCo.Rep.html#mkTyCoVarTys"><span class="hs-identifier hs-var hs-var">mkTyCoVarTys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TyVar -&gt; Kind) -&gt; [TyVar] -&gt; [Kind]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkTyCoVarTy"><span class="hs-identifier hs-var">mkTyCoVarTy</span></a></span><span>
</span><span id="line-799"></span><span>
</span><span id="line-800"></span><span class="hs-keyword">infixr</span><span> </span><span class="hs-number">3</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkFunTy"><span class="hs-operator hs-type">`mkFunTy`</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkInvisFunTy"><span class="hs-operator hs-type">`mkInvisFunTy`</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkVisFunTyMany"><span class="hs-operator hs-type">`mkVisFunTyMany`</span></a></span><span>
</span><span id="line-801"></span><span>
</span><span id="line-802"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkNakedFunTy"><span class="hs-identifier hs-type">mkNakedFunTy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#FunTyFlag"><span class="hs-identifier hs-type">FunTyFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Kind"><span class="hs-identifier hs-type">Kind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Kind"><span class="hs-identifier hs-type">Kind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Kind"><span class="hs-identifier hs-type">Kind</span></a></span><span>
</span><span id="line-803"></span><span class="hs-comment">-- See Note [Naked FunTy] in GHC.Builtin.Types</span><span>
</span><span id="line-804"></span><span class="hs-comment">-- Always Many multiplicity; kinds have no linearity</span><span>
</span><span id="line-805"></span><span id="mkNakedFunTy"><span class="annot"><span class="annottext">mkNakedFunTy :: FunTyFlag -&gt; Kind -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkNakedFunTy"><span class="hs-identifier hs-var hs-var">mkNakedFunTy</span></a></span></span><span> </span><span id="local-6989586621681600539"><span class="annot"><span class="annottext">FunTyFlag
</span><a href="#local-6989586621681600539"><span class="hs-identifier hs-var">af</span></a></span></span><span> </span><span id="local-6989586621681600540"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600540"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span id="local-6989586621681600541"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600541"><span class="hs-identifier hs-var">res</span></a></span></span><span>
</span><span id="line-806"></span><span> </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunTy"><span class="hs-identifier hs-type">FunTy</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ft_af :: FunTyFlag
</span><a href="GHC.Core.TyCo.Rep.html#ft_af"><span class="hs-identifier hs-var">ft_af</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunTyFlag
</span><a href="#local-6989586621681600539"><span class="hs-identifier hs-var">af</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_mult :: Kind
</span><a href="GHC.Core.TyCo.Rep.html#ft_mult"><span class="hs-identifier hs-var">ft_mult</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.html#manyDataConTy"><span class="hs-identifier hs-var">manyDataConTy</span></a></span><span>
</span><span id="line-807"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_arg :: Kind
</span><a href="GHC.Core.TyCo.Rep.html#ft_arg"><span class="hs-identifier hs-var">ft_arg</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600540"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_res :: Kind
</span><a href="GHC.Core.TyCo.Rep.html#ft_res"><span class="hs-identifier hs-var">ft_res</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600541"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-808"></span><span>
</span><span id="line-809"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkFunTy"><span class="hs-identifier hs-type">mkFunTy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#FunTyFlag"><span class="hs-identifier hs-type">FunTyFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-type">Mult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-810"></span><span id="mkFunTy"><span class="annot"><span class="annottext">mkFunTy :: (() :: Constraint) =&gt; FunTyFlag -&gt; Kind -&gt; Kind -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkFunTy"><span class="hs-identifier hs-var hs-var">mkFunTy</span></a></span></span><span> </span><span id="local-6989586621681600574"><span class="annot"><span class="annottext">FunTyFlag
</span><a href="#local-6989586621681600574"><span class="hs-identifier hs-var">af</span></a></span></span><span> </span><span id="local-6989586621681600575"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600575"><span class="hs-identifier hs-var">mult</span></a></span></span><span> </span><span id="local-6989586621681600576"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600576"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span id="local-6989586621681600577"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600577"><span class="hs-identifier hs-var">res</span></a></span></span><span>
</span><span id="line-811"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; SDoc -&gt; Kind -&gt; Kind
forall a. HasCallStack =&gt; Bool -&gt; SDoc -&gt; a -&gt; a
</span><a href="GHC.Utils.Panic.html#assertPpr"><span class="hs-identifier hs-var">assertPpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FunTyFlag
</span><a href="#local-6989586621681600574"><span class="hs-identifier hs-var">af</span></a></span><span> </span><span class="annot"><span class="annottext">FunTyFlag -&gt; FunTyFlag -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Kind -&gt; Kind -&gt; FunTyFlag
Kind -&gt; Kind -&gt; FunTyFlag
</span><a href="GHC.Core.Type.html#chooseFunTyFlag"><span class="hs-identifier hs-var">chooseFunTyFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600576"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600577"><span class="hs-identifier hs-var">res</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[SDoc] -&gt; SDoc
forall doc. IsDoc doc =&gt; [doc] -&gt; doc
</span><a href="GHC.Utils.Outputable.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-812"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;af&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FunTyFlag -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">FunTyFlag
</span><a href="#local-6989586621681600574"><span class="hs-identifier hs-var">af</span></a></span><span>
</span><span id="line-813"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;chooseAAF&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">FunTyFlag -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Kind -&gt; Kind -&gt; FunTyFlag
Kind -&gt; Kind -&gt; FunTyFlag
</span><a href="GHC.Core.Type.html#chooseFunTyFlag"><span class="hs-identifier hs-var">chooseFunTyFlag</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600576"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600577"><span class="hs-identifier hs-var">res</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-814"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;arg&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600576"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Kind -&gt; Kind
Kind -&gt; Kind
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600576"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-815"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;res&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600577"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc
</span><a href="GHC.Utils.Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Kind -&gt; Kind
Kind -&gt; Kind
</span><a href="GHC.Core.Type.html#typeKind"><span class="hs-identifier hs-var">typeKind</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600577"><span class="hs-identifier hs-var">res</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; Kind) -&gt; Kind -&gt; Kind
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-816"></span><span>    </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunTy"><span class="hs-identifier hs-type">FunTy</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ft_af :: FunTyFlag
</span><a href="GHC.Core.TyCo.Rep.html#ft_af"><span class="hs-identifier hs-var">ft_af</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunTyFlag
</span><a href="#local-6989586621681600574"><span class="hs-identifier hs-var">af</span></a></span><span>
</span><span id="line-817"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_mult :: Kind
</span><a href="GHC.Core.TyCo.Rep.html#ft_mult"><span class="hs-identifier hs-var">ft_mult</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600575"><span class="hs-identifier hs-var">mult</span></a></span><span>
</span><span id="line-818"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_arg :: Kind
</span><a href="GHC.Core.TyCo.Rep.html#ft_arg"><span class="hs-identifier hs-var">ft_arg</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600576"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-819"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_res :: Kind
</span><a href="GHC.Core.TyCo.Rep.html#ft_res"><span class="hs-identifier hs-var">ft_res</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600577"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-820"></span><span>
</span><span id="line-821"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkInvisFunTy"><span class="hs-identifier hs-type">mkInvisFunTy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-822"></span><span id="mkInvisFunTy"><span class="annot"><span class="annottext">mkInvisFunTy :: (() :: Constraint) =&gt; Kind -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkInvisFunTy"><span class="hs-identifier hs-var hs-var">mkInvisFunTy</span></a></span></span><span> </span><span id="local-6989586621681600583"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600583"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span id="local-6989586621681600584"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600584"><span class="hs-identifier hs-var">res</span></a></span></span><span>
</span><span id="line-823"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; FunTyFlag -&gt; Kind -&gt; Kind -&gt; Kind -&gt; Kind
FunTyFlag -&gt; Kind -&gt; Kind -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkFunTy"><span class="hs-identifier hs-var">mkFunTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeOrConstraint -&gt; FunTyFlag
</span><a href="GHC.Types.Var.html#invisArg"><span class="hs-identifier hs-var">invisArg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Kind -&gt; TypeOrConstraint
Kind -&gt; TypeOrConstraint
</span><a href="GHC.Core.Type.html#typeTypeOrConstraint"><span class="hs-identifier hs-var">typeTypeOrConstraint</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600584"><span class="hs-identifier hs-var">res</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.html#manyDataConTy"><span class="hs-identifier hs-var">manyDataConTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600583"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600584"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-824"></span><span>
</span><span id="line-825"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkInvisFunTys"><span class="hs-identifier hs-type">mkInvisFunTys</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-826"></span><span id="mkInvisFunTys"><span class="annot"><span class="annottext">mkInvisFunTys :: (() :: Constraint) =&gt; [Kind] -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkInvisFunTys"><span class="hs-identifier hs-var hs-var">mkInvisFunTys</span></a></span></span><span> </span><span id="local-6989586621681600590"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681600590"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span id="local-6989586621681600591"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600591"><span class="hs-identifier hs-var">res</span></a></span></span><span>
</span><span id="line-827"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; Kind -&gt; Kind) -&gt; Kind -&gt; [Kind] -&gt; Kind
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#foldr/Data.Foldable.html#foldr"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; FunTyFlag -&gt; Kind -&gt; Kind -&gt; Kind -&gt; Kind
FunTyFlag -&gt; Kind -&gt; Kind -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkFunTy"><span class="hs-identifier hs-var">mkFunTy</span></a></span><span> </span><span class="annot"><span class="annottext">FunTyFlag
</span><a href="#local-6989586621681600593"><span class="hs-identifier hs-var">af</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.html#manyDataConTy"><span class="hs-identifier hs-var">manyDataConTy</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600591"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681600590"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-828"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-829"></span><span>    </span><span id="local-6989586621681600593"><span class="annot"><span class="annottext">af :: FunTyFlag
</span><a href="#local-6989586621681600593"><span class="hs-identifier hs-var hs-var">af</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrConstraint -&gt; FunTyFlag
</span><a href="GHC.Types.Var.html#invisArg"><span class="hs-identifier hs-var">invisArg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Kind -&gt; TypeOrConstraint
Kind -&gt; TypeOrConstraint
</span><a href="GHC.Core.Type.html#typeTypeOrConstraint"><span class="hs-identifier hs-var">typeTypeOrConstraint</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600591"><span class="hs-identifier hs-var">res</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-830"></span><span>
</span><span id="line-831"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#tcMkVisFunTy"><span class="hs-identifier hs-type">tcMkVisFunTy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-type">Mult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-832"></span><span class="hs-comment">-- Always TypeLike, user-specified multiplicity.</span><span>
</span><span id="line-833"></span><span class="hs-comment">-- Does not have the assert-checking in mkFunTy: used by the typechecker</span><span>
</span><span id="line-834"></span><span class="hs-comment">-- to avoid looking at the result kind, which may not be zonked</span><span>
</span><span id="line-835"></span><span id="tcMkVisFunTy"><span class="annot"><span class="annottext">tcMkVisFunTy :: Kind -&gt; Kind -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#tcMkVisFunTy"><span class="hs-identifier hs-var hs-var">tcMkVisFunTy</span></a></span></span><span> </span><span id="local-6989586621681600594"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600594"><span class="hs-identifier hs-var">mult</span></a></span></span><span> </span><span id="local-6989586621681600595"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600595"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span id="local-6989586621681600596"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600596"><span class="hs-identifier hs-var">res</span></a></span></span><span>
</span><span id="line-836"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunTy"><span class="hs-identifier hs-type">FunTy</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ft_af :: FunTyFlag
</span><a href="GHC.Core.TyCo.Rep.html#ft_af"><span class="hs-identifier hs-var">ft_af</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunTyFlag
</span><a href="GHC.Types.Var.html#visArgTypeLike"><span class="hs-identifier hs-var">visArgTypeLike</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_mult :: Kind
</span><a href="GHC.Core.TyCo.Rep.html#ft_mult"><span class="hs-identifier hs-var">ft_mult</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600594"><span class="hs-identifier hs-var">mult</span></a></span><span>
</span><span id="line-837"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_arg :: Kind
</span><a href="GHC.Core.TyCo.Rep.html#ft_arg"><span class="hs-identifier hs-var">ft_arg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600595"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_res :: Kind
</span><a href="GHC.Core.TyCo.Rep.html#ft_res"><span class="hs-identifier hs-var">ft_res</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600596"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-838"></span><span>
</span><span id="line-839"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#tcMkInvisFunTy"><span class="hs-identifier hs-type">tcMkInvisFunTy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Basic.html#TypeOrConstraint"><span class="hs-identifier hs-type">TypeOrConstraint</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-840"></span><span class="hs-comment">-- Always TypeLike, invisible argument</span><span>
</span><span id="line-841"></span><span class="hs-comment">-- Does not have the assert-checking in mkFunTy: used by the typechecker</span><span>
</span><span id="line-842"></span><span class="hs-comment">-- to avoid looking at the result kind, which may not be zonked</span><span>
</span><span id="line-843"></span><span id="tcMkInvisFunTy"><span class="annot"><span class="annottext">tcMkInvisFunTy :: TypeOrConstraint -&gt; Kind -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#tcMkInvisFunTy"><span class="hs-identifier hs-var hs-var">tcMkInvisFunTy</span></a></span></span><span> </span><span id="local-6989586621681600598"><span class="annot"><span class="annottext">TypeOrConstraint
</span><a href="#local-6989586621681600598"><span class="hs-identifier hs-var">res_torc</span></a></span></span><span> </span><span id="local-6989586621681600599"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600599"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span id="local-6989586621681600600"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600600"><span class="hs-identifier hs-var">res</span></a></span></span><span>
</span><span id="line-844"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunTy"><span class="hs-identifier hs-type">FunTy</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ft_af :: FunTyFlag
</span><a href="GHC.Core.TyCo.Rep.html#ft_af"><span class="hs-identifier hs-var">ft_af</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrConstraint -&gt; FunTyFlag
</span><a href="GHC.Types.Var.html#invisArg"><span class="hs-identifier hs-var">invisArg</span></a></span><span> </span><span class="annot"><span class="annottext">TypeOrConstraint
</span><a href="#local-6989586621681600598"><span class="hs-identifier hs-var">res_torc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_mult :: Kind
</span><a href="GHC.Core.TyCo.Rep.html#ft_mult"><span class="hs-identifier hs-var">ft_mult</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.html#manyDataConTy"><span class="hs-identifier hs-var">manyDataConTy</span></a></span><span>
</span><span id="line-845"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_arg :: Kind
</span><a href="GHC.Core.TyCo.Rep.html#ft_arg"><span class="hs-identifier hs-var">ft_arg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600599"><span class="hs-identifier hs-var">arg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ft_res :: Kind
</span><a href="GHC.Core.TyCo.Rep.html#ft_res"><span class="hs-identifier hs-var">ft_res</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600600"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-846"></span><span>
</span><span id="line-847"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkVisFunTy"><span class="hs-identifier hs-type">mkVisFunTy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-type">Mult</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-848"></span><span class="hs-comment">-- Always TypeLike, user-specified multiplicity.</span><span>
</span><span id="line-849"></span><span id="mkVisFunTy"><span class="annot"><span class="annottext">mkVisFunTy :: (() :: Constraint) =&gt; Kind -&gt; Kind -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkVisFunTy"><span class="hs-identifier hs-var hs-var">mkVisFunTy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; FunTyFlag -&gt; Kind -&gt; Kind -&gt; Kind -&gt; Kind
FunTyFlag -&gt; Kind -&gt; Kind -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkFunTy"><span class="hs-identifier hs-var">mkFunTy</span></a></span><span> </span><span class="annot"><span class="annottext">FunTyFlag
</span><a href="GHC.Types.Var.html#visArgTypeLike"><span class="hs-identifier hs-var">visArgTypeLike</span></a></span><span>
</span><span id="line-850"></span><span>
</span><span id="line-851"></span><span class="hs-comment">-- | Make nested arrow types</span><span>
</span><span id="line-852"></span><span class="hs-comment">-- | Special, common, case: Arrow type with mult Many</span><span>
</span><span id="line-853"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkVisFunTyMany"><span class="hs-identifier hs-type">mkVisFunTyMany</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-854"></span><span class="hs-comment">-- Always TypeLike, multiplicity Many</span><span>
</span><span id="line-855"></span><span id="mkVisFunTyMany"><span class="annot"><span class="annottext">mkVisFunTyMany :: (() :: Constraint) =&gt; Kind -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkVisFunTyMany"><span class="hs-identifier hs-var hs-var">mkVisFunTyMany</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Kind -&gt; Kind -&gt; Kind -&gt; Kind
Kind -&gt; Kind -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkVisFunTy"><span class="hs-identifier hs-var">mkVisFunTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="GHC.Builtin.Types.html#manyDataConTy"><span class="hs-identifier hs-var">manyDataConTy</span></a></span><span>
</span><span id="line-856"></span><span>
</span><span id="line-857"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkVisFunTysMany"><span class="hs-identifier hs-type">mkVisFunTysMany</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-858"></span><span class="hs-comment">-- Always TypeLike, multiplicity Many</span><span>
</span><span id="line-859"></span><span id="mkVisFunTysMany"><span class="annot"><span class="annottext">mkVisFunTysMany :: [Kind] -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkVisFunTysMany"><span class="hs-identifier hs-var hs-var">mkVisFunTysMany</span></a></span></span><span> </span><span id="local-6989586621681600605"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681600605"><span class="hs-identifier hs-var">tys</span></a></span></span><span> </span><span id="local-6989586621681600606"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600606"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Kind -&gt; Kind -&gt; Kind) -&gt; Kind -&gt; [Kind] -&gt; Kind
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#foldr/Data.Foldable.html#foldr"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Kind -&gt; Kind -&gt; Kind
Kind -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkVisFunTyMany"><span class="hs-identifier hs-var">mkVisFunTyMany</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600606"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681600605"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-860"></span><span>
</span><span id="line-861"></span><span class="hs-comment">---------------</span><span>
</span><span id="line-862"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkScaledFunTy"><span class="hs-identifier hs-type">mkScaledFunTy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#FunTyFlag"><span class="hs-identifier hs-type">FunTyFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-863"></span><span id="mkScaledFunTy"><span class="annot"><span class="annottext">mkScaledFunTy :: (() :: Constraint) =&gt; FunTyFlag -&gt; Scaled Kind -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkScaledFunTy"><span class="hs-identifier hs-var hs-var">mkScaledFunTy</span></a></span></span><span> </span><span id="local-6989586621681600610"><span class="annot"><span class="annottext">FunTyFlag
</span><a href="#local-6989586621681600610"><span class="hs-identifier hs-var">af</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span id="local-6989586621681600612"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600612"><span class="hs-identifier hs-var">mult</span></a></span></span><span> </span><span id="local-6989586621681600613"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600613"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681600614"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600614"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; FunTyFlag -&gt; Kind -&gt; Kind -&gt; Kind -&gt; Kind
FunTyFlag -&gt; Kind -&gt; Kind -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkFunTy"><span class="hs-identifier hs-var">mkFunTy</span></a></span><span> </span><span class="annot"><span class="annottext">FunTyFlag
</span><a href="#local-6989586621681600610"><span class="hs-identifier hs-var">af</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600612"><span class="hs-identifier hs-var">mult</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600613"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600614"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-864"></span><span>
</span><span id="line-865"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkScaledFunTys"><span class="hs-identifier hs-type">mkScaledFunTys</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#HasDebugCallStack"><span class="hs-identifier hs-type">HasDebugCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-866"></span><span class="hs-comment">-- All visible args</span><span>
</span><span id="line-867"></span><span class="hs-comment">-- Result type can be TypeLike or ConstraintLike</span><span>
</span><span id="line-868"></span><span class="hs-comment">-- Example of the latter: dataConWrapperType for the data con of a class</span><span>
</span><span id="line-869"></span><span id="mkScaledFunTys"><span class="annot"><span class="annottext">mkScaledFunTys :: (() :: Constraint) =&gt; [Scaled Kind] -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkScaledFunTys"><span class="hs-identifier hs-var hs-var">mkScaledFunTys</span></a></span></span><span> </span><span id="local-6989586621681600619"><span class="annot"><span class="annottext">[Scaled Kind]
</span><a href="#local-6989586621681600619"><span class="hs-identifier hs-var">tys</span></a></span></span><span> </span><span id="local-6989586621681600620"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600620"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Scaled Kind -&gt; Kind -&gt; Kind) -&gt; Kind -&gt; [Scaled Kind] -&gt; Kind
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#foldr/Data.Foldable.html#foldr"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; FunTyFlag -&gt; Scaled Kind -&gt; Kind -&gt; Kind
FunTyFlag -&gt; Scaled Kind -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkScaledFunTy"><span class="hs-identifier hs-var">mkScaledFunTy</span></a></span><span> </span><span class="annot"><span class="annottext">FunTyFlag
</span><a href="#local-6989586621681600621"><span class="hs-identifier hs-var">af</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600620"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">[Scaled Kind]
</span><a href="#local-6989586621681600619"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-870"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-871"></span><span>    </span><span id="local-6989586621681600621"><span class="annot"><span class="annottext">af :: FunTyFlag
</span><a href="#local-6989586621681600621"><span class="hs-identifier hs-var hs-var">af</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeOrConstraint -&gt; FunTyFlag
</span><a href="GHC.Types.Var.html#visArg"><span class="hs-identifier hs-var">visArg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; Kind -&gt; TypeOrConstraint
Kind -&gt; TypeOrConstraint
</span><a href="GHC.Core.Type.html#typeTypeOrConstraint"><span class="hs-identifier hs-var">typeTypeOrConstraint</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600620"><span class="hs-identifier hs-var">ty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-872"></span><span>
</span><span id="line-873"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#tcMkScaledFunTys"><span class="hs-identifier hs-type">tcMkScaledFunTys</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-874"></span><span class="hs-comment">-- All visible args</span><span>
</span><span id="line-875"></span><span class="hs-comment">-- Result type must be TypeLike</span><span>
</span><span id="line-876"></span><span class="hs-comment">-- No mkFunTy assert checking; result kind may not be zonked</span><span>
</span><span id="line-877"></span><span id="tcMkScaledFunTys"><span class="annot"><span class="annottext">tcMkScaledFunTys :: [Scaled Kind] -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#tcMkScaledFunTys"><span class="hs-identifier hs-var hs-var">tcMkScaledFunTys</span></a></span></span><span> </span><span id="local-6989586621681600623"><span class="annot"><span class="annottext">[Scaled Kind]
</span><a href="#local-6989586621681600623"><span class="hs-identifier hs-var">tys</span></a></span></span><span> </span><span id="local-6989586621681600624"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600624"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Scaled Kind -&gt; Kind -&gt; Kind) -&gt; Kind -&gt; [Scaled Kind] -&gt; Kind
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#foldr/Data.Foldable.html#foldr"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="annot"><span class="annottext">Scaled Kind -&gt; Kind -&gt; Kind
</span><a href="#local-6989586621681600625"><span class="hs-identifier hs-var">mk</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600624"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">[Scaled Kind]
</span><a href="#local-6989586621681600623"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-878"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-879"></span><span>    </span><span id="local-6989586621681600625"><span class="annot"><span class="annottext">mk :: Scaled Kind -&gt; Kind -&gt; Kind
</span><a href="#local-6989586621681600625"><span class="hs-identifier hs-var hs-var">mk</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span id="local-6989586621681600626"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600626"><span class="hs-identifier hs-var">mult</span></a></span></span><span> </span><span id="local-6989586621681600627"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600627"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681600628"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600628"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Kind -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#tcMkVisFunTy"><span class="hs-identifier hs-var">tcMkVisFunTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600626"><span class="hs-identifier hs-var">mult</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600627"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600628"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-880"></span><span>
</span><span id="line-881"></span><span class="hs-comment">---------------</span><span>
</span><span id="line-882"></span><span class="hs-comment">-- | Like 'mkTyCoForAllTy', but does not check the occurrence of the binder</span><span>
</span><span id="line-883"></span><span class="hs-comment">-- See Note [Unused coercion variable in ForAllTy]</span><span>
</span><span id="line-884"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkForAllTy"><span class="hs-identifier hs-type">mkForAllTy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#ForAllTyBinder"><span class="hs-identifier hs-type">ForAllTyBinder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-885"></span><span id="mkForAllTy"><span class="annot"><span class="annottext">mkForAllTy :: ForAllTyBinder -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkForAllTy"><span class="hs-identifier hs-var hs-var">mkForAllTy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForAllTyBinder -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#ForAllTy"><span class="hs-identifier hs-var">ForAllTy</span></a></span><span>
</span><span id="line-886"></span><span>
</span><span id="line-887"></span><span class="annot"><span class="hs-comment">-- | Wraps foralls over the type using the provided 'TyCoVar's from left to right</span></span><span>
</span><span id="line-888"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkForAllTys"><span class="hs-identifier hs-type">mkForAllTys</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#ForAllTyBinder"><span class="hs-identifier hs-type">ForAllTyBinder</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-889"></span><span id="mkForAllTys"><span class="annot"><span class="annottext">mkForAllTys :: [ForAllTyBinder] -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkForAllTys"><span class="hs-identifier hs-var hs-var">mkForAllTys</span></a></span></span><span> </span><span id="local-6989586621681600629"><span class="annot"><span class="annottext">[ForAllTyBinder]
</span><a href="#local-6989586621681600629"><span class="hs-identifier hs-var">tyvars</span></a></span></span><span> </span><span id="local-6989586621681600630"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600630"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ForAllTyBinder -&gt; Kind -&gt; Kind)
-&gt; Kind -&gt; [ForAllTyBinder] -&gt; Kind
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#foldr/Data.Foldable.html#foldr"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="annot"><span class="annottext">ForAllTyBinder -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#ForAllTy"><span class="hs-identifier hs-var">ForAllTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600630"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">[ForAllTyBinder]
</span><a href="#local-6989586621681600629"><span class="hs-identifier hs-var">tyvars</span></a></span><span>
</span><span id="line-890"></span><span>
</span><span id="line-891"></span><span class="annot"><span class="hs-comment">-- | Wraps foralls over the type using the provided 'InvisTVBinder's from left to right</span></span><span>
</span><span id="line-892"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkInvisForAllTys"><span class="hs-identifier hs-type">mkInvisForAllTys</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#InvisTVBinder"><span class="hs-identifier hs-type">InvisTVBinder</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-893"></span><span id="mkInvisForAllTys"><span class="annot"><span class="annottext">mkInvisForAllTys :: [InvisTVBinder] -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkInvisForAllTys"><span class="hs-identifier hs-var hs-var">mkInvisForAllTys</span></a></span></span><span> </span><span id="local-6989586621681600631"><span class="annot"><span class="annottext">[InvisTVBinder]
</span><a href="#local-6989586621681600631"><span class="hs-identifier hs-var">tyvars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ForAllTyBinder] -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkForAllTys"><span class="hs-identifier hs-var">mkForAllTys</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[InvisTVBinder] -&gt; [ForAllTyBinder]
forall a. [VarBndr a Specificity] -&gt; [VarBndr a ForAllTyFlag]
</span><a href="GHC.Types.Var.html#tyVarSpecToBinders"><span class="hs-identifier hs-var">tyVarSpecToBinders</span></a></span><span> </span><span class="annot"><span class="annottext">[InvisTVBinder]
</span><a href="#local-6989586621681600631"><span class="hs-identifier hs-var">tyvars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-894"></span><span>
</span><span id="line-895"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkPiTy"><span class="hs-identifier hs-type">mkPiTy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#PiTyBinder"><span class="hs-identifier hs-type">PiTyBinder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-896"></span><span id="mkPiTy"><span class="annot"><span class="annottext">mkPiTy :: PiTyBinder -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkPiTy"><span class="hs-identifier hs-var hs-var">mkPiTy</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Anon"><span class="hs-identifier hs-type">Anon</span></a></span><span> </span><span id="local-6989586621681600634"><span class="annot"><span class="annottext">Scaled Kind
</span><a href="#local-6989586621681600634"><span class="hs-identifier hs-var">ty1</span></a></span></span><span> </span><span id="local-6989586621681600635"><span class="annot"><span class="annottext">FunTyFlag
</span><a href="#local-6989586621681600635"><span class="hs-identifier hs-var">af</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681600636"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600636"><span class="hs-identifier hs-var">ty2</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(() :: Constraint) =&gt; FunTyFlag -&gt; Scaled Kind -&gt; Kind -&gt; Kind
FunTyFlag -&gt; Scaled Kind -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkScaledFunTy"><span class="hs-identifier hs-var">mkScaledFunTy</span></a></span><span> </span><span class="annot"><span class="annottext">FunTyFlag
</span><a href="#local-6989586621681600635"><span class="hs-identifier hs-var">af</span></a></span><span> </span><span class="annot"><span class="annottext">Scaled Kind
</span><a href="#local-6989586621681600634"><span class="hs-identifier hs-var">ty1</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600636"><span class="hs-identifier hs-var">ty2</span></a></span><span>
</span><span id="line-897"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkPiTy"><span class="hs-identifier hs-var">mkPiTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Named"><span class="hs-identifier hs-type">Named</span></a></span><span> </span><span id="local-6989586621681600638"><span class="annot"><span class="annottext">ForAllTyBinder
</span><a href="#local-6989586621681600638"><span class="hs-identifier hs-var">bndr</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681600639"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600639"><span class="hs-identifier hs-var">ty</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForAllTyBinder -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkForAllTy"><span class="hs-identifier hs-var">mkForAllTy</span></a></span><span> </span><span class="annot"><span class="annottext">ForAllTyBinder
</span><a href="#local-6989586621681600638"><span class="hs-identifier hs-var">bndr</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600639"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-898"></span><span>
</span><span id="line-899"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkPiTys"><span class="hs-identifier hs-type">mkPiTys</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Var.html#PiTyBinder"><span class="hs-identifier hs-type">PiTyBinder</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-900"></span><span id="mkPiTys"><span class="annot"><span class="annottext">mkPiTys :: [PiTyBinder] -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkPiTys"><span class="hs-identifier hs-var hs-var">mkPiTys</span></a></span></span><span> </span><span id="local-6989586621681600640"><span class="annot"><span class="annottext">[PiTyBinder]
</span><a href="#local-6989586621681600640"><span class="hs-identifier hs-var">tbs</span></a></span></span><span> </span><span id="local-6989586621681600641"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600641"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PiTyBinder -&gt; Kind -&gt; Kind) -&gt; Kind -&gt; [PiTyBinder] -&gt; Kind
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#foldr/Data.Foldable.html#foldr"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="annot"><span class="annottext">PiTyBinder -&gt; Kind -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkPiTy"><span class="hs-identifier hs-var">mkPiTy</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681600641"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">[PiTyBinder]
</span><a href="#local-6989586621681600640"><span class="hs-identifier hs-var">tbs</span></a></span><span>
</span><span id="line-901"></span><span>
</span><span id="line-902"></span><span class="hs-comment">-- | 'mkNakedTyConTy' creates a nullary 'TyConApp'. In general you</span><span>
</span><span id="line-903"></span><span class="hs-comment">-- should rather use 'GHC.Core.Type.mkTyConTy', which picks the shared</span><span>
</span><span id="line-904"></span><span class="hs-comment">-- nullary TyConApp from inside the TyCon (via tyConNullaryTy.  But</span><span>
</span><span id="line-905"></span><span class="hs-comment">-- we have to build the TyConApp tc [] in that TyCon field; that's</span><span>
</span><span id="line-906"></span><span class="hs-comment">-- what 'mkNakedTyConTy' is for.</span><span>
</span><span id="line-907"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mkNakedTyConTy"><span class="hs-identifier hs-type">mkNakedTyConTy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-908"></span><span id="mkNakedTyConTy"><span class="annot"><span class="annottext">mkNakedTyConTy :: TyCon -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#mkNakedTyConTy"><span class="hs-identifier hs-var hs-var">mkNakedTyConTy</span></a></span></span><span> </span><span id="local-6989586621681600642"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681600642"><span class="hs-identifier hs-var">tycon</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; [Kind] -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-var">TyConApp</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621681600642"><span class="hs-identifier hs-var">tycon</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-909"></span><span>
</span><span id="line-910"></span><span class="hs-comment">{-
%************************************************************************
%*                                                                      *
            Coercions
%*                                                                      *
%************************************************************************
-}</span><span>
</span><span id="line-917"></span><span>
</span><span id="line-918"></span><span class="hs-comment">-- | A 'Coercion' is concrete evidence of the equality/convertibility</span><span>
</span><span id="line-919"></span><span class="hs-comment">-- of two types.</span><span>
</span><span id="line-920"></span><span>
</span><span id="line-921"></span><span class="hs-comment">-- If you edit this type, you may need to update the GHC formalism</span><span>
</span><span id="line-922"></span><span class="hs-comment">-- See Note [GHC Formalism] in GHC.Core.Lint</span><span>
</span><span id="line-923"></span><span class="hs-keyword">data</span><span> </span><span id="Coercion"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-var">Coercion</span></a></span></span><span>
</span><span id="line-924"></span><span>  </span><span class="hs-comment">-- Each constructor has a &quot;role signature&quot;, indicating the way roles are</span><span>
</span><span id="line-925"></span><span>  </span><span class="hs-comment">-- propagated through coercions.</span><span>
</span><span id="line-926"></span><span>  </span><span class="hs-comment">--    -  P, N, and R stand for coercions of the given role</span><span>
</span><span id="line-927"></span><span>  </span><span class="hs-comment">--    -  e stands for a coercion of a specific unknown role</span><span>
</span><span id="line-928"></span><span>  </span><span class="hs-comment">--           (think &quot;role polymorphism&quot;)</span><span>
</span><span id="line-929"></span><span>  </span><span class="hs-comment">--    -  &quot;e&quot; stands for an explicit role parameter indicating role e.</span><span>
</span><span id="line-930"></span><span>  </span><span class="hs-comment">--    -   _ stands for a parameter that is not a Role or Coercion.</span><span>
</span><span id="line-931"></span><span>
</span><span id="line-932"></span><span>  </span><span class="hs-comment">-- These ones mirror the shape of types</span><span>
</span><span id="line-933"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- Refl :: _ -&gt; N</span><span>
</span><span id="line-934"></span><span>    </span><span class="hs-comment">-- A special case reflexivity for a very common case: Nominal reflexivity</span><span>
</span><span id="line-935"></span><span>    </span><span class="hs-comment">-- If you need Representational, use (GRefl Representational ty MRefl)</span><span>
</span><span id="line-936"></span><span>    </span><span class="hs-comment">--                               not (SubCo (Refl ty))</span><span>
</span><span id="line-937"></span><span>    </span><span id="Refl"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Refl"><span class="hs-identifier hs-var">Refl</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>  </span><span class="hs-comment">-- See Note [Refl invariant]</span><span>
</span><span id="line-938"></span><span>
</span><span id="line-939"></span><span>  </span><span class="hs-comment">-- GRefl :: &quot;e&quot; -&gt; _ -&gt; Maybe N -&gt; e</span><span>
</span><span id="line-940"></span><span>  </span><span class="hs-comment">-- See Note [Generalized reflexive coercion]</span><span>
</span><span id="line-941"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="GRefl"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#GRefl"><span class="hs-identifier hs-var">GRefl</span></a></span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Role"><span class="hs-identifier hs-type">Role</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#MCoercionN"><span class="hs-identifier hs-type">MCoercionN</span></a></span><span>  </span><span class="hs-comment">-- See Note [Refl invariant]</span><span>
</span><span id="line-942"></span><span>          </span><span class="hs-comment">-- Use (Refl ty), not (GRefl Nominal ty MRefl)</span><span>
</span><span id="line-943"></span><span>          </span><span class="hs-comment">-- Use (GRefl Representational _ _), not (SubCo (GRefl Nominal _ _))</span><span>
</span><span id="line-944"></span><span>
</span><span id="line-945"></span><span>  </span><span class="hs-comment">-- These ones simply lift the correspondingly-named</span><span>
</span><span id="line-946"></span><span>  </span><span class="hs-comment">-- Type constructors into Coercions</span><span>
</span><span id="line-947"></span><span>
</span><span id="line-948"></span><span>  </span><span class="hs-comment">-- TyConAppCo :: &quot;e&quot; -&gt; _ -&gt; ?? -&gt; e</span><span>
</span><span id="line-949"></span><span>  </span><span class="hs-comment">-- See Note [TyConAppCo roles]</span><span>
</span><span id="line-950"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="TyConAppCo"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConAppCo"><span class="hs-identifier hs-var">TyConAppCo</span></a></span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Role"><span class="hs-identifier hs-type">Role</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span class="hs-special">]</span><span>    </span><span class="hs-comment">-- lift TyConApp</span><span>
</span><span id="line-951"></span><span>               </span><span class="hs-comment">-- The TyCon is never a synonym;</span><span>
</span><span id="line-952"></span><span>               </span><span class="hs-comment">-- we expand synonyms eagerly</span><span>
</span><span id="line-953"></span><span>               </span><span class="hs-comment">-- But it can be a type function</span><span>
</span><span id="line-954"></span><span>               </span><span class="hs-comment">-- TyCon is never a saturated (-&gt;); use FunCo instead</span><span>
</span><span id="line-955"></span><span>
</span><span id="line-956"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="AppCo"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AppCo"><span class="hs-identifier hs-var">AppCo</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionN"><span class="hs-identifier hs-type">CoercionN</span></a></span><span>             </span><span class="hs-comment">-- lift AppTy</span><span>
</span><span id="line-957"></span><span>          </span><span class="hs-comment">-- AppCo :: e -&gt; N -&gt; e</span><span>
</span><span id="line-958"></span><span>
</span><span id="line-959"></span><span>  </span><span class="hs-comment">-- See Note [Forall coercions]</span><span>
</span><span id="line-960"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ForAllCo"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ForAllCo"><span class="hs-identifier hs-var">ForAllCo</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyCoVar"><span class="hs-identifier hs-type">TyCoVar</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#KindCoercion"><span class="hs-identifier hs-type">KindCoercion</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span>
</span><span id="line-961"></span><span>         </span><span class="hs-comment">-- ForAllCo :: _ -&gt; N -&gt; e -&gt; e</span><span>
</span><span id="line-962"></span><span>
</span><span id="line-963"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="FunCo"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunCo"><span class="hs-identifier hs-var">FunCo</span></a></span></span><span>  </span><span class="hs-comment">-- FunCo :: &quot;e&quot; -&gt; N/P -&gt; e -&gt; e -&gt; e</span><span>
</span><span id="line-964"></span><span>           </span><span class="hs-comment">-- See Note [FunCo] for fco_afl, fco_afr</span><span>
</span><span id="line-965"></span><span>       </span><span class="hs-special">{</span><span> </span><span id="fco_role"><span class="annot"><span class="annottext">KindCoercion -&gt; Role
</span><a href="GHC.Core.TyCo.Rep.html#fco_role"><span class="hs-identifier hs-var hs-var">fco_role</span></a></span></span><span>         </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Role"><span class="hs-identifier hs-type">Role</span></a></span><span>
</span><span id="line-966"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="fco_afl"><span class="annot"><span class="annottext">KindCoercion -&gt; FunTyFlag
</span><a href="GHC.Core.TyCo.Rep.html#fco_afl"><span class="hs-identifier hs-var hs-var">fco_afl</span></a></span></span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#FunTyFlag"><span class="hs-identifier hs-type">FunTyFlag</span></a></span><span>   </span><span class="hs-comment">-- Arrow for coercionLKind</span><span>
</span><span id="line-967"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="fco_afr"><span class="annot"><span class="annottext">KindCoercion -&gt; FunTyFlag
</span><a href="GHC.Core.TyCo.Rep.html#fco_afr"><span class="hs-identifier hs-var hs-var">fco_afr</span></a></span></span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#FunTyFlag"><span class="hs-identifier hs-type">FunTyFlag</span></a></span><span>   </span><span class="hs-comment">-- Arrow for coercionRKind</span><span>
</span><span id="line-968"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="fco_mult"><span class="annot"><span class="annottext">KindCoercion -&gt; KindCoercion
</span><a href="GHC.Core.TyCo.Rep.html#fco_mult"><span class="hs-identifier hs-var hs-var">fco_mult</span></a></span></span><span>         </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionN"><span class="hs-identifier hs-type">CoercionN</span></a></span><span>
</span><span id="line-969"></span><span>        </span><span class="hs-special">,</span><span> </span><span id="fco_arg"><span class="annot"><span class="annottext">KindCoercion -&gt; KindCoercion
</span><a href="GHC.Core.TyCo.Rep.html#fco_arg"><span class="hs-identifier hs-var hs-var">fco_arg</span></a></span></span><span class="hs-special">,</span><span> </span><span id="fco_res"><span class="annot"><span class="annottext">KindCoercion -&gt; KindCoercion
</span><a href="GHC.Core.TyCo.Rep.html#fco_res"><span class="hs-identifier hs-var hs-var">fco_res</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-970"></span><span>       </span><span class="hs-comment">-- (if the role &quot;e&quot; is Phantom, the first coercion is, too)</span><span>
</span><span id="line-971"></span><span>       </span><span class="hs-comment">-- the first coercion is for the multiplicity</span><span>
</span><span id="line-972"></span><span>
</span><span id="line-973"></span><span>  </span><span class="hs-comment">-- These are special</span><span>
</span><span id="line-974"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="CoVarCo"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoVarCo"><span class="hs-identifier hs-var">CoVarCo</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Var.html#CoVar"><span class="hs-identifier hs-type">CoVar</span></a></span><span>      </span><span class="hs-comment">-- :: _ -&gt; (N or R)</span><span>
</span><span id="line-975"></span><span>                       </span><span class="hs-comment">-- result role depends on the tycon of the variable's type</span><span>
</span><span id="line-976"></span><span>
</span><span id="line-977"></span><span>    </span><span class="hs-comment">-- AxiomInstCo :: e -&gt; _ -&gt; ?? -&gt; e</span><span>
</span><span id="line-978"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="AxiomInstCo"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AxiomInstCo"><span class="hs-identifier hs-var">AxiomInstCo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiom"><span class="hs-identifier hs-type">CoAxiom</span></a></span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#Branched"><span class="hs-identifier hs-type">Branched</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#BranchIndex"><span class="hs-identifier hs-type">BranchIndex</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-979"></span><span>     </span><span class="hs-comment">-- See also [CoAxiom index]</span><span>
</span><span id="line-980"></span><span>     </span><span class="hs-comment">-- The coercion arguments always *precisely* saturate</span><span>
</span><span id="line-981"></span><span>     </span><span class="hs-comment">-- arity of (that branch of) the CoAxiom. If there are</span><span>
</span><span id="line-982"></span><span>     </span><span class="hs-comment">-- any left over, we use AppCo.</span><span>
</span><span id="line-983"></span><span>     </span><span class="hs-comment">-- See [Coercion axioms applied to coercions]</span><span>
</span><span id="line-984"></span><span>     </span><span class="hs-comment">-- The roles of the argument coercions are determined</span><span>
</span><span id="line-985"></span><span>     </span><span class="hs-comment">-- by the cab_roles field of the relevant branch of the CoAxiom</span><span>
</span><span id="line-986"></span><span>
</span><span id="line-987"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="AxiomRuleCo"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AxiomRuleCo"><span class="hs-identifier hs-var">AxiomRuleCo</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.Coercion.Axiom.html#CoAxiomRule"><span class="hs-identifier hs-type">CoAxiomRule</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-988"></span><span>    </span><span class="hs-comment">-- AxiomRuleCo is very like AxiomInstCo, but for a CoAxiomRule</span><span>
</span><span id="line-989"></span><span>    </span><span class="hs-comment">-- The number coercions should match exactly the expectations</span><span>
</span><span id="line-990"></span><span>    </span><span class="hs-comment">-- of the CoAxiomRule (i.e., the rule is fully saturated).</span><span>
</span><span id="line-991"></span><span>
</span><span id="line-992"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UnivCo"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#UnivCo"><span class="hs-identifier hs-var">UnivCo</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#UnivCoProvenance"><span class="hs-identifier hs-type">UnivCoProvenance</span></a></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Role"><span class="hs-identifier hs-type">Role</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-993"></span><span>      </span><span class="hs-comment">-- :: _ -&gt; &quot;e&quot; -&gt; _ -&gt; _ -&gt; e</span><span>
</span><span id="line-994"></span><span>
</span><span id="line-995"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="SymCo"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#SymCo"><span class="hs-identifier hs-var">SymCo</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span>             </span><span class="hs-comment">-- :: e -&gt; e</span><span>
</span><span id="line-996"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="TransCo"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TransCo"><span class="hs-identifier hs-var">TransCo</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span>  </span><span class="hs-comment">-- :: e -&gt; e -&gt; e</span><span>
</span><span id="line-997"></span><span>
</span><span id="line-998"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="SelCo"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#SelCo"><span class="hs-identifier hs-var">SelCo</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoSel"><span class="hs-identifier hs-type">CoSel</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span>  </span><span class="hs-comment">-- See Note [SelCo]</span><span>
</span><span id="line-999"></span><span>
</span><span id="line-1000"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="LRCo"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#LRCo"><span class="hs-identifier hs-var">LRCo</span></a></span></span><span>   </span><span class="annot"><a href="GHC.Types.Basic.html#LeftOrRight"><span class="hs-identifier hs-type">LeftOrRight</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionN"><span class="hs-identifier hs-type">CoercionN</span></a></span><span>     </span><span class="hs-comment">-- Decomposes (t_left t_right)</span><span>
</span><span id="line-1001"></span><span>    </span><span class="hs-comment">-- :: _ -&gt; N -&gt; N</span><span>
</span><span id="line-1002"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="InstCo"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#InstCo"><span class="hs-identifier hs-var">InstCo</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionN"><span class="hs-identifier hs-type">CoercionN</span></a></span><span>
</span><span id="line-1003"></span><span>    </span><span class="hs-comment">-- :: e -&gt; N -&gt; e</span><span>
</span><span id="line-1004"></span><span>    </span><span class="hs-comment">-- See Note [InstCo roles]</span><span>
</span><span id="line-1005"></span><span>
</span><span id="line-1006"></span><span>  </span><span class="hs-comment">-- Extract a kind coercion from a (heterogeneous) type coercion</span><span>
</span><span id="line-1007"></span><span>  </span><span class="hs-comment">-- NB: all kind coercions are Nominal</span><span>
</span><span id="line-1008"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="KindCo"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#KindCo"><span class="hs-identifier hs-var">KindCo</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span>
</span><span id="line-1009"></span><span>     </span><span class="hs-comment">-- :: e -&gt; N</span><span>
</span><span id="line-1010"></span><span>
</span><span id="line-1011"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="SubCo"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#SubCo"><span class="hs-identifier hs-var">SubCo</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionN"><span class="hs-identifier hs-type">CoercionN</span></a></span><span>                  </span><span class="hs-comment">-- Turns a ~N into a ~R</span><span>
</span><span id="line-1012"></span><span>    </span><span class="hs-comment">-- :: N -&gt; R</span><span>
</span><span id="line-1013"></span><span>
</span><span id="line-1014"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="HoleCo"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#HoleCo"><span class="hs-identifier hs-var">HoleCo</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a></span><span>              </span><span class="hs-comment">-- ^ See Note [Coercion holes]</span><span>
</span><span id="line-1015"></span><span>                                     </span><span class="hs-comment">-- Only present during typechecking</span><span>
</span><span id="line-1016"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621681600671"><span id="local-6989586621681600724"><span id="local-6989586621681600768"><span id="local-6989586621681600770"><span id="local-6989586621681600772"><span id="local-6989586621681600777"><span id="local-6989586621681600782"><span id="local-6989586621681600785"><span id="local-6989586621681600788"><span id="local-6989586621681600791"><span id="local-6989586621681600794"><span id="local-6989586621681600797"><span id="local-6989586621681600802"><span id="local-6989586621681600807"><span class="annot"><span class="annottext">Typeable KindCoercion
Typeable KindCoercion =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; KindCoercion -&gt; c KindCoercion)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c KindCoercion)
-&gt; (KindCoercion -&gt; Constr)
-&gt; (KindCoercion -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c KindCoercion))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c KindCoercion))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; KindCoercion -&gt; KindCoercion)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; KindCoercion -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; KindCoercion -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; KindCoercion -&gt; [u])
-&gt; (forall u.
    Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; KindCoercion -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; KindCoercion -&gt; m KindCoercion)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; KindCoercion -&gt; m KindCoercion)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; KindCoercion -&gt; m KindCoercion)
-&gt; Data KindCoercion
KindCoercion -&gt; Constr
KindCoercion -&gt; DataType
(forall b. Data b =&gt; b -&gt; b) -&gt; KindCoercion -&gt; KindCoercion
forall a.
Typeable a =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; KindCoercion -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; KindCoercion -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; KindCoercion -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; KindCoercion -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; KindCoercion -&gt; m KindCoercion
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; KindCoercion -&gt; m KindCoercion
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c KindCoercion
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; KindCoercion -&gt; c KindCoercion
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c KindCoercion)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c KindCoercion)
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; KindCoercion -&gt; c KindCoercion
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; KindCoercion -&gt; c KindCoercion
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c KindCoercion
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c KindCoercion
$ctoConstr :: KindCoercion -&gt; Constr
toConstr :: KindCoercion -&gt; Constr
$cdataTypeOf :: KindCoercion -&gt; DataType
dataTypeOf :: KindCoercion -&gt; DataType
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c KindCoercion)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c KindCoercion)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c KindCoercion)
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c KindCoercion)
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; KindCoercion -&gt; KindCoercion
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; KindCoercion -&gt; KindCoercion
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; KindCoercion -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; KindCoercion -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; KindCoercion -&gt; r
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; KindCoercion -&gt; r
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; KindCoercion -&gt; [u]
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; KindCoercion -&gt; [u]
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; KindCoercion -&gt; u
gmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; KindCoercion -&gt; u
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; KindCoercion -&gt; m KindCoercion
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; KindCoercion -&gt; m KindCoercion
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; KindCoercion -&gt; m KindCoercion
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; KindCoercion -&gt; m KindCoercion
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; KindCoercion -&gt; m KindCoercion
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; KindCoercion -&gt; m KindCoercion
</span><a href="../../base-4.18.3.0/src/Data.Data.html#Data/Data.Data.html#Data"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data.Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-1017"></span><span>
</span><span id="line-1018"></span><span class="hs-keyword">data</span><span> </span><span id="CoSel"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoSel"><span class="hs-identifier hs-var">CoSel</span></a></span></span><span>  </span><span class="hs-comment">-- See Note [SelCo]</span><span>
</span><span id="line-1019"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="SelTyCon"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#SelTyCon"><span class="hs-identifier hs-var">SelTyCon</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Basic.html#Role"><span class="hs-identifier hs-type">Role</span></a></span><span>  </span><span class="hs-comment">-- Decomposes (T co1 ... con); zero-indexed</span><span>
</span><span id="line-1020"></span><span>                       </span><span class="hs-comment">-- Invariant: Given: SelCo (SelTyCon i r) co</span><span>
</span><span id="line-1021"></span><span>                       </span><span class="hs-comment">--            we have r == tyConRole (coercionRole co) tc</span><span>
</span><span id="line-1022"></span><span>                       </span><span class="hs-comment">--                and tc1 == tc2</span><span>
</span><span id="line-1023"></span><span>                       </span><span class="hs-comment">--            where T tc1 _ = coercionLKind co</span><span>
</span><span id="line-1024"></span><span>                       </span><span class="hs-comment">--                  T tc2 _ = coercionRKind co</span><span>
</span><span id="line-1025"></span><span>                       </span><span class="hs-comment">-- See Note [SelCo]</span><span>
</span><span id="line-1026"></span><span>
</span><span id="line-1027"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="SelFun"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#SelFun"><span class="hs-identifier hs-var">SelFun</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunSel"><span class="hs-identifier hs-type">FunSel</span></a></span><span>      </span><span class="hs-comment">-- Decomposes (co1 -&gt; co2)</span><span>
</span><span id="line-1028"></span><span>
</span><span id="line-1029"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="SelForAll"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#SelForAll"><span class="hs-identifier hs-var">SelForAll</span></a></span></span><span>          </span><span class="hs-comment">-- Decomposes (forall a. co)</span><span>
</span><span id="line-1030"></span><span>
</span><span id="line-1031"></span><span>  </span><span class="hs-keyword">deriving</span><span class="hs-special">(</span><span> </span><span id="local-6989586621681600815"><span id="local-6989586621681600823"><span class="annot"><span class="annottext">CoSel -&gt; CoSel -&gt; Bool
(CoSel -&gt; CoSel -&gt; Bool) -&gt; (CoSel -&gt; CoSel -&gt; Bool) -&gt; Eq CoSel
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: CoSel -&gt; CoSel -&gt; Bool
== :: CoSel -&gt; CoSel -&gt; Bool
$c/= :: CoSel -&gt; CoSel -&gt; Bool
/= :: CoSel -&gt; CoSel -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681600829"><span id="local-6989586621681600835"><span id="local-6989586621681600840"><span id="local-6989586621681600842"><span id="local-6989586621681600844"><span id="local-6989586621681600849"><span id="local-6989586621681600854"><span id="local-6989586621681600857"><span id="local-6989586621681600860"><span id="local-6989586621681600863"><span id="local-6989586621681600866"><span id="local-6989586621681600869"><span id="local-6989586621681600874"><span id="local-6989586621681600879"><span class="annot"><span class="annottext">Typeable CoSel
Typeable CoSel =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; CoSel -&gt; c CoSel)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c CoSel)
-&gt; (CoSel -&gt; Constr)
-&gt; (CoSel -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c CoSel))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c CoSel))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; CoSel -&gt; CoSel)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; CoSel -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; CoSel -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; CoSel -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; CoSel -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; CoSel -&gt; m CoSel)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; CoSel -&gt; m CoSel)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; CoSel -&gt; m CoSel)
-&gt; Data CoSel
CoSel -&gt; Constr
CoSel -&gt; DataType
(forall b. Data b =&gt; b -&gt; b) -&gt; CoSel -&gt; CoSel
forall a.
Typeable a =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; CoSel -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; CoSel -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; CoSel -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; CoSel -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; CoSel -&gt; m CoSel
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; CoSel -&gt; m CoSel
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c CoSel
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; CoSel -&gt; c CoSel
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c CoSel)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c CoSel)
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; CoSel -&gt; c CoSel
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; CoSel -&gt; c CoSel
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c CoSel
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c CoSel
$ctoConstr :: CoSel -&gt; Constr
toConstr :: CoSel -&gt; Constr
$cdataTypeOf :: CoSel -&gt; DataType
dataTypeOf :: CoSel -&gt; DataType
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c CoSel)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c CoSel)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c CoSel)
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c CoSel)
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; CoSel -&gt; CoSel
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; CoSel -&gt; CoSel
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; CoSel -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; CoSel -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; CoSel -&gt; r
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; CoSel -&gt; r
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; CoSel -&gt; [u]
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; CoSel -&gt; [u]
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; CoSel -&gt; u
gmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; CoSel -&gt; u
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; CoSel -&gt; m CoSel
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; CoSel -&gt; m CoSel
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; CoSel -&gt; m CoSel
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; CoSel -&gt; m CoSel
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; CoSel -&gt; m CoSel
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; CoSel -&gt; m CoSel
</span><a href="../../base-4.18.3.0/src/Data.Data.html#Data/Data.Data.html#Data"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data.Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-1032"></span><span>
</span><span id="line-1033"></span><span class="hs-keyword">data</span><span> </span><span id="FunSel"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunSel"><span class="hs-identifier hs-var">FunSel</span></a></span></span><span>  </span><span class="hs-comment">-- See Note [SelCo]</span><span>
</span><span id="line-1034"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="SelMult"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#SelMult"><span class="hs-identifier hs-var">SelMult</span></a></span></span><span>  </span><span class="hs-comment">-- Multiplicity</span><span>
</span><span id="line-1035"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="SelArg"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#SelArg"><span class="hs-identifier hs-var">SelArg</span></a></span></span><span>   </span><span class="hs-comment">-- Argument of function</span><span>
</span><span id="line-1036"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="SelRes"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#SelRes"><span class="hs-identifier hs-var">SelRes</span></a></span></span><span>   </span><span class="hs-comment">-- Result of function</span><span>
</span><span id="line-1037"></span><span>  </span><span class="hs-keyword">deriving</span><span class="hs-special">(</span><span> </span><span id="local-6989586621681600887"><span id="local-6989586621681600889"><span class="annot"><span class="annottext">FunSel -&gt; FunSel -&gt; Bool
(FunSel -&gt; FunSel -&gt; Bool)
-&gt; (FunSel -&gt; FunSel -&gt; Bool) -&gt; Eq FunSel
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: FunSel -&gt; FunSel -&gt; Bool
== :: FunSel -&gt; FunSel -&gt; Bool
$c/= :: FunSel -&gt; FunSel -&gt; Bool
/= :: FunSel -&gt; FunSel -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681600894"><span id="local-6989586621681600896"><span id="local-6989586621681600898"><span id="local-6989586621681600900"><span id="local-6989586621681600902"><span id="local-6989586621681600907"><span id="local-6989586621681600912"><span id="local-6989586621681600915"><span id="local-6989586621681600918"><span id="local-6989586621681600921"><span id="local-6989586621681600924"><span id="local-6989586621681600927"><span id="local-6989586621681600932"><span id="local-6989586621681600937"><span class="annot"><span class="annottext">Typeable FunSel
Typeable FunSel =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; FunSel -&gt; c FunSel)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c FunSel)
-&gt; (FunSel -&gt; Constr)
-&gt; (FunSel -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c FunSel))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c FunSel))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; FunSel -&gt; FunSel)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FunSel -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FunSel -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; FunSel -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; FunSel -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; FunSel -&gt; m FunSel)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; FunSel -&gt; m FunSel)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; FunSel -&gt; m FunSel)
-&gt; Data FunSel
FunSel -&gt; Constr
FunSel -&gt; DataType
(forall b. Data b =&gt; b -&gt; b) -&gt; FunSel -&gt; FunSel
forall a.
Typeable a =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; FunSel -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; FunSel -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FunSel -&gt; r
forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FunSel -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; FunSel -&gt; m FunSel
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; FunSel -&gt; m FunSel
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c FunSel
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; FunSel -&gt; c FunSel
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c FunSel)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c FunSel)
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; FunSel -&gt; c FunSel
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; FunSel -&gt; c FunSel
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c FunSel
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c FunSel
$ctoConstr :: FunSel -&gt; Constr
toConstr :: FunSel -&gt; Constr
$cdataTypeOf :: FunSel -&gt; DataType
dataTypeOf :: FunSel -&gt; DataType
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c FunSel)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c FunSel)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c FunSel)
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c FunSel)
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; FunSel -&gt; FunSel
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; FunSel -&gt; FunSel
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FunSel -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FunSel -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FunSel -&gt; r
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; FunSel -&gt; r
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; FunSel -&gt; [u]
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; FunSel -&gt; [u]
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; FunSel -&gt; u
gmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; FunSel -&gt; u
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; FunSel -&gt; m FunSel
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; FunSel -&gt; m FunSel
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; FunSel -&gt; m FunSel
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; FunSel -&gt; m FunSel
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; FunSel -&gt; m FunSel
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; FunSel -&gt; m FunSel
</span><a href="../../base-4.18.3.0/src/Data.Data.html#Data/Data.Data.html#Data"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data.Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-1038"></span><span>
</span><span id="line-1039"></span><span class="hs-keyword">type</span><span> </span><span id="CoercionN"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionN"><span class="hs-identifier hs-var">CoercionN</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span>       </span><span class="hs-comment">-- always nominal</span><span>
</span><span id="line-1040"></span><span class="hs-keyword">type</span><span> </span><span id="CoercionR"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionR"><span class="hs-identifier hs-var">CoercionR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span>       </span><span class="hs-comment">-- always representational</span><span>
</span><span id="line-1041"></span><span class="hs-keyword">type</span><span> </span><span id="CoercionP"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionP"><span class="hs-identifier hs-var">CoercionP</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span>       </span><span class="hs-comment">-- always phantom</span><span>
</span><span id="line-1042"></span><span class="hs-keyword">type</span><span> </span><span id="KindCoercion"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#KindCoercion"><span class="hs-identifier hs-var">KindCoercion</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionN"><span class="hs-identifier hs-type">CoercionN</span></a></span><span>   </span><span class="hs-comment">-- always nominal</span><span>
</span><span id="line-1043"></span><span>
</span><span id="line-1044"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1045"></span><span>  </span><span id="local-6989586621681600943"><span class="annot"><span class="annottext">ppr :: KindCoercion -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">KindCoercion -&gt; SDoc
</span><a href="GHC.Core.TyCo.Ppr.html#pprCo"><span class="hs-identifier hs-var">pprCo</span></a></span><span>
</span><span id="line-1046"></span><span>
</span><span id="line-1047"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoSel"><span class="hs-identifier hs-type">CoSel</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1048"></span><span>  </span><span id="local-6989586621681600956"><span class="annot"><span class="annottext">ppr :: CoSel -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#SelTyCon"><span class="hs-identifier hs-type">SelTyCon</span></a></span><span> </span><span id="local-6989586621681600957"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681600957"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681600958"><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681600958"><span class="hs-identifier hs-var">_r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Tc&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; SDoc
forall doc. IsLine doc =&gt; Int -&gt; doc
</span><a href="GHC.Utils.Outputable.html#int"><span class="hs-identifier hs-var">int</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681600957"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1049"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">CoSel
</span><a href="GHC.Core.TyCo.Rep.html#SelForAll"><span class="hs-identifier hs-var">SelForAll</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;All&quot;</span></span><span>
</span><span id="line-1050"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#SelFun"><span class="hs-identifier hs-type">SelFun</span></a></span><span> </span><span id="local-6989586621681600962"><span class="annot"><span class="annottext">FunSel
</span><a href="#local-6989586621681600962"><span class="hs-identifier hs-var">fs</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Fun&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FunSel -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">FunSel
</span><a href="#local-6989586621681600962"><span class="hs-identifier hs-var">fs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1051"></span><span>
</span><span id="line-1052"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunSel"><span class="hs-identifier hs-type">FunSel</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1053"></span><span>  </span><span id="local-6989586621681600967"><span class="annot"><span class="annottext">ppr :: FunSel -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="annot"><span class="annottext">FunSel
</span><a href="GHC.Core.TyCo.Rep.html#SelMult"><span class="hs-identifier hs-var">SelMult</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mult&quot;</span></span><span>
</span><span id="line-1054"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">FunSel
</span><a href="GHC.Core.TyCo.Rep.html#SelArg"><span class="hs-identifier hs-var">SelArg</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;arg&quot;</span></span><span>
</span><span id="line-1055"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">FunSel
</span><a href="GHC.Core.TyCo.Rep.html#SelRes"><span class="hs-identifier hs-var">SelRes</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;res&quot;</span></span><span>
</span><span id="line-1056"></span><span>
</span><span id="line-1057"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681600970"><span class="annot"><a href="GHC.Utils.Binary.html#Binary"><span class="hs-identifier hs-type">Binary</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoSel"><span class="hs-identifier hs-type">CoSel</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1058"></span><span>   </span><span id="local-6989586621681600988"><span class="annot"><span class="annottext">put_ :: BinHandle -&gt; CoSel -&gt; IO ()
</span><a href="#local-6989586621681600988"><span class="hs-identifier hs-var hs-var hs-var hs-var">put_</span></a></span></span><span> </span><span id="local-6989586621681600990"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681600990"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#SelTyCon"><span class="hs-identifier hs-type">SelTyCon</span></a></span><span> </span><span id="local-6989586621681600991"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681600991"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681600992"><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681600992"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; Word8 -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putByte"><span class="hs-identifier hs-var">putByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681600990"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; Int -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681600990"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681600991"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; Role -&gt; IO ()
forall a. Binary a =&gt; BinHandle -&gt; a -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681600990"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681600992"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1059"></span><span>   </span><span class="annot"><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span id="local-6989586621681600994"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681600994"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="annot"><span class="annottext">CoSel
</span><a href="GHC.Core.TyCo.Rep.html#SelForAll"><span class="hs-identifier hs-var">SelForAll</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; Word8 -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putByte"><span class="hs-identifier hs-var">putByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681600994"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1060"></span><span>   </span><span class="annot"><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span id="local-6989586621681600995"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681600995"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#SelFun"><span class="hs-identifier hs-type">SelFun</span></a></span><span> </span><span class="annot"><span class="annottext">FunSel
</span><a href="GHC.Core.TyCo.Rep.html#SelMult"><span class="hs-identifier hs-var">SelMult</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; Word8 -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putByte"><span class="hs-identifier hs-var">putByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681600995"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">2</span></span><span>
</span><span id="line-1061"></span><span>   </span><span class="annot"><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span id="local-6989586621681600996"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681600996"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#SelFun"><span class="hs-identifier hs-type">SelFun</span></a></span><span> </span><span class="annot"><span class="annottext">FunSel
</span><a href="GHC.Core.TyCo.Rep.html#SelArg"><span class="hs-identifier hs-var">SelArg</span></a></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; Word8 -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putByte"><span class="hs-identifier hs-var">putByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681600996"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">3</span></span><span>
</span><span id="line-1062"></span><span>   </span><span class="annot"><a href="GHC.Utils.Binary.html#put_"><span class="hs-identifier hs-var">put_</span></a></span><span> </span><span id="local-6989586621681600997"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681600997"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#SelFun"><span class="hs-identifier hs-type">SelFun</span></a></span><span> </span><span class="annot"><span class="annottext">FunSel
</span><a href="GHC.Core.TyCo.Rep.html#SelRes"><span class="hs-identifier hs-var">SelRes</span></a></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; Word8 -&gt; IO ()
</span><a href="GHC.Utils.Binary.html#putByte"><span class="hs-identifier hs-var">putByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681600997"><span class="hs-identifier hs-var">bh</span></a></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">4</span></span><span>
</span><span id="line-1063"></span><span>
</span><span id="line-1064"></span><span>   </span><span id="local-6989586621681601017"><span class="annot"><span class="annottext">get :: BinHandle -&gt; IO CoSel
</span><a href="#local-6989586621681601017"><span class="hs-identifier hs-var hs-var hs-var hs-var">get</span></a></span></span><span> </span><span id="local-6989586621681601019"><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681601019"><span class="hs-identifier hs-var">bh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681601020"><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621681601020"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Word8
</span><a href="GHC.Utils.Binary.html#getByte"><span class="hs-identifier hs-var">getByte</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681601019"><span class="hs-identifier hs-var">bh</span></a></span><span>
</span><span id="line-1065"></span><span>               </span><span class="hs-special">;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Word8
</span><a href="#local-6989586621681601020"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1066"></span><span>                   </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681601022"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681601022"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Int
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681601019"><span class="hs-identifier hs-var">bh</span></a></span><span class="hs-special">;</span><span> </span><span id="local-6989586621681601023"><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681601023"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BinHandle -&gt; IO Role
forall a. Binary a =&gt; BinHandle -&gt; IO a
</span><a href="GHC.Utils.Binary.html#get"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span class="annot"><span class="annottext">BinHandle
</span><a href="#local-6989586621681601019"><span class="hs-identifier hs-var">bh</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="annottext">CoSel -&gt; IO CoSel
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Role -&gt; CoSel
</span><a href="GHC.Core.TyCo.Rep.html#SelTyCon"><span class="hs-identifier hs-var">SelTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681601022"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681601023"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1067"></span><span>                   </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CoSel -&gt; IO CoSel
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">CoSel
</span><a href="GHC.Core.TyCo.Rep.html#SelForAll"><span class="hs-identifier hs-var">SelForAll</span></a></span><span>
</span><span id="line-1068"></span><span>                   </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">2</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CoSel -&gt; IO CoSel
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FunSel -&gt; CoSel
</span><a href="GHC.Core.TyCo.Rep.html#SelFun"><span class="hs-identifier hs-var">SelFun</span></a></span><span> </span><span class="annot"><span class="annottext">FunSel
</span><a href="GHC.Core.TyCo.Rep.html#SelMult"><span class="hs-identifier hs-var">SelMult</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1069"></span><span>                   </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">3</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CoSel -&gt; IO CoSel
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FunSel -&gt; CoSel
</span><a href="GHC.Core.TyCo.Rep.html#SelFun"><span class="hs-identifier hs-var">SelFun</span></a></span><span> </span><span class="annot"><span class="annottext">FunSel
</span><a href="GHC.Core.TyCo.Rep.html#SelArg"><span class="hs-identifier hs-var">SelArg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1070"></span><span>                   </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CoSel -&gt; IO CoSel
forall a. a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FunSel -&gt; CoSel
</span><a href="GHC.Core.TyCo.Rep.html#SelFun"><span class="hs-identifier hs-var">SelFun</span></a></span><span> </span><span class="annot"><span class="annottext">FunSel
</span><a href="GHC.Core.TyCo.Rep.html#SelRes"><span class="hs-identifier hs-var">SelRes</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1071"></span><span>
</span><span id="line-1072"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../deepseq-1.4.8.1/src/Control.DeepSeq.html#NFData/Control.DeepSeq.html#NFData"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoSel"><span class="hs-identifier hs-type">CoSel</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1073"></span><span>  </span><span id="local-6989586621681601027"><span class="annot"><span class="annottext">rnf :: CoSel -&gt; ()
</span><a href="#local-6989586621681601027"><span class="hs-identifier hs-var hs-var hs-var hs-var">rnf</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#SelTyCon"><span class="hs-identifier hs-type">SelTyCon</span></a></span><span> </span><span id="local-6989586621681601029"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681601029"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681601030"><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681601030"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681601029"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; () -&gt; ()
forall a b. a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="annot"><span class="annottext">Role
</span><a href="#local-6989586621681601030"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Role -&gt; () -&gt; ()
forall a b. a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1074"></span><span>  </span><span class="annot"><a href="../../deepseq-1.4.8.1/src/Control.DeepSeq.html#rnf/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">CoSel
</span><a href="GHC.Core.TyCo.Rep.html#SelForAll"><span class="hs-identifier hs-var">SelForAll</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1075"></span><span>  </span><span class="annot"><a href="../../deepseq-1.4.8.1/src/Control.DeepSeq.html#rnf/Control.DeepSeq.html#rnf"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#SelFun"><span class="hs-identifier hs-type">SelFun</span></a></span><span> </span><span id="local-6989586621681601031"><span class="annot"><span class="annottext">FunSel
</span><a href="#local-6989586621681601031"><span class="hs-identifier hs-var">fs</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FunSel
</span><a href="#local-6989586621681601031"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="annot"><span class="annottext">FunSel -&gt; () -&gt; ()
forall a b. a -&gt; b -&gt; b
</span><span class="hs-operator hs-var">`seq`</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1076"></span><span>
</span><span id="line-1077"></span><span class="hs-comment">-- | A semantically more meaningful type to represent what may or may not be a</span><span>
</span><span id="line-1078"></span><span class="hs-comment">-- useful 'Coercion'.</span><span>
</span><span id="line-1079"></span><span class="hs-keyword">data</span><span> </span><span id="MCoercion"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#MCoercion"><span class="hs-identifier hs-var">MCoercion</span></a></span></span><span>
</span><span id="line-1080"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="MRefl"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#MRefl"><span class="hs-identifier hs-var">MRefl</span></a></span></span><span>
</span><span id="line-1081"></span><span>    </span><span class="hs-comment">-- A trivial Reflexivity coercion</span><span>
</span><span id="line-1082"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="MCo"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#MCo"><span class="hs-identifier hs-var">MCo</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span>
</span><span id="line-1083"></span><span>    </span><span class="hs-comment">-- Other coercions</span><span>
</span><span id="line-1084"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621681601037"><span id="local-6989586621681601040"><span id="local-6989586621681601043"><span id="local-6989586621681601045"><span id="local-6989586621681601047"><span id="local-6989586621681601052"><span id="local-6989586621681601057"><span id="local-6989586621681601060"><span id="local-6989586621681601063"><span id="local-6989586621681601066"><span id="local-6989586621681601069"><span id="local-6989586621681601072"><span id="local-6989586621681601077"><span id="local-6989586621681601082"><span class="annot"><span class="annottext">Typeable MCoercionN
Typeable MCoercionN =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; MCoercionN -&gt; c MCoercionN)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c MCoercionN)
-&gt; (MCoercionN -&gt; Constr)
-&gt; (MCoercionN -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c MCoercionN))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c MCoercionN))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; MCoercionN -&gt; MCoercionN)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; MCoercionN -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; MCoercionN -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; MCoercionN -&gt; [u])
-&gt; (forall u.
    Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; MCoercionN -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; MCoercionN -&gt; m MCoercionN)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; MCoercionN -&gt; m MCoercionN)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; MCoercionN -&gt; m MCoercionN)
-&gt; Data MCoercionN
MCoercionN -&gt; Constr
MCoercionN -&gt; DataType
(forall b. Data b =&gt; b -&gt; b) -&gt; MCoercionN -&gt; MCoercionN
forall a.
Typeable a =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; MCoercionN -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; MCoercionN -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; MCoercionN -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; MCoercionN -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; MCoercionN -&gt; m MCoercionN
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; MCoercionN -&gt; m MCoercionN
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c MCoercionN
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; MCoercionN -&gt; c MCoercionN
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c MCoercionN)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c MCoercionN)
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; MCoercionN -&gt; c MCoercionN
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; MCoercionN -&gt; c MCoercionN
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c MCoercionN
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c MCoercionN
$ctoConstr :: MCoercionN -&gt; Constr
toConstr :: MCoercionN -&gt; Constr
$cdataTypeOf :: MCoercionN -&gt; DataType
dataTypeOf :: MCoercionN -&gt; DataType
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c MCoercionN)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c MCoercionN)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c MCoercionN)
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c MCoercionN)
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; MCoercionN -&gt; MCoercionN
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; MCoercionN -&gt; MCoercionN
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; MCoercionN -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; MCoercionN -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; MCoercionN -&gt; r
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; MCoercionN -&gt; r
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; MCoercionN -&gt; [u]
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; MCoercionN -&gt; [u]
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; MCoercionN -&gt; u
gmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; MCoercionN -&gt; u
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; MCoercionN -&gt; m MCoercionN
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; MCoercionN -&gt; m MCoercionN
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; MCoercionN -&gt; m MCoercionN
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; MCoercionN -&gt; m MCoercionN
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; MCoercionN -&gt; m MCoercionN
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; MCoercionN -&gt; m MCoercionN
</span><a href="../../base-4.18.3.0/src/Data.Data.html#Data/Data.Data.html#Data"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data.Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-1085"></span><span class="hs-keyword">type</span><span> </span><span id="MCoercionR"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#MCoercionR"><span class="hs-identifier hs-var">MCoercionR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#MCoercion"><span class="hs-identifier hs-type">MCoercion</span></a></span><span>
</span><span id="line-1086"></span><span class="hs-keyword">type</span><span> </span><span id="MCoercionN"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#MCoercionN"><span class="hs-identifier hs-var">MCoercionN</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#MCoercion"><span class="hs-identifier hs-type">MCoercion</span></a></span><span>
</span><span id="line-1087"></span><span>
</span><span id="line-1088"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#MCoercion"><span class="hs-identifier hs-type">MCoercion</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1089"></span><span>  </span><span id="local-6989586621681601092"><span class="annot"><span class="annottext">ppr :: MCoercionN -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="annot"><span class="annottext">MCoercionN
</span><a href="GHC.Core.TyCo.Rep.html#MRefl"><span class="hs-identifier hs-var">MRefl</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;MRefl&quot;</span></span><span>
</span><span id="line-1090"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#MCo"><span class="hs-identifier hs-type">MCo</span></a></span><span> </span><span id="local-6989586621681601093"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601093"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;MCo&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601093"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1091"></span><span>
</span><span id="line-1092"></span><span class="hs-comment">{- Note [Refl invariant]
~~~~~~~~~~~~~~~~~~~~~~~~
Invariant 1: Refl lifting
        Refl (similar for GRefl r ty MRefl) is always lifted as far as possible.
    For example
        (Refl T) (Refl a) (Refl b) is normalised (by mkAppCo) to  (Refl (T a b)).

    You might think that a consequences is:
         Every identity coercion has Refl at the root

    But that's not quite true because of coercion variables.  Consider
         g         where g :: Int~Int
         Left h    where h :: Maybe Int ~ Maybe Int
    etc.  So the consequence is only true of coercions that
    have no coercion variables.

Invariant 2: TyConAppCo
   An application of (Refl T) to some coercions, at least one of which is
   NOT the identity, is normalised to TyConAppCo.  (They may not be
   fully saturated however.)  TyConAppCo coercions (like all coercions
   other than Refl) are NEVER the identity.

Note [Generalized reflexive coercion]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
GRefl is a generalized reflexive coercion (see #15192). It wraps a kind
coercion, which might be reflexive (MRefl) or any coercion (MCo co). The typing
rules for GRefl:

  ty : k1
  ------------------------------------
  GRefl r ty MRefl: ty ~r ty

  ty : k1       co :: k1 ~ k2
  ------------------------------------
  GRefl r ty (MCo co) : ty ~r ty |&gt; co

Consider we have

   g1 :: s ~r t
   s  :: k1
   g2 :: k1 ~ k2

and we want to construct a coercions co which has type

   (s |&gt; g2) ~r t

We can define

   co = Sym (GRefl r s g2) ; g1

It is easy to see that

   Refl == GRefl Nominal ty MRefl :: ty ~n ty

A nominal reflexive coercion is quite common, so we keep the special form Refl to
save allocation.

Note [SelCo]
~~~~~~~~~~~~
The Coercion form SelCo allows us to decompose a structural coercion, one
between ForallTys, or TyConApps, or FunTys.

There are three forms, split by the CoSel field inside the SelCo:
SelTyCon, SelForAll, and SelFun.

* SelTyCon:

      co : (T s1..sn) ~r0 (T t1..tn)
      T is a data type, not a newtype, nor an arrow type
      r = tyConRole tc r0 i
      i &lt; n    (i is zero-indexed)
      ----------------------------------
      SelCo (SelTyCon i r) : si ~r ti

  &quot;Not a newtype&quot;: see Note [SelCo and newtypes]
  &quot;Not an arrow type&quot;: see SelFun below

   See Note [SelCo Cached Roles]

* SelForAll:
      co : forall (a:k1).t1 ~r0 forall (a:k2).t2
      ----------------------------------
      SelCo SelForAll : k1 ~N k2

  NB: SelForAll always gives a Nominal coercion.

* The SelFun form, for functions, has three sub-forms for the three
  components of the function type (multiplicity, argument, result).

      co : (s1 %{m1}-&gt; t1) ~r0 (s2 %{m2}-&gt; t2)
      r = funRole r0 SelMult
      ----------------------------------
      SelCo (SelFun SelMult) : m1 ~r m2

      co : (s1 %{m1}-&gt; t1) ~r0 (s2 %{m2}-&gt; t2)
      r = funRole r0 SelArg
      ----------------------------------
      SelCo (SelFun SelArg) : s1 ~r s2

      co : (s1 %{m1}-&gt; t1) ~r0 (s2 %{m2}-&gt; t2)
      r = funRole r0 SelRes
      ----------------------------------
      SelCo (SelFun SelRes) : t1 ~r t2

Note [FunCo]
~~~~~~~~~~~~
Just as FunTy has a ft_af :: FunTyFlag field, FunCo (which connects
two function types) has two FunTyFlag fields:
     funco_afl, funco_afr :: FunTyFlag
In all cases, the FunTyFlag is recoverable from the kinds of the argument
and result types/coercions; but experiments show that it's better to
cache it.

Why does FunCo need /two/ flags? If we have a single method class,
implemented as a newtype
   class C a where { op :: [a] -&gt; a }
then we can have a coercion
   co :: C Int ~R ([Int]-&gt;Int)
So now we can define
   FunCo co &lt;Bool&gt; : (C Int =&gt; Bool) ~R (([Int]-&gt;Int) -&gt; Bool)
Notice that the left and right arrows are different!  Hence two flags,
one for coercionLKind and one for coercionRKind.

Note [Coercion axioms applied to coercions]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The reason coercion axioms can be applied to coercions and not just
types is to allow for better optimization.  There are some cases where
we need to be able to &quot;push transitivity inside&quot; an axiom in order to
expose further opportunities for optimization.

For example, suppose we have

  C a : t[a] ~ F a
  g   : b ~ c

and we want to optimize

  sym (C b) ; t[g] ; C c

which has the kind

  F b ~ F c

(stopping through t[b] and t[c] along the way).

We'd like to optimize this to just F g -- but how?  The key is
that we need to allow axioms to be instantiated by *coercions*,
not just by types.  Then we can (in certain cases) push
transitivity inside the axiom instantiations, and then react
opposite-polarity instantiations of the same axiom.  In this
case, e.g., we match t[g] against the LHS of (C c)'s kind, to
obtain the substitution  a |-&gt; g  (note this operation is sort
of the dual of lifting!) and hence end up with

  C g : t[b] ~ F c

which indeed has the same kind as  t[g] ; C c.

Now we have

  sym (C b) ; C g

which can be optimized to F g.

Note [CoAxiom index]
~~~~~~~~~~~~~~~~~~~~
A CoAxiom has 1 or more branches. Each branch has contains a list
of the free type variables in that branch, the LHS type patterns,
and the RHS type for that branch. When we apply an axiom to a list
of coercions, we must choose which branch of the axiom we wish to
use, as the different branches may have different numbers of free
type variables. (The number of type patterns is always the same
among branches, but that doesn't quite concern us here.)

The Int in the AxiomInstCo constructor is the 0-indexed number
of the chosen branch.

Note [Forall coercions]
~~~~~~~~~~~~~~~~~~~~~~~
Constructing coercions between forall-types can be a bit tricky,
because the kinds of the bound tyvars can be different.

The typing rule is:


  kind_co : k1 ~ k2
  tv1:k1 |- co : t1 ~ t2
  -------------------------------------------------------------------
  ForAllCo tv1 kind_co co : all tv1:k1. t1  ~
                            all tv1:k2. (t2[tv1 |-&gt; tv1 |&gt; sym kind_co])

First, the TyCoVar stored in a ForAllCo is really an optimisation: this field
should be a Name, as its kind is redundant. Thinking of the field as a Name
is helpful in understanding what a ForAllCo means.
The kind of TyCoVar always matches the left-hand kind of the coercion.

The idea is that kind_co gives the two kinds of the tyvar. See how, in the
conclusion, tv1 is assigned kind k1 on the left but kind k2 on the right.

Of course, a type variable can't have different kinds at the same time. So,
we arbitrarily prefer the first kind when using tv1 in the inner coercion
co, which shows that t1 equals t2.

The last wrinkle is that we need to fix the kinds in the conclusion. In
t2, tv1 is assumed to have kind k1, but it has kind k2 in the conclusion of
the rule. So we do a kind-fixing substitution, replacing (tv1:k1) with
(tv1:k2) |&gt; sym kind_co. This substitution is slightly bizarre, because it
mentions the same name with different kinds, but it *is* well-kinded, noting
that `(tv1:k2) |&gt; sym kind_co` has kind k1.

This all really would work storing just a Name in the ForAllCo. But we can't
add Names to, e.g., VarSets, and there generally is just an impedance mismatch
in a bunch of places. So we use tv1. When we need tv2, we can use
setTyVarKind.

Note [Predicate coercions]
~~~~~~~~~~~~~~~~~~~~~~~~~~
Suppose we have
   g :: a~b
How can we coerce between types
   ([c]~a) =&gt; [a] -&gt; c
and
   ([c]~b) =&gt; [b] -&gt; c
where the equality predicate *itself* differs?

Answer: we simply treat (~) as an ordinary type constructor, so these
types really look like

   ((~) [c] a) -&gt; [a] -&gt; c
   ((~) [c] b) -&gt; [b] -&gt; c

So the coercion between the two is obviously

   ((~) [c] g) -&gt; [g] -&gt; c

Another way to see this to say that we simply collapse predicates to
their representation type (see Type.coreView and Type.predTypeRep).

This collapse is done by mkPredCo; there is no PredCo constructor
in Coercion.  This is important because we need Nth to work on
predicates too:
    SelCo (SelTyCon 1) ((~) [c] g) = g
See Simplify.simplCoercionF, which generates such selections.

Note [Roles]
~~~~~~~~~~~~
Roles are a solution to the GeneralizedNewtypeDeriving problem, articulated
in #1496. The full story is in docs/core-spec/core-spec.pdf. Also, see
https://gitlab.haskell.org/ghc/ghc/wikis/roles-implementation

Here is one way to phrase the problem:

Given:
newtype Age = MkAge Int
type family F x
type instance F Age = Bool
type instance F Int = Char

This compiles down to:
axAge :: Age ~ Int
axF1 :: F Age ~ Bool
axF2 :: F Int ~ Char

Then, we can make:
(sym (axF1) ; F axAge ; axF2) :: Bool ~ Char

Yikes!

The solution is _roles_, as articulated in &quot;Generative Type Abstraction and
Type-level Computation&quot; (POPL 2010), available at
http://www.seas.upenn.edu/~sweirich/papers/popl163af-weirich.pdf

The specification for roles has evolved somewhat since that paper. For the
current full details, see the documentation in docs/core-spec. Here are some
highlights.

We label every equality with a notion of type equivalence, of which there are
three options: Nominal, Representational, and Phantom. A ground type is
nominally equivalent only with itself. A newtype (which is considered a ground
type in Haskell) is representationally equivalent to its representation.
Anything is &quot;phantomly&quot; equivalent to anything else. We use &quot;N&quot;, &quot;R&quot;, and &quot;P&quot;
to denote the equivalences.

The axioms above would be:
axAge :: Age ~R Int
axF1 :: F Age ~N Bool
axF2 :: F Age ~N Char

Then, because transitivity applies only to coercions proving the same notion
of equivalence, the above construction is impossible.

However, there is still an escape hatch: we know that any two types that are
nominally equivalent are representationally equivalent as well. This is what
the form SubCo proves -- it &quot;demotes&quot; a nominal equivalence into a
representational equivalence. So, it would seem the following is possible:

sub (sym axF1) ; F axAge ; sub axF2 :: Bool ~R Char   -- WRONG

What saves us here is that the arguments to a type function F, lifted into a
coercion, *must* prove nominal equivalence. So, (F axAge) is ill-formed, and
we are safe.

Roles are attached to parameters to TyCons. When lifting a TyCon into a
coercion (through TyConAppCo), we need to ensure that the arguments to the
TyCon respect their roles. For example:

data T a b = MkT a (F b)

If we know that a1 ~R a2, then we know (T a1 b) ~R (T a2 b). But, if we know
that b1 ~R b2, we know nothing about (T a b1) and (T a b2)! This is because
the type function F branches on b's *name*, not representation. So, we say
that 'a' has role Representational and 'b' has role Nominal. The third role,
Phantom, is for parameters not used in the type's definition. Given the
following definition

data Q a = MkQ Int

the Phantom role allows us to say that (Q Bool) ~R (Q Char), because we
can construct the coercion Bool ~P Char (using UnivCo).

See the paper cited above for more examples and information.

Note [TyConAppCo roles]
~~~~~~~~~~~~~~~~~~~~~~~
The TyConAppCo constructor has a role parameter, indicating the role at
which the coercion proves equality. The choice of this parameter affects
the required roles of the arguments of the TyConAppCo. To help explain
it, assume the following definition:

  type instance F Int = Bool   -- Axiom axF : F Int ~N Bool
  newtype Age = MkAge Int      -- Axiom axAge : Age ~R Int
  data Foo a = MkFoo a         -- Role on Foo's parameter is Representational

TyConAppCo Nominal Foo axF : Foo (F Int) ~N Foo Bool
  For (TyConAppCo Nominal) all arguments must have role Nominal. Why?
  So that Foo Age ~N Foo Int does *not* hold.

TyConAppCo Representational Foo (SubCo axF) : Foo (F Int) ~R Foo Bool
TyConAppCo Representational Foo axAge       : Foo Age     ~R Foo Int
  For (TyConAppCo Representational), all arguments must have the roles
  corresponding to the result of tyConRoles on the TyCon. This is the
  whole point of having roles on the TyCon to begin with. So, we can
  have Foo Age ~R Foo Int, if Foo's parameter has role R.

  If a Representational TyConAppCo is over-saturated (which is otherwise fine),
  the spill-over arguments must all be at Nominal. This corresponds to the
  behavior for AppCo.

TyConAppCo Phantom Foo (UnivCo Phantom Int Bool) : Foo Int ~P Foo Bool
  All arguments must have role Phantom. This one isn't strictly
  necessary for soundness, but this choice removes ambiguity.

The rules here dictate the roles of the parameters to mkTyConAppCo
(should be checked by Lint).

Note [SelCo and newtypes]
~~~~~~~~~~~~~~~~~~~~~~~~~
Suppose we have

  newtype N a = MkN Int
  type role N representational

This yields axiom

  NTCo:N :: forall a. N a ~R Int

We can then build

  co :: forall a b. N a ~R N b
  co = NTCo:N a ; sym (NTCo:N b)

for any `a` and `b`. Because of the role annotation on N, if we use
SelCo, we'll get out a representational coercion. That is:

  SelCo (SelTyCon 0 r) co :: forall a b. a ~r b

Yikes! Clearly, this is terrible. The solution is simple: forbid
SelCo to be used on newtypes if the internal coercion is representational.
See the SelCo equation for GHC.Core.Lint.lintCoercion.

This is not just some corner case discovered by a segfault somewhere;
it was discovered in the proof of soundness of roles and described
in the &quot;Safe Coercions&quot; paper (ICFP '14).

Note [SelCo Cached Roles]
~~~~~~~~~~~~~~~~~~~~~~~~~
Why do we cache the role of SelCo in the SelCo constructor?
Because computing role(Nth i co) involves figuring out that

  co :: T tys1 ~ T tys2

using coercionKind, and finding (coercionRole co), and then looking
at the tyConRoles of T. Avoiding bad asymptotic behaviour here means
we have to compute the kind and role of a coercion simultaneously,
which makes the code complicated and inefficient.

This only happens for SelCo. Caching the role solves the problem, and
allows coercionKind and coercionRole to be simple.

See #11735

Note [InstCo roles]
~~~~~~~~~~~~~~~~~~~
Here is (essentially) the typing rule for InstCo:

g :: (forall a. t1) ~r (forall a. t2)
w :: s1 ~N s2
------------------------------- InstCo
InstCo g w :: (t1 [a |-&gt; s1]) ~r (t2 [a |-&gt; s2])

Note that the Coercion w *must* be nominal. This is necessary
because the variable a might be used in a &quot;nominal position&quot;
(that is, a place where role inference would require a nominal
role) in t1 or t2. If we allowed w to be representational, we
could get bogus equalities.

A more nuanced treatment might be able to relax this condition
somewhat, by checking if t1 and/or t2 use their bound variables
in nominal ways. If not, having w be representational is OK.


%************************************************************************
%*                                                                      *
                UnivCoProvenance
%*                                                                      *
%************************************************************************

A UnivCo is a coercion whose proof does not directly express its role
and kind (indeed for some UnivCos, like PluginProv, there /is/ no proof).

The different kinds of UnivCo are described by UnivCoProvenance.  Really
each is entirely separate, but they all share the need to represent their
role and kind, which is done in the UnivCo constructor.

-}</span><span>
</span><span id="line-1527"></span><span>
</span><span id="line-1528"></span><span class="hs-comment">-- | For simplicity, we have just one UnivCo that represents a coercion from</span><span>
</span><span id="line-1529"></span><span class="hs-comment">-- some type to some other type, with (in general) no restrictions on the</span><span>
</span><span id="line-1530"></span><span class="hs-comment">-- type. The UnivCoProvenance specifies more exactly what the coercion really</span><span>
</span><span id="line-1531"></span><span class="hs-comment">-- is and why a program should (or shouldn't!) trust the coercion.</span><span>
</span><span id="line-1532"></span><span class="hs-comment">-- It is reasonable to consider each constructor of 'UnivCoProvenance'</span><span>
</span><span id="line-1533"></span><span class="hs-comment">-- as a totally independent coercion form; their only commonality is</span><span>
</span><span id="line-1534"></span><span class="hs-comment">-- that they don't tell you what types they coercion between. (That info</span><span>
</span><span id="line-1535"></span><span class="hs-comment">-- is in the 'UnivCo' constructor of 'Coercion'.</span><span>
</span><span id="line-1536"></span><span class="hs-keyword">data</span><span> </span><span id="UnivCoProvenance"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#UnivCoProvenance"><span class="hs-identifier hs-var">UnivCoProvenance</span></a></span></span><span>
</span><span id="line-1537"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="PhantomProv"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#PhantomProv"><span class="hs-identifier hs-var">PhantomProv</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#KindCoercion"><span class="hs-identifier hs-type">KindCoercion</span></a></span><span> </span><span class="hs-comment">-- ^ See Note [Phantom coercions]. Only in Phantom</span><span>
</span><span id="line-1538"></span><span>                             </span><span class="hs-comment">-- roled coercions</span><span>
</span><span id="line-1539"></span><span>
</span><span id="line-1540"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ProofIrrelProv"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ProofIrrelProv"><span class="hs-identifier hs-var">ProofIrrelProv</span></a></span></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#KindCoercion"><span class="hs-identifier hs-type">KindCoercion</span></a></span><span>  </span><span class="hs-comment">-- ^ From the fact that any two coercions are</span><span>
</span><span id="line-1541"></span><span>                                 </span><span class="hs-comment">--   considered equivalent. See Note [ProofIrrelProv].</span><span>
</span><span id="line-1542"></span><span>                                 </span><span class="hs-comment">-- Can be used in Nominal or Representational coercions</span><span>
</span><span id="line-1543"></span><span>
</span><span id="line-1544"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PluginProv"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#PluginProv"><span class="hs-identifier hs-var">PluginProv</span></a></span></span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#String/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>  </span><span class="hs-comment">-- ^ From a plugin, which asserts that this coercion</span><span>
</span><span id="line-1545"></span><span>                       </span><span class="hs-comment">--   is sound. The string is for the use of the plugin.</span><span>
</span><span id="line-1546"></span><span>
</span><span id="line-1547"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="CorePrepProv"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CorePrepProv"><span class="hs-identifier hs-var">CorePrepProv</span></a></span></span><span>       </span><span class="hs-comment">-- See Note [Unsafe coercions] in GHC.Core.CoreToStg.Prep</span><span>
</span><span id="line-1548"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>   </span><span class="hs-comment">-- True  &lt;=&gt; the UnivCo must be homogeneously kinded</span><span>
</span><span id="line-1549"></span><span>             </span><span class="hs-comment">-- False &lt;=&gt; allow hetero-kinded, e.g. Int ~ Int#</span><span>
</span><span id="line-1550"></span><span>
</span><span id="line-1551"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621681601101"><span id="local-6989586621681601109"><span id="local-6989586621681601116"><span id="local-6989586621681601118"><span id="local-6989586621681601120"><span id="local-6989586621681601125"><span id="local-6989586621681601130"><span id="local-6989586621681601133"><span id="local-6989586621681601136"><span id="local-6989586621681601139"><span id="local-6989586621681601142"><span id="local-6989586621681601145"><span id="local-6989586621681601150"><span id="local-6989586621681601155"><span class="annot"><span class="annottext">Typeable UnivCoProvenance
Typeable UnivCoProvenance =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; UnivCoProvenance -&gt; c UnivCoProvenance)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UnivCoProvenance)
-&gt; (UnivCoProvenance -&gt; Constr)
-&gt; (UnivCoProvenance -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UnivCoProvenance))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c UnivCoProvenance))
-&gt; ((forall b. Data b =&gt; b -&gt; b)
    -&gt; UnivCoProvenance -&gt; UnivCoProvenance)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UnivCoProvenance -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UnivCoProvenance -&gt; r)
-&gt; (forall u.
    (forall d. Data d =&gt; d -&gt; u) -&gt; UnivCoProvenance -&gt; [u])
-&gt; (forall u.
    Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UnivCoProvenance -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UnivCoProvenance -&gt; m UnivCoProvenance)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UnivCoProvenance -&gt; m UnivCoProvenance)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; UnivCoProvenance -&gt; m UnivCoProvenance)
-&gt; Data UnivCoProvenance
UnivCoProvenance -&gt; Constr
UnivCoProvenance -&gt; DataType
(forall b. Data b =&gt; b -&gt; b)
-&gt; UnivCoProvenance -&gt; UnivCoProvenance
forall a.
Typeable a =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UnivCoProvenance -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UnivCoProvenance -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UnivCoProvenance -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UnivCoProvenance -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UnivCoProvenance -&gt; m UnivCoProvenance
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UnivCoProvenance -&gt; m UnivCoProvenance
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UnivCoProvenance
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UnivCoProvenance -&gt; c UnivCoProvenance
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UnivCoProvenance)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UnivCoProvenance)
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UnivCoProvenance -&gt; c UnivCoProvenance
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; UnivCoProvenance -&gt; c UnivCoProvenance
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UnivCoProvenance
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c UnivCoProvenance
$ctoConstr :: UnivCoProvenance -&gt; Constr
toConstr :: UnivCoProvenance -&gt; Constr
$cdataTypeOf :: UnivCoProvenance -&gt; DataType
dataTypeOf :: UnivCoProvenance -&gt; DataType
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UnivCoProvenance)
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c UnivCoProvenance)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UnivCoProvenance)
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c UnivCoProvenance)
$cgmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; UnivCoProvenance -&gt; UnivCoProvenance
gmapT :: (forall b. Data b =&gt; b -&gt; b)
-&gt; UnivCoProvenance -&gt; UnivCoProvenance
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UnivCoProvenance -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UnivCoProvenance -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UnivCoProvenance -&gt; r
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; UnivCoProvenance -&gt; r
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UnivCoProvenance -&gt; [u]
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; UnivCoProvenance -&gt; [u]
$cgmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UnivCoProvenance -&gt; u
gmapQi :: forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; UnivCoProvenance -&gt; u
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UnivCoProvenance -&gt; m UnivCoProvenance
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UnivCoProvenance -&gt; m UnivCoProvenance
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UnivCoProvenance -&gt; m UnivCoProvenance
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UnivCoProvenance -&gt; m UnivCoProvenance
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UnivCoProvenance -&gt; m UnivCoProvenance
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; UnivCoProvenance -&gt; m UnivCoProvenance
</span><a href="../../base-4.18.3.0/src/Data.Data.html#Data/Data.Data.html#Data"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data.Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-1552"></span><span>
</span><span id="line-1553"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#UnivCoProvenance"><span class="hs-identifier hs-type">UnivCoProvenance</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1554"></span><span>  </span><span id="local-6989586621681601169"><span class="annot"><span class="annottext">ppr :: UnivCoProvenance -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#PhantomProv"><span class="hs-identifier hs-type">PhantomProv</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(phantom)&quot;</span></span><span>
</span><span id="line-1555"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ProofIrrelProv"><span class="hs-identifier hs-type">ProofIrrelProv</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(proof irrel.)&quot;</span></span><span>
</span><span id="line-1556"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#PluginProv"><span class="hs-identifier hs-type">PluginProv</span></a></span><span> </span><span id="local-6989586621681601170"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681601170"><span class="hs-identifier hs-var">str</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#parens"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;plugin&quot;</span></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#brackets"><span class="hs-identifier hs-var">brackets</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681601170"><span class="hs-identifier hs-var">str</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1557"></span><span>  </span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CorePrepProv"><span class="hs-identifier hs-type">CorePrepProv</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(CorePrep)&quot;</span></span><span>
</span><span id="line-1558"></span><span>
</span><span id="line-1559"></span><span class="annot"><span class="hs-comment">-- | A coercion to be filled in by the type-checker. See Note [Coercion holes]</span></span><span>
</span><span id="line-1560"></span><span class="hs-keyword">data</span><span> </span><span id="CoercionHole"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-var">CoercionHole</span></a></span></span><span>
</span><span id="line-1561"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="CoercionHole"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-var">CoercionHole</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="ch_co_var"><span class="annot"><span class="annottext">CoercionHole -&gt; TyVar
</span><a href="GHC.Core.TyCo.Rep.html#ch_co_var"><span class="hs-identifier hs-var hs-var">ch_co_var</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#CoVar"><span class="hs-identifier hs-type">CoVar</span></a></span><span>
</span><span id="line-1562"></span><span>                       </span><span class="hs-comment">-- See Note [CoercionHoles and coercion free variables]</span><span>
</span><span id="line-1563"></span><span>
</span><span id="line-1564"></span><span>                 </span><span class="hs-special">,</span><span> </span><span id="ch_ref"><span class="annot"><span class="annottext">CoercionHole -&gt; IORef (Maybe KindCoercion)
</span><a href="GHC.Core.TyCo.Rep.html#ch_ref"><span class="hs-identifier hs-var hs-var">ch_ref</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.IORef.html#IORef/GHC.IORef.html#IORef"><span class="hs-identifier hs-type">IORef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1565"></span><span>                 </span><span class="hs-special">}</span><span>
</span><span id="line-1566"></span><span>
</span><span id="line-1567"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#coHoleCoVar"><span class="hs-identifier hs-type">coHoleCoVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#CoVar"><span class="hs-identifier hs-type">CoVar</span></a></span><span>
</span><span id="line-1568"></span><span id="coHoleCoVar"><span class="annot"><span class="annottext">coHoleCoVar :: CoercionHole -&gt; TyVar
</span><a href="GHC.Core.TyCo.Rep.html#coHoleCoVar"><span class="hs-identifier hs-var hs-var">coHoleCoVar</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoercionHole -&gt; TyVar
</span><a href="GHC.Core.TyCo.Rep.html#ch_co_var"><span class="hs-identifier hs-var">ch_co_var</span></a></span><span>
</span><span id="line-1569"></span><span>
</span><span id="line-1570"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#setCoHoleCoVar"><span class="hs-identifier hs-type">setCoHoleCoVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#CoVar"><span class="hs-identifier hs-type">CoVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a></span><span>
</span><span id="line-1571"></span><span id="setCoHoleCoVar"><span class="annot"><span class="annottext">setCoHoleCoVar :: CoercionHole -&gt; TyVar -&gt; CoercionHole
</span><a href="GHC.Core.TyCo.Rep.html#setCoHoleCoVar"><span class="hs-identifier hs-var hs-var">setCoHoleCoVar</span></a></span></span><span> </span><span id="local-6989586621681601175"><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621681601175"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621681601176"><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681601176"><span class="hs-identifier hs-var">cv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621681601175"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ch_co_var"><span class="hs-identifier hs-var">ch_co_var</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621681601176"><span class="hs-identifier hs-type">cv</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1572"></span><span>
</span><span id="line-1573"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681601180"><span id="local-6989586621681601186"><span id="local-6989586621681601191"><span id="local-6989586621681601196"><span id="local-6989586621681601199"><span id="local-6989586621681601202"><span id="local-6989586621681601205"><span id="local-6989586621681601208"><span id="local-6989586621681601211"><span id="local-6989586621681601216"><span id="local-6989586621681601221"><span class="annot"><a href="../../base-4.18.3.0/src/Data.Data.html#Data/Data.Data.html#Data"><span class="hs-identifier hs-type">Data.Data</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1574"></span><span>  </span><span class="hs-comment">-- don't traverse?</span><span>
</span><span id="line-1575"></span><span>  </span><span id="local-6989586621681601225"><span class="annot"><span class="annottext">toConstr :: CoercionHole -&gt; Constr
</span><a href="#local-6989586621681601225"><span class="hs-identifier hs-var hs-var hs-var hs-var">toConstr</span></a></span></span><span> </span><span class="annot"><span class="annottext">CoercionHole
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Constr
</span><a href="GHC.Utils.Misc.html#abstractConstr"><span class="hs-identifier hs-var">abstractConstr</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;CoercionHole&quot;</span></span><span>
</span><span id="line-1576"></span><span>  </span><span id="local-6989586621681601230"><span class="annot"><span class="annottext">gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c CoercionHole
</span><a href="#local-6989586621681601230"><span class="hs-identifier hs-var hs-var hs-var hs-var">gunfold</span></a></span></span><span> </span><span class="annot"><span class="annottext">forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">forall r. r -&gt; c r
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Constr -&gt; c CoercionHole
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Err.html#error/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;gunfold&quot;</span></span><span>
</span><span id="line-1577"></span><span>  </span><span id="local-6989586621681601233"><span class="annot"><span class="annottext">dataTypeOf :: CoercionHole -&gt; DataType
</span><a href="#local-6989586621681601233"><span class="hs-identifier hs-var hs-var hs-var hs-var">dataTypeOf</span></a></span></span><span> </span><span class="annot"><span class="annottext">CoercionHole
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; DataType
</span><a href="../../base-4.18.3.0/src/Data.Data.html#mkNoRepType/Data.Data.html#mkNoRepType"><span class="hs-identifier hs-var">mkNoRepType</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;CoercionHole&quot;</span></span><span>
</span><span id="line-1578"></span><span>
</span><span id="line-1579"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1580"></span><span>  </span><span id="local-6989586621681601240"><span class="annot"><span class="annottext">ppr :: CoercionHole -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ch_co_var :: CoercionHole -&gt; TyVar
</span><a href="GHC.Core.TyCo.Rep.html#ch_co_var"><span class="hs-identifier hs-var">ch_co_var</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681601241"><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681601241"><span class="hs-identifier hs-var">cv</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SDoc -&gt; SDoc
forall doc. IsLine doc =&gt; doc -&gt; doc
</span><a href="GHC.Utils.Outputable.html#braces"><span class="hs-identifier hs-var">braces</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyVar -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681601241"><span class="hs-identifier hs-var">cv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1581"></span><span>
</span><span id="line-1582"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Types.Unique.html#Uniquable"><span class="hs-identifier hs-type">Uniquable</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1583"></span><span>  </span><span id="local-6989586621681601248"><span class="annot"><span class="annottext">getUnique :: CoercionHole -&gt; Unique
</span><a href="#local-6989586621681601248"><span class="hs-identifier hs-var hs-var hs-var hs-var">getUnique</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ch_co_var :: CoercionHole -&gt; TyVar
</span><a href="GHC.Core.TyCo.Rep.html#ch_co_var"><span class="hs-identifier hs-var">ch_co_var</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681601250"><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681601250"><span class="hs-identifier hs-var">cv</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyVar -&gt; Unique
forall a. Uniquable a =&gt; a -&gt; Unique
</span><a href="GHC.Types.Unique.html#getUnique"><span class="hs-identifier hs-var">getUnique</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681601250"><span class="hs-identifier hs-var">cv</span></a></span><span>
</span><span id="line-1584"></span><span>
</span><span id="line-1585"></span><span class="hs-comment">{- Note [Phantom coercions]
~~~~~~~~~~~~~~~~~~~~~~~~~~~
Consider
     data T a = T1 | T2
Then we have
     T s ~R T t
for any old s,t. The witness for this is (TyConAppCo T Rep co),
where (co :: s ~P t) is a phantom coercion built with PhantomProv.
The role of the UnivCo is always Phantom.  The Coercion stored is the
(nominal) kind coercion between the types
   kind(s) ~N kind (t)

Note [Coercion holes]
~~~~~~~~~~~~~~~~~~~~~~~~
During typechecking, constraint solving for type classes works by
  - Generate an evidence Id,  d7 :: Num a
  - Wrap it in a Wanted constraint, [W] d7 :: Num a
  - Use the evidence Id where the evidence is needed
  - Solve the constraint later
  - When solved, add an enclosing let-binding  let d7 = .... in ....
    which actually binds d7 to the (Num a) evidence

For equality constraints we use a different strategy.  See Note [The
equality types story] in GHC.Builtin.Types.Prim for background on equality constraints.
  - For /boxed/ equality constraints, (t1 ~N t2) and (t1 ~R t2), it's just
    like type classes above. (Indeed, boxed equality constraints *are* classes.)
  - But for /unboxed/ equality constraints (t1 ~R# t2) and (t1 ~N# t2)
    we use a different plan

For unboxed equalities:
  - Generate a CoercionHole, a mutable variable just like a unification
    variable
  - Wrap the CoercionHole in a Wanted constraint; see GHC.Tc.Utils.TcEvDest
  - Use the CoercionHole in a Coercion, via HoleCo
  - Solve the constraint later
  - When solved, fill in the CoercionHole by side effect, instead of
    doing the let-binding thing

The main reason for all this is that there may be no good place to let-bind
the evidence for unboxed equalities:

  - We emit constraints for kind coercions, to be used to cast a
    type's kind. These coercions then must be used in types. Because
    they might appear in a top-level type, there is no place to bind
    these (unlifted) coercions in the usual way.

  - A coercion for (forall a. t1) ~ (forall a. t2) will look like
       forall a. (coercion for t1~t2)
    But the coercion for (t1~t2) may mention 'a', and we don't have
    let-bindings within coercions.  We could add them, but coercion
    holes are easier.

  - Moreover, nothing is lost from the lack of let-bindings. For
    dictionaries want to achieve sharing to avoid recomputing the
    dictionary.  But coercions are entirely erased, so there's little
    benefit to sharing. Indeed, even if we had a let-binding, we
    always inline types and coercions at every use site and drop the
    binding.

Other notes about HoleCo:

 * INVARIANT: CoercionHole and HoleCo are used only during type checking,
   and should never appear in Core. Just like unification variables; a Type
   can contain a TcTyVar, but only during type checking. If, one day, we
   use type-level information to separate out forms that can appear during
   type-checking vs forms that can appear in core proper, holes in Core will
   be ruled out.

 * See Note [CoercionHoles and coercion free variables]

 * Coercion holes can be compared for equality like other coercions:
   by looking at the types coerced.


Note [CoercionHoles and coercion free variables]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Why does a CoercionHole contain a CoVar, as well as reference to
fill in?  Because we want to treat that CoVar as a free variable of
the coercion.  See #14584, and Note [What prevents a
constraint from floating] in GHC.Tc.Solver, item (4):

        forall k. [W] co1 :: t1 ~# t2 |&gt; co2
                  [W] co2 :: k ~# *

Here co2 is a CoercionHole. But we /must/ know that it is free in
co1, because that's all that stops it floating outside the
implication.


Note [ProofIrrelProv]
~~~~~~~~~~~~~~~~~~~~~
A ProofIrrelProv is a coercion between coercions. For example:

  data G a where
    MkG :: G Bool

In core, we get

  G :: * -&gt; *
  MkG :: forall (a :: *). (a ~ Bool) -&gt; G a

Now, consider 'MkG -- that is, MkG used in a type -- and suppose we want
a proof that ('MkG a1 co1) ~ ('MkG a2 co2). This will have to be

  TyConAppCo Nominal MkG [co3, co4]
  where
    co3 :: co1 ~ co2
    co4 :: a1 ~ a2

Note that
  co1 :: a1 ~ Bool
  co2 :: a2 ~ Bool

Here,
  co3 = UnivCo (ProofIrrelProv co5) Nominal (CoercionTy co1) (CoercionTy co2)
  where
    co5 :: (a1 ~ Bool) ~ (a2 ~ Bool)
    co5 = TyConAppCo Nominal (~#) [&lt;*&gt;, &lt;*&gt;, co4, &lt;Bool&gt;]
-}</span><span>
</span><span id="line-1704"></span><span>
</span><span id="line-1705"></span><span>
</span><span id="line-1706"></span><span class="annot"><span class="hs-comment">{- *********************************************************************
*                                                                      *
                foldType  and   foldCoercion
*                                                                      *
********************************************************************* -}</span></span><span>
</span><span id="line-1711"></span><span>
</span><span id="line-1712"></span><span class="hs-comment">{- Note [foldType]
~~~~~~~~~~~~~~~~~~
foldType is a bit more powerful than perhaps it looks:

* You can fold with an accumulating parameter, via
     TyCoFolder env (Endo a)
  Recall newtype Endo a = Endo (a-&gt;a)

* You can fold monadically with a monad M, via
     TyCoFolder env (M a)
  provided you have
     instance ..  =&gt; Monoid (M a)

Note [mapType vs foldType]
~~~~~~~~~~~~~~~~~~~~~~~~~~
We define foldType here, but mapType in module Type. Why?

* foldType is used in GHC.Core.TyCo.FVs for finding free variables.
  It's a very simple function that analyses a type,
  but does not construct one.

* mapType constructs new types, and so it needs to call
  the &quot;smart constructors&quot;, mkAppTy, mkCastTy, and so on.
  These are sophisticated functions, and can't be defined
  here in GHC.Core.TyCo.Rep.

Note [Specialising foldType]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~
We inline foldType at every call site (there are not many), so that it
becomes specialised for the particular monoid *and* TyCoFolder at
that site.  This is just for efficiency, but walking over types is
done a *lot* in GHC, so worth optimising.

We were worried that
    TyCoFolder env (Endo a)
might not eta-expand.  Recall newtype Endo a = Endo (a-&gt;a).

In particular, given
   fvs :: Type -&gt; TyCoVarSet
   fvs ty = appEndo (foldType tcf emptyVarSet ty) emptyVarSet

   tcf :: TyCoFolder enf (Endo a)
   tcf = TyCoFolder { tcf_tyvar = do_tv, ... }
      where
        do_tvs is tv = Endo do_it
           where
             do_it acc | tv `elemVarSet` is  = acc
                       | tv `elemVarSet` acc = acc
                       | otherwise = acc `extendVarSet` tv


we want to end up with
   fvs ty = go emptyVarSet ty emptyVarSet
     where
       go env (TyVarTy tv) acc = acc `extendVarSet` tv
       ..etc..

And indeed this happens.
  - Selections from 'tcf' are done at compile time
  - 'go' is nicely eta-expanded.

We were also worried about
   deep_fvs :: Type -&gt; TyCoVarSet
   deep_fvs ty = appEndo (foldType deep_tcf emptyVarSet ty) emptyVarSet

   deep_tcf :: TyCoFolder enf (Endo a)
   deep_tcf = TyCoFolder { tcf_tyvar = do_tv, ... }
      where
        do_tvs is tv = Endo do_it
           where
             do_it acc | tv `elemVarSet` is  = acc
                       | tv `elemVarSet` acc = acc
                       | otherwise = deep_fvs (varType tv)
                                     `unionVarSet` acc
                                     `extendVarSet` tv

Here deep_fvs and deep_tcf are mutually recursive, unlike fvs and tcf.
But, amazingly, we get good code here too. GHC is careful not to mark
TyCoFolder data constructor for deep_tcf as a loop breaker, so the
record selections still cancel.  And eta expansion still happens too.
-}</span><span>
</span><span id="line-1793"></span><span>
</span><span id="line-1794"></span><span class="hs-keyword">data</span><span> </span><span id="TyCoFolder"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyCoFolder"><span class="hs-identifier hs-var">TyCoFolder</span></a></span></span><span> </span><span id="local-6989586621681599907"><span class="annot"><a href="#local-6989586621681599907"><span class="hs-identifier hs-type">env</span></a></span></span><span> </span><span id="local-6989586621681599908"><span class="annot"><a href="#local-6989586621681599908"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1795"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="TyCoFolder"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyCoFolder"><span class="hs-identifier hs-var">TyCoFolder</span></a></span></span><span>
</span><span id="line-1796"></span><span>      </span><span class="hs-special">{</span><span> </span><span id="tcf_view"><span class="annot"><span class="annottext">forall env a. TyCoFolder env a -&gt; Kind -&gt; Maybe Kind
</span><a href="GHC.Core.TyCo.Rep.html#tcf_view"><span class="hs-identifier hs-var hs-var">tcf_view</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>   </span><span class="hs-comment">-- Optional &quot;view&quot; function</span><span>
</span><span id="line-1797"></span><span>                                          </span><span class="hs-comment">-- E.g. expand synonyms</span><span>
</span><span id="line-1798"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="tcf_tyvar"><span class="annot"><span class="annottext">forall env a. TyCoFolder env a -&gt; env -&gt; TyVar -&gt; a
</span><a href="GHC.Core.TyCo.Rep.html#tcf_tyvar"><span class="hs-identifier hs-var hs-var">tcf_tyvar</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621681599907"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681599908"><span class="hs-identifier hs-type">a</span></a></span><span>    </span><span class="hs-comment">-- Does not automatically recur</span><span>
</span><span id="line-1799"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="tcf_covar"><span class="annot"><span class="annottext">forall env a. TyCoFolder env a -&gt; env -&gt; TyVar -&gt; a
</span><a href="GHC.Core.TyCo.Rep.html#tcf_covar"><span class="hs-identifier hs-var hs-var">tcf_covar</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621681599907"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#CoVar"><span class="hs-identifier hs-type">CoVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681599908"><span class="hs-identifier hs-type">a</span></a></span><span>    </span><span class="hs-comment">-- into kinds of variables</span><span>
</span><span id="line-1800"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="tcf_hole"><span class="annot"><span class="annottext">forall env a. TyCoFolder env a -&gt; env -&gt; CoercionHole -&gt; a
</span><a href="GHC.Core.TyCo.Rep.html#tcf_hole"><span class="hs-identifier hs-var hs-var">tcf_hole</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621681599907"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionHole"><span class="hs-identifier hs-type">CoercionHole</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681599908"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1801"></span><span>          </span><span class="hs-comment">-- ^ What to do with coercion holes.</span><span>
</span><span id="line-1802"></span><span>          </span><span class="hs-comment">-- See Note [Coercion holes] in &quot;GHC.Core.TyCo.Rep&quot;.</span><span>
</span><span id="line-1803"></span><span>
</span><span id="line-1804"></span><span>      </span><span class="hs-special">,</span><span> </span><span id="tcf_tycobinder"><span class="annot"><span class="annottext">forall env a.
TyCoFolder env a -&gt; env -&gt; TyVar -&gt; ForAllTyFlag -&gt; env
</span><a href="GHC.Core.TyCo.Rep.html#tcf_tycobinder"><span class="hs-identifier hs-var hs-var">tcf_tycobinder</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621681599907"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#TyCoVar"><span class="hs-identifier hs-type">TyCoVar</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#ForAllTyFlag"><span class="hs-identifier hs-type">ForAllTyFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681599907"><span class="hs-identifier hs-type">env</span></a></span><span>
</span><span id="line-1805"></span><span>          </span><span class="annot"><span class="hs-comment">-- ^ The returned env is used in the extended scope</span></span><span>
</span><span id="line-1806"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-1807"></span><span>
</span><span id="line-1808"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#foldTyCo"><span class="hs-pragma hs-type">foldTyCo</span></a></span><span>  </span><span class="hs-pragma">#-}</span><span>  </span><span class="hs-comment">-- See Note [Specialising foldType]</span><span>
</span><span id="line-1809"></span><span id="local-6989586621681599920"><span id="local-6989586621681599921"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#foldTyCo"><span class="hs-identifier hs-type">foldTyCo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#Monoid/GHC.Base.html#Monoid"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681599920"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyCoFolder"><span class="hs-identifier hs-type">TyCoFolder</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681599921"><span class="hs-identifier hs-type">env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681599920"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681599921"><span class="hs-identifier hs-type">env</span></a></span><span>
</span><span id="line-1810"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681599920"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681599920"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681599920"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681599920"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1811"></span><span id="foldTyCo"><span class="annot"><span class="annottext">foldTyCo :: forall a env.
Monoid a =&gt;
TyCoFolder env a
-&gt; env
-&gt; (Kind -&gt; a, [Kind] -&gt; a, KindCoercion -&gt; a, [KindCoercion] -&gt; a)
</span><a href="GHC.Core.TyCo.Rep.html#foldTyCo"><span class="hs-identifier hs-var hs-var">foldTyCo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyCoFolder"><span class="hs-identifier hs-type">TyCoFolder</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tcf_view :: forall env a. TyCoFolder env a -&gt; Kind -&gt; Maybe Kind
</span><a href="GHC.Core.TyCo.Rep.html#tcf_view"><span class="hs-identifier hs-var">tcf_view</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681601280"><span class="annot"><span class="annottext">Kind -&gt; Maybe Kind
</span><a href="#local-6989586621681601280"><span class="hs-identifier hs-var">view</span></a></span></span><span>
</span><span id="line-1812"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcf_tyvar :: forall env a. TyCoFolder env a -&gt; env -&gt; TyVar -&gt; a
</span><a href="GHC.Core.TyCo.Rep.html#tcf_tyvar"><span class="hs-identifier hs-var">tcf_tyvar</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681601281"><span class="annot"><span class="annottext">env -&gt; TyVar -&gt; a
</span><a href="#local-6989586621681601281"><span class="hs-identifier hs-var">tyvar</span></a></span></span><span>
</span><span id="line-1813"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcf_tycobinder :: forall env a.
TyCoFolder env a -&gt; env -&gt; TyVar -&gt; ForAllTyFlag -&gt; env
</span><a href="GHC.Core.TyCo.Rep.html#tcf_tycobinder"><span class="hs-identifier hs-var">tcf_tycobinder</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681601282"><span class="annot"><span class="annottext">env -&gt; TyVar -&gt; ForAllTyFlag -&gt; env
</span><a href="#local-6989586621681601282"><span class="hs-identifier hs-var">tycobinder</span></a></span></span><span>
</span><span id="line-1814"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcf_covar :: forall env a. TyCoFolder env a -&gt; env -&gt; TyVar -&gt; a
</span><a href="GHC.Core.TyCo.Rep.html#tcf_covar"><span class="hs-identifier hs-var">tcf_covar</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681601283"><span class="annot"><span class="annottext">env -&gt; TyVar -&gt; a
</span><a href="#local-6989586621681601283"><span class="hs-identifier hs-var">covar</span></a></span></span><span>
</span><span id="line-1815"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcf_hole :: forall env a. TyCoFolder env a -&gt; env -&gt; CoercionHole -&gt; a
</span><a href="GHC.Core.TyCo.Rep.html#tcf_hole"><span class="hs-identifier hs-var">tcf_hole</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681601284"><span class="annot"><span class="annottext">env -&gt; CoercionHole -&gt; a
</span><a href="#local-6989586621681601284"><span class="hs-identifier hs-var">cohole</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681601285"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601285"><span class="hs-identifier hs-var">env</span></a></span></span><span>
</span><span id="line-1816"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">env -&gt; Kind -&gt; a
</span><a href="#local-6989586621681601286"><span class="hs-identifier hs-var">go_ty</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601285"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">env -&gt; [Kind] -&gt; a
</span><a href="#local-6989586621681601287"><span class="hs-identifier hs-var">go_tys</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601285"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">env -&gt; KindCoercion -&gt; a
</span><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601285"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">env -&gt; [KindCoercion] -&gt; a
</span><a href="#local-6989586621681601289"><span class="hs-identifier hs-var">go_cos</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601285"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1817"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1818"></span><span>    </span><span id="local-6989586621681601286"><span class="annot"><span class="annottext">go_ty :: env -&gt; Kind -&gt; a
</span><a href="#local-6989586621681601286"><span class="hs-identifier hs-var hs-var">go_ty</span></a></span></span><span> </span><span id="local-6989586621681601290"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601290"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681601291"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601291"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681601292"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601292"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Maybe Kind
</span><a href="#local-6989586621681601280"><span class="hs-identifier hs-var">view</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601291"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; Kind -&gt; a
</span><a href="#local-6989586621681601286"><span class="hs-identifier hs-var">go_ty</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601290"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601292"><span class="hs-identifier hs-var">ty'</span></a></span><span>
</span><span id="line-1819"></span><span>    </span><span class="annot"><a href="#local-6989586621681601286"><span class="hs-identifier hs-var">go_ty</span></a></span><span> </span><span id="local-6989586621681601293"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601293"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyVarTy"><span class="hs-identifier hs-type">TyVarTy</span></a></span><span> </span><span id="local-6989586621681601294"><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681601294"><span class="hs-identifier hs-var">tv</span></a></span></span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; TyVar -&gt; a
</span><a href="#local-6989586621681601281"><span class="hs-identifier hs-var">tyvar</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601293"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681601294"><span class="hs-identifier hs-var">tv</span></a></span><span>
</span><span id="line-1820"></span><span>    </span><span class="annot"><a href="#local-6989586621681601286"><span class="hs-identifier hs-var">go_ty</span></a></span><span> </span><span id="local-6989586621681601295"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601295"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AppTy"><span class="hs-identifier hs-type">AppTy</span></a></span><span> </span><span id="local-6989586621681601296"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601296"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681601297"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601297"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; Kind -&gt; a
</span><a href="#local-6989586621681601286"><span class="hs-identifier hs-var">go_ty</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601295"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601296"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mappend/GHC.Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">env -&gt; Kind -&gt; a
</span><a href="#local-6989586621681601286"><span class="hs-identifier hs-var">go_ty</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601295"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601297"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-1821"></span><span>    </span><span class="annot"><a href="#local-6989586621681601286"><span class="hs-identifier hs-var">go_ty</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#LitTy"><span class="hs-identifier hs-type">LitTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
forall a. Monoid a =&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mempty/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1822"></span><span>    </span><span class="annot"><a href="#local-6989586621681601286"><span class="hs-identifier hs-var">go_ty</span></a></span><span> </span><span id="local-6989586621681601298"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601298"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CastTy"><span class="hs-identifier hs-type">CastTy</span></a></span><span> </span><span id="local-6989586621681601299"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601299"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681601300"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601300"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; Kind -&gt; a
</span><a href="#local-6989586621681601286"><span class="hs-identifier hs-var">go_ty</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601298"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601299"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mappend/GHC.Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">env -&gt; KindCoercion -&gt; a
</span><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601298"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601300"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1823"></span><span>    </span><span class="annot"><a href="#local-6989586621681601286"><span class="hs-identifier hs-var">go_ty</span></a></span><span> </span><span id="local-6989586621681601301"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601301"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionTy"><span class="hs-identifier hs-type">CoercionTy</span></a></span><span> </span><span id="local-6989586621681601302"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601302"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; KindCoercion -&gt; a
</span><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601301"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601302"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1824"></span><span>    </span><span class="annot"><a href="#local-6989586621681601286"><span class="hs-identifier hs-var">go_ty</span></a></span><span> </span><span id="local-6989586621681601303"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601303"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunTy"><span class="hs-identifier hs-type">FunTy</span></a></span><span> </span><span class="annot"><span class="annottext">FunTyFlag
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681601304"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601304"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621681601305"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601305"><span class="hs-identifier hs-var">arg</span></a></span></span><span> </span><span id="local-6989586621681601306"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601306"><span class="hs-identifier hs-var">res</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; Kind -&gt; a
</span><a href="#local-6989586621681601286"><span class="hs-identifier hs-var">go_ty</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601303"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601304"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mappend/GHC.Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">env -&gt; Kind -&gt; a
</span><a href="#local-6989586621681601286"><span class="hs-identifier hs-var">go_ty</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601303"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601305"><span class="hs-identifier hs-var">arg</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mappend/GHC.Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">env -&gt; Kind -&gt; a
</span><a href="#local-6989586621681601286"><span class="hs-identifier hs-var">go_ty</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601303"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601306"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-1825"></span><span>    </span><span class="annot"><a href="#local-6989586621681601286"><span class="hs-identifier hs-var">go_ty</span></a></span><span> </span><span id="local-6989586621681601307"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601307"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681601308"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681601308"><span class="hs-identifier hs-var">tys</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; [Kind] -&gt; a
</span><a href="#local-6989586621681601287"><span class="hs-identifier hs-var">go_tys</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601307"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681601308"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-1826"></span><span>    </span><span class="annot"><a href="#local-6989586621681601286"><span class="hs-identifier hs-var">go_ty</span></a></span><span> </span><span id="local-6989586621681601309"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601309"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ForAllTy"><span class="hs-identifier hs-type">ForAllTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-type">Bndr</span></a></span><span> </span><span id="local-6989586621681601311"><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681601311"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span id="local-6989586621681601312"><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="#local-6989586621681601312"><span class="hs-identifier hs-var">vis</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681601313"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601313"><span class="hs-identifier hs-var">inner</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1827"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621681601314"><span class="annot"><span class="annottext">env' :: env
</span><a href="#local-6989586621681601314"><span class="hs-identifier hs-var hs-var">env'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; TyVar -&gt; ForAllTyFlag -&gt; env
</span><a href="#local-6989586621681601282"><span class="hs-identifier hs-var">tycobinder</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601309"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681601311"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="#local-6989586621681601312"><span class="hs-identifier hs-var">vis</span></a></span><span>  </span><span class="hs-comment">-- Avoid building a thunk here</span><span>
</span><span id="line-1828"></span><span>        </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">env -&gt; Kind -&gt; a
</span><a href="#local-6989586621681601286"><span class="hs-identifier hs-var">go_ty</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601309"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyVar -&gt; Kind
</span><a href="GHC.Types.Var.html#varType"><span class="hs-identifier hs-var">varType</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681601311"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mappend/GHC.Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">env -&gt; Kind -&gt; a
</span><a href="#local-6989586621681601286"><span class="hs-identifier hs-var">go_ty</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601314"><span class="hs-identifier hs-var">env'</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601313"><span class="hs-identifier hs-var">inner</span></a></span><span>
</span><span id="line-1829"></span><span>
</span><span id="line-1830"></span><span>    </span><span class="hs-comment">-- Explicit recursion because using foldr builds a local</span><span>
</span><span id="line-1831"></span><span>    </span><span class="hs-comment">-- loop (with env free) and I'm not confident it'll be</span><span>
</span><span id="line-1832"></span><span>    </span><span class="hs-comment">-- lambda lifted in the end</span><span>
</span><span id="line-1833"></span><span>    </span><span id="local-6989586621681601287"><span class="annot"><span class="annottext">go_tys :: env -&gt; [Kind] -&gt; a
</span><a href="#local-6989586621681601287"><span class="hs-identifier hs-var hs-var">go_tys</span></a></span></span><span> </span><span class="annot"><span class="annottext">env
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">[</span><span class="hs-special">]</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
forall a. Monoid a =&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mempty/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1834"></span><span>    </span><span class="annot"><a href="#local-6989586621681601287"><span class="hs-identifier hs-var">go_tys</span></a></span><span> </span><span id="local-6989586621681601316"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601316"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681601317"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601317"><span class="hs-identifier hs-var">t</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681601318"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681601318"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; Kind -&gt; a
</span><a href="#local-6989586621681601286"><span class="hs-identifier hs-var">go_ty</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601316"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601317"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mappend/GHC.Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">env -&gt; [Kind] -&gt; a
</span><a href="#local-6989586621681601287"><span class="hs-identifier hs-var">go_tys</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601316"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681601318"><span class="hs-identifier hs-var">ts</span></a></span><span>
</span><span id="line-1835"></span><span>
</span><span id="line-1836"></span><span>    </span><span id="local-6989586621681601289"><span class="annot"><span class="annottext">go_cos :: env -&gt; [KindCoercion] -&gt; a
</span><a href="#local-6989586621681601289"><span class="hs-identifier hs-var hs-var">go_cos</span></a></span></span><span> </span><span class="annot"><span class="annottext">env
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">[</span><span class="hs-special">]</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
forall a. Monoid a =&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mempty/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1837"></span><span>    </span><span class="annot"><a href="#local-6989586621681601289"><span class="hs-identifier hs-var">go_cos</span></a></span><span> </span><span id="local-6989586621681601319"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601319"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681601320"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601320"><span class="hs-identifier hs-var">c</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681601321"><span class="annot"><span class="annottext">[KindCoercion]
</span><a href="#local-6989586621681601321"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; KindCoercion -&gt; a
</span><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601319"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601320"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mappend/GHC.Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">env -&gt; [KindCoercion] -&gt; a
</span><a href="#local-6989586621681601289"><span class="hs-identifier hs-var">go_cos</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601319"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[KindCoercion]
</span><a href="#local-6989586621681601321"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-1838"></span><span>
</span><span id="line-1839"></span><span>    </span><span id="local-6989586621681601288"><span class="annot"><span class="annottext">go_co :: env -&gt; KindCoercion -&gt; a
</span><a href="#local-6989586621681601288"><span class="hs-identifier hs-var hs-var">go_co</span></a></span></span><span> </span><span id="local-6989586621681601322"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601322"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Refl"><span class="hs-identifier hs-type">Refl</span></a></span><span> </span><span id="local-6989586621681601323"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601323"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; Kind -&gt; a
</span><a href="#local-6989586621681601286"><span class="hs-identifier hs-var">go_ty</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601322"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601323"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1840"></span><span>    </span><span class="annot"><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span id="local-6989586621681601324"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601324"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#GRefl"><span class="hs-identifier hs-type">GRefl</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681601325"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601325"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="annot"><span class="annottext">MCoercionN
</span><a href="GHC.Core.TyCo.Rep.html#MRefl"><span class="hs-identifier hs-var">MRefl</span></a></span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; Kind -&gt; a
</span><a href="#local-6989586621681601286"><span class="hs-identifier hs-var">go_ty</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601324"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601325"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1841"></span><span>    </span><span class="annot"><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span id="local-6989586621681601326"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601326"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#GRefl"><span class="hs-identifier hs-type">GRefl</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681601327"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601327"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#MCo"><span class="hs-identifier hs-type">MCo</span></a></span><span> </span><span id="local-6989586621681601328"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601328"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; Kind -&gt; a
</span><a href="#local-6989586621681601286"><span class="hs-identifier hs-var">go_ty</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601326"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601327"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mappend/GHC.Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">env -&gt; KindCoercion -&gt; a
</span><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601326"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601328"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1842"></span><span>    </span><span class="annot"><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span id="local-6989586621681601329"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601329"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConAppCo"><span class="hs-identifier hs-type">TyConAppCo</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681601330"><span class="annot"><span class="annottext">[KindCoercion]
</span><a href="#local-6989586621681601330"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; [KindCoercion] -&gt; a
</span><a href="#local-6989586621681601289"><span class="hs-identifier hs-var">go_cos</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601329"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[KindCoercion]
</span><a href="#local-6989586621681601330"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1843"></span><span>    </span><span class="annot"><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span id="local-6989586621681601331"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601331"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AppCo"><span class="hs-identifier hs-type">AppCo</span></a></span><span> </span><span id="local-6989586621681601332"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601332"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span id="local-6989586621681601333"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601333"><span class="hs-identifier hs-var">c2</span></a></span></span><span class="hs-special">)</span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; KindCoercion -&gt; a
</span><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601331"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601332"><span class="hs-identifier hs-var">c1</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mappend/GHC.Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">env -&gt; KindCoercion -&gt; a
</span><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601331"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601333"><span class="hs-identifier hs-var">c2</span></a></span><span>
</span><span id="line-1844"></span><span>    </span><span class="annot"><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span id="local-6989586621681601334"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601334"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoVarCo"><span class="hs-identifier hs-type">CoVarCo</span></a></span><span> </span><span id="local-6989586621681601335"><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681601335"><span class="hs-identifier hs-var">cv</span></a></span></span><span class="hs-special">)</span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; TyVar -&gt; a
</span><a href="#local-6989586621681601283"><span class="hs-identifier hs-var">covar</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601334"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681601335"><span class="hs-identifier hs-var">cv</span></a></span><span>
</span><span id="line-1845"></span><span>    </span><span class="annot"><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span id="local-6989586621681601336"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601336"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AxiomInstCo"><span class="hs-identifier hs-type">AxiomInstCo</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681601337"><span class="annot"><span class="annottext">[KindCoercion]
</span><a href="#local-6989586621681601337"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; [KindCoercion] -&gt; a
</span><a href="#local-6989586621681601289"><span class="hs-identifier hs-var">go_cos</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601336"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[KindCoercion]
</span><a href="#local-6989586621681601337"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-1846"></span><span>    </span><span class="annot"><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span id="local-6989586621681601338"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601338"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#HoleCo"><span class="hs-identifier hs-type">HoleCo</span></a></span><span> </span><span id="local-6989586621681601339"><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621681601339"><span class="hs-identifier hs-var">hole</span></a></span></span><span class="hs-special">)</span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; CoercionHole -&gt; a
</span><a href="#local-6989586621681601284"><span class="hs-identifier hs-var">cohole</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601338"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">CoercionHole
</span><a href="#local-6989586621681601339"><span class="hs-identifier hs-var">hole</span></a></span><span>
</span><span id="line-1847"></span><span>    </span><span class="annot"><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span id="local-6989586621681601340"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601340"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#UnivCo"><span class="hs-identifier hs-type">UnivCo</span></a></span><span> </span><span id="local-6989586621681601341"><span class="annot"><span class="annottext">UnivCoProvenance
</span><a href="#local-6989586621681601341"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">Role
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681601342"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601342"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681601343"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601343"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; UnivCoProvenance -&gt; a
</span><a href="#local-6989586621681601344"><span class="hs-identifier hs-var">go_prov</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601340"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">UnivCoProvenance
</span><a href="#local-6989586621681601341"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mappend/GHC.Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">env -&gt; Kind -&gt; a
</span><a href="#local-6989586621681601286"><span class="hs-identifier hs-var">go_ty</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601340"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601342"><span class="hs-identifier hs-var">t1</span></a></span><span>
</span><span id="line-1848"></span><span>                                                       </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mappend/GHC.Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">env -&gt; Kind -&gt; a
</span><a href="#local-6989586621681601286"><span class="hs-identifier hs-var">go_ty</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601340"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601343"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-1849"></span><span>    </span><span class="annot"><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span id="local-6989586621681601345"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601345"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#SymCo"><span class="hs-identifier hs-type">SymCo</span></a></span><span> </span><span id="local-6989586621681601346"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601346"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; KindCoercion -&gt; a
</span><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601345"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601346"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1850"></span><span>    </span><span class="annot"><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span id="local-6989586621681601347"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601347"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TransCo"><span class="hs-identifier hs-type">TransCo</span></a></span><span> </span><span id="local-6989586621681601348"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601348"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span id="local-6989586621681601349"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601349"><span class="hs-identifier hs-var">c2</span></a></span></span><span class="hs-special">)</span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; KindCoercion -&gt; a
</span><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601347"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601348"><span class="hs-identifier hs-var">c1</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mappend/GHC.Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">env -&gt; KindCoercion -&gt; a
</span><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601347"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601349"><span class="hs-identifier hs-var">c2</span></a></span><span>
</span><span id="line-1851"></span><span>    </span><span class="annot"><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span id="local-6989586621681601350"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601350"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AxiomRuleCo"><span class="hs-identifier hs-type">AxiomRuleCo</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiomRule
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681601351"><span class="annot"><span class="annottext">[KindCoercion]
</span><a href="#local-6989586621681601351"><span class="hs-identifier hs-var">cos</span></a></span></span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; [KindCoercion] -&gt; a
</span><a href="#local-6989586621681601289"><span class="hs-identifier hs-var">go_cos</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601350"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">[KindCoercion]
</span><a href="#local-6989586621681601351"><span class="hs-identifier hs-var">cos</span></a></span><span>
</span><span id="line-1852"></span><span>    </span><span class="annot"><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span id="local-6989586621681601352"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601352"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#SelCo"><span class="hs-identifier hs-type">SelCo</span></a></span><span> </span><span class="annot"><span class="annottext">CoSel
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681601353"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601353"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; KindCoercion -&gt; a
</span><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601352"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601353"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1853"></span><span>    </span><span class="annot"><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span id="local-6989586621681601354"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601354"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#LRCo"><span class="hs-identifier hs-type">LRCo</span></a></span><span> </span><span class="annot"><span class="annottext">LeftOrRight
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681601355"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601355"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; KindCoercion -&gt; a
</span><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601354"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601355"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1854"></span><span>    </span><span class="annot"><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span id="local-6989586621681601356"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601356"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#InstCo"><span class="hs-identifier hs-type">InstCo</span></a></span><span> </span><span id="local-6989586621681601357"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601357"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span id="local-6989586621681601358"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601358"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">)</span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; KindCoercion -&gt; a
</span><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601356"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601357"><span class="hs-identifier hs-var">co</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mappend/GHC.Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">env -&gt; KindCoercion -&gt; a
</span><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601356"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601358"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-1855"></span><span>    </span><span class="annot"><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span id="local-6989586621681601359"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601359"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#KindCo"><span class="hs-identifier hs-type">KindCo</span></a></span><span> </span><span id="local-6989586621681601360"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601360"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; KindCoercion -&gt; a
</span><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601359"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601360"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1856"></span><span>    </span><span class="annot"><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span id="local-6989586621681601361"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601361"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#SubCo"><span class="hs-identifier hs-type">SubCo</span></a></span><span> </span><span id="local-6989586621681601362"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601362"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; KindCoercion -&gt; a
</span><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601361"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601362"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1857"></span><span>
</span><span id="line-1858"></span><span>    </span><span class="annot"><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span id="local-6989586621681601363"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601363"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunCo"><span class="hs-identifier hs-type">FunCo</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fco_mult :: KindCoercion -&gt; KindCoercion
</span><a href="GHC.Core.TyCo.Rep.html#fco_mult"><span class="hs-identifier hs-var">fco_mult</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681601364"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601364"><span class="hs-identifier hs-var">cw</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fco_arg :: KindCoercion -&gt; KindCoercion
</span><a href="GHC.Core.TyCo.Rep.html#fco_arg"><span class="hs-identifier hs-var">fco_arg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681601365"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601365"><span class="hs-identifier hs-var">c1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fco_res :: KindCoercion -&gt; KindCoercion
</span><a href="GHC.Core.TyCo.Rep.html#fco_res"><span class="hs-identifier hs-var">fco_res</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681601366"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601366"><span class="hs-identifier hs-var">c2</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-1859"></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; KindCoercion -&gt; a
</span><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601363"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601364"><span class="hs-identifier hs-var">cw</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mappend/GHC.Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">env -&gt; KindCoercion -&gt; a
</span><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601363"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601365"><span class="hs-identifier hs-var">c1</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mappend/GHC.Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">env -&gt; KindCoercion -&gt; a
</span><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601363"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601366"><span class="hs-identifier hs-var">c2</span></a></span><span>
</span><span id="line-1860"></span><span>
</span><span id="line-1861"></span><span>    </span><span class="annot"><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span id="local-6989586621681601367"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601367"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ForAllCo"><span class="hs-identifier hs-type">ForAllCo</span></a></span><span> </span><span id="local-6989586621681601368"><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681601368"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span id="local-6989586621681601369"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601369"><span class="hs-identifier hs-var">kind_co</span></a></span></span><span> </span><span id="local-6989586621681601370"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601370"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1862"></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; KindCoercion -&gt; a
</span><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601367"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601369"><span class="hs-identifier hs-var">kind_co</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mappend/GHC.Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">env -&gt; Kind -&gt; a
</span><a href="#local-6989586621681601286"><span class="hs-identifier hs-var">go_ty</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601367"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyVar -&gt; Kind
</span><a href="GHC.Types.Var.html#varType"><span class="hs-identifier hs-var">varType</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681601368"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1863"></span><span>                          </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mappend/GHC.Base.html#mappend"><span class="hs-operator hs-var">`mappend`</span></a></span><span> </span><span class="annot"><span class="annottext">env -&gt; KindCoercion -&gt; a
</span><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601371"><span class="hs-identifier hs-var">env'</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601370"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1864"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1865"></span><span>        </span><span id="local-6989586621681601371"><span class="annot"><span class="annottext">env' :: env
</span><a href="#local-6989586621681601371"><span class="hs-identifier hs-var hs-var">env'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; TyVar -&gt; ForAllTyFlag -&gt; env
</span><a href="#local-6989586621681601282"><span class="hs-identifier hs-var">tycobinder</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601367"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681601368"><span class="hs-identifier hs-var">tv</span></a></span><span> </span><span class="annot"><span class="annottext">ForAllTyFlag
</span><a href="GHC.Types.Var.html#Inferred"><span class="hs-identifier hs-var">Inferred</span></a></span><span>
</span><span id="line-1866"></span><span>
</span><span id="line-1867"></span><span>    </span><span id="local-6989586621681601344"><span class="annot"><span class="annottext">go_prov :: env -&gt; UnivCoProvenance -&gt; a
</span><a href="#local-6989586621681601344"><span class="hs-identifier hs-var hs-var">go_prov</span></a></span></span><span> </span><span id="local-6989586621681601373"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601373"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#PhantomProv"><span class="hs-identifier hs-type">PhantomProv</span></a></span><span> </span><span id="local-6989586621681601374"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601374"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; KindCoercion -&gt; a
</span><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601373"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601374"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1868"></span><span>    </span><span class="annot"><a href="#local-6989586621681601344"><span class="hs-identifier hs-var">go_prov</span></a></span><span> </span><span id="local-6989586621681601375"><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601375"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ProofIrrelProv"><span class="hs-identifier hs-type">ProofIrrelProv</span></a></span><span> </span><span id="local-6989586621681601376"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601376"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">env -&gt; KindCoercion -&gt; a
</span><a href="#local-6989586621681601288"><span class="hs-identifier hs-var">go_co</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><a href="#local-6989586621681601375"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601376"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1869"></span><span>    </span><span class="annot"><a href="#local-6989586621681601344"><span class="hs-identifier hs-var">go_prov</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#PluginProv"><span class="hs-identifier hs-type">PluginProv</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
forall a. Monoid a =&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mempty/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1870"></span><span>    </span><span class="annot"><a href="#local-6989586621681601344"><span class="hs-identifier hs-var">go_prov</span></a></span><span> </span><span class="annot"><span class="annottext">env
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CorePrepProv"><span class="hs-identifier hs-type">CorePrepProv</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
forall a. Monoid a =&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mempty/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1871"></span><span>
</span><span id="line-1872"></span><span class="annot"><span class="hs-comment">-- | A view function that looks through nothing.</span></span><span>
</span><span id="line-1873"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#noView"><span class="hs-identifier hs-type">noView</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-1874"></span><span id="noView"><span class="annot"><span class="annottext">noView :: Kind -&gt; Maybe Kind
</span><a href="GHC.Core.TyCo.Rep.html#noView"><span class="hs-identifier hs-var hs-var">noView</span></a></span></span><span> </span><span class="annot"><span class="annottext">Kind
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Kind
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1875"></span><span>
</span><span id="line-1876"></span><span class="annot"><span class="hs-comment">{- *********************************************************************
*                                                                      *
                   typeSize, coercionSize
*                                                                      *
********************************************************************* -}</span></span><span>
</span><span id="line-1881"></span><span>
</span><span id="line-1882"></span><span class="hs-comment">-- NB: We put typeSize/coercionSize here because they are mutually</span><span>
</span><span id="line-1883"></span><span class="hs-comment">--     recursive, and have the CPR property.  If we have mutual</span><span>
</span><span id="line-1884"></span><span class="hs-comment">--     recursion across a hi-boot file, we don't get the CPR property</span><span>
</span><span id="line-1885"></span><span class="hs-comment">--     and these functions allocate a tremendous amount of rubbish.</span><span>
</span><span id="line-1886"></span><span class="hs-comment">--     It's not critical (because typeSize is really only used in</span><span>
</span><span id="line-1887"></span><span class="hs-comment">--     debug mode, but I tripped over an example (T5642) in which</span><span>
</span><span id="line-1888"></span><span class="hs-comment">--     typeSize was one of the biggest single allocators in all of GHC.</span><span>
</span><span id="line-1889"></span><span class="hs-comment">--     And it's easy to fix, so I did.</span><span>
</span><span id="line-1890"></span><span>
</span><span id="line-1891"></span><span class="hs-comment">-- NB: typeSize does not respect `eqType`, in that two types that</span><span>
</span><span id="line-1892"></span><span class="hs-comment">--     are `eqType` may return different sizes. This is OK, because this</span><span>
</span><span id="line-1893"></span><span class="hs-comment">--     function is used only in reporting, not decision-making.</span><span>
</span><span id="line-1894"></span><span>
</span><span id="line-1895"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#typeSize"><span class="hs-identifier hs-type">typeSize</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-1896"></span><span id="typeSize"><span class="annot"><span class="annottext">typeSize :: Kind -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#typeSize"><span class="hs-identifier hs-var hs-var">typeSize</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#LitTy"><span class="hs-identifier hs-type">LitTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1897"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#typeSize"><span class="hs-identifier hs-var">typeSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyVarTy"><span class="hs-identifier hs-type">TyVarTy</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1898"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#typeSize"><span class="hs-identifier hs-var">typeSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AppTy"><span class="hs-identifier hs-type">AppTy</span></a></span><span> </span><span id="local-6989586621681601377"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601377"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681601378"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601378"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#typeSize"><span class="hs-identifier hs-var">typeSize</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601377"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#typeSize"><span class="hs-identifier hs-var">typeSize</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601378"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-1899"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#typeSize"><span class="hs-identifier hs-var">typeSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunTy"><span class="hs-identifier hs-type">FunTy</span></a></span><span> </span><span class="annot"><span class="annottext">FunTyFlag
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Kind
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681601380"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601380"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681601381"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601381"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#typeSize"><span class="hs-identifier hs-var">typeSize</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601380"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#typeSize"><span class="hs-identifier hs-var">typeSize</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601381"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-1900"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#typeSize"><span class="hs-identifier hs-var">typeSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ForAllTy"><span class="hs-identifier hs-type">ForAllTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Var.html#Bndr"><span class="hs-identifier hs-type">Bndr</span></a></span><span> </span><span id="local-6989586621681601382"><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681601382"><span class="hs-identifier hs-var">tv</span></a></span></span><span> </span><span class="annot"><span class="annottext">ForAllTyFlag
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681601383"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601383"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#typeSize"><span class="hs-identifier hs-var">typeSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TyVar -&gt; Kind
</span><a href="GHC.Types.Var.html#varType"><span class="hs-identifier hs-var">varType</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar
</span><a href="#local-6989586621681601382"><span class="hs-identifier hs-var">tv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#typeSize"><span class="hs-identifier hs-var">typeSize</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601383"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1901"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#typeSize"><span class="hs-identifier hs-var">typeSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConApp"><span class="hs-identifier hs-type">TyConApp</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681601384"><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681601384"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">)</span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Int
forall a. Num a =&gt; [a] -&gt; a
forall (t :: * -&gt; *) a. (Foldable t, Num a) =&gt; t a -&gt; a
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#sum/Data.Foldable.html#sum"><span class="hs-identifier hs-var">sum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Kind -&gt; Int) -&gt; [Kind] -&gt; [Int]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#typeSize"><span class="hs-identifier hs-var">typeSize</span></a></span><span> </span><span class="annot"><span class="annottext">[Kind]
</span><a href="#local-6989586621681601384"><span class="hs-identifier hs-var">ts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1902"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#typeSize"><span class="hs-identifier hs-var">typeSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CastTy"><span class="hs-identifier hs-type">CastTy</span></a></span><span> </span><span id="local-6989586621681601386"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601386"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span id="local-6989586621681601387"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601387"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#typeSize"><span class="hs-identifier hs-var">typeSize</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601386"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601387"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1903"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#typeSize"><span class="hs-identifier hs-var">typeSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoercionTy"><span class="hs-identifier hs-type">CoercionTy</span></a></span><span> </span><span id="local-6989586621681601388"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601388"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">KindCoercion -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601388"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1904"></span><span>
</span><span id="line-1905"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-type">coercionSize</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Coercion"><span class="hs-identifier hs-type">Coercion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-1906"></span><span id="coercionSize"><span class="annot"><span class="annottext">coercionSize :: KindCoercion -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var hs-var">coercionSize</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Refl"><span class="hs-identifier hs-type">Refl</span></a></span><span> </span><span id="local-6989586621681601389"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601389"><span class="hs-identifier hs-var">ty</span></a></span></span><span class="hs-special">)</span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#typeSize"><span class="hs-identifier hs-var">typeSize</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601389"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1907"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#GRefl"><span class="hs-identifier hs-type">GRefl</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681601390"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601390"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="annot"><span class="annottext">MCoercionN
</span><a href="GHC.Core.TyCo.Rep.html#MRefl"><span class="hs-identifier hs-var">MRefl</span></a></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#typeSize"><span class="hs-identifier hs-var">typeSize</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601390"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-1908"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#GRefl"><span class="hs-identifier hs-type">GRefl</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681601391"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601391"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#MCo"><span class="hs-identifier hs-type">MCo</span></a></span><span> </span><span id="local-6989586621681601392"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601392"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#typeSize"><span class="hs-identifier hs-var">typeSize</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601391"><span class="hs-identifier hs-var">ty</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601392"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1909"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TyConAppCo"><span class="hs-identifier hs-type">TyConAppCo</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681601393"><span class="annot"><span class="annottext">[KindCoercion]
</span><a href="#local-6989586621681601393"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Int
forall a. Num a =&gt; [a] -&gt; a
forall (t :: * -&gt; *) a. (Foldable t, Num a) =&gt; t a -&gt; a
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#sum/Data.Foldable.html#sum"><span class="hs-identifier hs-var">sum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(KindCoercion -&gt; Int) -&gt; [KindCoercion] -&gt; [Int]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="annot"><span class="annottext">[KindCoercion]
</span><a href="#local-6989586621681601393"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1910"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AppCo"><span class="hs-identifier hs-type">AppCo</span></a></span><span> </span><span id="local-6989586621681601394"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601394"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span id="local-6989586621681601395"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601395"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">KindCoercion -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601394"><span class="hs-identifier hs-var">co</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601395"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-1911"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ForAllCo"><span class="hs-identifier hs-type">ForAllCo</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681601396"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601396"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621681601397"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601397"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601397"><span class="hs-identifier hs-var">co</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601396"><span class="hs-identifier hs-var">h</span></a></span><span>
</span><span id="line-1912"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#FunCo"><span class="hs-identifier hs-type">FunCo</span></a></span><span> </span><span class="annot"><span class="annottext">Role
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">FunTyFlag
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">FunTyFlag
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681601398"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601398"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span id="local-6989586621681601399"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601399"><span class="hs-identifier hs-var">c1</span></a></span></span><span> </span><span id="local-6989586621681601400"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601400"><span class="hs-identifier hs-var">c2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601399"><span class="hs-identifier hs-var">c1</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601400"><span class="hs-identifier hs-var">c2</span></a></span><span>
</span><span id="line-1913"></span><span>                                                         </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601398"><span class="hs-identifier hs-var">w</span></a></span><span>
</span><span id="line-1914"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CoVarCo"><span class="hs-identifier hs-type">CoVarCo</span></a></span><span> </span><span class="annot"><span class="annottext">TyVar
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1915"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#HoleCo"><span class="hs-identifier hs-type">HoleCo</span></a></span><span> </span><span class="annot"><span class="annottext">CoercionHole
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1916"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AxiomInstCo"><span class="hs-identifier hs-type">AxiomInstCo</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiom Branched
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681601401"><span class="annot"><span class="annottext">[KindCoercion]
</span><a href="#local-6989586621681601401"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Int
forall a. Num a =&gt; [a] -&gt; a
forall (t :: * -&gt; *) a. (Foldable t, Num a) =&gt; t a -&gt; a
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#sum/Data.Foldable.html#sum"><span class="hs-identifier hs-var">sum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(KindCoercion -&gt; Int) -&gt; [KindCoercion] -&gt; [Int]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="annot"><span class="annottext">[KindCoercion]
</span><a href="#local-6989586621681601401"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1917"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#UnivCo"><span class="hs-identifier hs-type">UnivCo</span></a></span><span> </span><span id="local-6989586621681601402"><span class="annot"><span class="annottext">UnivCoProvenance
</span><a href="#local-6989586621681601402"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">Role
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681601403"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601403"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681601404"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601404"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">UnivCoProvenance -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#provSize"><span class="hs-identifier hs-var">provSize</span></a></span><span> </span><span class="annot"><span class="annottext">UnivCoProvenance
</span><a href="#local-6989586621681601402"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#typeSize"><span class="hs-identifier hs-var">typeSize</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601403"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#typeSize"><span class="hs-identifier hs-var">typeSize</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601404"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-1918"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#SymCo"><span class="hs-identifier hs-type">SymCo</span></a></span><span> </span><span id="local-6989586621681601405"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601405"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601405"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1919"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#TransCo"><span class="hs-identifier hs-type">TransCo</span></a></span><span> </span><span id="local-6989586621681601406"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601406"><span class="hs-identifier hs-var">co1</span></a></span></span><span> </span><span id="local-6989586621681601407"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601407"><span class="hs-identifier hs-var">co2</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601406"><span class="hs-identifier hs-var">co1</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601407"><span class="hs-identifier hs-var">co2</span></a></span><span>
</span><span id="line-1920"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#SelCo"><span class="hs-identifier hs-type">SelCo</span></a></span><span> </span><span class="annot"><span class="annottext">CoSel
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681601408"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601408"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601408"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1921"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#LRCo"><span class="hs-identifier hs-type">LRCo</span></a></span><span>  </span><span class="annot"><span class="annottext">LeftOrRight
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681601409"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601409"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601409"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1922"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#InstCo"><span class="hs-identifier hs-type">InstCo</span></a></span><span> </span><span id="local-6989586621681601410"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601410"><span class="hs-identifier hs-var">co</span></a></span></span><span> </span><span id="local-6989586621681601411"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601411"><span class="hs-identifier hs-var">arg</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601410"><span class="hs-identifier hs-var">co</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601411"><span class="hs-identifier hs-var">arg</span></a></span><span>
</span><span id="line-1923"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#KindCo"><span class="hs-identifier hs-type">KindCo</span></a></span><span> </span><span id="local-6989586621681601412"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601412"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601412"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1924"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#SubCo"><span class="hs-identifier hs-type">SubCo</span></a></span><span> </span><span id="local-6989586621681601413"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601413"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601413"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1925"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#AxiomRuleCo"><span class="hs-identifier hs-type">AxiomRuleCo</span></a></span><span> </span><span class="annot"><span class="annottext">CoAxiomRule
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681601414"><span class="annot"><span class="annottext">[KindCoercion]
</span><a href="#local-6989586621681601414"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Int
forall a. Num a =&gt; [a] -&gt; a
forall (t :: * -&gt; *) a. (Foldable t, Num a) =&gt; t a -&gt; a
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#sum/Data.Foldable.html#sum"><span class="hs-identifier hs-var">sum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(KindCoercion -&gt; Int) -&gt; [KindCoercion] -&gt; [Int]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="annot"><span class="annottext">[KindCoercion]
</span><a href="#local-6989586621681601414"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1926"></span><span>
</span><span id="line-1927"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#provSize"><span class="hs-identifier hs-type">provSize</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#UnivCoProvenance"><span class="hs-identifier hs-type">UnivCoProvenance</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-1928"></span><span id="provSize"><span class="annot"><span class="annottext">provSize :: UnivCoProvenance -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#provSize"><span class="hs-identifier hs-var hs-var">provSize</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#PhantomProv"><span class="hs-identifier hs-type">PhantomProv</span></a></span><span> </span><span id="local-6989586621681601415"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601415"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601415"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1929"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#provSize"><span class="hs-identifier hs-var">provSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#ProofIrrelProv"><span class="hs-identifier hs-type">ProofIrrelProv</span></a></span><span> </span><span id="local-6989586621681601416"><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601416"><span class="hs-identifier hs-var">co</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion -&gt; Int
</span><a href="GHC.Core.TyCo.Rep.html#coercionSize"><span class="hs-identifier hs-var">coercionSize</span></a></span><span> </span><span class="annot"><span class="annottext">KindCoercion
</span><a href="#local-6989586621681601416"><span class="hs-identifier hs-var">co</span></a></span><span>
</span><span id="line-1930"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#provSize"><span class="hs-identifier hs-var">provSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#PluginProv"><span class="hs-identifier hs-type">PluginProv</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1931"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#provSize"><span class="hs-identifier hs-var">provSize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#CorePrepProv"><span class="hs-identifier hs-type">CorePrepProv</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1932"></span><span>
</span><span id="line-1933"></span><span class="hs-comment">{-
************************************************************************
*                                                                      *
                    Multiplicities
*                                                                      *
************************************************************************

These definitions are here to avoid module loops, and to keep
GHC.Core.Multiplicity above this module.

-}</span><span>
</span><span id="line-1944"></span><span>
</span><span id="line-1945"></span><span class="annot"><span class="hs-comment">-- | A shorthand for data with an attached 'Mult' element (the multiplicity).</span></span><span>
</span><span id="line-1946"></span><span class="hs-keyword">data</span><span> </span><span id="Scaled"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-var">Scaled</span></a></span></span><span> </span><span id="local-6989586621681599940"><span class="annot"><a href="#local-6989586621681599940"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Scaled"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-var">Scaled</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-type">Mult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681599940"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1947"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681601423"><span id="local-6989586621681601427"><span id="local-6989586621681601431"><span id="local-6989586621681601433"><span id="local-6989586621681601435"><span id="local-6989586621681601441"><span id="local-6989586621681601447"><span id="local-6989586621681601450"><span id="local-6989586621681601453"><span id="local-6989586621681601456"><span id="local-6989586621681601459"><span id="local-6989586621681601462"><span id="local-6989586621681601467"><span id="local-6989586621681601472"><span class="annot"><span class="annottext">Typeable (Scaled a)
Typeable (Scaled a) =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; Scaled a -&gt; c (Scaled a))
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (Scaled a))
-&gt; (Scaled a -&gt; Constr)
-&gt; (Scaled a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c (Scaled a)))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c (Scaled a)))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; Scaled a -&gt; Scaled a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Scaled a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Scaled a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; Scaled a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Scaled a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; Scaled a -&gt; m (Scaled a))
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; Scaled a -&gt; m (Scaled a))
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; Scaled a -&gt; m (Scaled a))
-&gt; Data (Scaled a)
Scaled a -&gt; Constr
Scaled a -&gt; DataType
(forall b. Data b =&gt; b -&gt; b) -&gt; Scaled a -&gt; Scaled a
forall a. Data a =&gt; Typeable (Scaled a)
forall a. Data a =&gt; Scaled a -&gt; Constr
forall a. Data a =&gt; Scaled a -&gt; DataType
forall a.
Data a =&gt;
(forall b. Data b =&gt; b -&gt; b) -&gt; Scaled a -&gt; Scaled a
forall a u.
Data a =&gt;
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Scaled a -&gt; u
forall a u.
Data a =&gt;
(forall d. Data d =&gt; d -&gt; u) -&gt; Scaled a -&gt; [u]
forall a r r'.
Data a =&gt;
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Scaled a -&gt; r
forall a r r'.
Data a =&gt;
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Scaled a -&gt; r
forall a (m :: * -&gt; *).
(Data a, Monad m) =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Scaled a -&gt; m (Scaled a)
forall a (m :: * -&gt; *).
(Data a, MonadPlus m) =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Scaled a -&gt; m (Scaled a)
forall a (c :: * -&gt; *).
Data a =&gt;
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (Scaled a)
forall a (c :: * -&gt; *).
Data a =&gt;
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; Scaled a -&gt; c (Scaled a)
forall a (t :: * -&gt; *) (c :: * -&gt; *).
(Data a, Typeable t) =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c (Scaled a))
forall a (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
(Data a, Typeable t) =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c (Scaled a))
forall a.
Typeable a =&gt;
(forall (c :: * -&gt; *).
 (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
 -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Scaled a -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; Scaled a -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Scaled a -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Scaled a -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Scaled a -&gt; m (Scaled a)
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Scaled a -&gt; m (Scaled a)
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (Scaled a)
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; Scaled a -&gt; c (Scaled a)
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c (Scaled a))
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c (Scaled a))
$cgfoldl :: forall a (c :: * -&gt; *).
Data a =&gt;
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; Scaled a -&gt; c (Scaled a)
gfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; Scaled a -&gt; c (Scaled a)
$cgunfold :: forall a (c :: * -&gt; *).
Data a =&gt;
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (Scaled a)
gunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (Scaled a)
$ctoConstr :: forall a. Data a =&gt; Scaled a -&gt; Constr
toConstr :: Scaled a -&gt; Constr
$cdataTypeOf :: forall a. Data a =&gt; Scaled a -&gt; DataType
dataTypeOf :: Scaled a -&gt; DataType
$cdataCast1 :: forall a (t :: * -&gt; *) (c :: * -&gt; *).
(Data a, Typeable t) =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c (Scaled a))
dataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c (Scaled a))
$cdataCast2 :: forall a (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
(Data a, Typeable t) =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c (Scaled a))
dataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c (Scaled a))
$cgmapT :: forall a.
Data a =&gt;
(forall b. Data b =&gt; b -&gt; b) -&gt; Scaled a -&gt; Scaled a
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; Scaled a -&gt; Scaled a
$cgmapQl :: forall a r r'.
Data a =&gt;
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Scaled a -&gt; r
gmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Scaled a -&gt; r
$cgmapQr :: forall a r r'.
Data a =&gt;
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Scaled a -&gt; r
gmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; Scaled a -&gt; r
$cgmapQ :: forall a u.
Data a =&gt;
(forall d. Data d =&gt; d -&gt; u) -&gt; Scaled a -&gt; [u]
gmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; Scaled a -&gt; [u]
$cgmapQi :: forall a u.
Data a =&gt;
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Scaled a -&gt; u
gmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; Scaled a -&gt; u
$cgmapM :: forall a (m :: * -&gt; *).
(Data a, Monad m) =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Scaled a -&gt; m (Scaled a)
gmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Scaled a -&gt; m (Scaled a)
$cgmapMp :: forall a (m :: * -&gt; *).
(Data a, MonadPlus m) =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Scaled a -&gt; m (Scaled a)
gmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Scaled a -&gt; m (Scaled a)
$cgmapMo :: forall a (m :: * -&gt; *).
(Data a, MonadPlus m) =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Scaled a -&gt; m (Scaled a)
gmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; Scaled a -&gt; m (Scaled a)
</span><a href="../../base-4.18.3.0/src/Data.Data.html#Data/Data.Data.html#Data"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data.Data</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1948"></span><span>  </span><span class="hs-comment">-- You might think that this would be a natural candidate for</span><span>
</span><span id="line-1949"></span><span>  </span><span class="hs-comment">-- Functor, Traversable but Krzysztof says (!3674) &quot;it was too easy</span><span>
</span><span id="line-1950"></span><span>  </span><span class="hs-comment">-- to accidentally lift functions (substitutions, zonking etc.) from</span><span>
</span><span id="line-1951"></span><span>  </span><span class="hs-comment">-- Type -&gt; Type to Scaled Type -&gt; Scaled Type, ignoring</span><span>
</span><span id="line-1952"></span><span>  </span><span class="hs-comment">-- multiplicities and causing bugs&quot;.  So we don't.</span><span>
</span><span id="line-1953"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-1954"></span><span>  </span><span class="hs-comment">-- Being strict in a is worse for performance, so we are only strict on the</span><span>
</span><span id="line-1955"></span><span>  </span><span class="hs-comment">-- Mult part of scaled.</span><span>
</span><span id="line-1956"></span><span>
</span><span id="line-1957"></span><span>
</span><span id="line-1958"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681599935"><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681599935"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681599935"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1959"></span><span>   </span><span id="local-6989586621681601481"><span class="annot"><span class="annottext">ppr :: Scaled a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span id="local-6989586621681601482"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601482"><span class="hs-identifier hs-var">_cnt</span></a></span></span><span> </span><span id="local-6989586621681601483"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681601483"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; SDoc
forall a. Outputable a =&gt; a -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681601483"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1960"></span><span>     </span><span class="hs-comment">-- Do not print the multiplicity here because it tends to be too verbose</span><span>
</span><span id="line-1961"></span><span>
</span><span id="line-1962"></span><span id="local-6989586621681599936"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#scaledMult"><span class="hs-identifier hs-type">scaledMult</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681599936"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-type">Mult</span></a></span></span><span>
</span><span id="line-1963"></span><span id="scaledMult"><span class="annot"><span class="annottext">scaledMult :: forall a. Scaled a -&gt; Kind
</span><a href="GHC.Core.TyCo.Rep.html#scaledMult"><span class="hs-identifier hs-var hs-var">scaledMult</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span id="local-6989586621681601484"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601484"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601484"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-1964"></span><span>
</span><span id="line-1965"></span><span id="local-6989586621681599938"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#scaledThing"><span class="hs-identifier hs-type">scaledThing</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681599938"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681599938"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1966"></span><span id="scaledThing"><span class="annot"><span class="annottext">scaledThing :: forall a. Scaled a -&gt; a
</span><a href="GHC.Core.TyCo.Rep.html#scaledThing"><span class="hs-identifier hs-var hs-var">scaledThing</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681601485"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681601485"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681601485"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1967"></span><span>
</span><span id="line-1968"></span><span class="annot"><span class="hs-comment">-- | Apply a function to both the Mult and the Type in a 'Scaled Type'</span></span><span>
</span><span id="line-1969"></span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#mapScaledType"><span class="hs-identifier hs-type">mapScaledType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-1970"></span><span id="mapScaledType"><span class="annot"><span class="annottext">mapScaledType :: (Kind -&gt; Kind) -&gt; Scaled Kind -&gt; Scaled Kind
</span><a href="GHC.Core.TyCo.Rep.html#mapScaledType"><span class="hs-identifier hs-var hs-var">mapScaledType</span></a></span></span><span> </span><span id="local-6989586621681601486"><span class="annot"><span class="annottext">Kind -&gt; Kind
</span><a href="#local-6989586621681601486"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-type">Scaled</span></a></span><span> </span><span id="local-6989586621681601487"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601487"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621681601488"><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601488"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Kind -&gt; Kind -&gt; Scaled Kind
forall a. Kind -&gt; a -&gt; Scaled a
</span><a href="GHC.Core.TyCo.Rep.html#Scaled"><span class="hs-identifier hs-var">Scaled</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind -&gt; Kind
</span><a href="#local-6989586621681601486"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601487"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Kind -&gt; Kind
</span><a href="#local-6989586621681601486"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Kind
</span><a href="#local-6989586621681601488"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1971"></span><span>
</span><span id="line-1972"></span><span class="annot"><span class="hs-comment">{- |
Mult is a type alias for Type.

Mult must contain Type because multiplicity variables are mere type variables
(of kind Multiplicity) in Haskell. So the simplest implementation is to make
Mult be Type.

Multiplicities can be formed with:
- One: GHC.Types.One (= oneDataCon)
- Many: GHC.Types.Many (= manyDataCon)
- Multiplication: GHC.Types.MultMul (= multMulTyCon)

So that Mult feels a bit more structured, we provide pattern synonyms and smart
constructors for these.
-}</span></span><span>
</span><span id="line-1987"></span><span class="hs-keyword">type</span><span> </span><span id="Mult"><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Mult"><span class="hs-identifier hs-var">Mult</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-1988"></span></pre></body></html>