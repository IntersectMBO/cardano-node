<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span id="local-6989586621681573611"><span id="local-6989586621681573612"><span id="local-6989586621681573613"><span id="local-6989586621681573614"><span id="local-6989586621681573615"><span id="local-6989586621681573616"><span id="local-6989586621681573617"><span id="local-6989586621681573618"><span id="local-6989586621681573619"><span id="local-6989586621681573620"><span id="local-6989586621681573621"><span id="local-6989586621681573622"><span id="local-6989586621681573623"><span id="local-6989586621681573624"><span id="local-6989586621681573625"></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DeriveDataTypeable #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE StandaloneDeriving #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-7"></span><span>
</span><span id="line-8"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">GHC.Types.Tickish</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-9"></span><span>  </span><span class="annot"><a href="GHC.Types.Tickish.html#GenTickish"><span class="hs-identifier">GenTickish</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>  </span><span class="annot"><a href="GHC.Types.Tickish.html#CoreTickish"><span class="hs-identifier">CoreTickish</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#StgTickish"><span class="hs-identifier">StgTickish</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#CmmTickish"><span class="hs-identifier">CmmTickish</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>  </span><span class="annot"><a href="GHC.Types.Tickish.html#XTickishId"><span class="hs-identifier">XTickishId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>  </span><span class="annot"><a href="GHC.Types.Tickish.html#tickishCounts"><span class="hs-identifier">tickishCounts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>  </span><span class="annot"><a href="GHC.Types.Tickish.html#TickishScoping"><span class="hs-identifier">TickishScoping</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>  </span><span class="annot"><a href="GHC.Types.Tickish.html#tickishScoped"><span class="hs-identifier">tickishScoped</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>  </span><span class="annot"><a href="GHC.Types.Tickish.html#tickishScopesLike"><span class="hs-identifier">tickishScopesLike</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>  </span><span class="annot"><a href="GHC.Types.Tickish.html#tickishFloatable"><span class="hs-identifier">tickishFloatable</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>  </span><span class="annot"><a href="GHC.Types.Tickish.html#tickishCanSplit"><span class="hs-identifier">tickishCanSplit</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>  </span><span class="annot"><a href="GHC.Types.Tickish.html#mkNoCount"><span class="hs-identifier">mkNoCount</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>  </span><span class="annot"><a href="GHC.Types.Tickish.html#mkNoScope"><span class="hs-identifier">mkNoScope</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>  </span><span class="annot"><a href="GHC.Types.Tickish.html#tickishIsCode"><span class="hs-identifier">tickishIsCode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>  </span><span class="annot"><a href="GHC.Types.Tickish.html#isProfTick"><span class="hs-identifier">isProfTick</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>  </span><span class="annot"><a href="GHC.Types.Tickish.html#TickishPlacement"><span class="hs-identifier">TickishPlacement</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>  </span><span class="annot"><a href="GHC.Types.Tickish.html#tickishPlace"><span class="hs-identifier">tickishPlace</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>  </span><span class="annot"><a href="GHC.Types.Tickish.html#tickishContains"><span class="hs-identifier">tickishContains</span></a></span><span>
</span><span id="line-25"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Core.Type.html"><span class="hs-identifier">GHC.Core.Type</span></a></span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Unit.Module.html"><span class="hs-identifier">GHC.Unit.Module</span></a></span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.CostCentre.html"><span class="hs-identifier">GHC.Types.CostCentre</span></a></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html"><span class="hs-identifier">GHC.Types.SrcLoc</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#RealSrcSpan"><span class="hs-identifier">RealSrcSpan</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#containsSpan"><span class="hs-identifier">containsSpan</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.Var.html"><span class="hs-identifier">GHC.Types.Var</span></a></span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html"><span class="hs-identifier">Language.Haskell.Syntax.Extension</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#NoExtField"><span class="hs-identifier">NoExtField</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/Data.Data.html#/Data.Data.html"><span class="hs-identifier">Data.Data</span></a></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html"><span class="hs-identifier">GHC.Utils.Outputable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier">Outputable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier">text</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span>
</span><span id="line-44"></span><span class="annot"><span class="hs-comment">{- *********************************************************************
*                                                                      *
              Ticks
*                                                                      *
************************************************************************
-}</span></span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span class="annot"><span class="hs-comment">-- | Allows attaching extra information to points in expressions</span></span><span>
</span><span id="line-52"></span><span>
</span><span id="line-53"></span><span class="annot"><span class="hs-comment">{- | Used as a data type index for the GenTickish annotations.
     See Note [Tickish passes]
 -}</span></span><span>
</span><span id="line-56"></span><span class="hs-keyword">data</span><span> </span><span id="TickishPass"><span class="annot"><a href="GHC.Types.Tickish.html#TickishPass"><span class="hs-identifier hs-var">TickishPass</span></a></span></span><span>
</span><span id="line-57"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="TickishPassCore"><span class="annot"><a href="GHC.Types.Tickish.html#TickishPassCore"><span class="hs-identifier hs-var">TickishPassCore</span></a></span></span><span>
</span><span id="line-58"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="TickishPassStg"><span class="annot"><a href="GHC.Types.Tickish.html#TickishPassStg"><span class="hs-identifier hs-var">TickishPassStg</span></a></span></span><span>
</span><span id="line-59"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="TickishPassCmm"><span class="annot"><a href="GHC.Types.Tickish.html#TickishPassCmm"><span class="hs-identifier hs-var">TickishPassCmm</span></a></span></span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span class="hs-comment">{-
   Note [Tickish passes]
   ~~~~~~~~~~~~~~~~~~~~~
   Tickish annotations store different information depending on
   where they are used. Here's a summary of the differences
   between the passes.

   - CoreTickish: Haskell and Core
         The tickish annotations store the free variables of
         breakpoints.

   - StgTickish: Stg
         The GHCi bytecode generator (GHC.StgToByteCode) needs
         to know the type of each breakpoint in addition to its
         free variables. Since we cannot compute the type from
         an STG expression, the tickish annotations store the
         type of breakpoints in addition to the free variables.

   - CmmTickish: Cmm
         Breakpoints are unsupported and no free variables or
         type are stored.
 -}</span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="XBreakpoint"><span class="annot"><a href="GHC.Types.Tickish.html#XBreakpoint"><span class="hs-identifier hs-var">XBreakpoint</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681573643"><span class="annot"><a href="#local-6989586621681573643"><span class="hs-identifier hs-type">pass</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#TickishPass"><span class="hs-identifier hs-type">TickishPass</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="XBreakpoint"><span class="annot"><a href="GHC.Types.Tickish.html#XBreakpoint"><span class="hs-identifier hs-var">XBreakpoint</span></a></span></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="GHC.Types.Tickish.html#TickishPassCore"><span class="hs-identifier hs-type">TickishPassCore</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#NoExtField"><span class="hs-identifier hs-type">NoExtField</span></a></span><span>
</span><span id="line-86"></span><span class="annot"><span class="hs-comment">-- | Keep track of the type of breakpoints in STG, for GHCi</span></span><span>
</span><span id="line-87"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="XBreakpoint"><span class="annot"><a href="GHC.Types.Tickish.html#XBreakpoint"><span class="hs-identifier hs-var">XBreakpoint</span></a></span></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="GHC.Types.Tickish.html#TickishPassStg"><span class="hs-identifier hs-type">TickishPassStg</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Core.TyCo.Rep.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>
</span><span id="line-88"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="XBreakpoint"><span class="annot"><a href="GHC.Types.Tickish.html#XBreakpoint"><span class="hs-identifier hs-var">XBreakpoint</span></a></span></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="GHC.Types.Tickish.html#TickishPassCmm"><span class="hs-identifier hs-type">TickishPassCmm</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#NoExtField"><span class="hs-identifier hs-type">NoExtField</span></a></span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="XTickishId"><span class="annot"><a href="GHC.Types.Tickish.html#XTickishId"><span class="hs-identifier hs-var">XTickishId</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681573644"><span class="annot"><a href="#local-6989586621681573644"><span class="hs-identifier hs-type">pass</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#TickishPass"><span class="hs-identifier hs-type">TickishPass</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="XTickishId"><span class="annot"><a href="GHC.Types.Tickish.html#XTickishId"><span class="hs-identifier hs-var">XTickishId</span></a></span></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="GHC.Types.Tickish.html#TickishPassCore"><span class="hs-identifier hs-type">TickishPassCore</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-92"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="XTickishId"><span class="annot"><a href="GHC.Types.Tickish.html#XTickishId"><span class="hs-identifier hs-var">XTickishId</span></a></span></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="GHC.Types.Tickish.html#TickishPassStg"><span class="hs-identifier hs-type">TickishPassStg</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Var.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span>
</span><span id="line-93"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">instance</span><span> </span><span id="XTickishId"><span class="annot"><a href="GHC.Types.Tickish.html#XTickishId"><span class="hs-identifier hs-var">XTickishId</span></a></span></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="GHC.Types.Tickish.html#TickishPassCmm"><span class="hs-identifier hs-type">TickishPassCmm</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Extension.html#NoExtField"><span class="hs-identifier hs-type">NoExtField</span></a></span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span class="hs-keyword">type</span><span> </span><span id="CoreTickish"><span class="annot"><a href="GHC.Types.Tickish.html#CoreTickish"><span class="hs-identifier hs-var">CoreTickish</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#GenTickish"><span class="hs-identifier hs-type">GenTickish</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="GHC.Types.Tickish.html#TickishPassCore"><span class="hs-identifier hs-type">TickishPassCore</span></a></span><span>
</span><span id="line-96"></span><span class="hs-keyword">type</span><span> </span><span id="StgTickish"><span class="annot"><a href="GHC.Types.Tickish.html#StgTickish"><span class="hs-identifier hs-var">StgTickish</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#GenTickish"><span class="hs-identifier hs-type">GenTickish</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="GHC.Types.Tickish.html#TickishPassStg"><span class="hs-identifier hs-type">TickishPassStg</span></a></span><span>
</span><span id="line-97"></span><span class="annot"><span class="hs-comment">-- | Tickish in Cmm context (annotations only)</span></span><span>
</span><span id="line-98"></span><span class="hs-keyword">type</span><span> </span><span id="CmmTickish"><span class="annot"><a href="GHC.Types.Tickish.html#CmmTickish"><span class="hs-identifier hs-var">CmmTickish</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#GenTickish"><span class="hs-identifier hs-type">GenTickish</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="GHC.Types.Tickish.html#TickishPassCmm"><span class="hs-identifier hs-type">TickishPassCmm</span></a></span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span class="hs-comment">-- If you edit this type, you may need to update the GHC formalism</span><span>
</span><span id="line-101"></span><span class="hs-comment">-- See Note [GHC Formalism] in GHC.Core.Lint</span><span>
</span><span id="line-102"></span><span class="hs-keyword">data</span><span> </span><span id="GenTickish"><span class="annot"><a href="GHC.Types.Tickish.html#GenTickish"><span class="hs-identifier hs-var">GenTickish</span></a></span></span><span> </span><span id="local-6989586621681573432"><span class="annot"><a href="#local-6989586621681573432"><span class="hs-identifier hs-type">pass</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-103"></span><span>    </span><span class="hs-comment">-- | An @{-# SCC #-}@ profiling annotation, either automatically</span><span>
</span><span id="line-104"></span><span>    </span><span class="hs-comment">-- added by the desugarer as a result of -auto-all, or added by</span><span>
</span><span id="line-105"></span><span>    </span><span class="hs-comment">-- the user.</span><span>
</span><span id="line-106"></span><span>    </span><span id="ProfNote"><span class="annot"><a href="GHC.Types.Tickish.html#ProfNote"><span class="hs-identifier hs-var">ProfNote</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-107"></span><span>      </span><span id="profNoteCC"><span class="annot"><span class="annottext">forall (pass :: TickishPass). GenTickish pass -&gt; CostCentre
</span><a href="GHC.Types.Tickish.html#profNoteCC"><span class="hs-identifier hs-var hs-var">profNoteCC</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.CostCentre.html#CostCentre"><span class="hs-identifier hs-type">CostCentre</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-comment">-- ^ the cost centre</span></span><span>
</span><span id="line-108"></span><span>      </span><span id="profNoteCount"><span class="annot"><span class="annottext">forall (pass :: TickishPass). GenTickish pass -&gt; Bool
</span><a href="GHC.Types.Tickish.html#profNoteCount"><span class="hs-identifier hs-var hs-var">profNoteCount</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>      </span><span class="annot"><span class="hs-comment">-- ^ bump the entry count?</span></span><span>
</span><span id="line-109"></span><span>      </span><span id="profNoteScope"><span class="annot"><span class="annottext">forall (pass :: TickishPass). GenTickish pass -&gt; Bool
</span><a href="GHC.Types.Tickish.html#profNoteScope"><span class="hs-identifier hs-var hs-var">profNoteScope</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>       </span><span class="hs-comment">-- ^ scopes over the enclosed expression</span><span>
</span><span id="line-110"></span><span>                                   </span><span class="hs-comment">-- (i.e. not just a tick)</span><span>
</span><span id="line-111"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span>  </span><span class="hs-comment">-- | A &quot;tick&quot; used by HPC to track the execution of each</span><span>
</span><span id="line-114"></span><span>  </span><span class="hs-comment">-- subexpression in the original source code.</span><span>
</span><span id="line-115"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="HpcTick"><span class="annot"><a href="GHC.Types.Tickish.html#HpcTick"><span class="hs-identifier hs-var">HpcTick</span></a></span></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-116"></span><span>      </span><span id="tickModule"><span class="annot"><span class="annottext">forall (pass :: TickishPass). GenTickish pass -&gt; Module
</span><a href="GHC.Types.Tickish.html#tickModule"><span class="hs-identifier hs-var hs-var">tickModule</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Unit.Types.html#Module"><span class="hs-identifier hs-type">Module</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-117"></span><span>      </span><span id="tickId"><span class="annot"><span class="annottext">forall (pass :: TickishPass). GenTickish pass -&gt; Int
</span><a href="GHC.Types.Tickish.html#tickId"><span class="hs-identifier hs-var hs-var">tickId</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-118"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-119"></span><span>
</span><span id="line-120"></span><span>  </span><span class="hs-comment">-- | A breakpoint for the GHCi debugger.  This behaves like an HPC</span><span>
</span><span id="line-121"></span><span>  </span><span class="hs-comment">-- tick, but has a list of free variables which will be available</span><span>
</span><span id="line-122"></span><span>  </span><span class="hs-comment">-- for inspection in GHCi when the program stops at the breakpoint.</span><span>
</span><span id="line-123"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-124"></span><span>  </span><span class="hs-comment">-- NB. we must take account of these Ids when (a) counting free variables,</span><span>
</span><span id="line-125"></span><span>  </span><span class="hs-comment">-- and (b) substituting (don't substitute for them)</span><span>
</span><span id="line-126"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Breakpoint"><span class="annot"><a href="GHC.Types.Tickish.html#Breakpoint"><span class="hs-identifier hs-var">Breakpoint</span></a></span></span><span>
</span><span id="line-127"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="breakpointExt"><span class="annot"><span class="annottext">forall (pass :: TickishPass). GenTickish pass -&gt; XBreakpoint pass
</span><a href="GHC.Types.Tickish.html#breakpointExt"><span class="hs-identifier hs-var hs-var">breakpointExt</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#XBreakpoint"><span class="hs-identifier hs-type">XBreakpoint</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681573432"><span class="hs-identifier hs-type">pass</span></a></span><span>
</span><span id="line-128"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="breakpointId"><span class="annot"><span class="annottext">forall (pass :: TickishPass). GenTickish pass -&gt; Int
</span><a href="GHC.Types.Tickish.html#breakpointId"><span class="hs-identifier hs-var hs-var">breakpointId</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-129"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="breakpointFVs"><span class="annot"><span class="annottext">forall (pass :: TickishPass). GenTickish pass -&gt; [XTickishId pass]
</span><a href="GHC.Types.Tickish.html#breakpointFVs"><span class="hs-identifier hs-var hs-var">breakpointFVs</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.Tickish.html#XTickishId"><span class="hs-identifier hs-type">XTickishId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681573432"><span class="hs-identifier hs-type">pass</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-130"></span><span>                                </span><span class="hs-comment">-- ^ the order of this list is important:</span><span>
</span><span id="line-131"></span><span>                                </span><span class="hs-comment">-- it matches the order of the lists in the</span><span>
</span><span id="line-132"></span><span>                                </span><span class="hs-comment">-- appropriate entry in 'GHC.ByteCode.Types.ModBreaks'.</span><span>
</span><span id="line-133"></span><span>                                </span><span class="hs-comment">--</span><span>
</span><span id="line-134"></span><span>                                </span><span class="hs-comment">-- Careful about substitution!  See</span><span>
</span><span id="line-135"></span><span>                                </span><span class="hs-comment">-- Note [substTickish] in &quot;GHC.Core.Subst&quot;.</span><span>
</span><span id="line-136"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-137"></span><span>
</span><span id="line-138"></span><span>  </span><span class="hs-comment">-- | A source note.</span><span>
</span><span id="line-139"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-140"></span><span>  </span><span class="hs-comment">-- Source notes are pure annotations: Their presence should neither</span><span>
</span><span id="line-141"></span><span>  </span><span class="hs-comment">-- influence compilation nor execution. The semantics are given by</span><span>
</span><span id="line-142"></span><span>  </span><span class="hs-comment">-- causality: The presence of a source note means that a local</span><span>
</span><span id="line-143"></span><span>  </span><span class="hs-comment">-- change in the referenced source code span will possibly provoke</span><span>
</span><span id="line-144"></span><span>  </span><span class="hs-comment">-- the generated code to change. On the flip-side, the functionality</span><span>
</span><span id="line-145"></span><span>  </span><span class="hs-comment">-- of annotated code *must* be invariant against changes to all</span><span>
</span><span id="line-146"></span><span>  </span><span class="hs-comment">-- source code *except* the spans referenced in the source notes</span><span>
</span><span id="line-147"></span><span>  </span><span class="hs-comment">-- (see &quot;Causality of optimized Haskell&quot; paper for details).</span><span>
</span><span id="line-148"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-149"></span><span>  </span><span class="hs-comment">-- Therefore extending the scope of any given source note is always</span><span>
</span><span id="line-150"></span><span>  </span><span class="hs-comment">-- valid. Note that it is still undesirable though, as this reduces</span><span>
</span><span id="line-151"></span><span>  </span><span class="hs-comment">-- their usefulness for debugging and profiling. Therefore we will</span><span>
</span><span id="line-152"></span><span>  </span><span class="hs-comment">-- generally try only to make use of this property where it is</span><span>
</span><span id="line-153"></span><span>  </span><span class="hs-comment">-- necessary to enable optimizations.</span><span>
</span><span id="line-154"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="SourceNote"><span class="annot"><a href="GHC.Types.Tickish.html#SourceNote"><span class="hs-identifier hs-var">SourceNote</span></a></span></span><span>
</span><span id="line-155"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="sourceSpan"><span class="annot"><span class="annottext">forall (pass :: TickishPass). GenTickish pass -&gt; RealSrcSpan
</span><a href="GHC.Types.Tickish.html#sourceSpan"><span class="hs-identifier hs-var hs-var">sourceSpan</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#RealSrcSpan"><span class="hs-identifier hs-type">RealSrcSpan</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ Source covered</span></span><span>
</span><span id="line-156"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="sourceName"><span class="annot"><span class="annottext">forall (pass :: TickishPass). GenTickish pass -&gt; String
</span><a href="GHC.Types.Tickish.html#sourceName"><span class="hs-identifier hs-var hs-var">sourceName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/GHC.Base.html#String/GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>      </span><span class="hs-comment">-- ^ Name for source location</span><span>
</span><span id="line-157"></span><span>                                </span><span class="hs-comment">--   (uses same names as CCs)</span><span>
</span><span id="line-158"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-159"></span><span>
</span><span id="line-160"></span><span id="local-6989586621681573660"><span id="local-6989586621681573682"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Tickish.html#GenTickish"><span class="hs-identifier hs-type">GenTickish</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="GHC.Types.Tickish.html#TickishPassCore"><span class="hs-identifier hs-type">TickishPassCore</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-161"></span><span id="local-6989586621681573694"><span id="local-6989586621681573716"><span id="local-6989586621681573720"><span id="local-6989586621681573723"><span id="local-6989586621681573726"><span id="local-6989586621681573729"><span id="local-6989586621681573732"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Tickish.html#GenTickish"><span class="hs-identifier hs-type">GenTickish</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="GHC.Types.Tickish.html#TickishPassCore"><span class="hs-identifier hs-type">TickishPassCore</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span><span>
</span><span id="line-162"></span><span id="local-6989586621681573743"><span id="local-6989586621681573765"><span id="local-6989586621681573780"><span id="local-6989586621681573782"><span id="local-6989586621681573784"><span id="local-6989586621681573790"><span id="local-6989586621681573795"><span id="local-6989586621681573798"><span id="local-6989586621681573801"><span id="local-6989586621681573804"><span id="local-6989586621681573807"><span id="local-6989586621681573810"><span id="local-6989586621681573815"><span id="local-6989586621681573820"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/Data.Data.html#Data/Data.Data.html#Data"><span class="hs-identifier hs-type">Data</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Tickish.html#GenTickish"><span class="hs-identifier hs-type">GenTickish</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="GHC.Types.Tickish.html#TickishPassCore"><span class="hs-identifier hs-type">TickishPassCore</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span id="local-6989586621681573833"><span id="local-6989586621681573849"><span id="local-6989586621681573864"><span id="local-6989586621681573866"><span id="local-6989586621681573868"><span id="local-6989586621681573874"><span id="local-6989586621681573879"><span id="local-6989586621681573882"><span id="local-6989586621681573885"><span id="local-6989586621681573888"><span id="local-6989586621681573891"><span id="local-6989586621681573894"><span id="local-6989586621681573899"><span id="local-6989586621681573904"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/Data.Data.html#Data/Data.Data.html#Data"><span class="hs-identifier hs-type">Data</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Tickish.html#GenTickish"><span class="hs-identifier hs-type">GenTickish</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="GHC.Types.Tickish.html#TickishPassStg"><span class="hs-identifier hs-type">TickishPassStg</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-165"></span><span>
</span><span id="line-166"></span><span id="local-6989586621681573909"><span id="local-6989586621681573923"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Tickish.html#GenTickish"><span class="hs-identifier hs-type">GenTickish</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="GHC.Types.Tickish.html#TickishPassCmm"><span class="hs-identifier hs-type">TickishPassCmm</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-167"></span><span id="local-6989586621681573930"><span id="local-6989586621681573944"><span id="local-6989586621681573948"><span id="local-6989586621681573951"><span id="local-6989586621681573954"><span id="local-6989586621681573957"><span id="local-6989586621681573960"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Tickish.html#GenTickish"><span class="hs-identifier hs-type">GenTickish</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="GHC.Types.Tickish.html#TickishPassCmm"><span class="hs-identifier hs-type">TickishPassCmm</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span><span>
</span><span id="line-168"></span><span id="local-6989586621681573967"><span id="local-6989586621681573982"><span id="local-6989586621681573997"><span id="local-6989586621681573999"><span id="local-6989586621681574001"><span id="local-6989586621681574007"><span id="local-6989586621681574012"><span id="local-6989586621681574015"><span id="local-6989586621681574018"><span id="local-6989586621681574021"><span id="local-6989586621681574024"><span id="local-6989586621681574027"><span id="local-6989586621681574032"><span id="local-6989586621681574037"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../../base-4.18.2.1/src/Data.Data.html#Data/Data.Data.html#Data"><span class="hs-identifier hs-type">Data</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Tickish.html#GenTickish"><span class="hs-identifier hs-type">GenTickish</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="GHC.Types.Tickish.html#TickishPassCmm"><span class="hs-identifier hs-type">TickishPassCmm</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span>
</span><span id="line-171"></span><span class="hs-comment">-- | A &quot;counting tick&quot; (where tickishCounts is True) is one that</span><span>
</span><span id="line-172"></span><span class="hs-comment">-- counts evaluations in some way.  We cannot discard a counting tick,</span><span>
</span><span id="line-173"></span><span class="hs-comment">-- and the compiler should preserve the number of counting ticks as</span><span>
</span><span id="line-174"></span><span class="hs-comment">-- far as possible.</span><span>
</span><span id="line-175"></span><span class="hs-comment">--</span><span>
</span><span id="line-176"></span><span class="hs-comment">-- However, we still allow the simplifier to increase or decrease</span><span>
</span><span id="line-177"></span><span class="hs-comment">-- sharing, so in practice the actual number of ticks may vary, except</span><span>
</span><span id="line-178"></span><span class="hs-comment">-- that we never change the value from zero to non-zero or vice versa.</span><span>
</span><span id="line-179"></span><span id="local-6989586621681574041"><span class="annot"><a href="GHC.Types.Tickish.html#tickishCounts"><span class="hs-identifier hs-type">tickishCounts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#GenTickish"><span class="hs-identifier hs-type">GenTickish</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681574041"><span class="hs-identifier hs-type">pass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-180"></span><span id="tickishCounts"><span class="annot"><span class="annottext">tickishCounts :: forall (pass :: TickishPass). GenTickish pass -&gt; Bool
</span><a href="GHC.Types.Tickish.html#tickishCounts"><span class="hs-identifier hs-var hs-var">tickishCounts</span></a></span></span><span> </span><span id="local-6989586621681574042"><span class="annot"><span class="annottext">n :: GenTickish pass
</span><a href="#local-6989586621681574042"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Types.Tickish.html#ProfNote"><span class="hs-identifier hs-type">ProfNote</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenTickish pass -&gt; Bool
forall (pass :: TickishPass). GenTickish pass -&gt; Bool
</span><a href="GHC.Types.Tickish.html#profNoteCount"><span class="hs-identifier hs-var">profNoteCount</span></a></span><span> </span><span class="annot"><span class="annottext">GenTickish pass
</span><a href="#local-6989586621681574042"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-181"></span><span class="annot"><a href="GHC.Types.Tickish.html#tickishCounts"><span class="hs-identifier hs-var">tickishCounts</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#HpcTick"><span class="hs-identifier hs-type">HpcTick</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-182"></span><span class="annot"><a href="GHC.Types.Tickish.html#tickishCounts"><span class="hs-identifier hs-var">tickishCounts</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#Breakpoint"><span class="hs-identifier hs-type">Breakpoint</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-183"></span><span class="annot"><a href="GHC.Types.Tickish.html#tickishCounts"><span class="hs-identifier hs-var">tickishCounts</span></a></span><span> </span><span class="annot"><span class="annottext">GenTickish pass
</span><span class="hs-identifier">_</span></span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span>
</span><span id="line-186"></span><span class="hs-comment">-- | Specifies the scoping behaviour of ticks. This governs the</span><span>
</span><span id="line-187"></span><span class="hs-comment">-- behaviour of ticks that care about the covered code and the cost</span><span>
</span><span id="line-188"></span><span class="hs-comment">-- associated with it. Important for ticks relating to profiling.</span><span>
</span><span id="line-189"></span><span class="hs-keyword">data</span><span> </span><span id="TickishScoping"><span class="annot"><a href="GHC.Types.Tickish.html#TickishScoping"><span class="hs-identifier hs-var">TickishScoping</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-190"></span><span>    </span><span class="hs-comment">-- | No scoping: The tick does not care about what code it</span><span>
</span><span id="line-191"></span><span>    </span><span class="hs-comment">-- covers. Transformations can freely move code inside as well as</span><span>
</span><span id="line-192"></span><span>    </span><span class="hs-comment">-- outside without any additional annotation obligations</span><span>
</span><span id="line-193"></span><span>    </span><span id="NoScope"><span class="annot"><a href="GHC.Types.Tickish.html#NoScope"><span class="hs-identifier hs-var">NoScope</span></a></span></span><span>
</span><span id="line-194"></span><span>
</span><span id="line-195"></span><span>    </span><span class="hs-comment">-- | Soft scoping: We want all code that is covered to stay</span><span>
</span><span id="line-196"></span><span>    </span><span class="hs-comment">-- covered.  Note that this scope type does not forbid</span><span>
</span><span id="line-197"></span><span>    </span><span class="hs-comment">-- transformations from happening, as long as all results of</span><span>
</span><span id="line-198"></span><span>    </span><span class="hs-comment">-- the transformations are still covered by this tick or a copy of</span><span>
</span><span id="line-199"></span><span>    </span><span class="hs-comment">-- it. For example</span><span>
</span><span id="line-200"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-201"></span><span>    </span><span class="hs-comment">--   let x = tick&lt;...&gt; (let y = foo in bar) in baz</span><span>
</span><span id="line-202"></span><span>    </span><span class="hs-comment">--     ===&gt;</span><span>
</span><span id="line-203"></span><span>    </span><span class="hs-comment">--   let x = tick&lt;...&gt; bar; y = tick&lt;...&gt; foo in baz</span><span>
</span><span id="line-204"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-205"></span><span>    </span><span class="hs-comment">-- Is a valid transformation as far as &quot;bar&quot; and &quot;foo&quot; is</span><span>
</span><span id="line-206"></span><span>    </span><span class="hs-comment">-- concerned, because both still are scoped over by the tick.</span><span>
</span><span id="line-207"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-208"></span><span>    </span><span class="hs-comment">-- Note though that one might object to the &quot;let&quot; not being</span><span>
</span><span id="line-209"></span><span>    </span><span class="hs-comment">-- covered by the tick any more. However, we are generally lax</span><span>
</span><span id="line-210"></span><span>    </span><span class="hs-comment">-- with this - constant costs don't matter too much, and given</span><span>
</span><span id="line-211"></span><span>    </span><span class="hs-comment">-- that the &quot;let&quot; was effectively merged we can view it as having</span><span>
</span><span id="line-212"></span><span>    </span><span class="hs-comment">-- lost its identity anyway.</span><span>
</span><span id="line-213"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-214"></span><span>    </span><span class="hs-comment">-- Also note that this scoping behaviour allows floating a tick</span><span>
</span><span id="line-215"></span><span>    </span><span class="hs-comment">-- &quot;upwards&quot; in pretty much any situation. For example:</span><span>
</span><span id="line-216"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-217"></span><span>    </span><span class="hs-comment">--   case foo of x -&gt; tick&lt;...&gt; bar</span><span>
</span><span id="line-218"></span><span>    </span><span class="hs-comment">--     ==&gt;</span><span>
</span><span id="line-219"></span><span>    </span><span class="hs-comment">--   tick&lt;...&gt; case foo of x -&gt; bar</span><span>
</span><span id="line-220"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-221"></span><span>    </span><span class="hs-comment">-- While this is always legal, we want to make a best effort to</span><span>
</span><span id="line-222"></span><span>    </span><span class="hs-comment">-- only make us of this where it exposes transformation</span><span>
</span><span id="line-223"></span><span>    </span><span class="hs-comment">-- opportunities.</span><span>
</span><span id="line-224"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="SoftScope"><span class="annot"><a href="GHC.Types.Tickish.html#SoftScope"><span class="hs-identifier hs-var">SoftScope</span></a></span></span><span>
</span><span id="line-225"></span><span>
</span><span id="line-226"></span><span>    </span><span class="hs-comment">-- | Cost centre scoping: We don't want any costs to move to other</span><span>
</span><span id="line-227"></span><span>    </span><span class="hs-comment">-- cost-centre stacks. This means we not only want no code or cost</span><span>
</span><span id="line-228"></span><span>    </span><span class="hs-comment">-- to get moved out of their cost centres, but we also object to</span><span>
</span><span id="line-229"></span><span>    </span><span class="hs-comment">-- code getting associated with new cost-centre ticks - or</span><span>
</span><span id="line-230"></span><span>    </span><span class="hs-comment">-- changing the order in which they get applied.</span><span>
</span><span id="line-231"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-232"></span><span>    </span><span class="hs-comment">-- A rule of thumb is that we don't want any code to gain new</span><span>
</span><span id="line-233"></span><span>    </span><span class="hs-comment">-- annotations. However, there are notable exceptions, for</span><span>
</span><span id="line-234"></span><span>    </span><span class="hs-comment">-- example:</span><span>
</span><span id="line-235"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-236"></span><span>    </span><span class="hs-comment">--   let f = \y -&gt; foo in tick&lt;...&gt; ... (f x) ...</span><span>
</span><span id="line-237"></span><span>    </span><span class="hs-comment">--     ==&gt;</span><span>
</span><span id="line-238"></span><span>    </span><span class="hs-comment">--   tick&lt;...&gt; ... foo[x/y] ...</span><span>
</span><span id="line-239"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-240"></span><span>    </span><span class="hs-comment">-- In-lining lambdas like this is always legal, because inlining a</span><span>
</span><span id="line-241"></span><span>    </span><span class="hs-comment">-- function does not change the cost-centre stack when the</span><span>
</span><span id="line-242"></span><span>    </span><span class="hs-comment">-- function is called.</span><span>
</span><span id="line-243"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="CostCentreScope"><span class="annot"><a href="GHC.Types.Tickish.html#CostCentreScope"><span class="hs-identifier hs-var">CostCentreScope</span></a></span></span><span>
</span><span id="line-244"></span><span>
</span><span id="line-245"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681574047"><span id="local-6989586621681574049"><span class="annot"><span class="annottext">TickishScoping -&gt; TickishScoping -&gt; Bool
(TickishScoping -&gt; TickishScoping -&gt; Bool)
-&gt; (TickishScoping -&gt; TickishScoping -&gt; Bool) -&gt; Eq TickishScoping
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: TickishScoping -&gt; TickishScoping -&gt; Bool
== :: TickishScoping -&gt; TickishScoping -&gt; Bool
$c/= :: TickishScoping -&gt; TickishScoping -&gt; Bool
/= :: TickishScoping -&gt; TickishScoping -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-246"></span><span>
</span><span id="line-247"></span><span class="annot"><span class="hs-comment">-- | Returns the intended scoping rule for a Tickish</span></span><span>
</span><span id="line-248"></span><span id="local-6989586621681573517"><span class="annot"><a href="GHC.Types.Tickish.html#tickishScoped"><span class="hs-identifier hs-type">tickishScoped</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#GenTickish"><span class="hs-identifier hs-type">GenTickish</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681573517"><span class="hs-identifier hs-type">pass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#TickishScoping"><span class="hs-identifier hs-type">TickishScoping</span></a></span></span><span>
</span><span id="line-249"></span><span id="tickishScoped"><span class="annot"><span class="annottext">tickishScoped :: forall (pass :: TickishPass). GenTickish pass -&gt; TickishScoping
</span><a href="GHC.Types.Tickish.html#tickishScoped"><span class="hs-identifier hs-var hs-var">tickishScoped</span></a></span></span><span> </span><span id="local-6989586621681574052"><span class="annot"><span class="annottext">n :: GenTickish pass
</span><a href="#local-6989586621681574052"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Types.Tickish.html#ProfNote"><span class="hs-identifier hs-type">ProfNote</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>
</span><span id="line-250"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">GenTickish pass -&gt; Bool
forall (pass :: TickishPass). GenTickish pass -&gt; Bool
</span><a href="GHC.Types.Tickish.html#profNoteScope"><span class="hs-identifier hs-var">profNoteScope</span></a></span><span> </span><span class="annot"><span class="annottext">GenTickish pass
</span><a href="#local-6989586621681574052"><span class="hs-identifier hs-var">n</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TickishScoping
</span><a href="GHC.Types.Tickish.html#CostCentreScope"><span class="hs-identifier hs-var">CostCentreScope</span></a></span><span>
</span><span id="line-251"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TickishScoping
</span><a href="GHC.Types.Tickish.html#NoScope"><span class="hs-identifier hs-var">NoScope</span></a></span><span>
</span><span id="line-252"></span><span class="annot"><a href="GHC.Types.Tickish.html#tickishScoped"><span class="hs-identifier hs-var">tickishScoped</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#HpcTick"><span class="hs-identifier hs-type">HpcTick</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TickishScoping
</span><a href="GHC.Types.Tickish.html#NoScope"><span class="hs-identifier hs-var">NoScope</span></a></span><span>
</span><span id="line-253"></span><span class="annot"><a href="GHC.Types.Tickish.html#tickishScoped"><span class="hs-identifier hs-var">tickishScoped</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#Breakpoint"><span class="hs-identifier hs-type">Breakpoint</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TickishScoping
</span><a href="GHC.Types.Tickish.html#CostCentreScope"><span class="hs-identifier hs-var">CostCentreScope</span></a></span><span>
</span><span id="line-254"></span><span>   </span><span class="hs-comment">-- Breakpoints are scoped: eventually we're going to do call</span><span>
</span><span id="line-255"></span><span>   </span><span class="hs-comment">-- stacks, but also this helps prevent the simplifier from moving</span><span>
</span><span id="line-256"></span><span>   </span><span class="hs-comment">-- breakpoints around and changing their result type (see #1531).</span><span>
</span><span id="line-257"></span><span class="annot"><a href="GHC.Types.Tickish.html#tickishScoped"><span class="hs-identifier hs-var">tickishScoped</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#SourceNote"><span class="hs-identifier hs-type">SourceNote</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TickishScoping
</span><a href="GHC.Types.Tickish.html#SoftScope"><span class="hs-identifier hs-var">SoftScope</span></a></span><span>
</span><span id="line-258"></span><span>
</span><span id="line-259"></span><span class="hs-comment">-- | Returns whether the tick scoping rule is at least as permissive</span><span>
</span><span id="line-260"></span><span class="hs-comment">-- as the given scoping rule.</span><span>
</span><span id="line-261"></span><span id="local-6989586621681573519"><span class="annot"><a href="GHC.Types.Tickish.html#tickishScopesLike"><span class="hs-identifier hs-type">tickishScopesLike</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#GenTickish"><span class="hs-identifier hs-type">GenTickish</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681573519"><span class="hs-identifier hs-type">pass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#TickishScoping"><span class="hs-identifier hs-type">TickishScoping</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-262"></span><span id="tickishScopesLike"><span class="annot"><span class="annottext">tickishScopesLike :: forall (pass :: TickishPass).
GenTickish pass -&gt; TickishScoping -&gt; Bool
</span><a href="GHC.Types.Tickish.html#tickishScopesLike"><span class="hs-identifier hs-var hs-var">tickishScopesLike</span></a></span></span><span> </span><span id="local-6989586621681574053"><span class="annot"><span class="annottext">GenTickish pass
</span><a href="#local-6989586621681574053"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621681574054"><span class="annot"><span class="annottext">TickishScoping
</span><a href="#local-6989586621681574054"><span class="hs-identifier hs-var">scope</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenTickish pass -&gt; TickishScoping
forall (pass :: TickishPass). GenTickish pass -&gt; TickishScoping
</span><a href="GHC.Types.Tickish.html#tickishScoped"><span class="hs-identifier hs-var">tickishScoped</span></a></span><span> </span><span class="annot"><span class="annottext">GenTickish pass
</span><a href="#local-6989586621681574053"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">TickishScoping -&gt; TickishScoping -&gt; Bool
</span><a href="#local-6989586621681574055"><span class="hs-operator hs-var">`like`</span></a></span><span> </span><span class="annot"><span class="annottext">TickishScoping
</span><a href="#local-6989586621681574054"><span class="hs-identifier hs-var">scope</span></a></span><span>
</span><span id="line-263"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span class="annot"><span class="annottext">TickishScoping
</span><a href="GHC.Types.Tickish.html#NoScope"><span class="hs-identifier hs-var">NoScope</span></a></span><span>         </span><span id="local-6989586621681574055"><span class="annot"><span class="annottext">like :: TickishScoping -&gt; TickishScoping -&gt; Bool
</span><a href="#local-6989586621681574055"><span class="hs-operator hs-var hs-var">`like`</span></a></span></span><span> </span><span class="annot"><span class="annottext">TickishScoping
</span><span class="hs-identifier">_</span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-264"></span><span>        </span><span class="annot"><span class="annottext">TickishScoping
</span><span class="hs-identifier">_</span></span><span>               </span><span class="annot"><a href="#local-6989586621681574055"><span class="hs-operator hs-var">`like`</span></a></span><span> </span><span class="annot"><span class="annottext">TickishScoping
</span><a href="GHC.Types.Tickish.html#NoScope"><span class="hs-identifier hs-var">NoScope</span></a></span><span>         </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-265"></span><span>        </span><span class="annot"><span class="annottext">TickishScoping
</span><a href="GHC.Types.Tickish.html#SoftScope"><span class="hs-identifier hs-var">SoftScope</span></a></span><span>       </span><span class="annot"><a href="#local-6989586621681574055"><span class="hs-operator hs-var">`like`</span></a></span><span> </span><span class="annot"><span class="annottext">TickishScoping
</span><span class="hs-identifier">_</span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-266"></span><span>        </span><span class="annot"><span class="annottext">TickishScoping
</span><span class="hs-identifier">_</span></span><span>               </span><span class="annot"><a href="#local-6989586621681574055"><span class="hs-operator hs-var">`like`</span></a></span><span> </span><span class="annot"><span class="annottext">TickishScoping
</span><a href="GHC.Types.Tickish.html#SoftScope"><span class="hs-identifier hs-var">SoftScope</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-267"></span><span>        </span><span class="annot"><span class="annottext">TickishScoping
</span><a href="GHC.Types.Tickish.html#CostCentreScope"><span class="hs-identifier hs-var">CostCentreScope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681574055"><span class="hs-operator hs-var">`like`</span></a></span><span> </span><span class="annot"><span class="annottext">TickishScoping
</span><span class="hs-identifier">_</span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-268"></span><span>
</span><span id="line-269"></span><span class="hs-comment">-- | Returns @True@ for ticks that can be floated upwards easily even</span><span>
</span><span id="line-270"></span><span class="hs-comment">-- where it might change execution counts, such as:</span><span>
</span><span id="line-271"></span><span class="hs-comment">--</span><span>
</span><span id="line-272"></span><span class="hs-comment">--   Just (tick&lt;...&gt; foo)</span><span>
</span><span id="line-273"></span><span class="hs-comment">--     ==&gt;</span><span>
</span><span id="line-274"></span><span class="hs-comment">--   tick&lt;...&gt; (Just foo)</span><span>
</span><span id="line-275"></span><span class="hs-comment">--</span><span>
</span><span id="line-276"></span><span class="hs-comment">-- This is a combination of @tickishSoftScope@ and</span><span>
</span><span id="line-277"></span><span class="hs-comment">-- @tickishCounts@. Note that in principle splittable ticks can become</span><span>
</span><span id="line-278"></span><span class="hs-comment">-- floatable using @mkNoTick@ -- even though there's currently no</span><span>
</span><span id="line-279"></span><span class="hs-comment">-- tickish for which that is the case.</span><span>
</span><span id="line-280"></span><span id="local-6989586621681574056"><span class="annot"><a href="GHC.Types.Tickish.html#tickishFloatable"><span class="hs-identifier hs-type">tickishFloatable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#GenTickish"><span class="hs-identifier hs-type">GenTickish</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681574056"><span class="hs-identifier hs-type">pass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-281"></span><span id="tickishFloatable"><span class="annot"><span class="annottext">tickishFloatable :: forall (pass :: TickishPass). GenTickish pass -&gt; Bool
</span><a href="GHC.Types.Tickish.html#tickishFloatable"><span class="hs-identifier hs-var hs-var">tickishFloatable</span></a></span></span><span> </span><span id="local-6989586621681574057"><span class="annot"><span class="annottext">GenTickish pass
</span><a href="#local-6989586621681574057"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenTickish pass
</span><a href="#local-6989586621681574057"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">GenTickish pass -&gt; TickishScoping -&gt; Bool
forall (pass :: TickishPass).
GenTickish pass -&gt; TickishScoping -&gt; Bool
</span><a href="GHC.Types.Tickish.html#tickishScopesLike"><span class="hs-operator hs-var">`tickishScopesLike`</span></a></span><span> </span><span class="annot"><span class="annottext">TickishScoping
</span><a href="GHC.Types.Tickish.html#SoftScope"><span class="hs-identifier hs-var">SoftScope</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenTickish pass -&gt; Bool
forall (pass :: TickishPass). GenTickish pass -&gt; Bool
</span><a href="GHC.Types.Tickish.html#tickishCounts"><span class="hs-identifier hs-var">tickishCounts</span></a></span><span> </span><span class="annot"><span class="annottext">GenTickish pass
</span><a href="#local-6989586621681574057"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-282"></span><span>
</span><span id="line-283"></span><span class="hs-comment">-- | Returns @True@ for a tick that is both counting /and/ scoping and</span><span>
</span><span id="line-284"></span><span class="hs-comment">-- can be split into its (tick, scope) parts using 'mkNoScope' and</span><span>
</span><span id="line-285"></span><span class="hs-comment">-- 'mkNoTick' respectively.</span><span>
</span><span id="line-286"></span><span id="local-6989586621681574060"><span class="annot"><a href="GHC.Types.Tickish.html#tickishCanSplit"><span class="hs-identifier hs-type">tickishCanSplit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#GenTickish"><span class="hs-identifier hs-type">GenTickish</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681574060"><span class="hs-identifier hs-type">pass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-287"></span><span id="tickishCanSplit"><span class="annot"><span class="annottext">tickishCanSplit :: forall (pass :: TickishPass). GenTickish pass -&gt; Bool
</span><a href="GHC.Types.Tickish.html#tickishCanSplit"><span class="hs-identifier hs-var hs-var">tickishCanSplit</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#ProfNote"><span class="hs-identifier hs-type">ProfNote</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">profNoteScope :: forall (pass :: TickishPass). GenTickish pass -&gt; Bool
</span><a href="GHC.Types.Tickish.html#profNoteScope"><span class="hs-identifier hs-var">profNoteScope</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">profNoteCount :: forall (pass :: TickishPass). GenTickish pass -&gt; Bool
</span><a href="GHC.Types.Tickish.html#profNoteCount"><span class="hs-identifier hs-var">profNoteCount</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">}</span><span>
</span><span id="line-288"></span><span>                   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-289"></span><span class="annot"><a href="GHC.Types.Tickish.html#tickishCanSplit"><span class="hs-identifier hs-var">tickishCanSplit</span></a></span><span> </span><span class="annot"><span class="annottext">GenTickish pass
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-290"></span><span>
</span><span id="line-291"></span><span id="local-6989586621681573523"><span class="annot"><a href="GHC.Types.Tickish.html#mkNoCount"><span class="hs-identifier hs-type">mkNoCount</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#GenTickish"><span class="hs-identifier hs-type">GenTickish</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681573523"><span class="hs-identifier hs-type">pass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#GenTickish"><span class="hs-identifier hs-type">GenTickish</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681573523"><span class="hs-identifier hs-type">pass</span></a></span></span><span>
</span><span id="line-292"></span><span id="mkNoCount"><span class="annot"><span class="annottext">mkNoCount :: forall (pass :: TickishPass). GenTickish pass -&gt; GenTickish pass
</span><a href="GHC.Types.Tickish.html#mkNoCount"><span class="hs-identifier hs-var hs-var">mkNoCount</span></a></span></span><span> </span><span id="local-6989586621681574065"><span class="annot"><span class="annottext">GenTickish pass
</span><a href="#local-6989586621681574065"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenTickish pass -&gt; Bool
forall (pass :: TickishPass). GenTickish pass -&gt; Bool
</span><a href="GHC.Types.Tickish.html#tickishCounts"><span class="hs-identifier hs-var">tickishCounts</span></a></span><span> </span><span class="annot"><span class="annottext">GenTickish pass
</span><a href="#local-6989586621681574065"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenTickish pass
</span><a href="#local-6989586621681574065"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-293"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenTickish pass -&gt; Bool
forall (pass :: TickishPass). GenTickish pass -&gt; Bool
</span><a href="GHC.Types.Tickish.html#tickishCanSplit"><span class="hs-identifier hs-var">tickishCanSplit</span></a></span><span> </span><span class="annot"><span class="annottext">GenTickish pass
</span><a href="#local-6989586621681574065"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; GenTickish pass
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mkNoCount: Cannot split!&quot;</span></span><span>
</span><span id="line-294"></span><span class="annot"><a href="GHC.Types.Tickish.html#mkNoCount"><span class="hs-identifier hs-var">mkNoCount</span></a></span><span> </span><span id="local-6989586621681574067"><span class="annot"><span class="annottext">n :: GenTickish pass
</span><a href="#local-6989586621681574067"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Types.Tickish.html#ProfNote"><span class="hs-identifier hs-type">ProfNote</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenTickish pass
</span><a href="#local-6989586621681574067"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="GHC.Types.Tickish.html#profNoteCount"><span class="hs-identifier hs-var">profNoteCount</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">False</span></span><span class="hs-special">}</span><span>
</span><span id="line-295"></span><span class="annot"><a href="GHC.Types.Tickish.html#mkNoCount"><span class="hs-identifier hs-var">mkNoCount</span></a></span><span> </span><span class="annot"><span class="annottext">GenTickish pass
</span><span class="hs-identifier">_</span></span><span>                           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; GenTickish pass
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mkNoCount: Undefined split!&quot;</span></span><span>
</span><span id="line-296"></span><span>
</span><span id="line-297"></span><span id="local-6989586621681574068"><span class="annot"><a href="GHC.Types.Tickish.html#mkNoScope"><span class="hs-identifier hs-type">mkNoScope</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#GenTickish"><span class="hs-identifier hs-type">GenTickish</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681574068"><span class="hs-identifier hs-type">pass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#GenTickish"><span class="hs-identifier hs-type">GenTickish</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681574068"><span class="hs-identifier hs-type">pass</span></a></span></span><span>
</span><span id="line-298"></span><span id="mkNoScope"><span class="annot"><span class="annottext">mkNoScope :: forall (pass :: TickishPass). GenTickish pass -&gt; GenTickish pass
</span><a href="GHC.Types.Tickish.html#mkNoScope"><span class="hs-identifier hs-var hs-var">mkNoScope</span></a></span></span><span> </span><span id="local-6989586621681574074"><span class="annot"><span class="annottext">GenTickish pass
</span><a href="#local-6989586621681574074"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">GenTickish pass -&gt; TickishScoping
forall (pass :: TickishPass). GenTickish pass -&gt; TickishScoping
</span><a href="GHC.Types.Tickish.html#tickishScoped"><span class="hs-identifier hs-var">tickishScoped</span></a></span><span> </span><span class="annot"><span class="annottext">GenTickish pass
</span><a href="#local-6989586621681574074"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">TickishScoping -&gt; TickishScoping -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TickishScoping
</span><a href="GHC.Types.Tickish.html#NoScope"><span class="hs-identifier hs-var">NoScope</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenTickish pass
</span><a href="#local-6989586621681574074"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-299"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenTickish pass -&gt; Bool
forall (pass :: TickishPass). GenTickish pass -&gt; Bool
</span><a href="GHC.Types.Tickish.html#tickishCanSplit"><span class="hs-identifier hs-var">tickishCanSplit</span></a></span><span> </span><span class="annot"><span class="annottext">GenTickish pass
</span><a href="#local-6989586621681574074"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; GenTickish pass
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mkNoScope: Cannot split!&quot;</span></span><span>
</span><span id="line-300"></span><span class="annot"><a href="GHC.Types.Tickish.html#mkNoScope"><span class="hs-identifier hs-var">mkNoScope</span></a></span><span> </span><span id="local-6989586621681574075"><span class="annot"><span class="annottext">n :: GenTickish pass
</span><a href="#local-6989586621681574075"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Types.Tickish.html#ProfNote"><span class="hs-identifier hs-type">ProfNote</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>                    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenTickish pass
</span><a href="#local-6989586621681574075"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="GHC.Types.Tickish.html#profNoteScope"><span class="hs-identifier hs-var">profNoteScope</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">False</span></span><span class="hs-special">}</span><span>
</span><span id="line-301"></span><span class="annot"><a href="GHC.Types.Tickish.html#mkNoScope"><span class="hs-identifier hs-var">mkNoScope</span></a></span><span> </span><span class="annot"><span class="annottext">GenTickish pass
</span><span class="hs-identifier">_</span></span><span>                               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; GenTickish pass
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mkNoScope: Undefined split!&quot;</span></span><span>
</span><span id="line-302"></span><span>
</span><span id="line-303"></span><span class="hs-comment">-- | Return @True@ if this source annotation compiles to some backend</span><span>
</span><span id="line-304"></span><span class="hs-comment">-- code. Without this flag, the tickish is seen as a simple annotation</span><span>
</span><span id="line-305"></span><span class="hs-comment">-- that does not have any associated evaluation code.</span><span>
</span><span id="line-306"></span><span class="hs-comment">--</span><span>
</span><span id="line-307"></span><span class="hs-comment">-- What this means that we are allowed to disregard the tick if doing</span><span>
</span><span id="line-308"></span><span class="hs-comment">-- so means that we can skip generating any code in the first place. A</span><span>
</span><span id="line-309"></span><span class="hs-comment">-- typical example is top-level bindings:</span><span>
</span><span id="line-310"></span><span class="hs-comment">--</span><span>
</span><span id="line-311"></span><span class="hs-comment">--   foo = tick&lt;...&gt; \y -&gt; ...</span><span>
</span><span id="line-312"></span><span class="hs-comment">--     ==&gt;</span><span>
</span><span id="line-313"></span><span class="hs-comment">--   foo = \y -&gt; tick&lt;...&gt; ...</span><span>
</span><span id="line-314"></span><span class="hs-comment">--</span><span>
</span><span id="line-315"></span><span class="hs-comment">-- Here there is just no operational difference between the first and</span><span>
</span><span id="line-316"></span><span class="hs-comment">-- the second version. Therefore code generation should simply</span><span>
</span><span id="line-317"></span><span class="hs-comment">-- translate the code as if it found the latter.</span><span>
</span><span id="line-318"></span><span id="local-6989586621681574076"><span class="annot"><a href="GHC.Types.Tickish.html#tickishIsCode"><span class="hs-identifier hs-type">tickishIsCode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#GenTickish"><span class="hs-identifier hs-type">GenTickish</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681574076"><span class="hs-identifier hs-type">pass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-319"></span><span id="tickishIsCode"><span class="annot"><span class="annottext">tickishIsCode :: forall (pass :: TickishPass). GenTickish pass -&gt; Bool
</span><a href="GHC.Types.Tickish.html#tickishIsCode"><span class="hs-identifier hs-var hs-var">tickishIsCode</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#SourceNote"><span class="hs-identifier hs-type">SourceNote</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-320"></span><span class="annot"><a href="GHC.Types.Tickish.html#tickishIsCode"><span class="hs-identifier hs-var">tickishIsCode</span></a></span><span> </span><span id="local-6989586621681574077"><span class="annot"><span class="annottext">GenTickish pass
</span><a href="#local-6989586621681574077"><span class="hs-identifier hs-var">_tickish</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>  </span><span class="hs-comment">-- all the rest for now</span><span>
</span><span id="line-321"></span><span>
</span><span id="line-322"></span><span id="local-6989586621681574078"><span class="annot"><a href="GHC.Types.Tickish.html#isProfTick"><span class="hs-identifier hs-type">isProfTick</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#GenTickish"><span class="hs-identifier hs-type">GenTickish</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681574078"><span class="hs-identifier hs-type">pass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-323"></span><span id="isProfTick"><span class="annot"><span class="annottext">isProfTick :: forall (pass :: TickishPass). GenTickish pass -&gt; Bool
</span><a href="GHC.Types.Tickish.html#isProfTick"><span class="hs-identifier hs-var hs-var">isProfTick</span></a></span></span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#ProfNote"><span class="hs-identifier hs-type">ProfNote</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-324"></span><span class="annot"><a href="GHC.Types.Tickish.html#isProfTick"><span class="hs-identifier hs-var">isProfTick</span></a></span><span> </span><span class="annot"><span class="annottext">GenTickish pass
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-325"></span><span>
</span><span id="line-326"></span><span class="hs-comment">-- | Governs the kind of expression that the tick gets placed on when</span><span>
</span><span id="line-327"></span><span class="hs-comment">-- annotating for example using @mkTick@. If we find that we want to</span><span>
</span><span id="line-328"></span><span class="hs-comment">-- put a tickish on an expression ruled out here, we try to float it</span><span>
</span><span id="line-329"></span><span class="hs-comment">-- inwards until we find a suitable expression.</span><span>
</span><span id="line-330"></span><span class="hs-keyword">data</span><span> </span><span id="TickishPlacement"><span class="annot"><a href="GHC.Types.Tickish.html#TickishPlacement"><span class="hs-identifier hs-var">TickishPlacement</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-331"></span><span>
</span><span id="line-332"></span><span>    </span><span class="hs-comment">-- | Place ticks exactly on run-time expressions. We can still</span><span>
</span><span id="line-333"></span><span>    </span><span class="hs-comment">-- move the tick through pure compile-time constructs such as</span><span>
</span><span id="line-334"></span><span>    </span><span class="hs-comment">-- other ticks, casts or type lambdas. This is the most</span><span>
</span><span id="line-335"></span><span>    </span><span class="hs-comment">-- restrictive placement rule for ticks, as all tickishs have in</span><span>
</span><span id="line-336"></span><span>    </span><span class="hs-comment">-- common that they want to track runtime processes. The only</span><span>
</span><span id="line-337"></span><span>    </span><span class="hs-comment">-- legal placement rule for counting ticks.</span><span>
</span><span id="line-338"></span><span>    </span><span class="hs-comment">-- NB: We generally try to move these as close to the relevant</span><span>
</span><span id="line-339"></span><span>    </span><span class="hs-comment">-- runtime expression as possible. This means they get pushed through</span><span>
</span><span id="line-340"></span><span>    </span><span class="hs-comment">-- tyoe arguments. E.g. we create `(tick f) @Bool` instead of `tick (f @Bool)`.</span><span>
</span><span id="line-341"></span><span>    </span><span id="PlaceRuntime"><span class="annot"><a href="GHC.Types.Tickish.html#PlaceRuntime"><span class="hs-identifier hs-var">PlaceRuntime</span></a></span></span><span>
</span><span id="line-342"></span><span>
</span><span id="line-343"></span><span>    </span><span class="hs-comment">-- | As @PlaceRuntime@, but we float the tick through all</span><span>
</span><span id="line-344"></span><span>    </span><span class="hs-comment">-- lambdas. This makes sense where there is little difference</span><span>
</span><span id="line-345"></span><span>    </span><span class="hs-comment">-- between annotating the lambda and annotating the lambda's code.</span><span>
</span><span id="line-346"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PlaceNonLam"><span class="annot"><a href="GHC.Types.Tickish.html#PlaceNonLam"><span class="hs-identifier hs-var">PlaceNonLam</span></a></span></span><span>
</span><span id="line-347"></span><span>
</span><span id="line-348"></span><span>    </span><span class="hs-comment">-- | In addition to floating through lambdas, cost-centre style</span><span>
</span><span id="line-349"></span><span>    </span><span class="hs-comment">-- tickishs can also be moved from constructors, non-function</span><span>
</span><span id="line-350"></span><span>    </span><span class="hs-comment">-- variables and literals. For example:</span><span>
</span><span id="line-351"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-352"></span><span>    </span><span class="hs-comment">--   let x = scc&lt;...&gt; C (scc&lt;...&gt; y) (scc&lt;...&gt; 3) in ...</span><span>
</span><span id="line-353"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-354"></span><span>    </span><span class="hs-comment">-- Neither the constructor application, the variable or the</span><span>
</span><span id="line-355"></span><span>    </span><span class="hs-comment">-- literal are likely to have any cost worth mentioning. And even</span><span>
</span><span id="line-356"></span><span>    </span><span class="hs-comment">-- if y names a thunk, the call would not care about the</span><span>
</span><span id="line-357"></span><span>    </span><span class="hs-comment">-- evaluation context. Therefore removing all annotations in the</span><span>
</span><span id="line-358"></span><span>    </span><span class="hs-comment">-- above example is safe.</span><span>
</span><span id="line-359"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PlaceCostCentre"><span class="annot"><a href="GHC.Types.Tickish.html#PlaceCostCentre"><span class="hs-identifier hs-var">PlaceCostCentre</span></a></span></span><span>
</span><span id="line-360"></span><span>
</span><span id="line-361"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681574083"><span id="local-6989586621681574085"><span class="annot"><span class="annottext">TickishPlacement -&gt; TickishPlacement -&gt; Bool
(TickishPlacement -&gt; TickishPlacement -&gt; Bool)
-&gt; (TickishPlacement -&gt; TickishPlacement -&gt; Bool)
-&gt; Eq TickishPlacement
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: TickishPlacement -&gt; TickishPlacement -&gt; Bool
== :: TickishPlacement -&gt; TickishPlacement -&gt; Bool
$c/= :: TickishPlacement -&gt; TickishPlacement -&gt; Bool
/= :: TickishPlacement -&gt; TickishPlacement -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span id="local-6989586621681574089"><span id="local-6989586621681574091"><span id="local-6989586621681574095"><span class="annot"><span class="annottext">Int -&gt; TickishPlacement -&gt; ShowS
[TickishPlacement] -&gt; ShowS
TickishPlacement -&gt; String
(Int -&gt; TickishPlacement -&gt; ShowS)
-&gt; (TickishPlacement -&gt; String)
-&gt; ([TickishPlacement] -&gt; ShowS)
-&gt; Show TickishPlacement
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; TickishPlacement -&gt; ShowS
showsPrec :: Int -&gt; TickishPlacement -&gt; ShowS
$cshow :: TickishPlacement -&gt; String
show :: TickishPlacement -&gt; String
$cshowList :: [TickishPlacement] -&gt; ShowS
showList :: [TickishPlacement] -&gt; ShowS
</span><a href="../../base-4.18.2.1/src/GHC.Show.html#Show/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-362"></span><span>
</span><span id="line-363"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Utils.Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#TickishPlacement"><span class="hs-identifier hs-type">TickishPlacement</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-364"></span><span>  </span><span id="local-6989586621681574104"><span class="annot"><span class="annottext">ppr :: TickishPlacement -&gt; SDoc
</span><a href="GHC.Utils.Outputable.html#ppr"><span class="hs-identifier hs-var hs-var hs-var hs-var">ppr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; SDoc
forall doc. IsLine doc =&gt; String -&gt; doc
</span><a href="GHC.Utils.Outputable.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; SDoc)
-&gt; (TickishPlacement -&gt; String) -&gt; TickishPlacement -&gt; SDoc
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TickishPlacement -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../../base-4.18.2.1/src/GHC.Show.html#show/GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span>
</span><span id="line-365"></span><span>
</span><span id="line-366"></span><span class="annot"><span class="hs-comment">-- | Placement behaviour we want for the ticks</span></span><span>
</span><span id="line-367"></span><span id="local-6989586621681573541"><span class="annot"><a href="GHC.Types.Tickish.html#tickishPlace"><span class="hs-identifier hs-type">tickishPlace</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#GenTickish"><span class="hs-identifier hs-type">GenTickish</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681573541"><span class="hs-identifier hs-type">pass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#TickishPlacement"><span class="hs-identifier hs-type">TickishPlacement</span></a></span></span><span>
</span><span id="line-368"></span><span id="tickishPlace"><span class="annot"><span class="annottext">tickishPlace :: forall (pass :: TickishPass). GenTickish pass -&gt; TickishPlacement
</span><a href="GHC.Types.Tickish.html#tickishPlace"><span class="hs-identifier hs-var hs-var">tickishPlace</span></a></span></span><span> </span><span id="local-6989586621681574107"><span class="annot"><span class="annottext">n :: GenTickish pass
</span><a href="#local-6989586621681574107"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Types.Tickish.html#ProfNote"><span class="hs-identifier hs-type">ProfNote</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>
</span><span id="line-369"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">GenTickish pass -&gt; Bool
forall (pass :: TickishPass). GenTickish pass -&gt; Bool
</span><a href="GHC.Types.Tickish.html#profNoteCount"><span class="hs-identifier hs-var">profNoteCount</span></a></span><span> </span><span class="annot"><span class="annottext">GenTickish pass
</span><a href="#local-6989586621681574107"><span class="hs-identifier hs-var">n</span></a></span><span>        </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TickishPlacement
</span><a href="GHC.Types.Tickish.html#PlaceRuntime"><span class="hs-identifier hs-var">PlaceRuntime</span></a></span><span>
</span><span id="line-370"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.2.1/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TickishPlacement
</span><a href="GHC.Types.Tickish.html#PlaceCostCentre"><span class="hs-identifier hs-var">PlaceCostCentre</span></a></span><span>
</span><span id="line-371"></span><span class="annot"><a href="GHC.Types.Tickish.html#tickishPlace"><span class="hs-identifier hs-var">tickishPlace</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#HpcTick"><span class="hs-identifier hs-type">HpcTick</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TickishPlacement
</span><a href="GHC.Types.Tickish.html#PlaceRuntime"><span class="hs-identifier hs-var">PlaceRuntime</span></a></span><span>
</span><span id="line-372"></span><span class="annot"><a href="GHC.Types.Tickish.html#tickishPlace"><span class="hs-identifier hs-var">tickishPlace</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#Breakpoint"><span class="hs-identifier hs-type">Breakpoint</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TickishPlacement
</span><a href="GHC.Types.Tickish.html#PlaceRuntime"><span class="hs-identifier hs-var">PlaceRuntime</span></a></span><span>
</span><span id="line-373"></span><span class="annot"><a href="GHC.Types.Tickish.html#tickishPlace"><span class="hs-identifier hs-var">tickishPlace</span></a></span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#SourceNote"><span class="hs-identifier hs-type">SourceNote</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TickishPlacement
</span><a href="GHC.Types.Tickish.html#PlaceNonLam"><span class="hs-identifier hs-var">PlaceNonLam</span></a></span><span>
</span><span id="line-374"></span><span>
</span><span id="line-375"></span><span class="hs-comment">-- | Returns whether one tick &quot;contains&quot; the other one, therefore</span><span>
</span><span id="line-376"></span><span class="hs-comment">-- making the second tick redundant.</span><span>
</span><span id="line-377"></span><span id="local-6989586621681573543"><span class="annot"><a href="GHC.Types.Tickish.html#tickishContains"><span class="hs-identifier hs-type">tickishContains</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Tickish.html#GenTickish"><span class="hs-identifier hs-type">GenTickish</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681573543"><span class="hs-identifier hs-type">pass</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-378"></span><span>                </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#GenTickish"><span class="hs-identifier hs-type">GenTickish</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681573543"><span class="hs-identifier hs-type">pass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.Tickish.html#GenTickish"><span class="hs-identifier hs-type">GenTickish</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681573543"><span class="hs-identifier hs-type">pass</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-379"></span><span id="tickishContains"><span class="annot"><span class="annottext">tickishContains :: forall (pass :: TickishPass).
Eq (GenTickish pass) =&gt;
GenTickish pass -&gt; GenTickish pass -&gt; Bool
</span><a href="GHC.Types.Tickish.html#tickishContains"><span class="hs-identifier hs-var hs-var">tickishContains</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Tickish.html#SourceNote"><span class="hs-identifier hs-type">SourceNote</span></a></span><span> </span><span id="local-6989586621681574112"><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621681574112"><span class="hs-identifier hs-var">sp1</span></a></span></span><span> </span><span id="local-6989586621681574113"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681574113"><span class="hs-identifier hs-var">n1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.Tickish.html#SourceNote"><span class="hs-identifier hs-type">SourceNote</span></a></span><span> </span><span id="local-6989586621681574114"><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621681574114"><span class="hs-identifier hs-var">sp2</span></a></span></span><span> </span><span id="local-6989586621681574115"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681574115"><span class="hs-identifier hs-var">n2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-380"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RealSrcSpan -&gt; RealSrcSpan -&gt; Bool
</span><a href="GHC.Types.SrcLoc.html#containsSpan"><span class="hs-identifier hs-var">containsSpan</span></a></span><span> </span><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621681574112"><span class="hs-identifier hs-var">sp1</span></a></span><span> </span><span class="annot"><span class="annottext">RealSrcSpan
</span><a href="#local-6989586621681574114"><span class="hs-identifier hs-var">sp2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681574113"><span class="hs-identifier hs-var">n1</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681574115"><span class="hs-identifier hs-var">n2</span></a></span><span>
</span><span id="line-381"></span><span>    </span><span class="hs-comment">-- compare the String last</span><span>
</span><span id="line-382"></span><span class="annot"><a href="GHC.Types.Tickish.html#tickishContains"><span class="hs-identifier hs-var">tickishContains</span></a></span><span> </span><span id="local-6989586621681574116"><span class="annot"><span class="annottext">GenTickish pass
</span><a href="#local-6989586621681574116"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681574117"><span class="annot"><span class="annottext">GenTickish pass
</span><a href="#local-6989586621681574117"><span class="hs-identifier hs-var">t2</span></a></span></span><span>
</span><span id="line-383"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenTickish pass
</span><a href="#local-6989586621681574116"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">GenTickish pass -&gt; GenTickish pass -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">GenTickish pass
</span><a href="#local-6989586621681574117"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-384"></span></pre></body></html>