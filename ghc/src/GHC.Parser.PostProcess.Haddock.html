<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE ApplicativeDo              #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DeriveFunctor              #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DerivingVia                #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances          #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns             #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes                 #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables        #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications           #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies               #-}</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span class="annot"><span class="hs-comment">{- | This module implements 'addHaddockToModule', which inserts Haddock
    comments accumulated during parsing into the AST (#17544).

We process Haddock comments in two phases:

1. Parse the program (via the Happy parser in `Parser.y`), generating
   an AST, and (quite separately) a list of all the Haddock comments
   found in the file. More precisely, the Haddock comments are
   accumulated in the `hdk_comments` field of the `PState`, the parser
   state (see Lexer.x):

     data PState = PState { ...
                          ,  hdk_comments :: [PsLocated HdkComment] }

   Each of these Haddock comments has a `PsSpan`, which gives the `BufPos` of
   the beginning and end of the Haddock comment.

2. Walk over the AST, attaching the Haddock comments to the correct
   parts of the tree. This step is called `addHaddockToModule`, and is
   implemented in this module.

   See Note [Adding Haddock comments to the syntax tree].

This approach codifies an important principle:

  The presence or absence of a Haddock comment should never change the parsing
  of a program.

Alternative approaches that did not work properly:

1. Using 'RealSrcLoc' instead of 'BufPos'. This led to failures in presence
   of {-# LANGUAGE CPP #-} and other sources of line pragmas. See documentation
   on 'BufPos' (in GHC.Types.SrcLoc) for the details.

2. In earlier versions of GHC, the Haddock comments were incorporated into the
   Parser.y grammar. The parser constructed the AST and attached comments to it in
   a single pass. See Note [Old solution: Haddock in the grammar] for the details.
-}</span></span><span>
</span><span id="line-49"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">GHC.Parser.PostProcess.Haddock</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#addHaddockToModule"><span class="hs-identifier">addHaddockToModule</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Prelude.html"><span class="hs-identifier">GHC.Prelude</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.List.html#head/GHC.List.html#head"><span class="hs-identifier">head</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.List.html#init/GHC.List.html#init"><span class="hs-identifier">init</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.List.html#last/GHC.List.html#last"><span class="hs-identifier">last</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Real.html#mod/GHC.Real.html#mod"><span class="hs-identifier">mod</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.List.html#tail/GHC.List.html#tail"><span class="hs-identifier">tail</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-52"></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Hs.html"><span class="hs-identifier">GHC.Hs</span></a></span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html"><span class="hs-identifier">GHC.Types.SrcLoc</span></a></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Panic.html"><span class="hs-identifier">GHC.Utils.Panic</span></a></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Data.Bag.html"><span class="hs-identifier">GHC.Data.Bag</span></a></span><span>
</span><span id="line-58"></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Semigroup.html#/Data.Semigroup.html"><span class="hs-identifier">Data.Semigroup</span></a></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Foldable.html#/Data.Foldable.html"><span class="hs-identifier">Data.Foldable</span></a></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Traversable.html#/Data.Traversable.html"><span class="hs-identifier">Data.Traversable</span></a></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Maybe.html#/Data.Maybe.html"><span class="hs-identifier">Data.Maybe</span></a></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.List.NonEmpty.html#/Data.List.NonEmpty.html"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.18.3.0/src/Data.List.NonEmpty.html#nonEmpty/Data.List.NonEmpty.html#nonEmpty"><span class="hs-identifier">nonEmpty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.List.NonEmpty.html#/Data.List.NonEmpty.html"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NE</span></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Control.Monad.html#/Control.Monad.html"><span class="hs-identifier">Control.Monad</span></a></span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.State.Strict.html#/Control.Monad.Trans.State.Strict.html"><span class="hs-identifier">Control.Monad.Trans.State.Strict</span></a></span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Reader.html#/Control.Monad.Trans.Reader.html"><span class="hs-identifier">Control.Monad.Trans.Reader</span></a></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Writer.html#/Control.Monad.Trans.Writer.html"><span class="hs-identifier">Control.Monad.Trans.Writer</span></a></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Functor.Identity.html#/Data.Functor.Identity.html"><span class="hs-identifier">Data.Functor.Identity</span></a></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Monoid.html#/Data.Monoid.html"><span class="hs-identifier">Data.Monoid</span></a></span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><a href="GHC.Parser.html"><span class="hs-identifier">GHC.Parser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.html#parseIdentifier"><span class="hs-identifier">parseIdentifier</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html"><span class="hs-identifier">GHC.Parser.Lexer</span></a></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Parser.HaddockLex.html"><span class="hs-identifier">GHC.Parser.HaddockLex</span></a></span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Parser.Errors.Types.html"><span class="hs-identifier">GHC.Parser.Errors.Types</span></a></span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html"><span class="hs-identifier">GHC.Utils.Misc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Utils.Misc.html#mergeListsBy"><span class="hs-identifier">mergeListsBy</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#filterOut"><span class="hs-identifier">filterOut</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#mapLastM"><span class="hs-identifier">mapLastM</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Utils.Misc.html#%3C%26%26%3E"><span class="hs-operator">(&lt;&amp;&amp;&gt;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="GHC.Data.Strict.html"><span class="hs-identifier">GHC.Data.Strict</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Strict</span></span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span class="hs-comment">{- Note [Adding Haddock comments to the syntax tree]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
'addHaddock' traverses the AST in concrete syntax order, building a computation
(represented by HdkA) that reconstructs the AST but with Haddock comments
inserted in appropriate positions:

  addHaddock :: HasHaddock a =&gt; a -&gt; HdkA a

Consider this code example:

  f :: Int  -- ^ comment on argument
    -&gt; Bool -- ^ comment on result

In the AST, the &quot;Int&quot; part of this snippet is represented like this
(pseudo-code):

  L (BufSpan 6 8) (HsTyVar &quot;Int&quot;) :: LHsType GhcPs

And the comments are represented like this (pseudo-code):

  L (BufSpan 11 35) (HdkCommentPrev &quot;comment on argument&quot;)
  L (BufSpan 46 69) (HdkCommentPrev &quot;comment on result&quot;)

So when we are traversing the AST and 'addHaddock' is applied to HsTyVar &quot;Int&quot;,
how does it know to associate it with &quot;comment on argument&quot; but not with
&quot;comment on result&quot;?

The trick is to look in the space between syntactic elements. In the example above,
the location range in which we search for HdkCommentPrev is as follows:

  f :: Int&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;
   &#9608;&#9608;&#9608;&#9608;Bool -- ^ comment on result

We search for comments after  HsTyVar &quot;Int&quot;  and until the next syntactic
element, in this case  HsTyVar &quot;Bool&quot;.

Ignoring the &quot;-&gt;&quot; allows us to accommodate alternative coding styles:

  f :: Int -&gt;   -- ^ comment on argument
       Bool     -- ^ comment on result

Sometimes we also need to take indentation information into account.
Compare the following examples:

    class C a where
      f :: a -&gt; Int
      -- ^ comment on f

    class C a where
      f :: a -&gt; Int
    -- ^ comment on C

Notice how &quot;comment on f&quot; and &quot;comment on C&quot; differ only by indentation level.

Therefore, in order to know the location range in which the comments are applicable
to a syntactic elements, we need three nuggets of information:
  1. lower bound on the BufPos of a comment
  2. upper bound on the BufPos of a comment
  3. minimum indentation level of a comment

This information is represented by the 'LocRange' type.

In order to propagate this information, we have the 'HdkA' applicative.
'HdkA' is defined as follows:

  data HdkA a = HdkA (Maybe BufSpan) (HdkM a)

The first field contains a 'BufSpan', which represents the location
span taken by a syntactic element:

  addHaddock (L bufSpan ...) = HdkA (Just bufSpan) ...

The second field, 'HdkM', is a stateful computation that looks up Haddock
comments in the specified location range:

  HdkM a &#8776;
       LocRange                  -- The allowed location range
    -&gt; [PsLocated HdkComment]    -- Unallocated comments
    -&gt; (a,                       -- AST with comments inserted into it
        [PsLocated HdkComment])  -- Leftover comments

The 'Applicative' instance for 'HdkA' is defined in such a way that the
location range of every computation is defined by its neighbours:

  addHaddock aaa &lt;*&gt; addHaddock bbb &lt;*&gt; addHaddock ccc

Here, the 'LocRange' passed to the 'HdkM' computation of  addHaddock bbb
is determined by the BufSpan recorded in  addHaddock aaa  and  addHaddock ccc.

This is why it's important to traverse the AST in the order of the concrete
syntax. In the example above we assume that  aaa, bbb, ccc  are ordered by location:

  * getBufSpan (getLoc aaa) &lt; getBufSpan (getLoc bbb)
  * getBufSpan (getLoc bbb) &lt; getBufSpan (getLoc ccc)

Violation of this assumption would lead to bugs, and care must be taken to
traverse the AST correctly. For example, when dealing with class declarations,
we have to use 'flattenBindsAndSigs' to traverse it in the correct order.
-}</span><span>
</span><span id="line-178"></span><span>
</span><span id="line-179"></span><span class="hs-comment">-- | Add Haddock documentation accumulated in the parser state</span><span>
</span><span id="line-180"></span><span class="hs-comment">-- to a parsed HsModule.</span><span>
</span><span id="line-181"></span><span class="hs-comment">--</span><span>
</span><span id="line-182"></span><span class="hs-comment">-- Reports badly positioned comments when -Winvalid-haddock is enabled.</span><span>
</span><span id="line-183"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#addHaddockToModule"><span class="hs-identifier hs-type">addHaddockToModule</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.html#HsModule"><span class="hs-identifier hs-type">HsModule</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.html#HsModule"><span class="hs-identifier hs-type">HsModule</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-184"></span><span id="addHaddockToModule"><span class="annot"><span class="annottext">addHaddockToModule :: Located (HsModule GhcPs) -&gt; P (Located (HsModule GhcPs))
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddockToModule"><span class="hs-identifier hs-var hs-var">addHaddockToModule</span></a></span></span><span> </span><span id="local-6989586621681797171"><span class="annot"><span class="annottext">Located (HsModule GhcPs)
</span><a href="#local-6989586621681797171"><span class="hs-identifier hs-var">lmod</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-185"></span><span>  </span><span id="local-6989586621681797172"><span class="annot"><span class="annottext">PState
</span><a href="#local-6989586621681797172"><span class="hs-identifier hs-var">pState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">P PState
</span><a href="GHC.Parser.Lexer.html#getPState"><span class="hs-identifier hs-var">getPState</span></a></span><span>
</span><span id="line-186"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681797174"><span class="annot"><span class="annottext">all_comments :: [PsLocated HdkComment]
</span><a href="#local-6989586621681797174"><span class="hs-identifier hs-var hs-var">all_comments</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OrdList (PsLocated HdkComment) -&gt; [PsLocated HdkComment]
forall a. OrdList a -&gt; [a]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#toList/Data.Foldable.html#toList"><span class="hs-identifier hs-var">toList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PState -&gt; OrdList (PsLocated HdkComment)
</span><a href="GHC.Parser.Lexer.html#hdk_comments"><span class="hs-identifier hs-var">hdk_comments</span></a></span><span> </span><span class="annot"><span class="annottext">PState
</span><a href="#local-6989586621681797172"><span class="hs-identifier hs-var">pState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span>      </span><span id="local-6989586621681797176"><span class="annot"><span class="annottext">initial_hdk_st :: HdkSt
</span><a href="#local-6989586621681797176"><span class="hs-identifier hs-var hs-var">initial_hdk_st</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[PsLocated HdkComment] -&gt; [HdkWarn] -&gt; HdkSt
</span><a href="GHC.Parser.PostProcess.Haddock.html#HdkSt"><span class="hs-identifier hs-var">HdkSt</span></a></span><span> </span><span class="annot"><span class="annottext">[PsLocated HdkComment]
</span><a href="#local-6989586621681797174"><span class="hs-identifier hs-var">all_comments</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-188"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621681797178"><span class="annot"><span class="annottext">Located (HsModule GhcPs)
</span><a href="#local-6989586621681797178"><span class="hs-identifier hs-var">lmod'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797179"><span class="annot"><span class="annottext">HdkSt
</span><a href="#local-6989586621681797179"><span class="hs-identifier hs-var">final_hdk_st</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HdkA (Located (HsModule GhcPs))
-&gt; HdkSt -&gt; (Located (HsModule GhcPs), HdkSt)
forall a. HdkA a -&gt; HdkSt -&gt; (a, HdkSt)
</span><a href="GHC.Parser.PostProcess.Haddock.html#runHdkA"><span class="hs-identifier hs-var">runHdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Located (HsModule GhcPs) -&gt; HdkA (Located (HsModule GhcPs))
forall a. HasHaddock a =&gt; a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="annot"><span class="annottext">Located (HsModule GhcPs)
</span><a href="#local-6989586621681797171"><span class="hs-identifier hs-var">lmod</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HdkSt
</span><a href="#local-6989586621681797176"><span class="hs-identifier hs-var">initial_hdk_st</span></a></span><span>
</span><span id="line-189"></span><span>      </span><span id="local-6989586621681797182"><span class="annot"><span class="annottext">hdk_warnings :: [HdkWarn]
</span><a href="#local-6989586621681797182"><span class="hs-identifier hs-var hs-var">hdk_warnings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HdkSt -&gt; [HdkWarn]
</span><a href="GHC.Parser.PostProcess.Haddock.html#collectHdkWarnings"><span class="hs-identifier hs-var">collectHdkWarnings</span></a></span><span> </span><span class="annot"><span class="annottext">HdkSt
</span><a href="#local-6989586621681797179"><span class="hs-identifier hs-var">final_hdk_st</span></a></span><span>
</span><span id="line-190"></span><span>        </span><span class="hs-comment">-- lmod':        module with Haddock comments inserted into the AST</span><span>
</span><span id="line-191"></span><span>        </span><span class="hs-comment">-- hdk_warnings: warnings accumulated during AST/comment processing</span><span>
</span><span id="line-192"></span><span>  </span><span class="annot"><span class="annottext">(HdkWarn -&gt; P ()) -&gt; [HdkWarn] -&gt; P ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#mapM_/Data.Foldable.html#mapM_"><span class="hs-identifier hs-var">mapM_</span></a></span><span> </span><span class="annot"><span class="annottext">HdkWarn -&gt; P ()
</span><a href="GHC.Parser.PostProcess.Haddock.html#reportHdkWarning"><span class="hs-identifier hs-var">reportHdkWarning</span></a></span><span> </span><span class="annot"><span class="annottext">[HdkWarn]
</span><a href="#local-6989586621681797182"><span class="hs-identifier hs-var">hdk_warnings</span></a></span><span>
</span><span id="line-193"></span><span>  </span><span class="hs-identifier">return</span><span> </span><span class="annot"><span class="annottext">Located (HsModule GhcPs)
</span><a href="#local-6989586621681797178"><span class="hs-identifier hs-var">lmod'</span></a></span><span>
</span><span id="line-194"></span><span>
</span><span id="line-195"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#reportHdkWarning"><span class="hs-identifier hs-type">reportHdkWarning</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkWarn"><span class="hs-identifier hs-type">HdkWarn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#P"><span class="hs-identifier hs-type">P</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-196"></span><span id="reportHdkWarning"><span class="annot"><span class="annottext">reportHdkWarning :: HdkWarn -&gt; P ()
</span><a href="GHC.Parser.PostProcess.Haddock.html#reportHdkWarning"><span class="hs-identifier hs-var hs-var">reportHdkWarning</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkWarnInvalidComment"><span class="hs-identifier hs-type">HdkWarnInvalidComment</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681797188"><span class="annot"><span class="annottext">PsSpan
</span><a href="#local-6989586621681797188"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">HdkComment
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-197"></span><span>  </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; P ()
</span><a href="GHC.Parser.Lexer.html#addPsMessage"><span class="hs-identifier hs-var">addPsMessage</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PsSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#mkSrcSpanPs"><span class="hs-identifier hs-var">mkSrcSpanPs</span></a></span><span> </span><span class="annot"><span class="annottext">PsSpan
</span><a href="#local-6989586621681797188"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsWarnHaddockInvalidPos"><span class="hs-identifier hs-var">PsWarnHaddockInvalidPos</span></a></span><span>
</span><span id="line-198"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#reportHdkWarning"><span class="hs-identifier hs-var">reportHdkWarning</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkWarnExtraComment"><span class="hs-identifier hs-type">HdkWarnExtraComment</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681797193"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681797193"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">HsDocString
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-199"></span><span>  </span><span class="annot"><span class="annottext">SrcSpan -&gt; PsMessage -&gt; P ()
</span><a href="GHC.Parser.Lexer.html#addPsMessage"><span class="hs-identifier hs-var">addPsMessage</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681797193"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">PsMessage
</span><a href="GHC.Parser.Errors.Types.html#PsWarnHaddockIgnoreMulti"><span class="hs-identifier hs-var">PsWarnHaddockIgnoreMulti</span></a></span><span>
</span><span id="line-200"></span><span>
</span><span id="line-201"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#collectHdkWarnings"><span class="hs-identifier hs-type">collectHdkWarnings</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkSt"><span class="hs-identifier hs-type">HdkSt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkWarn"><span class="hs-identifier hs-type">HdkWarn</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-202"></span><span id="collectHdkWarnings"><span class="annot"><span class="annottext">collectHdkWarnings :: HdkSt -&gt; [HdkWarn]
</span><a href="GHC.Parser.PostProcess.Haddock.html#collectHdkWarnings"><span class="hs-identifier hs-var hs-var">collectHdkWarnings</span></a></span></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkSt"><span class="hs-identifier hs-type">HdkSt</span></a></span><span class="hs-special">{</span><span> </span><span id="local-6989586621681797195"><span class="annot"><span class="annottext">[PsLocated HdkComment]
hdk_st_pending :: [PsLocated HdkComment]
hdk_st_pending :: HdkSt -&gt; [PsLocated HdkComment]
</span><a href="#local-6989586621681797195"><span class="hs-identifier hs-var hs-var">hdk_st_pending</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797197"><span class="annot"><span class="annottext">[HdkWarn]
hdk_st_warnings :: [HdkWarn]
hdk_st_warnings :: HdkSt -&gt; [HdkWarn]
</span><a href="#local-6989586621681797197"><span class="hs-identifier hs-var hs-var">hdk_st_warnings</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-203"></span><span>  </span><span class="annot"><span class="annottext">(PsLocated HdkComment -&gt; HdkWarn)
-&gt; [PsLocated HdkComment] -&gt; [HdkWarn]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">PsLocated HdkComment -&gt; HdkWarn
</span><a href="GHC.Parser.PostProcess.Haddock.html#HdkWarnInvalidComment"><span class="hs-identifier hs-var">HdkWarnInvalidComment</span></a></span><span> </span><span class="annot"><span class="annottext">[PsLocated HdkComment]
</span><a href="#local-6989586621681797195"><span class="hs-identifier hs-var">hdk_st_pending</span></a></span><span> </span><span class="hs-comment">-- leftover Haddock comments not inserted into the AST</span><span>
</span><span id="line-204"></span><span>  </span><span class="annot"><span class="annottext">[HdkWarn] -&gt; [HdkWarn] -&gt; [HdkWarn]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[HdkWarn]
</span><a href="#local-6989586621681797197"><span class="hs-identifier hs-var">hdk_st_warnings</span></a></span><span>
</span><span id="line-205"></span><span>
</span><span id="line-206"></span><span class="annot"><span class="hs-comment">{- *********************************************************************
*                                                                      *
*       addHaddock: a family of functions that processes the AST       *
*    in concrete syntax order, adding documentation comments to it     *
*                                                                      *
********************************************************************* -}</span></span><span>
</span><span id="line-212"></span><span>
</span><span id="line-213"></span><span class="hs-comment">-- HasHaddock is a convenience class for overloading the addHaddock operation.</span><span>
</span><span id="line-214"></span><span class="hs-comment">-- Alternatively, we could define a family of monomorphic functions:</span><span>
</span><span id="line-215"></span><span class="hs-comment">--</span><span>
</span><span id="line-216"></span><span class="hs-comment">--    addHaddockSomeTypeX    :: SomeTypeX    -&gt; HdkA SomeTypeX</span><span>
</span><span id="line-217"></span><span class="hs-comment">--    addHaddockAnotherTypeY :: AnotherTypeY -&gt; HdkA AnotherTypeY</span><span>
</span><span id="line-218"></span><span class="hs-comment">--    addHaddockOneMoreTypeZ :: OneMoreTypeZ -&gt; HdkA OneMoreTypeZ</span><span>
</span><span id="line-219"></span><span class="hs-comment">--</span><span>
</span><span id="line-220"></span><span class="hs-comment">-- But having a single name for all of them is just easier to read, and makes it clear</span><span>
</span><span id="line-221"></span><span class="hs-comment">-- that they all are of the form  t -&gt; HdkA t  for some t.</span><span>
</span><span id="line-222"></span><span class="hs-comment">--</span><span>
</span><span id="line-223"></span><span class="hs-comment">-- If you need to handle a more complicated scenario that doesn't fit this</span><span>
</span><span id="line-224"></span><span class="hs-comment">-- pattern, it's always possible to define separate functions outside of this</span><span>
</span><span id="line-225"></span><span class="hs-comment">-- class, as is done in case of e.g. addHaddockConDeclField.</span><span>
</span><span id="line-226"></span><span class="hs-comment">--</span><span>
</span><span id="line-227"></span><span class="hs-comment">-- See Note [Adding Haddock comments to the syntax tree].</span><span>
</span><span id="line-228"></span><span class="hs-keyword">class</span><span> </span><span id="HasHaddock"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HasHaddock"><span class="hs-identifier hs-var">HasHaddock</span></a></span></span><span> </span><span id="local-6989586621681796676"><span class="annot"><a href="#local-6989586621681796676"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-229"></span><span>  </span><span id="addHaddock"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-type">addHaddock</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621681796676"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkA"><span class="hs-identifier hs-type">HdkA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681796676"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-230"></span><span>
</span><span id="line-231"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681796688"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HasHaddock"><span class="hs-identifier hs-type">HasHaddock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681796688"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HasHaddock"><span class="hs-identifier hs-type">HasHaddock</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621681796688"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-232"></span><span>  </span><span id="local-6989586621681797208"><span class="annot"><span class="annottext">addHaddock :: [a] -&gt; HdkA [a]
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var hs-var hs-var hs-var">addHaddock</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; HdkA a) -&gt; [a] -&gt; HdkA [a]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><a href="../../base-4.18.3.0/src/Data.Traversable.html#traverse/Data.Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; HdkA a
forall a. HasHaddock a =&gt; a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span>
</span><span id="line-233"></span><span>
</span><span id="line-234"></span><span class="hs-comment">--    -- | Module header comment</span><span>
</span><span id="line-235"></span><span class="hs-comment">--    module M (</span><span>
</span><span id="line-236"></span><span class="hs-comment">--        -- * Export list comment</span><span>
</span><span id="line-237"></span><span class="hs-comment">--        Item1,</span><span>
</span><span id="line-238"></span><span class="hs-comment">--        Item2,</span><span>
</span><span id="line-239"></span><span class="hs-comment">--        -- * Export list comment</span><span>
</span><span id="line-240"></span><span class="hs-comment">--        item3,</span><span>
</span><span id="line-241"></span><span class="hs-comment">--        item4</span><span>
</span><span id="line-242"></span><span class="hs-comment">--      ) where</span><span>
</span><span id="line-243"></span><span class="hs-comment">--</span><span>
</span><span id="line-244"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HasHaddock"><span class="hs-identifier hs-type">HasHaddock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.html#HsModule"><span class="hs-identifier hs-type">HsModule</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-245"></span><span>  </span><span id="local-6989586621681797233"><span class="annot"><span class="annottext">addHaddock :: Located (HsModule GhcPs) -&gt; HdkA (Located (HsModule GhcPs))
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var hs-var hs-var hs-var">addHaddock</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681797234"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681797234"><span class="hs-identifier hs-var">l_mod</span></a></span></span><span> </span><span id="local-6989586621681797235"><span class="annot"><span class="annottext">HsModule GhcPs
</span><a href="#local-6989586621681797235"><span class="hs-identifier hs-var">mod</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-246"></span><span>    </span><span class="hs-comment">-- Step 1, get the module header documentation comment:</span><span>
</span><span id="line-247"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-248"></span><span>    </span><span class="hs-comment">--    -- | Module header comment</span><span>
</span><span id="line-249"></span><span>    </span><span class="hs-comment">--    module M where</span><span>
</span><span id="line-250"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-251"></span><span>    </span><span class="hs-comment">-- Only do this when the module header exists.</span><span>
</span><span id="line-252"></span><span>    </span><span id="local-6989586621681797236"><span class="annot"><span class="annottext">Maybe (Maybe (LHsDoc GhcPs))
</span><a href="#local-6989586621681797236"><span class="hs-identifier hs-var">headerDocs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-253"></span><span>      </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f (t b)
</span><a href="../../base-4.18.3.0/src/Data.Traversable.html#for/Data.Traversable.html#for"><span class="hs-identifier hs-var">for</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsModule GhcPs -&gt; Maybe (XRec GhcPs ModuleName)
forall p. HsModule p -&gt; Maybe (XRec p ModuleName)
</span><a href="Language.Haskell.Syntax.html#hsmodName"><span class="hs-identifier hs-var">hsmodName</span></a></span><span> </span><span class="annot"><span class="annottext">HsModule GhcPs
</span><a href="#local-6989586621681797235"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((GenLocated SrcSpanAnnA ModuleName -&gt; HdkA (Maybe (LHsDoc GhcPs)))
 -&gt; HdkA (Maybe (Maybe (LHsDoc GhcPs))))
-&gt; (GenLocated SrcSpanAnnA ModuleName
    -&gt; HdkA (Maybe (LHsDoc GhcPs)))
-&gt; HdkA (Maybe (Maybe (LHsDoc GhcPs)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681797239"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797239"><span class="hs-identifier hs-var">l_name</span></a></span></span><span> </span><span class="annot"><span class="annottext">ModuleName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-254"></span><span>      </span><span class="annot"><span class="annottext">SrcSpan
-&gt; HdkA (Maybe (LHsDoc GhcPs)) -&gt; HdkA (Maybe (LHsDoc GhcPs))
forall a. SrcSpan -&gt; HdkA a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#extendHdkA"><span class="hs-identifier hs-var">extendHdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. SrcSpanAnn' a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797239"><span class="hs-identifier hs-var">l_name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(HdkA (Maybe (LHsDoc GhcPs)) -&gt; HdkA (Maybe (LHsDoc GhcPs)))
-&gt; HdkA (Maybe (LHsDoc GhcPs)) -&gt; HdkA (Maybe (LHsDoc GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">HdkM (Maybe (LHsDoc GhcPs)) -&gt; HdkA (Maybe (LHsDoc GhcPs))
forall a. HdkM a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#liftHdkA"><span class="hs-identifier hs-var">liftHdkA</span></a></span><span> </span><span class="annot"><span class="annottext">(HdkM (Maybe (LHsDoc GhcPs)) -&gt; HdkA (Maybe (LHsDoc GhcPs)))
-&gt; HdkM (Maybe (LHsDoc GhcPs)) -&gt; HdkA (Maybe (LHsDoc GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-255"></span><span>        </span><span class="hs-comment">-- todo: register keyword location of 'module', see Note [Register keyword location]</span><span>
</span><span id="line-256"></span><span>        </span><span id="local-6989586621681797243"><span class="annot"><span class="annottext">[GenLocated SrcSpan HsDocString]
</span><a href="#local-6989586621681797243"><span class="hs-identifier hs-var">docs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-257"></span><span>          </span><span class="annot"><span class="annottext">LocRange
-&gt; HdkM [GenLocated SrcSpan HsDocString]
-&gt; HdkM [GenLocated SrcSpan HsDocString]
forall a. LocRange -&gt; HdkM a -&gt; HdkM a
</span><a href="GHC.Parser.PostProcess.Haddock.html#inLocRange"><span class="hs-identifier hs-var">inLocRange</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe BufPos -&gt; LocRange
</span><a href="GHC.Parser.PostProcess.Haddock.html#locRangeTo"><span class="hs-identifier hs-var">locRangeTo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcLoc -&gt; Maybe BufPos
</span><a href="GHC.Types.SrcLoc.html#getBufPos"><span class="hs-identifier hs-var">getBufPos</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcLoc
</span><a href="GHC.Types.SrcLoc.html#srcSpanStart"><span class="hs-identifier hs-var">srcSpanStart</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. SrcSpanAnn' a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797239"><span class="hs-identifier hs-var">l_name</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(HdkM [GenLocated SrcSpan HsDocString]
 -&gt; HdkM [GenLocated SrcSpan HsDocString])
-&gt; HdkM [GenLocated SrcSpan HsDocString]
-&gt; HdkM [GenLocated SrcSpan HsDocString]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-258"></span><span>          </span><span class="annot"><span class="annottext">(PsLocated HdkComment -&gt; Maybe (GenLocated SrcSpan HsDocString))
-&gt; HdkM [GenLocated SrcSpan HsDocString]
forall a. (PsLocated HdkComment -&gt; Maybe a) -&gt; HdkM [a]
</span><a href="GHC.Parser.PostProcess.Haddock.html#takeHdkComments"><span class="hs-identifier hs-var">takeHdkComments</span></a></span><span> </span><span class="annot"><span class="annottext">PsLocated HdkComment -&gt; Maybe (GenLocated SrcSpan HsDocString)
</span><a href="GHC.Parser.PostProcess.Haddock.html#mkDocNext"><span class="hs-identifier hs-var">mkDocNext</span></a></span><span>
</span><span id="line-259"></span><span>        </span><span id="local-6989586621681797250"><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan HsDocString)
</span><a href="#local-6989586621681797250"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan HsDocString]
-&gt; HdkM (Maybe (GenLocated SrcSpan HsDocString))
</span><a href="GHC.Parser.PostProcess.Haddock.html#selectDocString"><span class="hs-identifier hs-var">selectDocString</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan HsDocString]
</span><a href="#local-6989586621681797243"><span class="hs-identifier hs-var">docs</span></a></span><span>
</span><span id="line-260"></span><span>        </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan HsDocString -&gt; LHsDoc GhcPs
</span><a href="GHC.Parser.PostProcess.Haddock.html#lexLHsDocString"><span class="hs-identifier hs-var">lexLHsDocString</span></a></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpan HsDocString -&gt; LHsDoc GhcPs)
-&gt; Maybe (GenLocated SrcSpan HsDocString) -&gt; Maybe (LHsDoc GhcPs)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/Data.Functor.html#%3C%24%3E/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan HsDocString)
</span><a href="#local-6989586621681797250"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-261"></span><span>
</span><span id="line-262"></span><span>    </span><span class="hs-comment">-- Step 2, process documentation comments in the export list:</span><span>
</span><span id="line-263"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-264"></span><span>    </span><span class="hs-comment">--  module M (</span><span>
</span><span id="line-265"></span><span>    </span><span class="hs-comment">--        -- * Export list comment</span><span>
</span><span id="line-266"></span><span>    </span><span class="hs-comment">--        Item1,</span><span>
</span><span id="line-267"></span><span>    </span><span class="hs-comment">--        Item2,</span><span>
</span><span id="line-268"></span><span>    </span><span class="hs-comment">--        -- * Export list comment</span><span>
</span><span id="line-269"></span><span>    </span><span class="hs-comment">--        item3,</span><span>
</span><span id="line-270"></span><span>    </span><span class="hs-comment">--        item4</span><span>
</span><span id="line-271"></span><span>    </span><span class="hs-comment">--    ) where</span><span>
</span><span id="line-272"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-273"></span><span>    </span><span class="hs-comment">-- Only do this when the export list exists.</span><span>
</span><span id="line-274"></span><span>    </span><span id="local-6989586621681797254"><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpanAnnL [GenLocated SrcSpanAnnA (IE GhcPs)])
</span><a href="#local-6989586621681797254"><span class="hs-identifier hs-var">hsmodExports'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../../base-4.18.3.0/src/Data.Traversable.html#traverse/Data.Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnL [GenLocated SrcSpanAnnA (IE GhcPs)]
-&gt; HdkA
     (GenLocated SrcSpanAnnL [GenLocated SrcSpanAnnA (IE GhcPs)])
forall a. HasHaddock a =&gt; a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsModule GhcPs -&gt; Maybe (XRec GhcPs [LIE GhcPs])
forall p. HsModule p -&gt; Maybe (XRec p [LIE p])
</span><a href="Language.Haskell.Syntax.html#hsmodExports"><span class="hs-identifier hs-var">hsmodExports</span></a></span><span> </span><span class="annot"><span class="annottext">HsModule GhcPs
</span><a href="#local-6989586621681797235"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-275"></span><span>
</span><span id="line-276"></span><span>    </span><span class="hs-comment">-- Step 3, register the import section to reject invalid comments:</span><span>
</span><span id="line-277"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-278"></span><span>    </span><span class="hs-comment">--   import Data.Maybe</span><span>
</span><span id="line-279"></span><span>    </span><span class="hs-comment">--   -- | rejected comment (cannot appear here)</span><span>
</span><span id="line-280"></span><span>    </span><span class="hs-comment">--   import Data.Bool</span><span>
</span><span id="line-281"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-282"></span><span>    </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (ImportDecl GhcPs) -&gt; HdkA ())
-&gt; [GenLocated SrcSpanAnnA (ImportDecl GhcPs)] -&gt; HdkA ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f ()
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#traverse_/Data.Foldable.html#traverse_"><span class="hs-identifier hs-var">traverse_</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (ImportDecl GhcPs) -&gt; HdkA ()
forall a e. GenLocated (SrcSpanAnn' a) e -&gt; HdkA ()
</span><a href="GHC.Parser.PostProcess.Haddock.html#registerHdkA"><span class="hs-identifier hs-var">registerHdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsModule GhcPs -&gt; [LImportDecl GhcPs]
forall p. HsModule p -&gt; [LImportDecl p]
</span><a href="Language.Haskell.Syntax.html#hsmodImports"><span class="hs-identifier hs-var">hsmodImports</span></a></span><span> </span><span class="annot"><span class="annottext">HsModule GhcPs
</span><a href="#local-6989586621681797235"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-283"></span><span>
</span><span id="line-284"></span><span>    </span><span class="hs-comment">-- Step 4, process declarations:</span><span>
</span><span id="line-285"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-286"></span><span>    </span><span class="hs-comment">--    module M where</span><span>
</span><span id="line-287"></span><span>    </span><span class="hs-comment">--      -- | Comment on D</span><span>
</span><span id="line-288"></span><span>    </span><span class="hs-comment">--      data D = MkD  -- ^ Comment on MkD</span><span>
</span><span id="line-289"></span><span>    </span><span class="hs-comment">--      data C = MkC  -- ^ Comment on MkC</span><span>
</span><span id="line-290"></span><span>    </span><span class="hs-comment">--      -- ^ Comment on C</span><span>
</span><span id="line-291"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-292"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681797259"><span class="annot"><span class="annottext">layout_info :: LayoutInfo GhcPs
</span><a href="#local-6989586621681797259"><span class="hs-identifier hs-var hs-var">layout_info</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XModulePs -&gt; LayoutInfo GhcPs
</span><a href="GHC.Hs.html#hsmodLayout"><span class="hs-identifier hs-var">hsmodLayout</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsModule GhcPs -&gt; XCModule GhcPs
forall p. HsModule p -&gt; XCModule p
</span><a href="Language.Haskell.Syntax.html#hsmodExt"><span class="hs-identifier hs-var">hsmodExt</span></a></span><span> </span><span class="annot"><span class="annottext">HsModule GhcPs
</span><a href="#local-6989586621681797235"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-293"></span><span>    </span><span id="local-6989586621681797262"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsDecl GhcPs)]
</span><a href="#local-6989586621681797262"><span class="hs-identifier hs-var">hsmodDecls'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LayoutInfo GhcPs
-&gt; (PsLocated HdkComment
    -&gt; Maybe (GenLocated SrcSpanAnnA (HsDecl GhcPs)))
-&gt; [GenLocated SrcSpanAnnA (HsDecl GhcPs)]
-&gt; HdkA [GenLocated SrcSpanAnnA (HsDecl GhcPs)]
forall a.
HasHaddock a =&gt;
LayoutInfo GhcPs
-&gt; (PsLocated HdkComment -&gt; Maybe a) -&gt; [a] -&gt; HdkA [a]
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddockInterleaveItems"><span class="hs-identifier hs-var">addHaddockInterleaveItems</span></a></span><span> </span><span class="annot"><span class="annottext">LayoutInfo GhcPs
</span><a href="#local-6989586621681797259"><span class="hs-identifier hs-var">layout_info</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LayoutInfo GhcPs -&gt; PsLocated HdkComment -&gt; Maybe (LHsDecl GhcPs)
</span><a href="GHC.Parser.PostProcess.Haddock.html#mkDocHsDecl"><span class="hs-identifier hs-var">mkDocHsDecl</span></a></span><span> </span><span class="annot"><span class="annottext">LayoutInfo GhcPs
</span><a href="#local-6989586621681797259"><span class="hs-identifier hs-var">layout_info</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsModule GhcPs -&gt; [LHsDecl GhcPs]
forall p. HsModule p -&gt; [LHsDecl p]
</span><a href="Language.Haskell.Syntax.html#hsmodDecls"><span class="hs-identifier hs-var">hsmodDecls</span></a></span><span> </span><span class="annot"><span class="annottext">HsModule GhcPs
</span><a href="#local-6989586621681797235"><span class="hs-identifier hs-var">mod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-294"></span><span>
</span><span id="line-295"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; HsModule GhcPs -&gt; Located (HsModule GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681797234"><span class="hs-identifier hs-var">l_mod</span></a></span><span> </span><span class="annot"><span class="annottext">(HsModule GhcPs -&gt; Located (HsModule GhcPs))
-&gt; HsModule GhcPs -&gt; Located (HsModule GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-296"></span><span>      </span><span class="annot"><span class="annottext">HsModule GhcPs
</span><a href="#local-6989586621681797235"><span class="hs-identifier hs-var">mod</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.html#hsmodExports"><span class="hs-identifier hs-var">hsmodExports</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621681797254"><span class="hs-identifier hs-type">hsmodExports'</span></a></span><span>
</span><span id="line-297"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.html#hsmodDecls"><span class="hs-identifier hs-var">hsmodDecls</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621681797262"><span class="hs-identifier hs-type">hsmodDecls'</span></a></span><span>
</span><span id="line-298"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.html#hsmodExt"><span class="hs-identifier hs-var">hsmodExt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.html#hsmodExt"><span class="hs-identifier hs-var">hsmodExt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681797235"><span class="hs-identifier hs-type">mod</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">{</span><span>&#160;</span><span class="annot"><a href="GHC.Hs.html#hsmodHaddockModHeader"><span class="hs-identifier hs-var">hsmodHaddockModHeader</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#join/GHC.Base.html#join"><span class="hs-identifier hs-type">join</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681797236"><span class="hs-identifier hs-type">headerDocs</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-299"></span><span>
</span><span id="line-300"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#lexHsDocString"><span class="hs-identifier hs-type">lexHsDocString</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Hs.DocString.html#HsDocString"><span class="hs-identifier hs-type">HsDocString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Doc.html#HsDoc"><span class="hs-identifier hs-type">HsDoc</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-301"></span><span id="lexHsDocString"><span class="annot"><span class="annottext">lexHsDocString :: HsDocString -&gt; HsDoc GhcPs
</span><a href="GHC.Parser.PostProcess.Haddock.html#lexHsDocString"><span class="hs-identifier hs-var hs-var">lexHsDocString</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">P (LocatedN RdrName) -&gt; HsDocString -&gt; HsDoc GhcPs
</span><a href="GHC.Parser.HaddockLex.html#lexHsDoc"><span class="hs-identifier hs-var">lexHsDoc</span></a></span><span> </span><span class="annot"><span class="annottext">P (LocatedN RdrName)
</span><a href="GHC.Parser.html#parseIdentifier"><span class="hs-identifier hs-var">parseIdentifier</span></a></span><span>
</span><span id="line-302"></span><span>
</span><span id="line-303"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#lexLHsDocString"><span class="hs-identifier hs-type">lexLHsDocString</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.DocString.html#HsDocString"><span class="hs-identifier hs-type">HsDocString</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Hs.Doc.html#LHsDoc"><span class="hs-identifier hs-type">LHsDoc</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-304"></span><span id="lexLHsDocString"><span class="annot"><span class="annottext">lexLHsDocString :: GenLocated SrcSpan HsDocString -&gt; LHsDoc GhcPs
</span><a href="GHC.Parser.PostProcess.Haddock.html#lexLHsDocString"><span class="hs-identifier hs-var hs-var">lexLHsDocString</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HsDocString -&gt; HsDoc GhcPs)
-&gt; GenLocated SrcSpan HsDocString -&gt; LHsDoc GhcPs
forall a b.
(a -&gt; b) -&gt; GenLocated SrcSpan a -&gt; GenLocated SrcSpan b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#fmap/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocString -&gt; HsDoc GhcPs
</span><a href="GHC.Parser.PostProcess.Haddock.html#lexHsDocString"><span class="hs-identifier hs-var">lexHsDocString</span></a></span><span>
</span><span id="line-305"></span><span>
</span><span id="line-306"></span><span class="hs-comment">-- Only for module exports, not module imports.</span><span>
</span><span id="line-307"></span><span class="hs-comment">--</span><span>
</span><span id="line-308"></span><span class="hs-comment">--    module M (a, b, c) where   -- use on this [LIE GhcPs]</span><span>
</span><span id="line-309"></span><span class="hs-comment">--    import I (a, b, c)         -- do not use here!</span><span>
</span><span id="line-310"></span><span class="hs-comment">--</span><span>
</span><span id="line-311"></span><span class="hs-comment">-- Imports cannot have documentation comments anyway.</span><span>
</span><span id="line-312"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HasHaddock"><span class="hs-identifier hs-type">HasHaddock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedL"><span class="hs-identifier hs-type">LocatedL</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.ImpExp.html#IE"><span class="hs-identifier hs-type">IE</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-313"></span><span>  </span><span id="local-6989586621681797275"><span class="annot"><span class="annottext">addHaddock :: GenLocated SrcSpanAnnL [GenLocated SrcSpanAnnA (IE GhcPs)]
-&gt; HdkA
     (GenLocated SrcSpanAnnL [GenLocated SrcSpanAnnA (IE GhcPs)])
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var hs-var hs-var hs-var">addHaddock</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681797276"><span class="annot"><span class="annottext">SrcSpanAnnL
</span><a href="#local-6989586621681797276"><span class="hs-identifier hs-var">l_exports</span></a></span></span><span> </span><span id="local-6989586621681797277"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (IE GhcPs)]
</span><a href="#local-6989586621681797277"><span class="hs-identifier hs-var">exports</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-314"></span><span>    </span><span class="annot"><span class="annottext">SrcSpan
-&gt; HdkA
     (GenLocated SrcSpanAnnL [GenLocated SrcSpanAnnA (IE GhcPs)])
-&gt; HdkA
     (GenLocated SrcSpanAnnL [GenLocated SrcSpanAnnA (IE GhcPs)])
forall a. SrcSpan -&gt; HdkA a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#extendHdkA"><span class="hs-identifier hs-var">extendHdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnL -&gt; SrcSpan
forall a. SrcSpanAnn' a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnL
</span><a href="#local-6989586621681797276"><span class="hs-identifier hs-var">l_exports</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(HdkA (GenLocated SrcSpanAnnL [GenLocated SrcSpanAnnA (IE GhcPs)])
 -&gt; HdkA
      (GenLocated SrcSpanAnnL [GenLocated SrcSpanAnnA (IE GhcPs)]))
-&gt; HdkA
     (GenLocated SrcSpanAnnL [GenLocated SrcSpanAnnA (IE GhcPs)])
-&gt; HdkA
     (GenLocated SrcSpanAnnL [GenLocated SrcSpanAnnA (IE GhcPs)])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-315"></span><span>      </span><span id="local-6989586621681797278"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (IE GhcPs)]
</span><a href="#local-6989586621681797278"><span class="hs-identifier hs-var">exports'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LayoutInfo GhcPs
-&gt; (PsLocated HdkComment
    -&gt; Maybe (GenLocated SrcSpanAnnA (IE GhcPs)))
-&gt; [GenLocated SrcSpanAnnA (IE GhcPs)]
-&gt; HdkA [GenLocated SrcSpanAnnA (IE GhcPs)]
forall a.
HasHaddock a =&gt;
LayoutInfo GhcPs
-&gt; (PsLocated HdkComment -&gt; Maybe a) -&gt; [a] -&gt; HdkA [a]
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddockInterleaveItems"><span class="hs-identifier hs-var">addHaddockInterleaveItems</span></a></span><span> </span><span class="annot"><span class="annottext">LayoutInfo GhcPs
forall pass. LayoutInfo pass
</span><a href="Language.Haskell.Syntax.Concrete.html#NoLayoutInfo"><span class="hs-identifier hs-var">NoLayoutInfo</span></a></span><span> </span><span class="annot"><span class="annottext">PsLocated HdkComment -&gt; Maybe (LIE GhcPs)
PsLocated HdkComment -&gt; Maybe (GenLocated SrcSpanAnnA (IE GhcPs))
</span><a href="GHC.Parser.PostProcess.Haddock.html#mkDocIE"><span class="hs-identifier hs-var">mkDocIE</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (IE GhcPs)]
</span><a href="#local-6989586621681797277"><span class="hs-identifier hs-var">exports</span></a></span><span>
</span><span id="line-316"></span><span>      </span><span class="annot"><span class="annottext">SrcSpan -&gt; HdkA ()
</span><a href="GHC.Parser.PostProcess.Haddock.html#registerLocHdkA"><span class="hs-identifier hs-var">registerLocHdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcLoc -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#srcLocSpan"><span class="hs-identifier hs-var">srcLocSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcLoc
</span><a href="GHC.Types.SrcLoc.html#srcSpanEnd"><span class="hs-identifier hs-var">srcSpanEnd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnL -&gt; SrcSpan
forall a. SrcSpanAnn' a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnL
</span><a href="#local-6989586621681797276"><span class="hs-identifier hs-var">l_exports</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Do not consume comments after the closing parenthesis</span><span>
</span><span id="line-317"></span><span>      </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnL
-&gt; [GenLocated SrcSpanAnnA (IE GhcPs)]
-&gt; GenLocated SrcSpanAnnL [GenLocated SrcSpanAnnA (IE GhcPs)]
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnL
</span><a href="#local-6989586621681797276"><span class="hs-identifier hs-var">l_exports</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (IE GhcPs)]
</span><a href="#local-6989586621681797278"><span class="hs-identifier hs-var">exports'</span></a></span><span>
</span><span id="line-318"></span><span>
</span><span id="line-319"></span><span class="hs-comment">-- Needed to use 'addHaddockInterleaveItems' in 'instance HasHaddock (Located [LIE GhcPs])'.</span><span>
</span><span id="line-320"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HasHaddock"><span class="hs-identifier hs-type">HasHaddock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.ImpExp.html#IE"><span class="hs-identifier hs-type">IE</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-321"></span><span>  </span><span id="local-6989586621681797286"><span class="annot"><span class="annottext">addHaddock :: GenLocated SrcSpanAnnA (IE GhcPs)
-&gt; HdkA (GenLocated SrcSpanAnnA (IE GhcPs))
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var hs-var hs-var hs-var">addHaddock</span></a></span></span><span> </span><span id="local-6989586621681797287"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (IE GhcPs)
</span><a href="#local-6989586621681797287"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (IE GhcPs)
</span><a href="#local-6989586621681797287"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (IE GhcPs)
-&gt; HdkA () -&gt; HdkA (GenLocated SrcSpanAnnA (IE GhcPs))
forall a b. a -&gt; HdkA b -&gt; HdkA a
forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; f b -&gt; f a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%3C%24/GHC.Base.html#%3C%24"><span class="hs-operator hs-var">&lt;$</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (IE GhcPs) -&gt; HdkA ()
forall a e. GenLocated (SrcSpanAnn' a) e -&gt; HdkA ()
</span><a href="GHC.Parser.PostProcess.Haddock.html#registerHdkA"><span class="hs-identifier hs-var">registerHdkA</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (IE GhcPs)
</span><a href="#local-6989586621681797287"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-322"></span><span>
</span><span id="line-323"></span><span class="hs-comment">{- Add Haddock items to a list of non-Haddock items.
Used to process export lists (with mkDocIE) and declarations (with mkDocHsDecl).

For example:

  module M where
    -- | Comment on D
    data D = MkD  -- ^ Comment on MkD
    data C = MkC  -- ^ Comment on MkC
    -- ^ Comment on C

In this case, we should produce four HsDecl items (pseudo-code):

  1. DocD (DocCommentNext &quot;Comment on D&quot;)
  2. TyClD (DataDecl &quot;D&quot; ... [ConDeclH98 &quot;MkD&quot; ... (Just &quot;Comment on MkD&quot;)])
  3. TyClD (DataDecl &quot;C&quot; ... [ConDeclH98 &quot;MkC&quot; ... (Just &quot;Comment on MkC&quot;)])
  4. DocD (DocCommentPrev &quot;Comment on C&quot;)

The inputs to addHaddockInterleaveItems are:

  * layout_info :: LayoutInfo GhcPs

    In the example above, note that the indentation level inside the module is
    2 spaces. It would be represented as layout_info = VirtualBraces 2.

    It is used to delimit the search space for comments when processing
    declarations. Here, we restrict indentation levels to &gt;=(2+1), so that when
    we look up comment on MkC, we get &quot;Comment on MkC&quot; but not &quot;Comment on C&quot;.

  * get_doc_item :: PsLocated HdkComment -&gt; Maybe a

    This is the function used to look up documentation comments.
    In the above example, get_doc_item = mkDocHsDecl layout_info,
    and it will produce the following parts of the output:

      DocD (DocCommentNext &quot;Comment on D&quot;)
      DocD (DocCommentPrev &quot;Comment on C&quot;)

  * The list of items. These are the declarations that will be annotated with
    documentation comments.

    Before processing:
       TyClD (DataDecl &quot;D&quot; ... [ConDeclH98 &quot;MkD&quot; ... Nothing])
       TyClD (DataDecl &quot;C&quot; ... [ConDeclH98 &quot;MkC&quot; ... Nothing])

    After processing:
       TyClD (DataDecl &quot;D&quot; ... [ConDeclH98 &quot;MkD&quot; ... (Just &quot;Comment on MkD&quot;)])
       TyClD (DataDecl &quot;C&quot; ... [ConDeclH98 &quot;MkC&quot; ... (Just &quot;Comment on MkC&quot;)])
-}</span><span>
</span><span id="line-372"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#addHaddockInterleaveItems"><span class="hs-identifier hs-type">addHaddockInterleaveItems</span></a></span><span>
</span><span id="line-373"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621681796734"><span class="annot"><a href="#local-6989586621681796734"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-374"></span><span>     </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HasHaddock"><span class="hs-identifier hs-type">HasHaddock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681796734"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-375"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Concrete.html#LayoutInfo"><span class="hs-identifier hs-type">LayoutInfo</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-376"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#PsLocated"><span class="hs-identifier hs-type">PsLocated</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#HdkComment"><span class="hs-identifier hs-type">HdkComment</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681796734"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Get a documentation item</span><span>
</span><span id="line-377"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621681796734"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span>           </span><span class="hs-comment">-- Unprocessed (non-documentation) items</span><span>
</span><span id="line-378"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkA"><span class="hs-identifier hs-type">HdkA</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621681796734"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span>      </span><span class="hs-comment">-- Documentation items &amp; processed non-documentation items</span><span>
</span><span id="line-379"></span><span id="addHaddockInterleaveItems"><span class="annot"><span class="annottext">addHaddockInterleaveItems :: forall a.
HasHaddock a =&gt;
LayoutInfo GhcPs
-&gt; (PsLocated HdkComment -&gt; Maybe a) -&gt; [a] -&gt; HdkA [a]
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddockInterleaveItems"><span class="hs-identifier hs-var hs-var">addHaddockInterleaveItems</span></a></span></span><span> </span><span id="local-6989586621681797298"><span class="annot"><span class="annottext">LayoutInfo GhcPs
</span><a href="#local-6989586621681797298"><span class="hs-identifier hs-var">layout_info</span></a></span></span><span> </span><span id="local-6989586621681797299"><span class="annot"><span class="annottext">PsLocated HdkComment -&gt; Maybe a
</span><a href="#local-6989586621681797299"><span class="hs-identifier hs-var">get_doc_item</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; HdkA [a]
</span><a href="#local-6989586621681797300"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-380"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-381"></span><span>    </span><span class="annot"><a href="#local-6989586621681797300"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621681796734"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkA"><span class="hs-identifier hs-type">HdkA</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621681796734"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-382"></span><span>    </span><span id="local-6989586621681797300"><span class="annot"><span class="annottext">go :: [a] -&gt; HdkA [a]
</span><a href="#local-6989586621681797300"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HdkM [a] -&gt; HdkA [a]
forall a. HdkM a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#liftHdkA"><span class="hs-identifier hs-var">liftHdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(PsLocated HdkComment -&gt; Maybe a) -&gt; HdkM [a]
forall a. (PsLocated HdkComment -&gt; Maybe a) -&gt; HdkM [a]
</span><a href="GHC.Parser.PostProcess.Haddock.html#takeHdkComments"><span class="hs-identifier hs-var">takeHdkComments</span></a></span><span> </span><span class="annot"><span class="annottext">PsLocated HdkComment -&gt; Maybe a
</span><a href="#local-6989586621681797299"><span class="hs-identifier hs-var">get_doc_item</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-383"></span><span>    </span><span class="annot"><a href="#local-6989586621681797300"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681797301"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681797301"><span class="hs-identifier hs-var">item</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681797302"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681797302"><span class="hs-identifier hs-var">items</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-384"></span><span>      </span><span id="local-6989586621681797303"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681797303"><span class="hs-identifier hs-var">docItems</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HdkM [a] -&gt; HdkA [a]
forall a. HdkM a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#liftHdkA"><span class="hs-identifier hs-var">liftHdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(PsLocated HdkComment -&gt; Maybe a) -&gt; HdkM [a]
forall a. (PsLocated HdkComment -&gt; Maybe a) -&gt; HdkM [a]
</span><a href="GHC.Parser.PostProcess.Haddock.html#takeHdkComments"><span class="hs-identifier hs-var">takeHdkComments</span></a></span><span> </span><span class="annot"><span class="annottext">PsLocated HdkComment -&gt; Maybe a
</span><a href="#local-6989586621681797299"><span class="hs-identifier hs-var">get_doc_item</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-385"></span><span>      </span><span id="local-6989586621681797304"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681797304"><span class="hs-identifier hs-var">item'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HdkA a -&gt; HdkA a
</span><a href="#local-6989586621681797305"><span class="hs-identifier hs-var">with_layout_info</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; HdkA a
forall a. HasHaddock a =&gt; a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681797301"><span class="hs-identifier hs-var">item</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-386"></span><span>      </span><span id="local-6989586621681797306"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681797306"><span class="hs-identifier hs-var">other_items</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; HdkA [a]
</span><a href="#local-6989586621681797300"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681797302"><span class="hs-identifier hs-var">items</span></a></span><span>
</span><span id="line-387"></span><span>      </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681797303"><span class="hs-identifier hs-var">docItems</span></a></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; [a] -&gt; [a]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681797304"><span class="hs-identifier hs-var">item'</span></a></span><span class="annot"><span class="annottext">a -&gt; [a] -&gt; [a]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681797306"><span class="hs-identifier hs-var">other_items</span></a></span><span>
</span><span id="line-388"></span><span>
</span><span id="line-389"></span><span>    </span><span class="annot"><a href="#local-6989586621681797305"><span class="hs-identifier hs-type">with_layout_info</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkA"><span class="hs-identifier hs-type">HdkA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681796734"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkA"><span class="hs-identifier hs-type">HdkA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681796734"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-390"></span><span>    </span><span id="local-6989586621681797305"><span class="annot"><span class="annottext">with_layout_info :: HdkA a -&gt; HdkA a
</span><a href="#local-6989586621681797305"><span class="hs-identifier hs-var hs-var">with_layout_info</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LayoutInfo GhcPs
</span><a href="#local-6989586621681797298"><span class="hs-identifier hs-var">layout_info</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-391"></span><span>      </span><span class="annot"><span class="annottext">LayoutInfo GhcPs
</span><a href="Language.Haskell.Syntax.Concrete.html#NoLayoutInfo"><span class="hs-identifier hs-var">NoLayoutInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HdkA a -&gt; HdkA a
forall a. a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#id/GHC.Base.html#id"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-392"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Concrete.html#ExplicitBraces"><span class="hs-identifier hs-type">ExplicitBraces</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HdkA a -&gt; HdkA a
forall a. a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#id/GHC.Base.html#id"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-393"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Concrete.html#VirtualBraces"><span class="hs-identifier hs-type">VirtualBraces</span></a></span><span> </span><span id="local-6989586621681797310"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681797310"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-394"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681797311"><span class="annot"><span class="annottext">loc_range :: LocRange
</span><a href="#local-6989586621681797311"><span class="hs-identifier hs-var hs-var">loc_range</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocRange
forall a. Monoid a =&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mempty/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#loc_range_col"><span class="hs-identifier hs-var">loc_range_col</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#ColumnFrom"><span class="hs-identifier hs-type">ColumnFrom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681797310"><span class="hs-identifier hs-type">n</span></a></span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Num.html#%2B/GHC.Num.html#%2B"><span class="hs-operator hs-type">+</span></a></span><span class="annot"><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-395"></span><span>        </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(HdkM a -&gt; HdkM a) -&gt; HdkA a -&gt; HdkA a
forall a b. (HdkM a -&gt; HdkM b) -&gt; HdkA a -&gt; HdkA b
</span><a href="GHC.Parser.PostProcess.Haddock.html#hoistHdkA"><span class="hs-identifier hs-var">hoistHdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocRange -&gt; HdkM a -&gt; HdkM a
forall a. LocRange -&gt; HdkM a -&gt; HdkM a
</span><a href="GHC.Parser.PostProcess.Haddock.html#inLocRange"><span class="hs-identifier hs-var">inLocRange</span></a></span><span> </span><span class="annot"><span class="annottext">LocRange
</span><a href="#local-6989586621681797311"><span class="hs-identifier hs-var">loc_range</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-396"></span><span>
</span><span id="line-397"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HasHaddock"><span class="hs-identifier hs-type">HasHaddock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsDecl"><span class="hs-identifier hs-type">HsDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-398"></span><span>  </span><span id="local-6989586621681797322"><span class="annot"><span class="annottext">addHaddock :: GenLocated SrcSpanAnnA (HsDecl GhcPs)
-&gt; HdkA (GenLocated SrcSpanAnnA (HsDecl GhcPs))
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var hs-var hs-var hs-var">addHaddock</span></a></span></span><span> </span><span id="local-6989586621681797323"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsDecl GhcPs)
</span><a href="#local-6989586621681797323"><span class="hs-identifier hs-var">ldecl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-399"></span><span>    </span><span class="annot"><span class="annottext">SrcSpan
-&gt; HdkA (GenLocated SrcSpanAnnA (HsDecl GhcPs))
-&gt; HdkA (GenLocated SrcSpanAnnA (HsDecl GhcPs))
forall a. SrcSpan -&gt; HdkA a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#extendHdkA"><span class="hs-identifier hs-var">extendHdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsDecl GhcPs) -&gt; SrcSpan
forall a e. GenLocated (SrcSpanAnn' a) e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsDecl GhcPs)
</span><a href="#local-6989586621681797323"><span class="hs-identifier hs-var">ldecl</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(HdkA (GenLocated SrcSpanAnnA (HsDecl GhcPs))
 -&gt; HdkA (GenLocated SrcSpanAnnA (HsDecl GhcPs)))
-&gt; HdkA (GenLocated SrcSpanAnnA (HsDecl GhcPs))
-&gt; HdkA (GenLocated SrcSpanAnnA (HsDecl GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-400"></span><span>    </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../../base-4.18.3.0/src/Data.Traversable.html#traverse/Data.Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="annot"><span class="annottext">HsDecl GhcPs -&gt; HdkA (HsDecl GhcPs)
forall a. HasHaddock a =&gt; a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsDecl GhcPs)
</span><a href="#local-6989586621681797323"><span class="hs-identifier hs-var">ldecl</span></a></span><span>
</span><span id="line-401"></span><span>
</span><span id="line-402"></span><span class="hs-comment">-- Process documentation comments *inside* a declaration, for example:</span><span>
</span><span id="line-403"></span><span class="hs-comment">--</span><span>
</span><span id="line-404"></span><span class="hs-comment">--    data T = MkT -- ^ Comment on MkT (inside DataDecl)</span><span>
</span><span id="line-405"></span><span class="hs-comment">--    f, g</span><span>
</span><span id="line-406"></span><span class="hs-comment">--      :: Int  -- ^ Comment on Int   (inside TypeSig)</span><span>
</span><span id="line-407"></span><span class="hs-comment">--      -&gt; Bool -- ^ Comment on Bool  (inside TypeSig)</span><span>
</span><span id="line-408"></span><span class="hs-comment">--</span><span>
</span><span id="line-409"></span><span class="hs-comment">-- Comments that relate to the entire declaration are processed elsewhere:</span><span>
</span><span id="line-410"></span><span class="hs-comment">--</span><span>
</span><span id="line-411"></span><span class="hs-comment">--    -- | Comment on T (not processed in this instance)</span><span>
</span><span id="line-412"></span><span class="hs-comment">--    data T = MkT</span><span>
</span><span id="line-413"></span><span class="hs-comment">--</span><span>
</span><span id="line-414"></span><span class="hs-comment">--    -- | Comment on f, g (not processed in this instance)</span><span>
</span><span id="line-415"></span><span class="hs-comment">--    f, g :: Int -&gt; Bool</span><span>
</span><span id="line-416"></span><span class="hs-comment">--    f = ...</span><span>
</span><span id="line-417"></span><span class="hs-comment">--    g = ...</span><span>
</span><span id="line-418"></span><span class="hs-comment">--</span><span>
</span><span id="line-419"></span><span class="hs-comment">-- Such comments are inserted into the syntax tree as DocD declarations</span><span>
</span><span id="line-420"></span><span class="hs-comment">-- by addHaddockInterleaveItems, and then associated with other declarations</span><span>
</span><span id="line-421"></span><span class="hs-comment">-- in GHC.HsToCore.Docs (see DeclDocMap).</span><span>
</span><span id="line-422"></span><span class="hs-comment">--</span><span>
</span><span id="line-423"></span><span class="hs-comment">-- In this instance, we only process comments that relate to parts of the</span><span>
</span><span id="line-424"></span><span class="hs-comment">-- declaration, not to the declaration itself.</span><span>
</span><span id="line-425"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HasHaddock"><span class="hs-identifier hs-type">HasHaddock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsDecl"><span class="hs-identifier hs-type">HsDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-426"></span><span>
</span><span id="line-427"></span><span>  </span><span class="hs-comment">-- Type signatures:</span><span>
</span><span id="line-428"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-429"></span><span>  </span><span class="hs-comment">--    f, g</span><span>
</span><span id="line-430"></span><span>  </span><span class="hs-comment">--      :: Int  -- ^ Comment on Int</span><span>
</span><span id="line-431"></span><span>  </span><span class="hs-comment">--      -&gt; Bool -- ^ Comment on Bool</span><span>
</span><span id="line-432"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-433"></span><span>  </span><span id="local-6989586621681797364"><span class="annot"><span class="annottext">addHaddock :: HsDecl GhcPs -&gt; HdkA (HsDecl GhcPs)
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var hs-var hs-var hs-var">addHaddock</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#SigD"><span class="hs-identifier hs-type">SigD</span></a></span><span> </span><span class="annot"><span class="annottext">XSigD GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#TypeSig"><span class="hs-identifier hs-type">TypeSig</span></a></span><span> </span><span id="local-6989586621681797367"><span class="annot"><span class="annottext">XTypeSig GhcPs
</span><a href="#local-6989586621681797367"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681797368"><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621681797368"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span id="local-6989586621681797369"><span class="annot"><span class="annottext">LHsSigWcType GhcPs
</span><a href="#local-6989586621681797369"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-434"></span><span>      </span><span class="annot"><span class="annottext">(LocatedN RdrName -&gt; HdkA ()) -&gt; [LocatedN RdrName] -&gt; HdkA ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f ()
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#traverse_/Data.Foldable.html#traverse_"><span class="hs-identifier hs-var">traverse_</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; HdkA ()
forall a e. GenLocated (SrcSpanAnn' a) e -&gt; HdkA ()
</span><a href="GHC.Parser.PostProcess.Haddock.html#registerHdkA"><span class="hs-identifier hs-var">registerHdkA</span></a></span><span> </span><span class="annot"><span class="annottext">[LIdP GhcPs]
[LocatedN RdrName]
</span><a href="#local-6989586621681797368"><span class="hs-identifier hs-var">names</span></a></span><span>
</span><span id="line-435"></span><span>      </span><span id="local-6989586621681797370"><span class="annot"><span class="annottext">HsWildCardBndrs GhcPs (GenLocated SrcSpanAnnA (HsSigType GhcPs))
</span><a href="#local-6989586621681797370"><span class="hs-identifier hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsWildCardBndrs GhcPs (GenLocated SrcSpanAnnA (HsSigType GhcPs))
-&gt; HdkA
     (HsWildCardBndrs GhcPs (GenLocated SrcSpanAnnA (HsSigType GhcPs)))
forall a. HasHaddock a =&gt; a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigWcType GhcPs
HsWildCardBndrs GhcPs (GenLocated SrcSpanAnnA (HsSigType GhcPs))
</span><a href="#local-6989586621681797369"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-436"></span><span>      </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XSigD GhcPs -&gt; Sig GhcPs -&gt; HsDecl GhcPs
forall p. XSigD p -&gt; Sig p -&gt; HsDecl p
</span><a href="Language.Haskell.Syntax.Decls.html#SigD"><span class="hs-identifier hs-var">SigD</span></a></span><span> </span><span class="annot"><span class="annottext">XSigD GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XTypeSig GhcPs -&gt; [LIdP GhcPs] -&gt; LHsSigWcType GhcPs -&gt; Sig GhcPs
forall pass.
XTypeSig pass -&gt; [LIdP pass] -&gt; LHsSigWcType pass -&gt; Sig pass
</span><a href="Language.Haskell.Syntax.Binds.html#TypeSig"><span class="hs-identifier hs-var">TypeSig</span></a></span><span> </span><span class="annot"><span class="annottext">XTypeSig GhcPs
</span><a href="#local-6989586621681797367"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621681797368"><span class="hs-identifier hs-var">names</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigWcType GhcPs
HsWildCardBndrs GhcPs (GenLocated SrcSpanAnnA (HsSigType GhcPs))
</span><a href="#local-6989586621681797370"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-437"></span><span>
</span><span id="line-438"></span><span>  </span><span class="hs-comment">-- Pattern synonym type signatures:</span><span>
</span><span id="line-439"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-440"></span><span>  </span><span class="hs-comment">--    pattern MyPat</span><span>
</span><span id="line-441"></span><span>  </span><span class="hs-comment">--      :: Bool       -- ^ Comment on Bool</span><span>
</span><span id="line-442"></span><span>  </span><span class="hs-comment">--      -&gt; Maybe Bool -- ^ Comment on Maybe Bool</span><span>
</span><span id="line-443"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-444"></span><span>  </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#SigD"><span class="hs-identifier hs-type">SigD</span></a></span><span> </span><span class="annot"><span class="annottext">XSigD GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#PatSynSig"><span class="hs-identifier hs-type">PatSynSig</span></a></span><span> </span><span id="local-6989586621681797373"><span class="annot"><span class="annottext">XPatSynSig GhcPs
</span><a href="#local-6989586621681797373"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681797374"><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621681797374"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span id="local-6989586621681797375"><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621681797375"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-445"></span><span>    </span><span class="annot"><span class="annottext">(LocatedN RdrName -&gt; HdkA ()) -&gt; [LocatedN RdrName] -&gt; HdkA ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f ()
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#traverse_/Data.Foldable.html#traverse_"><span class="hs-identifier hs-var">traverse_</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; HdkA ()
forall a e. GenLocated (SrcSpanAnn' a) e -&gt; HdkA ()
</span><a href="GHC.Parser.PostProcess.Haddock.html#registerHdkA"><span class="hs-identifier hs-var">registerHdkA</span></a></span><span> </span><span class="annot"><span class="annottext">[LIdP GhcPs]
[LocatedN RdrName]
</span><a href="#local-6989586621681797374"><span class="hs-identifier hs-var">names</span></a></span><span>
</span><span id="line-446"></span><span>    </span><span id="local-6989586621681797376"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsSigType GhcPs)
</span><a href="#local-6989586621681797376"><span class="hs-identifier hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsSigType GhcPs)
-&gt; HdkA (GenLocated SrcSpanAnnA (HsSigType GhcPs))
forall a. HasHaddock a =&gt; a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs
GenLocated SrcSpanAnnA (HsSigType GhcPs)
</span><a href="#local-6989586621681797375"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-447"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XSigD GhcPs -&gt; Sig GhcPs -&gt; HsDecl GhcPs
forall p. XSigD p -&gt; Sig p -&gt; HsDecl p
</span><a href="Language.Haskell.Syntax.Decls.html#SigD"><span class="hs-identifier hs-var">SigD</span></a></span><span> </span><span class="annot"><span class="annottext">XSigD GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XPatSynSig GhcPs -&gt; [LIdP GhcPs] -&gt; LHsSigType GhcPs -&gt; Sig GhcPs
forall pass.
XPatSynSig pass -&gt; [LIdP pass] -&gt; LHsSigType pass -&gt; Sig pass
</span><a href="Language.Haskell.Syntax.Binds.html#PatSynSig"><span class="hs-identifier hs-var">PatSynSig</span></a></span><span> </span><span class="annot"><span class="annottext">XPatSynSig GhcPs
</span><a href="#local-6989586621681797373"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621681797374"><span class="hs-identifier hs-var">names</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs
GenLocated SrcSpanAnnA (HsSigType GhcPs)
</span><a href="#local-6989586621681797376"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-448"></span><span>
</span><span id="line-449"></span><span>  </span><span class="hs-comment">-- Class method signatures and default signatures:</span><span>
</span><span id="line-450"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-451"></span><span>  </span><span class="hs-comment">--   class C x where</span><span>
</span><span id="line-452"></span><span>  </span><span class="hs-comment">--      method_of_c</span><span>
</span><span id="line-453"></span><span>  </span><span class="hs-comment">--        :: Maybe x -- ^ Comment on Maybe x</span><span>
</span><span id="line-454"></span><span>  </span><span class="hs-comment">--        -&gt; IO ()   -- ^ Comment on IO ()</span><span>
</span><span id="line-455"></span><span>  </span><span class="hs-comment">--      default method_of_c</span><span>
</span><span id="line-456"></span><span>  </span><span class="hs-comment">--        :: Eq x</span><span>
</span><span id="line-457"></span><span>  </span><span class="hs-comment">--        =&gt; Maybe x -- ^ Comment on Maybe x</span><span>
</span><span id="line-458"></span><span>  </span><span class="hs-comment">--        -&gt; IO ()   -- ^ Comment on IO ()</span><span>
</span><span id="line-459"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-460"></span><span>  </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#SigD"><span class="hs-identifier hs-type">SigD</span></a></span><span> </span><span class="annot"><span class="annottext">XSigD GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#ClassOpSig"><span class="hs-identifier hs-type">ClassOpSig</span></a></span><span> </span><span id="local-6989586621681797378"><span class="annot"><span class="annottext">XClassOpSig GhcPs
</span><a href="#local-6989586621681797378"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681797379"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681797379"><span class="hs-identifier hs-var">is_dflt</span></a></span></span><span> </span><span id="local-6989586621681797380"><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621681797380"><span class="hs-identifier hs-var">names</span></a></span></span><span> </span><span id="local-6989586621681797381"><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621681797381"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-461"></span><span>    </span><span class="annot"><span class="annottext">(LocatedN RdrName -&gt; HdkA ()) -&gt; [LocatedN RdrName] -&gt; HdkA ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f ()
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#traverse_/Data.Foldable.html#traverse_"><span class="hs-identifier hs-var">traverse_</span></a></span><span> </span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; HdkA ()
forall a e. GenLocated (SrcSpanAnn' a) e -&gt; HdkA ()
</span><a href="GHC.Parser.PostProcess.Haddock.html#registerHdkA"><span class="hs-identifier hs-var">registerHdkA</span></a></span><span> </span><span class="annot"><span class="annottext">[LIdP GhcPs]
[LocatedN RdrName]
</span><a href="#local-6989586621681797380"><span class="hs-identifier hs-var">names</span></a></span><span>
</span><span id="line-462"></span><span>    </span><span id="local-6989586621681797382"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsSigType GhcPs)
</span><a href="#local-6989586621681797382"><span class="hs-identifier hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsSigType GhcPs)
-&gt; HdkA (GenLocated SrcSpanAnnA (HsSigType GhcPs))
forall a. HasHaddock a =&gt; a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs
GenLocated SrcSpanAnnA (HsSigType GhcPs)
</span><a href="#local-6989586621681797381"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-463"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XSigD GhcPs -&gt; Sig GhcPs -&gt; HsDecl GhcPs
forall p. XSigD p -&gt; Sig p -&gt; HsDecl p
</span><a href="Language.Haskell.Syntax.Decls.html#SigD"><span class="hs-identifier hs-var">SigD</span></a></span><span> </span><span class="annot"><span class="annottext">XSigD GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XClassOpSig GhcPs
-&gt; Bool -&gt; [LIdP GhcPs] -&gt; LHsSigType GhcPs -&gt; Sig GhcPs
forall pass.
XClassOpSig pass
-&gt; Bool -&gt; [LIdP pass] -&gt; LHsSigType pass -&gt; Sig pass
</span><a href="Language.Haskell.Syntax.Binds.html#ClassOpSig"><span class="hs-identifier hs-var">ClassOpSig</span></a></span><span> </span><span class="annot"><span class="annottext">XClassOpSig GhcPs
</span><a href="#local-6989586621681797378"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681797379"><span class="hs-identifier hs-var">is_dflt</span></a></span><span> </span><span class="annot"><span class="annottext">[LIdP GhcPs]
</span><a href="#local-6989586621681797380"><span class="hs-identifier hs-var">names</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs
GenLocated SrcSpanAnnA (HsSigType GhcPs)
</span><a href="#local-6989586621681797382"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-464"></span><span>
</span><span id="line-465"></span><span>  </span><span class="hs-comment">-- Data/newtype declarations:</span><span>
</span><span id="line-466"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-467"></span><span>  </span><span class="hs-comment">--   data T = MkT -- ^ Comment on MkT</span><span>
</span><span id="line-468"></span><span>  </span><span class="hs-comment">--            A   -- ^ Comment on A</span><span>
</span><span id="line-469"></span><span>  </span><span class="hs-comment">--            B   -- ^ Comment on B</span><span>
</span><span id="line-470"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-471"></span><span>  </span><span class="hs-comment">--   data G where</span><span>
</span><span id="line-472"></span><span>  </span><span class="hs-comment">--     -- | Comment on MkG</span><span>
</span><span id="line-473"></span><span>  </span><span class="hs-comment">--     MkG :: A    -- ^ Comment on A</span><span>
</span><span id="line-474"></span><span>  </span><span class="hs-comment">--         -&gt; B    -- ^ Comment on B</span><span>
</span><span id="line-475"></span><span>  </span><span class="hs-comment">--         -&gt; G</span><span>
</span><span id="line-476"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-477"></span><span>  </span><span class="hs-comment">--   newtype N = MkN { getN :: Natural }  -- ^ Comment on N</span><span>
</span><span id="line-478"></span><span>  </span><span class="hs-comment">--     deriving newtype (Eq  {- ^ Comment on Eq  N -})</span><span>
</span><span id="line-479"></span><span>  </span><span class="hs-comment">--     deriving newtype (Ord {- ^ Comment on Ord N -})</span><span>
</span><span id="line-480"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-481"></span><span>  </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyClD"><span class="hs-identifier hs-type">TyClD</span></a></span><span> </span><span id="local-6989586621681797384"><span class="annot"><span class="annottext">XTyClD GhcPs
</span><a href="#local-6989586621681797384"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681797385"><span class="annot"><span class="annottext">TyClDecl GhcPs
</span><a href="#local-6989586621681797385"><span class="hs-identifier hs-var">decl</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-482"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DataDecl"><span class="hs-identifier hs-type">DataDecl</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681797387"><span class="annot"><span class="annottext">XDataDecl GhcPs
tcdDExt :: XDataDecl GhcPs
tcdDExt :: forall pass. TyClDecl pass -&gt; XDataDecl pass
</span><a href="#local-6989586621681797387"><span class="hs-identifier hs-var hs-var">tcdDExt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797389"><span class="annot"><span class="annottext">LIdP GhcPs
tcdLName :: LIdP GhcPs
tcdLName :: forall pass. TyClDecl pass -&gt; LIdP pass
</span><a href="#local-6989586621681797389"><span class="hs-identifier hs-var hs-var">tcdLName</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797391"><span class="annot"><span class="annottext">LHsQTyVars GhcPs
tcdTyVars :: LHsQTyVars GhcPs
tcdTyVars :: forall pass. TyClDecl pass -&gt; LHsQTyVars pass
</span><a href="#local-6989586621681797391"><span class="hs-identifier hs-var hs-var">tcdTyVars</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797393"><span class="annot"><span class="annottext">LexicalFixity
tcdFixity :: LexicalFixity
tcdFixity :: forall pass. TyClDecl pass -&gt; LexicalFixity
</span><a href="#local-6989586621681797393"><span class="hs-identifier hs-var hs-var">tcdFixity</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcdDataDefn :: forall pass. TyClDecl pass -&gt; HsDataDefn pass
</span><a href="Language.Haskell.Syntax.Decls.html#tcdDataDefn"><span class="hs-identifier hs-var">tcdDataDefn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681797396"><span class="annot"><span class="annottext">HsDataDefn GhcPs
</span><a href="#local-6989586621681797396"><span class="hs-identifier hs-var">defn</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TyClDecl GhcPs
</span><a href="#local-6989586621681797385"><span class="hs-identifier hs-var">decl</span></a></span><span>
</span><span id="line-483"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-484"></span><span>        </span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; HdkA ()
forall a e. GenLocated (SrcSpanAnn' a) e -&gt; HdkA ()
</span><a href="GHC.Parser.PostProcess.Haddock.html#registerHdkA"><span class="hs-identifier hs-var">registerHdkA</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
LocatedN RdrName
</span><a href="#local-6989586621681797389"><span class="hs-identifier hs-var">tcdLName</span></a></span><span>
</span><span id="line-485"></span><span>        </span><span id="local-6989586621681797397"><span class="annot"><span class="annottext">HsDataDefn GhcPs
</span><a href="#local-6989586621681797397"><span class="hs-identifier hs-var">defn'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDataDefn GhcPs -&gt; HdkA (HsDataDefn GhcPs)
forall a. HasHaddock a =&gt; a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="annot"><span class="annottext">HsDataDefn GhcPs
</span><a href="#local-6989586621681797396"><span class="hs-identifier hs-var">defn</span></a></span><span>
</span><span id="line-486"></span><span>        </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-487"></span><span>          </span><span class="annot"><span class="annottext">XTyClD GhcPs -&gt; TyClDecl GhcPs -&gt; HsDecl GhcPs
forall p. XTyClD p -&gt; TyClDecl p -&gt; HsDecl p
</span><a href="Language.Haskell.Syntax.Decls.html#TyClD"><span class="hs-identifier hs-var">TyClD</span></a></span><span> </span><span class="annot"><span class="annottext">XTyClD GhcPs
</span><a href="#local-6989586621681797384"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DataDecl"><span class="hs-identifier hs-type">DataDecl</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-488"></span><span>            </span><span class="annot"><span class="annottext">XDataDecl GhcPs
tcdDExt :: XDataDecl GhcPs
tcdDExt :: XDataDecl GhcPs
</span><a href="#local-6989586621681797387"><span class="hs-identifier hs-var hs-var">tcdDExt</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-489"></span><span>            </span><span class="annot"><span class="annottext">LIdP GhcPs
tcdLName :: LIdP GhcPs
tcdLName :: LIdP GhcPs
</span><a href="#local-6989586621681797389"><span class="hs-identifier hs-var hs-var">tcdLName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LHsQTyVars GhcPs
tcdTyVars :: LHsQTyVars GhcPs
tcdTyVars :: LHsQTyVars GhcPs
</span><a href="#local-6989586621681797391"><span class="hs-identifier hs-var hs-var">tcdTyVars</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LexicalFixity
tcdFixity :: LexicalFixity
tcdFixity :: LexicalFixity
</span><a href="#local-6989586621681797393"><span class="hs-identifier hs-var hs-var">tcdFixity</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-490"></span><span>            </span><span class="annot"><span class="annottext">tcdDataDefn :: HsDataDefn GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#tcdDataDefn"><span class="hs-identifier hs-var">tcdDataDefn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsDataDefn GhcPs
</span><a href="#local-6989586621681797397"><span class="hs-identifier hs-var">defn'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-491"></span><span>
</span><span id="line-492"></span><span>  </span><span class="hs-comment">-- Class declarations:</span><span>
</span><span id="line-493"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-494"></span><span>  </span><span class="hs-comment">--  class C a where</span><span>
</span><span id="line-495"></span><span>  </span><span class="hs-comment">--      -- | Comment on the first method</span><span>
</span><span id="line-496"></span><span>  </span><span class="hs-comment">--      first_method :: a -&gt; Bool</span><span>
</span><span id="line-497"></span><span>  </span><span class="hs-comment">--      second_method :: a -&gt; String</span><span>
</span><span id="line-498"></span><span>  </span><span class="hs-comment">--      -- ^ Comment on the second method</span><span>
</span><span id="line-499"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-500"></span><span>  </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyClD"><span class="hs-identifier hs-type">TyClD</span></a></span><span> </span><span class="annot"><span class="annottext">XTyClD GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681797398"><span class="annot"><span class="annottext">TyClDecl GhcPs
</span><a href="#local-6989586621681797398"><span class="hs-identifier hs-var">decl</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-501"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ClassDecl"><span class="hs-identifier hs-type">ClassDecl</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tcdCExt :: forall pass. TyClDecl pass -&gt; XClassDecl pass
</span><a href="Language.Haskell.Syntax.Decls.html#tcdCExt"><span class="hs-identifier hs-var">tcdCExt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681797401"><span class="annot"><span class="annottext">EpAnn [AddEpAnn]
</span><a href="#local-6989586621681797401"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">AnnSortKey
</span><a href="GHC.Parser.Annotation.html#NoAnnSortKey"><span class="hs-identifier hs-var">NoAnnSortKey</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797403"><span class="annot"><span class="annottext">LayoutInfo GhcPs
tcdLayout :: LayoutInfo GhcPs
tcdLayout :: forall pass. TyClDecl pass -&gt; LayoutInfo pass
</span><a href="#local-6989586621681797403"><span class="hs-identifier hs-var hs-var">tcdLayout</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-502"></span><span>                  </span><span id="local-6989586621681797405"><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
tcdCtxt :: Maybe (LHsContext GhcPs)
tcdCtxt :: forall pass. TyClDecl pass -&gt; Maybe (LHsContext pass)
</span><a href="#local-6989586621681797405"><span class="hs-identifier hs-var hs-var">tcdCtxt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797407"><span class="annot"><span class="annottext">LIdP GhcPs
tcdLName :: forall pass. TyClDecl pass -&gt; LIdP pass
tcdLName :: LIdP GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#tcdLName"><span class="hs-identifier hs-var hs-var">tcdLName</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797408"><span class="annot"><span class="annottext">LHsQTyVars GhcPs
tcdTyVars :: forall pass. TyClDecl pass -&gt; LHsQTyVars pass
tcdTyVars :: LHsQTyVars GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#tcdTyVars"><span class="hs-identifier hs-var hs-var">tcdTyVars</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797409"><span class="annot"><span class="annottext">LexicalFixity
tcdFixity :: forall pass. TyClDecl pass -&gt; LexicalFixity
tcdFixity :: LexicalFixity
</span><a href="Language.Haskell.Syntax.Decls.html#tcdFixity"><span class="hs-identifier hs-var hs-var">tcdFixity</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797410"><span class="annot"><span class="annottext">[LHsFunDep GhcPs]
tcdFDs :: [LHsFunDep GhcPs]
tcdFDs :: forall pass. TyClDecl pass -&gt; [LHsFunDep pass]
</span><a href="#local-6989586621681797410"><span class="hs-identifier hs-var hs-var">tcdFDs</span></a></span></span><span class="hs-special">,</span><span>
</span><span id="line-503"></span><span>                  </span><span id="local-6989586621681797412"><span class="annot"><span class="annottext">[LSig GhcPs]
tcdSigs :: [LSig GhcPs]
tcdSigs :: forall pass. TyClDecl pass -&gt; [LSig pass]
</span><a href="#local-6989586621681797412"><span class="hs-identifier hs-var hs-var">tcdSigs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797414"><span class="annot"><span class="annottext">LHsBinds GhcPs
tcdMeths :: LHsBinds GhcPs
tcdMeths :: forall pass. TyClDecl pass -&gt; LHsBinds pass
</span><a href="#local-6989586621681797414"><span class="hs-identifier hs-var hs-var">tcdMeths</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797416"><span class="annot"><span class="annottext">[LFamilyDecl GhcPs]
tcdATs :: [LFamilyDecl GhcPs]
tcdATs :: forall pass. TyClDecl pass -&gt; [LFamilyDecl pass]
</span><a href="#local-6989586621681797416"><span class="hs-identifier hs-var hs-var">tcdATs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797418"><span class="annot"><span class="annottext">[LTyFamDefltDecl GhcPs]
tcdATDefs :: [LTyFamDefltDecl GhcPs]
tcdATDefs :: forall pass. TyClDecl pass -&gt; [LTyFamDefltDecl pass]
</span><a href="#local-6989586621681797418"><span class="hs-identifier hs-var hs-var">tcdATDefs</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TyClDecl GhcPs
</span><a href="#local-6989586621681797398"><span class="hs-identifier hs-var">decl</span></a></span><span>
</span><span id="line-504"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-505"></span><span>        </span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; HdkA ()
forall a e. GenLocated (SrcSpanAnn' a) e -&gt; HdkA ()
</span><a href="GHC.Parser.PostProcess.Haddock.html#registerHdkA"><span class="hs-identifier hs-var">registerHdkA</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
LocatedN RdrName
</span><a href="#local-6989586621681797407"><span class="hs-identifier hs-var">tcdLName</span></a></span><span>
</span><span id="line-506"></span><span>        </span><span class="hs-comment">-- todo: register keyword location of 'where', see Note [Register keyword location]</span><span>
</span><span id="line-507"></span><span>        </span><span id="local-6989586621681797420"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsDecl GhcPs)]
</span><a href="#local-6989586621681797420"><span class="hs-identifier hs-var">where_cls'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-508"></span><span>          </span><span class="annot"><span class="annottext">LayoutInfo GhcPs
-&gt; (PsLocated HdkComment -&gt; Maybe (LHsDecl GhcPs))
-&gt; [LHsDecl GhcPs]
-&gt; HdkA [LHsDecl GhcPs]
forall a.
HasHaddock a =&gt;
LayoutInfo GhcPs
-&gt; (PsLocated HdkComment -&gt; Maybe a) -&gt; [a] -&gt; HdkA [a]
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddockInterleaveItems"><span class="hs-identifier hs-var">addHaddockInterleaveItems</span></a></span><span> </span><span class="annot"><span class="annottext">LayoutInfo GhcPs
</span><a href="#local-6989586621681797403"><span class="hs-identifier hs-var">tcdLayout</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LayoutInfo GhcPs -&gt; PsLocated HdkComment -&gt; Maybe (LHsDecl GhcPs)
</span><a href="GHC.Parser.PostProcess.Haddock.html#mkDocHsDecl"><span class="hs-identifier hs-var">mkDocHsDecl</span></a></span><span> </span><span class="annot"><span class="annottext">LayoutInfo GhcPs
</span><a href="#local-6989586621681797403"><span class="hs-identifier hs-var">tcdLayout</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([LHsDecl GhcPs] -&gt; HdkA [LHsDecl GhcPs])
-&gt; [LHsDecl GhcPs] -&gt; HdkA [LHsDecl GhcPs]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-509"></span><span>          </span><span class="annot"><span class="annottext">(LHsBinds GhcPs, [LSig GhcPs], [LFamilyDecl GhcPs],
 [LTyFamDefltDecl GhcPs], [LDataFamInstDecl GhcPs],
 [LDocDecl GhcPs])
-&gt; [LHsDecl GhcPs]
</span><a href="GHC.Parser.PostProcess.Haddock.html#flattenBindsAndSigs"><span class="hs-identifier hs-var">flattenBindsAndSigs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsBinds GhcPs
</span><a href="#local-6989586621681797414"><span class="hs-identifier hs-var">tcdMeths</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LSig GhcPs]
</span><a href="#local-6989586621681797412"><span class="hs-identifier hs-var">tcdSigs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LFamilyDecl GhcPs]
</span><a href="#local-6989586621681797416"><span class="hs-identifier hs-var">tcdATs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LTyFamDefltDecl GhcPs]
</span><a href="#local-6989586621681797418"><span class="hs-identifier hs-var">tcdATDefs</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-510"></span><span>        </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-511"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681797422"><span class="annot"><span class="annottext">LHsBinds GhcPs
</span><a href="#local-6989586621681797422"><span class="hs-identifier hs-var">tcdMeths'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797423"><span class="annot"><span class="annottext">[LSig GhcPs]
</span><a href="#local-6989586621681797423"><span class="hs-identifier hs-var">tcdSigs'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797424"><span class="annot"><span class="annottext">[LFamilyDecl GhcPs]
</span><a href="#local-6989586621681797424"><span class="hs-identifier hs-var">tcdATs'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797425"><span class="annot"><span class="annottext">[LTyFamDefltDecl GhcPs]
</span><a href="#local-6989586621681797425"><span class="hs-identifier hs-var">tcdATDefs'</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LDataFamInstDecl GhcPs]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797426"><span class="annot"><span class="annottext">[LDocDecl GhcPs]
</span><a href="#local-6989586621681797426"><span class="hs-identifier hs-var">tcdDocs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
-&gt; (LHsBinds GhcPs, [LSig GhcPs], [LFamilyDecl GhcPs],
    [LTyFamDefltDecl GhcPs], [LDataFamInstDecl GhcPs],
    [LDocDecl GhcPs])
</span><a href="GHC.Hs.Decls.html#partitionBindsAndSigs"><span class="hs-identifier hs-var">partitionBindsAndSigs</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsDecl GhcPs]
[GenLocated SrcSpanAnnA (HsDecl GhcPs)]
</span><a href="#local-6989586621681797420"><span class="hs-identifier hs-var">where_cls'</span></a></span><span>
</span><span id="line-512"></span><span>              </span><span id="local-6989586621681797428"><span class="annot"><span class="annottext">decl' :: TyClDecl GhcPs
</span><a href="#local-6989586621681797428"><span class="hs-identifier hs-var hs-var">decl'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ClassDecl"><span class="hs-identifier hs-type">ClassDecl</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tcdCExt :: XClassDecl GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#tcdCExt"><span class="hs-identifier hs-var">tcdCExt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpAnn [AddEpAnn]
</span><a href="#local-6989586621681797401"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">AnnSortKey
</span><a href="GHC.Parser.Annotation.html#NoAnnSortKey"><span class="hs-identifier hs-var">NoAnnSortKey</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LayoutInfo GhcPs
tcdLayout :: LayoutInfo GhcPs
tcdLayout :: LayoutInfo GhcPs
</span><a href="#local-6989586621681797403"><span class="hs-identifier hs-var hs-var">tcdLayout</span></a></span><span>
</span><span id="line-513"></span><span>                                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
tcdCtxt :: Maybe (LHsContext GhcPs)
tcdCtxt :: Maybe (LHsContext GhcPs)
</span><a href="#local-6989586621681797405"><span class="hs-identifier hs-var hs-var">tcdCtxt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
tcdLName :: LIdP GhcPs
tcdLName :: LIdP GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#tcdLName"><span class="hs-identifier hs-var hs-var">tcdLName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LHsQTyVars GhcPs
tcdTyVars :: LHsQTyVars GhcPs
tcdTyVars :: LHsQTyVars GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#tcdTyVars"><span class="hs-identifier hs-var hs-var">tcdTyVars</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LexicalFixity
tcdFixity :: LexicalFixity
tcdFixity :: LexicalFixity
</span><a href="Language.Haskell.Syntax.Decls.html#tcdFixity"><span class="hs-identifier hs-var hs-var">tcdFixity</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LHsFunDep GhcPs]
tcdFDs :: [LHsFunDep GhcPs]
tcdFDs :: [LHsFunDep GhcPs]
</span><a href="#local-6989586621681797410"><span class="hs-identifier hs-var hs-var">tcdFDs</span></a></span><span>
</span><span id="line-514"></span><span>                                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcdSigs :: [LSig GhcPs]
</span><a href="Language.Haskell.Syntax.Decls.html#tcdSigs"><span class="hs-identifier hs-var">tcdSigs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LSig GhcPs]
</span><a href="#local-6989586621681797423"><span class="hs-identifier hs-var">tcdSigs'</span></a></span><span>
</span><span id="line-515"></span><span>                                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcdMeths :: LHsBinds GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#tcdMeths"><span class="hs-identifier hs-var">tcdMeths</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcPs
</span><a href="#local-6989586621681797422"><span class="hs-identifier hs-var">tcdMeths'</span></a></span><span>
</span><span id="line-516"></span><span>                                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcdATs :: [LFamilyDecl GhcPs]
</span><a href="Language.Haskell.Syntax.Decls.html#tcdATs"><span class="hs-identifier hs-var">tcdATs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LFamilyDecl GhcPs]
</span><a href="#local-6989586621681797424"><span class="hs-identifier hs-var">tcdATs'</span></a></span><span>
</span><span id="line-517"></span><span>                                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tcdATDefs :: [LTyFamDefltDecl GhcPs]
</span><a href="Language.Haskell.Syntax.Decls.html#tcdATDefs"><span class="hs-identifier hs-var">tcdATDefs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LTyFamDefltDecl GhcPs]
</span><a href="#local-6989586621681797425"><span class="hs-identifier hs-var">tcdATDefs'</span></a></span><span>
</span><span id="line-518"></span><span>                                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LDocDecl GhcPs]
tcdDocs :: [LDocDecl GhcPs]
tcdDocs :: [LDocDecl GhcPs]
</span><a href="#local-6989586621681797426"><span class="hs-identifier hs-var hs-var">tcdDocs</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-519"></span><span>          </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">XTyClD GhcPs -&gt; TyClDecl GhcPs -&gt; HsDecl GhcPs
forall p. XTyClD p -&gt; TyClDecl p -&gt; HsDecl p
</span><a href="Language.Haskell.Syntax.Decls.html#TyClD"><span class="hs-identifier hs-var">TyClD</span></a></span><span> </span><span class="annot"><span class="annottext">XTyClD GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">TyClDecl GhcPs
</span><a href="#local-6989586621681797428"><span class="hs-identifier hs-var">decl'</span></a></span><span>
</span><span id="line-520"></span><span>
</span><span id="line-521"></span><span>  </span><span class="hs-comment">-- Data family instances:</span><span>
</span><span id="line-522"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-523"></span><span>  </span><span class="hs-comment">--    data instance D Bool where ... (same as data/newtype declarations)</span><span>
</span><span id="line-524"></span><span>  </span><span class="hs-comment">--    data instance D Bool = ...     (same as data/newtype declarations)</span><span>
</span><span id="line-525"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-526"></span><span>  </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#InstD"><span class="hs-identifier hs-type">InstD</span></a></span><span> </span><span class="annot"><span class="annottext">XInstD GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681797431"><span class="annot"><span class="annottext">InstDecl GhcPs
</span><a href="#local-6989586621681797431"><span class="hs-identifier hs-var">decl</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-527"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DataFamInstD"><span class="hs-identifier hs-type">DataFamInstD</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681797433"><span class="annot"><span class="annottext">XDataFamInstD GhcPs
dfid_ext :: XDataFamInstD GhcPs
dfid_ext :: forall pass. InstDecl pass -&gt; XDataFamInstD pass
</span><a href="#local-6989586621681797433"><span class="hs-identifier hs-var hs-var">dfid_ext</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797435"><span class="annot"><span class="annottext">DataFamInstDecl GhcPs
dfid_inst :: DataFamInstDecl GhcPs
dfid_inst :: forall pass. InstDecl pass -&gt; DataFamInstDecl pass
</span><a href="#local-6989586621681797435"><span class="hs-identifier hs-var hs-var">dfid_inst</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InstDecl GhcPs
</span><a href="#local-6989586621681797431"><span class="hs-identifier hs-var">decl</span></a></span><span>
</span><span id="line-528"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DataFamInstDecl"><span class="hs-identifier hs-type">DataFamInstDecl</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681797438"><span class="annot"><span class="annottext">FamEqn GhcPs (HsDataDefn GhcPs)
dfid_eqn :: FamEqn GhcPs (HsDataDefn GhcPs)
dfid_eqn :: forall pass. DataFamInstDecl pass -&gt; FamEqn pass (HsDataDefn pass)
</span><a href="#local-6989586621681797438"><span class="hs-identifier hs-var hs-var">dfid_eqn</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">DataFamInstDecl GhcPs
</span><a href="#local-6989586621681797435"><span class="hs-identifier hs-var">dfid_inst</span></a></span><span>
</span><span id="line-529"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-530"></span><span>      </span><span id="local-6989586621681797440"><span class="annot"><span class="annottext">FamEqn GhcPs (HsDataDefn GhcPs)
</span><a href="#local-6989586621681797440"><span class="hs-identifier hs-var">dfid_eqn'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">FamEqn GhcPs (HsDataDefn GhcPs)
</span><a href="#local-6989586621681797438"><span class="hs-identifier hs-var">dfid_eqn</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-531"></span><span>        </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#FamEqn"><span class="hs-identifier hs-type">FamEqn</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681797442"><span class="annot"><span class="annottext">XCFamEqn GhcPs (HsDataDefn GhcPs)
feqn_ext :: XCFamEqn GhcPs (HsDataDefn GhcPs)
feqn_ext :: forall pass rhs. FamEqn pass rhs -&gt; XCFamEqn pass rhs
</span><a href="#local-6989586621681797442"><span class="hs-identifier hs-var hs-var">feqn_ext</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797444"><span class="annot"><span class="annottext">LIdP GhcPs
feqn_tycon :: LIdP GhcPs
feqn_tycon :: forall pass rhs. FamEqn pass rhs -&gt; LIdP pass
</span><a href="#local-6989586621681797444"><span class="hs-identifier hs-var hs-var">feqn_tycon</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797446"><span class="annot"><span class="annottext">HsOuterFamEqnTyVarBndrs GhcPs
feqn_bndrs :: HsOuterFamEqnTyVarBndrs GhcPs
feqn_bndrs :: forall pass rhs. FamEqn pass rhs -&gt; HsOuterFamEqnTyVarBndrs pass
</span><a href="#local-6989586621681797446"><span class="hs-identifier hs-var hs-var">feqn_bndrs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797448"><span class="annot"><span class="annottext">HsTyPats GhcPs
feqn_pats :: HsTyPats GhcPs
feqn_pats :: forall pass rhs. FamEqn pass rhs -&gt; HsTyPats pass
</span><a href="#local-6989586621681797448"><span class="hs-identifier hs-var hs-var">feqn_pats</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797450"><span class="annot"><span class="annottext">LexicalFixity
feqn_fixity :: LexicalFixity
feqn_fixity :: forall pass rhs. FamEqn pass rhs -&gt; LexicalFixity
</span><a href="#local-6989586621681797450"><span class="hs-identifier hs-var hs-var">feqn_fixity</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797452"><span class="annot"><span class="annottext">HsDataDefn GhcPs
feqn_rhs :: HsDataDefn GhcPs
feqn_rhs :: forall pass rhs. FamEqn pass rhs -&gt; rhs
</span><a href="#local-6989586621681797452"><span class="hs-identifier hs-var hs-var">feqn_rhs</span></a></span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-532"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-533"></span><span>            </span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; HdkA ()
forall a e. GenLocated (SrcSpanAnn' a) e -&gt; HdkA ()
</span><a href="GHC.Parser.PostProcess.Haddock.html#registerHdkA"><span class="hs-identifier hs-var">registerHdkA</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
LocatedN RdrName
</span><a href="#local-6989586621681797444"><span class="hs-identifier hs-var">feqn_tycon</span></a></span><span>
</span><span id="line-534"></span><span>            </span><span id="local-6989586621681797454"><span class="annot"><span class="annottext">HsDataDefn GhcPs
</span><a href="#local-6989586621681797454"><span class="hs-identifier hs-var">feqn_rhs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsDataDefn GhcPs -&gt; HdkA (HsDataDefn GhcPs)
forall a. HasHaddock a =&gt; a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="annot"><span class="annottext">HsDataDefn GhcPs
</span><a href="#local-6989586621681797452"><span class="hs-identifier hs-var">feqn_rhs</span></a></span><span>
</span><span id="line-535"></span><span>            </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#FamEqn"><span class="hs-identifier hs-type">FamEqn</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-536"></span><span>                </span><span class="annot"><span class="annottext">XCFamEqn GhcPs (HsDataDefn GhcPs)
feqn_ext :: XCFamEqn GhcPs (HsDataDefn GhcPs)
feqn_ext :: XCFamEqn GhcPs (HsDataDefn GhcPs)
</span><a href="#local-6989586621681797442"><span class="hs-identifier hs-var hs-var">feqn_ext</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-537"></span><span>                </span><span class="annot"><span class="annottext">LIdP GhcPs
feqn_tycon :: LIdP GhcPs
feqn_tycon :: LIdP GhcPs
</span><a href="#local-6989586621681797444"><span class="hs-identifier hs-var hs-var">feqn_tycon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HsOuterFamEqnTyVarBndrs GhcPs
feqn_bndrs :: HsOuterFamEqnTyVarBndrs GhcPs
feqn_bndrs :: HsOuterFamEqnTyVarBndrs GhcPs
</span><a href="#local-6989586621681797446"><span class="hs-identifier hs-var hs-var">feqn_bndrs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HsTyPats GhcPs
feqn_pats :: HsTyPats GhcPs
feqn_pats :: HsTyPats GhcPs
</span><a href="#local-6989586621681797448"><span class="hs-identifier hs-var hs-var">feqn_pats</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LexicalFixity
feqn_fixity :: LexicalFixity
feqn_fixity :: LexicalFixity
</span><a href="#local-6989586621681797450"><span class="hs-identifier hs-var hs-var">feqn_fixity</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-538"></span><span>                </span><span class="annot"><span class="annottext">feqn_rhs :: HsDataDefn GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#feqn_rhs"><span class="hs-identifier hs-var">feqn_rhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsDataDefn GhcPs
</span><a href="#local-6989586621681797454"><span class="hs-identifier hs-var">feqn_rhs'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-539"></span><span>      </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">XInstD GhcPs -&gt; InstDecl GhcPs -&gt; HsDecl GhcPs
forall p. XInstD p -&gt; InstDecl p -&gt; HsDecl p
</span><a href="Language.Haskell.Syntax.Decls.html#InstD"><span class="hs-identifier hs-var">InstD</span></a></span><span> </span><span class="annot"><span class="annottext">XInstD GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DataFamInstD"><span class="hs-identifier hs-type">DataFamInstD</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-540"></span><span>        </span><span class="annot"><span class="annottext">XDataFamInstD GhcPs
dfid_ext :: XDataFamInstD GhcPs
dfid_ext :: XDataFamInstD GhcPs
</span><a href="#local-6989586621681797433"><span class="hs-identifier hs-var hs-var">dfid_ext</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-541"></span><span>        </span><span class="annot"><span class="annottext">dfid_inst :: DataFamInstDecl GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#dfid_inst"><span class="hs-identifier hs-var">dfid_inst</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DataFamInstDecl"><span class="hs-identifier hs-type">DataFamInstDecl</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">dfid_eqn :: FamEqn GhcPs (HsDataDefn GhcPs)
</span><a href="Language.Haskell.Syntax.Decls.html#dfid_eqn"><span class="hs-identifier hs-var">dfid_eqn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FamEqn GhcPs (HsDataDefn GhcPs)
</span><a href="#local-6989586621681797440"><span class="hs-identifier hs-var">dfid_eqn'</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-542"></span><span>
</span><span id="line-543"></span><span>  </span><span class="hs-comment">-- Type synonyms:</span><span>
</span><span id="line-544"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-545"></span><span>  </span><span class="hs-comment">--    type T = Int -- ^ Comment on Int</span><span>
</span><span id="line-546"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-547"></span><span>  </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#TyClD"><span class="hs-identifier hs-type">TyClD</span></a></span><span> </span><span class="annot"><span class="annottext">XTyClD GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681797455"><span class="annot"><span class="annottext">TyClDecl GhcPs
</span><a href="#local-6989586621681797455"><span class="hs-identifier hs-var">decl</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-548"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#SynDecl"><span class="hs-identifier hs-type">SynDecl</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681797457"><span class="annot"><span class="annottext">XSynDecl GhcPs
tcdSExt :: XSynDecl GhcPs
tcdSExt :: forall pass. TyClDecl pass -&gt; XSynDecl pass
</span><a href="#local-6989586621681797457"><span class="hs-identifier hs-var hs-var">tcdSExt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797459"><span class="annot"><span class="annottext">LIdP GhcPs
tcdLName :: forall pass. TyClDecl pass -&gt; LIdP pass
tcdLName :: LIdP GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#tcdLName"><span class="hs-identifier hs-var hs-var">tcdLName</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797460"><span class="annot"><span class="annottext">LHsQTyVars GhcPs
tcdTyVars :: forall pass. TyClDecl pass -&gt; LHsQTyVars pass
tcdTyVars :: LHsQTyVars GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#tcdTyVars"><span class="hs-identifier hs-var hs-var">tcdTyVars</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797461"><span class="annot"><span class="annottext">LexicalFixity
tcdFixity :: forall pass. TyClDecl pass -&gt; LexicalFixity
tcdFixity :: LexicalFixity
</span><a href="Language.Haskell.Syntax.Decls.html#tcdFixity"><span class="hs-identifier hs-var hs-var">tcdFixity</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797462"><span class="annot"><span class="annottext">LHsType GhcPs
tcdRhs :: LHsType GhcPs
tcdRhs :: forall pass. TyClDecl pass -&gt; LHsType pass
</span><a href="#local-6989586621681797462"><span class="hs-identifier hs-var hs-var">tcdRhs</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TyClDecl GhcPs
</span><a href="#local-6989586621681797455"><span class="hs-identifier hs-var">decl</span></a></span><span>
</span><span id="line-549"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-550"></span><span>        </span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; HdkA ()
forall a e. GenLocated (SrcSpanAnn' a) e -&gt; HdkA ()
</span><a href="GHC.Parser.PostProcess.Haddock.html#registerHdkA"><span class="hs-identifier hs-var">registerHdkA</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
LocatedN RdrName
</span><a href="#local-6989586621681797459"><span class="hs-identifier hs-var">tcdLName</span></a></span><span>
</span><span id="line-551"></span><span>        </span><span class="hs-comment">-- todo: register keyword location of '=', see Note [Register keyword location]</span><span>
</span><span id="line-552"></span><span>        </span><span id="local-6989586621681797464"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621681797464"><span class="hs-identifier hs-var">tcdRhs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; HdkA (GenLocated SrcSpanAnnA (HsType GhcPs))
forall a. HasHaddock a =&gt; a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621681797462"><span class="hs-identifier hs-var">tcdRhs</span></a></span><span>
</span><span id="line-553"></span><span>        </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span>
</span><span id="line-554"></span><span>          </span><span class="annot"><span class="annottext">XTyClD GhcPs -&gt; TyClDecl GhcPs -&gt; HsDecl GhcPs
forall p. XTyClD p -&gt; TyClDecl p -&gt; HsDecl p
</span><a href="Language.Haskell.Syntax.Decls.html#TyClD"><span class="hs-identifier hs-var">TyClD</span></a></span><span> </span><span class="annot"><span class="annottext">XTyClD GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#SynDecl"><span class="hs-identifier hs-type">SynDecl</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-555"></span><span>            </span><span class="annot"><span class="annottext">XSynDecl GhcPs
tcdSExt :: XSynDecl GhcPs
tcdSExt :: XSynDecl GhcPs
</span><a href="#local-6989586621681797457"><span class="hs-identifier hs-var hs-var">tcdSExt</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-556"></span><span>            </span><span class="annot"><span class="annottext">LIdP GhcPs
tcdLName :: LIdP GhcPs
tcdLName :: LIdP GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#tcdLName"><span class="hs-identifier hs-var hs-var">tcdLName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LHsQTyVars GhcPs
tcdTyVars :: LHsQTyVars GhcPs
tcdTyVars :: LHsQTyVars GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#tcdTyVars"><span class="hs-identifier hs-var hs-var">tcdTyVars</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LexicalFixity
tcdFixity :: LexicalFixity
tcdFixity :: LexicalFixity
</span><a href="Language.Haskell.Syntax.Decls.html#tcdFixity"><span class="hs-identifier hs-var hs-var">tcdFixity</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-557"></span><span>            </span><span class="annot"><span class="annottext">tcdRhs :: LHsType GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#tcdRhs"><span class="hs-identifier hs-var">tcdRhs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621681797464"><span class="hs-identifier hs-var">tcdRhs'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-558"></span><span>
</span><span id="line-559"></span><span>  </span><span class="hs-comment">-- Foreign imports:</span><span>
</span><span id="line-560"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-561"></span><span>  </span><span class="hs-comment">--    foreign import ccall unsafe</span><span>
</span><span id="line-562"></span><span>  </span><span class="hs-comment">--      o :: Float     -- ^ The input float</span><span>
</span><span id="line-563"></span><span>  </span><span class="hs-comment">--        -&gt; IO Float  -- ^ The output float</span><span>
</span><span id="line-564"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-565"></span><span>  </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ForD"><span class="hs-identifier hs-type">ForD</span></a></span><span> </span><span class="annot"><span class="annottext">XForD GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681797466"><span class="annot"><span class="annottext">ForeignDecl GhcPs
</span><a href="#local-6989586621681797466"><span class="hs-identifier hs-var">decl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-566"></span><span>    </span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; HdkA ()
forall a e. GenLocated (SrcSpanAnn' a) e -&gt; HdkA ()
</span><a href="GHC.Parser.PostProcess.Haddock.html#registerHdkA"><span class="hs-identifier hs-var">registerHdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForeignDecl GhcPs -&gt; LIdP GhcPs
forall pass. ForeignDecl pass -&gt; LIdP pass
</span><a href="Language.Haskell.Syntax.Decls.html#fd_name"><span class="hs-identifier hs-var">fd_name</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignDecl GhcPs
</span><a href="#local-6989586621681797466"><span class="hs-identifier hs-var">decl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-567"></span><span>    </span><span id="local-6989586621681797468"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsSigType GhcPs)
</span><a href="#local-6989586621681797468"><span class="hs-identifier hs-var">fd_sig_ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsSigType GhcPs)
-&gt; HdkA (GenLocated SrcSpanAnnA (HsSigType GhcPs))
forall a. HasHaddock a =&gt; a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForeignDecl GhcPs -&gt; LHsSigType GhcPs
forall pass. ForeignDecl pass -&gt; LHsSigType pass
</span><a href="Language.Haskell.Syntax.Decls.html#fd_sig_ty"><span class="hs-identifier hs-var">fd_sig_ty</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignDecl GhcPs
</span><a href="#local-6989586621681797466"><span class="hs-identifier hs-var">decl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-568"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">XForD GhcPs -&gt; ForeignDecl GhcPs -&gt; HsDecl GhcPs
forall p. XForD p -&gt; ForeignDecl p -&gt; HsDecl p
</span><a href="Language.Haskell.Syntax.Decls.html#ForD"><span class="hs-identifier hs-var">ForD</span></a></span><span> </span><span class="annot"><span class="annottext">XForD GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForeignDecl GhcPs
</span><a href="#local-6989586621681797466"><span class="hs-identifier hs-var">decl</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#fd_sig_ty"><span class="hs-identifier hs-var">fd_sig_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621681797468"><span class="hs-identifier hs-type">fd_sig_ty'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-569"></span><span>
</span><span id="line-570"></span><span>  </span><span class="hs-comment">-- Other declarations</span><span>
</span><span id="line-571"></span><span>  </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span id="local-6989586621681797470"><span class="annot"><span class="annottext">HsDecl GhcPs
</span><a href="#local-6989586621681797470"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsDecl GhcPs -&gt; HdkA (HsDecl GhcPs)
forall a. a -&gt; HdkA a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#pure/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">HsDecl GhcPs
</span><a href="#local-6989586621681797470"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-572"></span><span>
</span><span id="line-573"></span><span class="hs-comment">-- The right-hand side of a data/newtype declaration or data family instance.</span><span>
</span><span id="line-574"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HasHaddock"><span class="hs-identifier hs-type">HasHaddock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsDataDefn"><span class="hs-identifier hs-type">HsDataDefn</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-575"></span><span>  </span><span id="local-6989586621681797486"><span class="annot"><span class="annottext">addHaddock :: HsDataDefn GhcPs -&gt; HdkA (HsDataDefn GhcPs)
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var hs-var hs-var hs-var">addHaddock</span></a></span></span><span> </span><span id="local-6989586621681797487"><span class="annot"><span class="annottext">defn :: HsDataDefn GhcPs
</span><a href="#local-6989586621681797487"><span class="hs-identifier hs-var">defn</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsDataDefn"><span class="hs-identifier hs-type">HsDataDefn</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-576"></span><span>
</span><span id="line-577"></span><span>    </span><span class="hs-comment">-- Register the kind signature:</span><span>
</span><span id="line-578"></span><span>    </span><span class="hs-comment">--    data D :: Type -&gt; Type        where ...</span><span>
</span><span id="line-579"></span><span>    </span><span class="hs-comment">--    data instance D Bool :: Type  where ...</span><span>
</span><span id="line-580"></span><span>    </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f ()
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#traverse_/Data.Foldable.html#traverse_"><span class="hs-identifier hs-var">traverse_</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs) -&gt; HdkA ()
forall a e. GenLocated (SrcSpanAnn' a) e -&gt; HdkA ()
</span><a href="GHC.Parser.PostProcess.Haddock.html#registerHdkA"><span class="hs-identifier hs-var">registerHdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsDataDefn GhcPs -&gt; Maybe (LHsType GhcPs)
forall pass. HsDataDefn pass -&gt; Maybe (LHsKind pass)
</span><a href="Language.Haskell.Syntax.Decls.html#dd_kindSig"><span class="hs-identifier hs-var">dd_kindSig</span></a></span><span> </span><span class="annot"><span class="annottext">HsDataDefn GhcPs
</span><a href="#local-6989586621681797487"><span class="hs-identifier hs-var">defn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-581"></span><span>    </span><span class="hs-comment">-- todo: register keyword location of '=' or 'where', see Note [Register keyword location]</span><span>
</span><span id="line-582"></span><span>
</span><span id="line-583"></span><span>    </span><span class="hs-comment">-- Process the data constructors:</span><span>
</span><span id="line-584"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-585"></span><span>    </span><span class="hs-comment">--    data T</span><span>
</span><span id="line-586"></span><span>    </span><span class="hs-comment">--      = MkT1 Int Bool  -- ^ Comment on MkT1</span><span>
</span><span id="line-587"></span><span>    </span><span class="hs-comment">--      | MkT2 Char Int  -- ^ Comment on MkT2</span><span>
</span><span id="line-588"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-589"></span><span>    </span><span id="local-6989586621681797490"><span class="annot"><span class="annottext">DataDefnCons (GenLocated SrcSpanAnnA (ConDecl GhcPs))
</span><a href="#local-6989586621681797490"><span class="hs-identifier hs-var">dd_cons'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (ConDecl GhcPs)
 -&gt; HdkA (GenLocated SrcSpanAnnA (ConDecl GhcPs)))
-&gt; DataDefnCons (GenLocated SrcSpanAnnA (ConDecl GhcPs))
-&gt; HdkA (DataDefnCons (GenLocated SrcSpanAnnA (ConDecl GhcPs)))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; DataDefnCons a -&gt; f (DataDefnCons b)
</span><a href="../../base-4.18.3.0/src/Data.Traversable.html#traverse/Data.Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (ConDecl GhcPs)
-&gt; HdkA (GenLocated SrcSpanAnnA (ConDecl GhcPs))
forall a. HasHaddock a =&gt; a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsDataDefn GhcPs -&gt; DataDefnCons (LConDecl GhcPs)
forall pass. HsDataDefn pass -&gt; DataDefnCons (LConDecl pass)
</span><a href="Language.Haskell.Syntax.Decls.html#dd_cons"><span class="hs-identifier hs-var">dd_cons</span></a></span><span> </span><span class="annot"><span class="annottext">HsDataDefn GhcPs
</span><a href="#local-6989586621681797487"><span class="hs-identifier hs-var">defn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-590"></span><span>
</span><span id="line-591"></span><span>    </span><span class="hs-comment">-- Process the deriving clauses:</span><span>
</span><span id="line-592"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-593"></span><span>    </span><span class="hs-comment">--   newtype N = MkN Natural</span><span>
</span><span id="line-594"></span><span>    </span><span class="hs-comment">--     deriving (Eq  {- ^ Comment on Eq  N -})</span><span>
</span><span id="line-595"></span><span>    </span><span class="hs-comment">--     deriving (Ord {- ^ Comment on Ord N -})</span><span>
</span><span id="line-596"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-597"></span><span>    </span><span id="local-6989586621681797492"><span class="annot"><span class="annottext">[GenLocated (SrcAnn NoEpAnns) (HsDerivingClause GhcPs)]
</span><a href="#local-6989586621681797492"><span class="hs-identifier hs-var">dd_derivs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[GenLocated (SrcAnn NoEpAnns) (HsDerivingClause GhcPs)]
-&gt; HdkA [GenLocated (SrcAnn NoEpAnns) (HsDerivingClause GhcPs)]
forall a. HasHaddock a =&gt; a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsDataDefn GhcPs -&gt; HsDeriving GhcPs
forall pass. HsDataDefn pass -&gt; HsDeriving pass
</span><a href="Language.Haskell.Syntax.Decls.html#dd_derivs"><span class="hs-identifier hs-var">dd_derivs</span></a></span><span> </span><span class="annot"><span class="annottext">HsDataDefn GhcPs
</span><a href="#local-6989586621681797487"><span class="hs-identifier hs-var">defn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-598"></span><span>
</span><span id="line-599"></span><span>    </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">HsDataDefn GhcPs
</span><a href="#local-6989586621681797487"><span class="hs-identifier hs-var">defn</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#dd_cons"><span class="hs-identifier hs-var">dd_cons</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621681797490"><span class="hs-identifier hs-type">dd_cons'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-600"></span><span>                  </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#dd_derivs"><span class="hs-identifier hs-var">dd_derivs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621681797492"><span class="hs-identifier hs-type">dd_derivs'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-601"></span><span>
</span><span id="line-602"></span><span class="hs-comment">-- Process the deriving clauses of a data/newtype declaration.</span><span>
</span><span id="line-603"></span><span class="hs-comment">-- Not used for standalone deriving.</span><span>
</span><span id="line-604"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HasHaddock"><span class="hs-identifier hs-type">HasHaddock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedAn"><span class="hs-identifier hs-type">LocatedAn</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#NoEpAnns"><span class="hs-identifier hs-type">NoEpAnns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsDerivingClause"><span class="hs-identifier hs-type">HsDerivingClause</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-605"></span><span>  </span><span id="local-6989586621681797500"><span class="annot"><span class="annottext">addHaddock :: Located [GenLocated (SrcAnn NoEpAnns) (HsDerivingClause GhcPs)]
-&gt; HdkA
     (Located [GenLocated (SrcAnn NoEpAnns) (HsDerivingClause GhcPs)])
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var hs-var hs-var hs-var">addHaddock</span></a></span></span><span> </span><span id="local-6989586621681797501"><span class="annot"><span class="annottext">Located [GenLocated (SrcAnn NoEpAnns) (HsDerivingClause GhcPs)]
</span><a href="#local-6989586621681797501"><span class="hs-identifier hs-var">lderivs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-606"></span><span>    </span><span class="annot"><span class="annottext">SrcSpan
-&gt; HdkA
     (Located [GenLocated (SrcAnn NoEpAnns) (HsDerivingClause GhcPs)])
-&gt; HdkA
     (Located [GenLocated (SrcAnn NoEpAnns) (HsDerivingClause GhcPs)])
forall a. SrcSpan -&gt; HdkA a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#extendHdkA"><span class="hs-identifier hs-var">extendHdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Located [GenLocated (SrcAnn NoEpAnns) (HsDerivingClause GhcPs)]
-&gt; SrcSpan
forall l e. GenLocated l e -&gt; l
</span><a href="GHC.Types.SrcLoc.html#getLoc"><span class="hs-identifier hs-var">getLoc</span></a></span><span> </span><span class="annot"><span class="annottext">Located [GenLocated (SrcAnn NoEpAnns) (HsDerivingClause GhcPs)]
</span><a href="#local-6989586621681797501"><span class="hs-identifier hs-var">lderivs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(HdkA
   (Located [GenLocated (SrcAnn NoEpAnns) (HsDerivingClause GhcPs)])
 -&gt; HdkA
      (Located [GenLocated (SrcAnn NoEpAnns) (HsDerivingClause GhcPs)]))
-&gt; HdkA
     (Located [GenLocated (SrcAnn NoEpAnns) (HsDerivingClause GhcPs)])
-&gt; HdkA
     (Located [GenLocated (SrcAnn NoEpAnns) (HsDerivingClause GhcPs)])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-607"></span><span>    </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><a href="../../base-4.18.3.0/src/Data.Traversable.html#traverse/Data.Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated (SrcAnn NoEpAnns) (HsDerivingClause GhcPs)]
-&gt; HdkA [GenLocated (SrcAnn NoEpAnns) (HsDerivingClause GhcPs)]
forall a. HasHaddock a =&gt; a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="annot"><span class="annottext">Located [GenLocated (SrcAnn NoEpAnns) (HsDerivingClause GhcPs)]
</span><a href="#local-6989586621681797501"><span class="hs-identifier hs-var">lderivs</span></a></span><span>
</span><span id="line-608"></span><span>
</span><span id="line-609"></span><span class="hs-comment">-- Process a single deriving clause of a data/newtype declaration:</span><span>
</span><span id="line-610"></span><span class="hs-comment">--</span><span>
</span><span id="line-611"></span><span class="hs-comment">--  newtype N = MkN Natural</span><span>
</span><span id="line-612"></span><span class="hs-comment">--    deriving newtype (Eq  {- ^ Comment on Eq  N -})</span><span>
</span><span id="line-613"></span><span class="hs-comment">--    deriving (Ord {- ^ Comment on Ord N -}) via Down N</span><span>
</span><span id="line-614"></span><span class="hs-comment">--</span><span>
</span><span id="line-615"></span><span class="hs-comment">-- Not used for standalone deriving.</span><span>
</span><span id="line-616"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HasHaddock"><span class="hs-identifier hs-type">HasHaddock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedAn"><span class="hs-identifier hs-type">LocatedAn</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#NoEpAnns"><span class="hs-identifier hs-type">NoEpAnns</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsDerivingClause"><span class="hs-identifier hs-type">HsDerivingClause</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-617"></span><span>  </span><span id="local-6989586621681797515"><span class="annot"><span class="annottext">addHaddock :: GenLocated (SrcAnn NoEpAnns) (HsDerivingClause GhcPs)
-&gt; HdkA (GenLocated (SrcAnn NoEpAnns) (HsDerivingClause GhcPs))
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var hs-var hs-var hs-var">addHaddock</span></a></span></span><span> </span><span id="local-6989586621681797516"><span class="annot"><span class="annottext">GenLocated (SrcAnn NoEpAnns) (HsDerivingClause GhcPs)
</span><a href="#local-6989586621681797516"><span class="hs-identifier hs-var">lderiv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-618"></span><span>    </span><span class="annot"><span class="annottext">SrcSpan
-&gt; HdkA (GenLocated (SrcAnn NoEpAnns) (HsDerivingClause GhcPs))
-&gt; HdkA (GenLocated (SrcAnn NoEpAnns) (HsDerivingClause GhcPs))
forall a. SrcSpan -&gt; HdkA a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#extendHdkA"><span class="hs-identifier hs-var">extendHdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated (SrcAnn NoEpAnns) (HsDerivingClause GhcPs) -&gt; SrcSpan
forall a e. GenLocated (SrcSpanAnn' a) e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated (SrcAnn NoEpAnns) (HsDerivingClause GhcPs)
</span><a href="#local-6989586621681797516"><span class="hs-identifier hs-var">lderiv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(HdkA (GenLocated (SrcAnn NoEpAnns) (HsDerivingClause GhcPs))
 -&gt; HdkA (GenLocated (SrcAnn NoEpAnns) (HsDerivingClause GhcPs)))
-&gt; HdkA (GenLocated (SrcAnn NoEpAnns) (HsDerivingClause GhcPs))
-&gt; HdkA (GenLocated (SrcAnn NoEpAnns) (HsDerivingClause GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-619"></span><span>    </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f (t b)
</span><a href="../../base-4.18.3.0/src/Data.Traversable.html#for/Data.Traversable.html#for"><span class="hs-identifier hs-var">for</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedAn"><span class="hs-identifier hs-type">LocatedAn</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Annotation.html#NoEpAnns"><span class="hs-identifier hs-type">NoEpAnns</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">GenLocated (SrcAnn NoEpAnns) (HsDerivingClause GhcPs)
</span><a href="#local-6989586621681797516"><span class="hs-identifier hs-var">lderiv</span></a></span><span> </span><span class="annot"><span class="annottext">((HsDerivingClause GhcPs -&gt; HdkA (HsDerivingClause GhcPs))
 -&gt; HdkA (GenLocated (SrcAnn NoEpAnns) (HsDerivingClause GhcPs)))
-&gt; (HsDerivingClause GhcPs -&gt; HdkA (HsDerivingClause GhcPs))
-&gt; HdkA (GenLocated (SrcAnn NoEpAnns) (HsDerivingClause GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681797517"><span class="annot"><span class="annottext">HsDerivingClause GhcPs
</span><a href="#local-6989586621681797517"><span class="hs-identifier hs-var">deriv</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-620"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsDerivingClause GhcPs
</span><a href="#local-6989586621681797517"><span class="hs-identifier hs-var">deriv</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-621"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsDerivingClause"><span class="hs-identifier hs-type">HsDerivingClause</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681797519"><span class="annot"><span class="annottext">XCHsDerivingClause GhcPs
deriv_clause_ext :: XCHsDerivingClause GhcPs
deriv_clause_ext :: forall pass. HsDerivingClause pass -&gt; XCHsDerivingClause pass
</span><a href="#local-6989586621681797519"><span class="hs-identifier hs-var hs-var">deriv_clause_ext</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797521"><span class="annot"><span class="annottext">Maybe (LDerivStrategy GhcPs)
deriv_clause_strategy :: Maybe (LDerivStrategy GhcPs)
deriv_clause_strategy :: forall pass. HsDerivingClause pass -&gt; Maybe (LDerivStrategy pass)
</span><a href="#local-6989586621681797521"><span class="hs-identifier hs-var hs-var">deriv_clause_strategy</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797523"><span class="annot"><span class="annottext">LDerivClauseTys GhcPs
deriv_clause_tys :: LDerivClauseTys GhcPs
deriv_clause_tys :: forall pass. HsDerivingClause pass -&gt; LDerivClauseTys pass
</span><a href="#local-6989586621681797523"><span class="hs-identifier hs-var hs-var">deriv_clause_tys</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-622"></span><span>        </span><span class="hs-keyword">let</span><span>
</span><span id="line-623"></span><span>          </span><span class="hs-comment">-- 'stock', 'anyclass', and 'newtype' strategies come</span><span>
</span><span id="line-624"></span><span>          </span><span class="hs-comment">-- before the clause types.</span><span>
</span><span id="line-625"></span><span>          </span><span class="hs-comment">--</span><span>
</span><span id="line-626"></span><span>          </span><span class="hs-comment">-- 'via' comes after.</span><span>
</span><span id="line-627"></span><span>          </span><span class="hs-comment">--</span><span>
</span><span id="line-628"></span><span>          </span><span class="hs-comment">-- See tests/.../T11768.hs</span><span>
</span><span id="line-629"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621681797525"><span class="annot"><span class="annottext">HdkA ()
</span><a href="#local-6989586621681797525"><span class="hs-identifier hs-var">register_strategy_before</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797526"><span class="annot"><span class="annottext">HdkA ()
</span><a href="#local-6989586621681797526"><span class="hs-identifier hs-var">register_strategy_after</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-630"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (LDerivStrategy GhcPs)
</span><a href="#local-6989586621681797521"><span class="hs-identifier hs-var">deriv_clause_strategy</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-631"></span><span>              </span><span class="annot"><span class="annottext">Maybe (LDerivStrategy GhcPs)
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; HdkA ()
forall a. a -&gt; HdkA a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#pure/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">() -&gt; HdkA ()
forall a. a -&gt; HdkA a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#pure/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-632"></span><span>              </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681797527"><span class="annot"><span class="annottext">SrcAnn NoEpAnns
</span><a href="#local-6989586621681797527"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ViaStrategy"><span class="hs-identifier hs-type">ViaStrategy</span></a></span><span> </span><span class="annot"><span class="annottext">XViaStrategy GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; HdkA ()
forall a. a -&gt; HdkA a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#pure/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; HdkA ()
</span><a href="GHC.Parser.PostProcess.Haddock.html#registerLocHdkA"><span class="hs-identifier hs-var">registerLocHdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcAnn NoEpAnns -&gt; SrcSpan
forall a. SrcSpanAnn' a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcAnn NoEpAnns
</span><a href="#local-6989586621681797527"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-633"></span><span>              </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681797529"><span class="annot"><span class="annottext">SrcAnn NoEpAnns
</span><a href="#local-6989586621681797529"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><span class="annottext">DerivStrategy GhcPs
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; HdkA ()
</span><a href="GHC.Parser.PostProcess.Haddock.html#registerLocHdkA"><span class="hs-identifier hs-var">registerLocHdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcAnn NoEpAnns -&gt; SrcSpan
forall a. SrcSpanAnn' a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcAnn NoEpAnns
</span><a href="#local-6989586621681797529"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">() -&gt; HdkA ()
forall a. a -&gt; HdkA a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#pure/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-634"></span><span>        </span><span class="annot"><span class="annottext">HdkA ()
</span><a href="#local-6989586621681797525"><span class="hs-identifier hs-var">register_strategy_before</span></a></span><span>
</span><span id="line-635"></span><span>        </span><span id="local-6989586621681797530"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnC (DerivClauseTys GhcPs)
</span><a href="#local-6989586621681797530"><span class="hs-identifier hs-var">deriv_clause_tys'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnC (DerivClauseTys GhcPs)
-&gt; HdkA (GenLocated SrcSpanAnnC (DerivClauseTys GhcPs))
forall a. HasHaddock a =&gt; a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="annot"><span class="annottext">LDerivClauseTys GhcPs
GenLocated SrcSpanAnnC (DerivClauseTys GhcPs)
</span><a href="#local-6989586621681797523"><span class="hs-identifier hs-var">deriv_clause_tys</span></a></span><span>
</span><span id="line-636"></span><span>        </span><span class="annot"><span class="annottext">HdkA ()
</span><a href="#local-6989586621681797526"><span class="hs-identifier hs-var">register_strategy_after</span></a></span><span>
</span><span id="line-637"></span><span>        </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#HsDerivingClause"><span class="hs-identifier hs-type">HsDerivingClause</span></a></span><span>
</span><span id="line-638"></span><span>          </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">XCHsDerivingClause GhcPs
deriv_clause_ext :: XCHsDerivingClause GhcPs
deriv_clause_ext :: XCHsDerivingClause GhcPs
</span><a href="#local-6989586621681797519"><span class="hs-identifier hs-var hs-var">deriv_clause_ext</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-639"></span><span>            </span><span class="annot"><span class="annottext">Maybe (LDerivStrategy GhcPs)
deriv_clause_strategy :: Maybe (LDerivStrategy GhcPs)
deriv_clause_strategy :: Maybe (LDerivStrategy GhcPs)
</span><a href="#local-6989586621681797521"><span class="hs-identifier hs-var hs-var">deriv_clause_strategy</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-640"></span><span>            </span><span class="annot"><span class="annottext">deriv_clause_tys :: LDerivClauseTys GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#deriv_clause_tys"><span class="hs-identifier hs-var">deriv_clause_tys</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LDerivClauseTys GhcPs
GenLocated SrcSpanAnnC (DerivClauseTys GhcPs)
</span><a href="#local-6989586621681797530"><span class="hs-identifier hs-var">deriv_clause_tys'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-641"></span><span>
</span><span id="line-642"></span><span class="hs-comment">-- Process the types in a single deriving clause, which may come in one of the</span><span>
</span><span id="line-643"></span><span class="hs-comment">-- following forms:</span><span>
</span><span id="line-644"></span><span class="hs-comment">--</span><span>
</span><span id="line-645"></span><span class="hs-comment">--    1. A singular type constructor:</span><span>
</span><span id="line-646"></span><span class="hs-comment">--          deriving Eq -- ^ Comment on Eq</span><span>
</span><span id="line-647"></span><span class="hs-comment">--</span><span>
</span><span id="line-648"></span><span class="hs-comment">--    2. A list of comma-separated types surrounded by enclosing parentheses:</span><span>
</span><span id="line-649"></span><span class="hs-comment">--          deriving ( Eq  -- ^ Comment on Eq</span><span>
</span><span id="line-650"></span><span class="hs-comment">--                   , C a -- ^ Comment on C a</span><span>
</span><span id="line-651"></span><span class="hs-comment">--                   )</span><span>
</span><span id="line-652"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HasHaddock"><span class="hs-identifier hs-type">HasHaddock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedC"><span class="hs-identifier hs-type">LocatedC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DerivClauseTys"><span class="hs-identifier hs-type">DerivClauseTys</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-653"></span><span>  </span><span id="local-6989586621681797537"><span class="annot"><span class="annottext">addHaddock :: GenLocated SrcSpanAnnC (DerivClauseTys GhcPs)
-&gt; HdkA (GenLocated SrcSpanAnnC (DerivClauseTys GhcPs))
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var hs-var hs-var hs-var">addHaddock</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681797538"><span class="annot"><span class="annottext">SrcSpanAnnC
</span><a href="#local-6989586621681797538"><span class="hs-identifier hs-var">l_dct</span></a></span></span><span> </span><span id="local-6989586621681797539"><span class="annot"><span class="annottext">DerivClauseTys GhcPs
</span><a href="#local-6989586621681797539"><span class="hs-identifier hs-var">dct</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-654"></span><span>    </span><span class="annot"><span class="annottext">SrcSpan
-&gt; HdkA (GenLocated SrcSpanAnnC (DerivClauseTys GhcPs))
-&gt; HdkA (GenLocated SrcSpanAnnC (DerivClauseTys GhcPs))
forall a. SrcSpan -&gt; HdkA a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#extendHdkA"><span class="hs-identifier hs-var">extendHdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnC -&gt; SrcSpan
forall a. SrcSpanAnn' a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnC
</span><a href="#local-6989586621681797538"><span class="hs-identifier hs-var">l_dct</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(HdkA (GenLocated SrcSpanAnnC (DerivClauseTys GhcPs))
 -&gt; HdkA (GenLocated SrcSpanAnnC (DerivClauseTys GhcPs)))
-&gt; HdkA (GenLocated SrcSpanAnnC (DerivClauseTys GhcPs))
-&gt; HdkA (GenLocated SrcSpanAnnC (DerivClauseTys GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-655"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DerivClauseTys GhcPs
</span><a href="#local-6989586621681797539"><span class="hs-identifier hs-var">dct</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-656"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DctSingle"><span class="hs-identifier hs-type">DctSingle</span></a></span><span> </span><span id="local-6989586621681797541"><span class="annot"><span class="annottext">XDctSingle GhcPs
</span><a href="#local-6989586621681797541"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681797542"><span class="annot"><span class="annottext">LHsSigType GhcPs
</span><a href="#local-6989586621681797542"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-657"></span><span>        </span><span id="local-6989586621681797543"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsSigType GhcPs)
</span><a href="#local-6989586621681797543"><span class="hs-identifier hs-var">ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsSigType GhcPs)
-&gt; HdkA (GenLocated SrcSpanAnnA (HsSigType GhcPs))
forall a. HasHaddock a =&gt; a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs
GenLocated SrcSpanAnnA (HsSigType GhcPs)
</span><a href="#local-6989586621681797542"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-658"></span><span>        </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnC
-&gt; DerivClauseTys GhcPs
-&gt; GenLocated SrcSpanAnnC (DerivClauseTys GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnC
</span><a href="#local-6989586621681797538"><span class="hs-identifier hs-var">l_dct</span></a></span><span> </span><span class="annot"><span class="annottext">(DerivClauseTys GhcPs
 -&gt; GenLocated SrcSpanAnnC (DerivClauseTys GhcPs))
-&gt; DerivClauseTys GhcPs
-&gt; GenLocated SrcSpanAnnC (DerivClauseTys GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">XDctSingle GhcPs -&gt; LHsSigType GhcPs -&gt; DerivClauseTys GhcPs
forall pass.
XDctSingle pass -&gt; LHsSigType pass -&gt; DerivClauseTys pass
</span><a href="Language.Haskell.Syntax.Decls.html#DctSingle"><span class="hs-identifier hs-var">DctSingle</span></a></span><span> </span><span class="annot"><span class="annottext">XDctSingle GhcPs
</span><a href="#local-6989586621681797541"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LHsSigType GhcPs
GenLocated SrcSpanAnnA (HsSigType GhcPs)
</span><a href="#local-6989586621681797543"><span class="hs-identifier hs-var">ty'</span></a></span><span>
</span><span id="line-659"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#DctMulti"><span class="hs-identifier hs-type">DctMulti</span></a></span><span> </span><span id="local-6989586621681797545"><span class="annot"><span class="annottext">XDctMulti GhcPs
</span><a href="#local-6989586621681797545"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681797546"><span class="annot"><span class="annottext">[LHsSigType GhcPs]
</span><a href="#local-6989586621681797546"><span class="hs-identifier hs-var">tys</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-660"></span><span>        </span><span id="local-6989586621681797547"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsSigType GhcPs)]
</span><a href="#local-6989586621681797547"><span class="hs-identifier hs-var">tys'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (HsSigType GhcPs)]
-&gt; HdkA [GenLocated SrcSpanAnnA (HsSigType GhcPs)]
forall a. HasHaddock a =&gt; a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsSigType GhcPs]
[GenLocated SrcSpanAnnA (HsSigType GhcPs)]
</span><a href="#local-6989586621681797546"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-661"></span><span>        </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnC
-&gt; DerivClauseTys GhcPs
-&gt; GenLocated SrcSpanAnnC (DerivClauseTys GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnC
</span><a href="#local-6989586621681797538"><span class="hs-identifier hs-var">l_dct</span></a></span><span> </span><span class="annot"><span class="annottext">(DerivClauseTys GhcPs
 -&gt; GenLocated SrcSpanAnnC (DerivClauseTys GhcPs))
-&gt; DerivClauseTys GhcPs
-&gt; GenLocated SrcSpanAnnC (DerivClauseTys GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">XDctMulti GhcPs -&gt; [LHsSigType GhcPs] -&gt; DerivClauseTys GhcPs
forall pass.
XDctMulti pass -&gt; [LHsSigType pass] -&gt; DerivClauseTys pass
</span><a href="Language.Haskell.Syntax.Decls.html#DctMulti"><span class="hs-identifier hs-var">DctMulti</span></a></span><span> </span><span class="annot"><span class="annottext">XDctMulti GhcPs
</span><a href="#local-6989586621681797545"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsSigType GhcPs]
[GenLocated SrcSpanAnnA (HsSigType GhcPs)]
</span><a href="#local-6989586621681797547"><span class="hs-identifier hs-var">tys'</span></a></span><span>
</span><span id="line-662"></span><span>
</span><span id="line-663"></span><span class="hs-comment">-- Process a single data constructor declaration, which may come in one of the</span><span>
</span><span id="line-664"></span><span class="hs-comment">-- following forms:</span><span>
</span><span id="line-665"></span><span class="hs-comment">--</span><span>
</span><span id="line-666"></span><span class="hs-comment">--    1. H98-syntax PrefixCon:</span><span>
</span><span id="line-667"></span><span class="hs-comment">--          data T =</span><span>
</span><span id="line-668"></span><span class="hs-comment">--            MkT    -- ^ Comment on MkT</span><span>
</span><span id="line-669"></span><span class="hs-comment">--              Int  -- ^ Comment on Int</span><span>
</span><span id="line-670"></span><span class="hs-comment">--              Bool -- ^ Comment on Bool</span><span>
</span><span id="line-671"></span><span class="hs-comment">--</span><span>
</span><span id="line-672"></span><span class="hs-comment">--    2. H98-syntax InfixCon:</span><span>
</span><span id="line-673"></span><span class="hs-comment">--          data T =</span><span>
</span><span id="line-674"></span><span class="hs-comment">--            Int   -- ^ Comment on Int</span><span>
</span><span id="line-675"></span><span class="hs-comment">--              :+  -- ^ Comment on (:+)</span><span>
</span><span id="line-676"></span><span class="hs-comment">--            Bool  -- ^ Comment on Bool</span><span>
</span><span id="line-677"></span><span class="hs-comment">--</span><span>
</span><span id="line-678"></span><span class="hs-comment">--    3. H98-syntax RecCon:</span><span>
</span><span id="line-679"></span><span class="hs-comment">--          data T =</span><span>
</span><span id="line-680"></span><span class="hs-comment">--            MkT { int_field :: Int,     -- ^ Comment on int_field</span><span>
</span><span id="line-681"></span><span class="hs-comment">--                  bool_field :: Bool }  -- ^ Comment on bool_field</span><span>
</span><span id="line-682"></span><span class="hs-comment">--</span><span>
</span><span id="line-683"></span><span class="hs-comment">--    4. GADT-syntax PrefixCon:</span><span>
</span><span id="line-684"></span><span class="hs-comment">--          data T where</span><span>
</span><span id="line-685"></span><span class="hs-comment">--            -- | Comment on MkT</span><span>
</span><span id="line-686"></span><span class="hs-comment">--            MkT :: Int  -- ^ Comment on Int</span><span>
</span><span id="line-687"></span><span class="hs-comment">--                -&gt; Bool -- ^ Comment on Bool</span><span>
</span><span id="line-688"></span><span class="hs-comment">--                -&gt; T</span><span>
</span><span id="line-689"></span><span class="hs-comment">--</span><span>
</span><span id="line-690"></span><span class="hs-comment">--    5. GADT-syntax RecCon:</span><span>
</span><span id="line-691"></span><span class="hs-comment">--          data T where</span><span>
</span><span id="line-692"></span><span class="hs-comment">--            -- | Comment on MkT</span><span>
</span><span id="line-693"></span><span class="hs-comment">--            MkT :: { int_field :: Int,     -- ^ Comment on int_field</span><span>
</span><span id="line-694"></span><span class="hs-comment">--                     bool_field :: Bool }  -- ^ Comment on bool_field</span><span>
</span><span id="line-695"></span><span class="hs-comment">--                -&gt; T</span><span>
</span><span id="line-696"></span><span class="hs-comment">--</span><span>
</span><span id="line-697"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HasHaddock"><span class="hs-identifier hs-type">HasHaddock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ConDecl"><span class="hs-identifier hs-type">ConDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-698"></span><span>  </span><span id="local-6989586621681797580"><span class="annot"><span class="annottext">addHaddock :: GenLocated SrcSpanAnnA (ConDecl GhcPs)
-&gt; HdkA (GenLocated SrcSpanAnnA (ConDecl GhcPs))
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var hs-var hs-var hs-var">addHaddock</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681797581"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797581"><span class="hs-identifier hs-var">l_con_decl</span></a></span></span><span> </span><span id="local-6989586621681797582"><span class="annot"><span class="annottext">ConDecl GhcPs
</span><a href="#local-6989586621681797582"><span class="hs-identifier hs-var">con_decl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-699"></span><span>    </span><span class="annot"><span class="annottext">SrcSpan
-&gt; HdkA (GenLocated SrcSpanAnnA (ConDecl GhcPs))
-&gt; HdkA (GenLocated SrcSpanAnnA (ConDecl GhcPs))
forall a. SrcSpan -&gt; HdkA a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#extendHdkA"><span class="hs-identifier hs-var">extendHdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. SrcSpanAnn' a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797581"><span class="hs-identifier hs-var">l_con_decl</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(HdkA (GenLocated SrcSpanAnnA (ConDecl GhcPs))
 -&gt; HdkA (GenLocated SrcSpanAnnA (ConDecl GhcPs)))
-&gt; HdkA (GenLocated SrcSpanAnnA (ConDecl GhcPs))
-&gt; HdkA (GenLocated SrcSpanAnnA (ConDecl GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-700"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ConDecl GhcPs
</span><a href="#local-6989586621681797582"><span class="hs-identifier hs-var">con_decl</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-701"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ConDeclGADT"><span class="hs-identifier hs-type">ConDeclGADT</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681797584"><span class="annot"><span class="annottext">XConDeclGADT GhcPs
con_g_ext :: XConDeclGADT GhcPs
con_g_ext :: forall pass. ConDecl pass -&gt; XConDeclGADT pass
</span><a href="#local-6989586621681797584"><span class="hs-identifier hs-var hs-var">con_g_ext</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797586"><span class="annot"><span class="annottext">NonEmpty (LIdP GhcPs)
con_names :: NonEmpty (LIdP GhcPs)
con_names :: forall pass. ConDecl pass -&gt; NonEmpty (LIdP pass)
</span><a href="#local-6989586621681797586"><span class="hs-identifier hs-var hs-var">con_names</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797588"><span class="annot"><span class="annottext">LHsUniToken &quot;::&quot; &quot;\8759&quot; GhcPs
con_dcolon :: LHsUniToken &quot;::&quot; &quot;\8759&quot; GhcPs
con_dcolon :: forall pass. ConDecl pass -&gt; LHsUniToken &quot;::&quot; &quot;\8759&quot; pass
</span><a href="#local-6989586621681797588"><span class="hs-identifier hs-var hs-var">con_dcolon</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797590"><span class="annot"><span class="annottext">XRec GhcPs (HsOuterSigTyVarBndrs GhcPs)
con_bndrs :: XRec GhcPs (HsOuterSigTyVarBndrs GhcPs)
con_bndrs :: forall pass. ConDecl pass -&gt; XRec pass (HsOuterSigTyVarBndrs pass)
</span><a href="#local-6989586621681797590"><span class="hs-identifier hs-var hs-var">con_bndrs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797592"><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
con_mb_cxt :: Maybe (LHsContext GhcPs)
con_mb_cxt :: forall pass. ConDecl pass -&gt; Maybe (LHsContext pass)
</span><a href="#local-6989586621681797592"><span class="hs-identifier hs-var hs-var">con_mb_cxt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797594"><span class="annot"><span class="annottext">HsConDeclGADTDetails GhcPs
con_g_args :: HsConDeclGADTDetails GhcPs
con_g_args :: forall pass. ConDecl pass -&gt; HsConDeclGADTDetails pass
</span><a href="#local-6989586621681797594"><span class="hs-identifier hs-var hs-var">con_g_args</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797596"><span class="annot"><span class="annottext">LHsType GhcPs
con_res_ty :: LHsType GhcPs
con_res_ty :: forall pass. ConDecl pass -&gt; LHsType pass
</span><a href="#local-6989586621681797596"><span class="hs-identifier hs-var hs-var">con_res_ty</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-702"></span><span>        </span><span class="hs-comment">-- discardHasInnerDocs is ok because we don't need this info for GADTs.</span><span>
</span><span id="line-703"></span><span>        </span><span id="local-6989586621681797598"><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan HsDocString)
</span><a href="#local-6989586621681797598"><span class="hs-identifier hs-var">con_doc'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ConHdkA (Maybe (GenLocated SrcSpan HsDocString))
-&gt; HdkA (Maybe (GenLocated SrcSpan HsDocString))
forall a. ConHdkA a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#discardHasInnerDocs"><span class="hs-identifier hs-var">discardHasInnerDocs</span></a></span><span> </span><span class="annot"><span class="annottext">(ConHdkA (Maybe (GenLocated SrcSpan HsDocString))
 -&gt; HdkA (Maybe (GenLocated SrcSpan HsDocString)))
-&gt; ConHdkA (Maybe (GenLocated SrcSpan HsDocString))
-&gt; HdkA (Maybe (GenLocated SrcSpan HsDocString))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; ConHdkA (Maybe (GenLocated SrcSpan HsDocString))
</span><a href="GHC.Parser.PostProcess.Haddock.html#getConDoc"><span class="hs-identifier hs-var">getConDoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; SrcSpan
forall a e. GenLocated (SrcSpanAnn' a) e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty (LocatedN RdrName) -&gt; LocatedN RdrName
forall a. NonEmpty a -&gt; a
</span><a href="../../base-4.18.3.0/src/Data.List.NonEmpty.html#head/Data.List.NonEmpty.html#head"><span class="hs-identifier hs-var">NE.head</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (LIdP GhcPs)
NonEmpty (LocatedN RdrName)
</span><a href="#local-6989586621681797586"><span class="hs-identifier hs-var">con_names</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-704"></span><span>        </span><span id="local-6989586621681797602"><span class="annot"><span class="annottext">HsConDeclGADTDetails GhcPs
</span><a href="#local-6989586621681797602"><span class="hs-identifier hs-var">con_g_args'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-705"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsConDeclGADTDetails GhcPs
</span><a href="#local-6989586621681797594"><span class="hs-identifier hs-var">con_g_args</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-706"></span><span>            </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#PrefixConGADT"><span class="hs-identifier hs-type">PrefixConGADT</span></a></span><span> </span><span id="local-6989586621681797604"><span class="annot"><span class="annottext">[HsScaled GhcPs (LHsType GhcPs)]
</span><a href="#local-6989586621681797604"><span class="hs-identifier hs-var">ts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[HsScaled GhcPs (LHsType GhcPs)] -&gt; HsConDeclGADTDetails GhcPs
[HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))]
-&gt; HsConDeclGADTDetails GhcPs
forall pass.
[HsScaled pass (LBangType pass)] -&gt; HsConDeclGADTDetails pass
</span><a href="Language.Haskell.Syntax.Decls.html#PrefixConGADT"><span class="hs-identifier hs-var">PrefixConGADT</span></a></span><span> </span><span class="annot"><span class="annottext">([HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))]
 -&gt; HsConDeclGADTDetails GhcPs)
-&gt; HdkA [HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))]
-&gt; HdkA (HsConDeclGADTDetails GhcPs)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/Data.Functor.html#%3C%24%3E/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))]
-&gt; HdkA [HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))]
forall a. HasHaddock a =&gt; a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="annot"><span class="annottext">[HsScaled GhcPs (LHsType GhcPs)]
[HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))]
</span><a href="#local-6989586621681797604"><span class="hs-identifier hs-var">ts</span></a></span><span>
</span><span id="line-707"></span><span>            </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#RecConGADT"><span class="hs-identifier hs-type">RecConGADT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681797606"><span class="annot"><span class="annottext">SrcSpanAnnL
</span><a href="#local-6989586621681797606"><span class="hs-identifier hs-var">l_rec</span></a></span></span><span> </span><span id="local-6989586621681797607"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
</span><a href="#local-6989586621681797607"><span class="hs-identifier hs-var">flds</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681797608"><span class="annot"><span class="annottext">LHsUniToken &quot;-&gt;&quot; &quot;\8594&quot; GhcPs
</span><a href="#local-6989586621681797608"><span class="hs-identifier hs-var">arr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-708"></span><span>              </span><span class="hs-comment">-- discardHasInnerDocs is ok because we don't need this info for GADTs.</span><span>
</span><span id="line-709"></span><span>              </span><span id="local-6989586621681797609"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
</span><a href="#local-6989586621681797609"><span class="hs-identifier hs-var">flds'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (ConDeclField GhcPs)
 -&gt; HdkA (GenLocated SrcSpanAnnA (ConDeclField GhcPs)))
-&gt; [GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
-&gt; HdkA [GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><a href="../../base-4.18.3.0/src/Data.Traversable.html#traverse/Data.Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConHdkA (GenLocated SrcSpanAnnA (ConDeclField GhcPs))
-&gt; HdkA (GenLocated SrcSpanAnnA (ConDeclField GhcPs))
forall a. ConHdkA a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#discardHasInnerDocs"><span class="hs-identifier hs-var">discardHasInnerDocs</span></a></span><span> </span><span class="annot"><span class="annottext">(ConHdkA (GenLocated SrcSpanAnnA (ConDeclField GhcPs))
 -&gt; HdkA (GenLocated SrcSpanAnnA (ConDeclField GhcPs)))
-&gt; (GenLocated SrcSpanAnnA (ConDeclField GhcPs)
    -&gt; ConHdkA (GenLocated SrcSpanAnnA (ConDeclField GhcPs)))
-&gt; GenLocated SrcSpanAnnA (ConDeclField GhcPs)
-&gt; HdkA (GenLocated SrcSpanAnnA (ConDeclField GhcPs))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">LConDeclField GhcPs -&gt; ConHdkA (LConDeclField GhcPs)
GenLocated SrcSpanAnnA (ConDeclField GhcPs)
-&gt; ConHdkA (GenLocated SrcSpanAnnA (ConDeclField GhcPs))
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddockConDeclField"><span class="hs-identifier hs-var">addHaddockConDeclField</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
</span><a href="#local-6989586621681797607"><span class="hs-identifier hs-var">flds</span></a></span><span>
</span><span id="line-710"></span><span>              </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">XRec GhcPs [LConDeclField GhcPs]
-&gt; LHsUniToken &quot;-&gt;&quot; &quot;\8594&quot; GhcPs -&gt; HsConDeclGADTDetails GhcPs
forall pass.
XRec pass [LConDeclField pass]
-&gt; LHsUniToken &quot;-&gt;&quot; &quot;\8594&quot; pass -&gt; HsConDeclGADTDetails pass
</span><a href="Language.Haskell.Syntax.Decls.html#RecConGADT"><span class="hs-identifier hs-var">RecConGADT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnL
-&gt; [GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
-&gt; GenLocated
     SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnL
</span><a href="#local-6989586621681797606"><span class="hs-identifier hs-var">l_rec</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
</span><a href="#local-6989586621681797609"><span class="hs-identifier hs-var">flds'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LHsUniToken &quot;-&gt;&quot; &quot;\8594&quot; GhcPs
</span><a href="#local-6989586621681797608"><span class="hs-identifier hs-var">arr</span></a></span><span>
</span><span id="line-711"></span><span>        </span><span id="local-6989586621681797612"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621681797612"><span class="hs-identifier hs-var">con_res_ty'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; HdkA (GenLocated SrcSpanAnnA (HsType GhcPs))
forall a. HasHaddock a =&gt; a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621681797596"><span class="hs-identifier hs-var">con_res_ty</span></a></span><span>
</span><span id="line-712"></span><span>        </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; ConDecl GhcPs -&gt; GenLocated SrcSpanAnnA (ConDecl GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797581"><span class="hs-identifier hs-var">l_con_decl</span></a></span><span> </span><span class="annot"><span class="annottext">(ConDecl GhcPs -&gt; GenLocated SrcSpanAnnA (ConDecl GhcPs))
-&gt; ConDecl GhcPs -&gt; GenLocated SrcSpanAnnA (ConDecl GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-713"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ConDeclGADT"><span class="hs-identifier hs-type">ConDeclGADT</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">XConDeclGADT GhcPs
con_g_ext :: XConDeclGADT GhcPs
con_g_ext :: XConDeclGADT GhcPs
</span><a href="#local-6989586621681797584"><span class="hs-identifier hs-var hs-var">con_g_ext</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NonEmpty (LIdP GhcPs)
con_names :: NonEmpty (LIdP GhcPs)
con_names :: NonEmpty (LIdP GhcPs)
</span><a href="#local-6989586621681797586"><span class="hs-identifier hs-var hs-var">con_names</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LHsUniToken &quot;::&quot; &quot;\8759&quot; GhcPs
con_dcolon :: LHsUniToken &quot;::&quot; &quot;\8759&quot; GhcPs
con_dcolon :: LHsUniToken &quot;::&quot; &quot;\8759&quot; GhcPs
</span><a href="#local-6989586621681797588"><span class="hs-identifier hs-var hs-var">con_dcolon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">XRec GhcPs (HsOuterSigTyVarBndrs GhcPs)
con_bndrs :: XRec GhcPs (HsOuterSigTyVarBndrs GhcPs)
con_bndrs :: XRec GhcPs (HsOuterSigTyVarBndrs GhcPs)
</span><a href="#local-6989586621681797590"><span class="hs-identifier hs-var hs-var">con_bndrs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
con_mb_cxt :: Maybe (LHsContext GhcPs)
con_mb_cxt :: Maybe (LHsContext GhcPs)
</span><a href="#local-6989586621681797592"><span class="hs-identifier hs-var hs-var">con_mb_cxt</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-714"></span><span>                        </span><span class="annot"><span class="annottext">con_doc :: Maybe (LHsDoc GhcPs)
</span><a href="Language.Haskell.Syntax.Decls.html#con_doc"><span class="hs-identifier hs-var">con_doc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan HsDocString -&gt; LHsDoc GhcPs
</span><a href="GHC.Parser.PostProcess.Haddock.html#lexLHsDocString"><span class="hs-identifier hs-var">lexLHsDocString</span></a></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpan HsDocString -&gt; LHsDoc GhcPs)
-&gt; Maybe (GenLocated SrcSpan HsDocString) -&gt; Maybe (LHsDoc GhcPs)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/Data.Functor.html#%3C%24%3E/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan HsDocString)
</span><a href="#local-6989586621681797598"><span class="hs-identifier hs-var">con_doc'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-715"></span><span>                        </span><span class="annot"><span class="annottext">con_g_args :: HsConDeclGADTDetails GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#con_g_args"><span class="hs-identifier hs-var">con_g_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsConDeclGADTDetails GhcPs
</span><a href="#local-6989586621681797602"><span class="hs-identifier hs-var">con_g_args'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-716"></span><span>                        </span><span class="annot"><span class="annottext">con_res_ty :: LHsType GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#con_res_ty"><span class="hs-identifier hs-var">con_res_ty</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621681797612"><span class="hs-identifier hs-var">con_res_ty'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-717"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ConDeclH98"><span class="hs-identifier hs-type">ConDeclH98</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681797615"><span class="annot"><span class="annottext">XConDeclH98 GhcPs
con_ext :: XConDeclH98 GhcPs
con_ext :: forall pass. ConDecl pass -&gt; XConDeclH98 pass
</span><a href="#local-6989586621681797615"><span class="hs-identifier hs-var hs-var">con_ext</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797617"><span class="annot"><span class="annottext">LIdP GhcPs
con_name :: LIdP GhcPs
con_name :: forall pass. ConDecl pass -&gt; LIdP pass
</span><a href="#local-6989586621681797617"><span class="hs-identifier hs-var hs-var">con_name</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797619"><span class="annot"><span class="annottext">Bool
con_forall :: Bool
con_forall :: forall pass. ConDecl pass -&gt; Bool
</span><a href="#local-6989586621681797619"><span class="hs-identifier hs-var hs-var">con_forall</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797621"><span class="annot"><span class="annottext">[LHsTyVarBndr Specificity GhcPs]
con_ex_tvs :: [LHsTyVarBndr Specificity GhcPs]
con_ex_tvs :: forall pass. ConDecl pass -&gt; [LHsTyVarBndr Specificity pass]
</span><a href="#local-6989586621681797621"><span class="hs-identifier hs-var hs-var">con_ex_tvs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797623"><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
con_mb_cxt :: forall pass. ConDecl pass -&gt; Maybe (LHsContext pass)
con_mb_cxt :: Maybe (LHsContext GhcPs)
</span><a href="Language.Haskell.Syntax.Decls.html#con_mb_cxt"><span class="hs-identifier hs-var hs-var">con_mb_cxt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797624"><span class="annot"><span class="annottext">HsConDeclH98Details GhcPs
con_args :: HsConDeclH98Details GhcPs
con_args :: forall pass. ConDecl pass -&gt; HsConDeclH98Details pass
</span><a href="#local-6989586621681797624"><span class="hs-identifier hs-var hs-var">con_args</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-718"></span><span>        </span><span class="annot"><span class="annottext">SrcLoc -&gt; ConHdkA (LConDecl GhcPs) -&gt; HdkA (LConDecl GhcPs)
</span><a href="GHC.Parser.PostProcess.Haddock.html#addConTrailingDoc"><span class="hs-identifier hs-var">addConTrailingDoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcLoc
</span><a href="GHC.Types.SrcLoc.html#srcSpanEnd"><span class="hs-identifier hs-var">srcSpanEnd</span></a></span><span> </span><span class="annot"><span class="annottext">(SrcSpan -&gt; SrcLoc) -&gt; SrcSpan -&gt; SrcLoc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. SrcSpanAnn' a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797581"><span class="hs-identifier hs-var">l_con_decl</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ConHdkA (LConDecl GhcPs) -&gt; HdkA (LConDecl GhcPs))
-&gt; ConHdkA (LConDecl GhcPs) -&gt; HdkA (LConDecl GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-719"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsConDeclH98Details GhcPs
</span><a href="#local-6989586621681797624"><span class="hs-identifier hs-var">con_args</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-720"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#PrefixCon"><span class="hs-identifier hs-type">PrefixCon</span></a></span><span> </span><span class="annot"><span class="annottext">[Void]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681797628"><span class="annot"><span class="annottext">[HsScaled GhcPs (LHsType GhcPs)]
</span><a href="#local-6989586621681797628"><span class="hs-identifier hs-var">ts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-721"></span><span>            </span><span id="local-6989586621681797629"><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan HsDocString)
</span><a href="#local-6989586621681797629"><span class="hs-identifier hs-var">con_doc'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; ConHdkA (Maybe (GenLocated SrcSpan HsDocString))
</span><a href="GHC.Parser.PostProcess.Haddock.html#getConDoc"><span class="hs-identifier hs-var">getConDoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; SrcSpan
forall a e. GenLocated (SrcSpanAnn' a) e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
LocatedN RdrName
</span><a href="#local-6989586621681797617"><span class="hs-identifier hs-var">con_name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-722"></span><span>            </span><span id="local-6989586621681797630"><span class="annot"><span class="annottext">[HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))]
</span><a href="#local-6989586621681797630"><span class="hs-identifier hs-var">ts'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))
 -&gt; WriterT
      HasInnerDocs
      HdkA
      (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))))
-&gt; [HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))]
-&gt; WriterT
     HasInnerDocs
     HdkA
     [HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><a href="../../base-4.18.3.0/src/Data.Traversable.html#traverse/Data.Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="annot"><span class="annottext">HsScaled GhcPs (LHsType GhcPs)
-&gt; ConHdkA (HsScaled GhcPs (LHsType GhcPs))
HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))
-&gt; WriterT
     HasInnerDocs
     HdkA
     (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddockConDeclFieldTy"><span class="hs-identifier hs-var">addHaddockConDeclFieldTy</span></a></span><span> </span><span class="annot"><span class="annottext">[HsScaled GhcPs (LHsType GhcPs)]
[HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))]
</span><a href="#local-6989586621681797628"><span class="hs-identifier hs-var">ts</span></a></span><span>
</span><span id="line-723"></span><span>            </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; ConDecl GhcPs -&gt; GenLocated SrcSpanAnnA (ConDecl GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797581"><span class="hs-identifier hs-var">l_con_decl</span></a></span><span> </span><span class="annot"><span class="annottext">(ConDecl GhcPs -&gt; GenLocated SrcSpanAnnA (ConDecl GhcPs))
-&gt; ConDecl GhcPs -&gt; GenLocated SrcSpanAnnA (ConDecl GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-724"></span><span>              </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ConDeclH98"><span class="hs-identifier hs-type">ConDeclH98</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">XConDeclH98 GhcPs
con_ext :: XConDeclH98 GhcPs
con_ext :: XConDeclH98 GhcPs
</span><a href="#local-6989586621681797615"><span class="hs-identifier hs-var hs-var">con_ext</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
con_name :: LIdP GhcPs
con_name :: LIdP GhcPs
</span><a href="#local-6989586621681797617"><span class="hs-identifier hs-var hs-var">con_name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
con_forall :: Bool
con_forall :: Bool
</span><a href="#local-6989586621681797619"><span class="hs-identifier hs-var hs-var">con_forall</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr Specificity GhcPs]
con_ex_tvs :: [LHsTyVarBndr Specificity GhcPs]
con_ex_tvs :: [LHsTyVarBndr Specificity GhcPs]
</span><a href="#local-6989586621681797621"><span class="hs-identifier hs-var hs-var">con_ex_tvs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
con_mb_cxt :: Maybe (LHsContext GhcPs)
con_mb_cxt :: Maybe (LHsContext GhcPs)
</span><a href="Language.Haskell.Syntax.Decls.html#con_mb_cxt"><span class="hs-identifier hs-var hs-var">con_mb_cxt</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-725"></span><span>                           </span><span class="annot"><span class="annottext">con_doc :: Maybe (LHsDoc GhcPs)
</span><a href="Language.Haskell.Syntax.Decls.html#con_doc"><span class="hs-identifier hs-var">con_doc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan HsDocString -&gt; LHsDoc GhcPs
</span><a href="GHC.Parser.PostProcess.Haddock.html#lexLHsDocString"><span class="hs-identifier hs-var">lexLHsDocString</span></a></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpan HsDocString -&gt; LHsDoc GhcPs)
-&gt; Maybe (GenLocated SrcSpan HsDocString) -&gt; Maybe (LHsDoc GhcPs)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/Data.Functor.html#%3C%24%3E/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan HsDocString)
</span><a href="#local-6989586621681797629"><span class="hs-identifier hs-var">con_doc'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-726"></span><span>                           </span><span class="annot"><span class="annottext">con_args :: HsConDeclH98Details GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#con_args"><span class="hs-identifier hs-var">con_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Void]
-&gt; [HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))]
-&gt; HsConDetails
     Void
     (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
     (GenLocated
        SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)])
forall tyarg arg rec.
[tyarg] -&gt; [arg] -&gt; HsConDetails tyarg arg rec
</span><a href="Language.Haskell.Syntax.Type.html#PrefixCon"><span class="hs-identifier hs-var">PrefixCon</span></a></span><span> </span><span class="annot"><span class="annottext">[Void]
</span><a href="Language.Haskell.Syntax.Type.html#noTypeArgs"><span class="hs-identifier hs-var">noTypeArgs</span></a></span><span> </span><span class="annot"><span class="annottext">[HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))]
</span><a href="#local-6989586621681797630"><span class="hs-identifier hs-var">ts'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-727"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#InfixCon"><span class="hs-identifier hs-type">InfixCon</span></a></span><span> </span><span id="local-6989586621681797634"><span class="annot"><span class="annottext">HsScaled GhcPs (LHsType GhcPs)
</span><a href="#local-6989586621681797634"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681797635"><span class="annot"><span class="annottext">HsScaled GhcPs (LHsType GhcPs)
</span><a href="#local-6989586621681797635"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-728"></span><span>            </span><span id="local-6989586621681797636"><span class="annot"><span class="annottext">HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))
</span><a href="#local-6989586621681797636"><span class="hs-identifier hs-var">t1'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsScaled GhcPs (LHsType GhcPs)
-&gt; ConHdkA (HsScaled GhcPs (LHsType GhcPs))
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddockConDeclFieldTy"><span class="hs-identifier hs-var">addHaddockConDeclFieldTy</span></a></span><span> </span><span class="annot"><span class="annottext">HsScaled GhcPs (LHsType GhcPs)
</span><a href="#local-6989586621681797634"><span class="hs-identifier hs-var">t1</span></a></span><span>
</span><span id="line-729"></span><span>            </span><span id="local-6989586621681797637"><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan HsDocString)
</span><a href="#local-6989586621681797637"><span class="hs-identifier hs-var">con_doc'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; ConHdkA (Maybe (GenLocated SrcSpan HsDocString))
</span><a href="GHC.Parser.PostProcess.Haddock.html#getConDoc"><span class="hs-identifier hs-var">getConDoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; SrcSpan
forall a e. GenLocated (SrcSpanAnn' a) e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
LocatedN RdrName
</span><a href="#local-6989586621681797617"><span class="hs-identifier hs-var">con_name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-730"></span><span>            </span><span id="local-6989586621681797638"><span class="annot"><span class="annottext">HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))
</span><a href="#local-6989586621681797638"><span class="hs-identifier hs-var">t2'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HsScaled GhcPs (LHsType GhcPs)
-&gt; ConHdkA (HsScaled GhcPs (LHsType GhcPs))
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddockConDeclFieldTy"><span class="hs-identifier hs-var">addHaddockConDeclFieldTy</span></a></span><span> </span><span class="annot"><span class="annottext">HsScaled GhcPs (LHsType GhcPs)
</span><a href="#local-6989586621681797635"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-731"></span><span>            </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; ConDecl GhcPs -&gt; GenLocated SrcSpanAnnA (ConDecl GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797581"><span class="hs-identifier hs-var">l_con_decl</span></a></span><span> </span><span class="annot"><span class="annottext">(ConDecl GhcPs -&gt; GenLocated SrcSpanAnnA (ConDecl GhcPs))
-&gt; ConDecl GhcPs -&gt; GenLocated SrcSpanAnnA (ConDecl GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-732"></span><span>              </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ConDeclH98"><span class="hs-identifier hs-type">ConDeclH98</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">XConDeclH98 GhcPs
con_ext :: XConDeclH98 GhcPs
con_ext :: XConDeclH98 GhcPs
</span><a href="#local-6989586621681797615"><span class="hs-identifier hs-var hs-var">con_ext</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
con_name :: LIdP GhcPs
con_name :: LIdP GhcPs
</span><a href="#local-6989586621681797617"><span class="hs-identifier hs-var hs-var">con_name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
con_forall :: Bool
con_forall :: Bool
</span><a href="#local-6989586621681797619"><span class="hs-identifier hs-var hs-var">con_forall</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr Specificity GhcPs]
con_ex_tvs :: [LHsTyVarBndr Specificity GhcPs]
con_ex_tvs :: [LHsTyVarBndr Specificity GhcPs]
</span><a href="#local-6989586621681797621"><span class="hs-identifier hs-var hs-var">con_ex_tvs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
con_mb_cxt :: Maybe (LHsContext GhcPs)
con_mb_cxt :: Maybe (LHsContext GhcPs)
</span><a href="Language.Haskell.Syntax.Decls.html#con_mb_cxt"><span class="hs-identifier hs-var hs-var">con_mb_cxt</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-733"></span><span>                           </span><span class="annot"><span class="annottext">con_doc :: Maybe (LHsDoc GhcPs)
</span><a href="Language.Haskell.Syntax.Decls.html#con_doc"><span class="hs-identifier hs-var">con_doc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan HsDocString -&gt; LHsDoc GhcPs
</span><a href="GHC.Parser.PostProcess.Haddock.html#lexLHsDocString"><span class="hs-identifier hs-var">lexLHsDocString</span></a></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpan HsDocString -&gt; LHsDoc GhcPs)
-&gt; Maybe (GenLocated SrcSpan HsDocString) -&gt; Maybe (LHsDoc GhcPs)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/Data.Functor.html#%3C%24%3E/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan HsDocString)
</span><a href="#local-6989586621681797637"><span class="hs-identifier hs-var">con_doc'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-734"></span><span>                           </span><span class="annot"><span class="annottext">con_args :: HsConDeclH98Details GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#con_args"><span class="hs-identifier hs-var">con_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))
-&gt; HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))
-&gt; HsConDetails
     Void
     (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
     (GenLocated
        SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)])
forall tyarg arg rec. arg -&gt; arg -&gt; HsConDetails tyarg arg rec
</span><a href="Language.Haskell.Syntax.Type.html#InfixCon"><span class="hs-identifier hs-var">InfixCon</span></a></span><span> </span><span class="annot"><span class="annottext">HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))
</span><a href="#local-6989586621681797636"><span class="hs-identifier hs-var">t1'</span></a></span><span> </span><span class="annot"><span class="annottext">HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))
</span><a href="#local-6989586621681797638"><span class="hs-identifier hs-var">t2'</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-735"></span><span>          </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#RecCon"><span class="hs-identifier hs-type">RecCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681797640"><span class="annot"><span class="annottext">SrcSpanAnnL
</span><a href="#local-6989586621681797640"><span class="hs-identifier hs-var">l_rec</span></a></span></span><span> </span><span id="local-6989586621681797641"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
</span><a href="#local-6989586621681797641"><span class="hs-identifier hs-var">flds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-736"></span><span>            </span><span id="local-6989586621681797642"><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan HsDocString)
</span><a href="#local-6989586621681797642"><span class="hs-identifier hs-var">con_doc'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; ConHdkA (Maybe (GenLocated SrcSpan HsDocString))
</span><a href="GHC.Parser.PostProcess.Haddock.html#getConDoc"><span class="hs-identifier hs-var">getConDoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocatedN RdrName -&gt; SrcSpan
forall a e. GenLocated (SrcSpanAnn' a) e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
LocatedN RdrName
</span><a href="#local-6989586621681797617"><span class="hs-identifier hs-var">con_name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-737"></span><span>            </span><span id="local-6989586621681797643"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
</span><a href="#local-6989586621681797643"><span class="hs-identifier hs-var">flds'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (ConDeclField GhcPs)
 -&gt; ConHdkA (GenLocated SrcSpanAnnA (ConDeclField GhcPs)))
-&gt; [GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
-&gt; WriterT
     HasInnerDocs HdkA [GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
forall (f :: * -&gt; *) a b.
Applicative f =&gt;
(a -&gt; f b) -&gt; [a] -&gt; f [b]
</span><a href="../../base-4.18.3.0/src/Data.Traversable.html#traverse/Data.Traversable.html#traverse"><span class="hs-identifier hs-var">traverse</span></a></span><span> </span><span class="annot"><span class="annottext">LConDeclField GhcPs -&gt; ConHdkA (LConDeclField GhcPs)
GenLocated SrcSpanAnnA (ConDeclField GhcPs)
-&gt; ConHdkA (GenLocated SrcSpanAnnA (ConDeclField GhcPs))
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddockConDeclField"><span class="hs-identifier hs-var">addHaddockConDeclField</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
</span><a href="#local-6989586621681797641"><span class="hs-identifier hs-var">flds</span></a></span><span>
</span><span id="line-738"></span><span>            </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; ConDecl GhcPs -&gt; GenLocated SrcSpanAnnA (ConDecl GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797581"><span class="hs-identifier hs-var">l_con_decl</span></a></span><span> </span><span class="annot"><span class="annottext">(ConDecl GhcPs -&gt; GenLocated SrcSpanAnnA (ConDecl GhcPs))
-&gt; ConDecl GhcPs -&gt; GenLocated SrcSpanAnnA (ConDecl GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-739"></span><span>              </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ConDeclH98"><span class="hs-identifier hs-type">ConDeclH98</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">XConDeclH98 GhcPs
con_ext :: XConDeclH98 GhcPs
con_ext :: XConDeclH98 GhcPs
</span><a href="#local-6989586621681797615"><span class="hs-identifier hs-var hs-var">con_ext</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LIdP GhcPs
con_name :: LIdP GhcPs
con_name :: LIdP GhcPs
</span><a href="#local-6989586621681797617"><span class="hs-identifier hs-var hs-var">con_name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
con_forall :: Bool
con_forall :: Bool
</span><a href="#local-6989586621681797619"><span class="hs-identifier hs-var hs-var">con_forall</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr Specificity GhcPs]
con_ex_tvs :: [LHsTyVarBndr Specificity GhcPs]
con_ex_tvs :: [LHsTyVarBndr Specificity GhcPs]
</span><a href="#local-6989586621681797621"><span class="hs-identifier hs-var hs-var">con_ex_tvs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (LHsContext GhcPs)
con_mb_cxt :: Maybe (LHsContext GhcPs)
con_mb_cxt :: Maybe (LHsContext GhcPs)
</span><a href="Language.Haskell.Syntax.Decls.html#con_mb_cxt"><span class="hs-identifier hs-var hs-var">con_mb_cxt</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-740"></span><span>                           </span><span class="annot"><span class="annottext">con_doc :: Maybe (LHsDoc GhcPs)
</span><a href="Language.Haskell.Syntax.Decls.html#con_doc"><span class="hs-identifier hs-var">con_doc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan HsDocString -&gt; LHsDoc GhcPs
</span><a href="GHC.Parser.PostProcess.Haddock.html#lexLHsDocString"><span class="hs-identifier hs-var">lexLHsDocString</span></a></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpan HsDocString -&gt; LHsDoc GhcPs)
-&gt; Maybe (GenLocated SrcSpan HsDocString) -&gt; Maybe (LHsDoc GhcPs)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/Data.Functor.html#%3C%24%3E/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan HsDocString)
</span><a href="#local-6989586621681797642"><span class="hs-identifier hs-var">con_doc'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-741"></span><span>                           </span><span class="annot"><span class="annottext">con_args :: HsConDeclH98Details GhcPs
</span><a href="Language.Haskell.Syntax.Decls.html#con_args"><span class="hs-identifier hs-var">con_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated
  SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
-&gt; HsConDetails
     Void
     (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
     (GenLocated
        SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)])
forall tyarg arg rec. rec -&gt; HsConDetails tyarg arg rec
</span><a href="Language.Haskell.Syntax.Type.html#RecCon"><span class="hs-identifier hs-var">RecCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnL
-&gt; [GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
-&gt; GenLocated
     SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnL
</span><a href="#local-6989586621681797640"><span class="hs-identifier hs-var">l_rec</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
</span><a href="#local-6989586621681797643"><span class="hs-identifier hs-var">flds'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-742"></span><span>
</span><span id="line-743"></span><span class="hs-comment">-- Keep track of documentation comments on the data constructor or any of its</span><span>
</span><span id="line-744"></span><span class="hs-comment">-- fields.</span><span>
</span><span id="line-745"></span><span class="hs-comment">--</span><span>
</span><span id="line-746"></span><span class="hs-comment">-- See Note [Trailing comment on constructor declaration]</span><span>
</span><span id="line-747"></span><span class="hs-keyword">type</span><span> </span><span id="ConHdkA"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#ConHdkA"><span class="hs-identifier hs-var">ConHdkA</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Writer.Lazy.html#WriterT/Control.Monad.Trans.Writer.Lazy.html#WriterT"><span class="hs-identifier hs-type">WriterT</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HasInnerDocs"><span class="hs-identifier hs-type">HasInnerDocs</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkA"><span class="hs-identifier hs-type">HdkA</span></a></span><span>
</span><span id="line-748"></span><span>
</span><span id="line-749"></span><span class="hs-comment">-- Does the data constructor declaration have any inner (non-trailing)</span><span>
</span><span id="line-750"></span><span class="hs-comment">-- documentation comments?</span><span>
</span><span id="line-751"></span><span class="hs-comment">--</span><span>
</span><span id="line-752"></span><span class="hs-comment">-- Example when HasInnerDocs is True:</span><span>
</span><span id="line-753"></span><span class="hs-comment">--</span><span>
</span><span id="line-754"></span><span class="hs-comment">--   data X =</span><span>
</span><span id="line-755"></span><span class="hs-comment">--      MkX       -- ^ inner comment</span><span>
</span><span id="line-756"></span><span class="hs-comment">--        Field1  -- ^ inner comment</span><span>
</span><span id="line-757"></span><span class="hs-comment">--        Field2  -- ^ inner comment</span><span>
</span><span id="line-758"></span><span class="hs-comment">--        Field3  -- ^ trailing comment</span><span>
</span><span id="line-759"></span><span class="hs-comment">--</span><span>
</span><span id="line-760"></span><span class="hs-comment">-- Example when HasInnerDocs is False:</span><span>
</span><span id="line-761"></span><span class="hs-comment">--</span><span>
</span><span id="line-762"></span><span class="hs-comment">--   data Y = MkY Field1 Field2 Field3  -- ^ trailing comment</span><span>
</span><span id="line-763"></span><span class="hs-comment">--</span><span>
</span><span id="line-764"></span><span class="hs-comment">-- See Note [Trailing comment on constructor declaration]</span><span>
</span><span id="line-765"></span><span class="hs-keyword">newtype</span><span> </span><span id="HasInnerDocs"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HasInnerDocs"><span class="hs-identifier hs-var">HasInnerDocs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="HasInnerDocs"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HasInnerDocs"><span class="hs-identifier hs-var">HasInnerDocs</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-766"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681797646"><span id="local-6989586621681797651"><span id="local-6989586621681797657"><span class="annot"><span class="annottext">NonEmpty HasInnerDocs -&gt; HasInnerDocs
HasInnerDocs -&gt; HasInnerDocs -&gt; HasInnerDocs
(HasInnerDocs -&gt; HasInnerDocs -&gt; HasInnerDocs)
-&gt; (NonEmpty HasInnerDocs -&gt; HasInnerDocs)
-&gt; (forall b. Integral b =&gt; b -&gt; HasInnerDocs -&gt; HasInnerDocs)
-&gt; Semigroup HasInnerDocs
forall b. Integral b =&gt; b -&gt; HasInnerDocs -&gt; HasInnerDocs
forall a.
(a -&gt; a -&gt; a)
-&gt; (NonEmpty a -&gt; a)
-&gt; (forall b. Integral b =&gt; b -&gt; a -&gt; a)
-&gt; Semigroup a
$c&lt;&gt; :: HasInnerDocs -&gt; HasInnerDocs -&gt; HasInnerDocs
&lt;&gt; :: HasInnerDocs -&gt; HasInnerDocs -&gt; HasInnerDocs
$csconcat :: NonEmpty HasInnerDocs -&gt; HasInnerDocs
sconcat :: NonEmpty HasInnerDocs -&gt; HasInnerDocs
$cstimes :: forall b. Integral b =&gt; b -&gt; HasInnerDocs -&gt; HasInnerDocs
stimes :: forall b. Integral b =&gt; b -&gt; HasInnerDocs -&gt; HasInnerDocs
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#Semigroup/GHC.Base.html#Semigroup"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Semigroup</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797667"><span id="local-6989586621681797672"><span id="local-6989586621681797676"><span class="annot"><span class="annottext">Semigroup HasInnerDocs
HasInnerDocs
Semigroup HasInnerDocs =&gt;
HasInnerDocs
-&gt; (HasInnerDocs -&gt; HasInnerDocs -&gt; HasInnerDocs)
-&gt; ([HasInnerDocs] -&gt; HasInnerDocs)
-&gt; Monoid HasInnerDocs
[HasInnerDocs] -&gt; HasInnerDocs
HasInnerDocs -&gt; HasInnerDocs -&gt; HasInnerDocs
forall a.
Semigroup a =&gt;
a -&gt; (a -&gt; a -&gt; a) -&gt; ([a] -&gt; a) -&gt; Monoid a
$cmempty :: HasInnerDocs
mempty :: HasInnerDocs
$cmappend :: HasInnerDocs -&gt; HasInnerDocs -&gt; HasInnerDocs
mappend :: HasInnerDocs -&gt; HasInnerDocs -&gt; HasInnerDocs
$cmconcat :: [HasInnerDocs] -&gt; HasInnerDocs
mconcat :: [HasInnerDocs] -&gt; HasInnerDocs
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#Monoid/GHC.Base.html#Monoid"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monoid</span></a></span></span></span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">via</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/Data.Semigroup.Internal.html#Any/Data.Semigroup.Internal.html#Any"><span class="hs-identifier hs-type">Data.Monoid.Any</span></a></span><span>
</span><span id="line-767"></span><span>
</span><span id="line-768"></span><span class="hs-comment">-- Run ConHdkA by discarding the HasInnerDocs info when we have no use for it.</span><span>
</span><span id="line-769"></span><span class="hs-comment">--</span><span>
</span><span id="line-770"></span><span class="hs-comment">-- We only do this when processing data declarations that use GADT syntax,</span><span>
</span><span id="line-771"></span><span class="hs-comment">-- because only the H98 syntax declarations have special treatment for the</span><span>
</span><span id="line-772"></span><span class="hs-comment">-- trailing documentation comment.</span><span>
</span><span id="line-773"></span><span class="hs-comment">--</span><span>
</span><span id="line-774"></span><span class="hs-comment">-- See Note [Trailing comment on constructor declaration]</span><span>
</span><span id="line-775"></span><span id="local-6989586621681796888"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#discardHasInnerDocs"><span class="hs-identifier hs-type">discardHasInnerDocs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#ConHdkA"><span class="hs-identifier hs-type">ConHdkA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681796888"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkA"><span class="hs-identifier hs-type">HdkA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681796888"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-776"></span><span id="discardHasInnerDocs"><span class="annot"><span class="annottext">discardHasInnerDocs :: forall a. ConHdkA a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#discardHasInnerDocs"><span class="hs-identifier hs-var hs-var">discardHasInnerDocs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((a, HasInnerDocs) -&gt; a) -&gt; HdkA (a, HasInnerDocs) -&gt; HdkA a
forall a b. (a -&gt; b) -&gt; HdkA a -&gt; HdkA b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#fmap/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">(a, HasInnerDocs) -&gt; a
forall a b. (a, b) -&gt; a
</span><a href="../../base-4.18.3.0/src/Data.Tuple.html#fst/Data.Tuple.html#fst"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">(HdkA (a, HasInnerDocs) -&gt; HdkA a)
-&gt; (ConHdkA a -&gt; HdkA (a, HasInnerDocs)) -&gt; ConHdkA a -&gt; HdkA a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ConHdkA a -&gt; HdkA (a, HasInnerDocs)
forall w (m :: * -&gt; *) a. WriterT w m a -&gt; m (a, w)
</span><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Writer.Lazy.html#runWriterT/Control.Monad.Trans.Writer.Lazy.html#runWriterT"><span class="hs-identifier hs-var">runWriterT</span></a></span><span>
</span><span id="line-777"></span><span>
</span><span id="line-778"></span><span class="hs-comment">-- Get the documentation comment associated with the data constructor in a</span><span>
</span><span id="line-779"></span><span class="hs-comment">-- data/newtype declaration.</span><span>
</span><span id="line-780"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#getConDoc"><span class="hs-identifier hs-type">getConDoc</span></a></span><span>
</span><span id="line-781"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>  </span><span class="hs-comment">-- Location of the data constructor</span><span>
</span><span id="line-782"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#ConHdkA"><span class="hs-identifier hs-type">ConHdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.DocString.html#HsDocString"><span class="hs-identifier hs-type">HsDocString</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-783"></span><span id="getConDoc"><span class="annot"><span class="annottext">getConDoc :: SrcSpan -&gt; ConHdkA (Maybe (GenLocated SrcSpan HsDocString))
</span><a href="GHC.Parser.PostProcess.Haddock.html#getConDoc"><span class="hs-identifier hs-var hs-var">getConDoc</span></a></span></span><span> </span><span id="local-6989586621681797683"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681797683"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-784"></span><span>  </span><span class="annot"><span class="annottext">HdkA (Maybe (GenLocated SrcSpan HsDocString), HasInnerDocs)
-&gt; ConHdkA (Maybe (GenLocated SrcSpan HsDocString))
forall w (m :: * -&gt; *) a. m (a, w) -&gt; WriterT w m a
</span><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Writer.Lazy.html#WriterT/Control.Monad.Trans.Writer.Lazy.html#WriterT"><span class="hs-identifier hs-var">WriterT</span></a></span><span> </span><span class="annot"><span class="annottext">(HdkA (Maybe (GenLocated SrcSpan HsDocString), HasInnerDocs)
 -&gt; ConHdkA (Maybe (GenLocated SrcSpan HsDocString)))
-&gt; HdkA (Maybe (GenLocated SrcSpan HsDocString), HasInnerDocs)
-&gt; ConHdkA (Maybe (GenLocated SrcSpan HsDocString))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
-&gt; HdkA (Maybe (GenLocated SrcSpan HsDocString), HasInnerDocs)
-&gt; HdkA (Maybe (GenLocated SrcSpan HsDocString), HasInnerDocs)
forall a. SrcSpan -&gt; HdkA a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#extendHdkA"><span class="hs-identifier hs-var">extendHdkA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681797683"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(HdkA (Maybe (GenLocated SrcSpan HsDocString), HasInnerDocs)
 -&gt; HdkA (Maybe (GenLocated SrcSpan HsDocString), HasInnerDocs))
-&gt; HdkA (Maybe (GenLocated SrcSpan HsDocString), HasInnerDocs)
-&gt; HdkA (Maybe (GenLocated SrcSpan HsDocString), HasInnerDocs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">HdkM (Maybe (GenLocated SrcSpan HsDocString), HasInnerDocs)
-&gt; HdkA (Maybe (GenLocated SrcSpan HsDocString), HasInnerDocs)
forall a. HdkM a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#liftHdkA"><span class="hs-identifier hs-var">liftHdkA</span></a></span><span> </span><span class="annot"><span class="annottext">(HdkM (Maybe (GenLocated SrcSpan HsDocString), HasInnerDocs)
 -&gt; HdkA (Maybe (GenLocated SrcSpan HsDocString), HasInnerDocs))
-&gt; HdkM (Maybe (GenLocated SrcSpan HsDocString), HasInnerDocs)
-&gt; HdkA (Maybe (GenLocated SrcSpan HsDocString), HasInnerDocs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-785"></span><span>    </span><span id="local-6989586621681797685"><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan HsDocString)
</span><a href="#local-6989586621681797685"><span class="hs-identifier hs-var">mDoc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; HdkM (Maybe (GenLocated SrcSpan HsDocString))
</span><a href="GHC.Parser.PostProcess.Haddock.html#getPrevNextDoc"><span class="hs-identifier hs-var">getPrevNextDoc</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681797683"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-786"></span><span>    </span><span class="hs-identifier">return</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan HsDocString)
</span><a href="#local-6989586621681797685"><span class="hs-identifier hs-var">mDoc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; HasInnerDocs
</span><a href="GHC.Parser.PostProcess.Haddock.html#HasInnerDocs"><span class="hs-identifier hs-var">HasInnerDocs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan HsDocString) -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Maybe.html#isJust/Data.Maybe.html#isJust"><span class="hs-identifier hs-var">isJust</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan HsDocString)
</span><a href="#local-6989586621681797685"><span class="hs-identifier hs-var">mDoc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-787"></span><span>
</span><span id="line-788"></span><span class="hs-comment">-- Add documentation comment to a data constructor field.</span><span>
</span><span id="line-789"></span><span class="hs-comment">-- Used for PrefixCon and InfixCon.</span><span>
</span><span id="line-790"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#addHaddockConDeclFieldTy"><span class="hs-identifier hs-type">addHaddockConDeclFieldTy</span></a></span><span>
</span><span id="line-791"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsScaled"><span class="hs-identifier hs-type">HsScaled</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-792"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#ConHdkA"><span class="hs-identifier hs-type">ConHdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsScaled"><span class="hs-identifier hs-type">HsScaled</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-793"></span><span id="addHaddockConDeclFieldTy"><span class="annot"><span class="annottext">addHaddockConDeclFieldTy :: HsScaled GhcPs (LHsType GhcPs)
-&gt; ConHdkA (HsScaled GhcPs (LHsType GhcPs))
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddockConDeclFieldTy"><span class="hs-identifier hs-var hs-var">addHaddockConDeclFieldTy</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsScaled"><span class="hs-identifier hs-type">HsScaled</span></a></span><span> </span><span id="local-6989586621681797689"><span class="annot"><span class="annottext">HsArrow GhcPs
</span><a href="#local-6989586621681797689"><span class="hs-identifier hs-var">mult</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681797690"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797690"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681797691"><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621681797691"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-794"></span><span>  </span><span class="annot"><span class="annottext">HdkA (HsScaled GhcPs (LHsType GhcPs), HasInnerDocs)
-&gt; ConHdkA (HsScaled GhcPs (LHsType GhcPs))
forall w (m :: * -&gt; *) a. m (a, w) -&gt; WriterT w m a
</span><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Writer.Lazy.html#WriterT/Control.Monad.Trans.Writer.Lazy.html#WriterT"><span class="hs-identifier hs-var">WriterT</span></a></span><span> </span><span class="annot"><span class="annottext">(HdkA (HsScaled GhcPs (LHsType GhcPs), HasInnerDocs)
 -&gt; ConHdkA (HsScaled GhcPs (LHsType GhcPs)))
-&gt; HdkA (HsScaled GhcPs (LHsType GhcPs), HasInnerDocs)
-&gt; ConHdkA (HsScaled GhcPs (LHsType GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
-&gt; HdkA (HsScaled GhcPs (LHsType GhcPs), HasInnerDocs)
-&gt; HdkA (HsScaled GhcPs (LHsType GhcPs), HasInnerDocs)
forall a. SrcSpan -&gt; HdkA a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#extendHdkA"><span class="hs-identifier hs-var">extendHdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. SrcSpanAnn' a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797690"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(HdkA (HsScaled GhcPs (LHsType GhcPs), HasInnerDocs)
 -&gt; HdkA (HsScaled GhcPs (LHsType GhcPs), HasInnerDocs))
-&gt; HdkA (HsScaled GhcPs (LHsType GhcPs), HasInnerDocs)
-&gt; HdkA (HsScaled GhcPs (LHsType GhcPs), HasInnerDocs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">HdkM (HsScaled GhcPs (LHsType GhcPs), HasInnerDocs)
-&gt; HdkA (HsScaled GhcPs (LHsType GhcPs), HasInnerDocs)
forall a. HdkM a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#liftHdkA"><span class="hs-identifier hs-var">liftHdkA</span></a></span><span> </span><span class="annot"><span class="annottext">(HdkM (HsScaled GhcPs (LHsType GhcPs), HasInnerDocs)
 -&gt; HdkA (HsScaled GhcPs (LHsType GhcPs), HasInnerDocs))
-&gt; HdkM (HsScaled GhcPs (LHsType GhcPs), HasInnerDocs)
-&gt; HdkA (HsScaled GhcPs (LHsType GhcPs), HasInnerDocs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-795"></span><span>    </span><span id="local-6989586621681797692"><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan HsDocString)
</span><a href="#local-6989586621681797692"><span class="hs-identifier hs-var">mDoc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; HdkM (Maybe (GenLocated SrcSpan HsDocString))
</span><a href="GHC.Parser.PostProcess.Haddock.html#getPrevNextDoc"><span class="hs-identifier hs-var">getPrevNextDoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. SrcSpanAnn' a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797690"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-796"></span><span>    </span><span class="hs-identifier">return</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsArrow GhcPs
-&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))
forall pass a. HsArrow pass -&gt; a -&gt; HsScaled pass a
</span><a href="Language.Haskell.Syntax.Type.html#HsScaled"><span class="hs-identifier hs-var">HsScaled</span></a></span><span> </span><span class="annot"><span class="annottext">HsArrow GhcPs
</span><a href="#local-6989586621681797689"><span class="hs-identifier hs-var">mult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsType GhcPs
-&gt; Maybe (GenLocated SrcSpan HsDocString) -&gt; LHsType GhcPs
</span><a href="GHC.Parser.PostProcess.Haddock.html#mkLHsDocTy"><span class="hs-identifier hs-var">mkLHsDocTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsType GhcPs -&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797690"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621681797691"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan HsDocString)
</span><a href="#local-6989586621681797692"><span class="hs-identifier hs-var">mDoc</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-797"></span><span>            </span><span class="annot"><span class="annottext">Bool -&gt; HasInnerDocs
</span><a href="GHC.Parser.PostProcess.Haddock.html#HasInnerDocs"><span class="hs-identifier hs-var">HasInnerDocs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan HsDocString) -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Maybe.html#isJust/Data.Maybe.html#isJust"><span class="hs-identifier hs-var">isJust</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan HsDocString)
</span><a href="#local-6989586621681797692"><span class="hs-identifier hs-var">mDoc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-798"></span><span>
</span><span id="line-799"></span><span class="hs-comment">-- Add documentation comment to a data constructor field.</span><span>
</span><span id="line-800"></span><span class="hs-comment">-- Used for RecCon.</span><span>
</span><span id="line-801"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#addHaddockConDeclField"><span class="hs-identifier hs-type">addHaddockConDeclField</span></a></span><span>
</span><span id="line-802"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LConDeclField"><span class="hs-identifier hs-type">LConDeclField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-803"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#ConHdkA"><span class="hs-identifier hs-type">ConHdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LConDeclField"><span class="hs-identifier hs-type">LConDeclField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-804"></span><span id="addHaddockConDeclField"><span class="annot"><span class="annottext">addHaddockConDeclField :: LConDeclField GhcPs -&gt; ConHdkA (LConDeclField GhcPs)
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddockConDeclField"><span class="hs-identifier hs-var hs-var">addHaddockConDeclField</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681797694"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797694"><span class="hs-identifier hs-var">l_fld</span></a></span></span><span> </span><span id="local-6989586621681797695"><span class="annot"><span class="annottext">ConDeclField GhcPs
</span><a href="#local-6989586621681797695"><span class="hs-identifier hs-var">fld</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-805"></span><span>  </span><span class="annot"><span class="annottext">HdkA (LConDeclField GhcPs, HasInnerDocs)
-&gt; ConHdkA (LConDeclField GhcPs)
forall w (m :: * -&gt; *) a. m (a, w) -&gt; WriterT w m a
</span><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Writer.Lazy.html#WriterT/Control.Monad.Trans.Writer.Lazy.html#WriterT"><span class="hs-identifier hs-var">WriterT</span></a></span><span> </span><span class="annot"><span class="annottext">(HdkA (LConDeclField GhcPs, HasInnerDocs)
 -&gt; ConHdkA (LConDeclField GhcPs))
-&gt; HdkA (LConDeclField GhcPs, HasInnerDocs)
-&gt; ConHdkA (LConDeclField GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
-&gt; HdkA (LConDeclField GhcPs, HasInnerDocs)
-&gt; HdkA (LConDeclField GhcPs, HasInnerDocs)
forall a. SrcSpan -&gt; HdkA a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#extendHdkA"><span class="hs-identifier hs-var">extendHdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. SrcSpanAnn' a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797694"><span class="hs-identifier hs-var">l_fld</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(HdkA (LConDeclField GhcPs, HasInnerDocs)
 -&gt; HdkA (LConDeclField GhcPs, HasInnerDocs))
-&gt; HdkA (LConDeclField GhcPs, HasInnerDocs)
-&gt; HdkA (LConDeclField GhcPs, HasInnerDocs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">HdkM (LConDeclField GhcPs, HasInnerDocs)
-&gt; HdkA (LConDeclField GhcPs, HasInnerDocs)
forall a. HdkM a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#liftHdkA"><span class="hs-identifier hs-var">liftHdkA</span></a></span><span> </span><span class="annot"><span class="annottext">(HdkM (LConDeclField GhcPs, HasInnerDocs)
 -&gt; HdkA (LConDeclField GhcPs, HasInnerDocs))
-&gt; HdkM (LConDeclField GhcPs, HasInnerDocs)
-&gt; HdkA (LConDeclField GhcPs, HasInnerDocs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-806"></span><span>    </span><span id="local-6989586621681797696"><span class="annot"><span class="annottext">Maybe (LHsDoc GhcPs)
</span><a href="#local-6989586621681797696"><span class="hs-identifier hs-var">cd_fld_doc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpan HsDocString -&gt; LHsDoc GhcPs)
-&gt; Maybe (GenLocated SrcSpan HsDocString) -&gt; Maybe (LHsDoc GhcPs)
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#fmap/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan HsDocString -&gt; LHsDoc GhcPs
</span><a href="GHC.Parser.PostProcess.Haddock.html#lexLHsDocString"><span class="hs-identifier hs-var">lexLHsDocString</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (GenLocated SrcSpan HsDocString) -&gt; Maybe (LHsDoc GhcPs))
-&gt; HdkM (Maybe (GenLocated SrcSpan HsDocString))
-&gt; HdkM (Maybe (LHsDoc GhcPs))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/Data.Functor.html#%3C%24%3E/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; HdkM (Maybe (GenLocated SrcSpan HsDocString))
</span><a href="GHC.Parser.PostProcess.Haddock.html#getPrevNextDoc"><span class="hs-identifier hs-var">getPrevNextDoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. SrcSpanAnn' a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797694"><span class="hs-identifier hs-var">l_fld</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-807"></span><span>    </span><span class="hs-identifier">return</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; ConDeclField GhcPs
-&gt; GenLocated SrcSpanAnnA (ConDeclField GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797694"><span class="hs-identifier hs-var">l_fld</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConDeclField GhcPs
</span><a href="#local-6989586621681797695"><span class="hs-identifier hs-var">fld</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="#local-6989586621681797696"><span class="hs-identifier hs-type hs-var">cd_fld_doc</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-808"></span><span>            </span><span class="annot"><span class="annottext">Bool -&gt; HasInnerDocs
</span><a href="GHC.Parser.PostProcess.Haddock.html#HasInnerDocs"><span class="hs-identifier hs-var">HasInnerDocs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (LHsDoc GhcPs) -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Maybe.html#isJust/Data.Maybe.html#isJust"><span class="hs-identifier hs-var">isJust</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (LHsDoc GhcPs)
</span><a href="#local-6989586621681797696"><span class="hs-identifier hs-var">cd_fld_doc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-809"></span><span>
</span><span id="line-810"></span><span class="hs-comment">-- 1. Process a H98-syntax data constructor declaration in a context with no</span><span>
</span><span id="line-811"></span><span class="hs-comment">--    access to the trailing documentation comment (by running the provided</span><span>
</span><span id="line-812"></span><span class="hs-comment">--    ConHdkA computation).</span><span>
</span><span id="line-813"></span><span class="hs-comment">--</span><span>
</span><span id="line-814"></span><span class="hs-comment">-- 2. Then grab the trailing comment (if it exists) and attach it where</span><span>
</span><span id="line-815"></span><span class="hs-comment">--    appropriate: either to the data constructor itself or to its last field,</span><span>
</span><span id="line-816"></span><span class="hs-comment">--    depending on HasInnerDocs.</span><span>
</span><span id="line-817"></span><span class="hs-comment">--</span><span>
</span><span id="line-818"></span><span class="hs-comment">-- See Note [Trailing comment on constructor declaration]</span><span>
</span><span id="line-819"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#addConTrailingDoc"><span class="hs-identifier hs-type">addConTrailingDoc</span></a></span><span>
</span><span id="line-820"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcLoc"><span class="hs-identifier hs-type">SrcLoc</span></a></span><span>  </span><span class="hs-comment">-- The end of a data constructor declaration.</span><span>
</span><span id="line-821"></span><span>             </span><span class="hs-comment">-- Any docprev comment past this point is considered trailing.</span><span>
</span><span id="line-822"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#ConHdkA"><span class="hs-identifier hs-type">ConHdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LConDecl"><span class="hs-identifier hs-type">LConDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-823"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkA"><span class="hs-identifier hs-type">HdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LConDecl"><span class="hs-identifier hs-type">LConDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-824"></span><span id="addConTrailingDoc"><span class="annot"><span class="annottext">addConTrailingDoc :: SrcLoc -&gt; ConHdkA (LConDecl GhcPs) -&gt; HdkA (LConDecl GhcPs)
</span><a href="GHC.Parser.PostProcess.Haddock.html#addConTrailingDoc"><span class="hs-identifier hs-var hs-var">addConTrailingDoc</span></a></span></span><span> </span><span id="local-6989586621681797698"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621681797698"><span class="hs-identifier hs-var">l_sep</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-825"></span><span>    </span><span class="annot"><span class="annottext">(HdkM (GenLocated SrcSpanAnnA (ConDecl GhcPs), HasInnerDocs)
 -&gt; HdkM (GenLocated SrcSpanAnnA (ConDecl GhcPs)))
-&gt; HdkA (GenLocated SrcSpanAnnA (ConDecl GhcPs), HasInnerDocs)
-&gt; HdkA (GenLocated SrcSpanAnnA (ConDecl GhcPs))
forall a b. (HdkM a -&gt; HdkM b) -&gt; HdkA a -&gt; HdkA b
</span><a href="GHC.Parser.PostProcess.Haddock.html#hoistHdkA"><span class="hs-identifier hs-var">hoistHdkA</span></a></span><span> </span><span class="annot"><span class="annottext">HdkM (LConDecl GhcPs, HasInnerDocs) -&gt; HdkM (LConDecl GhcPs)
HdkM (GenLocated SrcSpanAnnA (ConDecl GhcPs), HasInnerDocs)
-&gt; HdkM (GenLocated SrcSpanAnnA (ConDecl GhcPs))
</span><a href="#local-6989586621681797699"><span class="hs-identifier hs-var">add_trailing_doc</span></a></span><span> </span><span class="annot"><span class="annottext">(HdkA (GenLocated SrcSpanAnnA (ConDecl GhcPs), HasInnerDocs)
 -&gt; HdkA (GenLocated SrcSpanAnnA (ConDecl GhcPs)))
-&gt; (WriterT
      HasInnerDocs HdkA (GenLocated SrcSpanAnnA (ConDecl GhcPs))
    -&gt; HdkA (GenLocated SrcSpanAnnA (ConDecl GhcPs), HasInnerDocs))
-&gt; WriterT
     HasInnerDocs HdkA (GenLocated SrcSpanAnnA (ConDecl GhcPs))
-&gt; HdkA (GenLocated SrcSpanAnnA (ConDecl GhcPs))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">WriterT HasInnerDocs HdkA (GenLocated SrcSpanAnnA (ConDecl GhcPs))
-&gt; HdkA (GenLocated SrcSpanAnnA (ConDecl GhcPs), HasInnerDocs)
forall w (m :: * -&gt; *) a. WriterT w m a -&gt; m (a, w)
</span><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Writer.Lazy.html#runWriterT/Control.Monad.Trans.Writer.Lazy.html#runWriterT"><span class="hs-identifier hs-var">runWriterT</span></a></span><span>
</span><span id="line-826"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-827"></span><span>    </span><span class="annot"><a href="#local-6989586621681797699"><span class="hs-identifier hs-type">add_trailing_doc</span></a></span><span>
</span><span id="line-828"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkM"><span class="hs-identifier hs-type">HdkM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LConDecl"><span class="hs-identifier hs-type">LConDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HasInnerDocs"><span class="hs-identifier hs-type">HasInnerDocs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-829"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkM"><span class="hs-identifier hs-type">HdkM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LConDecl"><span class="hs-identifier hs-type">LConDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-830"></span><span>    </span><span id="local-6989586621681797699"><span class="annot"><span class="annottext">add_trailing_doc :: HdkM (LConDecl GhcPs, HasInnerDocs) -&gt; HdkM (LConDecl GhcPs)
</span><a href="#local-6989586621681797699"><span class="hs-identifier hs-var hs-var">add_trailing_doc</span></a></span></span><span> </span><span id="local-6989586621681797700"><span class="annot"><span class="annottext">HdkM (LConDecl GhcPs, HasInnerDocs)
</span><a href="#local-6989586621681797700"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-831"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681797701"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797701"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681797702"><span class="annot"><span class="annottext">ConDecl GhcPs
</span><a href="#local-6989586621681797702"><span class="hs-identifier hs-var">con_decl</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HasInnerDocs"><span class="hs-identifier hs-type">HasInnerDocs</span></a></span><span> </span><span id="local-6989586621681797703"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681797703"><span class="hs-identifier hs-var">has_inner_docs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-832"></span><span>        </span><span class="annot"><span class="annottext">LocRange
-&gt; HdkM (GenLocated SrcSpanAnnA (ConDecl GhcPs), HasInnerDocs)
-&gt; HdkM (GenLocated SrcSpanAnnA (ConDecl GhcPs), HasInnerDocs)
forall a. LocRange -&gt; HdkM a -&gt; HdkM a
</span><a href="GHC.Parser.PostProcess.Haddock.html#inLocRange"><span class="hs-identifier hs-var">inLocRange</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe BufPos -&gt; LocRange
</span><a href="GHC.Parser.PostProcess.Haddock.html#locRangeTo"><span class="hs-identifier hs-var">locRangeTo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcLoc -&gt; Maybe BufPos
</span><a href="GHC.Types.SrcLoc.html#getBufPos"><span class="hs-identifier hs-var">getBufPos</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621681797698"><span class="hs-identifier hs-var">l_sep</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HdkM (LConDecl GhcPs, HasInnerDocs)
HdkM (GenLocated SrcSpanAnnA (ConDecl GhcPs), HasInnerDocs)
</span><a href="#local-6989586621681797700"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-833"></span><span>          </span><span class="hs-comment">-- inLocRange delimits the context so that the inner computation</span><span>
</span><span id="line-834"></span><span>          </span><span class="hs-comment">-- will not consume the trailing documentation comment.</span><span>
</span><span id="line-835"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ConDecl GhcPs
</span><a href="#local-6989586621681797702"><span class="hs-identifier hs-var">con_decl</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-836"></span><span>        </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#ConDeclH98"><span class="hs-identifier hs-type">ConDeclH98</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-837"></span><span>          </span><span id="local-6989586621681797704"><span class="annot"><span class="annottext">[GenLocated SrcSpan HsDocString]
</span><a href="#local-6989586621681797704"><span class="hs-identifier hs-var">trailingDocs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-838"></span><span>            </span><span class="annot"><span class="annottext">LocRange
-&gt; HdkM [GenLocated SrcSpan HsDocString]
-&gt; HdkM [GenLocated SrcSpan HsDocString]
forall a. LocRange -&gt; HdkM a -&gt; HdkM a
</span><a href="GHC.Parser.PostProcess.Haddock.html#inLocRange"><span class="hs-identifier hs-var">inLocRange</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe BufPos -&gt; LocRange
</span><a href="GHC.Parser.PostProcess.Haddock.html#locRangeFrom"><span class="hs-identifier hs-var">locRangeFrom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcLoc -&gt; Maybe BufPos
</span><a href="GHC.Types.SrcLoc.html#getBufPos"><span class="hs-identifier hs-var">getBufPos</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621681797698"><span class="hs-identifier hs-var">l_sep</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(HdkM [GenLocated SrcSpan HsDocString]
 -&gt; HdkM [GenLocated SrcSpan HsDocString])
-&gt; HdkM [GenLocated SrcSpan HsDocString]
-&gt; HdkM [GenLocated SrcSpan HsDocString]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-839"></span><span>            </span><span class="annot"><span class="annottext">(PsLocated HdkComment -&gt; Maybe (GenLocated SrcSpan HsDocString))
-&gt; HdkM [GenLocated SrcSpan HsDocString]
forall a. (PsLocated HdkComment -&gt; Maybe a) -&gt; HdkM [a]
</span><a href="GHC.Parser.PostProcess.Haddock.html#takeHdkComments"><span class="hs-identifier hs-var">takeHdkComments</span></a></span><span> </span><span class="annot"><span class="annottext">PsLocated HdkComment -&gt; Maybe (GenLocated SrcSpan HsDocString)
</span><a href="GHC.Parser.PostProcess.Haddock.html#mkDocPrev"><span class="hs-identifier hs-var">mkDocPrev</span></a></span><span>
</span><span id="line-840"></span><span>          </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan HsDocString] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#null/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan HsDocString]
</span><a href="#local-6989586621681797704"><span class="hs-identifier hs-var">trailingDocs</span></a></span><span>
</span><span id="line-841"></span><span>          </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (ConDecl GhcPs)
-&gt; HdkM (GenLocated SrcSpanAnnA (ConDecl GhcPs))
forall a. a -&gt; HdkM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; ConDecl GhcPs -&gt; GenLocated SrcSpanAnnA (ConDecl GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797701"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">ConDecl GhcPs
</span><a href="#local-6989586621681797702"><span class="hs-identifier hs-var">con_decl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-842"></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-843"></span><span>            </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681797703"><span class="hs-identifier hs-var">has_inner_docs</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-844"></span><span>              </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621681797708"><span class="hs-identifier hs-type">mk_doc_ty</span></a></span><span> </span><span class="hs-glyph">::</span><span>       </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsScaled"><span class="hs-identifier hs-type">HsScaled</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-845"></span><span>                            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkM"><span class="hs-identifier hs-type">HdkM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsScaled"><span class="hs-identifier hs-type">HsScaled</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-846"></span><span>                  </span><span id="local-6989586621681797708"><span class="annot"><span class="annottext">mk_doc_ty :: HsScaled GhcPs (LHsType GhcPs)
-&gt; HdkM (HsScaled GhcPs (LHsType GhcPs))
</span><a href="#local-6989586621681797708"><span class="hs-identifier hs-var hs-var">mk_doc_ty</span></a></span></span><span> </span><span id="local-6989586621681797709"><span class="annot"><span class="annottext">x :: HsScaled GhcPs (LHsType GhcPs)
</span><a href="#local-6989586621681797709"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsScaled"><span class="hs-identifier hs-type">HsScaled</span></a></span><span> </span><span class="annot"><span class="annottext">HsArrow GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsDocTy"><span class="hs-identifier hs-type">HsDocTy</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-847"></span><span>                    </span><span class="hs-comment">-- Happens in the following case:</span><span>
</span><span id="line-848"></span><span>                    </span><span class="hs-comment">--</span><span>
</span><span id="line-849"></span><span>                    </span><span class="hs-comment">--    data T =</span><span>
</span><span id="line-850"></span><span>                    </span><span class="hs-comment">--      MkT</span><span>
</span><span id="line-851"></span><span>                    </span><span class="hs-comment">--        -- | Comment on SomeField</span><span>
</span><span id="line-852"></span><span>                    </span><span class="hs-comment">--        SomeField</span><span>
</span><span id="line-853"></span><span>                    </span><span class="hs-comment">--        -- ^ Another comment on SomeField? (rejected)</span><span>
</span><span id="line-854"></span><span>                    </span><span class="hs-comment">--</span><span>
</span><span id="line-855"></span><span>                    </span><span class="hs-comment">-- See tests/.../haddockExtraDocs.hs</span><span>
</span><span id="line-856"></span><span>                    </span><span class="annot"><span class="annottext">HsScaled GhcPs (LHsType GhcPs)
HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))
</span><a href="#local-6989586621681797709"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))
-&gt; HdkM ()
-&gt; HdkM (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
forall a b. a -&gt; HdkM b -&gt; HdkM a
forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; f b -&gt; f a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%3C%24/GHC.Base.html#%3C%24"><span class="hs-operator hs-var">&lt;$</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan HsDocString] -&gt; HdkM ()
</span><a href="GHC.Parser.PostProcess.Haddock.html#reportExtraDocs"><span class="hs-identifier hs-var">reportExtraDocs</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan HsDocString]
</span><a href="#local-6989586621681797704"><span class="hs-identifier hs-var">trailingDocs</span></a></span><span>
</span><span id="line-857"></span><span>                  </span><span class="annot"><a href="#local-6989586621681797708"><span class="hs-identifier hs-var">mk_doc_ty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsScaled"><span class="hs-identifier hs-type">HsScaled</span></a></span><span> </span><span id="local-6989586621681797712"><span class="annot"><span class="annottext">HsArrow GhcPs
</span><a href="#local-6989586621681797712"><span class="hs-identifier hs-var">mult</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681797713"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797713"><span class="hs-identifier hs-var">l'</span></a></span></span><span> </span><span id="local-6989586621681797714"><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621681797714"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-858"></span><span>                    </span><span id="local-6989586621681797715"><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan HsDocString)
</span><a href="#local-6989586621681797715"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan HsDocString]
-&gt; HdkM (Maybe (GenLocated SrcSpan HsDocString))
</span><a href="GHC.Parser.PostProcess.Haddock.html#selectDocString"><span class="hs-identifier hs-var">selectDocString</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan HsDocString]
</span><a href="#local-6989586621681797704"><span class="hs-identifier hs-var">trailingDocs</span></a></span><span>
</span><span id="line-859"></span><span>                    </span><span class="hs-identifier">return</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">HsArrow GhcPs
-&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))
forall pass a. HsArrow pass -&gt; a -&gt; HsScaled pass a
</span><a href="Language.Haskell.Syntax.Type.html#HsScaled"><span class="hs-identifier hs-var">HsScaled</span></a></span><span> </span><span class="annot"><span class="annottext">HsArrow GhcPs
</span><a href="#local-6989586621681797712"><span class="hs-identifier hs-var">mult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsType GhcPs
-&gt; Maybe (GenLocated SrcSpan HsDocString) -&gt; LHsType GhcPs
</span><a href="GHC.Parser.PostProcess.Haddock.html#mkLHsDocTy"><span class="hs-identifier hs-var">mkLHsDocTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsType GhcPs -&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797713"><span class="hs-identifier hs-var">l'</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621681797714"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan HsDocString)
</span><a href="#local-6989586621681797715"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-860"></span><span>              </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621681797716"><span class="hs-identifier hs-type">mk_doc_fld</span></a></span><span> </span><span class="hs-glyph">::</span><span>       </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LConDeclField"><span class="hs-identifier hs-type">LConDeclField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-861"></span><span>                             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkM"><span class="hs-identifier hs-type">HdkM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LConDeclField"><span class="hs-identifier hs-type">LConDeclField</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-862"></span><span>                  </span><span id="local-6989586621681797716"><span class="annot"><span class="annottext">mk_doc_fld :: LConDeclField GhcPs -&gt; HdkM (LConDeclField GhcPs)
</span><a href="#local-6989586621681797716"><span class="hs-identifier hs-var hs-var">mk_doc_fld</span></a></span></span><span> </span><span id="local-6989586621681797717"><span class="annot"><span class="annottext">x :: LConDeclField GhcPs
</span><a href="#local-6989586621681797717"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#ConDeclField"><span class="hs-identifier hs-type">ConDeclField</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">cd_fld_doc :: forall pass. ConDeclField pass -&gt; Maybe (LHsDoc pass)
</span><a href="Language.Haskell.Syntax.Type.html#cd_fld_doc"><span class="hs-identifier hs-var">cd_fld_doc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><span class="annottext">LHsDoc GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-863"></span><span>                    </span><span class="hs-comment">-- Happens in the following case:</span><span>
</span><span id="line-864"></span><span>                    </span><span class="hs-comment">--</span><span>
</span><span id="line-865"></span><span>                    </span><span class="hs-comment">--    data T =</span><span>
</span><span id="line-866"></span><span>                    </span><span class="hs-comment">--      MkT {</span><span>
</span><span id="line-867"></span><span>                    </span><span class="hs-comment">--        -- | Comment on SomeField</span><span>
</span><span id="line-868"></span><span>                    </span><span class="hs-comment">--        someField :: SomeField</span><span>
</span><span id="line-869"></span><span>                    </span><span class="hs-comment">--      } -- ^ Another comment on SomeField? (rejected)</span><span>
</span><span id="line-870"></span><span>                    </span><span class="hs-comment">--</span><span>
</span><span id="line-871"></span><span>                    </span><span class="hs-comment">-- See tests/.../haddockExtraDocs.hs</span><span>
</span><span id="line-872"></span><span>                    </span><span class="annot"><span class="annottext">LConDeclField GhcPs
GenLocated SrcSpanAnnA (ConDeclField GhcPs)
</span><a href="#local-6989586621681797717"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (ConDeclField GhcPs)
-&gt; HdkM () -&gt; HdkM (GenLocated SrcSpanAnnA (ConDeclField GhcPs))
forall a b. a -&gt; HdkM b -&gt; HdkM a
forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; f b -&gt; f a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%3C%24/GHC.Base.html#%3C%24"><span class="hs-operator hs-var">&lt;$</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan HsDocString] -&gt; HdkM ()
</span><a href="GHC.Parser.PostProcess.Haddock.html#reportExtraDocs"><span class="hs-identifier hs-var">reportExtraDocs</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan HsDocString]
</span><a href="#local-6989586621681797704"><span class="hs-identifier hs-var">trailingDocs</span></a></span><span>
</span><span id="line-873"></span><span>                  </span><span class="annot"><a href="#local-6989586621681797716"><span class="hs-identifier hs-var">mk_doc_fld</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681797719"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797719"><span class="hs-identifier hs-var">l'</span></a></span></span><span> </span><span id="local-6989586621681797720"><span class="annot"><span class="annottext">ConDeclField GhcPs
</span><a href="#local-6989586621681797720"><span class="hs-identifier hs-var">con_fld</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-874"></span><span>                    </span><span id="local-6989586621681797721"><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan HsDocString)
</span><a href="#local-6989586621681797721"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan HsDocString]
-&gt; HdkM (Maybe (GenLocated SrcSpan HsDocString))
</span><a href="GHC.Parser.PostProcess.Haddock.html#selectDocString"><span class="hs-identifier hs-var">selectDocString</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan HsDocString]
</span><a href="#local-6989586621681797704"><span class="hs-identifier hs-var">trailingDocs</span></a></span><span>
</span><span id="line-875"></span><span>                    </span><span class="hs-identifier">return</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; ConDeclField GhcPs
-&gt; GenLocated SrcSpanAnnA (ConDeclField GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797719"><span class="hs-identifier hs-var">l'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConDeclField GhcPs
</span><a href="#local-6989586621681797720"><span class="hs-identifier hs-var">con_fld</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#cd_fld_doc"><span class="hs-identifier hs-var">cd_fld_doc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#fmap/GHC.Base.html#fmap"><span class="hs-identifier hs-type">fmap</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#lexLHsDocString"><span class="hs-identifier hs-type">lexLHsDocString</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681797721"><span class="hs-identifier hs-type">doc</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-876"></span><span>              </span><span id="local-6989586621681797722"><span class="annot"><span class="annottext">HsConDetails
  Void
  (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
  (GenLocated
     SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)])
</span><a href="#local-6989586621681797722"><span class="hs-identifier hs-var">con_args'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ConDecl GhcPs -&gt; HsConDeclH98Details GhcPs
forall pass. ConDecl pass -&gt; HsConDeclH98Details pass
</span><a href="Language.Haskell.Syntax.Decls.html#con_args"><span class="hs-identifier hs-var">con_args</span></a></span><span> </span><span class="annot"><span class="annottext">ConDecl GhcPs
</span><a href="#local-6989586621681797702"><span class="hs-identifier hs-var">con_decl</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-877"></span><span>                </span><span id="local-6989586621681797723"><span class="annot"><span class="annottext">x :: HsConDeclH98Details GhcPs
</span><a href="#local-6989586621681797723"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#PrefixCon"><span class="hs-identifier hs-type">PrefixCon</span></a></span><span> </span><span class="annot"><span class="annottext">[Void]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681797724"><span class="annot"><span class="annottext">[HsScaled GhcPs (LHsType GhcPs)]
</span><a href="#local-6989586621681797724"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))]
-&gt; Maybe
     (NonEmpty (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))))
forall a. [a] -&gt; Maybe (NonEmpty a)
</span><a href="../../base-4.18.3.0/src/Data.List.NonEmpty.html#nonEmpty/Data.List.NonEmpty.html#nonEmpty"><span class="hs-identifier hs-var">nonEmpty</span></a></span><span> </span><span class="annot"><span class="annottext">[HsScaled GhcPs (LHsType GhcPs)]
[HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))]
</span><a href="#local-6989586621681797724"><span class="hs-identifier hs-var">ts</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-878"></span><span>                    </span><span class="annot"><span class="annottext">Maybe
  (NonEmpty (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))))
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HsConDeclH98Details GhcPs
HsConDetails
  Void
  (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
  (GenLocated
     SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)])
</span><a href="#local-6989586621681797723"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">HsConDetails
  Void
  (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
  (GenLocated
     SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)])
-&gt; HdkM ()
-&gt; HdkM
     (HsConDetails
        Void
        (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
        (GenLocated
           SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)]))
forall a b. a -&gt; HdkM b -&gt; HdkM a
forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; f b -&gt; f a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%3C%24/GHC.Base.html#%3C%24"><span class="hs-operator hs-var">&lt;$</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan HsDocString] -&gt; HdkM ()
</span><a href="GHC.Parser.PostProcess.Haddock.html#reportExtraDocs"><span class="hs-identifier hs-var">reportExtraDocs</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan HsDocString]
</span><a href="#local-6989586621681797704"><span class="hs-identifier hs-var">trailingDocs</span></a></span><span>
</span><span id="line-879"></span><span>                    </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681797725"><span class="annot"><span class="annottext">NonEmpty (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
</span><a href="#local-6989586621681797725"><span class="hs-identifier hs-var">ts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Void]
-&gt; [HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))]
-&gt; HsConDetails
     Void
     (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
     (GenLocated
        SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)])
forall tyarg arg rec.
[tyarg] -&gt; [arg] -&gt; HsConDetails tyarg arg rec
</span><a href="Language.Haskell.Syntax.Type.html#PrefixCon"><span class="hs-identifier hs-var">PrefixCon</span></a></span><span> </span><span class="annot"><span class="annottext">[Void]
</span><a href="Language.Haskell.Syntax.Type.html#noTypeArgs"><span class="hs-identifier hs-var">noTypeArgs</span></a></span><span> </span><span class="annot"><span class="annottext">([HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))]
 -&gt; HsConDetails
      Void
      (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
      (GenLocated
         SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)]))
-&gt; (NonEmpty
      (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
    -&gt; [HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))])
-&gt; NonEmpty
     (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
-&gt; HsConDetails
     Void
     (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
     (GenLocated
        SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
-&gt; [HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))]
forall a. NonEmpty a -&gt; [a]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#toList/Data.Foldable.html#toList"><span class="hs-identifier hs-var">toList</span></a></span><span> </span><span class="annot"><span class="annottext">(NonEmpty (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
 -&gt; HsConDetails
      Void
      (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
      (GenLocated
         SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)]))
-&gt; HdkM
     (NonEmpty (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))))
-&gt; HdkM
     (HsConDetails
        Void
        (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
        (GenLocated
           SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)]))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/Data.Functor.html#%3C%24%3E/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))
 -&gt; HdkM (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))))
-&gt; NonEmpty
     (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
-&gt; HdkM
     (NonEmpty (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))))
forall (f :: * -&gt; *) a.
Functor f =&gt;
(a -&gt; f a) -&gt; NonEmpty a -&gt; f (NonEmpty a)
</span><a href="GHC.Utils.Misc.html#mapLastM"><span class="hs-identifier hs-var">mapLastM</span></a></span><span> </span><span class="annot"><span class="annottext">HsScaled GhcPs (LHsType GhcPs)
-&gt; HdkM (HsScaled GhcPs (LHsType GhcPs))
HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))
-&gt; HdkM (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
</span><a href="#local-6989586621681797708"><span class="hs-identifier hs-var">mk_doc_ty</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
</span><a href="#local-6989586621681797725"><span class="hs-identifier hs-var">ts</span></a></span><span>
</span><span id="line-880"></span><span>                </span><span id="local-6989586621681797726"><span class="annot"><span class="annottext">x :: HsConDeclH98Details GhcPs
</span><a href="#local-6989586621681797726"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#RecCon"><span class="hs-identifier hs-type">RecCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681797727"><span class="annot"><span class="annottext">SrcSpanAnnL
</span><a href="#local-6989586621681797727"><span class="hs-identifier hs-var">l_rec</span></a></span></span><span> </span><span id="local-6989586621681797728"><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
</span><a href="#local-6989586621681797728"><span class="hs-identifier hs-var">flds</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
-&gt; Maybe (NonEmpty (GenLocated SrcSpanAnnA (ConDeclField GhcPs)))
forall a. [a] -&gt; Maybe (NonEmpty a)
</span><a href="../../base-4.18.3.0/src/Data.List.NonEmpty.html#nonEmpty/Data.List.NonEmpty.html#nonEmpty"><span class="hs-identifier hs-var">nonEmpty</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
</span><a href="#local-6989586621681797728"><span class="hs-identifier hs-var">flds</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-881"></span><span>                    </span><span class="annot"><span class="annottext">Maybe (NonEmpty (GenLocated SrcSpanAnnA (ConDeclField GhcPs)))
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HsConDeclH98Details GhcPs
HsConDetails
  Void
  (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
  (GenLocated
     SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)])
</span><a href="#local-6989586621681797726"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">HsConDetails
  Void
  (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
  (GenLocated
     SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)])
-&gt; HdkM ()
-&gt; HdkM
     (HsConDetails
        Void
        (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
        (GenLocated
           SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)]))
forall a b. a -&gt; HdkM b -&gt; HdkM a
forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; f b -&gt; f a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%3C%24/GHC.Base.html#%3C%24"><span class="hs-operator hs-var">&lt;$</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan HsDocString] -&gt; HdkM ()
</span><a href="GHC.Parser.PostProcess.Haddock.html#reportExtraDocs"><span class="hs-identifier hs-var">reportExtraDocs</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan HsDocString]
</span><a href="#local-6989586621681797704"><span class="hs-identifier hs-var">trailingDocs</span></a></span><span>
</span><span id="line-882"></span><span>                    </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681797729"><span class="annot"><span class="annottext">NonEmpty (GenLocated SrcSpanAnnA (ConDeclField GhcPs))
</span><a href="#local-6989586621681797729"><span class="hs-identifier hs-var">flds</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GenLocated
  SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
-&gt; HsConDetails
     Void
     (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
     (GenLocated
        SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)])
forall tyarg arg rec. rec -&gt; HsConDetails tyarg arg rec
</span><a href="Language.Haskell.Syntax.Type.html#RecCon"><span class="hs-identifier hs-var">RecCon</span></a></span><span> </span><span class="annot"><span class="annottext">(GenLocated
   SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
 -&gt; HsConDetails
      Void
      (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
      (GenLocated
         SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)]))
-&gt; (NonEmpty (GenLocated SrcSpanAnnA (ConDeclField GhcPs))
    -&gt; GenLocated
         SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)])
-&gt; NonEmpty (GenLocated SrcSpanAnnA (ConDeclField GhcPs))
-&gt; HsConDetails
     Void
     (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
     (GenLocated
        SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnL
-&gt; [GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
-&gt; GenLocated
     SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnL
</span><a href="#local-6989586621681797727"><span class="hs-identifier hs-var">l_rec</span></a></span><span> </span><span class="annot"><span class="annottext">([GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
 -&gt; GenLocated
      SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)])
-&gt; (NonEmpty (GenLocated SrcSpanAnnA (ConDeclField GhcPs))
    -&gt; [GenLocated SrcSpanAnnA (ConDeclField GhcPs)])
-&gt; NonEmpty (GenLocated SrcSpanAnnA (ConDeclField GhcPs))
-&gt; GenLocated
     SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (GenLocated SrcSpanAnnA (ConDeclField GhcPs))
-&gt; [GenLocated SrcSpanAnnA (ConDeclField GhcPs)]
forall a. NonEmpty a -&gt; [a]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#toList/Data.Foldable.html#toList"><span class="hs-identifier hs-var">toList</span></a></span><span> </span><span class="annot"><span class="annottext">(NonEmpty (GenLocated SrcSpanAnnA (ConDeclField GhcPs))
 -&gt; HsConDetails
      Void
      (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
      (GenLocated
         SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)]))
-&gt; HdkM (NonEmpty (GenLocated SrcSpanAnnA (ConDeclField GhcPs)))
-&gt; HdkM
     (HsConDetails
        Void
        (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
        (GenLocated
           SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)]))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/Data.Functor.html#%3C%24%3E/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (ConDeclField GhcPs)
 -&gt; HdkM (GenLocated SrcSpanAnnA (ConDeclField GhcPs)))
-&gt; NonEmpty (GenLocated SrcSpanAnnA (ConDeclField GhcPs))
-&gt; HdkM (NonEmpty (GenLocated SrcSpanAnnA (ConDeclField GhcPs)))
forall (f :: * -&gt; *) a.
Functor f =&gt;
(a -&gt; f a) -&gt; NonEmpty a -&gt; f (NonEmpty a)
</span><a href="GHC.Utils.Misc.html#mapLastM"><span class="hs-identifier hs-var">mapLastM</span></a></span><span> </span><span class="annot"><span class="annottext">LConDeclField GhcPs -&gt; HdkM (LConDeclField GhcPs)
GenLocated SrcSpanAnnA (ConDeclField GhcPs)
-&gt; HdkM (GenLocated SrcSpanAnnA (ConDeclField GhcPs))
</span><a href="#local-6989586621681797716"><span class="hs-identifier hs-var">mk_doc_fld</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (GenLocated SrcSpanAnnA (ConDeclField GhcPs))
</span><a href="#local-6989586621681797729"><span class="hs-identifier hs-var">flds</span></a></span><span>
</span><span id="line-883"></span><span>                </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#InfixCon"><span class="hs-identifier hs-type">InfixCon</span></a></span><span> </span><span id="local-6989586621681797730"><span class="annot"><span class="annottext">HsScaled GhcPs (LHsType GhcPs)
</span><a href="#local-6989586621681797730"><span class="hs-identifier hs-var">t1</span></a></span></span><span> </span><span id="local-6989586621681797731"><span class="annot"><span class="annottext">HsScaled GhcPs (LHsType GhcPs)
</span><a href="#local-6989586621681797731"><span class="hs-identifier hs-var">t2</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))
-&gt; HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))
-&gt; HsConDetails
     Void
     (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
     (GenLocated
        SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)])
forall tyarg arg rec. arg -&gt; arg -&gt; HsConDetails tyarg arg rec
</span><a href="Language.Haskell.Syntax.Type.html#InfixCon"><span class="hs-identifier hs-var">InfixCon</span></a></span><span> </span><span class="annot"><span class="annottext">HsScaled GhcPs (LHsType GhcPs)
HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))
</span><a href="#local-6989586621681797730"><span class="hs-identifier hs-var">t1</span></a></span><span> </span><span class="annot"><span class="annottext">(HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs))
 -&gt; HsConDetails
      Void
      (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
      (GenLocated
         SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)]))
-&gt; HdkM (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
-&gt; HdkM
     (HsConDetails
        Void
        (HsScaled GhcPs (GenLocated SrcSpanAnnA (HsType GhcPs)))
        (GenLocated
           SrcSpanAnnL [GenLocated SrcSpanAnnA (ConDeclField GhcPs)]))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/Data.Functor.html#%3C%24%3E/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">HsScaled GhcPs (LHsType GhcPs)
-&gt; HdkM (HsScaled GhcPs (LHsType GhcPs))
</span><a href="#local-6989586621681797708"><span class="hs-identifier hs-var">mk_doc_ty</span></a></span><span> </span><span class="annot"><span class="annottext">HsScaled GhcPs (LHsType GhcPs)
</span><a href="#local-6989586621681797731"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-884"></span><span>              </span><span class="hs-identifier">return</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; ConDecl GhcPs -&gt; GenLocated SrcSpanAnnA (ConDecl GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797701"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConDecl GhcPs
</span><a href="#local-6989586621681797702"><span class="hs-identifier hs-var">con_decl</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#con_args"><span class="hs-identifier hs-var">con_args</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621681797722"><span class="hs-identifier hs-type">con_args'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-885"></span><span>            </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-886"></span><span>              </span><span id="local-6989586621681797732"><span class="annot"><span class="annottext">Maybe (LHsDoc GhcPs)
</span><a href="#local-6989586621681797732"><span class="hs-identifier hs-var">con_doc'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[LHsDoc GhcPs] -&gt; HdkM (Maybe (LHsDoc GhcPs))
forall a. [LHsDoc a] -&gt; HdkM (Maybe (LHsDoc a))
</span><a href="GHC.Parser.PostProcess.Haddock.html#selectDoc"><span class="hs-identifier hs-var">selectDoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConDecl GhcPs -&gt; Maybe (LHsDoc GhcPs)
forall pass. ConDecl pass -&gt; Maybe (LHsDoc pass)
</span><a href="Language.Haskell.Syntax.Decls.html#con_doc"><span class="hs-identifier hs-var">con_doc</span></a></span><span> </span><span class="annot"><span class="annottext">ConDecl GhcPs
</span><a href="#local-6989586621681797702"><span class="hs-identifier hs-var">con_decl</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (LHsDoc GhcPs) -&gt; [LHsDoc GhcPs] -&gt; [LHsDoc GhcPs]
forall a. Maybe a -&gt; [a] -&gt; [a]
</span><a href="GHC.Parser.PostProcess.Haddock.html#mcons"><span class="hs-operator hs-var">`mcons`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(GenLocated SrcSpan HsDocString -&gt; LHsDoc GhcPs)
-&gt; [GenLocated SrcSpan HsDocString] -&gt; [LHsDoc GhcPs]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan HsDocString -&gt; LHsDoc GhcPs
</span><a href="GHC.Parser.PostProcess.Haddock.html#lexLHsDocString"><span class="hs-identifier hs-var">lexLHsDocString</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan HsDocString]
</span><a href="#local-6989586621681797704"><span class="hs-identifier hs-var">trailingDocs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-887"></span><span>              </span><span class="hs-identifier">return</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; ConDecl GhcPs -&gt; GenLocated SrcSpanAnnA (ConDecl GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797701"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConDecl GhcPs
</span><a href="#local-6989586621681797702"><span class="hs-identifier hs-var">con_decl</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#con_doc"><span class="hs-identifier hs-var">con_doc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621681797732"><span class="hs-identifier hs-type">con_doc'</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-888"></span><span>        </span><span class="annot"><span class="annottext">ConDecl GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; HdkM (GenLocated SrcSpanAnnA (ConDecl GhcPs))
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="GHC.Utils.Panic.Plain.html#panic"><span class="hs-identifier hs-var">panic</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;addConTrailingDoc: non-H98 ConDecl&quot;</span></span><span>
</span><span id="line-889"></span><span>
</span><span id="line-890"></span><span class="hs-comment">{- Note [Trailing comment on constructor declaration]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The trailing comment after a constructor declaration is associated with the
constructor itself when there are no other comments inside the declaration:

   data T = MkT A B        -- ^ Comment on MkT
   data T = MkT { x :: A } -- ^ Comment on MkT

When there are other comments, the trailing comment applies to the last field:

   data T = MkT -- ^ Comment on MkT
            A   -- ^ Comment on A
            B   -- ^ Comment on B

   data T =
     MkT { a :: A   -- ^ Comment on a
         , b :: B   -- ^ Comment on b
         , c :: C } -- ^ Comment on c

This makes the trailing comment context-sensitive. Example:
      data T =
        -- | comment 1
        MkT Int Bool -- ^ comment 2

    Here, &quot;comment 2&quot; applies to the Bool field.
    But if we removed &quot;comment 1&quot;, then &quot;comment 2&quot; would be apply to the data
    constructor rather than its field.

All of this applies to H98-style data declarations only.
GADTSyntax data constructors don't have any special treatment for the trailing comment.

We implement this in two steps:

  1. Process the data constructor declaration in a delimited context where the
     trailing documentation comment is not visible. Delimiting the context is done
     in addConTrailingDoc.

     When processing the declaration, track whether the constructor or any of
     its fields have a documentation comment associated with them.
     This is done using WriterT HasInnerDocs, see ConHdkA.

  2. Depending on whether HasInnerDocs is True or False, attach the
     trailing documentation comment to the data constructor itself
     or to its last field.
-}</span><span>
</span><span id="line-935"></span><span>
</span><span id="line-936"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681796875"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HasHaddock"><span class="hs-identifier hs-type">HasHaddock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681796875"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HasHaddock"><span class="hs-identifier hs-type">HasHaddock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsScaled"><span class="hs-identifier hs-type">HsScaled</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681796875"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-937"></span><span>  </span><span id="local-6989586621681797740"><span class="annot"><span class="annottext">addHaddock :: HsScaled GhcPs a -&gt; HdkA (HsScaled GhcPs a)
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var hs-var hs-var hs-var">addHaddock</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsScaled"><span class="hs-identifier hs-type">HsScaled</span></a></span><span> </span><span id="local-6989586621681797741"><span class="annot"><span class="annottext">HsArrow GhcPs
</span><a href="#local-6989586621681797741"><span class="hs-identifier hs-var">mult</span></a></span></span><span> </span><span id="local-6989586621681797742"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681797742"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HsArrow GhcPs -&gt; a -&gt; HsScaled GhcPs a
forall pass a. HsArrow pass -&gt; a -&gt; HsScaled pass a
</span><a href="Language.Haskell.Syntax.Type.html#HsScaled"><span class="hs-identifier hs-var">HsScaled</span></a></span><span> </span><span class="annot"><span class="annottext">HsArrow GhcPs
</span><a href="#local-6989586621681797741"><span class="hs-identifier hs-var">mult</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; HsScaled GhcPs a) -&gt; HdkA a -&gt; HdkA (HsScaled GhcPs a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/Data.Functor.html#%3C%24%3E/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; HdkA a
forall a. HasHaddock a =&gt; a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681797742"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-938"></span><span>
</span><span id="line-939"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681796765"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HasHaddock"><span class="hs-identifier hs-type">HasHaddock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681796765"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HasHaddock"><span class="hs-identifier hs-type">HasHaddock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsWildCardBndrs"><span class="hs-identifier hs-type">HsWildCardBndrs</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681796765"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-940"></span><span>  </span><span id="local-6989586621681797747"><span class="annot"><span class="annottext">addHaddock :: HsWildCardBndrs GhcPs a -&gt; HdkA (HsWildCardBndrs GhcPs a)
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var hs-var hs-var hs-var">addHaddock</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsWC"><span class="hs-identifier hs-type">HsWC</span></a></span><span> </span><span class="annot"><span class="annottext">XHsWC GhcPs a
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681797749"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681797749"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">XHsWC GhcPs a -&gt; a -&gt; HsWildCardBndrs GhcPs a
forall pass thing.
XHsWC pass thing -&gt; thing -&gt; HsWildCardBndrs pass thing
</span><a href="Language.Haskell.Syntax.Type.html#HsWC"><span class="hs-identifier hs-var">HsWC</span></a></span><span> </span><span class="annot"><span class="annottext">XHsWC GhcPs a
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; HsWildCardBndrs GhcPs a)
-&gt; HdkA a -&gt; HdkA (HsWildCardBndrs GhcPs a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/Data.Functor.html#%3C%24%3E/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; HdkA a
forall a. HasHaddock a =&gt; a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681797749"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-941"></span><span>
</span><span id="line-942"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HasHaddock"><span class="hs-identifier hs-type">HasHaddock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsSigType"><span class="hs-identifier hs-type">HsSigType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-943"></span><span>  </span><span id="local-6989586621681797755"><span class="annot"><span class="annottext">addHaddock :: GenLocated SrcSpanAnnA (HsSigType GhcPs)
-&gt; HdkA (GenLocated SrcSpanAnnA (HsSigType GhcPs))
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var hs-var hs-var hs-var">addHaddock</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681797756"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797756"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsSig"><span class="hs-identifier hs-type">HsSig</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">sig_bndrs :: forall pass. HsSigType pass -&gt; HsOuterSigTyVarBndrs pass
</span><a href="Language.Haskell.Syntax.Type.html#sig_bndrs"><span class="hs-identifier hs-var">sig_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681797759"><span class="annot"><span class="annottext">HsOuterSigTyVarBndrs GhcPs
</span><a href="#local-6989586621681797759"><span class="hs-identifier hs-var">outer_bndrs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sig_body :: forall pass. HsSigType pass -&gt; LHsType pass
</span><a href="Language.Haskell.Syntax.Type.html#sig_body"><span class="hs-identifier hs-var">sig_body</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681797761"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621681797761"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-944"></span><span>    </span><span class="annot"><span class="annottext">SrcSpan
-&gt; HdkA (GenLocated SrcSpanAnnA (HsSigType GhcPs))
-&gt; HdkA (GenLocated SrcSpanAnnA (HsSigType GhcPs))
forall a. SrcSpan -&gt; HdkA a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#extendHdkA"><span class="hs-identifier hs-var">extendHdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. SrcSpanAnn' a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797756"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(HdkA (GenLocated SrcSpanAnnA (HsSigType GhcPs))
 -&gt; HdkA (GenLocated SrcSpanAnnA (HsSigType GhcPs)))
-&gt; HdkA (GenLocated SrcSpanAnnA (HsSigType GhcPs))
-&gt; HdkA (GenLocated SrcSpanAnnA (HsSigType GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-945"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsOuterSigTyVarBndrs GhcPs
</span><a href="#local-6989586621681797759"><span class="hs-identifier hs-var">outer_bndrs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-946"></span><span>        </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsOuterImplicit"><span class="hs-identifier hs-type">HsOuterImplicit</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; HdkA ()
forall a. a -&gt; HdkA a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#pure/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-947"></span><span>        </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsOuterExplicit"><span class="hs-identifier hs-type">HsOuterExplicit</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">hso_bndrs :: forall flag pass.
HsOuterTyVarBndrs flag pass -&gt; [LHsTyVarBndr flag (NoGhcTc pass)]
</span><a href="Language.Haskell.Syntax.Type.html#hso_bndrs"><span class="hs-identifier hs-var">hso_bndrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681797765"><span class="annot"><span class="annottext">[LHsTyVarBndr Specificity (NoGhcTc GhcPs)]
</span><a href="#local-6989586621681797765"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-948"></span><span>          </span><span class="annot"><span class="annottext">SrcSpan -&gt; HdkA ()
</span><a href="GHC.Parser.PostProcess.Haddock.html#registerLocHdkA"><span class="hs-identifier hs-var">registerLocHdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[LHsTyVarBndr Specificity GhcPs] -&gt; SrcSpan
forall flag. [LHsTyVarBndr flag GhcPs] -&gt; SrcSpan
</span><a href="GHC.Parser.PostProcess.Haddock.html#getLHsTyVarBndrsLoc"><span class="hs-identifier hs-var">getLHsTyVarBndrsLoc</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr Specificity (NoGhcTc GhcPs)]
[LHsTyVarBndr Specificity GhcPs]
</span><a href="#local-6989586621681797765"><span class="hs-identifier hs-var">bndrs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-949"></span><span>      </span><span id="local-6989586621681797767"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621681797767"><span class="hs-identifier hs-var">body'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; HdkA (GenLocated SrcSpanAnnA (HsType GhcPs))
forall a. HasHaddock a =&gt; a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621681797761"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-950"></span><span>      </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsSigType GhcPs -&gt; GenLocated SrcSpanAnnA (HsSigType GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797756"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(HsSigType GhcPs -&gt; GenLocated SrcSpanAnnA (HsSigType GhcPs))
-&gt; HsSigType GhcPs -&gt; GenLocated SrcSpanAnnA (HsSigType GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">XHsSig GhcPs
-&gt; HsOuterSigTyVarBndrs GhcPs -&gt; LHsType GhcPs -&gt; HsSigType GhcPs
forall pass.
XHsSig pass
-&gt; HsOuterSigTyVarBndrs pass -&gt; LHsType pass -&gt; HsSigType pass
</span><a href="Language.Haskell.Syntax.Type.html#HsSig"><span class="hs-identifier hs-var">HsSig</span></a></span><span> </span><span class="annot"><span class="annottext">XHsSig GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">HsOuterSigTyVarBndrs GhcPs
</span><a href="#local-6989586621681797759"><span class="hs-identifier hs-var">outer_bndrs</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621681797767"><span class="hs-identifier hs-var">body'</span></a></span><span>
</span><span id="line-951"></span><span>
</span><span id="line-952"></span><span class="hs-comment">-- Process a type, adding documentation comments to function arguments</span><span>
</span><span id="line-953"></span><span class="hs-comment">-- and the result. Many formatting styles are supported.</span><span>
</span><span id="line-954"></span><span class="hs-comment">--</span><span>
</span><span id="line-955"></span><span class="hs-comment">--  my_function ::</span><span>
</span><span id="line-956"></span><span class="hs-comment">--      forall a.</span><span>
</span><span id="line-957"></span><span class="hs-comment">--      Eq a =&gt;</span><span>
</span><span id="line-958"></span><span class="hs-comment">--      Maybe a -&gt;  -- ^ Comment on Maybe a  (function argument)</span><span>
</span><span id="line-959"></span><span class="hs-comment">--      Bool -&gt;     -- ^ Comment on Bool     (function argument)</span><span>
</span><span id="line-960"></span><span class="hs-comment">--      String      -- ^ Comment on String   (the result)</span><span>
</span><span id="line-961"></span><span class="hs-comment">--</span><span>
</span><span id="line-962"></span><span class="hs-comment">--  my_function</span><span>
</span><span id="line-963"></span><span class="hs-comment">--      :: forall a. Eq a</span><span>
</span><span id="line-964"></span><span class="hs-comment">--      =&gt; Maybe a     -- ^ Comment on Maybe a  (function argument)</span><span>
</span><span id="line-965"></span><span class="hs-comment">--      -&gt; Bool        -- ^ Comment on Bool     (function argument)</span><span>
</span><span id="line-966"></span><span class="hs-comment">--      -&gt; String      -- ^ Comment on String   (the result)</span><span>
</span><span id="line-967"></span><span class="hs-comment">--</span><span>
</span><span id="line-968"></span><span class="hs-comment">--  my_function ::</span><span>
</span><span id="line-969"></span><span class="hs-comment">--      forall a. Eq a =&gt;</span><span>
</span><span id="line-970"></span><span class="hs-comment">--      -- | Comment on Maybe a (function argument)</span><span>
</span><span id="line-971"></span><span class="hs-comment">--      Maybe a -&gt;</span><span>
</span><span id="line-972"></span><span class="hs-comment">--      -- | Comment on Bool (function argument)</span><span>
</span><span id="line-973"></span><span class="hs-comment">--      Bool -&gt;</span><span>
</span><span id="line-974"></span><span class="hs-comment">--      -- | Comment on String (the result)</span><span>
</span><span id="line-975"></span><span class="hs-comment">--      String</span><span>
</span><span id="line-976"></span><span class="hs-comment">--</span><span>
</span><span id="line-977"></span><span class="hs-comment">-- This is achieved by simply ignoring (not registering the location of) the</span><span>
</span><span id="line-978"></span><span class="hs-comment">-- function arrow (-&gt;).</span><span>
</span><span id="line-979"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HasHaddock"><span class="hs-identifier hs-type">HasHaddock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#LocatedA"><span class="hs-identifier hs-type">LocatedA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsType"><span class="hs-identifier hs-type">HsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-980"></span><span>  </span><span id="local-6989586621681797780"><span class="annot"><span class="annottext">addHaddock :: GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; HdkA (GenLocated SrcSpanAnnA (HsType GhcPs))
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var hs-var hs-var hs-var">addHaddock</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681797781"><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797781"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681797782"><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621681797782"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-981"></span><span>    </span><span class="annot"><span class="annottext">SrcSpan
-&gt; HdkA (GenLocated SrcSpanAnnA (HsType GhcPs))
-&gt; HdkA (GenLocated SrcSpanAnnA (HsType GhcPs))
forall a. SrcSpan -&gt; HdkA a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#extendHdkA"><span class="hs-identifier hs-var">extendHdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. SrcSpanAnn' a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797781"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(HdkA (GenLocated SrcSpanAnnA (HsType GhcPs))
 -&gt; HdkA (GenLocated SrcSpanAnnA (HsType GhcPs)))
-&gt; HdkA (GenLocated SrcSpanAnnA (HsType GhcPs))
-&gt; HdkA (GenLocated SrcSpanAnnA (HsType GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-982"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621681797782"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-983"></span><span>
</span><span id="line-984"></span><span>      </span><span class="hs-comment">-- forall a b c. t</span><span>
</span><span id="line-985"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsForAllTy"><span class="hs-identifier hs-type">HsForAllTy</span></a></span><span> </span><span id="local-6989586621681797784"><span class="annot"><span class="annottext">XForAllTy GhcPs
</span><a href="#local-6989586621681797784"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681797785"><span class="annot"><span class="annottext">HsForAllTelescope GhcPs
</span><a href="#local-6989586621681797785"><span class="hs-identifier hs-var">tele</span></a></span></span><span> </span><span id="local-6989586621681797786"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621681797786"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-986"></span><span>        </span><span class="annot"><span class="annottext">SrcSpan -&gt; HdkA ()
</span><a href="GHC.Parser.PostProcess.Haddock.html#registerLocHdkA"><span class="hs-identifier hs-var">registerLocHdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsForAllTelescope GhcPs -&gt; SrcSpan
</span><a href="GHC.Parser.PostProcess.Haddock.html#getForAllTeleLoc"><span class="hs-identifier hs-var">getForAllTeleLoc</span></a></span><span> </span><span class="annot"><span class="annottext">HsForAllTelescope GhcPs
</span><a href="#local-6989586621681797785"><span class="hs-identifier hs-var">tele</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-987"></span><span>        </span><span id="local-6989586621681797788"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621681797788"><span class="hs-identifier hs-var">body'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; HdkA (GenLocated SrcSpanAnnA (HsType GhcPs))
forall a. HasHaddock a =&gt; a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621681797786"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-988"></span><span>        </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsType GhcPs -&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797781"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XForAllTy GhcPs
-&gt; HsForAllTelescope GhcPs -&gt; LHsType GhcPs -&gt; HsType GhcPs
forall pass.
XForAllTy pass
-&gt; HsForAllTelescope pass -&gt; LHsType pass -&gt; HsType pass
</span><a href="Language.Haskell.Syntax.Type.html#HsForAllTy"><span class="hs-identifier hs-var">HsForAllTy</span></a></span><span> </span><span class="annot"><span class="annottext">XForAllTy GhcPs
</span><a href="#local-6989586621681797784"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">HsForAllTelescope GhcPs
</span><a href="#local-6989586621681797785"><span class="hs-identifier hs-var">tele</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621681797788"><span class="hs-identifier hs-var">body'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-989"></span><span>
</span><span id="line-990"></span><span>      </span><span class="hs-comment">-- (Eq a, Num a) =&gt; t</span><span>
</span><span id="line-991"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsQualTy"><span class="hs-identifier hs-type">HsQualTy</span></a></span><span> </span><span id="local-6989586621681797790"><span class="annot"><span class="annottext">XQualTy GhcPs
</span><a href="#local-6989586621681797790"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681797791"><span class="annot"><span class="annottext">LHsContext GhcPs
</span><a href="#local-6989586621681797791"><span class="hs-identifier hs-var">lhs</span></a></span></span><span> </span><span id="local-6989586621681797792"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621681797792"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-992"></span><span>        </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcPs)]
-&gt; HdkA ()
forall a e. GenLocated (SrcSpanAnn' a) e -&gt; HdkA ()
</span><a href="GHC.Parser.PostProcess.Haddock.html#registerHdkA"><span class="hs-identifier hs-var">registerHdkA</span></a></span><span> </span><span class="annot"><span class="annottext">LHsContext GhcPs
GenLocated SrcSpanAnnC [GenLocated SrcSpanAnnA (HsType GhcPs)]
</span><a href="#local-6989586621681797791"><span class="hs-identifier hs-var">lhs</span></a></span><span>
</span><span id="line-993"></span><span>        </span><span id="local-6989586621681797793"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621681797793"><span class="hs-identifier hs-var">rhs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; HdkA (GenLocated SrcSpanAnnA (HsType GhcPs))
forall a. HasHaddock a =&gt; a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621681797792"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-994"></span><span>        </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsType GhcPs -&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797781"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XQualTy GhcPs -&gt; LHsContext GhcPs -&gt; LHsType GhcPs -&gt; HsType GhcPs
forall pass.
XQualTy pass -&gt; LHsContext pass -&gt; LHsType pass -&gt; HsType pass
</span><a href="Language.Haskell.Syntax.Type.html#HsQualTy"><span class="hs-identifier hs-var">HsQualTy</span></a></span><span> </span><span class="annot"><span class="annottext">XQualTy GhcPs
</span><a href="#local-6989586621681797790"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">LHsContext GhcPs
</span><a href="#local-6989586621681797791"><span class="hs-identifier hs-var">lhs</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621681797793"><span class="hs-identifier hs-var">rhs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-995"></span><span>
</span><span id="line-996"></span><span>      </span><span class="hs-comment">-- arg -&gt; res</span><span>
</span><span id="line-997"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsFunTy"><span class="hs-identifier hs-type">HsFunTy</span></a></span><span> </span><span id="local-6989586621681797795"><span class="annot"><span class="annottext">XFunTy GhcPs
</span><a href="#local-6989586621681797795"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621681797796"><span class="annot"><span class="annottext">HsArrow GhcPs
</span><a href="#local-6989586621681797796"><span class="hs-identifier hs-var">mult</span></a></span></span><span> </span><span id="local-6989586621681797797"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621681797797"><span class="hs-identifier hs-var">lhs</span></a></span></span><span> </span><span id="local-6989586621681797798"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621681797798"><span class="hs-identifier hs-var">rhs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-998"></span><span>        </span><span id="local-6989586621681797799"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621681797799"><span class="hs-identifier hs-var">lhs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; HdkA (GenLocated SrcSpanAnnA (HsType GhcPs))
forall a. HasHaddock a =&gt; a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621681797797"><span class="hs-identifier hs-var">lhs</span></a></span><span>
</span><span id="line-999"></span><span>        </span><span id="local-6989586621681797800"><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621681797800"><span class="hs-identifier hs-var">rhs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs)
-&gt; HdkA (GenLocated SrcSpanAnnA (HsType GhcPs))
forall a. HasHaddock a =&gt; a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#addHaddock"><span class="hs-identifier hs-var">addHaddock</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621681797798"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-1000"></span><span>        </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsType GhcPs -&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797781"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XFunTy GhcPs
-&gt; HsArrow GhcPs -&gt; LHsType GhcPs -&gt; LHsType GhcPs -&gt; HsType GhcPs
forall pass.
XFunTy pass
-&gt; HsArrow pass -&gt; LHsType pass -&gt; LHsType pass -&gt; HsType pass
</span><a href="Language.Haskell.Syntax.Type.html#HsFunTy"><span class="hs-identifier hs-var">HsFunTy</span></a></span><span> </span><span class="annot"><span class="annottext">XFunTy GhcPs
</span><a href="#local-6989586621681797795"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">HsArrow GhcPs
</span><a href="#local-6989586621681797796"><span class="hs-identifier hs-var">mult</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621681797799"><span class="hs-identifier hs-var">lhs'</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621681797800"><span class="hs-identifier hs-var">rhs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1001"></span><span>
</span><span id="line-1002"></span><span>      </span><span class="hs-comment">-- other types</span><span>
</span><span id="line-1003"></span><span>      </span><span class="annot"><span class="annottext">HsType GhcPs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HdkM (GenLocated SrcSpanAnnA (HsType GhcPs))
-&gt; HdkA (GenLocated SrcSpanAnnA (HsType GhcPs))
forall a. HdkM a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#liftHdkA"><span class="hs-identifier hs-var">liftHdkA</span></a></span><span> </span><span class="annot"><span class="annottext">(HdkM (GenLocated SrcSpanAnnA (HsType GhcPs))
 -&gt; HdkA (GenLocated SrcSpanAnnA (HsType GhcPs)))
-&gt; HdkM (GenLocated SrcSpanAnnA (HsType GhcPs))
-&gt; HdkA (GenLocated SrcSpanAnnA (HsType GhcPs))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1004"></span><span>        </span><span id="local-6989586621681797801"><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan HsDocString)
</span><a href="#local-6989586621681797801"><span class="hs-identifier hs-var">mDoc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; HdkM (Maybe (GenLocated SrcSpan HsDocString))
</span><a href="GHC.Parser.PostProcess.Haddock.html#getPrevNextDoc"><span class="hs-identifier hs-var">getPrevNextDoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; SrcSpan
forall a. SrcSpanAnn' a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797781"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1005"></span><span>        </span><span class="hs-identifier">return</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LHsType GhcPs
-&gt; Maybe (GenLocated SrcSpan HsDocString) -&gt; LHsType GhcPs
</span><a href="GHC.Parser.PostProcess.Haddock.html#mkLHsDocTy"><span class="hs-identifier hs-var">mkLHsDocTy</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsType GhcPs -&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681797781"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">HsType GhcPs
</span><a href="#local-6989586621681797782"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan HsDocString)
</span><a href="#local-6989586621681797801"><span class="hs-identifier hs-var">mDoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1006"></span><span>
</span><span id="line-1007"></span><span class="annot"><span class="hs-comment">{- *********************************************************************
*                                                                      *
*      HdkA: a layer over HdkM that propagates location information    *
*                                                                      *
********************************************************************* -}</span></span><span>
</span><span id="line-1012"></span><span>
</span><span id="line-1013"></span><span class="hs-comment">-- See Note [Adding Haddock comments to the syntax tree].</span><span>
</span><span id="line-1014"></span><span class="hs-comment">--</span><span>
</span><span id="line-1015"></span><span class="hs-comment">-- 'HdkA' provides a way to propagate location information from surrounding</span><span>
</span><span id="line-1016"></span><span class="hs-comment">-- computations:</span><span>
</span><span id="line-1017"></span><span class="hs-comment">--</span><span>
</span><span id="line-1018"></span><span class="hs-comment">--   left_neighbour &lt;*&gt; HdkA inner_span inner_m &lt;*&gt; right_neighbour</span><span>
</span><span id="line-1019"></span><span class="hs-comment">--</span><span>
</span><span id="line-1020"></span><span class="hs-comment">-- Here, the following holds:</span><span>
</span><span id="line-1021"></span><span class="hs-comment">--</span><span>
</span><span id="line-1022"></span><span class="annot"><span class="hs-comment">-- * the 'left_neighbour' will only see Haddock comments until 'bufSpanStart' of 'inner_span'</span></span><span>
</span><span id="line-1023"></span><span class="annot"><span class="hs-comment">-- * the 'right_neighbour' will only see Haddock comments after 'bufSpanEnd' of 'inner_span'</span></span><span>
</span><span id="line-1024"></span><span class="annot"><span class="hs-comment">-- * the 'inner_m' will only see Haddock comments between its 'left_neighbour' and its 'right_neighbour'</span></span><span>
</span><span id="line-1025"></span><span class="hs-comment">--</span><span>
</span><span id="line-1026"></span><span class="hs-comment">-- In other words, every computation:</span><span>
</span><span id="line-1027"></span><span class="hs-comment">--</span><span>
</span><span id="line-1028"></span><span class="hs-comment">--  * delimits the surrounding computations</span><span>
</span><span id="line-1029"></span><span class="hs-comment">--  * is delimited by the surrounding computations</span><span>
</span><span id="line-1030"></span><span class="hs-comment">--</span><span>
</span><span id="line-1031"></span><span class="hs-comment">--  Therefore, a 'HdkA' computation must be always considered in the context in</span><span>
</span><span id="line-1032"></span><span class="hs-comment">--  which it is used.</span><span>
</span><span id="line-1033"></span><span class="hs-keyword">data</span><span> </span><span id="HdkA"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkA"><span class="hs-identifier hs-var">HdkA</span></a></span></span><span> </span><span id="local-6989586621681796973"><span class="annot"><a href="#local-6989586621681796973"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1034"></span><span>  </span><span id="HdkA"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkA"><span class="hs-identifier hs-var">HdkA</span></a></span></span><span>
</span><span id="line-1035"></span><span>    </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.Strict.html#Maybe"><span class="hs-identifier hs-type">Strict.Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#BufSpan"><span class="hs-identifier hs-type">BufSpan</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1036"></span><span>                     </span><span class="hs-comment">-- Just b  &lt;=&gt; BufSpan occupied by the processed AST element.</span><span>
</span><span id="line-1037"></span><span>                     </span><span class="hs-comment">--             The surrounding computations will not look inside.</span><span>
</span><span id="line-1038"></span><span>                     </span><span class="hs-comment">--</span><span>
</span><span id="line-1039"></span><span>                     </span><span class="hs-comment">-- Nothing &lt;=&gt; No BufSpan (e.g. when the HdkA is constructed by 'pure' or 'liftHdkA').</span><span>
</span><span id="line-1040"></span><span>                     </span><span class="hs-comment">--             The surrounding computations are not delimited.</span><span>
</span><span id="line-1041"></span><span>
</span><span id="line-1042"></span><span>    </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkM"><span class="hs-identifier hs-type">HdkM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681796973"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- The stateful computation that looks up Haddock comments and</span><span>
</span><span id="line-1043"></span><span>              </span><span class="hs-comment">-- adds them to the resulting AST node.</span><span>
</span><span id="line-1044"></span><span>
</span><span id="line-1045"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681797806"><span id="local-6989586621681797809"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; HdkA a -&gt; HdkA b)
-&gt; (forall a b. a -&gt; HdkA b -&gt; HdkA a) -&gt; Functor HdkA
forall a b. a -&gt; HdkA b -&gt; HdkA a
forall a b. (a -&gt; b) -&gt; HdkA a -&gt; HdkA b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall a b. (a -&gt; b) -&gt; HdkA a -&gt; HdkA b
fmap :: forall a b. (a -&gt; b) -&gt; HdkA a -&gt; HdkA b
$c&lt;$ :: forall a b. a -&gt; HdkA b -&gt; HdkA a
&lt;$ :: forall a b. a -&gt; HdkA b -&gt; HdkA a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#Functor/GHC.Base.html#Functor"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1046"></span><span>
</span><span id="line-1047"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681797817"><span id="local-6989586621681797820"><span id="local-6989586621681797823"><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#Applicative/GHC.Base.html#Applicative"><span class="hs-identifier hs-type">Applicative</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkA"><span class="hs-identifier hs-type">HdkA</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1048"></span><span>  </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkA"><span class="hs-identifier hs-type">HdkA</span></a></span><span> </span><span id="local-6989586621681797834"><span class="annot"><span class="annottext">Maybe BufSpan
</span><a href="#local-6989586621681797834"><span class="hs-identifier hs-var">l1</span></a></span></span><span> </span><span id="local-6989586621681797835"><span class="annot"><span class="annottext">HdkM (a -&gt; b)
</span><a href="#local-6989586621681797835"><span class="hs-identifier hs-var">m1</span></a></span></span><span> </span><span id="local-6989586621681797836"><span class="annot"><span class="annottext">&lt;*&gt; :: forall a b. HdkA (a -&gt; b) -&gt; HdkA a -&gt; HdkA b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%3C%2A%3E/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;*&gt;</span></a></span></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkA"><span class="hs-identifier hs-type">HdkA</span></a></span><span> </span><span id="local-6989586621681797837"><span class="annot"><span class="annottext">Maybe BufSpan
</span><a href="#local-6989586621681797837"><span class="hs-identifier hs-var">l2</span></a></span></span><span> </span><span id="local-6989586621681797838"><span class="annot"><span class="annottext">HdkM a
</span><a href="#local-6989586621681797838"><span class="hs-identifier hs-var">m2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1049"></span><span>    </span><span class="annot"><span class="annottext">Maybe BufSpan -&gt; HdkM b -&gt; HdkA b
forall a. Maybe BufSpan -&gt; HdkM a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#HdkA"><span class="hs-identifier hs-var">HdkA</span></a></span><span>
</span><span id="line-1050"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe BufSpan
</span><a href="#local-6989586621681797834"><span class="hs-identifier hs-var">l1</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe BufSpan -&gt; Maybe BufSpan -&gt; Maybe BufSpan
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%3C%3E/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe BufSpan
</span><a href="#local-6989586621681797837"><span class="hs-identifier hs-var">l2</span></a></span><span class="hs-special">)</span><span>  </span><span class="hs-comment">-- The combined BufSpan that covers both subcomputations.</span><span>
</span><span id="line-1051"></span><span>                  </span><span class="hs-comment">--</span><span>
</span><span id="line-1052"></span><span>                  </span><span class="hs-comment">-- The Semigroup instance for Maybe quite conveniently does the right thing:</span><span>
</span><span id="line-1053"></span><span>                  </span><span class="hs-comment">--    Nothing &lt;&gt; b       = b</span><span>
</span><span id="line-1054"></span><span>                  </span><span class="hs-comment">--    a       &lt;&gt; Nothing = a</span><span>
</span><span id="line-1055"></span><span>                  </span><span class="hs-comment">--    Just a  &lt;&gt; Just b  = Just (a &lt;&gt; b)</span><span>
</span><span id="line-1056"></span><span>
</span><span id="line-1057"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HdkM (a -&gt; b) -&gt; HdkM (a -&gt; b)
</span><a href="#local-6989586621681797839"><span class="hs-identifier hs-var">delim1</span></a></span><span> </span><span class="annot"><span class="annottext">HdkM (a -&gt; b)
</span><a href="#local-6989586621681797835"><span class="hs-identifier hs-var">m1</span></a></span><span> </span><span class="annot"><span class="annottext">HdkM (a -&gt; b) -&gt; HdkM a -&gt; HdkM b
forall a b. HdkM (a -&gt; b) -&gt; HdkM a -&gt; HdkM b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%3C%2A%3E/GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">HdkM a -&gt; HdkM a
</span><a href="#local-6989586621681797840"><span class="hs-identifier hs-var">delim2</span></a></span><span> </span><span class="annot"><span class="annottext">HdkM a
</span><a href="#local-6989586621681797838"><span class="hs-identifier hs-var">m2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Stateful computations are run in left-to-right order,</span><span>
</span><span id="line-1058"></span><span>                                </span><span class="hs-comment">-- without any smart reordering strategy. So users of this</span><span>
</span><span id="line-1059"></span><span>                                </span><span class="hs-comment">-- operation must take care to traverse the AST</span><span>
</span><span id="line-1060"></span><span>                                </span><span class="hs-comment">-- in concrete syntax order.</span><span>
</span><span id="line-1061"></span><span>                                </span><span class="hs-comment">-- See Note [Smart reordering in HdkA (or lack thereof)]</span><span>
</span><span id="line-1062"></span><span>                                </span><span class="hs-comment">--</span><span>
</span><span id="line-1063"></span><span>                                </span><span class="hs-comment">-- Each computation is delimited (&quot;sandboxed&quot;)</span><span>
</span><span id="line-1064"></span><span>                                </span><span class="hs-comment">-- in a way that it doesn't see any Haddock</span><span>
</span><span id="line-1065"></span><span>                                </span><span class="hs-comment">-- comments past the neighbouring AST node.</span><span>
</span><span id="line-1066"></span><span>                                </span><span class="hs-comment">-- These delim1/delim2 are key to how HdkA operates.</span><span>
</span><span id="line-1067"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-1068"></span><span>      </span><span class="hs-comment">-- Delimit the LHS by the location information from the RHS</span><span>
</span><span id="line-1069"></span><span>      </span><span id="local-6989586621681797839"><span class="annot"><span class="annottext">delim1 :: HdkM (a -&gt; b) -&gt; HdkM (a -&gt; b)
</span><a href="#local-6989586621681797839"><span class="hs-identifier hs-var hs-var">delim1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocRange -&gt; HdkM (a -&gt; b) -&gt; HdkM (a -&gt; b)
forall a. LocRange -&gt; HdkM a -&gt; HdkM a
</span><a href="GHC.Parser.PostProcess.Haddock.html#inLocRange"><span class="hs-identifier hs-var">inLocRange</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe BufPos -&gt; LocRange
</span><a href="GHC.Parser.PostProcess.Haddock.html#locRangeTo"><span class="hs-identifier hs-var">locRangeTo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#fmap/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Data.Strict.html#Maybe"><span class="hs-identifier hs-type">Strict.Maybe</span></a></span><span> </span><span class="annot"><span class="annottext">BufSpan -&gt; BufPos
</span><a href="GHC.Types.SrcLoc.html#bufSpanStart"><span class="hs-identifier hs-var">bufSpanStart</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe BufSpan
</span><a href="#local-6989586621681797837"><span class="hs-identifier hs-var">l2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1070"></span><span>      </span><span class="hs-comment">-- Delimit the RHS by the location information from the LHS</span><span>
</span><span id="line-1071"></span><span>      </span><span id="local-6989586621681797840"><span class="annot"><span class="annottext">delim2 :: HdkM a -&gt; HdkM a
</span><a href="#local-6989586621681797840"><span class="hs-identifier hs-var hs-var">delim2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocRange -&gt; HdkM a -&gt; HdkM a
forall a. LocRange -&gt; HdkM a -&gt; HdkM a
</span><a href="GHC.Parser.PostProcess.Haddock.html#inLocRange"><span class="hs-identifier hs-var">inLocRange</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe BufPos -&gt; LocRange
</span><a href="GHC.Parser.PostProcess.Haddock.html#locRangeFrom"><span class="hs-identifier hs-var">locRangeFrom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#fmap/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="GHC.Data.Strict.html#Maybe"><span class="hs-identifier hs-type">Strict.Maybe</span></a></span><span> </span><span class="annot"><span class="annottext">BufSpan -&gt; BufPos
</span><a href="GHC.Types.SrcLoc.html#bufSpanEnd"><span class="hs-identifier hs-var">bufSpanEnd</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe BufSpan
</span><a href="#local-6989586621681797834"><span class="hs-identifier hs-var">l1</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1072"></span><span>
</span><span id="line-1073"></span><span>  </span><span id="local-6989586621681797842"><span class="annot"><span class="annottext">pure :: forall a. a -&gt; HdkA a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#pure/GHC.Base.html#pure"><span class="hs-identifier hs-var hs-var hs-var hs-var">pure</span></a></span></span><span> </span><span id="local-6989586621681797843"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681797843"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1074"></span><span>    </span><span class="hs-comment">-- Return a value without performing any stateful computation, and without</span><span>
</span><span id="line-1075"></span><span>    </span><span class="hs-comment">-- any delimiting effect on the surrounding computations.</span><span>
</span><span id="line-1076"></span><span>    </span><span class="annot"><span class="annottext">HdkM a -&gt; HdkA a
forall a. HdkM a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#liftHdkA"><span class="hs-identifier hs-var">liftHdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; HdkM a
forall a. a -&gt; HdkM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#pure/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681797843"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1077"></span><span>
</span><span id="line-1078"></span><span class="hs-comment">{- Note [Smart reordering in HdkA (or lack thereof)]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
When traversing the AST, the user must take care to traverse it in concrete
syntax order.

For example, when processing HsFunTy, it's important to get it right and write
it like so:

      HsFunTy _ mult lhs rhs -&gt; do
        lhs' &lt;- addHaddock lhs
        rhs' &lt;- addHaddock rhs
        pure $ L l (HsFunTy noExtField mult lhs' rhs')

Rather than like so:

      HsFunTy _ mult lhs rhs -&gt; do
        rhs' &lt;- addHaddock rhs   -- bad! wrong order
        lhs' &lt;- addHaddock lhs   -- bad! wrong order
        pure $ L l (HsFunTy noExtField mult lhs' rhs')

This is somewhat bug-prone, so we could try to fix this with some Applicative
magic. When we define (&lt;*&gt;) for HdkA, why not reorder the computations as
necessary? In pseudo-code:

  a1 &lt;*&gt; a2 | a1 `before` a2 = ... normal processing ...
            | otherwise      = a1 &lt;**&gt; a2

While this trick could work for any two *adjacent* AST elements out of order
(as in HsFunTy example above), it would fail in more elaborate scenarios (e.g.
processing a list of declarations out of order).

If it's not obvious why this trick doesn't work, ponder this: it's a bit like trying to get
a sorted list by defining a 'smart' concatenation operator in the following manner:

  a ?++ b | a &lt;= b    = a ++ b
          | otherwise = b ++ a

At first glance it seems to work:

  ghci&gt; [1] ?++ [2] ?++ [3]
  [1,2,3]

  ghci&gt; [2] ?++ [1] ?++ [3]
  [1,2,3]                     -- wow, sorted!

But it actually doesn't:

  ghci&gt; [3] ?++ [1] ?++ [2]
  [1,3,2]                     -- not sorted...
-}</span><span>
</span><span id="line-1128"></span><span>
</span><span id="line-1129"></span><span class="hs-comment">-- Run a HdkA computation in an unrestricted LocRange. This is only used at the</span><span>
</span><span id="line-1130"></span><span class="hs-comment">-- top level to run the final computation for the entire module.</span><span>
</span><span id="line-1131"></span><span id="local-6989586621681796675"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#runHdkA"><span class="hs-identifier hs-type">runHdkA</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkA"><span class="hs-identifier hs-type">HdkA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681796675"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkSt"><span class="hs-identifier hs-type">HdkSt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681796675"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkSt"><span class="hs-identifier hs-type">HdkSt</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1132"></span><span id="runHdkA"><span class="annot"><span class="annottext">runHdkA :: forall a. HdkA a -&gt; HdkSt -&gt; (a, HdkSt)
</span><a href="GHC.Parser.PostProcess.Haddock.html#runHdkA"><span class="hs-identifier hs-var hs-var">runHdkA</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkA"><span class="hs-identifier hs-type">HdkA</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe BufSpan
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681797845"><span class="annot"><span class="annottext">HdkM a
</span><a href="#local-6989586621681797845"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HdkM a -&gt; LocRange -&gt; HdkSt -&gt; (a, HdkSt)
forall a. HdkM a -&gt; LocRange -&gt; HdkSt -&gt; (a, HdkSt)
</span><a href="GHC.Parser.PostProcess.Haddock.html#unHdkM"><span class="hs-identifier hs-var">unHdkM</span></a></span><span> </span><span class="annot"><span class="annottext">HdkM a
</span><a href="#local-6989586621681797845"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">LocRange
forall a. Monoid a =&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mempty/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1133"></span><span>
</span><span id="line-1134"></span><span class="hs-comment">-- Let the neighbours know about an item at this location.</span><span>
</span><span id="line-1135"></span><span class="hs-comment">--</span><span>
</span><span id="line-1136"></span><span class="hs-comment">-- Consider this example:</span><span>
</span><span id="line-1137"></span><span class="hs-comment">--</span><span>
</span><span id="line-1138"></span><span class="hs-comment">--  class -- | peculiarly placed comment</span><span>
</span><span id="line-1139"></span><span class="hs-comment">--    MyClass a where</span><span>
</span><span id="line-1140"></span><span class="hs-comment">--        my_method :: a -&gt; a</span><span>
</span><span id="line-1141"></span><span class="hs-comment">--</span><span>
</span><span id="line-1142"></span><span class="hs-comment">-- How do we know to reject the &quot;peculiarly placed comment&quot; instead of</span><span>
</span><span id="line-1143"></span><span class="hs-comment">-- associating it with my_method? Its indentation level matches.</span><span>
</span><span id="line-1144"></span><span class="hs-comment">--</span><span>
</span><span id="line-1145"></span><span class="hs-comment">-- But clearly, there's &quot;MyClass a where&quot; separating the comment and my_method.</span><span>
</span><span id="line-1146"></span><span class="hs-comment">-- To take it into account, we must register its location using registerLocHdkA</span><span>
</span><span id="line-1147"></span><span class="hs-comment">-- or registerHdkA.</span><span>
</span><span id="line-1148"></span><span class="hs-comment">--</span><span>
</span><span id="line-1149"></span><span class="hs-comment">-- See Note [Register keyword location].</span><span>
</span><span id="line-1150"></span><span class="hs-comment">-- See Note [Adding Haddock comments to the syntax tree].</span><span>
</span><span id="line-1151"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#registerLocHdkA"><span class="hs-identifier hs-type">registerLocHdkA</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkA"><span class="hs-identifier hs-type">HdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1152"></span><span id="registerLocHdkA"><span class="annot"><span class="annottext">registerLocHdkA :: SrcSpan -&gt; HdkA ()
</span><a href="GHC.Parser.PostProcess.Haddock.html#registerLocHdkA"><span class="hs-identifier hs-var hs-var">registerLocHdkA</span></a></span></span><span> </span><span id="local-6989586621681797847"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681797847"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe BufSpan -&gt; HdkM () -&gt; HdkA ()
forall a. Maybe BufSpan -&gt; HdkM a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#HdkA"><span class="hs-identifier hs-var">HdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; Maybe BufSpan
</span><a href="GHC.Types.SrcLoc.html#getBufSpan"><span class="hs-identifier hs-var">getBufSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681797847"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; HdkM ()
forall a. a -&gt; HdkM a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#pure/GHC.Base.html#pure"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1153"></span><span>
</span><span id="line-1154"></span><span class="hs-comment">-- Let the neighbours know about an item at this location.</span><span>
</span><span id="line-1155"></span><span class="hs-comment">-- A small wrapper over registerLocHdkA.</span><span>
</span><span id="line-1156"></span><span class="hs-comment">--</span><span>
</span><span id="line-1157"></span><span class="hs-comment">-- See Note [Adding Haddock comments to the syntax tree].</span><span>
</span><span id="line-1158"></span><span id="local-6989586621681796726"><span id="local-6989586621681796727"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#registerHdkA"><span class="hs-identifier hs-type">registerHdkA</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#GenLocated"><span class="hs-identifier hs-type">GenLocated</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnn%27"><span class="hs-identifier hs-type">SrcSpanAnn'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681796726"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681796727"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkA"><span class="hs-identifier hs-type">HdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1159"></span><span id="registerHdkA"><span class="annot"><span class="annottext">registerHdkA :: forall a e. GenLocated (SrcSpanAnn' a) e -&gt; HdkA ()
</span><a href="GHC.Parser.PostProcess.Haddock.html#registerHdkA"><span class="hs-identifier hs-var hs-var">registerHdkA</span></a></span></span><span> </span><span id="local-6989586621681797849"><span class="annot"><span class="annottext">GenLocated (SrcSpanAnn' a) e
</span><a href="#local-6989586621681797849"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; HdkA ()
</span><a href="GHC.Parser.PostProcess.Haddock.html#registerLocHdkA"><span class="hs-identifier hs-var">registerLocHdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated (SrcSpanAnn' a) e -&gt; SrcSpan
forall a e. GenLocated (SrcSpanAnn' a) e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated (SrcSpanAnn' a) e
</span><a href="#local-6989586621681797849"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1160"></span><span>
</span><span id="line-1161"></span><span class="hs-comment">-- Modify the action of a HdkA computation.</span><span>
</span><span id="line-1162"></span><span id="local-6989586621681796755"><span id="local-6989586621681796756"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#hoistHdkA"><span class="hs-identifier hs-type">hoistHdkA</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkM"><span class="hs-identifier hs-type">HdkM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681796755"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkM"><span class="hs-identifier hs-type">HdkM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681796756"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkA"><span class="hs-identifier hs-type">HdkA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681796755"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkA"><span class="hs-identifier hs-type">HdkA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681796756"><span class="hs-identifier hs-type">b</span></a></span></span></span><span>
</span><span id="line-1163"></span><span id="hoistHdkA"><span class="annot"><span class="annottext">hoistHdkA :: forall a b. (HdkM a -&gt; HdkM b) -&gt; HdkA a -&gt; HdkA b
</span><a href="GHC.Parser.PostProcess.Haddock.html#hoistHdkA"><span class="hs-identifier hs-var hs-var">hoistHdkA</span></a></span></span><span> </span><span id="local-6989586621681797850"><span class="annot"><span class="annottext">HdkM a -&gt; HdkM b
</span><a href="#local-6989586621681797850"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkA"><span class="hs-identifier hs-type">HdkA</span></a></span><span> </span><span id="local-6989586621681797851"><span class="annot"><span class="annottext">Maybe BufSpan
</span><a href="#local-6989586621681797851"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681797852"><span class="annot"><span class="annottext">HdkM a
</span><a href="#local-6989586621681797852"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe BufSpan -&gt; HdkM b -&gt; HdkA b
forall a. Maybe BufSpan -&gt; HdkM a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#HdkA"><span class="hs-identifier hs-var">HdkA</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe BufSpan
</span><a href="#local-6989586621681797851"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HdkM a -&gt; HdkM b
</span><a href="#local-6989586621681797850"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">HdkM a
</span><a href="#local-6989586621681797852"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1164"></span><span>
</span><span id="line-1165"></span><span class="hs-comment">-- Lift a HdkM computation to HdkA.</span><span>
</span><span id="line-1166"></span><span id="local-6989586621681796710"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#liftHdkA"><span class="hs-identifier hs-type">liftHdkA</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkM"><span class="hs-identifier hs-type">HdkM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681796710"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkA"><span class="hs-identifier hs-type">HdkA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681796710"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1167"></span><span id="liftHdkA"><span class="annot"><span class="annottext">liftHdkA :: forall a. HdkM a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#liftHdkA"><span class="hs-identifier hs-var hs-var">liftHdkA</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe BufSpan -&gt; HdkM a -&gt; HdkA a
forall a. Maybe BufSpan -&gt; HdkM a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#HdkA"><span class="hs-identifier hs-var">HdkA</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe BufSpan
forall a. Monoid a =&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mempty/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1168"></span><span>
</span><span id="line-1169"></span><span class="hs-comment">-- Extend the declared location span of a 'HdkA' computation:</span><span>
</span><span id="line-1170"></span><span class="hs-comment">--</span><span>
</span><span id="line-1171"></span><span class="hs-comment">--    left_neighbour &lt;*&gt; extendHdkA l x &lt;*&gt; right_neighbour</span><span>
</span><span id="line-1172"></span><span class="hs-comment">--</span><span>
</span><span id="line-1173"></span><span class="hs-comment">-- The declared location of 'x' now includes 'l', so that the surrounding</span><span>
</span><span id="line-1174"></span><span class="hs-comment">-- computations 'left_neighbour' and 'right_neighbour' will not look for</span><span>
</span><span id="line-1175"></span><span class="hs-comment">-- Haddock comments inside the 'l' location span.</span><span>
</span><span id="line-1176"></span><span id="local-6989586621681796707"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#extendHdkA"><span class="hs-identifier hs-type">extendHdkA</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkA"><span class="hs-identifier hs-type">HdkA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681796707"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkA"><span class="hs-identifier hs-type">HdkA</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681796707"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1177"></span><span id="extendHdkA"><span class="annot"><span class="annottext">extendHdkA :: forall a. SrcSpan -&gt; HdkA a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#extendHdkA"><span class="hs-identifier hs-var hs-var">extendHdkA</span></a></span></span><span> </span><span id="local-6989586621681797858"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681797858"><span class="hs-identifier hs-var">l'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkA"><span class="hs-identifier hs-type">HdkA</span></a></span><span> </span><span id="local-6989586621681797859"><span class="annot"><span class="annottext">Maybe BufSpan
</span><a href="#local-6989586621681797859"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681797860"><span class="annot"><span class="annottext">HdkM a
</span><a href="#local-6989586621681797860"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe BufSpan -&gt; HdkM a -&gt; HdkA a
forall a. Maybe BufSpan -&gt; HdkM a -&gt; HdkA a
</span><a href="GHC.Parser.PostProcess.Haddock.html#HdkA"><span class="hs-identifier hs-var">HdkA</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; Maybe BufSpan
</span><a href="GHC.Types.SrcLoc.html#getBufSpan"><span class="hs-identifier hs-var">getBufSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681797858"><span class="hs-identifier hs-var">l'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe BufSpan -&gt; Maybe BufSpan -&gt; Maybe BufSpan
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%3C%3E/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe BufSpan
</span><a href="#local-6989586621681797859"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HdkM a
</span><a href="#local-6989586621681797860"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-1178"></span><span>
</span><span id="line-1179"></span><span>
</span><span id="line-1180"></span><span class="annot"><span class="hs-comment">{- *********************************************************************
*                                                                      *
*              HdkM: a stateful computation to associate               *
*          accumulated documentation comments with AST nodes           *
*                                                                      *
********************************************************************* -}</span></span><span>
</span><span id="line-1186"></span><span>
</span><span id="line-1187"></span><span class="hs-comment">-- The state of 'HdkM' contains a list of pending Haddock comments. We go</span><span>
</span><span id="line-1188"></span><span class="hs-comment">-- over the AST, looking up these comments using 'takeHdkComments' and removing</span><span>
</span><span id="line-1189"></span><span class="hs-comment">-- them from the state. The remaining, un-removed ones are ignored with a</span><span>
</span><span id="line-1190"></span><span class="hs-comment">-- warning (-Winvalid-haddock). Also, using a state means we never use the same</span><span>
</span><span id="line-1191"></span><span class="hs-comment">-- Haddock twice.</span><span>
</span><span id="line-1192"></span><span class="hs-comment">--</span><span>
</span><span id="line-1193"></span><span class="hs-comment">-- See Note [Adding Haddock comments to the syntax tree].</span><span>
</span><span id="line-1194"></span><span class="hs-keyword">newtype</span><span> </span><span id="HdkM"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkM"><span class="hs-identifier hs-var">HdkM</span></a></span></span><span> </span><span id="local-6989586621681796976"><span class="annot"><a href="#local-6989586621681796976"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="HdkM"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkM"><span class="hs-identifier hs-var">HdkM</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="unHdkM"><span class="annot"><span class="annottext">forall a. HdkM a -&gt; LocRange -&gt; HdkSt -&gt; (a, HdkSt)
</span><a href="GHC.Parser.PostProcess.Haddock.html#unHdkM"><span class="hs-identifier hs-var hs-var">unHdkM</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#LocRange"><span class="hs-identifier hs-type">LocRange</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkSt"><span class="hs-identifier hs-type">HdkSt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681796976"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkSt"><span class="hs-identifier hs-type">HdkSt</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1195"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681797863"><span id="local-6989586621681797869"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; HdkM a -&gt; HdkM b)
-&gt; (forall a b. a -&gt; HdkM b -&gt; HdkM a) -&gt; Functor HdkM
forall a b. a -&gt; HdkM b -&gt; HdkM a
forall a b. (a -&gt; b) -&gt; HdkM a -&gt; HdkM b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall a b. (a -&gt; b) -&gt; HdkM a -&gt; HdkM b
fmap :: forall a b. (a -&gt; b) -&gt; HdkM a -&gt; HdkM b
$c&lt;$ :: forall a b. a -&gt; HdkM b -&gt; HdkM a
&lt;$ :: forall a b. a -&gt; HdkM b -&gt; HdkM a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#Functor/GHC.Base.html#Functor"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797880"><span id="local-6989586621681797886"><span id="local-6989586621681797891"><span id="local-6989586621681797896"><span id="local-6989586621681797901"><span class="annot"><span class="annottext">Functor HdkM
Functor HdkM =&gt;
(forall a. a -&gt; HdkM a)
-&gt; (forall a b. HdkM (a -&gt; b) -&gt; HdkM a -&gt; HdkM b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; HdkM a -&gt; HdkM b -&gt; HdkM c)
-&gt; (forall a b. HdkM a -&gt; HdkM b -&gt; HdkM b)
-&gt; (forall a b. HdkM a -&gt; HdkM b -&gt; HdkM a)
-&gt; Applicative HdkM
forall a. a -&gt; HdkM a
forall a b. HdkM a -&gt; HdkM b -&gt; HdkM a
forall a b. HdkM a -&gt; HdkM b -&gt; HdkM b
forall a b. HdkM (a -&gt; b) -&gt; HdkM a -&gt; HdkM b
forall a b c. (a -&gt; b -&gt; c) -&gt; HdkM a -&gt; HdkM b -&gt; HdkM c
forall (f :: * -&gt; *).
Functor f =&gt;
(forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
$cpure :: forall a. a -&gt; HdkM a
pure :: forall a. a -&gt; HdkM a
$c&lt;*&gt; :: forall a b. HdkM (a -&gt; b) -&gt; HdkM a -&gt; HdkM b
&lt;*&gt; :: forall a b. HdkM (a -&gt; b) -&gt; HdkM a -&gt; HdkM b
$cliftA2 :: forall a b c. (a -&gt; b -&gt; c) -&gt; HdkM a -&gt; HdkM b -&gt; HdkM c
liftA2 :: forall a b c. (a -&gt; b -&gt; c) -&gt; HdkM a -&gt; HdkM b -&gt; HdkM c
$c*&gt; :: forall a b. HdkM a -&gt; HdkM b -&gt; HdkM b
*&gt; :: forall a b. HdkM a -&gt; HdkM b -&gt; HdkM b
$c&lt;* :: forall a b. HdkM a -&gt; HdkM b -&gt; HdkM a
&lt;* :: forall a b. HdkM a -&gt; HdkM b -&gt; HdkM a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#Applicative/GHC.Base.html#Applicative"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></a></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797920"><span id="local-6989586621681797926"><span id="local-6989586621681797931"><span class="annot"><span class="annottext">Applicative HdkM
Applicative HdkM =&gt;
(forall a b. HdkM a -&gt; (a -&gt; HdkM b) -&gt; HdkM b)
-&gt; (forall a b. HdkM a -&gt; HdkM b -&gt; HdkM b)
-&gt; (forall a. a -&gt; HdkM a)
-&gt; Monad HdkM
forall a. a -&gt; HdkM a
forall a b. HdkM a -&gt; HdkM b -&gt; HdkM b
forall a b. HdkM a -&gt; (a -&gt; HdkM b) -&gt; HdkM b
forall (m :: * -&gt; *).
Applicative m =&gt;
(forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
$c&gt;&gt;= :: forall a b. HdkM a -&gt; (a -&gt; HdkM b) -&gt; HdkM b
&gt;&gt;= :: forall a b. HdkM a -&gt; (a -&gt; HdkM b) -&gt; HdkM b
$c&gt;&gt; :: forall a b. HdkM a -&gt; HdkM b -&gt; HdkM b
&gt;&gt; :: forall a b. HdkM a -&gt; HdkM b -&gt; HdkM b
$creturn :: forall a. a -&gt; HdkM a
return :: forall a. a -&gt; HdkM a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#Monad/GHC.Base.html#Monad"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></a></span></span></span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">via</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.Reader.html#ReaderT/Control.Monad.Trans.Reader.html#ReaderT"><span class="hs-identifier hs-type">ReaderT</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#LocRange"><span class="hs-identifier hs-type">LocRange</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../transformers-0.6.1.0/src/Control.Monad.Trans.State.Strict.html#State/Control.Monad.Trans.State.Strict.html#State"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkSt"><span class="hs-identifier hs-type">HdkSt</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1196"></span><span>
</span><span id="line-1197"></span><span class="annot"><span class="hs-comment">-- | The state of HdkM.</span></span><span>
</span><span id="line-1198"></span><span class="hs-keyword">data</span><span> </span><span id="HdkSt"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkSt"><span class="hs-identifier hs-var">HdkSt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1199"></span><span>  </span><span id="HdkSt"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkSt"><span class="hs-identifier hs-var">HdkSt</span></a></span></span><span>
</span><span id="line-1200"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="hdk_st_pending"><span class="annot"><span class="annottext">HdkSt -&gt; [PsLocated HdkComment]
</span><a href="GHC.Parser.PostProcess.Haddock.html#hdk_st_pending"><span class="hs-identifier hs-var hs-var">hdk_st_pending</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.SrcLoc.html#PsLocated"><span class="hs-identifier hs-type">PsLocated</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#HdkComment"><span class="hs-identifier hs-type">HdkComment</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1201"></span><span>        </span><span class="hs-comment">-- a list of pending (unassociated with an AST node)</span><span>
</span><span id="line-1202"></span><span>        </span><span class="hs-comment">-- Haddock comments, sorted by location: in ascending order of the starting 'BufPos'</span><span>
</span><span id="line-1203"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="hdk_st_warnings"><span class="annot"><span class="annottext">HdkSt -&gt; [HdkWarn]
</span><a href="GHC.Parser.PostProcess.Haddock.html#hdk_st_warnings"><span class="hs-identifier hs-var hs-var">hdk_st_warnings</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkWarn"><span class="hs-identifier hs-type">HdkWarn</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1204"></span><span>        </span><span class="hs-comment">-- accumulated warnings (order doesn't matter)</span><span>
</span><span id="line-1205"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1206"></span><span>
</span><span id="line-1207"></span><span class="annot"><span class="hs-comment">-- | Warnings accumulated in HdkM.</span></span><span>
</span><span id="line-1208"></span><span class="hs-keyword">data</span><span> </span><span id="HdkWarn"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkWarn"><span class="hs-identifier hs-var">HdkWarn</span></a></span></span><span>
</span><span id="line-1209"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="HdkWarnInvalidComment"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkWarnInvalidComment"><span class="hs-identifier hs-var">HdkWarnInvalidComment</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#PsLocated"><span class="hs-identifier hs-type">PsLocated</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#HdkComment"><span class="hs-identifier hs-type">HdkComment</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1210"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="HdkWarnExtraComment"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkWarnExtraComment"><span class="hs-identifier hs-var">HdkWarnExtraComment</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.DocString.html#HsDocString"><span class="hs-identifier hs-type">HsDocString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1211"></span><span>
</span><span id="line-1212"></span><span class="hs-comment">-- Restrict the range in which a HdkM computation will look up comments:</span><span>
</span><span id="line-1213"></span><span class="hs-comment">--</span><span>
</span><span id="line-1214"></span><span class="hs-comment">--   inLocRange r1 $</span><span>
</span><span id="line-1215"></span><span class="hs-comment">--   inLocRange r2 $</span><span>
</span><span id="line-1216"></span><span class="hs-comment">--     takeHdkComments ...  -- Only takes comments in the (r1 &lt;&gt; r2) location range.</span><span>
</span><span id="line-1217"></span><span class="hs-comment">--</span><span>
</span><span id="line-1218"></span><span class="hs-comment">-- Note that it does not blindly override the range but tightens it using (&lt;&gt;).</span><span>
</span><span id="line-1219"></span><span class="hs-comment">-- At many use sites, you will see something along the lines of:</span><span>
</span><span id="line-1220"></span><span class="hs-comment">--</span><span>
</span><span id="line-1221"></span><span class="hs-comment">--   inLocRange (locRangeTo end_pos) $ ...</span><span>
</span><span id="line-1222"></span><span class="hs-comment">--</span><span>
</span><span id="line-1223"></span><span class="hs-comment">-- And 'locRangeTo' defines a location range from the start of the file to</span><span>
</span><span id="line-1224"></span><span class="hs-comment">-- 'end_pos'. This does not mean that we now search for every comment from the</span><span>
</span><span id="line-1225"></span><span class="hs-comment">-- start of the file, as this restriction will be combined with other</span><span>
</span><span id="line-1226"></span><span class="hs-comment">-- restrictions. Somewhere up the callstack we might have:</span><span>
</span><span id="line-1227"></span><span class="hs-comment">--</span><span>
</span><span id="line-1228"></span><span class="hs-comment">--   inLocRange (locRangeFrom start_pos) $ ...</span><span>
</span><span id="line-1229"></span><span class="hs-comment">--</span><span>
</span><span id="line-1230"></span><span class="hs-comment">-- The net result is that the location range is delimited by 'start_pos' on</span><span>
</span><span id="line-1231"></span><span class="hs-comment">-- one side and by 'end_pos' on the other side.</span><span>
</span><span id="line-1232"></span><span class="hs-comment">--</span><span>
</span><span id="line-1233"></span><span class="hs-comment">-- In 'HdkA', every (&lt;*&gt;) may restrict the location range of its</span><span>
</span><span id="line-1234"></span><span class="hs-comment">-- subcomputations.</span><span>
</span><span id="line-1235"></span><span id="local-6989586621681796711"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#inLocRange"><span class="hs-identifier hs-type">inLocRange</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#LocRange"><span class="hs-identifier hs-type">LocRange</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkM"><span class="hs-identifier hs-type">HdkM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681796711"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkM"><span class="hs-identifier hs-type">HdkM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681796711"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1236"></span><span id="inLocRange"><span class="annot"><span class="annottext">inLocRange :: forall a. LocRange -&gt; HdkM a -&gt; HdkM a
</span><a href="GHC.Parser.PostProcess.Haddock.html#inLocRange"><span class="hs-identifier hs-var hs-var">inLocRange</span></a></span></span><span> </span><span id="local-6989586621681797942"><span class="annot"><span class="annottext">LocRange
</span><a href="#local-6989586621681797942"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkM"><span class="hs-identifier hs-type">HdkM</span></a></span><span> </span><span id="local-6989586621681797943"><span class="annot"><span class="annottext">LocRange -&gt; HdkSt -&gt; (a, HdkSt)
</span><a href="#local-6989586621681797943"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LocRange -&gt; HdkSt -&gt; (a, HdkSt)) -&gt; HdkM a
forall a. (LocRange -&gt; HdkSt -&gt; (a, HdkSt)) -&gt; HdkM a
</span><a href="GHC.Parser.PostProcess.Haddock.html#HdkM"><span class="hs-identifier hs-var">HdkM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681797944"><span class="annot"><span class="annottext">LocRange
</span><a href="#local-6989586621681797944"><span class="hs-identifier hs-var">r'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LocRange -&gt; HdkSt -&gt; (a, HdkSt)
</span><a href="#local-6989586621681797943"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LocRange
</span><a href="#local-6989586621681797942"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">LocRange -&gt; LocRange -&gt; LocRange
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%3C%3E/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">LocRange
</span><a href="#local-6989586621681797944"><span class="hs-identifier hs-var">r'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1237"></span><span>
</span><span id="line-1238"></span><span class="hs-comment">-- Take the Haddock comments that satisfy the matching function,</span><span>
</span><span id="line-1239"></span><span class="hs-comment">-- leaving the rest pending.</span><span>
</span><span id="line-1240"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#takeHdkComments"><span class="hs-identifier hs-type">takeHdkComments</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621681796715"><span class="annot"><a href="#local-6989586621681796715"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#PsLocated"><span class="hs-identifier hs-type">PsLocated</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#HdkComment"><span class="hs-identifier hs-type">HdkComment</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681796715"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkM"><span class="hs-identifier hs-type">HdkM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621681796715"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1241"></span><span id="takeHdkComments"><span class="annot"><span class="annottext">takeHdkComments :: forall a. (PsLocated HdkComment -&gt; Maybe a) -&gt; HdkM [a]
</span><a href="GHC.Parser.PostProcess.Haddock.html#takeHdkComments"><span class="hs-identifier hs-var hs-var">takeHdkComments</span></a></span></span><span> </span><span id="local-6989586621681797948"><span class="annot"><span class="annottext">PsLocated HdkComment -&gt; Maybe a
</span><a href="#local-6989586621681797948"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1242"></span><span>  </span><span class="annot"><span class="annottext">(LocRange -&gt; HdkSt -&gt; ([a], HdkSt)) -&gt; HdkM [a]
forall a. (LocRange -&gt; HdkSt -&gt; (a, HdkSt)) -&gt; HdkM a
</span><a href="GHC.Parser.PostProcess.Haddock.html#HdkM"><span class="hs-identifier hs-var">HdkM</span></a></span><span> </span><span class="annot"><span class="annottext">((LocRange -&gt; HdkSt -&gt; ([a], HdkSt)) -&gt; HdkM [a])
-&gt; (LocRange -&gt; HdkSt -&gt; ([a], HdkSt)) -&gt; HdkM [a]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1243"></span><span>    </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#LocRange"><span class="hs-identifier hs-type">LocRange</span></a></span><span> </span><span id="local-6989586621681797950"><span class="annot"><span class="annottext">LowerLocBound
</span><a href="#local-6989586621681797950"><span class="hs-identifier hs-var">hdk_from</span></a></span></span><span> </span><span id="local-6989586621681797951"><span class="annot"><span class="annottext">UpperLocBound
</span><a href="#local-6989586621681797951"><span class="hs-identifier hs-var">hdk_to</span></a></span></span><span> </span><span id="local-6989586621681797952"><span class="annot"><span class="annottext">ColumnBound
</span><a href="#local-6989586621681797952"><span class="hs-identifier hs-var">hdk_col</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1244"></span><span>    </span><span class="hs-glyph">\</span><span id="local-6989586621681797953"><span class="annot"><span class="annottext">HdkSt
</span><a href="#local-6989586621681797953"><span class="hs-identifier hs-var">hdk_st</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1245"></span><span>      </span><span class="hs-keyword">let</span><span>
</span><span id="line-1246"></span><span>        </span><span id="local-6989586621681797954"><span class="annot"><span class="annottext">comments :: [PsLocated HdkComment]
</span><a href="#local-6989586621681797954"><span class="hs-identifier hs-var hs-var">comments</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HdkSt -&gt; [PsLocated HdkComment]
</span><a href="GHC.Parser.PostProcess.Haddock.html#hdk_st_pending"><span class="hs-identifier hs-var">hdk_st_pending</span></a></span><span> </span><span class="annot"><span class="annottext">HdkSt
</span><a href="#local-6989586621681797953"><span class="hs-identifier hs-var">hdk_st</span></a></span><span>
</span><span id="line-1247"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681797955"><span class="annot"><span class="annottext">[PsLocated HdkComment]
</span><a href="#local-6989586621681797955"><span class="hs-identifier hs-var">comments_before_range</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797956"><span class="annot"><span class="annottext">[PsLocated HdkComment]
</span><a href="#local-6989586621681797956"><span class="hs-identifier hs-var">comments'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PsLocated HdkComment -&gt; Bool)
-&gt; [PsLocated HdkComment]
-&gt; ([PsLocated HdkComment], [PsLocated HdkComment])
forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><a href="../../base-4.18.3.0/src/GHC.List.html#break/GHC.List.html#break"><span class="hs-identifier hs-var">break</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LowerLocBound -&gt; PsLocated HdkComment -&gt; Bool
forall {e}. LowerLocBound -&gt; GenLocated PsSpan e -&gt; Bool
</span><a href="#local-6989586621681797958"><span class="hs-identifier hs-var">is_after</span></a></span><span> </span><span class="annot"><span class="annottext">LowerLocBound
</span><a href="#local-6989586621681797950"><span class="hs-identifier hs-var">hdk_from</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[PsLocated HdkComment]
</span><a href="#local-6989586621681797954"><span class="hs-identifier hs-var">comments</span></a></span><span>
</span><span id="line-1248"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681797959"><span class="annot"><span class="annottext">[PsLocated HdkComment]
</span><a href="#local-6989586621681797959"><span class="hs-identifier hs-var">comments_in_range</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797960"><span class="annot"><span class="annottext">[PsLocated HdkComment]
</span><a href="#local-6989586621681797960"><span class="hs-identifier hs-var">comments_after_range</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PsLocated HdkComment -&gt; Bool)
-&gt; [PsLocated HdkComment]
-&gt; ([PsLocated HdkComment], [PsLocated HdkComment])
forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><a href="../../base-4.18.3.0/src/GHC.List.html#span/GHC.List.html#span"><span class="hs-identifier hs-var">span</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UpperLocBound -&gt; PsLocated HdkComment -&gt; Bool
forall {e}. UpperLocBound -&gt; GenLocated PsSpan e -&gt; Bool
</span><a href="#local-6989586621681797962"><span class="hs-identifier hs-var">is_before</span></a></span><span> </span><span class="annot"><span class="annottext">UpperLocBound
</span><a href="#local-6989586621681797951"><span class="hs-identifier hs-var">hdk_to</span></a></span><span> </span><span class="annot"><span class="annottext">(PsLocated HdkComment -&gt; Bool)
-&gt; (PsLocated HdkComment -&gt; Bool) -&gt; PsLocated HdkComment -&gt; Bool
forall (f :: * -&gt; *). Applicative f =&gt; f Bool -&gt; f Bool -&gt; f Bool
</span><a href="GHC.Utils.Misc.html#%3C%26%26%3E"><span class="hs-operator hs-var">&lt;&amp;&amp;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnBound -&gt; PsLocated HdkComment -&gt; Bool
forall {e}. ColumnBound -&gt; GenLocated PsSpan e -&gt; Bool
</span><a href="#local-6989586621681797963"><span class="hs-identifier hs-var">is_indented</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnBound
</span><a href="#local-6989586621681797952"><span class="hs-identifier hs-var">hdk_col</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[PsLocated HdkComment]
</span><a href="#local-6989586621681797956"><span class="hs-identifier hs-var">comments'</span></a></span><span>
</span><span id="line-1249"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681797964"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681797964"><span class="hs-identifier hs-var">items</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797965"><span class="annot"><span class="annottext">[PsLocated HdkComment]
</span><a href="#local-6989586621681797965"><span class="hs-identifier hs-var">other_comments</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PsLocated HdkComment
 -&gt; ([a], [PsLocated HdkComment]) -&gt; ([a], [PsLocated HdkComment]))
-&gt; ([a], [PsLocated HdkComment])
-&gt; [PsLocated HdkComment]
-&gt; ([a], [PsLocated HdkComment])
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#foldr/Data.Foldable.html#foldr"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="annot"><span class="annottext">PsLocated HdkComment
-&gt; ([a], [PsLocated HdkComment]) -&gt; ([a], [PsLocated HdkComment])
</span><a href="#local-6989586621681797967"><span class="hs-identifier hs-var">add_comment</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[PsLocated HdkComment]
</span><a href="#local-6989586621681797959"><span class="hs-identifier hs-var">comments_in_range</span></a></span><span>
</span><span id="line-1250"></span><span>        </span><span id="local-6989586621681797968"><span class="annot"><span class="annottext">remaining_comments :: [PsLocated HdkComment]
</span><a href="#local-6989586621681797968"><span class="hs-identifier hs-var hs-var">remaining_comments</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[PsLocated HdkComment]
</span><a href="#local-6989586621681797955"><span class="hs-identifier hs-var">comments_before_range</span></a></span><span> </span><span class="annot"><span class="annottext">[PsLocated HdkComment]
-&gt; [PsLocated HdkComment] -&gt; [PsLocated HdkComment]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[PsLocated HdkComment]
</span><a href="#local-6989586621681797965"><span class="hs-identifier hs-var">other_comments</span></a></span><span> </span><span class="annot"><span class="annottext">[PsLocated HdkComment]
-&gt; [PsLocated HdkComment] -&gt; [PsLocated HdkComment]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[PsLocated HdkComment]
</span><a href="#local-6989586621681797960"><span class="hs-identifier hs-var">comments_after_range</span></a></span><span>
</span><span id="line-1251"></span><span>        </span><span id="local-6989586621681797969"><span class="annot"><span class="annottext">hdk_st' :: HdkSt
</span><a href="#local-6989586621681797969"><span class="hs-identifier hs-var hs-var">hdk_st'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HdkSt
</span><a href="#local-6989586621681797953"><span class="hs-identifier hs-var">hdk_st</span></a></span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#hdk_st_pending"><span class="hs-identifier hs-var">hdk_st_pending</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621681797968"><span class="hs-identifier hs-type">remaining_comments</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1252"></span><span>      </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681797964"><span class="hs-identifier hs-var">items</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HdkSt
</span><a href="#local-6989586621681797969"><span class="hs-identifier hs-var">hdk_st'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1253"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1254"></span><span>    </span><span id="local-6989586621681797958"><span class="annot"><span class="annottext">is_after :: LowerLocBound -&gt; GenLocated PsSpan e -&gt; Bool
</span><a href="#local-6989586621681797958"><span class="hs-identifier hs-var hs-var">is_after</span></a></span></span><span>    </span><span class="annot"><span class="annottext">LowerLocBound
</span><a href="GHC.Parser.PostProcess.Haddock.html#StartOfFile"><span class="hs-identifier hs-var">StartOfFile</span></a></span><span>    </span><span class="annot"><span class="annottext">GenLocated PsSpan e
</span><span class="hs-identifier">_</span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1255"></span><span>    </span><span class="annot"><a href="#local-6989586621681797958"><span class="hs-identifier hs-var">is_after</span></a></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#StartLoc"><span class="hs-identifier hs-type">StartLoc</span></a></span><span> </span><span id="local-6989586621681797974"><span class="annot"><span class="annottext">BufPos
</span><a href="#local-6989586621681797974"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681797975"><span class="annot"><span class="annottext">PsSpan
</span><a href="#local-6989586621681797975"><span class="hs-identifier hs-var">l_comment</span></a></span></span><span> </span><span class="annot"><span class="annottext">e
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BufSpan -&gt; BufPos
</span><a href="GHC.Types.SrcLoc.html#bufSpanStart"><span class="hs-identifier hs-var">bufSpanStart</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PsSpan -&gt; BufSpan
</span><a href="GHC.Types.SrcLoc.html#psBufSpan"><span class="hs-identifier hs-var">psBufSpan</span></a></span><span> </span><span class="annot"><span class="annottext">PsSpan
</span><a href="#local-6989586621681797975"><span class="hs-identifier hs-var">l_comment</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BufPos -&gt; BufPos -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">BufPos
</span><a href="#local-6989586621681797974"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1256"></span><span>    </span><span id="local-6989586621681797962"><span class="annot"><span class="annottext">is_before :: UpperLocBound -&gt; GenLocated PsSpan e -&gt; Bool
</span><a href="#local-6989586621681797962"><span class="hs-identifier hs-var hs-var">is_before</span></a></span></span><span>   </span><span class="annot"><span class="annottext">UpperLocBound
</span><a href="GHC.Parser.PostProcess.Haddock.html#EndOfFile"><span class="hs-identifier hs-var">EndOfFile</span></a></span><span>      </span><span class="annot"><span class="annottext">GenLocated PsSpan e
</span><span class="hs-identifier">_</span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1257"></span><span>    </span><span class="annot"><a href="#local-6989586621681797962"><span class="hs-identifier hs-var">is_before</span></a></span><span>   </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#EndLoc"><span class="hs-identifier hs-type">EndLoc</span></a></span><span> </span><span id="local-6989586621681797980"><span class="annot"><span class="annottext">BufPos
</span><a href="#local-6989586621681797980"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681797981"><span class="annot"><span class="annottext">PsSpan
</span><a href="#local-6989586621681797981"><span class="hs-identifier hs-var">l_comment</span></a></span></span><span> </span><span class="annot"><span class="annottext">e
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BufSpan -&gt; BufPos
</span><a href="GHC.Types.SrcLoc.html#bufSpanStart"><span class="hs-identifier hs-var">bufSpanStart</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PsSpan -&gt; BufSpan
</span><a href="GHC.Types.SrcLoc.html#psBufSpan"><span class="hs-identifier hs-var">psBufSpan</span></a></span><span> </span><span class="annot"><span class="annottext">PsSpan
</span><a href="#local-6989586621681797981"><span class="hs-identifier hs-var">l_comment</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BufPos -&gt; BufPos -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">BufPos
</span><a href="#local-6989586621681797980"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1258"></span><span>    </span><span id="local-6989586621681797963"><span class="annot"><span class="annottext">is_indented :: ColumnBound -&gt; GenLocated PsSpan e -&gt; Bool
</span><a href="#local-6989586621681797963"><span class="hs-identifier hs-var hs-var">is_indented</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#ColumnFrom"><span class="hs-identifier hs-type">ColumnFrom</span></a></span><span> </span><span id="local-6989586621681797985"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681797985"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681797986"><span class="annot"><span class="annottext">PsSpan
</span><a href="#local-6989586621681797986"><span class="hs-identifier hs-var">l_comment</span></a></span></span><span> </span><span class="annot"><span class="annottext">e
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RealSrcSpan -&gt; Int
</span><a href="GHC.Types.SrcLoc.html#srcSpanStartCol"><span class="hs-identifier hs-var">srcSpanStartCol</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PsSpan -&gt; RealSrcSpan
</span><a href="GHC.Types.SrcLoc.html#psRealSpan"><span class="hs-identifier hs-var">psRealSpan</span></a></span><span> </span><span class="annot"><span class="annottext">PsSpan
</span><a href="#local-6989586621681797986"><span class="hs-identifier hs-var">l_comment</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681797985"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1259"></span><span>
</span><span id="line-1260"></span><span>    </span><span class="annot"><a href="#local-6989586621681797967"><span class="hs-identifier hs-type">add_comment</span></a></span><span>
</span><span id="line-1261"></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#PsLocated"><span class="hs-identifier hs-type">PsLocated</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#HdkComment"><span class="hs-identifier hs-type">HdkComment</span></a></span><span>
</span><span id="line-1262"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621681796715"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.SrcLoc.html#PsLocated"><span class="hs-identifier hs-type">PsLocated</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#HdkComment"><span class="hs-identifier hs-type">HdkComment</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1263"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621681796715"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.SrcLoc.html#PsLocated"><span class="hs-identifier hs-type">PsLocated</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#HdkComment"><span class="hs-identifier hs-type">HdkComment</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1264"></span><span>    </span><span id="local-6989586621681797967"><span class="annot"><span class="annottext">add_comment :: PsLocated HdkComment
-&gt; ([a], [PsLocated HdkComment]) -&gt; ([a], [PsLocated HdkComment])
</span><a href="#local-6989586621681797967"><span class="hs-identifier hs-var hs-var">add_comment</span></a></span></span><span> </span><span id="local-6989586621681797989"><span class="annot"><span class="annottext">PsLocated HdkComment
</span><a href="#local-6989586621681797989"><span class="hs-identifier hs-var">hdk_comment</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681797990"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681797990"><span class="hs-identifier hs-var">items</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797991"><span class="annot"><span class="annottext">[PsLocated HdkComment]
</span><a href="#local-6989586621681797991"><span class="hs-identifier hs-var">other_hdk_comments</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1265"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">PsLocated HdkComment -&gt; Maybe a
</span><a href="#local-6989586621681797948"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">PsLocated HdkComment
</span><a href="#local-6989586621681797989"><span class="hs-identifier hs-var">hdk_comment</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1266"></span><span>        </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681797992"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681797992"><span class="hs-identifier hs-var">item</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681797992"><span class="hs-identifier hs-var">item</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; [a] -&gt; [a]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681797990"><span class="hs-identifier hs-var">items</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[PsLocated HdkComment]
</span><a href="#local-6989586621681797991"><span class="hs-identifier hs-var">other_hdk_comments</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1267"></span><span>        </span><span class="annot"><span class="annottext">Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681797990"><span class="hs-identifier hs-var">items</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PsLocated HdkComment
</span><a href="#local-6989586621681797989"><span class="hs-identifier hs-var">hdk_comment</span></a></span><span> </span><span class="annot"><span class="annottext">PsLocated HdkComment
-&gt; [PsLocated HdkComment] -&gt; [PsLocated HdkComment]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[PsLocated HdkComment]
</span><a href="#local-6989586621681797991"><span class="hs-identifier hs-var">other_hdk_comments</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1268"></span><span>
</span><span id="line-1269"></span><span class="hs-comment">-- Get the docnext or docprev comment for an AST node at the given source span.</span><span>
</span><span id="line-1270"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#getPrevNextDoc"><span class="hs-identifier hs-type">getPrevNextDoc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkM"><span class="hs-identifier hs-type">HdkM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.DocString.html#HsDocString"><span class="hs-identifier hs-type">HsDocString</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1271"></span><span id="getPrevNextDoc"><span class="annot"><span class="annottext">getPrevNextDoc :: SrcSpan -&gt; HdkM (Maybe (GenLocated SrcSpan HsDocString))
</span><a href="GHC.Parser.PostProcess.Haddock.html#getPrevNextDoc"><span class="hs-identifier hs-var hs-var">getPrevNextDoc</span></a></span></span><span> </span><span id="local-6989586621681797993"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681797993"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1272"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681797994"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621681797994"><span class="hs-identifier hs-var">l_start</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681797995"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621681797995"><span class="hs-identifier hs-var">l_end</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcLoc
</span><a href="GHC.Types.SrcLoc.html#srcSpanStart"><span class="hs-identifier hs-var">srcSpanStart</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681797993"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcLoc
</span><a href="GHC.Types.SrcLoc.html#srcSpanEnd"><span class="hs-identifier hs-var">srcSpanEnd</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681797993"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1273"></span><span>      </span><span id="local-6989586621681797996"><span class="annot"><span class="annottext">before_t :: LocRange
</span><a href="#local-6989586621681797996"><span class="hs-identifier hs-var hs-var">before_t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe BufPos -&gt; LocRange
</span><a href="GHC.Parser.PostProcess.Haddock.html#locRangeTo"><span class="hs-identifier hs-var">locRangeTo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcLoc -&gt; Maybe BufPos
</span><a href="GHC.Types.SrcLoc.html#getBufPos"><span class="hs-identifier hs-var">getBufPos</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621681797994"><span class="hs-identifier hs-var">l_start</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1274"></span><span>      </span><span id="local-6989586621681797997"><span class="annot"><span class="annottext">after_t :: LocRange
</span><a href="#local-6989586621681797997"><span class="hs-identifier hs-var hs-var">after_t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe BufPos -&gt; LocRange
</span><a href="GHC.Parser.PostProcess.Haddock.html#locRangeFrom"><span class="hs-identifier hs-var">locRangeFrom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcLoc -&gt; Maybe BufPos
</span><a href="GHC.Types.SrcLoc.html#getBufPos"><span class="hs-identifier hs-var">getBufPos</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621681797995"><span class="hs-identifier hs-var">l_end</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1275"></span><span>  </span><span id="local-6989586621681797998"><span class="annot"><span class="annottext">[GenLocated SrcSpan HsDocString]
</span><a href="#local-6989586621681797998"><span class="hs-identifier hs-var">nextDocs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LocRange
-&gt; HdkM [GenLocated SrcSpan HsDocString]
-&gt; HdkM [GenLocated SrcSpan HsDocString]
forall a. LocRange -&gt; HdkM a -&gt; HdkM a
</span><a href="GHC.Parser.PostProcess.Haddock.html#inLocRange"><span class="hs-identifier hs-var">inLocRange</span></a></span><span> </span><span class="annot"><span class="annottext">LocRange
</span><a href="#local-6989586621681797996"><span class="hs-identifier hs-var">before_t</span></a></span><span> </span><span class="annot"><span class="annottext">(HdkM [GenLocated SrcSpan HsDocString]
 -&gt; HdkM [GenLocated SrcSpan HsDocString])
-&gt; HdkM [GenLocated SrcSpan HsDocString]
-&gt; HdkM [GenLocated SrcSpan HsDocString]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(PsLocated HdkComment -&gt; Maybe (GenLocated SrcSpan HsDocString))
-&gt; HdkM [GenLocated SrcSpan HsDocString]
forall a. (PsLocated HdkComment -&gt; Maybe a) -&gt; HdkM [a]
</span><a href="GHC.Parser.PostProcess.Haddock.html#takeHdkComments"><span class="hs-identifier hs-var">takeHdkComments</span></a></span><span> </span><span class="annot"><span class="annottext">PsLocated HdkComment -&gt; Maybe (GenLocated SrcSpan HsDocString)
</span><a href="GHC.Parser.PostProcess.Haddock.html#mkDocNext"><span class="hs-identifier hs-var">mkDocNext</span></a></span><span>
</span><span id="line-1276"></span><span>  </span><span id="local-6989586621681797999"><span class="annot"><span class="annottext">[GenLocated SrcSpan HsDocString]
</span><a href="#local-6989586621681797999"><span class="hs-identifier hs-var">prevDocs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">LocRange
-&gt; HdkM [GenLocated SrcSpan HsDocString]
-&gt; HdkM [GenLocated SrcSpan HsDocString]
forall a. LocRange -&gt; HdkM a -&gt; HdkM a
</span><a href="GHC.Parser.PostProcess.Haddock.html#inLocRange"><span class="hs-identifier hs-var">inLocRange</span></a></span><span> </span><span class="annot"><span class="annottext">LocRange
</span><a href="#local-6989586621681797997"><span class="hs-identifier hs-var">after_t</span></a></span><span> </span><span class="annot"><span class="annottext">(HdkM [GenLocated SrcSpan HsDocString]
 -&gt; HdkM [GenLocated SrcSpan HsDocString])
-&gt; HdkM [GenLocated SrcSpan HsDocString]
-&gt; HdkM [GenLocated SrcSpan HsDocString]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(PsLocated HdkComment -&gt; Maybe (GenLocated SrcSpan HsDocString))
-&gt; HdkM [GenLocated SrcSpan HsDocString]
forall a. (PsLocated HdkComment -&gt; Maybe a) -&gt; HdkM [a]
</span><a href="GHC.Parser.PostProcess.Haddock.html#takeHdkComments"><span class="hs-identifier hs-var">takeHdkComments</span></a></span><span> </span><span class="annot"><span class="annottext">PsLocated HdkComment -&gt; Maybe (GenLocated SrcSpan HsDocString)
</span><a href="GHC.Parser.PostProcess.Haddock.html#mkDocPrev"><span class="hs-identifier hs-var">mkDocPrev</span></a></span><span>
</span><span id="line-1277"></span><span>  </span><span class="annot"><span class="annottext">[GenLocated SrcSpan HsDocString]
-&gt; HdkM (Maybe (GenLocated SrcSpan HsDocString))
</span><a href="GHC.Parser.PostProcess.Haddock.html#selectDocString"><span class="hs-identifier hs-var">selectDocString</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[GenLocated SrcSpan HsDocString]
</span><a href="#local-6989586621681797998"><span class="hs-identifier hs-var">nextDocs</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan HsDocString]
-&gt; [GenLocated SrcSpan HsDocString]
-&gt; [GenLocated SrcSpan HsDocString]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%2B%2B/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan HsDocString]
</span><a href="#local-6989586621681797999"><span class="hs-identifier hs-var">prevDocs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1278"></span><span>
</span><span id="line-1279"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#appendHdkWarning"><span class="hs-identifier hs-type">appendHdkWarning</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkWarn"><span class="hs-identifier hs-type">HdkWarn</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkM"><span class="hs-identifier hs-type">HdkM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1280"></span><span id="appendHdkWarning"><span class="annot"><span class="annottext">appendHdkWarning :: HdkWarn -&gt; HdkM ()
</span><a href="GHC.Parser.PostProcess.Haddock.html#appendHdkWarning"><span class="hs-identifier hs-var hs-var">appendHdkWarning</span></a></span></span><span> </span><span id="local-6989586621681798001"><span class="annot"><span class="annottext">HdkWarn
</span><a href="#local-6989586621681798001"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(LocRange -&gt; HdkSt -&gt; ((), HdkSt)) -&gt; HdkM ()
forall a. (LocRange -&gt; HdkSt -&gt; (a, HdkSt)) -&gt; HdkM a
</span><a href="GHC.Parser.PostProcess.Haddock.html#HdkM"><span class="hs-identifier hs-var">HdkM</span></a></span><span> </span><span class="annot"><span class="annottext">((LocRange -&gt; HdkSt -&gt; ((), HdkSt)) -&gt; HdkM ())
-&gt; (LocRange -&gt; HdkSt -&gt; ((), HdkSt)) -&gt; HdkM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">LocRange
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681798002"><span class="annot"><span class="annottext">HdkSt
</span><a href="#local-6989586621681798002"><span class="hs-identifier hs-var">hdk_st</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1281"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681798003"><span class="annot"><span class="annottext">hdk_st' :: HdkSt
</span><a href="#local-6989586621681798003"><span class="hs-identifier hs-var hs-var">hdk_st'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HdkSt
</span><a href="#local-6989586621681798002"><span class="hs-identifier hs-var">hdk_st</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#hdk_st_warnings"><span class="hs-identifier hs-var">hdk_st_warnings</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621681798001"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#hdk_st_warnings"><span class="hs-identifier hs-var">hdk_st_warnings</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681798002"><span class="hs-identifier hs-type">hdk_st</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1282"></span><span>  </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HdkSt
</span><a href="#local-6989586621681798003"><span class="hs-identifier hs-var">hdk_st'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1283"></span><span>
</span><span id="line-1284"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#selectDocString"><span class="hs-identifier hs-type">selectDocString</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.DocString.html#HsDocString"><span class="hs-identifier hs-type">HsDocString</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkM"><span class="hs-identifier hs-type">HdkM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.DocString.html#HsDocString"><span class="hs-identifier hs-type">HsDocString</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1285"></span><span id="selectDocString"><span class="annot"><span class="annottext">selectDocString :: [GenLocated SrcSpan HsDocString]
-&gt; HdkM (Maybe (GenLocated SrcSpan HsDocString))
</span><a href="GHC.Parser.PostProcess.Haddock.html#selectDocString"><span class="hs-identifier hs-var hs-var">selectDocString</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan HsDocString]
-&gt; HdkM (Maybe (GenLocated SrcSpan HsDocString))
</span><a href="#local-6989586621681798004"><span class="hs-identifier hs-var">select</span></a></span><span> </span><span class="annot"><span class="annottext">([GenLocated SrcSpan HsDocString]
 -&gt; HdkM (Maybe (GenLocated SrcSpan HsDocString)))
-&gt; ([GenLocated SrcSpan HsDocString]
    -&gt; [GenLocated SrcSpan HsDocString])
-&gt; [GenLocated SrcSpan HsDocString]
-&gt; HdkM (Maybe (GenLocated SrcSpan HsDocString))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpan HsDocString -&gt; Bool)
-&gt; [GenLocated SrcSpan HsDocString]
-&gt; [GenLocated SrcSpan HsDocString]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="GHC.Utils.Misc.html#filterOut"><span class="hs-identifier hs-var">filterOut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsDocString -&gt; Bool
</span><a href="GHC.Hs.DocString.html#isEmptyDocString"><span class="hs-identifier hs-var">isEmptyDocString</span></a></span><span> </span><span class="annot"><span class="annottext">(HsDocString -&gt; Bool)
-&gt; (GenLocated SrcSpan HsDocString -&gt; HsDocString)
-&gt; GenLocated SrcSpan HsDocString
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan HsDocString -&gt; HsDocString
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1286"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1287"></span><span>    </span><span id="local-6989586621681798004"><span class="annot"><span class="annottext">select :: [GenLocated SrcSpan HsDocString]
-&gt; HdkM (Maybe (GenLocated SrcSpan HsDocString))
</span><a href="#local-6989586621681798004"><span class="hs-identifier hs-var hs-var">select</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan HsDocString)
-&gt; HdkM (Maybe (GenLocated SrcSpan HsDocString))
forall a. a -&gt; HdkM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan HsDocString)
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1288"></span><span>    </span><span class="annot"><a href="#local-6989586621681798004"><span class="hs-identifier hs-var">select</span></a></span><span> </span><span class="hs-special">[</span><span id="local-6989586621681798010"><span class="annot"><span class="annottext">GenLocated SrcSpan HsDocString
</span><a href="#local-6989586621681798010"><span class="hs-identifier hs-var">doc</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan HsDocString)
-&gt; HdkM (Maybe (GenLocated SrcSpan HsDocString))
forall a. a -&gt; HdkM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpan HsDocString
-&gt; Maybe (GenLocated SrcSpan HsDocString)
forall a. a -&gt; Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan HsDocString
</span><a href="#local-6989586621681798010"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1289"></span><span>    </span><span class="annot"><a href="#local-6989586621681798004"><span class="hs-identifier hs-var">select</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681798011"><span class="annot"><span class="annottext">GenLocated SrcSpan HsDocString
</span><a href="#local-6989586621681798011"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681798012"><span class="annot"><span class="annottext">[GenLocated SrcSpan HsDocString]
</span><a href="#local-6989586621681798012"><span class="hs-identifier hs-var">extra_docs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1290"></span><span>      </span><span class="annot"><span class="annottext">[GenLocated SrcSpan HsDocString] -&gt; HdkM ()
</span><a href="GHC.Parser.PostProcess.Haddock.html#reportExtraDocs"><span class="hs-identifier hs-var">reportExtraDocs</span></a></span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan HsDocString]
</span><a href="#local-6989586621681798012"><span class="hs-identifier hs-var">extra_docs</span></a></span><span>
</span><span id="line-1291"></span><span>      </span><span class="hs-identifier">return</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpan HsDocString
-&gt; Maybe (GenLocated SrcSpan HsDocString)
forall a. a -&gt; Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan HsDocString
</span><a href="#local-6989586621681798011"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1292"></span><span>
</span><span id="line-1293"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#selectDoc"><span class="hs-identifier hs-type">selectDoc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621681796937"><span class="annot"><a href="#local-6989586621681796937"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Hs.Doc.html#LHsDoc"><span class="hs-identifier hs-type">LHsDoc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681796937"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkM"><span class="hs-identifier hs-type">HdkM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Hs.Doc.html#LHsDoc"><span class="hs-identifier hs-type">LHsDoc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681796937"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1294"></span><span id="selectDoc"><span class="annot"><span class="annottext">selectDoc :: forall a. [LHsDoc a] -&gt; HdkM (Maybe (LHsDoc a))
</span><a href="GHC.Parser.PostProcess.Haddock.html#selectDoc"><span class="hs-identifier hs-var hs-var">selectDoc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan (WithHsDocIdentifiers HsDocString a)]
-&gt; HdkM
     (Maybe (GenLocated SrcSpan (WithHsDocIdentifiers HsDocString a)))
forall a. [LHsDoc a] -&gt; HdkM (Maybe (LHsDoc a))
</span><a href="#local-6989586621681798013"><span class="hs-identifier hs-var">select</span></a></span><span> </span><span class="annot"><span class="annottext">([GenLocated SrcSpan (WithHsDocIdentifiers HsDocString a)]
 -&gt; HdkM
      (Maybe (GenLocated SrcSpan (WithHsDocIdentifiers HsDocString a))))
-&gt; ([GenLocated SrcSpan (WithHsDocIdentifiers HsDocString a)]
    -&gt; [GenLocated SrcSpan (WithHsDocIdentifiers HsDocString a)])
-&gt; [GenLocated SrcSpan (WithHsDocIdentifiers HsDocString a)]
-&gt; HdkM
     (Maybe (GenLocated SrcSpan (WithHsDocIdentifiers HsDocString a)))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpan (WithHsDocIdentifiers HsDocString a) -&gt; Bool)
-&gt; [GenLocated SrcSpan (WithHsDocIdentifiers HsDocString a)]
-&gt; [GenLocated SrcSpan (WithHsDocIdentifiers HsDocString a)]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><a href="GHC.Utils.Misc.html#filterOut"><span class="hs-identifier hs-var">filterOut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HsDocString -&gt; Bool
</span><a href="GHC.Hs.DocString.html#isEmptyDocString"><span class="hs-identifier hs-var">isEmptyDocString</span></a></span><span> </span><span class="annot"><span class="annottext">(HsDocString -&gt; Bool)
-&gt; (GenLocated SrcSpan (WithHsDocIdentifiers HsDocString a)
    -&gt; HsDocString)
-&gt; GenLocated SrcSpan (WithHsDocIdentifiers HsDocString a)
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">WithHsDocIdentifiers HsDocString a -&gt; HsDocString
forall a pass. WithHsDocIdentifiers a pass -&gt; a
</span><a href="GHC.Hs.Doc.html#hsDocString"><span class="hs-identifier hs-var">hsDocString</span></a></span><span> </span><span class="annot"><span class="annottext">(WithHsDocIdentifiers HsDocString a -&gt; HsDocString)
-&gt; (GenLocated SrcSpan (WithHsDocIdentifiers HsDocString a)
    -&gt; WithHsDocIdentifiers HsDocString a)
-&gt; GenLocated SrcSpan (WithHsDocIdentifiers HsDocString a)
-&gt; HsDocString
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#./GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan (WithHsDocIdentifiers HsDocString a)
-&gt; WithHsDocIdentifiers HsDocString a
forall l e. GenLocated l e -&gt; e
</span><a href="GHC.Types.SrcLoc.html#unLoc"><span class="hs-identifier hs-var">unLoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1295"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1296"></span><span>    </span><span id="local-6989586621681798013"><span class="annot"><span class="annottext">select :: [GenLocated SrcSpan (WithHsDocIdentifiers HsDocString pass)]
-&gt; HdkM
     (Maybe
        (GenLocated SrcSpan (WithHsDocIdentifiers HsDocString pass)))
</span><a href="#local-6989586621681798013"><span class="hs-identifier hs-var hs-var">select</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan (WithHsDocIdentifiers HsDocString pass))
-&gt; HdkM
     (Maybe
        (GenLocated SrcSpan (WithHsDocIdentifiers HsDocString pass)))
forall a. a -&gt; HdkM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan (WithHsDocIdentifiers HsDocString pass))
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1297"></span><span>    </span><span class="annot"><a href="#local-6989586621681798013"><span class="hs-identifier hs-var">select</span></a></span><span> </span><span class="hs-special">[</span><span id="local-6989586621681798018"><span class="annot"><span class="annottext">GenLocated SrcSpan (WithHsDocIdentifiers HsDocString pass)
</span><a href="#local-6989586621681798018"><span class="hs-identifier hs-var">doc</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan (WithHsDocIdentifiers HsDocString pass))
-&gt; HdkM
     (Maybe
        (GenLocated SrcSpan (WithHsDocIdentifiers HsDocString pass)))
forall a. a -&gt; HdkM a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#return/GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpan (WithHsDocIdentifiers HsDocString pass)
-&gt; Maybe
     (GenLocated SrcSpan (WithHsDocIdentifiers HsDocString pass))
forall a. a -&gt; Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan (WithHsDocIdentifiers HsDocString pass)
</span><a href="#local-6989586621681798018"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1298"></span><span>    </span><span class="annot"><a href="#local-6989586621681798013"><span class="hs-identifier hs-var">select</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681798019"><span class="annot"><span class="annottext">GenLocated SrcSpan (WithHsDocIdentifiers HsDocString pass)
</span><a href="#local-6989586621681798019"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681798020"><span class="annot"><span class="annottext">[GenLocated SrcSpan (WithHsDocIdentifiers HsDocString pass)]
</span><a href="#local-6989586621681798020"><span class="hs-identifier hs-var">extra_docs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1299"></span><span>      </span><span class="annot"><span class="annottext">[GenLocated SrcSpan HsDocString] -&gt; HdkM ()
</span><a href="GHC.Parser.PostProcess.Haddock.html#reportExtraDocs"><span class="hs-identifier hs-var">reportExtraDocs</span></a></span><span> </span><span class="annot"><span class="annottext">([GenLocated SrcSpan HsDocString] -&gt; HdkM ())
-&gt; [GenLocated SrcSpan HsDocString] -&gt; HdkM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpan (WithHsDocIdentifiers HsDocString pass)
 -&gt; GenLocated SrcSpan HsDocString)
-&gt; [GenLocated SrcSpan (WithHsDocIdentifiers HsDocString pass)]
-&gt; [GenLocated SrcSpan HsDocString]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681798021"><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681798021"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681798022"><span class="annot"><span class="annottext">WithHsDocIdentifiers HsDocString pass
</span><a href="#local-6989586621681798022"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; HsDocString -&gt; GenLocated SrcSpan HsDocString
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681798021"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(HsDocString -&gt; GenLocated SrcSpan HsDocString)
-&gt; HsDocString -&gt; GenLocated SrcSpan HsDocString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">WithHsDocIdentifiers HsDocString pass -&gt; HsDocString
forall a pass. WithHsDocIdentifiers a pass -&gt; a
</span><a href="GHC.Hs.Doc.html#hsDocString"><span class="hs-identifier hs-var">hsDocString</span></a></span><span> </span><span class="annot"><span class="annottext">WithHsDocIdentifiers HsDocString pass
</span><a href="#local-6989586621681798022"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[GenLocated SrcSpan (WithHsDocIdentifiers HsDocString pass)]
</span><a href="#local-6989586621681798020"><span class="hs-identifier hs-var">extra_docs</span></a></span><span>
</span><span id="line-1300"></span><span>      </span><span class="hs-identifier">return</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpan (WithHsDocIdentifiers HsDocString pass)
-&gt; Maybe
     (GenLocated SrcSpan (WithHsDocIdentifiers HsDocString pass))
forall a. a -&gt; Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan (WithHsDocIdentifiers HsDocString pass)
</span><a href="#local-6989586621681798019"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1301"></span><span>
</span><span id="line-1302"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#reportExtraDocs"><span class="hs-identifier hs-type">reportExtraDocs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.DocString.html#HsDocString"><span class="hs-identifier hs-type">HsDocString</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#HdkM"><span class="hs-identifier hs-type">HdkM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1303"></span><span id="reportExtraDocs"><span class="annot"><span class="annottext">reportExtraDocs :: [GenLocated SrcSpan HsDocString] -&gt; HdkM ()
</span><a href="GHC.Parser.PostProcess.Haddock.html#reportExtraDocs"><span class="hs-identifier hs-var hs-var">reportExtraDocs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1304"></span><span>  </span><span class="annot"><span class="annottext">(GenLocated SrcSpan HsDocString -&gt; HdkM ())
-&gt; [GenLocated SrcSpan HsDocString] -&gt; HdkM ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f ()
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#traverse_/Data.Foldable.html#traverse_"><span class="hs-identifier hs-var">traverse_</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681798023"><span class="annot"><span class="annottext">GenLocated SrcSpan HsDocString
</span><a href="#local-6989586621681798023"><span class="hs-identifier hs-var">extra_doc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HdkWarn -&gt; HdkM ()
</span><a href="GHC.Parser.PostProcess.Haddock.html#appendHdkWarning"><span class="hs-identifier hs-var">appendHdkWarning</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpan HsDocString -&gt; HdkWarn
</span><a href="GHC.Parser.PostProcess.Haddock.html#HdkWarnExtraComment"><span class="hs-identifier hs-var">HdkWarnExtraComment</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan HsDocString
</span><a href="#local-6989586621681798023"><span class="hs-identifier hs-var">extra_doc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1305"></span><span>
</span><span id="line-1306"></span><span class="annot"><span class="hs-comment">{- *********************************************************************
*                                                                      *
*      Matching functions for extracting documentation comments        *
*                                                                      *
********************************************************************* -}</span></span><span>
</span><span id="line-1311"></span><span>
</span><span id="line-1312"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#mkDocHsDecl"><span class="hs-identifier hs-type">mkDocHsDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Concrete.html#LayoutInfo"><span class="hs-identifier hs-type">LayoutInfo</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#PsLocated"><span class="hs-identifier hs-type">PsLocated</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#HdkComment"><span class="hs-identifier hs-type">HdkComment</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LHsDecl"><span class="hs-identifier hs-type">LHsDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1313"></span><span id="mkDocHsDecl"><span class="annot"><span class="annottext">mkDocHsDecl :: LayoutInfo GhcPs -&gt; PsLocated HdkComment -&gt; Maybe (LHsDecl GhcPs)
</span><a href="GHC.Parser.PostProcess.Haddock.html#mkDocHsDecl"><span class="hs-identifier hs-var hs-var">mkDocHsDecl</span></a></span></span><span> </span><span id="local-6989586621681798024"><span class="annot"><span class="annottext">LayoutInfo GhcPs
</span><a href="#local-6989586621681798024"><span class="hs-identifier hs-var">layout_info</span></a></span></span><span> </span><span id="local-6989586621681798025"><span class="annot"><span class="annottext">PsLocated HdkComment
</span><a href="#local-6989586621681798025"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(DocDecl GhcPs -&gt; HsDecl GhcPs)
-&gt; GenLocated SrcSpanAnnA (DocDecl GhcPs)
-&gt; GenLocated SrcSpanAnnA (HsDecl GhcPs)
forall a b.
(a -&gt; b) -&gt; GenLocated SrcSpanAnnA a -&gt; GenLocated SrcSpanAnnA b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#fmap/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XDocD GhcPs -&gt; DocDecl GhcPs -&gt; HsDecl GhcPs
forall p. XDocD p -&gt; DocDecl p -&gt; HsDecl p
</span><a href="Language.Haskell.Syntax.Decls.html#DocD"><span class="hs-identifier hs-var">DocD</span></a></span><span> </span><span class="annot"><span class="annottext">XDocD GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (DocDecl GhcPs)
 -&gt; GenLocated SrcSpanAnnA (HsDecl GhcPs))
-&gt; Maybe (GenLocated SrcSpanAnnA (DocDecl GhcPs))
-&gt; Maybe (GenLocated SrcSpanAnnA (HsDecl GhcPs))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/Data.Functor.html#%3C%24%3E/Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">LayoutInfo GhcPs -&gt; PsLocated HdkComment -&gt; Maybe (LDocDecl GhcPs)
</span><a href="GHC.Parser.PostProcess.Haddock.html#mkDocDecl"><span class="hs-identifier hs-var">mkDocDecl</span></a></span><span> </span><span class="annot"><span class="annottext">LayoutInfo GhcPs
</span><a href="#local-6989586621681798024"><span class="hs-identifier hs-var">layout_info</span></a></span><span> </span><span class="annot"><span class="annottext">PsLocated HdkComment
</span><a href="#local-6989586621681798025"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-1314"></span><span>
</span><span id="line-1315"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#mkDocDecl"><span class="hs-identifier hs-type">mkDocDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Concrete.html#LayoutInfo"><span class="hs-identifier hs-type">LayoutInfo</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#PsLocated"><span class="hs-identifier hs-type">PsLocated</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#HdkComment"><span class="hs-identifier hs-type">HdkComment</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LDocDecl"><span class="hs-identifier hs-type">LDocDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1316"></span><span id="mkDocDecl"><span class="annot"><span class="annottext">mkDocDecl :: LayoutInfo GhcPs -&gt; PsLocated HdkComment -&gt; Maybe (LDocDecl GhcPs)
</span><a href="GHC.Parser.PostProcess.Haddock.html#mkDocDecl"><span class="hs-identifier hs-var hs-var">mkDocDecl</span></a></span></span><span> </span><span id="local-6989586621681798028"><span class="annot"><span class="annottext">LayoutInfo GhcPs
</span><a href="#local-6989586621681798028"><span class="hs-identifier hs-var">layout_info</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681798029"><span class="annot"><span class="annottext">PsSpan
</span><a href="#local-6989586621681798029"><span class="hs-identifier hs-var">l_comment</span></a></span></span><span> </span><span id="local-6989586621681798030"><span class="annot"><span class="annottext">HdkComment
</span><a href="#local-6989586621681798030"><span class="hs-identifier hs-var">hdk_comment</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1317"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681798031"><span class="hs-identifier hs-var">indent_mismatch</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (LDocDecl GhcPs)
Maybe (GenLocated SrcSpanAnnA (DocDecl GhcPs))
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1318"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#otherwise/GHC.Base.html#otherwise"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1319"></span><span>    </span><span class="annot"><span class="annottext">LDocDecl GhcPs -&gt; Maybe (LDocDecl GhcPs)
forall a. a -&gt; Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(LDocDecl GhcPs -&gt; Maybe (LDocDecl GhcPs))
-&gt; LDocDecl GhcPs -&gt; Maybe (LDocDecl GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; DocDecl GhcPs -&gt; GenLocated SrcSpanAnnA (DocDecl GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpanAnnA
forall ann. SrcSpan -&gt; SrcAnn ann
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681798033"><span class="hs-identifier hs-var">span</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(DocDecl GhcPs -&gt; GenLocated SrcSpanAnnA (DocDecl GhcPs))
-&gt; DocDecl GhcPs -&gt; GenLocated SrcSpanAnnA (DocDecl GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1320"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HdkComment
</span><a href="#local-6989586621681798030"><span class="hs-identifier hs-var">hdk_comment</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1321"></span><span>        </span><span class="annot"><a href="GHC.Parser.Lexer.html#HdkCommentNext"><span class="hs-identifier hs-type">HdkCommentNext</span></a></span><span> </span><span id="local-6989586621681798035"><span class="annot"><span class="annottext">HsDocString
</span><a href="#local-6989586621681798035"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LHsDoc GhcPs -&gt; DocDecl GhcPs
forall pass. LHsDoc pass -&gt; DocDecl pass
</span><a href="Language.Haskell.Syntax.Decls.html#DocCommentNext"><span class="hs-identifier hs-var">DocCommentNext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; HsDoc GhcPs -&gt; LHsDoc GhcPs
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681798033"><span class="hs-identifier hs-var">span</span></a></span><span> </span><span class="annot"><span class="annottext">(HsDoc GhcPs -&gt; LHsDoc GhcPs) -&gt; HsDoc GhcPs -&gt; LHsDoc GhcPs
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocString -&gt; HsDoc GhcPs
</span><a href="GHC.Parser.PostProcess.Haddock.html#lexHsDocString"><span class="hs-identifier hs-var">lexHsDocString</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocString
</span><a href="#local-6989586621681798035"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1322"></span><span>        </span><span class="annot"><a href="GHC.Parser.Lexer.html#HdkCommentPrev"><span class="hs-identifier hs-type">HdkCommentPrev</span></a></span><span> </span><span id="local-6989586621681798038"><span class="annot"><span class="annottext">HsDocString
</span><a href="#local-6989586621681798038"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LHsDoc GhcPs -&gt; DocDecl GhcPs
forall pass. LHsDoc pass -&gt; DocDecl pass
</span><a href="Language.Haskell.Syntax.Decls.html#DocCommentPrev"><span class="hs-identifier hs-var">DocCommentPrev</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; HsDoc GhcPs -&gt; LHsDoc GhcPs
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681798033"><span class="hs-identifier hs-var">span</span></a></span><span> </span><span class="annot"><span class="annottext">(HsDoc GhcPs -&gt; LHsDoc GhcPs) -&gt; HsDoc GhcPs -&gt; LHsDoc GhcPs
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocString -&gt; HsDoc GhcPs
</span><a href="GHC.Parser.PostProcess.Haddock.html#lexHsDocString"><span class="hs-identifier hs-var">lexHsDocString</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocString
</span><a href="#local-6989586621681798038"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1323"></span><span>        </span><span class="annot"><a href="GHC.Parser.Lexer.html#HdkCommentNamed"><span class="hs-identifier hs-type">HdkCommentNamed</span></a></span><span> </span><span id="local-6989586621681798041"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681798041"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621681798042"><span class="annot"><span class="annottext">HsDocString
</span><a href="#local-6989586621681798042"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; LHsDoc GhcPs -&gt; DocDecl GhcPs
forall pass. String -&gt; LHsDoc pass -&gt; DocDecl pass
</span><a href="Language.Haskell.Syntax.Decls.html#DocCommentNamed"><span class="hs-identifier hs-var">DocCommentNamed</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681798041"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; HsDoc GhcPs -&gt; LHsDoc GhcPs
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681798033"><span class="hs-identifier hs-var">span</span></a></span><span> </span><span class="annot"><span class="annottext">(HsDoc GhcPs -&gt; LHsDoc GhcPs) -&gt; HsDoc GhcPs -&gt; LHsDoc GhcPs
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocString -&gt; HsDoc GhcPs
</span><a href="GHC.Parser.PostProcess.Haddock.html#lexHsDocString"><span class="hs-identifier hs-var">lexHsDocString</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocString
</span><a href="#local-6989586621681798042"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1324"></span><span>        </span><span class="annot"><a href="GHC.Parser.Lexer.html#HdkCommentSection"><span class="hs-identifier hs-type">HdkCommentSection</span></a></span><span> </span><span id="local-6989586621681798045"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681798045"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681798046"><span class="annot"><span class="annottext">HsDocString
</span><a href="#local-6989586621681798046"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; LHsDoc GhcPs -&gt; DocDecl GhcPs
forall pass. Int -&gt; LHsDoc pass -&gt; DocDecl pass
</span><a href="Language.Haskell.Syntax.Decls.html#DocGroup"><span class="hs-identifier hs-var">DocGroup</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681798045"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; HsDoc GhcPs -&gt; LHsDoc GhcPs
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681798033"><span class="hs-identifier hs-var">span</span></a></span><span> </span><span class="annot"><span class="annottext">(HsDoc GhcPs -&gt; LHsDoc GhcPs) -&gt; HsDoc GhcPs -&gt; LHsDoc GhcPs
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocString -&gt; HsDoc GhcPs
</span><a href="GHC.Parser.PostProcess.Haddock.html#lexHsDocString"><span class="hs-identifier hs-var">lexHsDocString</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocString
</span><a href="#local-6989586621681798046"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1325"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1326"></span><span>    </span><span id="local-6989586621681798033"><span class="annot"><span class="annottext">span :: SrcSpan
</span><a href="#local-6989586621681798033"><span class="hs-identifier hs-var hs-var">span</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PsSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#mkSrcSpanPs"><span class="hs-identifier hs-var">mkSrcSpanPs</span></a></span><span> </span><span class="annot"><span class="annottext">PsSpan
</span><a href="#local-6989586621681798029"><span class="hs-identifier hs-var">l_comment</span></a></span><span>
</span><span id="line-1327"></span><span>    </span><span class="hs-comment">--  'indent_mismatch' checks if the documentation comment has the exact</span><span>
</span><span id="line-1328"></span><span>    </span><span class="hs-comment">--  indentation level expected by the parent node.</span><span>
</span><span id="line-1329"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-1330"></span><span>    </span><span class="hs-comment">--  For example, when extracting documentation comments between class</span><span>
</span><span id="line-1331"></span><span>    </span><span class="hs-comment">--  method declarations, there are three cases to consider:</span><span>
</span><span id="line-1332"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-1333"></span><span>    </span><span class="hs-comment">--  1. Indent matches (indent_mismatch=False):</span><span>
</span><span id="line-1334"></span><span>    </span><span class="hs-comment">--         class C a where</span><span>
</span><span id="line-1335"></span><span>    </span><span class="hs-comment">--           f :: a -&gt; a</span><span>
</span><span id="line-1336"></span><span>    </span><span class="hs-comment">--           -- ^ doc on f</span><span>
</span><span id="line-1337"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-1338"></span><span>    </span><span class="hs-comment">--  2. Indented too much (indent_mismatch=True):</span><span>
</span><span id="line-1339"></span><span>    </span><span class="hs-comment">--         class C a where</span><span>
</span><span id="line-1340"></span><span>    </span><span class="hs-comment">--           f :: a -&gt; a</span><span>
</span><span id="line-1341"></span><span>    </span><span class="hs-comment">--             -- ^ indent mismatch</span><span>
</span><span id="line-1342"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-1343"></span><span>    </span><span class="hs-comment">--  3. Indented too little (indent_mismatch=True):</span><span>
</span><span id="line-1344"></span><span>    </span><span class="hs-comment">--         class C a where</span><span>
</span><span id="line-1345"></span><span>    </span><span class="hs-comment">--           f :: a -&gt; a</span><span>
</span><span id="line-1346"></span><span>    </span><span class="hs-comment">--         -- ^ indent mismatch</span><span>
</span><span id="line-1347"></span><span>    </span><span id="local-6989586621681798031"><span class="annot"><span class="annottext">indent_mismatch :: Bool
</span><a href="#local-6989586621681798031"><span class="hs-identifier hs-var hs-var">indent_mismatch</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">LayoutInfo GhcPs
</span><a href="#local-6989586621681798028"><span class="hs-identifier hs-var">layout_info</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1348"></span><span>      </span><span class="annot"><span class="annottext">LayoutInfo GhcPs
</span><a href="Language.Haskell.Syntax.Concrete.html#NoLayoutInfo"><span class="hs-identifier hs-var">NoLayoutInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1349"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Concrete.html#ExplicitBraces"><span class="hs-identifier hs-type">ExplicitBraces</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1350"></span><span>      </span><span class="annot"><a href="Language.Haskell.Syntax.Concrete.html#VirtualBraces"><span class="hs-identifier hs-type">VirtualBraces</span></a></span><span> </span><span id="local-6989586621681798048"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681798048"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681798048"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">RealSrcSpan -&gt; Int
</span><a href="GHC.Types.SrcLoc.html#srcSpanStartCol"><span class="hs-identifier hs-var">srcSpanStartCol</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PsSpan -&gt; RealSrcSpan
</span><a href="GHC.Types.SrcLoc.html#psRealSpan"><span class="hs-identifier hs-var">psRealSpan</span></a></span><span> </span><span class="annot"><span class="annottext">PsSpan
</span><a href="#local-6989586621681798029"><span class="hs-identifier hs-var">l_comment</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1351"></span><span>
</span><span id="line-1352"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#mkDocIE"><span class="hs-identifier hs-type">mkDocIE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#PsLocated"><span class="hs-identifier hs-type">PsLocated</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#HdkComment"><span class="hs-identifier hs-type">HdkComment</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.ImpExp.html#LIE"><span class="hs-identifier hs-type">LIE</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1353"></span><span id="mkDocIE"><span class="annot"><span class="annottext">mkDocIE :: PsLocated HdkComment -&gt; Maybe (LIE GhcPs)
</span><a href="GHC.Parser.PostProcess.Haddock.html#mkDocIE"><span class="hs-identifier hs-var hs-var">mkDocIE</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681798050"><span class="annot"><span class="annottext">PsSpan
</span><a href="#local-6989586621681798050"><span class="hs-identifier hs-var">l_comment</span></a></span></span><span> </span><span id="local-6989586621681798051"><span class="annot"><span class="annottext">HdkComment
</span><a href="#local-6989586621681798051"><span class="hs-identifier hs-var">hdk_comment</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1354"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HdkComment
</span><a href="#local-6989586621681798051"><span class="hs-identifier hs-var">hdk_comment</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1355"></span><span>    </span><span class="annot"><a href="GHC.Parser.Lexer.html#HdkCommentSection"><span class="hs-identifier hs-type">HdkCommentSection</span></a></span><span> </span><span id="local-6989586621681798052"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681798052"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681798053"><span class="annot"><span class="annottext">HsDocString
</span><a href="#local-6989586621681798053"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LIE GhcPs -&gt; Maybe (LIE GhcPs)
forall a. a -&gt; Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(LIE GhcPs -&gt; Maybe (LIE GhcPs)) -&gt; LIE GhcPs -&gt; Maybe (LIE GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; IE GhcPs -&gt; GenLocated SrcSpanAnnA (IE GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681798054"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XIEGroup GhcPs -&gt; Int -&gt; LHsDoc GhcPs -&gt; IE GhcPs
forall pass. XIEGroup pass -&gt; Int -&gt; LHsDoc pass -&gt; IE pass
</span><a href="Language.Haskell.Syntax.ImpExp.html#IEGroup"><span class="hs-identifier hs-var">IEGroup</span></a></span><span> </span><span class="annot"><span class="annottext">XIEGroup GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681798052"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">(LHsDoc GhcPs -&gt; IE GhcPs) -&gt; LHsDoc GhcPs -&gt; IE GhcPs
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; HsDoc GhcPs -&gt; LHsDoc GhcPs
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681798056"><span class="hs-identifier hs-var">span</span></a></span><span> </span><span class="annot"><span class="annottext">(HsDoc GhcPs -&gt; LHsDoc GhcPs) -&gt; HsDoc GhcPs -&gt; LHsDoc GhcPs
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocString -&gt; HsDoc GhcPs
</span><a href="GHC.Parser.PostProcess.Haddock.html#lexHsDocString"><span class="hs-identifier hs-var">lexHsDocString</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocString
</span><a href="#local-6989586621681798053"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1356"></span><span>    </span><span class="annot"><a href="GHC.Parser.Lexer.html#HdkCommentNamed"><span class="hs-identifier hs-type">HdkCommentNamed</span></a></span><span> </span><span id="local-6989586621681798057"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681798057"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621681798058"><span class="annot"><span class="annottext">HsDocString
</span><a href="#local-6989586621681798058"><span class="hs-identifier hs-var">_doc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LIE GhcPs -&gt; Maybe (LIE GhcPs)
forall a. a -&gt; Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(LIE GhcPs -&gt; Maybe (LIE GhcPs)) -&gt; LIE GhcPs -&gt; Maybe (LIE GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; IE GhcPs -&gt; GenLocated SrcSpanAnnA (IE GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681798054"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XIEDocNamed GhcPs -&gt; String -&gt; IE GhcPs
forall pass. XIEDocNamed pass -&gt; String -&gt; IE pass
</span><a href="Language.Haskell.Syntax.ImpExp.html#IEDocNamed"><span class="hs-identifier hs-var">IEDocNamed</span></a></span><span> </span><span class="annot"><span class="annottext">XIEDocNamed GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681798057"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1357"></span><span>    </span><span class="annot"><a href="GHC.Parser.Lexer.html#HdkCommentNext"><span class="hs-identifier hs-type">HdkCommentNext</span></a></span><span> </span><span id="local-6989586621681798060"><span class="annot"><span class="annottext">HsDocString
</span><a href="#local-6989586621681798060"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">LIE GhcPs -&gt; Maybe (LIE GhcPs)
forall a. a -&gt; Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(LIE GhcPs -&gt; Maybe (LIE GhcPs)) -&gt; LIE GhcPs -&gt; Maybe (LIE GhcPs)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA -&gt; IE GhcPs -&gt; GenLocated SrcSpanAnnA (IE GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
</span><a href="#local-6989586621681798054"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XIEDoc GhcPs -&gt; LHsDoc GhcPs -&gt; IE GhcPs
forall pass. XIEDoc pass -&gt; LHsDoc pass -&gt; IE pass
</span><a href="Language.Haskell.Syntax.ImpExp.html#IEDoc"><span class="hs-identifier hs-var">IEDoc</span></a></span><span> </span><span class="annot"><span class="annottext">XIEDoc GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">(LHsDoc GhcPs -&gt; IE GhcPs) -&gt; LHsDoc GhcPs -&gt; IE GhcPs
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; HsDoc GhcPs -&gt; LHsDoc GhcPs
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681798056"><span class="hs-identifier hs-var">span</span></a></span><span> </span><span class="annot"><span class="annottext">(HsDoc GhcPs -&gt; LHsDoc GhcPs) -&gt; HsDoc GhcPs -&gt; LHsDoc GhcPs
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocString -&gt; HsDoc GhcPs
</span><a href="GHC.Parser.PostProcess.Haddock.html#lexHsDocString"><span class="hs-identifier hs-var">lexHsDocString</span></a></span><span> </span><span class="annot"><span class="annottext">HsDocString
</span><a href="#local-6989586621681798060"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1358"></span><span>    </span><span class="annot"><span class="annottext">HdkComment
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (LIE GhcPs)
Maybe (GenLocated SrcSpanAnnA (IE GhcPs))
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1359"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681798054"><span class="annot"><span class="annottext">l :: SrcSpanAnnA
</span><a href="#local-6989586621681798054"><span class="hs-identifier hs-var hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpanAnnA
forall ann. SrcSpan -&gt; SrcAnn ann
</span><a href="GHC.Parser.Annotation.html#noAnnSrcSpan"><span class="hs-identifier hs-var">noAnnSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="#local-6989586621681798056"><span class="hs-identifier hs-var">span</span></a></span><span>
</span><span id="line-1360"></span><span>        </span><span id="local-6989586621681798056"><span class="annot"><span class="annottext">span :: SrcSpan
</span><a href="#local-6989586621681798056"><span class="hs-identifier hs-var hs-var">span</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PsSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#mkSrcSpanPs"><span class="hs-identifier hs-var">mkSrcSpanPs</span></a></span><span> </span><span class="annot"><span class="annottext">PsSpan
</span><a href="#local-6989586621681798050"><span class="hs-identifier hs-var">l_comment</span></a></span><span>
</span><span id="line-1361"></span><span>
</span><span id="line-1362"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#mkDocNext"><span class="hs-identifier hs-type">mkDocNext</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#PsLocated"><span class="hs-identifier hs-type">PsLocated</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#HdkComment"><span class="hs-identifier hs-type">HdkComment</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.DocString.html#HsDocString"><span class="hs-identifier hs-type">HsDocString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1363"></span><span id="mkDocNext"><span class="annot"><span class="annottext">mkDocNext :: PsLocated HdkComment -&gt; Maybe (GenLocated SrcSpan HsDocString)
</span><a href="GHC.Parser.PostProcess.Haddock.html#mkDocNext"><span class="hs-identifier hs-var hs-var">mkDocNext</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681798062"><span class="annot"><span class="annottext">PsSpan
</span><a href="#local-6989586621681798062"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Lexer.html#HdkCommentNext"><span class="hs-identifier hs-type">HdkCommentNext</span></a></span><span> </span><span id="local-6989586621681798063"><span class="annot"><span class="annottext">HsDocString
</span><a href="#local-6989586621681798063"><span class="hs-identifier hs-var">doc</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan HsDocString
-&gt; Maybe (GenLocated SrcSpan HsDocString)
forall a. a -&gt; Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; HsDocString -&gt; GenLocated SrcSpan HsDocString
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PsSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#mkSrcSpanPs"><span class="hs-identifier hs-var">mkSrcSpanPs</span></a></span><span> </span><span class="annot"><span class="annottext">PsSpan
</span><a href="#local-6989586621681798062"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsDocString
</span><a href="#local-6989586621681798063"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1364"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#mkDocNext"><span class="hs-identifier hs-var">mkDocNext</span></a></span><span> </span><span class="annot"><span class="annottext">PsLocated HdkComment
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan HsDocString)
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1365"></span><span>
</span><span id="line-1366"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#mkDocPrev"><span class="hs-identifier hs-type">mkDocPrev</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#PsLocated"><span class="hs-identifier hs-type">PsLocated</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.Lexer.html#HdkComment"><span class="hs-identifier hs-type">HdkComment</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.DocString.html#HsDocString"><span class="hs-identifier hs-type">HsDocString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1367"></span><span id="mkDocPrev"><span class="annot"><span class="annottext">mkDocPrev :: PsLocated HdkComment -&gt; Maybe (GenLocated SrcSpan HsDocString)
</span><a href="GHC.Parser.PostProcess.Haddock.html#mkDocPrev"><span class="hs-identifier hs-var hs-var">mkDocPrev</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681798064"><span class="annot"><span class="annottext">PsSpan
</span><a href="#local-6989586621681798064"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Lexer.html#HdkCommentPrev"><span class="hs-identifier hs-type">HdkCommentPrev</span></a></span><span> </span><span id="local-6989586621681798065"><span class="annot"><span class="annottext">HsDocString
</span><a href="#local-6989586621681798065"><span class="hs-identifier hs-var">doc</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan HsDocString
-&gt; Maybe (GenLocated SrcSpan HsDocString)
forall a. a -&gt; Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; HsDocString -&gt; GenLocated SrcSpan HsDocString
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PsSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#mkSrcSpanPs"><span class="hs-identifier hs-var">mkSrcSpanPs</span></a></span><span> </span><span class="annot"><span class="annottext">PsSpan
</span><a href="#local-6989586621681798064"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HsDocString
</span><a href="#local-6989586621681798065"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1368"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#mkDocPrev"><span class="hs-identifier hs-var">mkDocPrev</span></a></span><span> </span><span class="annot"><span class="annottext">PsLocated HdkComment
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan HsDocString)
forall a. Maybe a
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1369"></span><span>
</span><span id="line-1370"></span><span>
</span><span id="line-1371"></span><span class="annot"><span class="hs-comment">{- *********************************************************************
*                                                                      *
*                   LocRange: a location range                         *
*                                                                      *
********************************************************************* -}</span></span><span>
</span><span id="line-1376"></span><span>
</span><span id="line-1377"></span><span class="hs-comment">-- A location range for extracting documentation comments.</span><span>
</span><span id="line-1378"></span><span class="hs-keyword">data</span><span> </span><span id="LocRange"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#LocRange"><span class="hs-identifier hs-var">LocRange</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1379"></span><span>  </span><span id="LocRange"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#LocRange"><span class="hs-identifier hs-var">LocRange</span></a></span></span><span>
</span><span id="line-1380"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="loc_range_from"><span class="annot"><span class="annottext">LocRange -&gt; LowerLocBound
</span><a href="GHC.Parser.PostProcess.Haddock.html#loc_range_from"><span class="hs-identifier hs-var hs-var">loc_range_from</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#LowerLocBound"><span class="hs-identifier hs-type">LowerLocBound</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1381"></span><span>      </span><span id="loc_range_to"><span class="annot"><span class="annottext">LocRange -&gt; UpperLocBound
</span><a href="GHC.Parser.PostProcess.Haddock.html#loc_range_to"><span class="hs-identifier hs-var hs-var">loc_range_to</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#UpperLocBound"><span class="hs-identifier hs-type">UpperLocBound</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1382"></span><span>      </span><span id="loc_range_col"><span class="annot"><span class="annottext">LocRange -&gt; ColumnBound
</span><a href="GHC.Parser.PostProcess.Haddock.html#loc_range_col"><span class="hs-identifier hs-var hs-var">loc_range_col</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#ColumnBound"><span class="hs-identifier hs-type">ColumnBound</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1383"></span><span>
</span><span id="line-1384"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681798070"><span id="local-6989586621681798073"><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#Semigroup/GHC.Base.html#Semigroup"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#LocRange"><span class="hs-identifier hs-type">LocRange</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1385"></span><span>  </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#LocRange"><span class="hs-identifier hs-type">LocRange</span></a></span><span> </span><span id="local-6989586621681798083"><span class="annot"><span class="annottext">LowerLocBound
</span><a href="#local-6989586621681798083"><span class="hs-identifier hs-var">from1</span></a></span></span><span> </span><span id="local-6989586621681798084"><span class="annot"><span class="annottext">UpperLocBound
</span><a href="#local-6989586621681798084"><span class="hs-identifier hs-var">to1</span></a></span></span><span> </span><span id="local-6989586621681798085"><span class="annot"><span class="annottext">ColumnBound
</span><a href="#local-6989586621681798085"><span class="hs-identifier hs-var">col1</span></a></span></span><span> </span><span id="local-6989586621681798086"><span class="annot"><span class="annottext">&lt;&gt; :: LocRange -&gt; LocRange -&gt; LocRange
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%3C%3E/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></a></span></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#LocRange"><span class="hs-identifier hs-type">LocRange</span></a></span><span> </span><span id="local-6989586621681798087"><span class="annot"><span class="annottext">LowerLocBound
</span><a href="#local-6989586621681798087"><span class="hs-identifier hs-var">from2</span></a></span></span><span> </span><span id="local-6989586621681798088"><span class="annot"><span class="annottext">UpperLocBound
</span><a href="#local-6989586621681798088"><span class="hs-identifier hs-var">to2</span></a></span></span><span> </span><span id="local-6989586621681798089"><span class="annot"><span class="annottext">ColumnBound
</span><a href="#local-6989586621681798089"><span class="hs-identifier hs-var">col2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1386"></span><span>    </span><span class="annot"><span class="annottext">LowerLocBound -&gt; UpperLocBound -&gt; ColumnBound -&gt; LocRange
</span><a href="GHC.Parser.PostProcess.Haddock.html#LocRange"><span class="hs-identifier hs-var">LocRange</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LowerLocBound
</span><a href="#local-6989586621681798083"><span class="hs-identifier hs-var">from1</span></a></span><span> </span><span class="annot"><span class="annottext">LowerLocBound -&gt; LowerLocBound -&gt; LowerLocBound
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%3C%3E/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">LowerLocBound
</span><a href="#local-6989586621681798087"><span class="hs-identifier hs-var">from2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UpperLocBound
</span><a href="#local-6989586621681798084"><span class="hs-identifier hs-var">to1</span></a></span><span> </span><span class="annot"><span class="annottext">UpperLocBound -&gt; UpperLocBound -&gt; UpperLocBound
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%3C%3E/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">UpperLocBound
</span><a href="#local-6989586621681798088"><span class="hs-identifier hs-var">to2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnBound
</span><a href="#local-6989586621681798085"><span class="hs-identifier hs-var">col1</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnBound -&gt; ColumnBound -&gt; ColumnBound
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%3C%3E/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnBound
</span><a href="#local-6989586621681798089"><span class="hs-identifier hs-var">col2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1387"></span><span>
</span><span id="line-1388"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681798094"><span id="local-6989586621681798097"><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#Monoid/GHC.Base.html#Monoid"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#LocRange"><span class="hs-identifier hs-type">LocRange</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1389"></span><span>  </span><span id="local-6989586621681798105"><span class="annot"><span class="annottext">mempty :: LocRange
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mempty/GHC.Base.html#mempty"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LowerLocBound -&gt; UpperLocBound -&gt; ColumnBound -&gt; LocRange
</span><a href="GHC.Parser.PostProcess.Haddock.html#LocRange"><span class="hs-identifier hs-var">LocRange</span></a></span><span> </span><span class="annot"><span class="annottext">LowerLocBound
forall a. Monoid a =&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mempty/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">UpperLocBound
forall a. Monoid a =&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mempty/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">ColumnBound
forall a. Monoid a =&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mempty/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1390"></span><span>
</span><span id="line-1391"></span><span class="hs-comment">-- The location range from the specified position to the end of the file.</span><span>
</span><span id="line-1392"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#locRangeFrom"><span class="hs-identifier hs-type">locRangeFrom</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.Strict.html#Maybe"><span class="hs-identifier hs-type">Strict.Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#BufPos"><span class="hs-identifier hs-type">BufPos</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#LocRange"><span class="hs-identifier hs-type">LocRange</span></a></span><span>
</span><span id="line-1393"></span><span id="locRangeFrom"><span class="annot"><span class="annottext">locRangeFrom :: Maybe BufPos -&gt; LocRange
</span><a href="GHC.Parser.PostProcess.Haddock.html#locRangeFrom"><span class="hs-identifier hs-var hs-var">locRangeFrom</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.Strict.html#Just"><span class="hs-identifier hs-type">Strict.Just</span></a></span><span> </span><span id="local-6989586621681798107"><span class="annot"><span class="annottext">BufPos
</span><a href="#local-6989586621681798107"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocRange
forall a. Monoid a =&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mempty/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#loc_range_from"><span class="hs-identifier hs-var">loc_range_from</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#StartLoc"><span class="hs-identifier hs-type">StartLoc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681798107"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1394"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#locRangeFrom"><span class="hs-identifier hs-var">locRangeFrom</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe BufPos
</span><a href="GHC.Data.Strict.html#Nothing"><span class="hs-identifier hs-var">Strict.Nothing</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocRange
forall a. Monoid a =&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mempty/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1395"></span><span>
</span><span id="line-1396"></span><span class="hs-comment">-- The location range from the start of the file to the specified position.</span><span>
</span><span id="line-1397"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#locRangeTo"><span class="hs-identifier hs-type">locRangeTo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Data.Strict.html#Maybe"><span class="hs-identifier hs-type">Strict.Maybe</span></a></span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#BufPos"><span class="hs-identifier hs-type">BufPos</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#LocRange"><span class="hs-identifier hs-type">LocRange</span></a></span><span>
</span><span id="line-1398"></span><span id="locRangeTo"><span class="annot"><span class="annottext">locRangeTo :: Maybe BufPos -&gt; LocRange
</span><a href="GHC.Parser.PostProcess.Haddock.html#locRangeTo"><span class="hs-identifier hs-var hs-var">locRangeTo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Data.Strict.html#Just"><span class="hs-identifier hs-type">Strict.Just</span></a></span><span> </span><span id="local-6989586621681798109"><span class="annot"><span class="annottext">BufPos
</span><a href="#local-6989586621681798109"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocRange
forall a. Monoid a =&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mempty/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#loc_range_to"><span class="hs-identifier hs-var">loc_range_to</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#EndLoc"><span class="hs-identifier hs-type">EndLoc</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681798109"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1399"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#locRangeTo"><span class="hs-identifier hs-var">locRangeTo</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe BufPos
</span><a href="GHC.Data.Strict.html#Nothing"><span class="hs-identifier hs-var">Strict.Nothing</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LocRange
forall a. Monoid a =&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mempty/GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1400"></span><span>
</span><span id="line-1401"></span><span class="hs-comment">-- Represents a predicate on BufPos:</span><span>
</span><span id="line-1402"></span><span class="hs-comment">--</span><span>
</span><span id="line-1403"></span><span class="hs-comment">--   LowerLocBound |   BufPos -&gt; Bool</span><span>
</span><span id="line-1404"></span><span class="hs-comment">--   --------------+-----------------</span><span>
</span><span id="line-1405"></span><span class="hs-comment">--   StartOfFile   |   const True</span><span>
</span><span id="line-1406"></span><span class="hs-comment">--   StartLoc p    |   (&gt;= p)</span><span>
</span><span id="line-1407"></span><span class="hs-comment">--</span><span>
</span><span id="line-1408"></span><span class="hs-comment">--  The semigroup instance corresponds to (&amp;&amp;).</span><span>
</span><span id="line-1409"></span><span class="hs-comment">--</span><span>
</span><span id="line-1410"></span><span class="hs-comment">--  We don't use the  BufPos -&gt; Bool  representation</span><span>
</span><span id="line-1411"></span><span class="hs-comment">--  as it would lead to redundant checks.</span><span>
</span><span id="line-1412"></span><span class="hs-comment">--</span><span>
</span><span id="line-1413"></span><span class="hs-comment">--  That is, instead of</span><span>
</span><span id="line-1414"></span><span class="hs-comment">--</span><span>
</span><span id="line-1415"></span><span class="hs-comment">--      (pos &gt;= 20) &amp;&amp; (pos &gt;= 30) &amp;&amp; (pos &gt;= 40)</span><span>
</span><span id="line-1416"></span><span class="hs-comment">--</span><span>
</span><span id="line-1417"></span><span class="hs-comment">--  We'd rather only do the (&gt;=40) check. So we reify the predicate to make</span><span>
</span><span id="line-1418"></span><span class="hs-comment">--  sure we only check for the most restrictive bound.</span><span>
</span><span id="line-1419"></span><span class="hs-keyword">data</span><span> </span><span id="LowerLocBound"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#LowerLocBound"><span class="hs-identifier hs-var">LowerLocBound</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="StartOfFile"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#StartOfFile"><span class="hs-identifier hs-var">StartOfFile</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="StartLoc"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#StartLoc"><span class="hs-identifier hs-var">StartLoc</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Types.SrcLoc.html#BufPos"><span class="hs-identifier hs-type">BufPos</span></a></span><span>
</span><span id="line-1420"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621681798111"><span id="local-6989586621681798116"><span id="local-6989586621681798120"><span class="annot"><span class="annottext">Int -&gt; LowerLocBound -&gt; ShowS
[LowerLocBound] -&gt; ShowS
LowerLocBound -&gt; String
(Int -&gt; LowerLocBound -&gt; ShowS)
-&gt; (LowerLocBound -&gt; String)
-&gt; ([LowerLocBound] -&gt; ShowS)
-&gt; Show LowerLocBound
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; LowerLocBound -&gt; ShowS
showsPrec :: Int -&gt; LowerLocBound -&gt; ShowS
$cshow :: LowerLocBound -&gt; String
show :: LowerLocBound -&gt; String
$cshowList :: [LowerLocBound] -&gt; ShowS
showList :: [LowerLocBound] -&gt; ShowS
</span><a href="../../base-4.18.3.0/src/GHC.Show.html#Show/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span>
</span><span id="line-1421"></span><span>
</span><span id="line-1422"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681798125"><span id="local-6989586621681798128"><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#Semigroup/GHC.Base.html#Semigroup"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#LowerLocBound"><span class="hs-identifier hs-type">LowerLocBound</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1423"></span><span>  </span><span class="annot"><span class="annottext">LowerLocBound
</span><a href="GHC.Parser.PostProcess.Haddock.html#StartOfFile"><span class="hs-identifier hs-var">StartOfFile</span></a></span><span> </span><span id="local-6989586621681798133"><span class="annot"><span class="annottext">&lt;&gt; :: LowerLocBound -&gt; LowerLocBound -&gt; LowerLocBound
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%3C%3E/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></a></span></span><span> </span><span id="local-6989586621681798134"><span class="annot"><span class="annottext">LowerLocBound
</span><a href="#local-6989586621681798134"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LowerLocBound
</span><a href="#local-6989586621681798134"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1424"></span><span>  </span><span id="local-6989586621681798135"><span class="annot"><span class="annottext">LowerLocBound
</span><a href="#local-6989586621681798135"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#%3C%3E/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">LowerLocBound
</span><a href="GHC.Parser.PostProcess.Haddock.html#StartOfFile"><span class="hs-identifier hs-var">StartOfFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LowerLocBound
</span><a href="#local-6989586621681798135"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1425"></span><span>  </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#StartLoc"><span class="hs-identifier hs-type">StartLoc</span></a></span><span> </span><span id="local-6989586621681798136"><span class="annot"><span class="annottext">BufPos
</span><a href="#local-6989586621681798136"><span class="hs-identifier hs-var">l1</span></a></span></span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#%3C%3E/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#StartLoc"><span class="hs-identifier hs-type">StartLoc</span></a></span><span> </span><span id="local-6989586621681798137"><span class="annot"><span class="annottext">BufPos
</span><a href="#local-6989586621681798137"><span class="hs-identifier hs-var">l2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BufPos -&gt; LowerLocBound
</span><a href="GHC.Parser.PostProcess.Haddock.html#StartLoc"><span class="hs-identifier hs-var">StartLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BufPos -&gt; BufPos -&gt; BufPos
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">max</span></span><span> </span><span class="annot"><span class="annottext">BufPos
</span><a href="#local-6989586621681798136"><span class="hs-identifier hs-var">l1</span></a></span><span> </span><span class="annot"><span class="annottext">BufPos
</span><a href="#local-6989586621681798137"><span class="hs-identifier hs-var">l2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1426"></span><span>
</span><span id="line-1427"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681798143"><span id="local-6989586621681798146"><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#Monoid/GHC.Base.html#Monoid"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#LowerLocBound"><span class="hs-identifier hs-type">LowerLocBound</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1428"></span><span>  </span><span id="local-6989586621681798148"><span class="annot"><span class="annottext">mempty :: LowerLocBound
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mempty/GHC.Base.html#mempty"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LowerLocBound
</span><a href="GHC.Parser.PostProcess.Haddock.html#StartOfFile"><span class="hs-identifier hs-var">StartOfFile</span></a></span><span>
</span><span id="line-1429"></span><span>
</span><span id="line-1430"></span><span class="hs-comment">-- Represents a predicate on BufPos:</span><span>
</span><span id="line-1431"></span><span class="hs-comment">--</span><span>
</span><span id="line-1432"></span><span class="hs-comment">--   UpperLocBound |   BufPos -&gt; Bool</span><span>
</span><span id="line-1433"></span><span class="hs-comment">--   --------------+-----------------</span><span>
</span><span id="line-1434"></span><span class="hs-comment">--   EndOfFile     |   const True</span><span>
</span><span id="line-1435"></span><span class="hs-comment">--   EndLoc p      |   (&lt;= p)</span><span>
</span><span id="line-1436"></span><span class="hs-comment">--</span><span>
</span><span id="line-1437"></span><span class="hs-comment">--  The semigroup instance corresponds to (&amp;&amp;).</span><span>
</span><span id="line-1438"></span><span class="hs-comment">--</span><span>
</span><span id="line-1439"></span><span class="hs-comment">--  We don't use the  BufPos -&gt; Bool  representation</span><span>
</span><span id="line-1440"></span><span class="hs-comment">--  as it would lead to redundant checks.</span><span>
</span><span id="line-1441"></span><span class="hs-comment">--</span><span>
</span><span id="line-1442"></span><span class="hs-comment">--  That is, instead of</span><span>
</span><span id="line-1443"></span><span class="hs-comment">--</span><span>
</span><span id="line-1444"></span><span class="hs-comment">--      (pos &lt;= 40) &amp;&amp; (pos &lt;= 30) &amp;&amp; (pos &lt;= 20)</span><span>
</span><span id="line-1445"></span><span class="hs-comment">--</span><span>
</span><span id="line-1446"></span><span class="hs-comment">--  We'd rather only do the (&lt;=20) check. So we reify the predicate to make</span><span>
</span><span id="line-1447"></span><span class="hs-comment">--  sure we only check for the most restrictive bound.</span><span>
</span><span id="line-1448"></span><span class="hs-keyword">data</span><span> </span><span id="UpperLocBound"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#UpperLocBound"><span class="hs-identifier hs-var">UpperLocBound</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="EndOfFile"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#EndOfFile"><span class="hs-identifier hs-var">EndOfFile</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="EndLoc"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#EndLoc"><span class="hs-identifier hs-var">EndLoc</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="GHC.Types.SrcLoc.html#BufPos"><span class="hs-identifier hs-type">BufPos</span></a></span><span>
</span><span id="line-1449"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621681798150"><span id="local-6989586621681798154"><span id="local-6989586621681798158"><span class="annot"><span class="annottext">Int -&gt; UpperLocBound -&gt; ShowS
[UpperLocBound] -&gt; ShowS
UpperLocBound -&gt; String
(Int -&gt; UpperLocBound -&gt; ShowS)
-&gt; (UpperLocBound -&gt; String)
-&gt; ([UpperLocBound] -&gt; ShowS)
-&gt; Show UpperLocBound
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; UpperLocBound -&gt; ShowS
showsPrec :: Int -&gt; UpperLocBound -&gt; ShowS
$cshow :: UpperLocBound -&gt; String
show :: UpperLocBound -&gt; String
$cshowList :: [UpperLocBound] -&gt; ShowS
showList :: [UpperLocBound] -&gt; ShowS
</span><a href="../../base-4.18.3.0/src/GHC.Show.html#Show/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span>
</span><span id="line-1450"></span><span>
</span><span id="line-1451"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681798162"><span id="local-6989586621681798165"><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#Semigroup/GHC.Base.html#Semigroup"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#UpperLocBound"><span class="hs-identifier hs-type">UpperLocBound</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1452"></span><span>  </span><span class="annot"><span class="annottext">UpperLocBound
</span><a href="GHC.Parser.PostProcess.Haddock.html#EndOfFile"><span class="hs-identifier hs-var">EndOfFile</span></a></span><span> </span><span id="local-6989586621681798170"><span class="annot"><span class="annottext">&lt;&gt; :: UpperLocBound -&gt; UpperLocBound -&gt; UpperLocBound
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%3C%3E/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></a></span></span><span> </span><span id="local-6989586621681798171"><span class="annot"><span class="annottext">UpperLocBound
</span><a href="#local-6989586621681798171"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UpperLocBound
</span><a href="#local-6989586621681798171"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1453"></span><span>  </span><span id="local-6989586621681798172"><span class="annot"><span class="annottext">UpperLocBound
</span><a href="#local-6989586621681798172"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#%3C%3E/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">UpperLocBound
</span><a href="GHC.Parser.PostProcess.Haddock.html#EndOfFile"><span class="hs-identifier hs-var">EndOfFile</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UpperLocBound
</span><a href="#local-6989586621681798172"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1454"></span><span>  </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#EndLoc"><span class="hs-identifier hs-type">EndLoc</span></a></span><span> </span><span id="local-6989586621681798173"><span class="annot"><span class="annottext">BufPos
</span><a href="#local-6989586621681798173"><span class="hs-identifier hs-var">l1</span></a></span></span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#%3C%3E/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#EndLoc"><span class="hs-identifier hs-type">EndLoc</span></a></span><span> </span><span id="local-6989586621681798174"><span class="annot"><span class="annottext">BufPos
</span><a href="#local-6989586621681798174"><span class="hs-identifier hs-var">l2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BufPos -&gt; UpperLocBound
</span><a href="GHC.Parser.PostProcess.Haddock.html#EndLoc"><span class="hs-identifier hs-var">EndLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BufPos -&gt; BufPos -&gt; BufPos
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">min</span></span><span> </span><span class="annot"><span class="annottext">BufPos
</span><a href="#local-6989586621681798173"><span class="hs-identifier hs-var">l1</span></a></span><span> </span><span class="annot"><span class="annottext">BufPos
</span><a href="#local-6989586621681798174"><span class="hs-identifier hs-var">l2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1455"></span><span>
</span><span id="line-1456"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681798180"><span id="local-6989586621681798183"><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#Monoid/GHC.Base.html#Monoid"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#UpperLocBound"><span class="hs-identifier hs-type">UpperLocBound</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1457"></span><span>  </span><span id="local-6989586621681798185"><span class="annot"><span class="annottext">mempty :: UpperLocBound
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mempty/GHC.Base.html#mempty"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UpperLocBound
</span><a href="GHC.Parser.PostProcess.Haddock.html#EndOfFile"><span class="hs-identifier hs-var">EndOfFile</span></a></span><span>
</span><span id="line-1458"></span><span>
</span><span id="line-1459"></span><span class="hs-comment">-- | Represents a predicate on the column number.</span><span>
</span><span id="line-1460"></span><span class="hs-comment">--</span><span>
</span><span id="line-1461"></span><span class="hs-comment">--   ColumnBound   |   Int -&gt; Bool</span><span>
</span><span id="line-1462"></span><span class="hs-comment">--   --------------+-----------------</span><span>
</span><span id="line-1463"></span><span class="hs-comment">--   ColumnFrom n  |   (&gt;=n)</span><span>
</span><span id="line-1464"></span><span class="hs-comment">--</span><span>
</span><span id="line-1465"></span><span class="hs-comment">--  The semigroup instance corresponds to (&amp;&amp;).</span><span>
</span><span id="line-1466"></span><span class="hs-comment">--</span><span>
</span><span id="line-1467"></span><span class="hs-keyword">newtype</span><span> </span><span id="ColumnBound"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#ColumnBound"><span class="hs-identifier hs-var">ColumnBound</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ColumnFrom"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#ColumnFrom"><span class="hs-identifier hs-var">ColumnFrom</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-comment">-- n &gt;= GHC.Types.SrcLoc.leftmostColumn</span><span>
</span><span id="line-1468"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621681798187"><span id="local-6989586621681798192"><span id="local-6989586621681798196"><span class="annot"><span class="annottext">Int -&gt; ColumnBound -&gt; ShowS
[ColumnBound] -&gt; ShowS
ColumnBound -&gt; String
(Int -&gt; ColumnBound -&gt; ShowS)
-&gt; (ColumnBound -&gt; String)
-&gt; ([ColumnBound] -&gt; ShowS)
-&gt; Show ColumnBound
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; ColumnBound -&gt; ShowS
showsPrec :: Int -&gt; ColumnBound -&gt; ShowS
$cshow :: ColumnBound -&gt; String
show :: ColumnBound -&gt; String
$cshowList :: [ColumnBound] -&gt; ShowS
showList :: [ColumnBound] -&gt; ShowS
</span><a href="../../base-4.18.3.0/src/GHC.Show.html#Show/GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span>
</span><span id="line-1469"></span><span>
</span><span id="line-1470"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681798200"><span id="local-6989586621681798203"><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#Semigroup/GHC.Base.html#Semigroup"><span class="hs-identifier hs-type">Semigroup</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#ColumnBound"><span class="hs-identifier hs-type">ColumnBound</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1471"></span><span>  </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#ColumnFrom"><span class="hs-identifier hs-type">ColumnFrom</span></a></span><span> </span><span id="local-6989586621681798208"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681798208"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681798209"><span class="annot"><span class="annottext">&lt;&gt; :: ColumnBound -&gt; ColumnBound -&gt; ColumnBound
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%3C%3E/GHC.Base.html#%3C%3E"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></a></span></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#ColumnFrom"><span class="hs-identifier hs-type">ColumnFrom</span></a></span><span> </span><span id="local-6989586621681798210"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681798210"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; ColumnBound
</span><a href="GHC.Parser.PostProcess.Haddock.html#ColumnFrom"><span class="hs-identifier hs-var">ColumnFrom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">max</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681798208"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681798210"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1472"></span><span>
</span><span id="line-1473"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681798215"><span id="local-6989586621681798218"><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Base.html#Monoid/GHC.Base.html#Monoid"><span class="hs-identifier hs-type">Monoid</span></a></span><span> </span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#ColumnBound"><span class="hs-identifier hs-type">ColumnBound</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1474"></span><span>  </span><span id="local-6989586621681798220"><span class="annot"><span class="annottext">mempty :: ColumnBound
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#mempty/GHC.Base.html#mempty"><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; ColumnBound
</span><a href="GHC.Parser.PostProcess.Haddock.html#ColumnFrom"><span class="hs-identifier hs-var">ColumnFrom</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="GHC.Types.SrcLoc.html#leftmostColumn"><span class="hs-identifier hs-var">leftmostColumn</span></a></span><span>
</span><span id="line-1475"></span><span>
</span><span id="line-1476"></span><span>
</span><span id="line-1477"></span><span class="annot"><span class="hs-comment">{- *********************************************************************
*                                                                      *
*                   AST manipulation utilities                         *
*                                                                      *
********************************************************************* -}</span></span><span>
</span><span id="line-1482"></span><span>
</span><span id="line-1483"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#mkLHsDocTy"><span class="hs-identifier hs-type">mkLHsDocTy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#Located"><span class="hs-identifier hs-type">Located</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.DocString.html#HsDocString"><span class="hs-identifier hs-type">HsDocString</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsType"><span class="hs-identifier hs-type">LHsType</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span>
</span><span id="line-1484"></span><span id="mkLHsDocTy"><span class="annot"><span class="annottext">mkLHsDocTy :: LHsType GhcPs
-&gt; Maybe (GenLocated SrcSpan HsDocString) -&gt; LHsType GhcPs
</span><a href="GHC.Parser.PostProcess.Haddock.html#mkLHsDocTy"><span class="hs-identifier hs-var hs-var">mkLHsDocTy</span></a></span></span><span> </span><span id="local-6989586621681798222"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621681798222"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe (GenLocated SrcSpan HsDocString)
</span><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Nothing/GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621681798222"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1485"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#mkLHsDocTy"><span class="hs-identifier hs-var">mkLHsDocTy</span></a></span><span> </span><span id="local-6989586621681798223"><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621681798223"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Just/GHC.Maybe.html#Just"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621681798224"><span class="annot"><span class="annottext">GenLocated SrcSpan HsDocString
</span><a href="#local-6989586621681798224"><span class="hs-identifier hs-var">doc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SrcSpanAnnA
-&gt; HsType GhcPs -&gt; GenLocated SrcSpanAnnA (HsType GhcPs)
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsType GhcPs) -&gt; SrcSpanAnnA
forall l e. GenLocated l e -&gt; l
</span><a href="GHC.Types.SrcLoc.html#getLoc"><span class="hs-identifier hs-var">getLoc</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
GenLocated SrcSpanAnnA (HsType GhcPs)
</span><a href="#local-6989586621681798223"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XDocTy GhcPs -&gt; LHsType GhcPs -&gt; LHsDoc GhcPs -&gt; HsType GhcPs
forall pass.
XDocTy pass -&gt; LHsType pass -&gt; LHsDoc pass -&gt; HsType pass
</span><a href="Language.Haskell.Syntax.Type.html#HsDocTy"><span class="hs-identifier hs-var">HsDocTy</span></a></span><span> </span><span class="annot"><span class="annottext">XDocTy GhcPs
EpAnn [AddEpAnn]
forall a. EpAnn a
</span><a href="GHC.Parser.Annotation.html#noAnn"><span class="hs-identifier hs-var">noAnn</span></a></span><span> </span><span class="annot"><span class="annottext">LHsType GhcPs
</span><a href="#local-6989586621681798223"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">(LHsDoc GhcPs -&gt; HsType GhcPs) -&gt; LHsDoc GhcPs -&gt; HsType GhcPs
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan HsDocString -&gt; LHsDoc GhcPs
</span><a href="GHC.Parser.PostProcess.Haddock.html#lexLHsDocString"><span class="hs-identifier hs-var">lexLHsDocString</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpan HsDocString
</span><a href="#local-6989586621681798224"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1486"></span><span>
</span><span id="line-1487"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#getForAllTeleLoc"><span class="hs-identifier hs-type">getForAllTeleLoc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsForAllTelescope"><span class="hs-identifier hs-type">HsForAllTelescope</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span><span>
</span><span id="line-1488"></span><span id="getForAllTeleLoc"><span class="annot"><span class="annottext">getForAllTeleLoc :: HsForAllTelescope GhcPs -&gt; SrcSpan
</span><a href="GHC.Parser.PostProcess.Haddock.html#getForAllTeleLoc"><span class="hs-identifier hs-var hs-var">getForAllTeleLoc</span></a></span></span><span> </span><span id="local-6989586621681798226"><span class="annot"><span class="annottext">HsForAllTelescope GhcPs
</span><a href="#local-6989586621681798226"><span class="hs-identifier hs-var">tele</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1489"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HsForAllTelescope GhcPs
</span><a href="#local-6989586621681798226"><span class="hs-identifier hs-var">tele</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1490"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsForAllVis"><span class="hs-identifier hs-type">HsForAllVis</span></a></span><span class="hs-special">{</span><span> </span><span id="local-6989586621681798228"><span class="annot"><span class="annottext">[LHsTyVarBndr () GhcPs]
hsf_vis_bndrs :: [LHsTyVarBndr () GhcPs]
hsf_vis_bndrs :: forall pass. HsForAllTelescope pass -&gt; [LHsTyVarBndr () pass]
</span><a href="#local-6989586621681798228"><span class="hs-identifier hs-var hs-var">hsf_vis_bndrs</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr () GhcPs] -&gt; SrcSpan
forall flag. [LHsTyVarBndr flag GhcPs] -&gt; SrcSpan
</span><a href="GHC.Parser.PostProcess.Haddock.html#getLHsTyVarBndrsLoc"><span class="hs-identifier hs-var">getLHsTyVarBndrsLoc</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr () GhcPs]
</span><a href="#local-6989586621681798228"><span class="hs-identifier hs-var">hsf_vis_bndrs</span></a></span><span>
</span><span id="line-1491"></span><span>    </span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#HsForAllInvis"><span class="hs-identifier hs-type">HsForAllInvis</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621681798231"><span class="annot"><span class="annottext">[LHsTyVarBndr Specificity GhcPs]
hsf_invis_bndrs :: [LHsTyVarBndr Specificity GhcPs]
hsf_invis_bndrs :: forall pass.
HsForAllTelescope pass -&gt; [LHsTyVarBndr Specificity pass]
</span><a href="#local-6989586621681798231"><span class="hs-identifier hs-var hs-var">hsf_invis_bndrs</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr Specificity GhcPs] -&gt; SrcSpan
forall flag. [LHsTyVarBndr flag GhcPs] -&gt; SrcSpan
</span><a href="GHC.Parser.PostProcess.Haddock.html#getLHsTyVarBndrsLoc"><span class="hs-identifier hs-var">getLHsTyVarBndrsLoc</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr Specificity GhcPs]
</span><a href="#local-6989586621681798231"><span class="hs-identifier hs-var">hsf_invis_bndrs</span></a></span><span>
</span><span id="line-1492"></span><span>
</span><span id="line-1493"></span><span id="local-6989586621681796952"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#getLHsTyVarBndrsLoc"><span class="hs-identifier hs-type">getLHsTyVarBndrsLoc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Type.html#LHsTyVarBndr"><span class="hs-identifier hs-type">LHsTyVarBndr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681796952"><span class="hs-identifier hs-type">flag</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a></span></span><span>
</span><span id="line-1494"></span><span id="getLHsTyVarBndrsLoc"><span class="annot"><span class="annottext">getLHsTyVarBndrsLoc :: forall flag. [LHsTyVarBndr flag GhcPs] -&gt; SrcSpan
</span><a href="GHC.Parser.PostProcess.Haddock.html#getLHsTyVarBndrsLoc"><span class="hs-identifier hs-var hs-var">getLHsTyVarBndrsLoc</span></a></span></span><span> </span><span id="local-6989586621681798234"><span class="annot"><span class="annottext">[LHsTyVarBndr flag GhcPs]
</span><a href="#local-6989586621681798234"><span class="hs-identifier hs-var">bndrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SrcSpan -&gt; SrcSpan -&gt; SrcSpan) -&gt; SrcSpan -&gt; [SrcSpan] -&gt; SrcSpan
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../../base-4.18.3.0/src/Data.Foldable.html#foldr/Data.Foldable.html#foldr"><span class="hs-identifier hs-var">foldr</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan -&gt; SrcSpan -&gt; SrcSpan
</span><a href="GHC.Types.SrcLoc.html#combineSrcSpans"><span class="hs-identifier hs-var">combineSrcSpans</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpan
</span><a href="GHC.Types.SrcLoc.html#noSrcSpan"><span class="hs-identifier hs-var">noSrcSpan</span></a></span><span> </span><span class="annot"><span class="annottext">([SrcSpan] -&gt; SrcSpan) -&gt; [SrcSpan] -&gt; SrcSpan
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#%24/GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs) -&gt; SrcSpan)
-&gt; [GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)] -&gt; [SrcSpan]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs) -&gt; SrcSpan
forall a e. GenLocated (SrcSpanAnn' a) e -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#getLocA"><span class="hs-identifier hs-var">getLocA</span></a></span><span> </span><span class="annot"><span class="annottext">[LHsTyVarBndr flag GhcPs]
[GenLocated SrcSpanAnnA (HsTyVarBndr flag GhcPs)]
</span><a href="#local-6989586621681798234"><span class="hs-identifier hs-var">bndrs</span></a></span><span>
</span><span id="line-1495"></span><span>
</span><span id="line-1496"></span><span class="hs-comment">-- | The inverse of 'partitionBindsAndSigs' that merges partitioned items back</span><span>
</span><span id="line-1497"></span><span class="hs-comment">-- into a flat list. Elements are put back into the order in which they</span><span>
</span><span id="line-1498"></span><span class="hs-comment">-- appeared in the original program before partitioning, using BufPos to order</span><span>
</span><span id="line-1499"></span><span class="hs-comment">-- them.</span><span>
</span><span id="line-1500"></span><span class="hs-comment">--</span><span>
</span><span id="line-1501"></span><span class="hs-comment">-- Precondition (unchecked): the input lists are already sorted.</span><span>
</span><span id="line-1502"></span><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#flattenBindsAndSigs"><span class="hs-identifier hs-type">flattenBindsAndSigs</span></a></span><span>
</span><span id="line-1503"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LHsBinds"><span class="hs-identifier hs-type">LHsBinds</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Binds.html#LSig"><span class="hs-identifier hs-type">LSig</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LFamilyDecl"><span class="hs-identifier hs-type">LFamilyDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1504"></span><span>      </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LTyFamInstDecl"><span class="hs-identifier hs-type">LTyFamInstDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LDataFamInstDecl"><span class="hs-identifier hs-type">LDataFamInstDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LDocDecl"><span class="hs-identifier hs-type">LDocDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1505"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Language.Haskell.Syntax.Decls.html#LHsDecl"><span class="hs-identifier hs-type">LHsDecl</span></a></span><span> </span><span class="annot"><a href="GHC.Hs.Extension.html#GhcPs"><span class="hs-identifier hs-type">GhcPs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1506"></span><span id="flattenBindsAndSigs"><span class="annot"><span class="annottext">flattenBindsAndSigs :: (LHsBinds GhcPs, [LSig GhcPs], [LFamilyDecl GhcPs],
 [LTyFamDefltDecl GhcPs], [LDataFamInstDecl GhcPs],
 [LDocDecl GhcPs])
-&gt; [LHsDecl GhcPs]
</span><a href="GHC.Parser.PostProcess.Haddock.html#flattenBindsAndSigs"><span class="hs-identifier hs-var hs-var">flattenBindsAndSigs</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681798238"><span class="annot"><span class="annottext">LHsBinds GhcPs
</span><a href="#local-6989586621681798238"><span class="hs-identifier hs-var">all_bs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681798239"><span class="annot"><span class="annottext">[LSig GhcPs]
</span><a href="#local-6989586621681798239"><span class="hs-identifier hs-var">all_ss</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681798240"><span class="annot"><span class="annottext">[LFamilyDecl GhcPs]
</span><a href="#local-6989586621681798240"><span class="hs-identifier hs-var">all_ts</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681798241"><span class="annot"><span class="annottext">[LTyFamDefltDecl GhcPs]
</span><a href="#local-6989586621681798241"><span class="hs-identifier hs-var">all_tfis</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681798242"><span class="annot"><span class="annottext">[LDataFamInstDecl GhcPs]
</span><a href="#local-6989586621681798242"><span class="hs-identifier hs-var">all_dfis</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681798243"><span class="annot"><span class="annottext">[LDocDecl GhcPs]
</span><a href="#local-6989586621681798243"><span class="hs-identifier hs-var">all_docs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1507"></span><span>  </span><span class="hs-comment">-- 'cmpBufSpan' is safe here with the following assumptions:</span><span>
</span><span id="line-1508"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-1509"></span><span>  </span><span class="hs-comment">-- - 'LHsDecl' produced by 'decl_cls' in Parser.y always have a 'BufSpan'</span><span>
</span><span id="line-1510"></span><span>  </span><span class="hs-comment">-- - 'partitionBindsAndSigs' does not discard this 'BufSpan'</span><span>
</span><span id="line-1511"></span><span>  </span><span class="annot"><span class="annottext">(GenLocated SrcSpanAnnA (HsDecl GhcPs)
 -&gt; GenLocated SrcSpanAnnA (HsDecl GhcPs) -&gt; Ordering)
-&gt; [[GenLocated SrcSpanAnnA (HsDecl GhcPs)]]
-&gt; [GenLocated SrcSpanAnnA (HsDecl GhcPs)]
forall a. (a -&gt; a -&gt; Ordering) -&gt; [[a]] -&gt; [a]
</span><a href="GHC.Utils.Misc.html#mergeListsBy"><span class="hs-identifier hs-var">mergeListsBy</span></a></span><span> </span><span class="annot"><span class="annottext">GenLocated SrcSpanAnnA (HsDecl GhcPs)
-&gt; GenLocated SrcSpanAnnA (HsDecl GhcPs) -&gt; Ordering
forall a1 a2 a3.
GenLocated (SrcSpanAnn' a1) a2
-&gt; GenLocated (SrcSpanAnn' a3) a2 -&gt; Ordering
</span><a href="GHC.Parser.PostProcess.Haddock.html#cmpBufSpanA"><span class="hs-identifier hs-var">cmpBufSpanA</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-1512"></span><span>    </span><span class="annot"><span class="annottext">(HsBind GhcPs -&gt; HsDecl GhcPs)
-&gt; [GenLocated SrcSpanAnnA (HsBind GhcPs)]
-&gt; [GenLocated SrcSpanAnnA (HsDecl GhcPs)]
forall a b l. (a -&gt; b) -&gt; [GenLocated l a] -&gt; [GenLocated l b]
</span><a href="GHC.Parser.PostProcess.Haddock.html#mapLL"><span class="hs-identifier hs-var">mapLL</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681798246"><span class="annot"><span class="annottext">HsBind GhcPs
</span><a href="#local-6989586621681798246"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">XValD GhcPs -&gt; HsBind GhcPs -&gt; HsDecl GhcPs
forall p. XValD p -&gt; HsBind p -&gt; HsDecl p
</span><a href="Language.Haskell.Syntax.Decls.html#ValD"><span class="hs-identifier hs-var">ValD</span></a></span><span> </span><span class="annot"><span class="annottext">XValD GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">HsBind GhcPs
</span><a href="#local-6989586621681798246"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bag (GenLocated SrcSpanAnnA (HsBind GhcPs))
-&gt; [GenLocated SrcSpanAnnA (HsBind GhcPs)]
forall a. Bag a -&gt; [a]
</span><a href="GHC.Data.Bag.html#bagToList"><span class="hs-identifier hs-var">bagToList</span></a></span><span> </span><span class="annot"><span class="annottext">LHsBinds GhcPs
Bag (GenLocated SrcSpanAnnA (HsBind GhcPs))
</span><a href="#local-6989586621681798238"><span class="hs-identifier hs-var">all_bs</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1513"></span><span>    </span><span class="annot"><span class="annottext">(Sig GhcPs -&gt; HsDecl GhcPs)
-&gt; [GenLocated SrcSpanAnnA (Sig GhcPs)]
-&gt; [GenLocated SrcSpanAnnA (HsDecl GhcPs)]
forall a b l. (a -&gt; b) -&gt; [GenLocated l a] -&gt; [GenLocated l b]
</span><a href="GHC.Parser.PostProcess.Haddock.html#mapLL"><span class="hs-identifier hs-var">mapLL</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681798249"><span class="annot"><span class="annottext">Sig GhcPs
</span><a href="#local-6989586621681798249"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">XSigD GhcPs -&gt; Sig GhcPs -&gt; HsDecl GhcPs
forall p. XSigD p -&gt; Sig p -&gt; HsDecl p
</span><a href="Language.Haskell.Syntax.Decls.html#SigD"><span class="hs-identifier hs-var">SigD</span></a></span><span> </span><span class="annot"><span class="annottext">XSigD GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">Sig GhcPs
</span><a href="#local-6989586621681798249"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LSig GhcPs]
[GenLocated SrcSpanAnnA (Sig GhcPs)]
</span><a href="#local-6989586621681798239"><span class="hs-identifier hs-var">all_ss</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1514"></span><span>    </span><span class="annot"><span class="annottext">(FamilyDecl GhcPs -&gt; HsDecl GhcPs)
-&gt; [GenLocated SrcSpanAnnA (FamilyDecl GhcPs)]
-&gt; [GenLocated SrcSpanAnnA (HsDecl GhcPs)]
forall a b l. (a -&gt; b) -&gt; [GenLocated l a] -&gt; [GenLocated l b]
</span><a href="GHC.Parser.PostProcess.Haddock.html#mapLL"><span class="hs-identifier hs-var">mapLL</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681798250"><span class="annot"><span class="annottext">FamilyDecl GhcPs
</span><a href="#local-6989586621681798250"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">XTyClD GhcPs -&gt; TyClDecl GhcPs -&gt; HsDecl GhcPs
forall p. XTyClD p -&gt; TyClDecl p -&gt; HsDecl p
</span><a href="Language.Haskell.Syntax.Decls.html#TyClD"><span class="hs-identifier hs-var">TyClD</span></a></span><span> </span><span class="annot"><span class="annottext">XTyClD GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XFamDecl GhcPs -&gt; FamilyDecl GhcPs -&gt; TyClDecl GhcPs
forall pass. XFamDecl pass -&gt; FamilyDecl pass -&gt; TyClDecl pass
</span><a href="Language.Haskell.Syntax.Decls.html#FamDecl"><span class="hs-identifier hs-var">FamDecl</span></a></span><span> </span><span class="annot"><span class="annottext">XFamDecl GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">FamilyDecl GhcPs
</span><a href="#local-6989586621681798250"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LFamilyDecl GhcPs]
[GenLocated SrcSpanAnnA (FamilyDecl GhcPs)]
</span><a href="#local-6989586621681798240"><span class="hs-identifier hs-var">all_ts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1515"></span><span>    </span><span class="annot"><span class="annottext">(TyFamInstDecl GhcPs -&gt; HsDecl GhcPs)
-&gt; [GenLocated SrcSpanAnnA (TyFamInstDecl GhcPs)]
-&gt; [GenLocated SrcSpanAnnA (HsDecl GhcPs)]
forall a b l. (a -&gt; b) -&gt; [GenLocated l a] -&gt; [GenLocated l b]
</span><a href="GHC.Parser.PostProcess.Haddock.html#mapLL"><span class="hs-identifier hs-var">mapLL</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681798252"><span class="annot"><span class="annottext">TyFamInstDecl GhcPs
</span><a href="#local-6989586621681798252"><span class="hs-identifier hs-var">tfi</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">XInstD GhcPs -&gt; InstDecl GhcPs -&gt; HsDecl GhcPs
forall p. XInstD p -&gt; InstDecl p -&gt; HsDecl p
</span><a href="Language.Haskell.Syntax.Decls.html#InstD"><span class="hs-identifier hs-var">InstD</span></a></span><span> </span><span class="annot"><span class="annottext">XInstD GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XTyFamInstD GhcPs -&gt; TyFamInstDecl GhcPs -&gt; InstDecl GhcPs
forall pass.
XTyFamInstD pass -&gt; TyFamInstDecl pass -&gt; InstDecl pass
</span><a href="Language.Haskell.Syntax.Decls.html#TyFamInstD"><span class="hs-identifier hs-var">TyFamInstD</span></a></span><span> </span><span class="annot"><span class="annottext">XTyFamInstD GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">TyFamInstDecl GhcPs
</span><a href="#local-6989586621681798252"><span class="hs-identifier hs-var">tfi</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LTyFamDefltDecl GhcPs]
[GenLocated SrcSpanAnnA (TyFamInstDecl GhcPs)]
</span><a href="#local-6989586621681798241"><span class="hs-identifier hs-var">all_tfis</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1516"></span><span>    </span><span class="annot"><span class="annottext">(DataFamInstDecl GhcPs -&gt; HsDecl GhcPs)
-&gt; [GenLocated SrcSpanAnnA (DataFamInstDecl GhcPs)]
-&gt; [GenLocated SrcSpanAnnA (HsDecl GhcPs)]
forall a b l. (a -&gt; b) -&gt; [GenLocated l a] -&gt; [GenLocated l b]
</span><a href="GHC.Parser.PostProcess.Haddock.html#mapLL"><span class="hs-identifier hs-var">mapLL</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681798254"><span class="annot"><span class="annottext">DataFamInstDecl GhcPs
</span><a href="#local-6989586621681798254"><span class="hs-identifier hs-var">dfi</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">XInstD GhcPs -&gt; InstDecl GhcPs -&gt; HsDecl GhcPs
forall p. XInstD p -&gt; InstDecl p -&gt; HsDecl p
</span><a href="Language.Haskell.Syntax.Decls.html#InstD"><span class="hs-identifier hs-var">InstD</span></a></span><span> </span><span class="annot"><span class="annottext">XInstD GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XDataFamInstD GhcPs -&gt; DataFamInstDecl GhcPs -&gt; InstDecl GhcPs
forall pass.
XDataFamInstD pass -&gt; DataFamInstDecl pass -&gt; InstDecl pass
</span><a href="Language.Haskell.Syntax.Decls.html#DataFamInstD"><span class="hs-identifier hs-var">DataFamInstD</span></a></span><span> </span><span class="annot"><span class="annottext">XDataFamInstD GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">DataFamInstDecl GhcPs
</span><a href="#local-6989586621681798254"><span class="hs-identifier hs-var">dfi</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LDataFamInstDecl GhcPs]
[GenLocated SrcSpanAnnA (DataFamInstDecl GhcPs)]
</span><a href="#local-6989586621681798242"><span class="hs-identifier hs-var">all_dfis</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1517"></span><span>    </span><span class="annot"><span class="annottext">(DocDecl GhcPs -&gt; HsDecl GhcPs)
-&gt; [GenLocated SrcSpanAnnA (DocDecl GhcPs)]
-&gt; [GenLocated SrcSpanAnnA (HsDecl GhcPs)]
forall a b l. (a -&gt; b) -&gt; [GenLocated l a] -&gt; [GenLocated l b]
</span><a href="GHC.Parser.PostProcess.Haddock.html#mapLL"><span class="hs-identifier hs-var">mapLL</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681798255"><span class="annot"><span class="annottext">DocDecl GhcPs
</span><a href="#local-6989586621681798255"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">XDocD GhcPs -&gt; DocDecl GhcPs -&gt; HsDecl GhcPs
forall p. XDocD p -&gt; DocDecl p -&gt; HsDecl p
</span><a href="Language.Haskell.Syntax.Decls.html#DocD"><span class="hs-identifier hs-var">DocD</span></a></span><span> </span><span class="annot"><span class="annottext">XDocD GhcPs
NoExtField
</span><a href="Language.Haskell.Syntax.Extension.html#noExtField"><span class="hs-identifier hs-var">noExtField</span></a></span><span> </span><span class="annot"><span class="annottext">DocDecl GhcPs
</span><a href="#local-6989586621681798255"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LDocDecl GhcPs]
[GenLocated SrcSpanAnnA (DocDecl GhcPs)]
</span><a href="#local-6989586621681798243"><span class="hs-identifier hs-var">all_docs</span></a></span><span>
</span><span id="line-1518"></span><span>  </span><span class="hs-special">]</span><span>
</span><span id="line-1519"></span><span>
</span><span id="line-1520"></span><span id="local-6989586621681797067"><span id="local-6989586621681797068"><span id="local-6989586621681797069"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#cmpBufSpanA"><span class="hs-identifier hs-type">cmpBufSpanA</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#GenLocated"><span class="hs-identifier hs-type">GenLocated</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnn%27"><span class="hs-identifier hs-type">SrcSpanAnn'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681797067"><span class="hs-identifier hs-type">a1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681797068"><span class="hs-identifier hs-type">a2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="GHC.Types.SrcLoc.html#GenLocated"><span class="hs-identifier hs-type">GenLocated</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Parser.Annotation.html#SrcSpanAnn%27"><span class="hs-identifier hs-type">SrcSpanAnn'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681797069"><span class="hs-identifier hs-type">a3</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681797068"><span class="hs-identifier hs-type">a2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ordering</span></span></span></span></span><span>
</span><span id="line-1521"></span><span id="cmpBufSpanA"><span class="annot"><span class="annottext">cmpBufSpanA :: forall a1 a2 a3.
GenLocated (SrcSpanAnn' a1) a2
-&gt; GenLocated (SrcSpanAnn' a3) a2 -&gt; Ordering
</span><a href="GHC.Parser.PostProcess.Haddock.html#cmpBufSpanA"><span class="hs-identifier hs-var hs-var">cmpBufSpanA</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681798257"><span class="annot"><span class="annottext">SrcSpanAnn' a1
</span><a href="#local-6989586621681798257"><span class="hs-identifier hs-var">la</span></a></span></span><span> </span><span id="local-6989586621681798258"><span class="annot"><span class="annottext">a2
</span><a href="#local-6989586621681798258"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-type">L</span></a></span><span> </span><span id="local-6989586621681798259"><span class="annot"><span class="annottext">SrcSpanAnn' a3
</span><a href="#local-6989586621681798259"><span class="hs-identifier hs-var">lb</span></a></span></span><span> </span><span id="local-6989586621681798260"><span class="annot"><span class="annottext">a2
</span><a href="#local-6989586621681798260"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Located a2 -&gt; Located a2 -&gt; Ordering
forall a. (() :: Constraint) =&gt; Located a -&gt; Located a -&gt; Ordering
</span><a href="GHC.Types.SrcLoc.html#cmpBufSpan"><span class="hs-identifier hs-var">cmpBufSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; a2 -&gt; Located a2
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnn' a1 -&gt; SrcSpan
forall a. SrcSpanAnn' a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnn' a1
</span><a href="#local-6989586621681798257"><span class="hs-identifier hs-var">la</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a2
</span><a href="#local-6989586621681798258"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpan -&gt; a2 -&gt; Located a2
forall l e. l -&gt; e -&gt; GenLocated l e
</span><a href="GHC.Types.SrcLoc.html#L"><span class="hs-identifier hs-var">L</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcSpanAnn' a3 -&gt; SrcSpan
forall a. SrcSpanAnn' a -&gt; SrcSpan
</span><a href="GHC.Parser.Annotation.html#locA"><span class="hs-identifier hs-var">locA</span></a></span><span> </span><span class="annot"><span class="annottext">SrcSpanAnn' a3
</span><a href="#local-6989586621681798259"><span class="hs-identifier hs-var">lb</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a2
</span><a href="#local-6989586621681798260"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1522"></span><span>
</span><span id="line-1523"></span><span class="annot"><span class="hs-comment">{- *********************************************************************
*                                                                      *
*                   General purpose utilities                          *
*                                                                      *
********************************************************************* -}</span></span><span>
</span><span id="line-1528"></span><span>
</span><span id="line-1529"></span><span class="hs-comment">-- Cons an element to a list, if exists.</span><span>
</span><span id="line-1530"></span><span id="local-6989586621681796939"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#mcons"><span class="hs-identifier hs-type">mcons</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../../base-4.18.3.0/src/GHC.Maybe.html#Maybe/GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681796939"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621681796939"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621681796939"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-1531"></span><span id="mcons"><span class="annot"><span class="annottext">mcons :: forall a. Maybe a -&gt; [a] -&gt; [a]
</span><a href="GHC.Parser.PostProcess.Haddock.html#mcons"><span class="hs-identifier hs-var hs-var">mcons</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([a] -&gt; [a]) -&gt; (a -&gt; [a] -&gt; [a]) -&gt; Maybe a -&gt; [a] -&gt; [a]
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../../base-4.18.3.0/src/Data.Maybe.html#maybe/Data.Maybe.html#maybe"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; [a]
forall a. a -&gt; a
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#id/GHC.Base.html#id"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">:</span><span class="hs-special">)</span><span>
</span><span id="line-1532"></span><span>
</span><span id="line-1533"></span><span class="hs-comment">-- Map a function over a list of located items.</span><span>
</span><span id="line-1534"></span><span id="local-6989586621681797071"><span id="local-6989586621681797072"><span id="local-6989586621681797073"><span class="annot"><a href="GHC.Parser.PostProcess.Haddock.html#mapLL"><span class="hs-identifier hs-type">mapLL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681797071"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681797072"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.SrcLoc.html#GenLocated"><span class="hs-identifier hs-type">GenLocated</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681797073"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681797071"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="GHC.Types.SrcLoc.html#GenLocated"><span class="hs-identifier hs-type">GenLocated</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681797073"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681797072"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span></span></span></span><span>
</span><span id="line-1535"></span><span id="mapLL"><span class="annot"><span class="annottext">mapLL :: forall a b l. (a -&gt; b) -&gt; [GenLocated l a] -&gt; [GenLocated l b]
</span><a href="GHC.Parser.PostProcess.Haddock.html#mapLL"><span class="hs-identifier hs-var hs-var">mapLL</span></a></span></span><span> </span><span id="local-6989586621681798264"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621681798264"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(GenLocated l a -&gt; GenLocated l b)
-&gt; [GenLocated l a] -&gt; [GenLocated l b]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#map/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; GenLocated l a -&gt; GenLocated l b
forall a b. (a -&gt; b) -&gt; GenLocated l a -&gt; GenLocated l b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../../base-4.18.3.0/src/GHC.Base.html#fmap/GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621681798264"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1536"></span><span>
</span><span id="line-1537"></span><span class="hs-comment">{- Note [Old solution: Haddock in the grammar]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In the past, Haddock comments were incorporated into the grammar (Parser.y).
This led to excessive complexity and duplication.

For example, here's the grammar production for types without documentation:

  type : btype
       | btype '-&gt;' ctype

To support Haddock, we had to also maintain an additional grammar production
for types with documentation on function arguments and function result:

  typedoc : btype
          | btype docprev
          | docnext btype
          | btype '-&gt;'     ctypedoc
          | btype docprev '-&gt;' ctypedoc
          | docnext btype '-&gt;' ctypedoc

Sometimes handling documentation comments during parsing led to bugs (#17561),
and sometimes it simply made it hard to modify and extend the grammar.

Another issue was that sometimes Haddock would fail to parse code
that GHC could parse successfully:

  class BadIndent where
    f :: a -&gt; Int
  -- ^ comment
    g :: a -&gt; Int

This declaration was accepted by ghc but rejected by ghc -haddock.
-}</span><span>
</span><span id="line-1570"></span><span>
</span><span id="line-1571"></span><span class="hs-comment">{- Note [Register keyword location]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
At the moment, 'addHaddock' erroneously associates some comments with
constructs that are separated by a keyword. For example:

    data Foo -- | Comment for MkFoo
      where MkFoo :: Foo

We could use EPA (exactprint annotations) to fix this, but not without
modification. For example, EpaLocation contains RealSrcSpan but not BufSpan.
Also, the fix would be more straightforward after #19623.

For examples, see tests/haddock/should_compile_flag_haddock/T17544_kw.hs
-}</span><span>
</span><span id="line-1585"></span></pre></body></html>