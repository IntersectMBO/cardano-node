<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>GHC.Driver.Plugins</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ghc-9.6.7: The GHC API</span><ul class="links" id="page-menu"><li><a href="src/GHC.Driver.Plugins.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">GHC.Driver.Plugins</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Plugins</a></li><li><a href="#g:2">External plugins</a><ul><li><a href="#g:3">Recompilation checking</a></li></ul></li><li><a href="#g:4">Plugin types</a><ul><li><a href="#g:5">Frontend plugins</a></li><li><a href="#g:6">Core plugins</a></li><li><a href="#g:7">Typechecker plugins</a></li><li><a href="#g:8">Source plugins</a></li><li><a href="#g:9">Defaulting plugins</a></li><li><a href="#g:10">Hole fit plugins</a></li></ul></li><li><a href="#g:11">Internal</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Definitions for writing <em>plugins</em> for GHC. Plugins can hook into
 several areas of the compiler. See the <code><a href="GHC-Driver-Plugins.html#t:Plugin" title="GHC.Driver.Plugins">Plugin</a></code> type. These plugins
 include type-checker plugins, source plugins, and core-to-core plugins.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Plugins">Plugins</a> = <a href="#v:Plugins">Plugins</a> {<ul class="subs"><li><a href="#v:staticPlugins">staticPlugins</a> :: ![<a href="GHC-Driver-Plugins.html#t:StaticPlugin" title="GHC.Driver.Plugins">StaticPlugin</a>]</li><li><a href="#v:externalPlugins">externalPlugins</a> :: ![<a href="GHC-Driver-Plugins.html#t:ExternalPlugin" title="GHC.Driver.Plugins">ExternalPlugin</a>]</li><li><a href="#v:loadedPlugins">loadedPlugins</a> :: ![<a href="GHC-Driver-Plugins.html#t:LoadedPlugin" title="GHC.Driver.Plugins">LoadedPlugin</a>]</li><li><a href="#v:loadedPluginDeps">loadedPluginDeps</a> :: !([<a href="GHC-Linker-Types.html#t:Linkable" title="GHC.Linker.Types">Linkable</a>], <a href="GHC-Linker-Types.html#t:PkgsLoaded" title="GHC.Linker.Types">PkgsLoaded</a>)</li></ul>}</li><li class="src short"><a href="#v:emptyPlugins">emptyPlugins</a> :: <a href="GHC-Driver-Plugins.html#t:Plugins" title="GHC.Driver.Plugins">Plugins</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Plugin">Plugin</a> = <a href="#v:Plugin">Plugin</a> {<ul class="subs"><li><a href="#v:installCoreToDos">installCoreToDos</a> :: <a href="GHC-Driver-Plugins.html#t:CorePlugin" title="GHC.Driver.Plugins">CorePlugin</a></li><li><a href="#v:tcPlugin">tcPlugin</a> :: <a href="GHC-Driver-Plugins.html#t:TcPlugin" title="GHC.Driver.Plugins">TcPlugin</a></li><li><a href="#v:defaultingPlugin">defaultingPlugin</a> :: <a href="GHC-Driver-Plugins.html#t:DefaultingPlugin" title="GHC.Driver.Plugins">DefaultingPlugin</a></li><li><a href="#v:holeFitPlugin">holeFitPlugin</a> :: HoleFitPlugin</li><li><a href="#v:driverPlugin">driverPlugin</a> :: [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>] -&gt; <a href="GHC-Driver-Env-Types.html#t:HscEnv" title="GHC.Driver.Env.Types">HscEnv</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> <a href="GHC-Driver-Env-Types.html#t:HscEnv" title="GHC.Driver.Env.Types">HscEnv</a></li><li><a href="#v:pluginRecompile">pluginRecompile</a> :: [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>] -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> <a href="GHC-Driver-Plugins.html#t:PluginRecompile" title="GHC.Driver.Plugins">PluginRecompile</a></li><li><a href="#v:parsedResultAction">parsedResultAction</a> :: [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>] -&gt; <a href="GHC-Unit-Module-ModSummary.html#t:ModSummary" title="GHC.Unit.Module.ModSummary">ModSummary</a> -&gt; <a href="GHC-Driver-Plugins.html#t:ParsedResult" title="GHC.Driver.Plugins">ParsedResult</a> -&gt; <a href="GHC-Driver-Env-Types.html#t:Hsc" title="GHC.Driver.Env.Types">Hsc</a> <a href="GHC-Driver-Plugins.html#t:ParsedResult" title="GHC.Driver.Plugins">ParsedResult</a></li><li><a href="#v:renamedResultAction">renamedResultAction</a> :: [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>] -&gt; <a href="GHC-Tc-Types.html#t:TcGblEnv" title="GHC.Tc.Types">TcGblEnv</a> -&gt; <a href="Language-Haskell-Syntax-Decls.html#t:HsGroup" title="Language.Haskell.Syntax.Decls">HsGroup</a> <a href="GHC-Hs-Extension.html#t:GhcRn" title="GHC.Hs.Extension">GhcRn</a> -&gt; <a href="GHC-Tc-Types.html#t:TcM" title="GHC.Tc.Types">TcM</a> (<a href="GHC-Tc-Types.html#t:TcGblEnv" title="GHC.Tc.Types">TcGblEnv</a>, <a href="Language-Haskell-Syntax-Decls.html#t:HsGroup" title="Language.Haskell.Syntax.Decls">HsGroup</a> <a href="GHC-Hs-Extension.html#t:GhcRn" title="GHC.Hs.Extension">GhcRn</a>)</li><li><a href="#v:typeCheckResultAction">typeCheckResultAction</a> :: [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>] -&gt; <a href="GHC-Unit-Module-ModSummary.html#t:ModSummary" title="GHC.Unit.Module.ModSummary">ModSummary</a> -&gt; <a href="GHC-Tc-Types.html#t:TcGblEnv" title="GHC.Tc.Types">TcGblEnv</a> -&gt; <a href="GHC-Tc-Types.html#t:TcM" title="GHC.Tc.Types">TcM</a> <a href="GHC-Tc-Types.html#t:TcGblEnv" title="GHC.Tc.Types">TcGblEnv</a></li><li><a href="#v:spliceRunAction">spliceRunAction</a> :: [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>] -&gt; <a href="Language-Haskell-Syntax-Expr.html#t:LHsExpr" title="Language.Haskell.Syntax.Expr">LHsExpr</a> <a href="GHC-Hs-Extension.html#t:GhcTc" title="GHC.Hs.Extension">GhcTc</a> -&gt; <a href="GHC-Tc-Types.html#t:TcM" title="GHC.Tc.Types">TcM</a> (<a href="Language-Haskell-Syntax-Expr.html#t:LHsExpr" title="Language.Haskell.Syntax.Expr">LHsExpr</a> <a href="GHC-Hs-Extension.html#t:GhcTc" title="GHC.Hs.Extension">GhcTc</a>)</li><li><a href="#v:interfaceLoadAction">interfaceLoadAction</a> :: <span class="keyword">forall</span> lcl. [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>] -&gt; <a href="GHC-Unit-Module-ModIface.html#t:ModIface" title="GHC.Unit.Module.ModIface">ModIface</a> -&gt; <a href="GHC-Tc-Types.html#t:IfM" title="GHC.Tc.Types">IfM</a> lcl <a href="GHC-Unit-Module-ModIface.html#t:ModIface" title="GHC.Unit.Module.ModIface">ModIface</a></li></ul>}</li><li class="src short"><a href="#v:defaultPlugin">defaultPlugin</a> :: <a href="GHC-Driver-Plugins.html#t:Plugin" title="GHC.Driver.Plugins">Plugin</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:CommandLineOption">CommandLineOption</a> = <a href="GHC-Prelude-Basic.html#t:String" title="GHC.Prelude.Basic">String</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:PsMessages">PsMessages</a> = <a href="#v:PsMessages">PsMessages</a> {<ul class="subs"><li><a href="#v:psWarnings">psWarnings</a> :: <a href="GHC-Types-Error.html#t:Messages" title="GHC.Types.Error">Messages</a> <a href="GHC-Parser-Errors-Types.html#t:PsWarning" title="GHC.Parser.Errors.Types">PsWarning</a></li><li><a href="#v:psErrors">psErrors</a> :: <a href="GHC-Types-Error.html#t:Messages" title="GHC.Types.Error">Messages</a> <a href="GHC-Parser-Errors-Types.html#t:PsError" title="GHC.Parser.Errors.Types">PsError</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:ParsedResult">ParsedResult</a> = <a href="#v:ParsedResult">ParsedResult</a> {<ul class="subs"><li><a href="#v:parsedResultModule">parsedResultModule</a> :: <a href="GHC-Hs.html#t:HsParsedModule" title="GHC.Hs">HsParsedModule</a></li><li><a href="#v:parsedResultMessages">parsedResultMessages</a> :: <a href="GHC-Driver-Plugins.html#t:PsMessages" title="GHC.Driver.Plugins">PsMessages</a></li></ul>}</li><li class="src short"><a href="#v:loadExternalPlugins">loadExternalPlugins</a> :: [<a href="GHC-Driver-Plugins-External.html#t:ExternalPluginSpec" title="GHC.Driver.Plugins.External">ExternalPluginSpec</a>] -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> [<a href="GHC-Driver-Plugins.html#t:ExternalPlugin" title="GHC.Driver.Plugins">ExternalPlugin</a>]</li><li class="src short"><a href="#v:purePlugin">purePlugin</a> :: [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>] -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> <a href="GHC-Driver-Plugins.html#t:PluginRecompile" title="GHC.Driver.Plugins">PluginRecompile</a></li><li class="src short"><a href="#v:impurePlugin">impurePlugin</a> :: [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>] -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> <a href="GHC-Driver-Plugins.html#t:PluginRecompile" title="GHC.Driver.Plugins">PluginRecompile</a></li><li class="src short"><a href="#v:flagRecompile">flagRecompile</a> :: [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>] -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> <a href="GHC-Driver-Plugins.html#t:PluginRecompile" title="GHC.Driver.Plugins">PluginRecompile</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:PluginRecompile">PluginRecompile</a><ul class="subs"><li>= <a href="#v:ForceRecompile">ForceRecompile</a></li><li>| <a href="#v:NoForceRecompile">NoForceRecompile</a></li><li>| <a href="#v:MaybeRecompile">MaybeRecompile</a> <a href="GHC-Utils-Fingerprint.html#t:Fingerprint" title="GHC.Utils.Fingerprint">Fingerprint</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:FrontendPlugin">FrontendPlugin</a> = <a href="#v:FrontendPlugin">FrontendPlugin</a> {<ul class="subs"><li><a href="#v:frontend">frontend</a> :: <a href="GHC-Driver-Plugins.html#t:FrontendPluginAction" title="GHC.Driver.Plugins">FrontendPluginAction</a></li></ul>}</li><li class="src short"><a href="#v:defaultFrontendPlugin">defaultFrontendPlugin</a> :: <a href="GHC-Driver-Plugins.html#t:FrontendPlugin" title="GHC.Driver.Plugins">FrontendPlugin</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:FrontendPluginAction">FrontendPluginAction</a> = [<a href="GHC-Prelude-Basic.html#t:String" title="GHC.Prelude.Basic">String</a>] -&gt; [(<a href="GHC-Prelude-Basic.html#t:String" title="GHC.Prelude.Basic">String</a>, <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Driver-Phases.html#t:Phase" title="GHC.Driver.Phases">Phase</a>)] -&gt; <a href="GHC-Driver-Monad.html#t:Ghc" title="GHC.Driver.Monad">Ghc</a> ()</li><li class="src short"><span class="keyword">type</span> <a href="#t:CorePlugin">CorePlugin</a> = [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>] -&gt; [<a href="GHC-Core-Opt-Pipeline-Types.html#t:CoreToDo" title="GHC.Core.Opt.Pipeline.Types">CoreToDo</a>] -&gt; <a href="GHC-Core-Opt-Monad.html#t:CoreM" title="GHC.Core.Opt.Monad">CoreM</a> [<a href="GHC-Core-Opt-Pipeline-Types.html#t:CoreToDo" title="GHC.Core.Opt.Pipeline.Types">CoreToDo</a>]</li><li class="src short"><span class="keyword">type</span> <a href="#t:TcPlugin">TcPlugin</a> = [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>] -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Tc-Types.html#t:TcPlugin" title="GHC.Tc.Types">TcPlugin</a></li><li class="src short"><a href="#v:keepRenamedSource">keepRenamedSource</a> :: [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>] -&gt; <a href="GHC-Tc-Types.html#t:TcGblEnv" title="GHC.Tc.Types">TcGblEnv</a> -&gt; <a href="Language-Haskell-Syntax-Decls.html#t:HsGroup" title="Language.Haskell.Syntax.Decls">HsGroup</a> <a href="GHC-Hs-Extension.html#t:GhcRn" title="GHC.Hs.Extension">GhcRn</a> -&gt; <a href="GHC-Tc-Types.html#t:TcM" title="GHC.Tc.Types">TcM</a> (<a href="GHC-Tc-Types.html#t:TcGblEnv" title="GHC.Tc.Types">TcGblEnv</a>, <a href="Language-Haskell-Syntax-Decls.html#t:HsGroup" title="Language.Haskell.Syntax.Decls">HsGroup</a> <a href="GHC-Hs-Extension.html#t:GhcRn" title="GHC.Hs.Extension">GhcRn</a>)</li><li class="src short"><span class="keyword">type</span> <a href="#t:DefaultingPlugin">DefaultingPlugin</a> = [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>] -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Tc-Types.html#t:DefaultingPlugin" title="GHC.Tc.Types">DefaultingPlugin</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:HoleFitPluginR">HoleFitPluginR</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:PluginWithArgs">PluginWithArgs</a> = <a href="#v:PluginWithArgs">PluginWithArgs</a> {<ul class="subs"><li><a href="#v:paPlugin">paPlugin</a> :: <a href="GHC-Driver-Plugins.html#t:Plugin" title="GHC.Driver.Plugins">Plugin</a></li><li><a href="#v:paArguments">paArguments</a> :: [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>]</li></ul>}</li><li class="src short"><a href="#v:pluginsWithArgs">pluginsWithArgs</a> :: <a href="GHC-Driver-Plugins.html#t:Plugins" title="GHC.Driver.Plugins">Plugins</a> -&gt; [<a href="GHC-Driver-Plugins.html#t:PluginWithArgs" title="GHC.Driver.Plugins">PluginWithArgs</a>]</li><li class="src short"><a href="#v:pluginRecompile-39-">pluginRecompile'</a> :: <a href="GHC-Driver-Plugins.html#t:PluginWithArgs" title="GHC.Driver.Plugins">PluginWithArgs</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> <a href="GHC-Driver-Plugins.html#t:PluginRecompile" title="GHC.Driver.Plugins">PluginRecompile</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:LoadedPlugin">LoadedPlugin</a> = <a href="#v:LoadedPlugin">LoadedPlugin</a> {<ul class="subs"><li><a href="#v:lpPlugin">lpPlugin</a> :: <a href="GHC-Driver-Plugins.html#t:PluginWithArgs" title="GHC.Driver.Plugins">PluginWithArgs</a></li><li><a href="#v:lpModule">lpModule</a> :: <a href="GHC-Unit-Module-ModIface.html#t:ModIface" title="GHC.Unit.Module.ModIface">ModIface</a></li></ul>}</li><li class="src short"><a href="#v:lpModuleName">lpModuleName</a> :: <a href="GHC-Driver-Plugins.html#t:LoadedPlugin" title="GHC.Driver.Plugins">LoadedPlugin</a> -&gt; <a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:StaticPlugin">StaticPlugin</a> = <a href="#v:StaticPlugin">StaticPlugin</a> {<ul class="subs"><li><a href="#v:spPlugin">spPlugin</a> :: <a href="GHC-Driver-Plugins.html#t:PluginWithArgs" title="GHC.Driver.Plugins">PluginWithArgs</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:ExternalPlugin">ExternalPlugin</a> = <a href="#v:ExternalPlugin">ExternalPlugin</a> {<ul class="subs"><li><a href="#v:epPlugin">epPlugin</a> :: <a href="GHC-Driver-Plugins.html#t:PluginWithArgs" title="GHC.Driver.Plugins">PluginWithArgs</a></li><li><a href="#v:epUnit">epUnit</a> :: <a href="GHC-Prelude-Basic.html#t:String" title="GHC.Prelude.Basic">String</a></li><li><a href="#v:epModule">epModule</a> :: <a href="GHC-Prelude-Basic.html#t:String" title="GHC.Prelude.Basic">String</a></li></ul>}</li><li class="src short"><a href="#v:mapPlugins">mapPlugins</a> :: <a href="GHC-Driver-Plugins.html#t:Plugins" title="GHC.Driver.Plugins">Plugins</a> -&gt; (<a href="GHC-Driver-Plugins.html#t:Plugin" title="GHC.Driver.Plugins">Plugin</a> -&gt; [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>] -&gt; a) -&gt; [a]</li><li class="src short"><a href="#v:withPlugins">withPlugins</a> :: <a href="GHC-Prelude-Basic.html#t:Monad" title="GHC.Prelude.Basic">Monad</a> m =&gt; <a href="GHC-Driver-Plugins.html#t:Plugins" title="GHC.Driver.Plugins">Plugins</a> -&gt; PluginOperation m a -&gt; a -&gt; m a</li><li class="src short"><a href="#v:withPlugins_">withPlugins_</a> :: <a href="GHC-Prelude-Basic.html#t:Monad" title="GHC.Prelude.Basic">Monad</a> m =&gt; <a href="GHC-Driver-Plugins.html#t:Plugins" title="GHC.Driver.Plugins">Plugins</a> -&gt; ConstPluginOperation m a -&gt; a -&gt; m ()</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Plugins</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Plugins" class="def">Plugins</a> <a href="src/GHC.Driver.Plugins.html#Plugins" class="link">Source</a> <a href="#t:Plugins" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Plugins" class="def">Plugins</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:staticPlugins" class="def">staticPlugins</a> :: ![<a href="GHC-Driver-Plugins.html#t:StaticPlugin" title="GHC.Driver.Plugins">StaticPlugin</a>]</dfn><div class="doc"><p>Static plugins which do not need dynamic loading. These plugins are
 intended to be added by GHC API users directly to this list.</p><p>To add dynamically loaded plugins through the GHC API see
 <code>addPluginModuleName</code> instead.</p></div></li><li><dfn class="src"><a id="v:externalPlugins" class="def">externalPlugins</a> :: ![<a href="GHC-Driver-Plugins.html#t:ExternalPlugin" title="GHC.Driver.Plugins">ExternalPlugin</a>]</dfn><div class="doc"><p>External plugins loaded directly from libraries without loading
 module interfaces.</p></div></li><li><dfn class="src"><a id="v:loadedPlugins" class="def">loadedPlugins</a> :: ![<a href="GHC-Driver-Plugins.html#t:LoadedPlugin" title="GHC.Driver.Plugins">LoadedPlugin</a>]</dfn><div class="doc"><p>Plugins dynamically loaded after processing arguments. What
 will be loaded here is directed by DynFlags.pluginModNames.
 Arguments are loaded from DynFlags.pluginModNameOpts.</p><p>The purpose of this field is to cache the plugins so they
 don't have to be loaded each time they are needed.  See
 <code><a href="GHC-Runtime-Loader.html#v:initializePlugins" title="GHC.Runtime.Loader">initializePlugins</a></code>.</p></div></li><li><dfn class="src"><a id="v:loadedPluginDeps" class="def">loadedPluginDeps</a> :: !([<a href="GHC-Linker-Types.html#t:Linkable" title="GHC.Linker.Types">Linkable</a>], <a href="GHC-Linker-Types.html#t:PkgsLoaded" title="GHC.Linker.Types">PkgsLoaded</a>)</dfn><div class="doc"><p>The object files required by the loaded plugins
 See Note [Plugin dependencies]</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:emptyPlugins" class="def">emptyPlugins</a> :: <a href="GHC-Driver-Plugins.html#t:Plugins" title="GHC.Driver.Plugins">Plugins</a> <a href="src/GHC.Driver.Plugins.html#emptyPlugins" class="link">Source</a> <a href="#v:emptyPlugins" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Plugin" class="def">Plugin</a> <a href="src/GHC.Driver.Plugins.html#Plugin" class="link">Source</a> <a href="#t:Plugin" class="selflink">#</a></p><div class="doc"><p><code><a href="GHC-Driver-Plugins.html#t:Plugin" title="GHC.Driver.Plugins">Plugin</a></code> is the compiler plugin data type. Try to avoid
 constructing one of these directly, and just modify some fields of
 <code><a href="GHC-Driver-Plugins.html#v:defaultPlugin" title="GHC.Driver.Plugins">defaultPlugin</a></code> instead: this is to try and preserve source-code
 compatibility when we add fields to this.</p><p>Nonetheless, this API is preliminary and highly likely to change in
 the future.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Plugin" class="def">Plugin</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:installCoreToDos" class="def">installCoreToDos</a> :: <a href="GHC-Driver-Plugins.html#t:CorePlugin" title="GHC.Driver.Plugins">CorePlugin</a></dfn><div class="doc"><p>Modify the Core pipeline that will be used for compilation.
 This is called as the Core pipeline is built for every module
 being compiled, and plugins get the opportunity to modify the
 pipeline in a nondeterministic order.</p></div></li><li><dfn class="src"><a id="v:tcPlugin" class="def">tcPlugin</a> :: <a href="GHC-Driver-Plugins.html#t:TcPlugin" title="GHC.Driver.Plugins">TcPlugin</a></dfn><div class="doc"><p>An optional typechecker plugin, which may modify the
 behaviour of the constraint solver.</p></div></li><li><dfn class="src"><a id="v:defaultingPlugin" class="def">defaultingPlugin</a> :: <a href="GHC-Driver-Plugins.html#t:DefaultingPlugin" title="GHC.Driver.Plugins">DefaultingPlugin</a></dfn><div class="doc"><p>An optional defaulting plugin, which may specify the
 additional type-defaulting rules.</p></div></li><li><dfn class="src"><a id="v:holeFitPlugin" class="def">holeFitPlugin</a> :: HoleFitPlugin</dfn><div class="doc"><p>An optional plugin to handle hole fits, which may re-order
   or change the list of valid hole fits and refinement hole fits.</p></div></li><li><dfn class="src"><a id="v:driverPlugin" class="def">driverPlugin</a> :: [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>] -&gt; <a href="GHC-Driver-Env-Types.html#t:HscEnv" title="GHC.Driver.Env.Types">HscEnv</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> <a href="GHC-Driver-Env-Types.html#t:HscEnv" title="GHC.Driver.Env.Types">HscEnv</a></dfn><div class="doc"><p>An optional plugin to update <code><a href="GHC-Driver-Env-Types.html#t:HscEnv" title="GHC.Driver.Env.Types">HscEnv</a></code>, right after plugin loading. This
 can be used to register hooks or tweak any field of <code>DynFlags</code> before
 doing actual work on a module.</p><p><em>Since: ghc-8.10.1</em></p></div></li><li><dfn class="src"><a id="v:pluginRecompile" class="def">pluginRecompile</a> :: [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>] -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> <a href="GHC-Driver-Plugins.html#t:PluginRecompile" title="GHC.Driver.Plugins">PluginRecompile</a></dfn><div class="doc"><p>Specify how the plugin should affect recompilation.</p></div></li><li><dfn class="src"><a id="v:parsedResultAction" class="def">parsedResultAction</a> :: [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>] -&gt; <a href="GHC-Unit-Module-ModSummary.html#t:ModSummary" title="GHC.Unit.Module.ModSummary">ModSummary</a> -&gt; <a href="GHC-Driver-Plugins.html#t:ParsedResult" title="GHC.Driver.Plugins">ParsedResult</a> -&gt; <a href="GHC-Driver-Env-Types.html#t:Hsc" title="GHC.Driver.Env.Types">Hsc</a> <a href="GHC-Driver-Plugins.html#t:ParsedResult" title="GHC.Driver.Plugins">ParsedResult</a></dfn><div class="doc"><p>Modify the module when it is parsed. This is called by
 <a href="GHC-Driver-Main.html">GHC.Driver.Main</a> when the parser has produced no or only non-fatal
 errors.
 Compilation will fail if the messages produced by this function contain
 any errors.</p></div></li><li><dfn class="src"><a id="v:renamedResultAction" class="def">renamedResultAction</a> :: [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>] -&gt; <a href="GHC-Tc-Types.html#t:TcGblEnv" title="GHC.Tc.Types">TcGblEnv</a> -&gt; <a href="Language-Haskell-Syntax-Decls.html#t:HsGroup" title="Language.Haskell.Syntax.Decls">HsGroup</a> <a href="GHC-Hs-Extension.html#t:GhcRn" title="GHC.Hs.Extension">GhcRn</a> -&gt; <a href="GHC-Tc-Types.html#t:TcM" title="GHC.Tc.Types">TcM</a> (<a href="GHC-Tc-Types.html#t:TcGblEnv" title="GHC.Tc.Types">TcGblEnv</a>, <a href="Language-Haskell-Syntax-Decls.html#t:HsGroup" title="Language.Haskell.Syntax.Decls">HsGroup</a> <a href="GHC-Hs-Extension.html#t:GhcRn" title="GHC.Hs.Extension">GhcRn</a>)</dfn><div class="doc"><p>Modify each group after it is renamed. This is called after each
 <code><a href="Language-Haskell-Syntax-Decls.html#t:HsGroup" title="Language.Haskell.Syntax.Decls">HsGroup</a></code> has been renamed.</p></div></li><li><dfn class="src"><a id="v:typeCheckResultAction" class="def">typeCheckResultAction</a> :: [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>] -&gt; <a href="GHC-Unit-Module-ModSummary.html#t:ModSummary" title="GHC.Unit.Module.ModSummary">ModSummary</a> -&gt; <a href="GHC-Tc-Types.html#t:TcGblEnv" title="GHC.Tc.Types">TcGblEnv</a> -&gt; <a href="GHC-Tc-Types.html#t:TcM" title="GHC.Tc.Types">TcM</a> <a href="GHC-Tc-Types.html#t:TcGblEnv" title="GHC.Tc.Types">TcGblEnv</a></dfn><div class="doc"><p>Modify the module when it is type checked. This is called at the
 very end of typechecking.</p></div></li><li><dfn class="src"><a id="v:spliceRunAction" class="def">spliceRunAction</a> :: [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>] -&gt; <a href="Language-Haskell-Syntax-Expr.html#t:LHsExpr" title="Language.Haskell.Syntax.Expr">LHsExpr</a> <a href="GHC-Hs-Extension.html#t:GhcTc" title="GHC.Hs.Extension">GhcTc</a> -&gt; <a href="GHC-Tc-Types.html#t:TcM" title="GHC.Tc.Types">TcM</a> (<a href="Language-Haskell-Syntax-Expr.html#t:LHsExpr" title="Language.Haskell.Syntax.Expr">LHsExpr</a> <a href="GHC-Hs-Extension.html#t:GhcTc" title="GHC.Hs.Extension">GhcTc</a>)</dfn><div class="doc"><p>Modify the TH splice or quasiqoute before it is run.</p></div></li><li><dfn class="src"><a id="v:interfaceLoadAction" class="def">interfaceLoadAction</a> :: <span class="keyword">forall</span> lcl. [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>] -&gt; <a href="GHC-Unit-Module-ModIface.html#t:ModIface" title="GHC.Unit.Module.ModIface">ModIface</a> -&gt; <a href="GHC-Tc-Types.html#t:IfM" title="GHC.Tc.Types">IfM</a> lcl <a href="GHC-Unit-Module-ModIface.html#t:ModIface" title="GHC.Unit.Module.ModIface">ModIface</a></dfn><div class="doc"><p>Modify an interface that have been loaded. This is called by
 <a href="GHC-Iface-Load.html">GHC.Iface.Load</a> when an interface is successfully loaded. Not applied to
 the loading of the plugin interface. Tools that rely on information from
 modules other than the currently compiled one should implement this
 function.</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:defaultPlugin" class="def">defaultPlugin</a> :: <a href="GHC-Driver-Plugins.html#t:Plugin" title="GHC.Driver.Plugins">Plugin</a> <a href="src/GHC.Driver.Plugins.html#defaultPlugin" class="link">Source</a> <a href="#v:defaultPlugin" class="selflink">#</a></p><div class="doc"><p>Default plugin: does nothing at all, except for marking that safe
 inference has failed unless <code>-fplugin-trustworthy</code> is passed. For
 compatibility reason you should base all your plugin definitions on this
 default value.</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:CommandLineOption" class="def">CommandLineOption</a> = <a href="GHC-Prelude-Basic.html#t:String" title="GHC.Prelude.Basic">String</a> <a href="src/GHC.Driver.Plugins.html#CommandLineOption" class="link">Source</a> <a href="#t:CommandLineOption" class="selflink">#</a></p><div class="doc"><p>Command line options gathered from the -PModule.Name:stuff syntax
 are given to you as this type</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PsMessages" class="def">PsMessages</a> <a href="src/GHC.Driver.Plugins.html#PsMessages" class="link">Source</a> <a href="#t:PsMessages" class="selflink">#</a></p><div class="doc"><p>Errors and warnings produced by the parser</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:PsMessages" class="def">PsMessages</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:psWarnings" class="def">psWarnings</a> :: <a href="GHC-Types-Error.html#t:Messages" title="GHC.Types.Error">Messages</a> <a href="GHC-Parser-Errors-Types.html#t:PsWarning" title="GHC.Parser.Errors.Types">PsWarning</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:psErrors" class="def">psErrors</a> :: <a href="GHC-Types-Error.html#t:Messages" title="GHC.Types.Error">Messages</a> <a href="GHC-Parser-Errors-Types.html#t:PsError" title="GHC.Parser.Errors.Types">PsError</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ParsedResult" class="def">ParsedResult</a> <a href="src/GHC.Driver.Plugins.html#ParsedResult" class="link">Source</a> <a href="#t:ParsedResult" class="selflink">#</a></p><div class="doc"><p>Result of running the parser and the parser plugin</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ParsedResult" class="def">ParsedResult</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:parsedResultModule" class="def">parsedResultModule</a> :: <a href="GHC-Hs.html#t:HsParsedModule" title="GHC.Hs">HsParsedModule</a></dfn><div class="doc"><p>Parsed module, potentially modified by a plugin</p></div></li><li><dfn class="src"><a id="v:parsedResultMessages" class="def">parsedResultMessages</a> :: <a href="GHC-Driver-Plugins.html#t:PsMessages" title="GHC.Driver.Plugins">PsMessages</a></dfn><div class="doc"><p>Warnings and errors from parser, potentially modified by a plugin</p></div></li></ul></div></td></tr></table></div></div><a href="#g:2" id="g:2"><h1>External plugins</h1></a><div class="top"><p class="src"><a id="v:loadExternalPlugins" class="def">loadExternalPlugins</a> :: [<a href="GHC-Driver-Plugins-External.html#t:ExternalPluginSpec" title="GHC.Driver.Plugins.External">ExternalPluginSpec</a>] -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> [<a href="GHC-Driver-Plugins.html#t:ExternalPlugin" title="GHC.Driver.Plugins">ExternalPlugin</a>] <a href="src/GHC.Driver.Plugins.html#loadExternalPlugins" class="link">Source</a> <a href="#v:loadExternalPlugins" class="selflink">#</a></p><div class="doc"><p>Load external plugins</p></div></div><a href="#g:3" id="g:3"><h2>Recompilation checking</h2></a><div class="top"><p class="src"><a id="v:purePlugin" class="def">purePlugin</a> :: [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>] -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> <a href="GHC-Driver-Plugins.html#t:PluginRecompile" title="GHC.Driver.Plugins">PluginRecompile</a> <a href="src/GHC.Driver.Plugins.html#purePlugin" class="link">Source</a> <a href="#v:purePlugin" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:impurePlugin" class="def">impurePlugin</a> :: [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>] -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> <a href="GHC-Driver-Plugins.html#t:PluginRecompile" title="GHC.Driver.Plugins">PluginRecompile</a> <a href="src/GHC.Driver.Plugins.html#impurePlugin" class="link">Source</a> <a href="#v:impurePlugin" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:flagRecompile" class="def">flagRecompile</a> :: [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>] -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> <a href="GHC-Driver-Plugins.html#t:PluginRecompile" title="GHC.Driver.Plugins">PluginRecompile</a> <a href="src/GHC.Driver.Plugins.html#flagRecompile" class="link">Source</a> <a href="#v:flagRecompile" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PluginRecompile" class="def">PluginRecompile</a> <a href="src/GHC.Driver.Plugins.html#PluginRecompile" class="link">Source</a> <a href="#t:PluginRecompile" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ForceRecompile" class="def">ForceRecompile</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:NoForceRecompile" class="def">NoForceRecompile</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:MaybeRecompile" class="def">MaybeRecompile</a> <a href="GHC-Utils-Fingerprint.html#t:Fingerprint" title="GHC.Utils.Fingerprint">Fingerprint</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:PluginRecompile">Instances</h4><details id="i:PluginRecompile" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:PluginRecompile:Monoid:1"></span> <a href="GHC-Prelude-Basic.html#t:Monoid" title="GHC.Prelude.Basic">Monoid</a> <a href="GHC-Driver-Plugins.html#t:PluginRecompile" title="GHC.Driver.Plugins">PluginRecompile</a></span> <a href="src/GHC.Driver.Plugins.html#line-256" class="link">Source</a> <a href="#t:PluginRecompile" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:PluginRecompile:Monoid:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Driver-Plugins.html">GHC.Driver.Plugins</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mempty">mempty</a> :: <a href="GHC-Driver-Plugins.html#t:PluginRecompile" title="GHC.Driver.Plugins">PluginRecompile</a> <a href="../base-4.18.3.0/src/GHC.Base.html#mempty" class="link">Source</a> <a href="#v:mempty" class="selflink">#</a></p><p class="src"><a href="#v:mappend">mappend</a> :: <a href="GHC-Driver-Plugins.html#t:PluginRecompile" title="GHC.Driver.Plugins">PluginRecompile</a> -&gt; <a href="GHC-Driver-Plugins.html#t:PluginRecompile" title="GHC.Driver.Plugins">PluginRecompile</a> -&gt; <a href="GHC-Driver-Plugins.html#t:PluginRecompile" title="GHC.Driver.Plugins">PluginRecompile</a> <a href="../base-4.18.3.0/src/GHC.Base.html#mappend" class="link">Source</a> <a href="#v:mappend" class="selflink">#</a></p><p class="src"><a href="#v:mconcat">mconcat</a> :: [<a href="GHC-Driver-Plugins.html#t:PluginRecompile" title="GHC.Driver.Plugins">PluginRecompile</a>] -&gt; <a href="GHC-Driver-Plugins.html#t:PluginRecompile" title="GHC.Driver.Plugins">PluginRecompile</a> <a href="../base-4.18.3.0/src/GHC.Base.html#mconcat" class="link">Source</a> <a href="#v:mconcat" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:PluginRecompile:Semigroup:2"></span> <a href="GHC-Prelude-Basic.html#t:Semigroup" title="GHC.Prelude.Basic">Semigroup</a> <a href="GHC-Driver-Plugins.html#t:PluginRecompile" title="GHC.Driver.Plugins">PluginRecompile</a></span> <a href="src/GHC.Driver.Plugins.html#line-249" class="link">Source</a> <a href="#t:PluginRecompile" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:PluginRecompile:Semigroup:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Driver-Plugins.html">GHC.Driver.Plugins</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> :: <a href="GHC-Driver-Plugins.html#t:PluginRecompile" title="GHC.Driver.Plugins">PluginRecompile</a> -&gt; <a href="GHC-Driver-Plugins.html#t:PluginRecompile" title="GHC.Driver.Plugins">PluginRecompile</a> -&gt; <a href="GHC-Driver-Plugins.html#t:PluginRecompile" title="GHC.Driver.Plugins">PluginRecompile</a> <a href="../base-4.18.3.0/src/GHC.Base.html#%3C%3E" class="link">Source</a> <a href="#v:-60--62-" class="selflink">#</a></p><p class="src"><a href="#v:sconcat">sconcat</a> :: <a href="../base-4.18.3.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> <a href="GHC-Driver-Plugins.html#t:PluginRecompile" title="GHC.Driver.Plugins">PluginRecompile</a> -&gt; <a href="GHC-Driver-Plugins.html#t:PluginRecompile" title="GHC.Driver.Plugins">PluginRecompile</a> <a href="../base-4.18.3.0/src/GHC.Base.html#sconcat" class="link">Source</a> <a href="#v:sconcat" class="selflink">#</a></p><p class="src"><a href="#v:stimes">stimes</a> :: <a href="GHC-Prelude-Basic.html#t:Integral" title="GHC.Prelude.Basic">Integral</a> b =&gt; b -&gt; <a href="GHC-Driver-Plugins.html#t:PluginRecompile" title="GHC.Driver.Plugins">PluginRecompile</a> -&gt; <a href="GHC-Driver-Plugins.html#t:PluginRecompile" title="GHC.Driver.Plugins">PluginRecompile</a> <a href="../base-4.18.3.0/src/GHC.Base.html#stimes" class="link">Source</a> <a href="#v:stimes" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:PluginRecompile:Outputable:3"></span> <a href="GHC-Utils-Outputable.html#t:Outputable" title="GHC.Utils.Outputable">Outputable</a> <a href="GHC-Driver-Plugins.html#t:PluginRecompile" title="GHC.Driver.Plugins">PluginRecompile</a></span> <a href="src/GHC.Driver.Plugins.html#line-244" class="link">Source</a> <a href="#t:PluginRecompile" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:PluginRecompile:Outputable:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="GHC-Driver-Plugins.html">GHC.Driver.Plugins</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:ppr">ppr</a> :: <a href="GHC-Driver-Plugins.html#t:PluginRecompile" title="GHC.Driver.Plugins">PluginRecompile</a> -&gt; <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> <a href="src/GHC.Utils.Outputable.html#ppr" class="link">Source</a> <a href="#v:ppr" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><a href="#g:4" id="g:4"><h1>Plugin types</h1></a><a href="#g:5" id="g:5"><h2>Frontend plugins</h2></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:FrontendPlugin" class="def">FrontendPlugin</a> <a href="src/GHC.Driver.Plugins.html#FrontendPlugin" class="link">Source</a> <a href="#t:FrontendPlugin" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:FrontendPlugin" class="def">FrontendPlugin</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:frontend" class="def">frontend</a> :: <a href="GHC-Driver-Plugins.html#t:FrontendPluginAction" title="GHC.Driver.Plugins">FrontendPluginAction</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:defaultFrontendPlugin" class="def">defaultFrontendPlugin</a> :: <a href="GHC-Driver-Plugins.html#t:FrontendPlugin" title="GHC.Driver.Plugins">FrontendPlugin</a> <a href="src/GHC.Driver.Plugins.html#defaultFrontendPlugin" class="link">Source</a> <a href="#v:defaultFrontendPlugin" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:FrontendPluginAction" class="def">FrontendPluginAction</a> = [<a href="GHC-Prelude-Basic.html#t:String" title="GHC.Prelude.Basic">String</a>] -&gt; [(<a href="GHC-Prelude-Basic.html#t:String" title="GHC.Prelude.Basic">String</a>, <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Driver-Phases.html#t:Phase" title="GHC.Driver.Phases">Phase</a>)] -&gt; <a href="GHC-Driver-Monad.html#t:Ghc" title="GHC.Driver.Monad">Ghc</a> () <a href="src/GHC.Driver.Plugins.html#FrontendPluginAction" class="link">Source</a> <a href="#t:FrontendPluginAction" class="selflink">#</a></p></div><a href="#g:6" id="g:6"><h2>Core plugins</h2></a><div class="doc"><p>Core plugins allow plugins to register as a Core-to-Core pass.</p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:CorePlugin" class="def">CorePlugin</a> = [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>] -&gt; [<a href="GHC-Core-Opt-Pipeline-Types.html#t:CoreToDo" title="GHC.Core.Opt.Pipeline.Types">CoreToDo</a>] -&gt; <a href="GHC-Core-Opt-Monad.html#t:CoreM" title="GHC.Core.Opt.Monad">CoreM</a> [<a href="GHC-Core-Opt-Pipeline-Types.html#t:CoreToDo" title="GHC.Core.Opt.Pipeline.Types">CoreToDo</a>] <a href="src/GHC.Driver.Plugins.html#CorePlugin" class="link">Source</a> <a href="#t:CorePlugin" class="selflink">#</a></p></div><a href="#g:7" id="g:7"><h2>Typechecker plugins</h2></a><div class="doc"><p>Typechecker plugins allow plugins to provide evidence to the
 typechecker.</p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:TcPlugin" class="def">TcPlugin</a> = [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>] -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Tc-Types.html#t:TcPlugin" title="GHC.Tc.Types">TcPlugin</a> <a href="src/GHC.Driver.Plugins.html#TcPlugin" class="link">Source</a> <a href="#t:TcPlugin" class="selflink">#</a></p></div><a href="#g:8" id="g:8"><h2>Source plugins</h2></a><div class="doc"><p>GHC offers a number of points where plugins can access and modify its
 front-end (&quot;source&quot;) representation. These include:</p><ul><li>access to the parser result with <code><a href="GHC-Driver-Plugins.html#v:parsedResultAction" title="GHC.Driver.Plugins">parsedResultAction</a></code></li><li>access to the renamed AST with <code><a href="GHC-Driver-Plugins.html#v:renamedResultAction" title="GHC.Driver.Plugins">renamedResultAction</a></code></li><li>access to the typechecked AST with <code><a href="GHC-Driver-Plugins.html#v:typeCheckResultAction" title="GHC.Driver.Plugins">typeCheckResultAction</a></code></li><li>access to the Template Haskell splices with <code><a href="GHC-Driver-Plugins.html#v:spliceRunAction" title="GHC.Driver.Plugins">spliceRunAction</a></code></li><li>access to loaded interface files with <code><a href="GHC-Driver-Plugins.html#v:interfaceLoadAction" title="GHC.Driver.Plugins">interfaceLoadAction</a></code></li></ul></div><div class="top"><p class="src"><a id="v:keepRenamedSource" class="def">keepRenamedSource</a> :: [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>] -&gt; <a href="GHC-Tc-Types.html#t:TcGblEnv" title="GHC.Tc.Types">TcGblEnv</a> -&gt; <a href="Language-Haskell-Syntax-Decls.html#t:HsGroup" title="Language.Haskell.Syntax.Decls">HsGroup</a> <a href="GHC-Hs-Extension.html#t:GhcRn" title="GHC.Hs.Extension">GhcRn</a> -&gt; <a href="GHC-Tc-Types.html#t:TcM" title="GHC.Tc.Types">TcM</a> (<a href="GHC-Tc-Types.html#t:TcGblEnv" title="GHC.Tc.Types">TcGblEnv</a>, <a href="Language-Haskell-Syntax-Decls.html#t:HsGroup" title="Language.Haskell.Syntax.Decls">HsGroup</a> <a href="GHC-Hs-Extension.html#t:GhcRn" title="GHC.Hs.Extension">GhcRn</a>) <a href="src/GHC.Driver.Plugins.html#keepRenamedSource" class="link">Source</a> <a href="#v:keepRenamedSource" class="selflink">#</a></p><div class="doc"><p>A renamer plugin which mades the renamed source available in
 a typechecker plugin.</p></div></div><a href="#g:9" id="g:9"><h2>Defaulting plugins</h2></a><div class="doc"><p>Defaulting plugins can add candidate types to the defaulting
 mechanism.</p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:DefaultingPlugin" class="def">DefaultingPlugin</a> = [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>] -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Tc-Types.html#t:DefaultingPlugin" title="GHC.Tc.Types">DefaultingPlugin</a> <a href="src/GHC.Driver.Plugins.html#DefaultingPlugin" class="link">Source</a> <a href="#t:DefaultingPlugin" class="selflink">#</a></p></div><a href="#g:10" id="g:10"><h2>Hole fit plugins</h2></a><div class="doc"><p>hole fit plugins allow plugins to change the behavior of valid hole
 fit suggestions</p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:HoleFitPluginR" class="def">HoleFitPluginR</a> <a href="src/GHC.Tc.Errors.Hole.FitTypes.html#HoleFitPluginR" class="link">Source</a> <a href="#t:HoleFitPluginR" class="selflink">#</a></p><div class="doc"><p>HoleFitPluginR adds a TcRef to hole fit plugins so that plugins can
 track internal state. Note the existential quantification, ensuring that
 the state cannot be modified from outside the plugin.</p></div></div><a href="#g:11" id="g:11"><h1>Internal</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PluginWithArgs" class="def">PluginWithArgs</a> <a href="src/GHC.Driver.Plugins.html#PluginWithArgs" class="link">Source</a> <a href="#t:PluginWithArgs" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:PluginWithArgs" class="def">PluginWithArgs</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:paPlugin" class="def">paPlugin</a> :: <a href="GHC-Driver-Plugins.html#t:Plugin" title="GHC.Driver.Plugins">Plugin</a></dfn><div class="doc"><p>the actual callable plugin</p></div></li><li><dfn class="src"><a id="v:paArguments" class="def">paArguments</a> :: [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>]</dfn><div class="doc"><p>command line arguments for the plugin</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:pluginsWithArgs" class="def">pluginsWithArgs</a> :: <a href="GHC-Driver-Plugins.html#t:Plugins" title="GHC.Driver.Plugins">Plugins</a> -&gt; [<a href="GHC-Driver-Plugins.html#t:PluginWithArgs" title="GHC.Driver.Plugins">PluginWithArgs</a>] <a href="src/GHC.Driver.Plugins.html#pluginsWithArgs" class="link">Source</a> <a href="#v:pluginsWithArgs" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:pluginRecompile-39-" class="def">pluginRecompile'</a> :: <a href="GHC-Driver-Plugins.html#t:PluginWithArgs" title="GHC.Driver.Plugins">PluginWithArgs</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> <a href="GHC-Driver-Plugins.html#t:PluginRecompile" title="GHC.Driver.Plugins">PluginRecompile</a> <a href="src/GHC.Driver.Plugins.html#pluginRecompile%27" class="link">Source</a> <a href="#v:pluginRecompile-39-" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:LoadedPlugin" class="def">LoadedPlugin</a> <a href="src/GHC.Driver.Plugins.html#LoadedPlugin" class="link">Source</a> <a href="#t:LoadedPlugin" class="selflink">#</a></p><div class="doc"><p>A plugin with its arguments. The result of loading the plugin.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:LoadedPlugin" class="def">LoadedPlugin</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:lpPlugin" class="def">lpPlugin</a> :: <a href="GHC-Driver-Plugins.html#t:PluginWithArgs" title="GHC.Driver.Plugins">PluginWithArgs</a></dfn><div class="doc"><p>the actual plugin together with its commandline arguments</p></div></li><li><dfn class="src"><a id="v:lpModule" class="def">lpModule</a> :: <a href="GHC-Unit-Module-ModIface.html#t:ModIface" title="GHC.Unit.Module.ModIface">ModIface</a></dfn><div class="doc"><p>the module containing the plugin</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:lpModuleName" class="def">lpModuleName</a> :: <a href="GHC-Driver-Plugins.html#t:LoadedPlugin" title="GHC.Driver.Plugins">LoadedPlugin</a> -&gt; <a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a> <a href="src/GHC.Driver.Plugins.html#lpModuleName" class="link">Source</a> <a href="#v:lpModuleName" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:StaticPlugin" class="def">StaticPlugin</a> <a href="src/GHC.Driver.Plugins.html#StaticPlugin" class="link">Source</a> <a href="#t:StaticPlugin" class="selflink">#</a></p><div class="doc"><p>A static plugin with its arguments. For registering compiled-in plugins
 through the GHC API.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:StaticPlugin" class="def">StaticPlugin</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:spPlugin" class="def">spPlugin</a> :: <a href="GHC-Driver-Plugins.html#t:PluginWithArgs" title="GHC.Driver.Plugins">PluginWithArgs</a></dfn><div class="doc"><p>the actual plugin together with its commandline arguments</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ExternalPlugin" class="def">ExternalPlugin</a> <a href="src/GHC.Driver.Plugins.html#ExternalPlugin" class="link">Source</a> <a href="#t:ExternalPlugin" class="selflink">#</a></p><div class="doc"><p>External plugin loaded directly from a library without loading module
 interfaces</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ExternalPlugin" class="def">ExternalPlugin</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:epPlugin" class="def">epPlugin</a> :: <a href="GHC-Driver-Plugins.html#t:PluginWithArgs" title="GHC.Driver.Plugins">PluginWithArgs</a></dfn><div class="doc"><p>Plugin with its arguments</p></div></li><li><dfn class="src"><a id="v:epUnit" class="def">epUnit</a> :: <a href="GHC-Prelude-Basic.html#t:String" title="GHC.Prelude.Basic">String</a></dfn><div class="doc"><p>UnitId</p></div></li><li><dfn class="src"><a id="v:epModule" class="def">epModule</a> :: <a href="GHC-Prelude-Basic.html#t:String" title="GHC.Prelude.Basic">String</a></dfn><div class="doc"><p>Module name</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:mapPlugins" class="def">mapPlugins</a> :: <a href="GHC-Driver-Plugins.html#t:Plugins" title="GHC.Driver.Plugins">Plugins</a> -&gt; (<a href="GHC-Driver-Plugins.html#t:Plugin" title="GHC.Driver.Plugins">Plugin</a> -&gt; [<a href="GHC-Driver-Plugins.html#t:CommandLineOption" title="GHC.Driver.Plugins">CommandLineOption</a>] -&gt; a) -&gt; [a] <a href="src/GHC.Driver.Plugins.html#mapPlugins" class="link">Source</a> <a href="#v:mapPlugins" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:withPlugins" class="def">withPlugins</a> :: <a href="GHC-Prelude-Basic.html#t:Monad" title="GHC.Prelude.Basic">Monad</a> m =&gt; <a href="GHC-Driver-Plugins.html#t:Plugins" title="GHC.Driver.Plugins">Plugins</a> -&gt; PluginOperation m a -&gt; a -&gt; m a <a href="src/GHC.Driver.Plugins.html#withPlugins" class="link">Source</a> <a href="#v:withPlugins" class="selflink">#</a></p><div class="doc"><p>Perform an operation by using all of the plugins in turn.</p></div></div><div class="top"><p class="src"><a id="v:withPlugins_" class="def">withPlugins_</a> :: <a href="GHC-Prelude-Basic.html#t:Monad" title="GHC.Prelude.Basic">Monad</a> m =&gt; <a href="GHC-Driver-Plugins.html#t:Plugins" title="GHC.Driver.Plugins">Plugins</a> -&gt; ConstPluginOperation m a -&gt; a -&gt; m () <a href="src/GHC.Driver.Plugins.html#withPlugins_" class="link">Source</a> <a href="#v:withPlugins_" class="selflink">#</a></p><div class="doc"><p>Perform a constant operation by using all of the plugins in turn.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>