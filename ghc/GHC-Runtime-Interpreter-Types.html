<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>GHC.Runtime.Interpreter.Types</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ghc-9.6.7: The GHC API</span><ul class="links" id="page-menu"><li><a href="src/GHC.Runtime.Interpreter.Types.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">GHC.Runtime.Interpreter.Types</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Types used by the runtime interpreter</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Interp">Interp</a> = <a href="#v:Interp">Interp</a> {<ul class="subs"><li><a href="#v:interpInstance">interpInstance</a> :: !<a href="GHC-Runtime-Interpreter-Types.html#t:InterpInstance" title="GHC.Runtime.Interpreter.Types">InterpInstance</a></li><li><a href="#v:interpLoader">interpLoader</a> :: !<a href="GHC-Linker-Types.html#t:Loader" title="GHC.Linker.Types">Loader</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:InterpInstance">InterpInstance</a><ul class="subs"><li>= <a href="#v:ExternalInterp">ExternalInterp</a> !<a href="GHC-Runtime-Interpreter-Types.html#t:IServConfig" title="GHC.Runtime.Interpreter.Types">IServConfig</a> !<a href="GHC-Runtime-Interpreter-Types.html#t:IServ" title="GHC.Runtime.Interpreter.Types">IServ</a></li><li>| <a href="#v:InternalInterp">InternalInterp</a></li></ul></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:IServ">IServ</a> = <a href="#v:IServ">IServ</a> (<a href="../base-4.18.3.0/Control-Concurrent-MVar.html#t:MVar" title="Control.Concurrent.MVar">MVar</a> <a href="GHC-Runtime-Interpreter-Types.html#t:IServState" title="GHC.Runtime.Interpreter.Types">IServState</a>)</li><li class="src short"><span class="keyword">data</span> <a href="#t:IServInstance">IServInstance</a> = <a href="#v:IServInstance">IServInstance</a> {<ul class="subs"><li><a href="#v:iservPipe">iservPipe</a> :: !<a href="../ghci-9.6.7/GHCi-Message.html#t:Pipe" title="GHCi.Message">Pipe</a></li><li><a href="#v:iservProcess">iservProcess</a> :: !<a href="../process-1.6.19.0/System-Process.html#t:ProcessHandle" title="System.Process">ProcessHandle</a></li><li><a href="#v:iservLookupSymbolCache">iservLookupSymbolCache</a> :: !(<a href="GHC-Types-Unique-FM.html#t:UniqFM" title="GHC.Types.Unique.FM">UniqFM</a> <a href="GHC-Data-FastString.html#t:FastString" title="GHC.Data.FastString">FastString</a> (<a href="../base-4.18.3.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> ()))</li><li><a href="#v:iservPendingFrees">iservPendingFrees</a> :: ![<a href="../ghci-9.6.7/GHCi-RemoteTypes.html#t:HValueRef" title="GHCi.RemoteTypes">HValueRef</a>]</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:IServConfig">IServConfig</a> = <a href="#v:IServConfig">IServConfig</a> {<ul class="subs"><li><a href="#v:iservConfProgram">iservConfProgram</a> :: !<a href="GHC-Prelude-Basic.html#t:String" title="GHC.Prelude.Basic">String</a></li><li><a href="#v:iservConfOpts">iservConfOpts</a> :: ![<a href="GHC-Prelude-Basic.html#t:String" title="GHC.Prelude.Basic">String</a>]</li><li><a href="#v:iservConfProfiled">iservConfProfiled</a> :: !<a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a></li><li><a href="#v:iservConfDynamic">iservConfDynamic</a> :: !<a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a></li><li><a href="#v:iservConfHook">iservConfHook</a> :: !(<a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> (<a href="../process-1.6.19.0/System-Process.html#t:CreateProcess" title="System.Process">CreateProcess</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> <a href="../process-1.6.19.0/System-Process.html#t:ProcessHandle" title="System.Process">ProcessHandle</a>))</li><li><a href="#v:iservConfTrace">iservConfTrace</a> :: <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> ()</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:IServState">IServState</a><ul class="subs"><li>= <a href="#v:IServPending">IServPending</a></li><li>| <a href="#v:IServRunning">IServRunning</a> !<a href="GHC-Runtime-Interpreter-Types.html#t:IServInstance" title="GHC.Runtime.Interpreter.Types">IServInstance</a></li></ul></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Interp" class="def">Interp</a> <a href="src/GHC.Runtime.Interpreter.Types.html#Interp" class="link">Source</a> <a href="#t:Interp" class="selflink">#</a></p><div class="doc"><p>Interpreter</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Interp" class="def">Interp</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:interpInstance" class="def">interpInstance</a> :: !<a href="GHC-Runtime-Interpreter-Types.html#t:InterpInstance" title="GHC.Runtime.Interpreter.Types">InterpInstance</a></dfn><div class="doc"><p>Interpreter instance (internal, external)</p></div></li><li><dfn class="src"><a id="v:interpLoader" class="def">interpLoader</a> :: !<a href="GHC-Linker-Types.html#t:Loader" title="GHC.Linker.Types">Loader</a></dfn><div class="doc"><p>Interpreter loader</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:InterpInstance" class="def">InterpInstance</a> <a href="src/GHC.Runtime.Interpreter.Types.html#InterpInstance" class="link">Source</a> <a href="#t:InterpInstance" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ExternalInterp" class="def">ExternalInterp</a> !<a href="GHC-Runtime-Interpreter-Types.html#t:IServConfig" title="GHC.Runtime.Interpreter.Types">IServConfig</a> !<a href="GHC-Runtime-Interpreter-Types.html#t:IServ" title="GHC.Runtime.Interpreter.Types">IServ</a></td><td class="doc"><p>External interpreter</p></td></tr><tr><td class="src"><a id="v:InternalInterp" class="def">InternalInterp</a></td><td class="doc"><p>Internal interpreter</p></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:IServ" class="def">IServ</a> <a href="src/GHC.Runtime.Interpreter.Types.html#IServ" class="link">Source</a> <a href="#t:IServ" class="selflink">#</a></p><div class="doc"><p>External interpreter</p><p>The external interpreter is spawned lazily (on first use) to avoid slowing
 down sessions that don't require it. The contents of the MVar reflects the
 state of the interpreter (running or not).</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:IServ" class="def">IServ</a> (<a href="../base-4.18.3.0/Control-Concurrent-MVar.html#t:MVar" title="Control.Concurrent.MVar">MVar</a> <a href="GHC-Runtime-Interpreter-Types.html#t:IServState" title="GHC.Runtime.Interpreter.Types">IServState</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:IServInstance" class="def">IServInstance</a> <a href="src/GHC.Runtime.Interpreter.Types.html#IServInstance" class="link">Source</a> <a href="#t:IServInstance" class="selflink">#</a></p><div class="doc"><p>External interpreter instance</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:IServInstance" class="def">IServInstance</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:iservPipe" class="def">iservPipe</a> :: !<a href="../ghci-9.6.7/GHCi-Message.html#t:Pipe" title="GHCi.Message">Pipe</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:iservProcess" class="def">iservProcess</a> :: !<a href="../process-1.6.19.0/System-Process.html#t:ProcessHandle" title="System.Process">ProcessHandle</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:iservLookupSymbolCache" class="def">iservLookupSymbolCache</a> :: !(<a href="GHC-Types-Unique-FM.html#t:UniqFM" title="GHC.Types.Unique.FM">UniqFM</a> <a href="GHC-Data-FastString.html#t:FastString" title="GHC.Data.FastString">FastString</a> (<a href="../base-4.18.3.0/Foreign-Ptr.html#t:Ptr" title="Foreign.Ptr">Ptr</a> ()))</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:iservPendingFrees" class="def">iservPendingFrees</a> :: ![<a href="../ghci-9.6.7/GHCi-RemoteTypes.html#t:HValueRef" title="GHCi.RemoteTypes">HValueRef</a>]</dfn><div class="doc"><p>Values that need to be freed before the next command is sent.
 Threads can append values to this list asynchronously (by modifying the
 IServ state MVar).</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:IServConfig" class="def">IServConfig</a> <a href="src/GHC.Runtime.Interpreter.Types.html#IServConfig" class="link">Source</a> <a href="#t:IServConfig" class="selflink">#</a></p><div class="doc"><p>Configuration needed to spawn an external interpreter</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:IServConfig" class="def">IServConfig</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:iservConfProgram" class="def">iservConfProgram</a> :: !<a href="GHC-Prelude-Basic.html#t:String" title="GHC.Prelude.Basic">String</a></dfn><div class="doc"><p>External program to run</p></div></li><li><dfn class="src"><a id="v:iservConfOpts" class="def">iservConfOpts</a> :: ![<a href="GHC-Prelude-Basic.html#t:String" title="GHC.Prelude.Basic">String</a>]</dfn><div class="doc"><p>Command-line options</p></div></li><li><dfn class="src"><a id="v:iservConfProfiled" class="def">iservConfProfiled</a> :: !<a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a></dfn><div class="doc"><p>Use Profiling way</p></div></li><li><dfn class="src"><a id="v:iservConfDynamic" class="def">iservConfDynamic</a> :: !<a href="GHC-Prelude-Basic.html#t:Bool" title="GHC.Prelude.Basic">Bool</a></dfn><div class="doc"><p>Use Dynamic way</p></div></li><li><dfn class="src"><a id="v:iservConfHook" class="def">iservConfHook</a> :: !(<a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> (<a href="../process-1.6.19.0/System-Process.html#t:CreateProcess" title="System.Process">CreateProcess</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> <a href="../process-1.6.19.0/System-Process.html#t:ProcessHandle" title="System.Process">ProcessHandle</a>))</dfn><div class="doc"><p>Hook</p></div></li><li><dfn class="src"><a id="v:iservConfTrace" class="def">iservConfTrace</a> :: <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> ()</dfn><div class="doc"><p>Trace action executed after spawn</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:IServState" class="def">IServState</a> <a href="src/GHC.Runtime.Interpreter.Types.html#IServState" class="link">Source</a> <a href="#t:IServState" class="selflink">#</a></p><div class="doc"><p>State of an external interpreter</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:IServPending" class="def">IServPending</a></td><td class="doc"><p>Not spawned yet</p></td></tr><tr><td class="src"><a id="v:IServRunning" class="def">IServRunning</a> !<a href="GHC-Runtime-Interpreter-Types.html#t:IServInstance" title="GHC.Runtime.Interpreter.Types">IServInstance</a></td><td class="doc"><p>Running</p></td></tr></table></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>