<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>GHC.Linker.Loader</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ghc-9.6.6: The GHC API</span><ul class="links" id="page-menu"><li><a href="src/GHC.Linker.Loader.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">GHC.Linker.Loader</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Load &amp; Unload</a></li><li><a href="#g:2">LoadedEnv</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>The loader</p><p>This module deals with the top-level issues of dynamic linking (loading),
 calling the object-code linker and the byte-code linker where necessary.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">newtype</span> <a href="#t:Loader">Loader</a> = <a href="#v:Loader">Loader</a> {<ul class="subs"><li><a href="#v:loader_state">loader_state</a> :: <a href="../base-4.18.2.1/Control-Concurrent-MVar.html#t:MVar" title="Control.Concurrent.MVar">MVar</a> (<a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Linker-Loader.html#t:LoaderState" title="GHC.Linker.Loader">LoaderState</a>)</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:LoaderState">LoaderState</a> = <a href="#v:LoaderState">LoaderState</a> {<ul class="subs"><li><a href="#v:linker_env">linker_env</a> :: !<a href="GHC-Linker-Types.html#t:LinkerEnv" title="GHC.Linker.Types">LinkerEnv</a></li><li><a href="#v:bcos_loaded">bcos_loaded</a> :: !<a href="GHC-Linker-Types.html#t:LinkableSet" title="GHC.Linker.Types">LinkableSet</a></li><li><a href="#v:objs_loaded">objs_loaded</a> :: !<a href="GHC-Linker-Types.html#t:LinkableSet" title="GHC.Linker.Types">LinkableSet</a></li><li><a href="#v:pkgs_loaded">pkgs_loaded</a> :: !<a href="GHC-Linker-Types.html#t:PkgsLoaded" title="GHC.Linker.Types">PkgsLoaded</a></li><li><a href="#v:temp_sos">temp_sos</a> :: ![(<a href="GHC-Prelude-Basic.html#t:FilePath" title="GHC.Prelude.Basic">FilePath</a>, <a href="GHC-Prelude-Basic.html#t:String" title="GHC.Prelude.Basic">String</a>)]</li></ul>}</li><li class="src short"><a href="#v:initLoaderState">initLoaderState</a> :: <a href="GHC-Runtime-Interpreter-Types.html#t:Interp" title="GHC.Runtime.Interpreter.Types">Interp</a> -&gt; <a href="GHC-Driver-Env-Types.html#t:HscEnv" title="GHC.Driver.Env.Types">HscEnv</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> ()</li><li class="src short"><a href="#v:uninitializedLoader">uninitializedLoader</a> :: <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> <a href="GHC-Linker-Loader.html#t:Loader" title="GHC.Linker.Loader">Loader</a></li><li class="src short"><a href="#v:showLoaderState">showLoaderState</a> :: <a href="GHC-Runtime-Interpreter-Types.html#t:Interp" title="GHC.Runtime.Interpreter.Types">Interp</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a></li><li class="src short"><a href="#v:getLoaderState">getLoaderState</a> :: <a href="GHC-Runtime-Interpreter-Types.html#t:Interp" title="GHC.Runtime.Interpreter.Types">Interp</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> (<a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Linker-Loader.html#t:LoaderState" title="GHC.Linker.Loader">LoaderState</a>)</li><li class="src short"><a href="#v:loadExpr">loadExpr</a> :: <a href="GHC-Runtime-Interpreter-Types.html#t:Interp" title="GHC.Runtime.Interpreter.Types">Interp</a> -&gt; <a href="GHC-Driver-Env-Types.html#t:HscEnv" title="GHC.Driver.Env.Types">HscEnv</a> -&gt; <a href="GHC-Types-SrcLoc.html#t:SrcSpan" title="GHC.Types.SrcLoc">SrcSpan</a> -&gt; <a href="GHC-ByteCode-Types.html#t:UnlinkedBCO" title="GHC.ByteCode.Types">UnlinkedBCO</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> <a href="GHC.html#t:ForeignHValue" title="GHC">ForeignHValue</a></li><li class="src short"><a href="#v:loadDecls">loadDecls</a> :: <a href="GHC-Runtime-Interpreter-Types.html#t:Interp" title="GHC.Runtime.Interpreter.Types">Interp</a> -&gt; <a href="GHC-Driver-Env-Types.html#t:HscEnv" title="GHC.Driver.Env.Types">HscEnv</a> -&gt; <a href="GHC-Types-SrcLoc.html#t:SrcSpan" title="GHC.Types.SrcLoc">SrcSpan</a> -&gt; <a href="GHC-ByteCode-Types.html#t:CompiledByteCode" title="GHC.ByteCode.Types">CompiledByteCode</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> ([(<a href="GHC-Types-Name.html#t:Name" title="GHC.Types.Name">Name</a>, <a href="GHC.html#t:ForeignHValue" title="GHC">ForeignHValue</a>)], [<a href="GHC-Linker-Types.html#t:Linkable" title="GHC.Linker.Types">Linkable</a>], <a href="GHC-Linker-Types.html#t:PkgsLoaded" title="GHC.Linker.Types">PkgsLoaded</a>)</li><li class="src short"><a href="#v:loadPackages">loadPackages</a> :: <a href="GHC-Runtime-Interpreter-Types.html#t:Interp" title="GHC.Runtime.Interpreter.Types">Interp</a> -&gt; <a href="GHC-Driver-Env-Types.html#t:HscEnv" title="GHC.Driver.Env.Types">HscEnv</a> -&gt; [<a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>] -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> ()</li><li class="src short"><a href="#v:loadModule">loadModule</a> :: <a href="GHC-Runtime-Interpreter-Types.html#t:Interp" title="GHC.Runtime.Interpreter.Types">Interp</a> -&gt; <a href="GHC-Driver-Env-Types.html#t:HscEnv" title="GHC.Driver.Env.Types">HscEnv</a> -&gt; <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> ()</li><li class="src short"><a href="#v:loadCmdLineLibs">loadCmdLineLibs</a> :: <a href="GHC-Runtime-Interpreter-Types.html#t:Interp" title="GHC.Runtime.Interpreter.Types">Interp</a> -&gt; <a href="GHC-Driver-Env-Types.html#t:HscEnv" title="GHC.Driver.Env.Types">HscEnv</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> ()</li><li class="src short"><a href="#v:loadName">loadName</a> :: <a href="GHC-Runtime-Interpreter-Types.html#t:Interp" title="GHC.Runtime.Interpreter.Types">Interp</a> -&gt; <a href="GHC-Driver-Env-Types.html#t:HscEnv" title="GHC.Driver.Env.Types">HscEnv</a> -&gt; <a href="GHC-Types-Name.html#t:Name" title="GHC.Types.Name">Name</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> (<a href="GHC.html#t:ForeignHValue" title="GHC">ForeignHValue</a>, [<a href="GHC-Linker-Types.html#t:Linkable" title="GHC.Linker.Types">Linkable</a>], <a href="GHC-Linker-Types.html#t:PkgsLoaded" title="GHC.Linker.Types">PkgsLoaded</a>)</li><li class="src short"><a href="#v:unload">unload</a> :: <a href="GHC-Runtime-Interpreter-Types.html#t:Interp" title="GHC.Runtime.Interpreter.Types">Interp</a> -&gt; <a href="GHC-Driver-Env-Types.html#t:HscEnv" title="GHC.Driver.Env.Types">HscEnv</a> -&gt; [<a href="GHC-Linker-Types.html#t:Linkable" title="GHC.Linker.Types">Linkable</a>] -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> ()</li><li class="src short"><a href="#v:withExtendedLoadedEnv">withExtendedLoadedEnv</a> :: <a href="GHC-Utils-Exception.html#t:ExceptionMonad" title="GHC.Utils.Exception">ExceptionMonad</a> m =&gt; <a href="GHC-Runtime-Interpreter-Types.html#t:Interp" title="GHC.Runtime.Interpreter.Types">Interp</a> -&gt; [(<a href="GHC-Types-Name.html#t:Name" title="GHC.Types.Name">Name</a>, <a href="GHC.html#t:ForeignHValue" title="GHC">ForeignHValue</a>)] -&gt; m a -&gt; m a</li><li class="src short"><a href="#v:extendLoadedEnv">extendLoadedEnv</a> :: <a href="GHC-Runtime-Interpreter-Types.html#t:Interp" title="GHC.Runtime.Interpreter.Types">Interp</a> -&gt; [(<a href="GHC-Types-Name.html#t:Name" title="GHC.Types.Name">Name</a>, <a href="GHC.html#t:ForeignHValue" title="GHC">ForeignHValue</a>)] -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> ()</li><li class="src short"><a href="#v:deleteFromLoadedEnv">deleteFromLoadedEnv</a> :: <a href="GHC-Runtime-Interpreter-Types.html#t:Interp" title="GHC.Runtime.Interpreter.Types">Interp</a> -&gt; [<a href="GHC-Types-Name.html#t:Name" title="GHC.Types.Name">Name</a>] -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> ()</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:Loader" class="def">Loader</a> <a href="src/GHC.Linker.Types.html#Loader" class="link">Source</a> <a href="#t:Loader" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Loader" class="def">Loader</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:loader_state" class="def">loader_state</a> :: <a href="../base-4.18.2.1/Control-Concurrent-MVar.html#t:MVar" title="Control.Concurrent.MVar">MVar</a> (<a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Linker-Loader.html#t:LoaderState" title="GHC.Linker.Loader">LoaderState</a>)</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:LoaderState" class="def">LoaderState</a> <a href="src/GHC.Linker.Types.html#LoaderState" class="link">Source</a> <a href="#t:LoaderState" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:LoaderState" class="def">LoaderState</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:linker_env" class="def">linker_env</a> :: !<a href="GHC-Linker-Types.html#t:LinkerEnv" title="GHC.Linker.Types">LinkerEnv</a></dfn><div class="doc"><p>Current global mapping from Names to their true values</p></div></li><li><dfn class="src"><a id="v:bcos_loaded" class="def">bcos_loaded</a> :: !<a href="GHC-Linker-Types.html#t:LinkableSet" title="GHC.Linker.Types">LinkableSet</a></dfn><div class="doc"><p>The currently loaded interpreted modules (home package)</p></div></li><li><dfn class="src"><a id="v:objs_loaded" class="def">objs_loaded</a> :: !<a href="GHC-Linker-Types.html#t:LinkableSet" title="GHC.Linker.Types">LinkableSet</a></dfn><div class="doc"><p>And the currently-loaded compiled modules (home package)</p></div></li><li><dfn class="src"><a id="v:pkgs_loaded" class="def">pkgs_loaded</a> :: !<a href="GHC-Linker-Types.html#t:PkgsLoaded" title="GHC.Linker.Types">PkgsLoaded</a></dfn><div class="doc"><p>The currently-loaded packages; always object code
 haskell libraries, system libraries, transitive dependencies</p></div></li><li><dfn class="src"><a id="v:temp_sos" class="def">temp_sos</a> :: ![(<a href="GHC-Prelude-Basic.html#t:FilePath" title="GHC.Prelude.Basic">FilePath</a>, <a href="GHC-Prelude-Basic.html#t:String" title="GHC.Prelude.Basic">String</a>)]</dfn><div class="doc"><p>We need to remember the name of previous temporary DLL/.so
 libraries so we can link them (see #10322)</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:initLoaderState" class="def">initLoaderState</a> :: <a href="GHC-Runtime-Interpreter-Types.html#t:Interp" title="GHC.Runtime.Interpreter.Types">Interp</a> -&gt; <a href="GHC-Driver-Env-Types.html#t:HscEnv" title="GHC.Driver.Env.Types">HscEnv</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> () <a href="src/GHC.Linker.Loader.html#initLoaderState" class="link">Source</a> <a href="#v:initLoaderState" class="selflink">#</a></p><div class="doc"><p>Initialise the dynamic linker.  This entails</p><p>a) Calling the C initialisation procedure,</p><p>b) Loading any packages specified on the command line,</p><p>c) Loading any packages specified on the command line, now held in the
     <code>-l</code> options in <code>v_Opt_l</code>,</p><p>d) Loading any <code>.o/.dll</code> files specified on the command line, now held
     in <code>ldInputs</code>,</p><p>e) Loading any MacOS frameworks.</p><p>NOTE: This function is idempotent; if called more than once, it does
 nothing.  This is useful in Template Haskell, where we call it before
 trying to link.</p></div></div><div class="top"><p class="src"><a id="v:uninitializedLoader" class="def">uninitializedLoader</a> :: <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> <a href="GHC-Linker-Loader.html#t:Loader" title="GHC.Linker.Loader">Loader</a> <a href="src/GHC.Linker.Types.html#uninitializedLoader" class="link">Source</a> <a href="#v:uninitializedLoader" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:showLoaderState" class="def">showLoaderState</a> :: <a href="GHC-Runtime-Interpreter-Types.html#t:Interp" title="GHC.Runtime.Interpreter.Types">Interp</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> <a href="GHC-Utils-Outputable.html#t:SDoc" title="GHC.Utils.Outputable">SDoc</a> <a href="src/GHC.Linker.Loader.html#showLoaderState" class="link">Source</a> <a href="#v:showLoaderState" class="selflink">#</a></p><div class="doc"><p>Display the loader state.</p></div></div><div class="top"><p class="src"><a id="v:getLoaderState" class="def">getLoaderState</a> :: <a href="GHC-Runtime-Interpreter-Types.html#t:Interp" title="GHC.Runtime.Interpreter.Types">Interp</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> (<a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Linker-Loader.html#t:LoaderState" title="GHC.Linker.Loader">LoaderState</a>) <a href="src/GHC.Linker.Loader.html#getLoaderState" class="link">Source</a> <a href="#v:getLoaderState" class="selflink">#</a></p></div><a href="#g:1" id="g:1"><h1>Load &amp; Unload</h1></a><div class="top"><p class="src"><a id="v:loadExpr" class="def">loadExpr</a> :: <a href="GHC-Runtime-Interpreter-Types.html#t:Interp" title="GHC.Runtime.Interpreter.Types">Interp</a> -&gt; <a href="GHC-Driver-Env-Types.html#t:HscEnv" title="GHC.Driver.Env.Types">HscEnv</a> -&gt; <a href="GHC-Types-SrcLoc.html#t:SrcSpan" title="GHC.Types.SrcLoc">SrcSpan</a> -&gt; <a href="GHC-ByteCode-Types.html#t:UnlinkedBCO" title="GHC.ByteCode.Types">UnlinkedBCO</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> <a href="GHC.html#t:ForeignHValue" title="GHC">ForeignHValue</a> <a href="src/GHC.Linker.Loader.html#loadExpr" class="link">Source</a> <a href="#v:loadExpr" class="selflink">#</a></p><div class="doc"><p>Load a single expression, <em>including</em> first loading packages and
 modules that this expression depends on.</p><p>Raises an IO exception (<code><a href="GHC-Utils-Panic.html#v:ProgramError" title="GHC.Utils.Panic">ProgramError</a></code>) if it can't find a compiled
 version of the dependents to load.</p></div></div><div class="top"><p class="src"><a id="v:loadDecls" class="def">loadDecls</a> :: <a href="GHC-Runtime-Interpreter-Types.html#t:Interp" title="GHC.Runtime.Interpreter.Types">Interp</a> -&gt; <a href="GHC-Driver-Env-Types.html#t:HscEnv" title="GHC.Driver.Env.Types">HscEnv</a> -&gt; <a href="GHC-Types-SrcLoc.html#t:SrcSpan" title="GHC.Types.SrcLoc">SrcSpan</a> -&gt; <a href="GHC-ByteCode-Types.html#t:CompiledByteCode" title="GHC.ByteCode.Types">CompiledByteCode</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> ([(<a href="GHC-Types-Name.html#t:Name" title="GHC.Types.Name">Name</a>, <a href="GHC.html#t:ForeignHValue" title="GHC">ForeignHValue</a>)], [<a href="GHC-Linker-Types.html#t:Linkable" title="GHC.Linker.Types">Linkable</a>], <a href="GHC-Linker-Types.html#t:PkgsLoaded" title="GHC.Linker.Types">PkgsLoaded</a>) <a href="src/GHC.Linker.Loader.html#loadDecls" class="link">Source</a> <a href="#v:loadDecls" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:loadPackages" class="def">loadPackages</a> :: <a href="GHC-Runtime-Interpreter-Types.html#t:Interp" title="GHC.Runtime.Interpreter.Types">Interp</a> -&gt; <a href="GHC-Driver-Env-Types.html#t:HscEnv" title="GHC.Driver.Env.Types">HscEnv</a> -&gt; [<a href="GHC-Unit-Types.html#t:UnitId" title="GHC.Unit.Types">UnitId</a>] -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> () <a href="src/GHC.Linker.Loader.html#loadPackages" class="link">Source</a> <a href="#v:loadPackages" class="selflink">#</a></p><div class="doc"><p>Load exactly the specified packages, and their dependents (unless of
 course they are already loaded).  The dependents are loaded
 automatically, and it doesn't matter what order you specify the input
 packages.</p></div></div><div class="top"><p class="src"><a id="v:loadModule" class="def">loadModule</a> :: <a href="GHC-Runtime-Interpreter-Types.html#t:Interp" title="GHC.Runtime.Interpreter.Types">Interp</a> -&gt; <a href="GHC-Driver-Env-Types.html#t:HscEnv" title="GHC.Driver.Env.Types">HscEnv</a> -&gt; <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> () <a href="src/GHC.Linker.Loader.html#loadModule" class="link">Source</a> <a href="#v:loadModule" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:loadCmdLineLibs" class="def">loadCmdLineLibs</a> :: <a href="GHC-Runtime-Interpreter-Types.html#t:Interp" title="GHC.Runtime.Interpreter.Types">Interp</a> -&gt; <a href="GHC-Driver-Env-Types.html#t:HscEnv" title="GHC.Driver.Env.Types">HscEnv</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> () <a href="src/GHC.Linker.Loader.html#loadCmdLineLibs" class="link">Source</a> <a href="#v:loadCmdLineLibs" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:loadName" class="def">loadName</a> :: <a href="GHC-Runtime-Interpreter-Types.html#t:Interp" title="GHC.Runtime.Interpreter.Types">Interp</a> -&gt; <a href="GHC-Driver-Env-Types.html#t:HscEnv" title="GHC.Driver.Env.Types">HscEnv</a> -&gt; <a href="GHC-Types-Name.html#t:Name" title="GHC.Types.Name">Name</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> (<a href="GHC.html#t:ForeignHValue" title="GHC">ForeignHValue</a>, [<a href="GHC-Linker-Types.html#t:Linkable" title="GHC.Linker.Types">Linkable</a>], <a href="GHC-Linker-Types.html#t:PkgsLoaded" title="GHC.Linker.Types">PkgsLoaded</a>) <a href="src/GHC.Linker.Loader.html#loadName" class="link">Source</a> <a href="#v:loadName" class="selflink">#</a></p><div class="doc"><p>Load the module containing the given Name and get its associated <code><a href="GHC.html#t:HValue" title="GHC">HValue</a></code>.</p><p>Throws a <code><a href="GHC-Utils-Panic.html#v:ProgramError" title="GHC.Utils.Panic">ProgramError</a></code> if loading fails or the name cannot be found.</p></div></div><div class="top"><p class="src"><a id="v:unload" class="def">unload</a> <a href="src/GHC.Linker.Loader.html#unload" class="link">Source</a> <a href="#v:unload" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="GHC-Runtime-Interpreter-Types.html#t:Interp" title="GHC.Runtime.Interpreter.Types">Interp</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="GHC-Driver-Env-Types.html#t:HscEnv" title="GHC.Driver.Env.Types">HscEnv</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; [<a href="GHC-Linker-Types.html#t:Linkable" title="GHC.Linker.Types">Linkable</a>]</td><td class="doc"><p>The linkables to *keep*.</p></td></tr><tr><td class="src">-&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Unloading old objects ready for a new compilation sweep.</p><p>The compilation manager provides us with a list of linkables that it
 considers &quot;stable&quot;, i.e. won't be recompiled this time around.  For
 each of the modules current linked in memory,</p><ul><li>if the linkable is stable (and it's the same one -- the user may have
     recompiled the module on the side), we keep it,</li><li>otherwise, we unload it.</li><li>we also implicitly unload all temporary bindings at this point.</li></ul></div></div><a href="#g:2" id="g:2"><h1>LoadedEnv</h1></a><div class="top"><p class="src"><a id="v:withExtendedLoadedEnv" class="def">withExtendedLoadedEnv</a> :: <a href="GHC-Utils-Exception.html#t:ExceptionMonad" title="GHC.Utils.Exception">ExceptionMonad</a> m =&gt; <a href="GHC-Runtime-Interpreter-Types.html#t:Interp" title="GHC.Runtime.Interpreter.Types">Interp</a> -&gt; [(<a href="GHC-Types-Name.html#t:Name" title="GHC.Types.Name">Name</a>, <a href="GHC.html#t:ForeignHValue" title="GHC">ForeignHValue</a>)] -&gt; m a -&gt; m a <a href="src/GHC.Linker.Loader.html#withExtendedLoadedEnv" class="link">Source</a> <a href="#v:withExtendedLoadedEnv" class="selflink">#</a></p><div class="doc"><p>Temporarily extend the loaded env.</p></div></div><div class="top"><p class="src"><a id="v:extendLoadedEnv" class="def">extendLoadedEnv</a> :: <a href="GHC-Runtime-Interpreter-Types.html#t:Interp" title="GHC.Runtime.Interpreter.Types">Interp</a> -&gt; [(<a href="GHC-Types-Name.html#t:Name" title="GHC.Types.Name">Name</a>, <a href="GHC.html#t:ForeignHValue" title="GHC">ForeignHValue</a>)] -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> () <a href="src/GHC.Linker.Loader.html#extendLoadedEnv" class="link">Source</a> <a href="#v:extendLoadedEnv" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:deleteFromLoadedEnv" class="def">deleteFromLoadedEnv</a> :: <a href="GHC-Runtime-Interpreter-Types.html#t:Interp" title="GHC.Runtime.Interpreter.Types">Interp</a> -&gt; [<a href="GHC-Types-Name.html#t:Name" title="GHC.Types.Name">Name</a>] -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> () <a href="src/GHC.Linker.Loader.html#deleteFromLoadedEnv" class="link">Source</a> <a href="#v:deleteFromLoadedEnv" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>