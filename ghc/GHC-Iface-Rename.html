<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>GHC.Iface.Rename</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">ghc-9.6.7: The GHC API</span><ul class="links" id="page-menu"><li><a href="src/GHC.Iface.Rename.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">GHC.Iface.Rename</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module implements interface renaming, which is
 used to rewrite interface files on the fly when we
 are doing indefinite typechecking and need instantiations
 of modules which do not necessarily exist yet.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:rnModIface">rnModIface</a> :: <a href="GHC-Driver-Env-Types.html#t:HscEnv" title="GHC.Driver.Env.Types">HscEnv</a> -&gt; [(<a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a>, <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a>)] -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Tc-Types.html#t:NameShape" title="GHC.Tc.Types">NameShape</a> -&gt; <a href="GHC-Unit-Module-ModIface.html#t:ModIface" title="GHC.Unit.Module.ModIface">ModIface</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> (<a href="GHC-Prelude-Basic.html#t:Either" title="GHC.Prelude.Basic">Either</a> (<a href="GHC-Types-Error.html#t:Messages" title="GHC.Types.Error">Messages</a> <a href="GHC-Tc-Errors-Types.html#t:TcRnMessage" title="GHC.Tc.Errors.Types">TcRnMessage</a>) <a href="GHC-Unit-Module-ModIface.html#t:ModIface" title="GHC.Unit.Module.ModIface">ModIface</a>)</li><li class="src short"><a href="#v:rnModExports">rnModExports</a> :: <a href="GHC-Driver-Env-Types.html#t:HscEnv" title="GHC.Driver.Env.Types">HscEnv</a> -&gt; [(<a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a>, <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a>)] -&gt; <a href="GHC-Unit-Module-ModIface.html#t:ModIface" title="GHC.Unit.Module.ModIface">ModIface</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> (<a href="GHC-Prelude-Basic.html#t:Either" title="GHC.Prelude.Basic">Either</a> (<a href="GHC-Types-Error.html#t:Messages" title="GHC.Types.Error">Messages</a> <a href="GHC-Tc-Errors-Types.html#t:TcRnMessage" title="GHC.Tc.Errors.Types">TcRnMessage</a>) [<a href="GHC-Types-Avail.html#t:AvailInfo" title="GHC.Types.Avail">AvailInfo</a>])</li><li class="src short"><a href="#v:tcRnModIface">tcRnModIface</a> :: [(<a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a>, <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a>)] -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Tc-Types.html#t:NameShape" title="GHC.Tc.Types">NameShape</a> -&gt; <a href="GHC-Unit-Module-ModIface.html#t:ModIface" title="GHC.Unit.Module.ModIface">ModIface</a> -&gt; <a href="GHC-Tc-Types.html#t:TcM" title="GHC.Tc.Types">TcM</a> <a href="GHC-Unit-Module-ModIface.html#t:ModIface" title="GHC.Unit.Module.ModIface">ModIface</a></li><li class="src short"><a href="#v:tcRnModExports">tcRnModExports</a> :: [(<a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a>, <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a>)] -&gt; <a href="GHC-Unit-Module-ModIface.html#t:ModIface" title="GHC.Unit.Module.ModIface">ModIface</a> -&gt; <a href="GHC-Tc-Types.html#t:TcM" title="GHC.Tc.Types">TcM</a> [<a href="GHC-Types-Avail.html#t:AvailInfo" title="GHC.Types.Avail">AvailInfo</a>]</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:rnModIface" class="def">rnModIface</a> :: <a href="GHC-Driver-Env-Types.html#t:HscEnv" title="GHC.Driver.Env.Types">HscEnv</a> -&gt; [(<a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a>, <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a>)] -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Tc-Types.html#t:NameShape" title="GHC.Tc.Types">NameShape</a> -&gt; <a href="GHC-Unit-Module-ModIface.html#t:ModIface" title="GHC.Unit.Module.ModIface">ModIface</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> (<a href="GHC-Prelude-Basic.html#t:Either" title="GHC.Prelude.Basic">Either</a> (<a href="GHC-Types-Error.html#t:Messages" title="GHC.Types.Error">Messages</a> <a href="GHC-Tc-Errors-Types.html#t:TcRnMessage" title="GHC.Tc.Errors.Types">TcRnMessage</a>) <a href="GHC-Unit-Module-ModIface.html#t:ModIface" title="GHC.Unit.Module.ModIface">ModIface</a>) <a href="src/GHC.Iface.Rename.html#rnModIface" class="link">Source</a> <a href="#v:rnModIface" class="selflink">#</a></p><div class="doc"><p>What we have is a generalized ModIface, which corresponds to
 a module that looks like p[A=&lt;A&gt;]:B.  We need a *specific* ModIface, e.g.
 p[A=q():A]:B (or maybe even p[A=&lt;B&gt;]:B) which we load
 up (either to merge it, or to just use during typechecking).</p><p>Suppose we have:</p><p>p[A=&lt;A&gt;]:M  ==&gt;  p[A=q():A]:M</p><p>Substitute all occurrences of &lt;A&gt; with q():A (renameHoleModule).
 Then, for any Name of form {A.T}, replace the Name with
 the Name according to the exports of the implementing module.
 This works even for p[A=&lt;B&gt;]:M, since we just read in the
 exports of B.hi, which is assumed to be ready now.</p><p>This function takes an optional <code><a href="GHC-Tc-Types.html#t:NameShape" title="GHC.Tc.Types">NameShape</a></code>, which can be used
 to further refine the identities in this interface: suppose
 we read a declaration for {H.T} but we actually know that this
 should be Foo.T; then we'll also rename this (this is used
 when loading an interface to merge it into a requirement.)</p></div></div><div class="top"><p class="src"><a id="v:rnModExports" class="def">rnModExports</a> :: <a href="GHC-Driver-Env-Types.html#t:HscEnv" title="GHC.Driver.Env.Types">HscEnv</a> -&gt; [(<a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a>, <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a>)] -&gt; <a href="GHC-Unit-Module-ModIface.html#t:ModIface" title="GHC.Unit.Module.ModIface">ModIface</a> -&gt; <a href="GHC-Prelude-Basic.html#t:IO" title="GHC.Prelude.Basic">IO</a> (<a href="GHC-Prelude-Basic.html#t:Either" title="GHC.Prelude.Basic">Either</a> (<a href="GHC-Types-Error.html#t:Messages" title="GHC.Types.Error">Messages</a> <a href="GHC-Tc-Errors-Types.html#t:TcRnMessage" title="GHC.Tc.Errors.Types">TcRnMessage</a>) [<a href="GHC-Types-Avail.html#t:AvailInfo" title="GHC.Types.Avail">AvailInfo</a>]) <a href="src/GHC.Iface.Rename.html#rnModExports" class="link">Source</a> <a href="#v:rnModExports" class="selflink">#</a></p><div class="doc"><p>Rename just the exports of a <code><a href="GHC-Unit-Module-ModIface.html#t:ModIface" title="GHC.Unit.Module.ModIface">ModIface</a></code>.  Useful when we're doing
 shaping prior to signature merging.</p></div></div><div class="top"><p class="src"><a id="v:tcRnModIface" class="def">tcRnModIface</a> :: [(<a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a>, <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a>)] -&gt; <a href="GHC-Prelude-Basic.html#t:Maybe" title="GHC.Prelude.Basic">Maybe</a> <a href="GHC-Tc-Types.html#t:NameShape" title="GHC.Tc.Types">NameShape</a> -&gt; <a href="GHC-Unit-Module-ModIface.html#t:ModIface" title="GHC.Unit.Module.ModIface">ModIface</a> -&gt; <a href="GHC-Tc-Types.html#t:TcM" title="GHC.Tc.Types">TcM</a> <a href="GHC-Unit-Module-ModIface.html#t:ModIface" title="GHC.Unit.Module.ModIface">ModIface</a> <a href="src/GHC.Iface.Rename.html#tcRnModIface" class="link">Source</a> <a href="#v:tcRnModIface" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:tcRnModExports" class="def">tcRnModExports</a> :: [(<a href="Language-Haskell-Syntax-Module-Name.html#t:ModuleName" title="Language.Haskell.Syntax.Module.Name">ModuleName</a>, <a href="GHC-Unit-Types.html#t:Module" title="GHC.Unit.Types">Module</a>)] -&gt; <a href="GHC-Unit-Module-ModIface.html#t:ModIface" title="GHC.Unit.Module.ModIface">ModIface</a> -&gt; <a href="GHC-Tc-Types.html#t:TcM" title="GHC.Tc.Types">TcM</a> [<a href="GHC-Types-Avail.html#t:AvailInfo" title="GHC.Types.Avail">AvailInfo</a>] <a href="src/GHC.Iface.Rename.html#tcRnModExports" class="link">Source</a> <a href="#v:tcRnModExports" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>